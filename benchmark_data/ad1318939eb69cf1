<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html><feed xmlns="http://www.w3.org/2005/Atom"><title>Tom Hazledine</title><generator uri="https://jsssg.org/" version="0.1.14">JS.SSG</generator><subtitle>Developer. Podcaster. Nerd.</subtitle><link href="https://tomhazledine.com/feed.xml" rel="self"/><link href="https://tomhazledine.com"/><updated>2024-09-21T00:00:00Z</updated><id>https://tomhazledine.com/</id><author><name>Tom Hazledine</name><email>tom@tomhazledine.com</email></author><entry><title>Alternatives to cosine similarity</title><link href="https://tomhazledine.com/cosine-similarity-alternatives/"/><updated>2024-09-21T00:00:00Z</updated><id>https://tomhazledine.com/cosine-similarity-alternatives/</id><content type="html">&lt;p&gt;Last month we looked at &lt;a href=&quot;https://tomhazledine.com/cosine-similarity/&quot;&gt;how &lt;strong&gt;cosine similarity&lt;/strong&gt; works&lt;/a&gt; and how we can use it to calculate the &quot;similarity&quot; of two vectors. But why choose cosine similarity over any other distance function? Why not use Euclidean distance, or Manhattan, or Chebyshev?&lt;/p&gt;&lt;p&gt;In this article we&#x27;ll dig in to some alternative methods for comparing vectors, and see how they compare to cosine similarity. Are any of them faster? Are any of them more accurate?&lt;/p&gt;&lt;nav class=&quot;toc&quot;&gt;&lt;h2 id=&quot;in-this-article&quot;&gt;In this article&lt;/h2&gt;&lt;ol&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#overview&quot;&gt;Overview &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#the-distance-functions&quot;&gt;The distance functions &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;ol class=&quot;stack--small&quot;&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#cosine-similarity&quot;&gt;Cosine similarity &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#euclidean-distance&quot;&gt;Euclidean distance &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#manhattan-distance&quot;&gt;Manhattan distance &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#chebyshev-distance&quot;&gt;Chebyshev distance &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#other-ways-to-measure-similarity&quot;&gt;Other ways to measure similarity &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#testing-the-functions&quot;&gt;Testing the functions &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;ol class=&quot;stack--small&quot;&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#performance-results&quot;&gt;Performance results &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#accuracy-results&quot;&gt;Accuracy results &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#which-is-the-best-choice-for-comparing-llm-embeddings&quot;&gt;Which is the best choice for comparing LLM embeddings? &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/nav&gt;&lt;h2 id=&quot;overview&quot;&gt;Overview&lt;/h2&gt;&lt;p&gt;Comparing vectors is a powerful tool when working with LLM embeddings. It&#x27;s often the technical underpinning of RAG pipelines (&lt;em&gt;Retrieval Augmented Generation&lt;/em&gt;), for instance, where related content is &quot;found&quot; and injected into the context of a message passed to an LLM. Across the web, cosine similarity is the most frequently recommended way to compare vectors.&lt;/p&gt;&lt;p&gt;OpenAI themselves say as much &lt;a href=&quot;https://platform.openai.com/docs/guides/embeddings/which-distance-function-should-i-use&quot;&gt;in their documentation&lt;/a&gt;:&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;Which distance function should I use?&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;We recommend cosine similarity. The choice of distance function typically doesn’t matter much.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;But there are plenty of other distance functions, so &lt;em&gt;why&lt;/em&gt; is cosine similarity the most recommended? And are there any other functions that might be better suited to comparing LLM embeddings?&lt;/p&gt;&lt;h3 id=&quot;what-are-we-comparing&quot;&gt;What are we comparing?&lt;/h3&gt;&lt;figure&gt;&lt;div class=&quot;cluster vce__graph-cluster&quot;&gt;&lt;div id=&quot;vector-plain-0&quot;&gt;&lt;svg class=&quot;cosine-examples &quot; viewBox=&quot;0 0 260 260&quot; preserveAspectRatio=&quot;none&quot;&gt;&lt;rect class=&quot;cosine-examples__background&quot; x=&quot;30&quot; y=&quot;30&quot; width=&quot;200&quot; height=&quot;200&quot;/&gt;&lt;g transform=&quot;translate(0,230)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--bottom&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;middle&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M30,6V0H230V6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(30,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(80,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(130,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(180,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(230,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=&quot;translate(30,0)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--left&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;end&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M-6,230H0V30H-6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,230)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,180)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,130)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,80)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,30)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g class=&quot;cosine-examples__bg-lines&quot;&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;180&quot; x2=&quot;230&quot; y2=&quot;180&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;30&quot; y1=&quot;130&quot; x2=&quot;230&quot; y2=&quot;130&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;80&quot; x2=&quot;230&quot; y2=&quot;80&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;80&quot; y1=&quot;230&quot; x2=&quot;80&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;130&quot; y1=&quot;230&quot; x2=&quot;130&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;180&quot; y1=&quot;230&quot; x2=&quot;180&quot; y2=&quot;30&quot;/&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;head&quot; orient=&quot;auto&quot; markerWidth=&quot;4&quot; markerHeight=&quot;4&quot; refX=&quot;3&quot; refY=&quot;2&quot;&gt;&lt;path d=&quot;M0,0 V4 L4,2 Z&quot; class=&quot;cosine-examples__arrowhead&quot;/&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;g class=&quot;cosine-examples__vectors&quot;&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 180 80&quot;/&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 200 160&quot;/&gt;&lt;/g&gt;&lt;g class=&quot;cosine-examples__labels&quot;&gt;&lt;text class=&quot;cosine-examples__label &quot; x=&quot;180&quot; y=&quot;80&quot; pointer-events=&quot;none&quot; text-anchor=&quot;middle&quot; dy=&quot;-0.6rem&quot;&gt;0.5, 0.5&lt;/text&gt;&lt;text class=&quot;cosine-examples__label &quot; x=&quot;200&quot; y=&quot;160&quot; pointer-events=&quot;none&quot; text-anchor=&quot;middle&quot; dy=&quot;-0.6rem&quot;&gt;0.7, -0.3&lt;/text&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div id=&quot;vector-plain-1&quot;&gt;&lt;svg class=&quot;cosine-examples &quot; viewBox=&quot;0 0 260 260&quot; preserveAspectRatio=&quot;none&quot;&gt;&lt;rect class=&quot;cosine-examples__background&quot; x=&quot;30&quot; y=&quot;30&quot; width=&quot;200&quot; height=&quot;200&quot;/&gt;&lt;g transform=&quot;translate(0,230)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--bottom&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;middle&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M30,6V0H230V6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(30,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(80,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(130,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(180,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(230,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=&quot;translate(30,0)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--left&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;end&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M-6,230H0V30H-6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,230)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,180)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,130)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,80)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,30)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g class=&quot;cosine-examples__bg-lines&quot;&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;180&quot; x2=&quot;230&quot; y2=&quot;180&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;30&quot; y1=&quot;130&quot; x2=&quot;230&quot; y2=&quot;130&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;80&quot; x2=&quot;230&quot; y2=&quot;80&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;80&quot; y1=&quot;230&quot; x2=&quot;80&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;130&quot; y1=&quot;230&quot; x2=&quot;130&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;180&quot; y1=&quot;230&quot; x2=&quot;180&quot; y2=&quot;30&quot;/&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;head&quot; orient=&quot;auto&quot; markerWidth=&quot;4&quot; markerHeight=&quot;4&quot; refX=&quot;3&quot; refY=&quot;2&quot;&gt;&lt;path d=&quot;M0,0 V4 L4,2 Z&quot; class=&quot;cosine-examples__arrowhead&quot;/&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;g class=&quot;cosine-examples__vectors&quot;&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 150 90.00000000000001&quot;/&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 60.00000000000001 150&quot;/&gt;&lt;/g&gt;&lt;g class=&quot;cosine-examples__labels&quot;&gt;&lt;text class=&quot;cosine-examples__label &quot; x=&quot;150&quot; y=&quot;90.00000000000001&quot; pointer-events=&quot;none&quot; text-anchor=&quot;middle&quot; dy=&quot;-0.6rem&quot;&gt;0.2, 0.4&lt;/text&gt;&lt;text class=&quot;cosine-examples__label &quot; x=&quot;60.00000000000001&quot; y=&quot;150&quot; pointer-events=&quot;none&quot; text-anchor=&quot;middle&quot; dy=&quot;-0.6rem&quot;&gt;-0.7, -0.2&lt;/text&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div id=&quot;vector-plain-2&quot;&gt;&lt;svg class=&quot;cosine-examples &quot; viewBox=&quot;0 0 260 260&quot; preserveAspectRatio=&quot;none&quot;&gt;&lt;rect class=&quot;cosine-examples__background&quot; x=&quot;30&quot; y=&quot;30&quot; width=&quot;200&quot; height=&quot;200&quot;/&gt;&lt;g transform=&quot;translate(0,230)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--bottom&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;middle&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M30,6V0H230V6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(30,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(80,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(130,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(180,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(230,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=&quot;translate(30,0)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--left&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;end&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M-6,230H0V30H-6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,230)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,180)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,130)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,80)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,30)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g class=&quot;cosine-examples__bg-lines&quot;&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;180&quot; x2=&quot;230&quot; y2=&quot;180&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;30&quot; y1=&quot;130&quot; x2=&quot;230&quot; y2=&quot;130&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;80&quot; x2=&quot;230&quot; y2=&quot;80&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;80&quot; y1=&quot;230&quot; x2=&quot;80&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;130&quot; y1=&quot;230&quot; x2=&quot;130&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;180&quot; y1=&quot;230&quot; x2=&quot;180&quot; y2=&quot;30&quot;/&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;head&quot; orient=&quot;auto&quot; markerWidth=&quot;4&quot; markerHeight=&quot;4&quot; refX=&quot;3&quot; refY=&quot;2&quot;&gt;&lt;path d=&quot;M0,0 V4 L4,2 Z&quot; class=&quot;cosine-examples__arrowhead&quot;/&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;g class=&quot;cosine-examples__vectors&quot;&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 160 50&quot;/&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 170 150&quot;/&gt;&lt;/g&gt;&lt;g class=&quot;cosine-examples__labels&quot;&gt;&lt;text class=&quot;cosine-examples__label &quot; x=&quot;160&quot; y=&quot;50&quot; pointer-events=&quot;none&quot; text-anchor=&quot;middle&quot; dy=&quot;1.2rem&quot;&gt;0.3, 0.8&lt;/text&gt;&lt;text class=&quot;cosine-examples__label &quot; x=&quot;170&quot; y=&quot;150&quot; pointer-events=&quot;none&quot; text-anchor=&quot;middle&quot; dy=&quot;-0.6rem&quot;&gt;0.4, -0.2&lt;/text&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;figcaption&gt;Three pairs of simple vectors in 2D space. We&#x27;ll use these to illustrate the different distance functions later in this article.&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;The end goal for all these similarity functions is to compare &lt;strong&gt;vectors&lt;/strong&gt;. A vector is an array of numbers, and we refer to them as &quot;vectors&quot; because they can be conceptualized as points in space. A &quot;two dimensional&quot; vector (i.e. an array with two numbers) can be thought of as a point on a graph. A &quot;three dimensional&quot; vector (an array with three numbers) can be thought of as a point in 3D space. Their magnitude is the distance from the origin (&lt;code&gt;0, 0&lt;/code&gt; for 2D, or &lt;code&gt;0, 0, 0&lt;/code&gt; for 3D) to the point.&lt;/p&gt;&lt;p&gt;In practice, I use similarity functions to compare LLM embeddings which are vectors with ~1,5k dimensions. For the purposes of this article, we&#x27;ll stick to visualizing the different functions in two dimensions, but all the concepts covered are applicable to multidimensional vectors.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; in the context of LLM embeddings, a vector is a list of numbers that represents the &quot;meaning&quot; of a piece of text. The more &quot;similar&quot; the vectors, the more similar the meanings of the text. For more detail, see my post about &lt;a href=&quot;https://tomhazledine.com/mapping-llm-embeddings-in-3d/&quot;&gt;mapping LLM embeddings in three dimensions&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;&lt;hr/&gt;&lt;nav class=&quot;toc&quot;&gt;&lt;h2 id=&quot;the-distance-functions&quot;&gt;The distance functions&lt;/h2&gt;&lt;ol&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#cosine-similarity&quot;&gt;Cosine similarity &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#euclidean-distance&quot;&gt;Euclidean distance &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#manhattan-distance&quot;&gt;Manhattan distance &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#chebyshev-distance&quot;&gt;Chebyshev distance &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/nav&gt;&lt;h2 id=&quot;cosine-similarity&quot;&gt;Cosine similarity&lt;/h2&gt;&lt;p&gt;In case you missed &lt;a href=&quot;https://tomhazledine.com/cosine-similarity/&quot;&gt;the first article&lt;/a&gt;, here&#x27;s a quick recap of how cosine similarity works:&lt;/p&gt;&lt;figure class=&quot;stack--small&quot;&gt;&lt;div class=&quot;maths-block&quot;&gt;&lt;span class=&quot;katex&quot;&gt;&lt;span class=&quot;katex-mathml&quot;&gt;&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo separator=&quot;true&quot;&gt;,&lt;/mo&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;cos&lt;/mi&gt;&lt;mo&gt;⁡&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;θ&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mi mathvariant=&quot;bold&quot;&gt;A&lt;/mi&gt;&lt;mo&gt;⋅&lt;/mo&gt;&lt;mi mathvariant=&quot;bold&quot;&gt;B&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;mi mathvariant=&quot;bold&quot;&gt;A&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;mo&gt;×&lt;/mo&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;mi mathvariant=&quot;bold&quot;&gt;B&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;\mathit{d}(A,B) = \cos(\theta) = \frac{\mathbf{A} \cdot \mathbf{B}}{||\mathbf{A}|| \times ||\mathbf{B}||}&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&quot;katex-html&quot; aria-hidden=&quot;true&quot;&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1em;vertical-align:-0.25em;&quot;/&gt;&lt;span class=&quot;mord mathit&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;mopen&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;mpunct&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.1667em;&quot;/&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.05017em;&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;mclose&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;span class=&quot;mrel&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1em;vertical-align:-0.25em;&quot;/&gt;&lt;span class=&quot;mop&quot;&gt;cos&lt;/span&gt;&lt;span class=&quot;mopen&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.02778em;&quot;&gt;θ&lt;/span&gt;&lt;span class=&quot;mclose&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;span class=&quot;mrel&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1.3943em;vertical-align:-0.52em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mopen nulldelimiter&quot;/&gt;&lt;span class=&quot;mfrac&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.8743em;&quot;&gt;&lt;span style=&quot;top:-2.655em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;∣∣&lt;/span&gt;&lt;span class=&quot;mord mathbf mtight&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;mord mtight&quot;&gt;∣∣&lt;/span&gt;&lt;span class=&quot;mbin mtight&quot;&gt;×&lt;/span&gt;&lt;span class=&quot;mord mtight&quot;&gt;∣∣&lt;/span&gt;&lt;span class=&quot;mord mathbf mtight&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;mord mtight&quot;&gt;∣∣&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.23em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;frac-line&quot; style=&quot;border-bottom-width:0.04em;&quot;/&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.394em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mathbf mtight&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;mbin mtight&quot;&gt;⋅&lt;/span&gt;&lt;span class=&quot;mord mathbf mtight&quot;&gt;B&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.52em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mclose nulldelimiter&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;figcaption&gt;In this and following formulae, we&#x27;ll use &lt;span class=&quot;maths&quot;&gt;&lt;em&gt;d(A,B)&lt;/em&gt;&lt;/span&gt; to represent the distance &lt;span class=&quot;maths&quot;&gt;d&lt;/span&gt; between vectors &lt;span class=&quot;maths&quot;&gt;A&lt;/span&gt; and &lt;span class=&quot;maths&quot;&gt;B&lt;/span&gt;.&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;In cosine similarity, the final value is the cosine of the angle between two vectors. The similarity value is calculated by taking the dot product of the two vectors (&lt;span class=&quot;maths&quot;&gt;A⋅B&lt;/span&gt;) and dividing it by the product of the magnitudes of the two vectors (&lt;span class=&quot;maths&quot;&gt;∣∣A∣∣×∣∣B∣∣&lt;/span&gt;).&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;You can learn more about &lt;a href=&quot;https://tomhazledine.com/cosine-similarity/#what-is-the-dot-product-of-two-vectors&quot;&gt;what &quot;dot product&quot; means (and how to calculate it)&lt;/a&gt; in the previous article.&lt;/p&gt;&lt;/blockquote&gt;&lt;figure&gt;&lt;div class=&quot;cluster vce__graph-cluster&quot;&gt;&lt;div id=&quot;vector-cosine-0&quot;&gt;&lt;svg class=&quot;cosine-examples &quot; viewBox=&quot;0 0 260 260&quot; preserveAspectRatio=&quot;none&quot;&gt;&lt;rect class=&quot;cosine-examples__background&quot; x=&quot;30&quot; y=&quot;30&quot; width=&quot;200&quot; height=&quot;200&quot;/&gt;&lt;g transform=&quot;translate(0,230)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--bottom&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;middle&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M30,6V0H230V6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(30,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(80,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(130,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(180,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(230,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=&quot;translate(30,0)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--left&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;end&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M-6,230H0V30H-6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,230)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,180)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,130)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,80)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,30)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g class=&quot;cosine-examples__bg-lines&quot;&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;180&quot; x2=&quot;230&quot; y2=&quot;180&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;30&quot; y1=&quot;130&quot; x2=&quot;230&quot; y2=&quot;130&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;80&quot; x2=&quot;230&quot; y2=&quot;80&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;80&quot; y1=&quot;230&quot; x2=&quot;80&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;130&quot; y1=&quot;230&quot; x2=&quot;130&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;180&quot; y1=&quot;230&quot; x2=&quot;180&quot; y2=&quot;30&quot;/&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;head&quot; orient=&quot;auto&quot; markerWidth=&quot;4&quot; markerHeight=&quot;4&quot; refX=&quot;3&quot; refY=&quot;2&quot;&gt;&lt;path d=&quot;M0,0 V4 L4,2 Z&quot; class=&quot;cosine-examples__arrowhead&quot;/&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;mask id=&quot;vector-mask-0.5-0.5-0.7--0.3&quot;&gt;&lt;path d=&quot;M130, 130,
    180, 80,
    230, 30,
    230, 230,
    200, 160&quot; fill=&quot;white&quot;/&gt;&lt;/mask&gt;&lt;circle mask=&quot;url(#vector-mask-0.5-0.5-0.7--0.3)&quot; class=&quot;cosine-examples__angle&quot; cx=&quot;130&quot; cy=&quot;130&quot; r=&quot;26&quot;/&gt;&lt;text class=&quot;cosine-examples__label cosine-examples__label--theta&quot; x=&quot;165&quot; y=&quot;130&quot; pointer-events=&quot;none&quot; text-anchor=&quot;middle&quot; dy=&quot;-0.6rem&quot;&gt;θ&lt;/text&gt;&lt;g class=&quot;cosine-examples__vectors&quot;&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 180 80&quot;/&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 200 160&quot;/&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div id=&quot;vector-cosine-1&quot;&gt;&lt;svg class=&quot;cosine-examples &quot; viewBox=&quot;0 0 260 260&quot; preserveAspectRatio=&quot;none&quot;&gt;&lt;rect class=&quot;cosine-examples__background&quot; x=&quot;30&quot; y=&quot;30&quot; width=&quot;200&quot; height=&quot;200&quot;/&gt;&lt;g transform=&quot;translate(0,230)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--bottom&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;middle&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M30,6V0H230V6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(30,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(80,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(130,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(180,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(230,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=&quot;translate(30,0)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--left&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;end&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M-6,230H0V30H-6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,230)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,180)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,130)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,80)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,30)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g class=&quot;cosine-examples__bg-lines&quot;&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;180&quot; x2=&quot;230&quot; y2=&quot;180&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;30&quot; y1=&quot;130&quot; x2=&quot;230&quot; y2=&quot;130&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;80&quot; x2=&quot;230&quot; y2=&quot;80&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;80&quot; y1=&quot;230&quot; x2=&quot;80&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;130&quot; y1=&quot;230&quot; x2=&quot;130&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;180&quot; y1=&quot;230&quot; x2=&quot;180&quot; y2=&quot;30&quot;/&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;head&quot; orient=&quot;auto&quot; markerWidth=&quot;4&quot; markerHeight=&quot;4&quot; refX=&quot;3&quot; refY=&quot;2&quot;&gt;&lt;path d=&quot;M0,0 V4 L4,2 Z&quot; class=&quot;cosine-examples__arrowhead&quot;/&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;mask id=&quot;vector-mask-0.2-0.4--0.7--0.2&quot;&gt;&lt;path d=&quot;M130, 130,
    150, 90.00000000000001,
    230, 30,
    230, 230,
    60.00000000000001, 150&quot; fill=&quot;white&quot;/&gt;&lt;/mask&gt;&lt;circle mask=&quot;url(#vector-mask-0.2-0.4--0.7--0.2)&quot; class=&quot;cosine-examples__angle&quot; cx=&quot;130&quot; cy=&quot;130&quot; r=&quot;26&quot;/&gt;&lt;text class=&quot;cosine-examples__label cosine-examples__label--theta&quot; x=&quot;165&quot; y=&quot;130&quot; pointer-events=&quot;none&quot; text-anchor=&quot;middle&quot; dy=&quot;-0.6rem&quot;&gt;θ&lt;/text&gt;&lt;g class=&quot;cosine-examples__vectors&quot;&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 150 90.00000000000001&quot;/&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 60.00000000000001 150&quot;/&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div id=&quot;vector-cosine-2&quot;&gt;&lt;svg class=&quot;cosine-examples &quot; viewBox=&quot;0 0 260 260&quot; preserveAspectRatio=&quot;none&quot;&gt;&lt;rect class=&quot;cosine-examples__background&quot; x=&quot;30&quot; y=&quot;30&quot; width=&quot;200&quot; height=&quot;200&quot;/&gt;&lt;g transform=&quot;translate(0,230)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--bottom&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;middle&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M30,6V0H230V6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(30,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(80,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(130,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(180,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(230,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=&quot;translate(30,0)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--left&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;end&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M-6,230H0V30H-6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,230)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,180)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,130)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,80)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,30)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g class=&quot;cosine-examples__bg-lines&quot;&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;180&quot; x2=&quot;230&quot; y2=&quot;180&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;30&quot; y1=&quot;130&quot; x2=&quot;230&quot; y2=&quot;130&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;80&quot; x2=&quot;230&quot; y2=&quot;80&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;80&quot; y1=&quot;230&quot; x2=&quot;80&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;130&quot; y1=&quot;230&quot; x2=&quot;130&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;180&quot; y1=&quot;230&quot; x2=&quot;180&quot; y2=&quot;30&quot;/&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;head&quot; orient=&quot;auto&quot; markerWidth=&quot;4&quot; markerHeight=&quot;4&quot; refX=&quot;3&quot; refY=&quot;2&quot;&gt;&lt;path d=&quot;M0,0 V4 L4,2 Z&quot; class=&quot;cosine-examples__arrowhead&quot;/&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;mask id=&quot;vector-mask-0.3-0.8-0.4--0.2&quot;&gt;&lt;path d=&quot;M130, 130,
    160, 50,
    230, 30,
    230, 230,
    170, 150&quot; fill=&quot;white&quot;/&gt;&lt;/mask&gt;&lt;circle mask=&quot;url(#vector-mask-0.3-0.8-0.4--0.2)&quot; class=&quot;cosine-examples__angle&quot; cx=&quot;130&quot; cy=&quot;130&quot; r=&quot;26&quot;/&gt;&lt;text class=&quot;cosine-examples__label cosine-examples__label--theta&quot; x=&quot;165&quot; y=&quot;130&quot; pointer-events=&quot;none&quot; text-anchor=&quot;middle&quot; dy=&quot;-0.6rem&quot;&gt;θ&lt;/text&gt;&lt;g class=&quot;cosine-examples__vectors&quot;&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 160 50&quot;/&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 170 150&quot;/&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;figcaption&gt;Cosine similarity uses the angle &lt;span class=&quot;maths&quot;&gt;θ&lt;/span&gt; between two vectors in 2D space.&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;Vectors created by OpenAI embeddings are normalized to a magnitude of 1. The full cosine similarity function does it&#x27;s own normalization (by dividing by the magnitudes of the vectors), but the fact that the vectors are already normalized means we can simplify the function to &lt;em&gt;just&lt;/em&gt; the dot product:&lt;/p&gt;&lt;div class=&quot;maths-block&quot;&gt;&lt;span class=&quot;katex&quot;&gt;&lt;span class=&quot;katex-mathml&quot;&gt;&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mtext&gt;Normalized&lt;/mtext&gt;&lt;mi&gt;cos&lt;/mi&gt;&lt;mo&gt;⁡&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;θ&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;⋅&lt;/mo&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;/mrow&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;\text{Normalized} \cos(\theta) = A \cdot B&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&quot;katex-html&quot; aria-hidden=&quot;true&quot;&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1em;vertical-align:-0.25em;&quot;/&gt;&lt;span class=&quot;mord text&quot;&gt;&lt;span class=&quot;mord&quot;&gt;Normalized&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.1667em;&quot;/&gt;&lt;span class=&quot;mop&quot;&gt;cos&lt;/span&gt;&lt;span class=&quot;mopen&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.02778em;&quot;&gt;θ&lt;/span&gt;&lt;span class=&quot;mclose&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;span class=&quot;mrel&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:0.6833em;&quot;/&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;span class=&quot;mbin&quot;&gt;⋅&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:0.6833em;&quot;/&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.05017em;&quot;&gt;B&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;p&gt;As the &lt;a href=&quot;https://platform.openai.com/docs/guides/embeddings/which-distance-function-should-i-use&quot;&gt;OpenAI documentation says&lt;/a&gt;:&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;OpenAI embeddings are normalized to length 1, which means that:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Cosine similarity can be computed slightly faster using just a dot product&lt;/li&gt;&lt;li&gt;Cosine similarity and Euclidean distance will result in the identical rankings&lt;/li&gt;&lt;/ul&gt;&lt;/blockquote&gt;&lt;p&gt;In JavaScript, calculating the dot product can be a simple one-liner (if you think &lt;code&gt;reduce()&lt;/code&gt; functions are simple):&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;dotProduct&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;a, b&lt;/span&gt;) =&gt; a.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;acc, cur, i&lt;/span&gt;) =&gt;&lt;/span&gt; acc + cur * b[i], &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);
&lt;/code&gt;&lt;/pre&gt;&lt;hr/&gt;&lt;h2 id=&quot;euclidean-distance&quot;&gt;Euclidean distance&lt;/h2&gt;&lt;p&gt;By comparison to cosine similarity, &lt;strong&gt;Euclidean distance&lt;/strong&gt; is a much simpler concept to visualize. It&#x27;s a measure of the straight-line distance between two points in space. It&#x27;s calculated by taking the square root of the sum of the squared differences between the two vectors.&lt;/p&gt;&lt;figure class=&quot;stack--small&quot;&gt;&lt;div class=&quot;maths-block&quot;&gt;&lt;span class=&quot;katex&quot;&gt;&lt;span class=&quot;katex-mathml&quot;&gt;&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo separator=&quot;true&quot;&gt;,&lt;/mo&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msqrt&gt;&lt;mrow&gt;&lt;msubsup&gt;&lt;mo&gt;∑&lt;/mo&gt;&lt;mrow&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msubsup&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;msup&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msup&gt;&lt;/mrow&gt;&lt;/msqrt&gt;&lt;/mrow&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;\mathit{d}(A,B) = \sqrt{\sum_{i=1}^n (A_i - B_i)^2}&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&quot;katex-html&quot; aria-hidden=&quot;true&quot;&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1em;vertical-align:-0.25em;&quot;/&gt;&lt;span class=&quot;mord mathit&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;mopen&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;mpunct&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.1667em;&quot;/&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.05017em;&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;mclose&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;span class=&quot;mrel&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1.24em;vertical-align:-0.3027em;&quot;/&gt;&lt;span class=&quot;mord sqrt&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.9373em;&quot;&gt;&lt;span class=&quot;svg-align&quot; style=&quot;top:-3.2em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3.2em;&quot;/&gt;&lt;span class=&quot;mord&quot; style=&quot;padding-left:1em;&quot;&gt;&lt;span class=&quot;mop&quot;&gt;&lt;span class=&quot;mop op-symbol small-op&quot; style=&quot;position:relative;top:0em;&quot;&gt;∑&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.8043em;&quot;&gt;&lt;span style=&quot;top:-2.4003em;margin-left:0em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mathnormal mtight&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;mrel mtight&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mord mtight&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.2029em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mathnormal mtight&quot;&gt;n&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.2997em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mopen&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.3117em;&quot;&gt;&lt;span style=&quot;top:-2.55em;margin-left:0em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mathnormal mtight&quot;&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.15em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;span class=&quot;mbin&quot;&gt;−&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.05017em;&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.3117em;&quot;&gt;&lt;span style=&quot;top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mathnormal mtight&quot;&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.15em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mclose&quot;&gt;&lt;span class=&quot;mclose&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.7401em;&quot;&gt;&lt;span style=&quot;top:-2.989em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;top:-2.8973em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3.2em;&quot;/&gt;&lt;span class=&quot;hide-tail&quot; style=&quot;min-width:1.02em;height:1.28em;&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;400em&quot; height=&quot;1.28em&quot; viewBox=&quot;0 0 400000 1296&quot; preserveAspectRatio=&quot;xMinYMin slice&quot;&gt;&lt;path d=&quot;M263,681c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l0 -0
c4.7,-7.3,11,-11,19,-11
H40000v40H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M1001 80h400000v40h-400000z&quot;/&gt;&lt;/svg&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.3027em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;figcaption&gt;Finding Euclidean distance &lt;span class=&quot;maths&quot;&gt;&lt;em&gt;d&lt;/em&gt;&lt;/span&gt; for vectors &lt;span class=&quot;maths&quot;&gt;&lt;em&gt;A&lt;/em&gt;&lt;/span&gt; and &lt;span class=&quot;maths&quot;&gt;&lt;em&gt;B&lt;/em&gt;&lt;/span&gt; of length &lt;span class=&quot;maths&quot;&gt;&lt;em&gt;n&lt;/em&gt;&lt;/span&gt;.&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure&gt;&lt;div class=&quot;cluster vce__graph-cluster&quot;&gt;&lt;div id=&quot;vector-euclidean-0&quot;&gt;&lt;svg class=&quot;cosine-examples &quot; viewBox=&quot;0 0 260 260&quot; preserveAspectRatio=&quot;none&quot;&gt;&lt;rect class=&quot;cosine-examples__background&quot; x=&quot;30&quot; y=&quot;30&quot; width=&quot;200&quot; height=&quot;200&quot;/&gt;&lt;g transform=&quot;translate(0,230)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--bottom&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;middle&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M30,6V0H230V6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(30,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(80,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(130,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(180,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(230,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=&quot;translate(30,0)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--left&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;end&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M-6,230H0V30H-6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,230)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,180)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,130)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,80)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,30)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g class=&quot;cosine-examples__bg-lines&quot;&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;180&quot; x2=&quot;230&quot; y2=&quot;180&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;30&quot; y1=&quot;130&quot; x2=&quot;230&quot; y2=&quot;130&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;80&quot; x2=&quot;230&quot; y2=&quot;80&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;80&quot; y1=&quot;230&quot; x2=&quot;80&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;130&quot; y1=&quot;230&quot; x2=&quot;130&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;180&quot; y1=&quot;230&quot; x2=&quot;180&quot; y2=&quot;30&quot;/&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;head&quot; orient=&quot;auto&quot; markerWidth=&quot;4&quot; markerHeight=&quot;4&quot; refX=&quot;3&quot; refY=&quot;2&quot;&gt;&lt;path d=&quot;M0,0 V4 L4,2 Z&quot; class=&quot;cosine-examples__arrowhead&quot;/&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;line x1=&quot;180&quot; y1=&quot;80&quot; x2=&quot;200&quot; y2=&quot;160&quot; class=&quot;cosine-examples__angle&quot;/&gt;&lt;g class=&quot;cosine-examples__vectors&quot;&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 180 80&quot;/&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 200 160&quot;/&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div id=&quot;vector-euclidean-1&quot;&gt;&lt;svg class=&quot;cosine-examples &quot; viewBox=&quot;0 0 260 260&quot; preserveAspectRatio=&quot;none&quot;&gt;&lt;rect class=&quot;cosine-examples__background&quot; x=&quot;30&quot; y=&quot;30&quot; width=&quot;200&quot; height=&quot;200&quot;/&gt;&lt;g transform=&quot;translate(0,230)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--bottom&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;middle&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M30,6V0H230V6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(30,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(80,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(130,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(180,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(230,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=&quot;translate(30,0)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--left&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;end&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M-6,230H0V30H-6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,230)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,180)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,130)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,80)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,30)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g class=&quot;cosine-examples__bg-lines&quot;&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;180&quot; x2=&quot;230&quot; y2=&quot;180&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;30&quot; y1=&quot;130&quot; x2=&quot;230&quot; y2=&quot;130&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;80&quot; x2=&quot;230&quot; y2=&quot;80&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;80&quot; y1=&quot;230&quot; x2=&quot;80&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;130&quot; y1=&quot;230&quot; x2=&quot;130&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;180&quot; y1=&quot;230&quot; x2=&quot;180&quot; y2=&quot;30&quot;/&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;head&quot; orient=&quot;auto&quot; markerWidth=&quot;4&quot; markerHeight=&quot;4&quot; refX=&quot;3&quot; refY=&quot;2&quot;&gt;&lt;path d=&quot;M0,0 V4 L4,2 Z&quot; class=&quot;cosine-examples__arrowhead&quot;/&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;line x1=&quot;150&quot; y1=&quot;90.00000000000001&quot; x2=&quot;60.00000000000001&quot; y2=&quot;150&quot; class=&quot;cosine-examples__angle&quot;/&gt;&lt;g class=&quot;cosine-examples__vectors&quot;&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 150 90.00000000000001&quot;/&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 60.00000000000001 150&quot;/&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div id=&quot;vector-euclidean-2&quot;&gt;&lt;svg class=&quot;cosine-examples &quot; viewBox=&quot;0 0 260 260&quot; preserveAspectRatio=&quot;none&quot;&gt;&lt;rect class=&quot;cosine-examples__background&quot; x=&quot;30&quot; y=&quot;30&quot; width=&quot;200&quot; height=&quot;200&quot;/&gt;&lt;g transform=&quot;translate(0,230)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--bottom&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;middle&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M30,6V0H230V6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(30,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(80,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(130,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(180,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(230,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=&quot;translate(30,0)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--left&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;end&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M-6,230H0V30H-6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,230)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,180)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,130)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,80)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,30)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g class=&quot;cosine-examples__bg-lines&quot;&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;180&quot; x2=&quot;230&quot; y2=&quot;180&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;30&quot; y1=&quot;130&quot; x2=&quot;230&quot; y2=&quot;130&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;80&quot; x2=&quot;230&quot; y2=&quot;80&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;80&quot; y1=&quot;230&quot; x2=&quot;80&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;130&quot; y1=&quot;230&quot; x2=&quot;130&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;180&quot; y1=&quot;230&quot; x2=&quot;180&quot; y2=&quot;30&quot;/&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;head&quot; orient=&quot;auto&quot; markerWidth=&quot;4&quot; markerHeight=&quot;4&quot; refX=&quot;3&quot; refY=&quot;2&quot;&gt;&lt;path d=&quot;M0,0 V4 L4,2 Z&quot; class=&quot;cosine-examples__arrowhead&quot;/&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;line x1=&quot;160&quot; y1=&quot;50&quot; x2=&quot;170&quot; y2=&quot;150&quot; class=&quot;cosine-examples__angle&quot;/&gt;&lt;g class=&quot;cosine-examples__vectors&quot;&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 160 50&quot;/&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 170 150&quot;/&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;figcaption&gt;Euclidean distance is the straight-line distance between two points.&lt;/figcaption&gt;&lt;/figure&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;euclideanDistance&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;a, b&lt;/span&gt;) =&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;sqrt&lt;/span&gt;(
    a.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;acc, curr, i&lt;/span&gt;) =&gt;&lt;/span&gt; {
        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; diff = curr - b[i];
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; acc + diff * diff;
    }, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;)
);
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;is-euclidean-distance-better-than-cosine-similarity-for-use-with-llm-embeddings&quot;&gt;Is Euclidean distance better than cosine similarity for use with LLM embeddings?&lt;/h3&gt;&lt;p&gt;When the vectors are normalized to a magnitude of 1 (as OpenAI embeddings are), the results of cosine similarity and Euclidean distance will be equivalent. This means that the rankings of the vectors will be the same, even if the actual values are different.&lt;/p&gt;&lt;p&gt;There&#x27;s not much to separate the functions when viewed from the perspective of time complexity (i.e. using &quot;Big O&quot; notation), as both functions have &lt;span class=&quot;maths&quot;&gt;O(n)&lt;/span&gt; complexity. But the dot product uses simpler operations (one multiplication and one addition per iteration) than the Euclidean calculation (which performs subtraction, squaring, and addition for each iteration &lt;em&gt;and&lt;/em&gt; includes an additional square root operation at the end).&lt;/p&gt;&lt;p&gt;&lt;strong&gt;For measuring the similarity of LLM embeddings, cosine similarity is more often chosen because dot-product-based cosine similarity is slightly faster to calculate.&lt;/strong&gt;&lt;/p&gt;&lt;hr/&gt;&lt;h2 id=&quot;manhattan-distance&quot;&gt;Manhattan distance&lt;/h2&gt;&lt;p&gt;Unlike Euclidean distance, which measures the straight line distance between two points, &lt;strong&gt;Manhattan distance&lt;/strong&gt; measures the &lt;em&gt;sum&lt;/em&gt; of the absolute differences between the two vectors. It gets its name from the fact that it&#x27;s the distance a taxi would have to travel to get from one point to another in a city grid (where travel is limited to moving along the grid lines, rather than the as-the-crow-flies Euclidean distance).&lt;/p&gt;&lt;figure class=&quot;stack--small&quot;&gt;&lt;div class=&quot;maths-block&quot;&gt;&lt;span class=&quot;katex&quot;&gt;&lt;span class=&quot;katex-mathml&quot;&gt;&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo separator=&quot;true&quot;&gt;,&lt;/mo&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msubsup&gt;&lt;mo&gt;∑&lt;/mo&gt;&lt;mrow&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msubsup&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;msub&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;/mrow&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;\mathit{d}(A,B) = \sum_{i=1}^n |A_1 - B_1|&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&quot;katex-html&quot; aria-hidden=&quot;true&quot;&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1em;vertical-align:-0.25em;&quot;/&gt;&lt;span class=&quot;mord mathit&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;mopen&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;mpunct&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.1667em;&quot;/&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.05017em;&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;mclose&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;span class=&quot;mrel&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1.104em;vertical-align:-0.2997em;&quot;/&gt;&lt;span class=&quot;mop&quot;&gt;&lt;span class=&quot;mop op-symbol small-op&quot; style=&quot;position:relative;top:0em;&quot;&gt;∑&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.8043em;&quot;&gt;&lt;span style=&quot;top:-2.4003em;margin-left:0em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mathnormal mtight&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;mrel mtight&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mord mtight&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.2029em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mathnormal mtight&quot;&gt;n&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.2997em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.1667em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;∣&lt;/span&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.3011em;&quot;&gt;&lt;span style=&quot;top:-2.55em;margin-left:0em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.15em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;span class=&quot;mbin&quot;&gt;−&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1em;vertical-align:-0.25em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.05017em;&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.3011em;&quot;&gt;&lt;span style=&quot;top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.15em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mord&quot;&gt;∣&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;figcaption&gt;Finding Manhattan distance &lt;span class=&quot;maths&quot;&gt;&lt;em&gt;d&lt;/em&gt;&lt;/span&gt; for vectors &lt;span class=&quot;maths&quot;&gt;&lt;em&gt;A&lt;/em&gt;&lt;/span&gt; and &lt;span class=&quot;maths&quot;&gt;&lt;em&gt;B&lt;/em&gt;&lt;/span&gt; of length &lt;span class=&quot;maths&quot;&gt;&lt;em&gt;n&lt;/em&gt;&lt;/span&gt;.&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure&gt;&lt;div class=&quot;cluster vce__graph-cluster&quot;&gt;&lt;div id=&quot;vector-manhattan-0&quot;&gt;&lt;svg class=&quot;cosine-examples &quot; viewBox=&quot;0 0 260 260&quot; preserveAspectRatio=&quot;none&quot;&gt;&lt;rect class=&quot;cosine-examples__background&quot; x=&quot;30&quot; y=&quot;30&quot; width=&quot;200&quot; height=&quot;200&quot;/&gt;&lt;g transform=&quot;translate(0,230)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--bottom&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;middle&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M30,6V0H230V6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(30,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(80,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(130,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(180,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(230,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=&quot;translate(30,0)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--left&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;end&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M-6,230H0V30H-6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,230)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,180)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,130)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,80)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,30)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g class=&quot;cosine-examples__bg-lines&quot;&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;180&quot; x2=&quot;230&quot; y2=&quot;180&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;30&quot; y1=&quot;130&quot; x2=&quot;230&quot; y2=&quot;130&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;80&quot; x2=&quot;230&quot; y2=&quot;80&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;80&quot; y1=&quot;230&quot; x2=&quot;80&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;130&quot; y1=&quot;230&quot; x2=&quot;130&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;180&quot; y1=&quot;230&quot; x2=&quot;180&quot; y2=&quot;30&quot;/&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;head&quot; orient=&quot;auto&quot; markerWidth=&quot;4&quot; markerHeight=&quot;4&quot; refX=&quot;3&quot; refY=&quot;2&quot;&gt;&lt;path d=&quot;M0,0 V4 L4,2 Z&quot; class=&quot;cosine-examples__arrowhead&quot;/&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;line x1=&quot;180&quot; y1=&quot;80&quot; x2=&quot;200&quot; y2=&quot;80&quot; class=&quot;cosine-examples__angle&quot;/&gt;&lt;line x1=&quot;200&quot; y1=&quot;80&quot; x2=&quot;200&quot; y2=&quot;160&quot; class=&quot;cosine-examples__angle&quot;/&gt;&lt;g class=&quot;cosine-examples__vectors&quot;&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 180 80&quot;/&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 200 160&quot;/&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div id=&quot;vector-manhattan-1&quot;&gt;&lt;svg class=&quot;cosine-examples &quot; viewBox=&quot;0 0 260 260&quot; preserveAspectRatio=&quot;none&quot;&gt;&lt;rect class=&quot;cosine-examples__background&quot; x=&quot;30&quot; y=&quot;30&quot; width=&quot;200&quot; height=&quot;200&quot;/&gt;&lt;g transform=&quot;translate(0,230)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--bottom&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;middle&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M30,6V0H230V6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(30,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(80,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(130,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(180,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(230,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=&quot;translate(30,0)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--left&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;end&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M-6,230H0V30H-6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,230)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,180)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,130)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,80)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,30)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g class=&quot;cosine-examples__bg-lines&quot;&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;180&quot; x2=&quot;230&quot; y2=&quot;180&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;30&quot; y1=&quot;130&quot; x2=&quot;230&quot; y2=&quot;130&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;80&quot; x2=&quot;230&quot; y2=&quot;80&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;80&quot; y1=&quot;230&quot; x2=&quot;80&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;130&quot; y1=&quot;230&quot; x2=&quot;130&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;180&quot; y1=&quot;230&quot; x2=&quot;180&quot; y2=&quot;30&quot;/&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;head&quot; orient=&quot;auto&quot; markerWidth=&quot;4&quot; markerHeight=&quot;4&quot; refX=&quot;3&quot; refY=&quot;2&quot;&gt;&lt;path d=&quot;M0,0 V4 L4,2 Z&quot; class=&quot;cosine-examples__arrowhead&quot;/&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;line x1=&quot;150&quot; y1=&quot;90.00000000000001&quot; x2=&quot;60.00000000000001&quot; y2=&quot;90.00000000000001&quot; class=&quot;cosine-examples__angle&quot;/&gt;&lt;line x1=&quot;60.00000000000001&quot; y1=&quot;90.00000000000001&quot; x2=&quot;60.00000000000001&quot; y2=&quot;150&quot; class=&quot;cosine-examples__angle&quot;/&gt;&lt;g class=&quot;cosine-examples__vectors&quot;&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 150 90.00000000000001&quot;/&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 60.00000000000001 150&quot;/&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div id=&quot;vector-manhattan-2&quot;&gt;&lt;svg class=&quot;cosine-examples &quot; viewBox=&quot;0 0 260 260&quot; preserveAspectRatio=&quot;none&quot;&gt;&lt;rect class=&quot;cosine-examples__background&quot; x=&quot;30&quot; y=&quot;30&quot; width=&quot;200&quot; height=&quot;200&quot;/&gt;&lt;g transform=&quot;translate(0,230)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--bottom&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;middle&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M30,6V0H230V6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(30,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(80,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(130,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(180,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(230,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=&quot;translate(30,0)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--left&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;end&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M-6,230H0V30H-6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,230)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,180)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,130)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,80)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,30)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g class=&quot;cosine-examples__bg-lines&quot;&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;180&quot; x2=&quot;230&quot; y2=&quot;180&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;30&quot; y1=&quot;130&quot; x2=&quot;230&quot; y2=&quot;130&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;80&quot; x2=&quot;230&quot; y2=&quot;80&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;80&quot; y1=&quot;230&quot; x2=&quot;80&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;130&quot; y1=&quot;230&quot; x2=&quot;130&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;180&quot; y1=&quot;230&quot; x2=&quot;180&quot; y2=&quot;30&quot;/&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;head&quot; orient=&quot;auto&quot; markerWidth=&quot;4&quot; markerHeight=&quot;4&quot; refX=&quot;3&quot; refY=&quot;2&quot;&gt;&lt;path d=&quot;M0,0 V4 L4,2 Z&quot; class=&quot;cosine-examples__arrowhead&quot;/&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;line x1=&quot;160&quot; y1=&quot;50&quot; x2=&quot;170&quot; y2=&quot;50&quot; class=&quot;cosine-examples__angle&quot;/&gt;&lt;line x1=&quot;170&quot; y1=&quot;50&quot; x2=&quot;170&quot; y2=&quot;150&quot; class=&quot;cosine-examples__angle&quot;/&gt;&lt;g class=&quot;cosine-examples__vectors&quot;&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 160 50&quot;/&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 170 150&quot;/&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;figcaption&gt;Manhattan distance is the sum of the absolute differences between two points.&lt;/figcaption&gt;&lt;/figure&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;manhattanDistance&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;a, b&lt;/span&gt;) =&gt; a.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;acc, curr, i&lt;/span&gt;) =&gt;&lt;/span&gt; acc + &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;abs&lt;/span&gt;(curr - b[i]), &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;is-manhattan-distance-better-than-cosine-similarity-for-use-with-llm-embeddings&quot;&gt;Is Manhattan distance better than cosine similarity for use with LLM embeddings?&lt;/h3&gt;&lt;p&gt;The numerical results of Manhattan distance will be different to cosine similarity, but (as with Euclidean distance) there should not be much variation in the rankings when sorting vectors by similarity. As with the other two functions, the time complexity of Manhattan distance is also &lt;span class=&quot;maths&quot;&gt;O(n)&lt;/span&gt;, but the operations are simpler than Euclidean distance (just one subtraction and one addition per iteration) but a little more costly than the dot product calculation (with the &quot;absolute&quot; &lt;code&gt;Math.abs()&lt;/code&gt; calculation being the key differentiator).&lt;/p&gt;&lt;p&gt;When compared directly to Euclidean distance, Manhattan distance is often considered to be less affected by the &quot;curse of dimensionality&quot;. This is a phenomenon where the distance between points in high-dimensional space becomes less meaningful as the number of dimensions increases. Manhattan distance is less affected by this because it doesn&#x27;t square the differences between the points, which also makes it less sensitive to outliers (the squared differences in Euclidean distance can be heavily influenced by a single large difference).&lt;/p&gt;&lt;hr/&gt;&lt;h2 id=&quot;chebyshev-distance&quot;&gt;Chebyshev distance&lt;/h2&gt;&lt;p&gt;Chebyshev distance is the maximum of the absolute differences between the two vectors. While useful in certain scenarios, the fact that it discards the other differences between the vectors makes it less useful for comparing vectors in the context of LLM embeddings.&lt;/p&gt;&lt;p&gt;The Chebyshev distance is more useful for things like warehouse logistics, where it can measure the time an overhead crane takes to move an object (as the crane can move on the x and y axes at the same time but at the same speed along each axis).&lt;/p&gt;&lt;figure class=&quot;stack--small&quot;&gt;&lt;div class=&quot;maths-block&quot;&gt;&lt;span class=&quot;katex&quot;&gt;&lt;span class=&quot;katex-mathml&quot;&gt;&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo separator=&quot;true&quot;&gt;,&lt;/mo&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;max&lt;/mi&gt;&lt;mo&gt;⁡&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;msub&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;mo separator=&quot;true&quot;&gt;,&lt;/mo&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;msub&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;mo separator=&quot;true&quot;&gt;,&lt;/mo&gt;&lt;mo&gt;…&lt;/mo&gt;&lt;mo separator=&quot;true&quot;&gt;,&lt;/mo&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;msub&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msub&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;\mathit{d}(A,B) = \max(|A_1 - B_1|, |A_2 - B_2|, \ldots, |A_n - B_n|)&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&quot;katex-html&quot; aria-hidden=&quot;true&quot;&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1em;vertical-align:-0.25em;&quot;/&gt;&lt;span class=&quot;mord mathit&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;mopen&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;mpunct&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.1667em;&quot;/&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.05017em;&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;mclose&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;span class=&quot;mrel&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1em;vertical-align:-0.25em;&quot;/&gt;&lt;span class=&quot;mop&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;mopen&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mord&quot;&gt;∣&lt;/span&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.3011em;&quot;&gt;&lt;span style=&quot;top:-2.55em;margin-left:0em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.15em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;span class=&quot;mbin&quot;&gt;−&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1em;vertical-align:-0.25em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.05017em;&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.3011em;&quot;&gt;&lt;span style=&quot;top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.15em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mord&quot;&gt;∣&lt;/span&gt;&lt;span class=&quot;mpunct&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.1667em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;∣&lt;/span&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.3011em;&quot;&gt;&lt;span style=&quot;top:-2.55em;margin-left:0em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.15em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;span class=&quot;mbin&quot;&gt;−&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1em;vertical-align:-0.25em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.05017em;&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.3011em;&quot;&gt;&lt;span style=&quot;top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.15em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mord&quot;&gt;∣&lt;/span&gt;&lt;span class=&quot;mpunct&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.1667em;&quot;/&gt;&lt;span class=&quot;minner&quot;&gt;…&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.1667em;&quot;/&gt;&lt;span class=&quot;mpunct&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.1667em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;∣&lt;/span&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.1514em;&quot;&gt;&lt;span style=&quot;top:-2.55em;margin-left:0em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mathnormal mtight&quot;&gt;n&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.15em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;span class=&quot;mbin&quot;&gt;−&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1em;vertical-align:-0.25em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.05017em;&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.1514em;&quot;&gt;&lt;span style=&quot;top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mathnormal mtight&quot;&gt;n&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.15em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mord&quot;&gt;∣&lt;/span&gt;&lt;span class=&quot;mclose&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;figcaption&gt;Chebyshev distance&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure&gt;&lt;div class=&quot;cluster vce__graph-cluster&quot;&gt;&lt;div id=&quot;vector-chebyshev-0&quot;&gt;&lt;svg class=&quot;cosine-examples &quot; viewBox=&quot;0 0 260 260&quot; preserveAspectRatio=&quot;none&quot;&gt;&lt;rect class=&quot;cosine-examples__background&quot; x=&quot;30&quot; y=&quot;30&quot; width=&quot;200&quot; height=&quot;200&quot;/&gt;&lt;g transform=&quot;translate(0,230)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--bottom&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;middle&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M30,6V0H230V6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(30,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(80,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(130,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(180,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(230,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=&quot;translate(30,0)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--left&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;end&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M-6,230H0V30H-6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,230)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,180)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,130)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,80)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,30)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g class=&quot;cosine-examples__bg-lines&quot;&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;180&quot; x2=&quot;230&quot; y2=&quot;180&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;30&quot; y1=&quot;130&quot; x2=&quot;230&quot; y2=&quot;130&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;80&quot; x2=&quot;230&quot; y2=&quot;80&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;80&quot; y1=&quot;230&quot; x2=&quot;80&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;130&quot; y1=&quot;230&quot; x2=&quot;130&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;180&quot; y1=&quot;230&quot; x2=&quot;180&quot; y2=&quot;30&quot;/&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;head&quot; orient=&quot;auto&quot; markerWidth=&quot;4&quot; markerHeight=&quot;4&quot; refX=&quot;3&quot; refY=&quot;2&quot;&gt;&lt;path d=&quot;M0,0 V4 L4,2 Z&quot; class=&quot;cosine-examples__arrowhead&quot;/&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;line x1=&quot;180&quot; y1=&quot;80&quot; x2=&quot;200&quot; y2=&quot;80&quot; class=&quot;cosine-examples__angle cosine-examples__angle--disabled&quot;/&gt;&lt;line x1=&quot;200&quot; y1=&quot;80&quot; x2=&quot;200&quot; y2=&quot;160&quot; class=&quot;cosine-examples__angle &quot;/&gt;&lt;g class=&quot;cosine-examples__vectors&quot;&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 180 80&quot;/&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 200 160&quot;/&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div id=&quot;vector-chebyshev-1&quot;&gt;&lt;svg class=&quot;cosine-examples &quot; viewBox=&quot;0 0 260 260&quot; preserveAspectRatio=&quot;none&quot;&gt;&lt;rect class=&quot;cosine-examples__background&quot; x=&quot;30&quot; y=&quot;30&quot; width=&quot;200&quot; height=&quot;200&quot;/&gt;&lt;g transform=&quot;translate(0,230)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--bottom&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;middle&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M30,6V0H230V6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(30,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(80,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(130,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(180,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(230,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=&quot;translate(30,0)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--left&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;end&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M-6,230H0V30H-6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,230)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,180)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,130)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,80)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,30)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g class=&quot;cosine-examples__bg-lines&quot;&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;180&quot; x2=&quot;230&quot; y2=&quot;180&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;30&quot; y1=&quot;130&quot; x2=&quot;230&quot; y2=&quot;130&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;80&quot; x2=&quot;230&quot; y2=&quot;80&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;80&quot; y1=&quot;230&quot; x2=&quot;80&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;130&quot; y1=&quot;230&quot; x2=&quot;130&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;180&quot; y1=&quot;230&quot; x2=&quot;180&quot; y2=&quot;30&quot;/&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;head&quot; orient=&quot;auto&quot; markerWidth=&quot;4&quot; markerHeight=&quot;4&quot; refX=&quot;3&quot; refY=&quot;2&quot;&gt;&lt;path d=&quot;M0,0 V4 L4,2 Z&quot; class=&quot;cosine-examples__arrowhead&quot;/&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;line x1=&quot;150&quot; y1=&quot;90.00000000000001&quot; x2=&quot;60.00000000000001&quot; y2=&quot;90.00000000000001&quot; class=&quot;cosine-examples__angle &quot;/&gt;&lt;line x1=&quot;60.00000000000001&quot; y1=&quot;90.00000000000001&quot; x2=&quot;60.00000000000001&quot; y2=&quot;150&quot; class=&quot;cosine-examples__angle cosine-examples__angle--disabled&quot;/&gt;&lt;g class=&quot;cosine-examples__vectors&quot;&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 150 90.00000000000001&quot;/&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 60.00000000000001 150&quot;/&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;&lt;div id=&quot;vector-chebyshev-2&quot;&gt;&lt;svg class=&quot;cosine-examples &quot; viewBox=&quot;0 0 260 260&quot; preserveAspectRatio=&quot;none&quot;&gt;&lt;rect class=&quot;cosine-examples__background&quot; x=&quot;30&quot; y=&quot;30&quot; width=&quot;200&quot; height=&quot;200&quot;/&gt;&lt;g transform=&quot;translate(0,230)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--bottom&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;middle&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M30,6V0H230V6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(30,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(80,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(130,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(180,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(230,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=&quot;translate(30,0)&quot; class=&quot;cosine-examples__axis cosine-examples__axis--left&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;end&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M-6,230H0V30H-6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,230)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,180)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;-0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,130)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,80)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0.5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,30)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;1&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g class=&quot;cosine-examples__bg-lines&quot;&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;180&quot; x2=&quot;230&quot; y2=&quot;180&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;30&quot; y1=&quot;130&quot; x2=&quot;230&quot; y2=&quot;130&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;30&quot; y1=&quot;80&quot; x2=&quot;230&quot; y2=&quot;80&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;80&quot; y1=&quot;230&quot; x2=&quot;80&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line-solid
                
            &quot; x1=&quot;130&quot; y1=&quot;230&quot; x2=&quot;130&quot; y2=&quot;30&quot;/&gt;&lt;line class=&quot;
                cosine-examples__line
                cosine-examples__line--bg-line
                
            &quot; x1=&quot;180&quot; y1=&quot;230&quot; x2=&quot;180&quot; y2=&quot;30&quot;/&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;head&quot; orient=&quot;auto&quot; markerWidth=&quot;4&quot; markerHeight=&quot;4&quot; refX=&quot;3&quot; refY=&quot;2&quot;&gt;&lt;path d=&quot;M0,0 V4 L4,2 Z&quot; class=&quot;cosine-examples__arrowhead&quot;/&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;line x1=&quot;160&quot; y1=&quot;50&quot; x2=&quot;170&quot; y2=&quot;50&quot; class=&quot;cosine-examples__angle cosine-examples__angle--disabled&quot;/&gt;&lt;line x1=&quot;170&quot; y1=&quot;50&quot; x2=&quot;170&quot; y2=&quot;150&quot; class=&quot;cosine-examples__angle &quot;/&gt;&lt;g class=&quot;cosine-examples__vectors&quot;&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 160 50&quot;/&gt;&lt;path marker-end=&quot;url(#head)&quot; class=&quot;cosine-examples__path&quot; d=&quot;M130, 130, 170 150&quot;/&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;&lt;/div&gt;&lt;figcaption&gt;Chebyshev distance is the longest of the absolute differences between two points.&lt;/figcaption&gt;&lt;/figure&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;chebyshevDistance&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;a, b&lt;/span&gt;) =&gt; &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; - &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;max&lt;/span&gt;(...a.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;curr, i&lt;/span&gt;) =&gt;&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;abs&lt;/span&gt;(curr - b[i])));
&lt;/code&gt;&lt;/pre&gt;&lt;hr/&gt;&lt;h2 id=&quot;other-ways-to-measure-similarity&quot;&gt;Other ways to measure similarity&lt;/h2&gt;&lt;p&gt;There are &lt;strong&gt;a lot&lt;/strong&gt; of distance functions out there. For this article, I&#x27;ve leaned into the &quot;geometrical&quot; view of vectors - i.e. treating them as points in multidimensional space. This is because LLM embeddings are built to represent the &quot;meaning&quot; of text, and the crucial part of that is the &quot;directional&quot; relationships between the vectors. Embeddings are all normalized and have no sense of &quot;magnitude&quot; (i.e. the length of the vector), so the &quot;direction&quot; is the only thing that matters.&lt;/p&gt;&lt;h3 id=&quot;other-geometric-distance-functions&quot;&gt;Other geometric distance functions&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Minkowski distance&lt;/strong&gt; and &lt;strong&gt;Canberra distance&lt;/strong&gt; are functions that build on the foundation of the Euclidean and Manhattan functions. Minkowski is a generalization of both that can generate either of those distances or something in between, and Canberra is a weighted version of Manhattan distance.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Mahalanobis distance&lt;/strong&gt; is a different process entirely, which measures the distance between a single point and a distribution. This is useful for intra-vector analysis, but not helpful for comparing vectors to one another.&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;correlation-based-comparison-functions&quot;&gt;Correlation-based comparison functions&lt;/h3&gt;&lt;p&gt;These measures focus on the relationship between variables rather than direct vector comparison. They can be useful for analyzing trends or patterns in data, but are less useful for comparing vectors.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Pearson correlation coefficient&lt;/strong&gt; measures the linear relationship between two variables.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Spearman&#x27;s rank correlation coefficient&lt;/strong&gt; measures the strength and direction of the relationship between two variables.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Kendall&#x27;s tau&lt;/strong&gt; is a measure of the ordinal association between two measured quantities.&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;set-based-comparison-functions&quot;&gt;Set-based comparison functions&lt;/h3&gt;&lt;p&gt;These are more suitable for comparing sets or binary vectors, which may not be directly applicable to continuous-valued embeddings. Sets, unlike vectors, are unordered collections of unique elements.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Jaccard similarity&lt;/strong&gt; measures the similarity between two sets.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Hamming distance&lt;/strong&gt; measures the number of positions at which the corresponding elements are different.&lt;/li&gt;&lt;/ul&gt;&lt;hr/&gt;&lt;h2 id=&quot;testing-the-functions&quot;&gt;Testing the functions&lt;/h2&gt;&lt;div class=&quot;js__toggleVisibility&quot;&gt;&lt;button class=&quot;button js__showHideToggle showHide__toggle&quot;&gt;Testing method&lt;/button&gt;&lt;div class=&quot;js__showHideArea showHide__area&quot;&gt;&lt;div class=&quot;js__showHideAreaInner showHide__inner stack&quot;&gt;&lt;p&gt;I put these functions to the test with some of my own data, and the results were generally in-line with what I expected.&lt;/p&gt;&lt;p&gt;I created an embedding vector for the titles of all my blog posts. I then created embeddings for each query in my &lt;a href=&quot;https://tomhazledine.com/assessing-search-quality/#ground-truth-and-subjectivity&quot;&gt;search-test &quot;ground truth dataset&quot;&lt;/a&gt; and compared each query to every post title (98 queries each tested against 79 document titles, with each query and title represented by a 1,536-dimensional vector). I ran this test five times for each distance function, and averaged the results of each run.&lt;/p&gt;&lt;p&gt;The execution time for each comparison call (for example &lt;code&gt;cosinesimilarity(vector1, vector2)&lt;/code&gt;) was measured with the JS &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Performance_API&quot;&gt;&lt;code&gt;performance.measure()&lt;/code&gt; method&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;The &quot;accuracy&quot; was measured using a combination of &lt;a href=&quot;https://tomhazledine.com/assessing-search-quality/#precision-recall-and-the-f-score&quot;&gt;F-score&lt;/a&gt;, &lt;a href=&quot;https://tomhazledine.com/assessing-search-quality/#average-precision&quot;&gt;Average Precision (AP)&lt;/a&gt;, and &lt;a href=&quot;https://tomhazledine.com/assessing-search-quality/#normalized-discounted-cumulative-gain&quot;&gt;Normalized Discounted Cumulative Gain (NDCG)&lt;/a&gt;. You can read more about how these measures work in my post, &lt;em&gt;&lt;a href=&quot;https://tomhazledine.com/assessing-search-quality/&quot;&gt;&quot;How do you test the quality of search results?&quot;&lt;/a&gt;&lt;/em&gt;.&lt;/p&gt;&lt;button class=&quot;showHide__toggle--close button js__showHideToggle&quot;&gt;Hide Testing method&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;h3 id=&quot;performance-results&quot;&gt;Performance results&lt;/h3&gt;&lt;figure class=&quot;stack--small&quot;&gt;&lt;figcaption&gt;Execution-time distribution for different distance functions (using JavaScript).&lt;/figcaption&gt;&lt;div id=&quot;distribution-graph&quot;&gt;&lt;div class=&quot;stack--small&quot;&gt;&lt;svg class=&quot;distribution-graph &quot; viewBox=&quot;0 0 600 160&quot; preserveAspectRatio=&quot;none&quot;&gt;&lt;rect class=&quot;distribution-graph__background&quot; x=&quot;30&quot; y=&quot;1&quot; width=&quot;540&quot; height=&quot;143&quot;/&gt;&lt;g transform=&quot;translate(0,144)&quot; class=&quot;distribution-graph__axis distribution-graph__axis--bottom&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;middle&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M30,6V0H570V6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(30,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(107.92207792207793,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0.05&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(185.84415584415586,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0.1&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(263.76623376623377,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0.15&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(341.6883116883117,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0.2&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(419.61038961038963,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0.25&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(497.53246753246754,0)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; y2=&quot;6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; y=&quot;9&quot; dy=&quot;0.71em&quot;&gt;0.3&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g transform=&quot;translate(30,0)&quot; class=&quot;distribution-graph__axis distribution-graph__axis--left&quot; fill=&quot;none&quot; font-size=&quot;10&quot; text-anchor=&quot;end&quot;&gt;&lt;path class=&quot;domain&quot; stroke=&quot;currentColor&quot; d=&quot;M-6,144H0V1H-6&quot;/&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,144)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;0&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,122.72023809523809)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;5&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,101.44047619047619)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;10&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,80.16071428571429)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;15&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,58.88095238095238)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;20&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,37.601190476190474)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;25&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;tick&quot; opacity=&quot;1&quot; transform=&quot;translate(0,16.32142857142858)&quot;&gt;&lt;line stroke=&quot;currentColor&quot; x2=&quot;-6&quot;/&gt;&lt;text fill=&quot;currentColor&quot; x=&quot;-9&quot; dy=&quot;0.32em&quot;&gt;30&lt;/text&gt;&lt;/g&gt;&lt;/g&gt;&lt;g class=&quot;distribution-graph__group 
                            &quot;&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--cosine&quot; x=&quot;106.36&quot; y=&quot;122.72&quot; width=&quot;5.4&quot; height=&quot;21.28&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--cosine&quot; x=&quot;111.82&quot; y=&quot;114.21&quot; width=&quot;5.4&quot; height=&quot;29.79&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--cosine&quot; x=&quot;117.27&quot; y=&quot;126.98&quot; width=&quot;5.4&quot; height=&quot;17.02&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--cosine&quot; x=&quot;122.73&quot; y=&quot;114.21&quot; width=&quot;5.4&quot; height=&quot;29.79&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--cosine&quot; x=&quot;128.18&quot; y=&quot;109.95&quot; width=&quot;5.4&quot; height=&quot;34.05&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--cosine&quot; x=&quot;133.64&quot; y=&quot;135.49&quot; width=&quot;5.4&quot; height=&quot;8.51&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--cosine&quot; x=&quot;139.09&quot; y=&quot;88.67&quot; width=&quot;5.4&quot; height=&quot;55.33&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--cosine&quot; x=&quot;144.55&quot; y=&quot;114.21&quot; width=&quot;5.4&quot; height=&quot;29.79&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--cosine&quot; x=&quot;150.00&quot; y=&quot;114.21&quot; width=&quot;5.4&quot; height=&quot;29.79&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--cosine&quot; x=&quot;155.45&quot; y=&quot;139.74&quot; width=&quot;5.4&quot; height=&quot;4.26&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--cosine&quot; x=&quot;160.91&quot; y=&quot;139.74&quot; width=&quot;5.4&quot; height=&quot;4.26&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--cosine&quot; x=&quot;166.36&quot; y=&quot;139.74&quot; width=&quot;5.4&quot; height=&quot;4.26&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--cosine&quot; x=&quot;330.00&quot; y=&quot;122.72&quot; width=&quot;5.4&quot; height=&quot;21.28&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--cosine&quot; x=&quot;335.45&quot; y=&quot;118.46&quot; width=&quot;5.4&quot; height=&quot;25.54&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--cosine&quot; x=&quot;340.91&quot; y=&quot;114.21&quot; width=&quot;5.4&quot; height=&quot;29.79&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--cosine&quot; x=&quot;346.36&quot; y=&quot;131.23&quot; width=&quot;5.4&quot; height=&quot;12.77&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--cosine&quot; x=&quot;351.82&quot; y=&quot;126.98&quot; width=&quot;5.4&quot; height=&quot;17.02&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--cosine&quot; x=&quot;357.27&quot; y=&quot;126.98&quot; width=&quot;5.4&quot; height=&quot;17.02&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--cosine&quot; x=&quot;362.73&quot; y=&quot;135.49&quot; width=&quot;5.4&quot; height=&quot;8.51&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--cosine&quot; x=&quot;368.18&quot; y=&quot;131.23&quot; width=&quot;5.4&quot; height=&quot;12.77&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--cosine&quot; x=&quot;379.09&quot; y=&quot;139.74&quot; width=&quot;5.4&quot; height=&quot;4.26&quot;/&gt;&lt;line x1=&quot;211.19318011961525&quot; y1=&quot;1&quot; x2=&quot;211.19318011961525&quot; y2=&quot;144&quot; class=&quot;distribution-graph__median&quot;/&gt;&lt;text class=&quot;distribution-graph__label&quot; x=&quot;213.19318011961525&quot; y=&quot;21&quot; pointer-events=&quot;none&quot; text-anchor=&quot;right&quot;&gt;Cosine Similarity median time: 0.12ms&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;distribution-graph__group 
                            &quot;&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--euclidean&quot; x=&quot;57.27&quot; y=&quot;114.21&quot; width=&quot;5.4&quot; height=&quot;29.79&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--euclidean&quot; x=&quot;62.73&quot; y=&quot;24.83&quot; width=&quot;5.4&quot; height=&quot;119.17&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--euclidean&quot; x=&quot;68.18&quot; y=&quot;58.88&quot; width=&quot;5.4&quot; height=&quot;85.12&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--euclidean&quot; x=&quot;73.64&quot; y=&quot;118.46&quot; width=&quot;5.4&quot; height=&quot;25.54&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--euclidean&quot; x=&quot;79.09&quot; y=&quot;135.49&quot; width=&quot;5.4&quot; height=&quot;8.51&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--euclidean&quot; x=&quot;313.64&quot; y=&quot;114.21&quot; width=&quot;5.4&quot; height=&quot;29.79&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--euclidean&quot; x=&quot;319.09&quot; y=&quot;84.42&quot; width=&quot;5.4&quot; height=&quot;59.58&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--euclidean&quot; x=&quot;324.55&quot; y=&quot;84.42&quot; width=&quot;5.4&quot; height=&quot;59.58&quot;/&gt;&lt;line x1=&quot;158.92090134932832&quot; y1=&quot;1&quot; x2=&quot;158.92090134932832&quot; y2=&quot;144&quot; class=&quot;distribution-graph__median&quot;/&gt;&lt;text class=&quot;distribution-graph__label&quot; x=&quot;160.92090134932832&quot; y=&quot;21&quot; pointer-events=&quot;none&quot; text-anchor=&quot;right&quot;&gt;Euclidean median time: 0.08ms&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;distribution-graph__group 
                            &quot;&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--manhattan&quot; x=&quot;51.82&quot; y=&quot;135.49&quot; width=&quot;5.4&quot; height=&quot;8.51&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--manhattan&quot; x=&quot;57.27&quot; y=&quot;97.18&quot; width=&quot;5.4&quot; height=&quot;46.82&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--manhattan&quot; x=&quot;62.73&quot; y=&quot;71.65&quot; width=&quot;5.4&quot; height=&quot;72.35&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--manhattan&quot; x=&quot;68.18&quot; y=&quot;67.39&quot; width=&quot;5.4&quot; height=&quot;76.61&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--manhattan&quot; x=&quot;73.64&quot; y=&quot;97.18&quot; width=&quot;5.4&quot; height=&quot;46.82&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--manhattan&quot; x=&quot;79.09&quot; y=&quot;135.49&quot; width=&quot;5.4&quot; height=&quot;8.51&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--manhattan&quot; x=&quot;362.73&quot; y=&quot;126.98&quot; width=&quot;5.4&quot; height=&quot;17.02&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--manhattan&quot; x=&quot;368.18&quot; y=&quot;80.16&quot; width=&quot;5.4&quot; height=&quot;63.84&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--manhattan&quot; x=&quot;373.64&quot; y=&quot;105.70&quot; width=&quot;5.4&quot; height=&quot;38.30&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--manhattan&quot; x=&quot;379.09&quot; y=&quot;122.72&quot; width=&quot;5.4&quot; height=&quot;21.28&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--manhattan&quot; x=&quot;384.55&quot; y=&quot;131.23&quot; width=&quot;5.4&quot; height=&quot;12.77&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--manhattan&quot; x=&quot;390.00&quot; y=&quot;139.74&quot; width=&quot;5.4&quot; height=&quot;4.26&quot;/&gt;&lt;line x1=&quot;184.01716073059202&quot; y1=&quot;1&quot; x2=&quot;184.01716073059202&quot; y2=&quot;144&quot; class=&quot;distribution-graph__median&quot;/&gt;&lt;text class=&quot;distribution-graph__label&quot; x=&quot;186.01716073059202&quot; y=&quot;21&quot; pointer-events=&quot;none&quot; text-anchor=&quot;right&quot;&gt;Manhattan median time: 0.10ms&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;distribution-graph__group 
                            &quot;&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--chebyshev&quot; x=&quot;73.64&quot; y=&quot;135.49&quot; width=&quot;5.4&quot; height=&quot;8.51&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--chebyshev&quot; x=&quot;79.09&quot; y=&quot;97.18&quot; width=&quot;5.4&quot; height=&quot;46.82&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--chebyshev&quot; x=&quot;84.55&quot; y=&quot;50.37&quot; width=&quot;5.4&quot; height=&quot;93.63&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--chebyshev&quot; x=&quot;90.00&quot; y=&quot;75.90&quot; width=&quot;5.4&quot; height=&quot;68.10&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--chebyshev&quot; x=&quot;95.45&quot; y=&quot;105.70&quot; width=&quot;5.4&quot; height=&quot;38.30&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--chebyshev&quot; x=&quot;100.91&quot; y=&quot;122.72&quot; width=&quot;5.4&quot; height=&quot;21.28&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--chebyshev&quot; x=&quot;106.36&quot; y=&quot;139.74&quot; width=&quot;5.4&quot; height=&quot;4.26&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--chebyshev&quot; x=&quot;111.82&quot; y=&quot;135.49&quot; width=&quot;5.4&quot; height=&quot;8.51&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--chebyshev&quot; x=&quot;117.27&quot; y=&quot;135.49&quot; width=&quot;5.4&quot; height=&quot;8.51&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--chebyshev&quot; x=&quot;122.73&quot; y=&quot;126.98&quot; width=&quot;5.4&quot; height=&quot;17.02&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--chebyshev&quot; x=&quot;128.18&quot; y=&quot;139.74&quot; width=&quot;5.4&quot; height=&quot;4.26&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--chebyshev&quot; x=&quot;460.91&quot; y=&quot;139.74&quot; width=&quot;5.4&quot; height=&quot;4.26&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--chebyshev&quot; x=&quot;466.36&quot; y=&quot;131.23&quot; width=&quot;5.4&quot; height=&quot;12.77&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--chebyshev&quot; x=&quot;471.82&quot; y=&quot;101.44&quot; width=&quot;5.4&quot; height=&quot;42.56&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--chebyshev&quot; x=&quot;477.27&quot; y=&quot;126.98&quot; width=&quot;5.4&quot; height=&quot;17.02&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--chebyshev&quot; x=&quot;482.73&quot; y=&quot;139.74&quot; width=&quot;5.4&quot; height=&quot;4.26&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--chebyshev&quot; x=&quot;488.18&quot; y=&quot;139.74&quot; width=&quot;5.4&quot; height=&quot;4.26&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--chebyshev&quot; x=&quot;493.64&quot; y=&quot;139.74&quot; width=&quot;5.4&quot; height=&quot;4.26&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--chebyshev&quot; x=&quot;499.09&quot; y=&quot;139.74&quot; width=&quot;5.4&quot; height=&quot;4.26&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--chebyshev&quot; x=&quot;504.55&quot; y=&quot;139.74&quot; width=&quot;5.4&quot; height=&quot;4.26&quot;/&gt;&lt;line x1=&quot;184.74407712692235&quot; y1=&quot;1&quot; x2=&quot;184.74407712692235&quot; y2=&quot;144&quot; class=&quot;distribution-graph__median&quot;/&gt;&lt;text class=&quot;distribution-graph__label&quot; x=&quot;186.74407712692235&quot; y=&quot;21&quot; pointer-events=&quot;none&quot; text-anchor=&quot;right&quot;&gt;Chebyshev median time: 0.10ms&lt;/text&gt;&lt;/g&gt;&lt;g class=&quot;distribution-graph__group 
                            distribution-graph__group--active&quot;&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--dot&quot; x=&quot;30.00&quot; y=&quot;135.49&quot; width=&quot;5.4&quot; height=&quot;8.51&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--dot&quot; x=&quot;35.45&quot; y=&quot;109.95&quot; width=&quot;5.4&quot; height=&quot;34.05&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--dot&quot; x=&quot;40.91&quot; y=&quot;118.46&quot; width=&quot;5.4&quot; height=&quot;25.54&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--dot&quot; x=&quot;46.36&quot; y=&quot;75.90&quot; width=&quot;5.4&quot; height=&quot;68.10&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--dot&quot; x=&quot;51.82&quot; y=&quot;84.42&quot; width=&quot;5.4&quot; height=&quot;59.58&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--dot&quot; x=&quot;57.27&quot; y=&quot;105.70&quot; width=&quot;5.4&quot; height=&quot;38.30&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--dot&quot; x=&quot;62.73&quot; y=&quot;126.98&quot; width=&quot;5.4&quot; height=&quot;17.02&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--dot&quot; x=&quot;68.18&quot; y=&quot;135.49&quot; width=&quot;5.4&quot; height=&quot;8.51&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--dot&quot; x=&quot;73.64&quot; y=&quot;135.49&quot; width=&quot;5.4&quot; height=&quot;8.51&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--dot&quot; x=&quot;264.55&quot; y=&quot;139.74&quot; width=&quot;5.4&quot; height=&quot;4.26&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--dot&quot; x=&quot;270.00&quot; y=&quot;109.95&quot; width=&quot;5.4&quot; height=&quot;34.05&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--dot&quot; x=&quot;275.45&quot; y=&quot;114.21&quot; width=&quot;5.4&quot; height=&quot;29.79&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--dot&quot; x=&quot;280.91&quot; y=&quot;109.95&quot; width=&quot;5.4&quot; height=&quot;34.05&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--dot&quot; x=&quot;286.36&quot; y=&quot;122.72&quot; width=&quot;5.4&quot; height=&quot;21.28&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--dot&quot; x=&quot;291.82&quot; y=&quot;126.98&quot; width=&quot;5.4&quot; height=&quot;17.02&quot;/&gt;&lt;rect class=&quot;distribution-graph__bar distribution-graph__bar--dot&quot; x=&quot;297.27&quot; y=&quot;135.49&quot; width=&quot;5.4&quot; height=&quot;8.51&quot;/&gt;&lt;line x1=&quot;134.2915057099659&quot; y1=&quot;1&quot; x2=&quot;134.2915057099659&quot; y2=&quot;144&quot; class=&quot;distribution-graph__median&quot;/&gt;&lt;text class=&quot;distribution-graph__label&quot; x=&quot;136.2915057099659&quot; y=&quot;21&quot; pointer-events=&quot;none&quot; text-anchor=&quot;right&quot;&gt;Dot Product median time: 0.07ms&lt;/text&gt;&lt;/g&gt;&lt;/svg&gt;&lt;p class=&quot;post-content__caption&quot;&gt;Execution time (ms)&lt;/p&gt;&lt;div class=&quot;homeGraphSelectors&quot;&gt;&lt;div class=&quot;homeGraphSelector checkWrapper cluster&quot;&gt;&lt;div class=&quot;check cosine&quot;&gt;&lt;input type=&quot;radio&quot; class=&quot;homegraphcheckbox&quot; id=&quot;cosine&quot; name=&quot;distribution-graph__selector&quot; value=&quot;cosine&quot;/&gt;&lt;label for=&quot;cosine&quot; class=&quot;symLabel&quot;/&gt;&lt;/div&gt;&lt;label for=&quot;cosine&quot; class=&quot;visibleLabel selectorTitle&quot; aria-checked=&quot;false&quot; aria-labelledby=&quot;cosine&quot; tabindex=&quot;0&quot;&gt;Cosine Similarity&lt;/label&gt;&lt;/div&gt;&lt;div class=&quot;homeGraphSelector checkWrapper cluster&quot;&gt;&lt;div class=&quot;check dot&quot;&gt;&lt;input type=&quot;radio&quot; class=&quot;homegraphcheckbox&quot; id=&quot;dot&quot; name=&quot;distribution-graph__selector&quot; value=&quot;dot&quot;/&gt;&lt;label for=&quot;dot&quot; class=&quot;symLabel&quot;/&gt;&lt;/div&gt;&lt;label for=&quot;dot&quot; class=&quot;visibleLabel selectorTitle&quot; aria-checked=&quot;true&quot; aria-labelledby=&quot;dot&quot; tabindex=&quot;0&quot;&gt;Dot Product&lt;/label&gt;&lt;/div&gt;&lt;div class=&quot;homeGraphSelector checkWrapper cluster&quot;&gt;&lt;div class=&quot;check euclidean&quot;&gt;&lt;input type=&quot;radio&quot; class=&quot;homegraphcheckbox&quot; id=&quot;euclidean&quot; name=&quot;distribution-graph__selector&quot; value=&quot;euclidean&quot;/&gt;&lt;label for=&quot;euclidean&quot; class=&quot;symLabel&quot;/&gt;&lt;/div&gt;&lt;label for=&quot;euclidean&quot; class=&quot;visibleLabel selectorTitle&quot; aria-checked=&quot;false&quot; aria-labelledby=&quot;euclidean&quot; tabindex=&quot;0&quot;&gt;Euclidean&lt;/label&gt;&lt;/div&gt;&lt;div class=&quot;homeGraphSelector checkWrapper cluster&quot;&gt;&lt;div class=&quot;check manhattan&quot;&gt;&lt;input type=&quot;radio&quot; class=&quot;homegraphcheckbox&quot; id=&quot;manhattan&quot; name=&quot;distribution-graph__selector&quot; value=&quot;manhattan&quot;/&gt;&lt;label for=&quot;manhattan&quot; class=&quot;symLabel&quot;/&gt;&lt;/div&gt;&lt;label for=&quot;manhattan&quot; class=&quot;visibleLabel selectorTitle&quot; aria-checked=&quot;false&quot; aria-labelledby=&quot;manhattan&quot; tabindex=&quot;0&quot;&gt;Manhattan&lt;/label&gt;&lt;/div&gt;&lt;div class=&quot;homeGraphSelector checkWrapper cluster&quot;&gt;&lt;div class=&quot;check chebyshev&quot;&gt;&lt;input type=&quot;radio&quot; class=&quot;homegraphcheckbox&quot; id=&quot;chebyshev&quot; name=&quot;distribution-graph__selector&quot; value=&quot;chebyshev&quot;/&gt;&lt;label for=&quot;chebyshev&quot; class=&quot;symLabel&quot;/&gt;&lt;/div&gt;&lt;label for=&quot;chebyshev&quot; class=&quot;visibleLabel selectorTitle&quot; aria-checked=&quot;false&quot; aria-labelledby=&quot;chebyshev&quot; tabindex=&quot;0&quot;&gt;Chebyshev&lt;/label&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/figure&gt;&lt;p&gt;I was expecting &lt;em&gt;a little&lt;/em&gt; variation in execution time for each comparison, but what I wasn&#x27;t expecting was the bimodal nature of the results. For each function, there were two distinct groups of execution times. These peaks existed for &lt;em&gt;all&lt;/em&gt; the function types at consistent relative spacings, which suggests that certain vector comparisons took longer than others no matter which distance function was being used.&lt;/p&gt;&lt;p&gt;The main takeaway, however, is as expected. Calculating the dot product was the fastest calculation, but not my a large margin. Euclidean distance was pretty close, followed by Manhattan distance and finally Chebyshev distance.&lt;/p&gt;&lt;h3 id=&quot;accuracy-results&quot;&gt;Accuracy results&lt;/h3&gt;&lt;figure class=&quot;stack--small&quot;&gt;&lt;div class=&quot;scroll-wrapper&quot;&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Function&lt;/th&gt;&lt;th&gt;F-score&lt;/th&gt;&lt;th&gt;AP&lt;/th&gt;&lt;th&gt;NDCG&lt;/th&gt;&lt;th&gt;Combined&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Cosine similarity&lt;/td&gt;&lt;td&gt;0.2366&lt;/td&gt;&lt;td&gt;0.7602&lt;/td&gt;&lt;td&gt;0.8067&lt;/td&gt;&lt;td&gt;&lt;strong&gt;0.6012&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Dot Product&lt;/td&gt;&lt;td&gt;0.2366&lt;/td&gt;&lt;td&gt;0.7602&lt;/td&gt;&lt;td&gt;0.8067&lt;/td&gt;&lt;td&gt;&lt;strong&gt;0.6012&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Euclidean distance&lt;/td&gt;&lt;td&gt;0.2366&lt;/td&gt;&lt;td&gt;0.7602&lt;/td&gt;&lt;td&gt;0.8067&lt;/td&gt;&lt;td&gt;&lt;strong&gt;0.6012&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Manhattan distance&lt;/td&gt;&lt;td&gt;0.2364&lt;/td&gt;&lt;td&gt;0.7554&lt;/td&gt;&lt;td&gt;0.8041&lt;/td&gt;&lt;td&gt;&lt;strong&gt;0.5986&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Chebyshev distance&lt;/td&gt;&lt;td&gt;0.2076&lt;/td&gt;&lt;td&gt;0.6297&lt;/td&gt;&lt;td&gt;0.6908&lt;/td&gt;&lt;td&gt;&lt;strong&gt;0.5093&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;figcaption&gt; The &quot;combined&quot; score is a simple average (mean) of the F-score, AP, and NDCG scores.&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;As predicted by the theory, the cosine similarity, dot product, and Euclidean distance functions all produced identical results. The Manhattan distance function was slightly less accurate, and the Chebyshev distance function was the least accurate. I was actually surprised to see Chebyshev score as highly as it did, and I suspect that as the size of the dataset increases the Chebyshev scores would drop off considerably.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; to ensure an apples-to-apples comparison, these tests measured how well each function ranked the entire list of document titles for each query - essentially just &lt;strong&gt;sorting&lt;/strong&gt; the documents by similarity. This is why the F-scores in particular are quite low (by including all the documents in the ranking, the precision is diluted).&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 id=&quot;which-is-the-best-choice-for-comparing-llm-embeddings&quot;&gt;Which is the best choice for comparing LLM embeddings?&lt;/h2&gt;&lt;p&gt;The crucial thing to keep in mind when choosing a distance or similarity function is this: &lt;em&gt;what kind of difference do you care about?&lt;/em&gt; In the case of LLM embeddings, what we ultimately care about is &lt;em&gt;&quot;how similar are the &lt;strong&gt;meanings&lt;/strong&gt; of these bits of text&quot;&lt;/em&gt;. For our embedding vectors, the &quot;meaning&quot; is represented by the direction of the vector, so the best comparison function would be one that focuses on the angle between the vectors and ignores other factors.&lt;/p&gt;&lt;p&gt;The &quot;full&quot; cosine similarity function is clearly the most accurate measure of this, given that it focusses exclusively on the directionality of the vectors it compares. This is why we see cosine similarity emerge as the most frequently recommended choice. And yet in practice Euclidean distance could potentially produce identical results with less complex (and therefor faster!) computation.&lt;/p&gt;&lt;p&gt;So is Euclidean distance what we should all be using? Again, we need to look at what we&#x27;re measuring. For OpenAI embeddings, the vectors are all normalized. This means the similarity calculation can be simplified to just the dot product, and the dot product is marginally more efficient to compute than the full Euclidean distance.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;TL;RD:&lt;/strong&gt; For normalized vectors like those used by LLM embeddings, calculating the &lt;strong&gt;dot product&lt;/strong&gt; is the optimal way to determine their similarity.&lt;/p&gt;&lt;/blockquote&gt;</content></entry><entry><title>How does cosine similarity work?</title><link href="https://tomhazledine.com/cosine-similarity/"/><updated>2024-08-21T00:00:00Z</updated><id>https://tomhazledine.com/cosine-similarity/</id><content type="html">&lt;p&gt;Look up &lt;em&gt;&quot;how to compare vectors&quot;&lt;/em&gt; and &lt;strong&gt;cosine similarity&lt;/strong&gt; will be the most common (if not the &lt;em&gt;only&lt;/em&gt;) approach you will see. I&#x27;ve been working with vectors &lt;a href=&quot;https://tomhazledine.com/llm-related-posts/&quot;&gt;a lot&lt;/a&gt; &lt;a href=&quot;https://tomhazledine.com/mapping-llm-embeddings-in-3d/&quot;&gt;lately&lt;/a&gt; in the context of LLM embeddings, and being able to measure how similar any two embeddings are has become an important part of my workflow. But how does the &lt;em&gt;cosine similarity&lt;/em&gt; process actually work?&lt;/p&gt;&lt;p&gt;I&#x27;ve been relying on copy/pasting cosine similarity code without really understanding how it works. To give myself a deeper understanding, I want to answer the following questions:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;How does the cosine similarity formula work?&lt;/li&gt;&lt;li&gt;What do the different parts of it &lt;em&gt;mean&lt;/em&gt;?&lt;/li&gt;&lt;li&gt;Why is this a useful method for comparing LLM embeddings?&lt;/li&gt;&lt;/ol&gt;&lt;h2 id=&quot;what-do-we-mean-by-vectors&quot;&gt;What do we mean by &quot;vectors&quot;?&lt;/h2&gt;&lt;p&gt;Before getting too deep, it&#x27;s worth clarifying what we mean by &quot;vectors&quot;. For my projects I&#x27;m using the terms &quot;embedding&quot; and &quot;vector&quot; interchangeably. To quote a &lt;a href=&quot;https://tomhazledine.com/llm-related-posts/#so-what-are-embeddings&quot;&gt;previous post of mine&lt;/a&gt;:&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;The general concept of &quot;embeddings&quot; is an offshoot of the Large Language Model (LLM) technology that makes tools like ChatGPT work. The basic idea is that you can take a piece of text (a blog post, for example) and turn it into a vector (an array of numbers). This vector is called an &quot;embedding&quot; and it represents the &quot;meaning&quot; of the text.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;In short, embeddings are vectors and vectors are lists of numbers. If, like me, you translate all code into JavaScript, we&#x27;re talking about arrays. &lt;code&gt;const vector = [0.1, 0.2, 0.3, 0.4, 0.5];&lt;/code&gt; is a vector.&lt;/p&gt;&lt;p&gt;The vectors created for LLM embeddings are very long arrays of numbers. An embedding created by OpenAI&#x27;s &lt;code&gt;ada-002&lt;/code&gt; model contains 1,536 numbers. Mathematically that can be described as a vector in 1,536-dimensional space. 2D vectors (that is to say, arrays with only 2 numbers) are much less useful in the context of embeddings, but the same principles apply, and we can use them to illustrate how cosine similarity works.&lt;/p&gt;&lt;h2 id=&quot;why-is-cosine-similarity-useful-when-comparing-vectors&quot;&gt;Why is cosine similarity useful when comparing vectors?&lt;/h2&gt;&lt;p&gt;Being able to compare how similar two vectors are is a key part of working with embeddings. Cosine similarity is the recommended way to do this.&lt;/p&gt;&lt;p&gt;If we picture a super-simplified 2D space where all our vectors have only two values, the angle between two vectors is the angle between the two lines they represent. The lines are drawn from the origin (0, 0) to the end of the vector, treating the two vector numbers as x/y co-ordinates.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; if we had vectors with three values, we&#x27;d be working in 3D space. Four values, 4D space, and so on. The principles of cosine similarity remain the same no matter how many dimensions you&#x27;re working in.&lt;/p&gt;&lt;/blockquote&gt;&lt;figure&gt;&lt;div class=&quot;cluster&quot;&gt;&lt;div id=&quot;cosine-example-01&quot;/&gt;&lt;div id=&quot;cosine-example-02&quot;/&gt;&lt;div id=&quot;cosine-example-03&quot;/&gt;&lt;/div&gt;&lt;figcaption&gt;Simplified examples showing the angle &lt;span class=&quot;maths&quot;&gt;θ&lt;/span&gt; between two vectors in 2D space.&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;The &lt;span class=&quot;maths&quot;&gt;θ&lt;/span&gt; (theta) value is the angle between the two vectors. This is the angle required to rotate one vector to align with the other. The cosine of that angle (&lt;span class=&quot;maths&quot;&gt;cos(θ)&lt;/span&gt;) gives us the cosine similarity: a number between -1 and 1.&lt;/p&gt;&lt;p&gt;If the directions of the vectors are identical, the cosine similarity is 1. If they&#x27;re orthogonal (at right angles), the cosine similarity is 0. If they&#x27;re opposite, the cosine similarity is -1.&lt;/p&gt;&lt;blockquote&gt;&lt;h4 id=&quot;cosine-similarity-ignores-the-magnitude-of-the-vectors&quot;&gt;Cosine similarity ignores the magnitude of the vectors&lt;/h4&gt;&lt;p&gt;The cosine similarity formula only cares about the angle between the vectors, not their length. This means that vectors of different lengths can still have a cosine similarity of &lt;code&gt;1&lt;/code&gt; if they&#x27;re pointing in the same direction.&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 id=&quot;digging-into-the-cosine-similarity-formula&quot;&gt;Digging into the cosine similarity formula&lt;/h2&gt;&lt;p&gt;The mathematical formula itself (as cribbed from &lt;a href=&quot;https://en.wikipedia.org/wiki/Cosine_similarity&quot;&gt;Wikipedia&lt;/a&gt;) looks like this:&lt;/p&gt;&lt;div class=&quot;maths-block&quot;&gt;&lt;span class=&quot;katex&quot;&gt;&lt;span class=&quot;katex-mathml&quot;&gt;&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mtext&gt;Cosine Similarity&lt;/mtext&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;cos&lt;/mi&gt;&lt;mo&gt;⁡&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;θ&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mi mathvariant=&quot;bold&quot;&gt;A&lt;/mi&gt;&lt;mo&gt;⋅&lt;/mo&gt;&lt;mi mathvariant=&quot;bold&quot;&gt;B&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;mi mathvariant=&quot;bold&quot;&gt;A&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;mo&gt;×&lt;/mo&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;mi mathvariant=&quot;bold&quot;&gt;B&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;\text{Cosine Similarity} = \cos(\theta) = \frac{\mathbf{A} \cdot \mathbf{B}}{||\mathbf{A}|| \times ||\mathbf{B}||}&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&quot;katex-html&quot; aria-hidden=&quot;true&quot;&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:0.8889em;vertical-align:-0.1944em;&quot;/&gt;&lt;span class=&quot;mord text&quot;&gt;&lt;span class=&quot;mord&quot;&gt;Cosine Similarity&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;span class=&quot;mrel&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1em;vertical-align:-0.25em;&quot;/&gt;&lt;span class=&quot;mop&quot;&gt;cos&lt;/span&gt;&lt;span class=&quot;mopen&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.02778em;&quot;&gt;θ&lt;/span&gt;&lt;span class=&quot;mclose&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;span class=&quot;mrel&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1.3943em;vertical-align:-0.52em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mopen nulldelimiter&quot;/&gt;&lt;span class=&quot;mfrac&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.8743em;&quot;&gt;&lt;span style=&quot;top:-2.655em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;∣∣&lt;/span&gt;&lt;span class=&quot;mord mathbf mtight&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;mord mtight&quot;&gt;∣∣&lt;/span&gt;&lt;span class=&quot;mbin mtight&quot;&gt;×&lt;/span&gt;&lt;span class=&quot;mord mtight&quot;&gt;∣∣&lt;/span&gt;&lt;span class=&quot;mord mathbf mtight&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;mord mtight&quot;&gt;∣∣&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.23em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;frac-line&quot; style=&quot;border-bottom-width:0.04em;&quot;/&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.394em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mathbf mtight&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;mbin mtight&quot;&gt;⋅&lt;/span&gt;&lt;span class=&quot;mord mathbf mtight&quot;&gt;B&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.52em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mclose nulldelimiter&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;blockquote&gt;&lt;p&gt;where:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;span class=&quot;maths&quot;&gt;A⋅B&lt;/span&gt; is the dot product of vectors &lt;span class=&quot;maths&quot;&gt;A&lt;/span&gt; and &lt;span class=&quot;maths&quot;&gt;B&lt;/span&gt;.&lt;/li&gt;&lt;li&gt;&lt;span class=&quot;maths&quot;&gt;∣∣A∣∣&lt;/span&gt; is the magnitude of vector &lt;span class=&quot;maths&quot;&gt;A&lt;/span&gt;.&lt;/li&gt;&lt;li&gt;&lt;span class=&quot;maths&quot;&gt;∣∣B∣∣&lt;/span&gt; is the magnitude of vector &lt;span class=&quot;maths&quot;&gt;B&lt;/span&gt;.&lt;/li&gt;&lt;li&gt;&lt;span class=&quot;maths&quot;&gt;θ&lt;/span&gt; is the angle between the two vectors.&lt;/li&gt;&lt;/ul&gt;&lt;/blockquote&gt;&lt;p&gt;That seems straightforward enough, but to translate it into a useable JavaScript function I&#x27;ll need to answer a few followup questions:&lt;/p&gt;&lt;h3 id=&quot;what-is-the-dot-product-of-two-vectors&quot;&gt;What is the &quot;dot product&quot; of two vectors?&lt;/h3&gt;&lt;p&gt;&quot;Dot product&quot; basically means &quot;multiply and add&quot;. The dot product of two vectors is the sum of the products of their corresponding elements.&lt;/p&gt;&lt;div class=&quot;maths-block&quot;&gt;&lt;span class=&quot;katex&quot;&gt;&lt;span class=&quot;katex-mathml&quot;&gt;&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi mathvariant=&quot;bold&quot;&gt;A&lt;/mi&gt;&lt;mo&gt;⋅&lt;/mo&gt;&lt;mi mathvariant=&quot;bold&quot;&gt;B&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;msub&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;msub&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mo&gt;…&lt;/mo&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msub&gt;&lt;msub&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;\mathbf{A} \cdot \mathbf{B} = a_1 b_1 + a_2 b_2 + \ldots + a_n b_n&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&quot;katex-html&quot; aria-hidden=&quot;true&quot;&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:0.6861em;&quot;/&gt;&lt;span class=&quot;mord mathbf&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;span class=&quot;mbin&quot;&gt;⋅&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:0.6861em;&quot;/&gt;&lt;span class=&quot;mord mathbf&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;span class=&quot;mrel&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:0.8444em;vertical-align:-0.15em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.3011em;&quot;&gt;&lt;span style=&quot;top:-2.55em;margin-left:0em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.15em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.3011em;&quot;&gt;&lt;span style=&quot;top:-2.55em;margin-left:0em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.15em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;span class=&quot;mbin&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:0.8444em;vertical-align:-0.15em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.3011em;&quot;&gt;&lt;span style=&quot;top:-2.55em;margin-left:0em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.15em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.3011em;&quot;&gt;&lt;span style=&quot;top:-2.55em;margin-left:0em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.15em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;span class=&quot;mbin&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:0.6667em;vertical-align:-0.0833em;&quot;/&gt;&lt;span class=&quot;minner&quot;&gt;…&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;span class=&quot;mbin&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:0.8444em;vertical-align:-0.15em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.1514em;&quot;&gt;&lt;span style=&quot;top:-2.55em;margin-left:0em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mathnormal mtight&quot;&gt;n&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.15em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mord mathnormal&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.1514em;&quot;&gt;&lt;span style=&quot;top:-2.55em;margin-left:0em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mathnormal mtight&quot;&gt;n&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.15em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;p&gt;For example, the dot product of the vectors &lt;code&gt;[1, 2, 3]&lt;/code&gt; and &lt;code&gt;[4, 5, 6]&lt;/code&gt; is &lt;span class=&quot;maths&quot;&gt;1 × 4 + 2 × 5 + 3 × 6 = 4 + 10 + 18 = 32&lt;/span&gt;. Given vectors &lt;code&gt;a&lt;/code&gt; and &lt;code&gt;b&lt;/code&gt;, the dot product can be calculated in JS like this:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; dotProduct = a.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;acc, cur, i&lt;/span&gt;) =&gt;&lt;/span&gt; acc + cur * b[i], &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;what-is-the-magnitude-of-a-vector&quot;&gt;What is the &quot;magnitude&quot; of a vector?&lt;/h3&gt;&lt;p&gt;In simple language, the &quot;magnitude&quot; of a vector is its length. In mathematical terms, it&#x27;s the square root of the sum of the squares of its elements.&lt;/p&gt;&lt;div class=&quot;maths-block&quot;&gt;&lt;span class=&quot;katex&quot;&gt;&lt;span class=&quot;katex-mathml&quot;&gt;&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∥&lt;/mi&gt;&lt;mi mathvariant=&quot;bold&quot;&gt;v&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∥&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msqrt&gt;&lt;mrow&gt;&lt;msubsup&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msubsup&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;msubsup&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msubsup&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mo&gt;…&lt;/mo&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;msubsup&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msubsup&gt;&lt;/mrow&gt;&lt;/msqrt&gt;&lt;/mrow&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;\|\mathbf{v}\| = \sqrt{v_1^2 + v_2^2 + \ldots + v_n^2}&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&quot;katex-html&quot; aria-hidden=&quot;true&quot;&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1em;vertical-align:-0.25em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;∥&lt;/span&gt;&lt;span class=&quot;mord mathbf&quot; style=&quot;margin-right:0.01597em;&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;mord&quot;&gt;∥&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;span class=&quot;mrel&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1.24em;vertical-align:-0.2902em;&quot;/&gt;&lt;span class=&quot;mord sqrt&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.9498em;&quot;&gt;&lt;span class=&quot;svg-align&quot; style=&quot;top:-3.2em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3.2em;&quot;/&gt;&lt;span class=&quot;mord&quot; style=&quot;padding-left:1em;&quot;&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.03588em;&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.7959em;&quot;&gt;&lt;span style=&quot;top:-2.4337em;margin-left:-0.0359em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.0448em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.2663em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;span class=&quot;mbin&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.03588em;&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.7959em;&quot;&gt;&lt;span style=&quot;top:-2.4337em;margin-left:-0.0359em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.0448em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.2663em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;span class=&quot;mbin&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;span class=&quot;minner&quot;&gt;…&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;span class=&quot;mbin&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.03588em;&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.7401em;&quot;&gt;&lt;span style=&quot;top:-2.453em;margin-left:-0.0359em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mathnormal mtight&quot;&gt;n&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;top:-2.989em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.247em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;top:-2.9098em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3.2em;&quot;/&gt;&lt;span class=&quot;hide-tail&quot; style=&quot;min-width:1.02em;height:1.28em;&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;400em&quot; height=&quot;1.28em&quot; viewBox=&quot;0 0 400000 1296&quot; preserveAspectRatio=&quot;xMinYMin slice&quot;&gt;&lt;path d=&quot;M263,681c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l0 -0
c4.7,-7.3,11,-11,19,-11
H40000v40H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M1001 80h400000v40h-400000z&quot;/&gt;&lt;/svg&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.2902em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;p&gt;For example, the magnitude of the vector &lt;code&gt;[1, 2, 3]&lt;/code&gt; is &lt;span class=&quot;maths&quot;&gt;√(1&lt;sup&gt;2&lt;/sup&gt; + 2&lt;sup&gt;2&lt;/sup&gt; + 3&lt;sup&gt;2&lt;/sup&gt;) = √(1 + 4 + 9) = √14&lt;/span&gt;. Given a vector &lt;code&gt;a&lt;/code&gt;, the magnitude can be calculated in JS like this:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; magnitude = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;sqrt&lt;/span&gt;(a.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;acc, cur&lt;/span&gt;) =&gt;&lt;/span&gt; acc + cur ** &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;));
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;&lt;h4 id=&quot;but-arent-we-ignoring-the-magnitude-of-the-vectors&quot;&gt;But aren&#x27;t we ignoring the magnitude of the vectors?&lt;/h4&gt;&lt;p&gt;Calculating the magnitudes of the vectors feels counterintuitive given we want to ignore it. But by including the &lt;strong&gt;product&lt;/strong&gt; of the magnitudes the formula can normalize the dot product, ensuring the similarity measure is independent of the vectors&#x27; lengths.&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 id=&quot;the-full-cosine-similarity-function-in-javascript&quot;&gt;The full &lt;em&gt;Cosine Similarity&lt;/em&gt; function in JavaScript&lt;/h3&gt;&lt;p&gt;Now that we&#x27;ve unpicked all the parts of the formula, we can put them together to create a JavaScript function that calculates the cosine similarity of any two vectors.&lt;/p&gt;&lt;div class=&quot;maths-block&quot;&gt;&lt;span class=&quot;katex&quot;&gt;&lt;span class=&quot;katex-mathml&quot;&gt;&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;cos&lt;/mi&gt;&lt;mo&gt;⁡&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;θ&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mi mathvariant=&quot;bold&quot;&gt;A&lt;/mi&gt;&lt;mo&gt;⋅&lt;/mo&gt;&lt;mi mathvariant=&quot;bold&quot;&gt;B&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;mi mathvariant=&quot;bold&quot;&gt;A&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;mo&gt;×&lt;/mo&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;mi mathvariant=&quot;bold&quot;&gt;B&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;∣&lt;/mi&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;\cos(\theta) = \frac{\mathbf{A} \cdot \mathbf{B}}{||\mathbf{A}|| \times ||\mathbf{B}||}&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&quot;katex-html&quot; aria-hidden=&quot;true&quot;&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1em;vertical-align:-0.25em;&quot;/&gt;&lt;span class=&quot;mop&quot;&gt;cos&lt;/span&gt;&lt;span class=&quot;mopen&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.02778em;&quot;&gt;θ&lt;/span&gt;&lt;span class=&quot;mclose&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;span class=&quot;mrel&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1.3943em;vertical-align:-0.52em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mopen nulldelimiter&quot;/&gt;&lt;span class=&quot;mfrac&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.8743em;&quot;&gt;&lt;span style=&quot;top:-2.655em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;∣∣&lt;/span&gt;&lt;span class=&quot;mord mathbf mtight&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;mord mtight&quot;&gt;∣∣&lt;/span&gt;&lt;span class=&quot;mbin mtight&quot;&gt;×&lt;/span&gt;&lt;span class=&quot;mord mtight&quot;&gt;∣∣&lt;/span&gt;&lt;span class=&quot;mord mathbf mtight&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;mord mtight&quot;&gt;∣∣&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.23em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;frac-line&quot; style=&quot;border-bottom-width:0.04em;&quot;/&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.394em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mathbf mtight&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;mbin mtight&quot;&gt;⋅&lt;/span&gt;&lt;span class=&quot;mord mathbf mtight&quot;&gt;B&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.52em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mclose nulldelimiter&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;cosineSimilarity&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;a, b&lt;/span&gt;) =&gt; {
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; dotProduct = a.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;acc, cur, i&lt;/span&gt;) =&gt;&lt;/span&gt; acc + cur * b[i], &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);
    
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; magnitudeA = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;sqrt&lt;/span&gt;(a.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;acc, cur&lt;/span&gt;) =&gt;&lt;/span&gt; acc + cur ** &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;));
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; magnitudeB = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;sqrt&lt;/span&gt;(b.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;acc, cur&lt;/span&gt;) =&gt;&lt;/span&gt; acc + cur ** &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;));
    
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; magnitudeProduct = magnitudeA * magnitudeB;
    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (magnitudeProduct === &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;; &lt;span class=&quot;hljs-comment&quot;&gt;// Prevent division by zero&lt;/span&gt;
    
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; similarity = dotProduct / magnitudeProduct;
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; similarity;
};
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;&lt;h4 id=&quot;why-doesnt-this-function-use-mathcos&quot;&gt;Why doesn&#x27;t this function use &lt;code&gt;Math.cos()&lt;/code&gt;?&lt;/h4&gt;&lt;p&gt;Given how much we&#x27;ve been talking about &quot;cosines&quot;, it&#x27;s surprising that our &lt;code&gt;cosineSimilarity&lt;/code&gt; function doesn&#x27;t make use of JavaScript&#x27;s built-in &lt;code&gt;Math.cos()&lt;/code&gt; function. This is because our function directly computes the cosine of the angle without needing to determine the angle itself. Using &lt;code&gt;Math.cos()&lt;/code&gt; would require first calculating the angle using an inverse trigonometric function like &lt;code&gt;Math.acos()&lt;/code&gt;, which is unnecessary and computationally more expensive.&lt;/p&gt;&lt;/blockquote&gt;&lt;hr/&gt;&lt;h2 id=&quot;so-why-is-cosine-similarity-useful-for-comparing-llm-embeddings&quot;&gt;So why is cosine similarity useful for comparing LLM embeddings?&lt;/h2&gt;&lt;p&gt;There&#x27;s a reason cosine similarity is the recommended way to compare LLM embeddings. The important part of an embedding is its &lt;em&gt;direction&lt;/em&gt;, not its &lt;em&gt;length&lt;/em&gt;. If two embeddings are pointing in the same direction, then according to the model they represent the same &quot;meaning&quot;.&lt;/p&gt;&lt;p&gt;Because cosine similarity measures the similarity of two vectors based on their direction, ignoring their length, it&#x27;s the perfect tool for comparing embeddings. It&#x27;s also computationally cheap, which is a bonus. And, &lt;a href=&quot;#the-full-cosine-similarity-function-in-javascript&quot;&gt;as we&#x27;ve seen&lt;/a&gt;, can be implemented in just a few lines of JavaScript.&lt;/p&gt;&lt;p&gt;The power of embeddings comes from their multidimensionality. The vectors are long, and the relationships between the numbers in the vectors are complex. But the principles of cosine similarity remain the same, no matter how many dimensions you&#x27;re working in. It&#x27;s a simple and effective way to compare vectors.&lt;/p&gt;&lt;h2 id=&quot;are-there-alternatives-to-cosine-similarity&quot;&gt;Are there alternatives to cosine similarity?&lt;/h2&gt;&lt;p&gt;Cosine similarity is the most common way to compare vectors, but it&#x27;s not the only way. I&#x27;ll be exploring alternatives in next month&#x27;s post, so pop your email in the box at the bottom of this page if you want to be notified when it&#x27;s published.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;Update:&lt;/strong&gt; The follow-up post is now live, &lt;a href=&quot;https://tomhazledine.com/cosine-similarity-alternatives/&quot;&gt;Alternatives to cosine similarity&lt;/a&gt;. Click through to learn about the mechanics of Euclidean, Manhattan, and Chebyshev distances, and how they compare to cosine similarity. &lt;/p&gt;&lt;/blockquote&gt;</content></entry><entry><title>How do you test the quality of search results?</title><link href="https://tomhazledine.com/assessing-search-quality/"/><updated>2024-07-08T00:00:00Z</updated><id>https://tomhazledine.com/assessing-search-quality/</id><content type="html">&lt;p&gt;The site-search for this blog needs improving, but I have no idea how to measure how &quot;good&quot; or &quot;bad&quot; it is. If I can&#x27;t measure it, then how can I tell if any future changes improve it? With this in mind I&#x27;ve finally done some research and put together a handy toolset for assessing the quality of my site&#x27;s search functionality. Strap in, this is a deep dive!&lt;/p&gt;&lt;nav class=&quot;toc&quot;&gt;&lt;h2 id=&quot;in-this-article&quot;&gt;In this article&lt;/h2&gt;&lt;ol&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#part-1-learning-the-basic-concepts&quot;&gt;Part 1: learning the basic concepts &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;ol class=&quot;stack--small&quot;&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#precision-recall-and-the-f-score&quot;&gt;Precision, Recall, and the F-score &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#average-precision&quot;&gt;Average Precision &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#normalized-discounted-cumulative-gain&quot;&gt;Normalized Discounted Cumulative Gain &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#ground-truth-and-subjectivity&quot;&gt;“Ground truth” and subjectivity &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#summarising-search-assessment-techniques&quot;&gt;Summarising search-assessment techniques &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#part-2-implementing-the-assessment-in-javascript&quot;&gt;Part 2: implementing the assessment in JavaScript &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;ol class=&quot;stack--small&quot;&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#the-test-framework&quot;&gt;The test framework &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#calculating-an-f-score-in-javascript&quot;&gt;Calculating an F-score in JavaScript &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#calculating-mean-average-precision-in-javascript&quot;&gt;Calculating Mean Average Precision in JavaScript &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#calculating-normalized-discounted-cumulative-gain-in-javascript&quot;&gt;Calculating Normalized Discounted Cumulative Gain in JavaScript &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#part-3-running-the-tests&quot;&gt;Part 3: running the tests &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;ol class=&quot;stack--small&quot;&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#the-results&quot;&gt;The results &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#what-does-this-tell-me&quot;&gt;What does this tell me? &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#next-steps&quot;&gt;Next steps &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/nav&gt;&lt;hr/&gt;&lt;h2 id=&quot;part-1-learning-the-basic-concepts&quot;&gt;Part 1: learning the basic concepts&lt;/h2&gt;&lt;p&gt;It turns out that &quot;Information Retrieval&quot; is rich field of academic study, and comes with a wealth of approaches for evaluating results. I&#x27;m not inventing anything new here, just documenting my own mini voyage of discovery. &lt;/p&gt;&lt;h3 id=&quot;precision-recall-and-the-f-score&quot;&gt;Precision, Recall, and the F-score&lt;/h3&gt;&lt;p&gt;When assessing the quality of search results, the two key factors to consider are &lt;strong&gt;precision&lt;/strong&gt; and &lt;strong&gt;recall&lt;/strong&gt;.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Precision&lt;/strong&gt; is the proportion of retrieved documents that are relevant.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Recall&lt;/strong&gt; is the proportion of relevant documents that are retrieved.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Precision and recall are both &lt;strong&gt;equally&lt;/strong&gt; important, so it&#x27;s useful to combine these metrics into a single factor: the &lt;a href=&quot;https://en.wikipedia.org/wiki/F-score&quot;&gt;&lt;strong&gt;F-score&lt;/strong&gt;&lt;/a&gt;. This is a score between &lt;code&gt;0&lt;/code&gt; and &lt;code&gt;1&lt;/code&gt;, with &lt;code&gt;1&lt;/code&gt; meaning &lt;em&gt;&quot;the results are perfect&quot;&lt;/em&gt; and &lt;code&gt;0&lt;/code&gt; meaning &lt;em&gt;&quot;the results are terrible&quot;&lt;/em&gt;.&lt;/p&gt;&lt;div class=&quot;maths-block&quot;&gt;&lt;span class=&quot;katex&quot;&gt;&lt;span class=&quot;katex-mathml&quot;&gt;&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mtext&gt;F1 Score&lt;/mtext&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo&gt;×&lt;/mo&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mtext&gt;Precision&lt;/mtext&gt;&lt;mo&gt;×&lt;/mo&gt;&lt;mtext&gt;Recall&lt;/mtext&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mtext&gt;Precision&lt;/mtext&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mtext&gt;Recall&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;\text{F1 Score} = 2 \times \frac{\text{Precision} \times \text{Recall}}{\text{Precision} + \text{Recall}}&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&quot;katex-html&quot; aria-hidden=&quot;true&quot;&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:0.6833em;&quot;/&gt;&lt;span class=&quot;mord text&quot;&gt;&lt;span class=&quot;mord&quot;&gt;F1 Score&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;span class=&quot;mrel&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:0.7278em;vertical-align:-0.0833em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;span class=&quot;mbin&quot;&gt;×&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1.2834em;vertical-align:-0.4033em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mopen nulldelimiter&quot;/&gt;&lt;span class=&quot;mfrac&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.8801em;&quot;&gt;&lt;span style=&quot;top:-2.655em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord text mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;Precision&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mbin mtight&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mord text mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;Recall&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.23em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;frac-line&quot; style=&quot;border-bottom-width:0.04em;&quot;/&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.394em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord text mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;Precision&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mbin mtight&quot;&gt;×&lt;/span&gt;&lt;span class=&quot;mord text mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;Recall&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.4033em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mclose nulldelimiter&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;p&gt;The F-score (or, more accurately, the &lt;em&gt;&lt;strong&gt;F&lt;sub&gt;1&lt;/sub&gt;&lt;/strong&gt;&lt;/em&gt;-score&lt;sup id=&quot;fnref-1&quot;&gt;&lt;a href=&quot;#fn-1&quot; class=&quot;footnote-ref&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;) uses the &lt;strong&gt;harmonic mean&lt;/strong&gt; rather than a simple mathematical average. This gives a balanced measure that penalises extreme values, so both precision &lt;em&gt;and&lt;/em&gt; recall need to be high to achieve a high F&lt;sub&gt;1&lt;/sub&gt;-score.&lt;/p&gt;&lt;h3 id=&quot;average-precision&quot;&gt;Average Precision&lt;/h3&gt;&lt;p&gt;An F-score shows the trade-off between precision and recall, but gives no consideration to the &lt;em&gt;ranking&lt;/em&gt; of the results. And in the real world the position of a relevant document in the results list is kind of important (just ask anyone who&#x27;s website appears on the second page of Google).&lt;/p&gt;&lt;p&gt;An assessment measure that &lt;em&gt;does&lt;/em&gt; account for ranking position is &lt;strong&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Evaluation_measures_(information_retrieval)#Average_precision&quot;&gt;Average Precision (AP)&lt;/a&gt;&lt;/strong&gt;. Similar to the F-score, AP measures the quality of search results on a &lt;code&gt;0&lt;/code&gt;–&lt;code&gt;1&lt;/code&gt; scale. Unlike the F-score, however, AP considers the &lt;em&gt;order&lt;/em&gt; in which relevant documents appear, giving more weight to relevant documents that appear earlier.&lt;/p&gt;&lt;p&gt;Average Precision is calculated by averaging the precision at each position where a relevant document is retrieved.&lt;/p&gt;&lt;div class=&quot;maths-block&quot;&gt;&lt;span class=&quot;katex&quot;&gt;&lt;span class=&quot;katex-mathml&quot;&gt;&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mtext&gt;AP&lt;/mtext&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mfrac&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;/mfrac&gt;&lt;msubsup&gt;&lt;mo&gt;∑&lt;/mo&gt;&lt;mrow&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msubsup&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;⋅&lt;/mo&gt;&lt;mtext&gt;rel&lt;/mtext&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;\text{AP} = \frac{1}{R} \sum_{k=1}^{n} P(k) \cdot \text{rel}(k)&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&quot;katex-html&quot; aria-hidden=&quot;true&quot;&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:0.6833em;&quot;/&gt;&lt;span class=&quot;mord text&quot;&gt;&lt;span class=&quot;mord&quot;&gt;AP&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;span class=&quot;mrel&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1.1901em;vertical-align:-0.345em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mopen nulldelimiter&quot;/&gt;&lt;span class=&quot;mfrac&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.8451em;&quot;&gt;&lt;span style=&quot;top:-2.655em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mathnormal mtight&quot; style=&quot;margin-right:0.00773em;&quot;&gt;R&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.23em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;frac-line&quot; style=&quot;border-bottom-width:0.04em;&quot;/&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.394em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.345em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mclose nulldelimiter&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.1667em;&quot;/&gt;&lt;span class=&quot;mop&quot;&gt;&lt;span class=&quot;mop op-symbol small-op&quot; style=&quot;position:relative;top:0em;&quot;&gt;∑&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.8043em;&quot;&gt;&lt;span style=&quot;top:-2.4003em;margin-left:0em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mathnormal mtight&quot; style=&quot;margin-right:0.03148em;&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;mrel mtight&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mord mtight&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.2029em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mathnormal mtight&quot;&gt;n&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.2997em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.1667em;&quot;/&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.13889em;&quot;&gt;P&lt;/span&gt;&lt;span class=&quot;mopen&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.03148em;&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;mclose&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;span class=&quot;mbin&quot;&gt;⋅&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1em;vertical-align:-0.25em;&quot;/&gt;&lt;span class=&quot;mord text&quot;&gt;&lt;span class=&quot;mord&quot;&gt;rel&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mopen&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.03148em;&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;mclose&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;blockquote&gt;&lt;p&gt;where:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;span class=&quot;maths&quot;&gt;𝑅&lt;/span&gt; is the total number of relevant documents for the query.&lt;/li&gt;&lt;li&gt;&lt;span class=&quot;maths&quot;&gt;𝑛&lt;/span&gt; is the total number of retrieved documents.&lt;/li&gt;&lt;li&gt;&lt;span class=&quot;maths&quot;&gt;𝑃(𝑘)&lt;/span&gt; is the precision at position &lt;span class=&quot;maths&quot;&gt;𝑘&lt;/span&gt;.&lt;/li&gt;&lt;li&gt;&lt;span class=&quot;maths&quot;&gt;rel(𝑘)&lt;/span&gt; is a binary indicator function that is 1 if the document at position &lt;span class=&quot;maths&quot;&gt;𝑘&lt;/span&gt; is relevant, and 0 otherwise.&lt;/li&gt;&lt;/ul&gt;&lt;/blockquote&gt;&lt;h3 id=&quot;normalized-discounted-cumulative-gain&quot;&gt;Normalized Discounted Cumulative Gain&lt;/h3&gt;&lt;p&gt;To go even deeper, we can also use a concept called &lt;a href=&quot;https://en.wikipedia.org/wiki/Discounted_cumulative_gain&quot;&gt;&lt;strong&gt;Normalized Discounted Cumulative Gain (NDCG)&lt;/strong&gt;&lt;/a&gt;. Where AP decreases the weighting of results linearly as they appear further down the list, Discounted Cumulative Gain (DCG) does this logarithmically. This means that DCG gives exponentially higher weights to top-ranked documents.&lt;sup id=&quot;fnref-2&quot;&gt;&lt;a href=&quot;#fn-2&quot; class=&quot;footnote-ref&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;&lt;p&gt;DCG is computed by summing the relevance-scores of documents in the order they are retrieved, discounted logarithmically by their position in the ranking (ensuring higher-ranked relevant documents contribute more to the score).&lt;/p&gt;&lt;div class=&quot;maths-block&quot;&gt;&lt;span class=&quot;katex&quot;&gt;&lt;span class=&quot;katex-mathml&quot;&gt;&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mtext&gt;DCG&lt;/mtext&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msubsup&gt;&lt;mo&gt;∑&lt;/mo&gt;&lt;mrow&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;/msubsup&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;msup&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;msub&gt;&lt;mtext&gt;rel&lt;/mtext&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/msup&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mrow&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mo&gt;⁡&lt;/mo&gt;&lt;/mrow&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;\text{DCG}_p = \sum_{i=1}^{p} \frac{2^{\text{rel}_i} - 1}{\log_2(i + 1)}&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&quot;katex-html&quot; aria-hidden=&quot;true&quot;&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:0.9694em;vertical-align:-0.2861em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mord text&quot;&gt;&lt;span class=&quot;mord&quot;&gt;DCG&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.1514em;&quot;&gt;&lt;span style=&quot;top:-2.55em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mathnormal mtight&quot;&gt;p&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.2861em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;span class=&quot;mrel&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1.574em;vertical-align:-0.5311em;&quot;/&gt;&lt;span class=&quot;mop&quot;&gt;&lt;span class=&quot;mop op-symbol small-op&quot; style=&quot;position:relative;top:0em;&quot;&gt;∑&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.8043em;&quot;&gt;&lt;span style=&quot;top:-2.4003em;margin-left:0em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mathnormal mtight&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;mrel mtight&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mord mtight&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.2029em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mathnormal mtight&quot;&gt;p&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.2997em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.1667em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mopen nulldelimiter&quot;/&gt;&lt;span class=&quot;mfrac&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:1.0429em;&quot;&gt;&lt;span style=&quot;top:-2.655em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mop mtight&quot;&gt;&lt;span class=&quot;mop mtight&quot;&gt;&lt;span class=&quot;mtight&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;mtight&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;mtight&quot; style=&quot;margin-right:0.01389em;&quot;&gt;g&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.1944em;&quot;&gt;&lt;span style=&quot;top:-2.2341em;margin-right:0.0714em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.5em;&quot;/&gt;&lt;span class=&quot;sizing reset-size3 size1 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.2659em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mopen mtight&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mord mathnormal mtight&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;mbin mtight&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mord mtight&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;mclose mtight&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.23em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;frac-line&quot; style=&quot;border-bottom-width:0.04em;&quot;/&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.394em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.927em;&quot;&gt;&lt;span style=&quot;top:-2.931em;margin-right:0.0714em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.5em;&quot;/&gt;&lt;span class=&quot;sizing reset-size3 size1 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord text mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;rel&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.3448em;&quot;&gt;&lt;span style=&quot;top:-2.3448em;margin-right:0.1em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.6595em;&quot;/&gt;&lt;span class=&quot;mord mathnormal mtight&quot;&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.3147em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mbin mtight&quot;&gt;−&lt;/span&gt;&lt;span class=&quot;mord mtight&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.5311em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mclose nulldelimiter&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;blockquote&gt;&lt;p&gt;where:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;span class=&quot;maths&quot;&gt;𝑝&lt;/span&gt; is the rank position up to which the documents are considered.&lt;/li&gt;&lt;li&gt;&lt;span class=&quot;maths&quot;&gt;rel&lt;sub&gt;𝑖&lt;/sub&gt;&lt;/span&gt; is the relevance score of the document at position &lt;span class=&quot;maths&quot;&gt;𝑖&lt;/span&gt;.&lt;/li&gt;&lt;li&gt;&lt;span class=&quot;maths&quot;&gt;log&lt;sub&gt;2&lt;/sub&gt;(𝑖+1)&lt;/span&gt; is the logarithm base 2 of &lt;span class=&quot;maths&quot;&gt;(𝑖+1)&lt;/span&gt;.&lt;/li&gt;&lt;/ul&gt;&lt;/blockquote&gt;&lt;p&gt;As its name suggests, NDCG &lt;em&gt;normalizes&lt;/em&gt; the DCG score. It does this against an &lt;strong&gt;ideal&lt;/strong&gt; DCG score (IDCG), allowing for better comparison of different queries. IDCG is found with the same formula, but using the ideal order of documents instead of the retrieved documents. The two values, DCG and IDCG, are then divided to give us NDCG.&lt;/p&gt;&lt;div class=&quot;maths-block&quot;&gt;&lt;span class=&quot;katex&quot;&gt;&lt;span class=&quot;katex-mathml&quot;&gt;&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mtext&gt;NDCG&lt;/mtext&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mfrac&gt;&lt;mtext&gt;DCG&lt;/mtext&gt;&lt;mtext&gt;IDCG&lt;/mtext&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;\text{NDCG} = \frac{\text{DCG}}{\text{IDCG}}&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&quot;katex-html&quot; aria-hidden=&quot;true&quot;&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:0.6833em;&quot;/&gt;&lt;span class=&quot;mord text&quot;&gt;&lt;span class=&quot;mord&quot;&gt;NDCG&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;span class=&quot;mrel&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1.2173em;vertical-align:-0.345em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mopen nulldelimiter&quot;/&gt;&lt;span class=&quot;mfrac&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.8723em;&quot;&gt;&lt;span style=&quot;top:-2.655em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord text mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;IDCG&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.23em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;frac-line&quot; style=&quot;border-bottom-width:0.04em;&quot;/&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.394em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord text mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;DCG&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.345em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mclose nulldelimiter&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;hr/&gt;&lt;h3 id=&quot;ground-truth-and-subjectivity&quot;&gt;“Ground truth” and subjectivity&lt;/h3&gt;&lt;p&gt;F&lt;sub&gt;1&lt;/sub&gt;, AP, and NDCG are all very official sounding science-y terms, but one aspect I&#x27;ve avoided addressing so far is this: &lt;strong&gt;an assessment of search performance will always be subjective&lt;/strong&gt;.&lt;/p&gt;&lt;p&gt;All of those “objective” metrics rely on the same thing: a preset definition of what an “ideal” search looks like. Put plainly, to measure how many relevant results have been returned for a query I need to know which pages would be relevant in the first place.&lt;/p&gt;&lt;p&gt;Common practice is to define a “ground truth dataset” that contains example queries and their ideal results. But &lt;em&gt;I have to make this judgment myself&lt;/em&gt;. It&#x27;s a mini &lt;a href=&quot;https://en.wikipedia.org/wiki/Halting_problem&quot;&gt;halting problem&lt;/a&gt;: to programatically judge whether a search is perfect, I&#x27;d have to build a perfect search algorithm.&lt;/p&gt;&lt;p&gt;The content I&#x27;m searching is my blog, so each &quot;relevant document&quot; is a page on my site, represented in the dataset by it&#x27;s URL.&lt;sup id=&quot;fnref-3&quot;&gt;&lt;a href=&quot;#fn-3&quot; class=&quot;footnote-ref&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-json&quot;&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;data visualisation&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;hljs-string&quot;&gt;&quot;/known-pleasures-svg-line-art/&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;hljs-string&quot;&gt;&quot;/mapping-llm-embeddings-in-3d/&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;hljs-string&quot;&gt;&quot;/improving-svg-chart-interactivity-with-voronoi-diagrams/&quot;&lt;/span&gt;
        &lt;span class=&quot;hljs-comment&quot;&gt;// etc...&lt;/span&gt;
    &lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;static site generator&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;hljs-string&quot;&gt;&quot;/eleventy-static-site-generator/&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;hljs-string&quot;&gt;&quot;/llm-related-posts/&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;hljs-string&quot;&gt;&quot;/client-side-search-static-site/&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;hljs-comment&quot;&gt;// etc...&lt;/span&gt;
    &lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;hljs-comment&quot;&gt;// etc...&lt;/span&gt;
&lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;summarising-search-assessment-techniques&quot;&gt;Summarising search-assessment techniques&lt;/h3&gt;&lt;p&gt;For my n00b perspective, the important takeaway is that I now have a set of three values to compare, each of which is conveniently expressed as a number between zero and one.&lt;/p&gt;&lt;ol&gt;&lt;li&gt;The &lt;strong&gt;F&lt;sub&gt;1&lt;/sub&gt;-score&lt;/strong&gt; tells me how well the algorithm balances &lt;em&gt;precision&lt;/em&gt; and &lt;em&gt;recall&lt;/em&gt;.&lt;/li&gt;&lt;li&gt;The &lt;strong&gt;Average Precision&lt;/strong&gt; tells me how well the algorithm retrieves relevant documents.&lt;/li&gt;&lt;li&gt;The &lt;strong&gt;Normalized Discounted Cumulative Gain&lt;/strong&gt; tells me how well the algorithm ranks relevant documents by their importance.&lt;/li&gt;&lt;/ol&gt;&lt;hr/&gt;&lt;h2 id=&quot;part-2-implementing-the-assessment-in-javascript&quot;&gt;Part 2: implementing the assessment in JavaScript&lt;/h2&gt;&lt;p&gt;To put all these ideas into practice I&#x27;ll need to turn them into JavaScript functions that I can use.&lt;/p&gt;&lt;h3 id=&quot;the-test-framework&quot;&gt;The test framework&lt;/h3&gt;&lt;p&gt;My long-term plan is to test multiple different search algorithms, so it makes sense to build a framework that can be reused with different implementations.&lt;/p&gt;&lt;p&gt;I&#x27;ll need to ensure each algorithm I test returns results in the same format, which in my case will be an array of document URLs. For now, I&#x27;ll just use a single example algorithm: &lt;code&gt;myAwesomeSearch()&lt;/code&gt;.&lt;/p&gt;&lt;p&gt;This code assumes that I&#x27;ve imported my JSON index as &lt;code&gt;index&lt;/code&gt; and my example search algorithm as &lt;code&gt;myAwesomeSearch&lt;/code&gt;.&lt;sup id=&quot;fnref-4&quot;&gt;&lt;a href=&quot;#fn-4&quot; class=&quot;footnote-ref&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Example search algorithm&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; exampleSearch = {
    &lt;span class=&quot;hljs-attr&quot;&gt;title&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Algo #1&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;fn&lt;/span&gt;: &lt;span class=&quot;hljs-title function_&quot;&gt;myAwesomeSearch&lt;/span&gt;(index),
    &lt;span class=&quot;hljs-attr&quot;&gt;parser&lt;/span&gt;: &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;result&lt;/span&gt; =&gt;&lt;/span&gt; result.&lt;span class=&quot;hljs-property&quot;&gt;item&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;url&lt;/span&gt;
};

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; searches = [
    exampleSearch,
    &lt;span class=&quot;hljs-comment&quot;&gt;// Add more search algorithms here...&lt;/span&gt;
];
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;F&lt;sub&gt;1&lt;/sub&gt;, AP, and NDCG all need to be run on a per-query basis, and then averaged across all queries to give a final score.&lt;/p&gt;&lt;p&gt;For each search algorithm this is a three-stage process where we &lt;strong&gt;1.&lt;/strong&gt; get the search results for each ground-truth query, &lt;strong&gt;2.&lt;/strong&gt; run the per-query assessments for each set of results, and &lt;strong&gt;3.&lt;/strong&gt; get the average value (a.k.a. the mathematical mean) for each metric.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Get results for each search algorithm&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; finalResults = searches.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;search&lt;/span&gt; =&gt;&lt;/span&gt; {

    &lt;span class=&quot;hljs-comment&quot;&gt;// Run search for each query in ground-truth&lt;/span&gt;
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; searchResults = &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;keys&lt;/span&gt;(groundTruth).&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;query&lt;/span&gt; =&gt;&lt;/span&gt; {
        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; results = search.&lt;span class=&quot;hljs-property&quot;&gt;fn&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;search&lt;/span&gt;(query);
        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; parsedResults = results.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;result&lt;/span&gt; =&gt;&lt;/span&gt; search.&lt;span class=&quot;hljs-title function_&quot;&gt;parser&lt;/span&gt;(result));
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; {
            query,
            &lt;span class=&quot;hljs-attr&quot;&gt;documents&lt;/span&gt;: groundTruth[query],
            &lt;span class=&quot;hljs-attr&quot;&gt;results&lt;/span&gt;: parsedResults
        };
    });

    &lt;span class=&quot;hljs-comment&quot;&gt;// Get per-query metrics&lt;/span&gt;
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; metrics = searchResults.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;item&lt;/span&gt; =&gt;&lt;/span&gt; {
        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;F1&lt;/span&gt; = &lt;span class=&quot;hljs-title function_&quot;&gt;getF1&lt;/span&gt;(item.&lt;span class=&quot;hljs-property&quot;&gt;results&lt;/span&gt;, item.&lt;span class=&quot;hljs-property&quot;&gt;documents&lt;/span&gt;);
        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;AP&lt;/span&gt; = &lt;span class=&quot;hljs-title function_&quot;&gt;getAP&lt;/span&gt;(item.&lt;span class=&quot;hljs-property&quot;&gt;results&lt;/span&gt;, item.&lt;span class=&quot;hljs-property&quot;&gt;documents&lt;/span&gt;);
        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;NDCG&lt;/span&gt; = &lt;span class=&quot;hljs-title function_&quot;&gt;getNDCG&lt;/span&gt;(item.&lt;span class=&quot;hljs-property&quot;&gt;results&lt;/span&gt;, item.&lt;span class=&quot;hljs-property&quot;&gt;documents&lt;/span&gt;);
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; { ...item, &lt;span class=&quot;hljs-variable constant_&quot;&gt;F1&lt;/span&gt;, &lt;span class=&quot;hljs-variable constant_&quot;&gt;AP&lt;/span&gt;, &lt;span class=&quot;hljs-variable constant_&quot;&gt;NDCG&lt;/span&gt; };
    });

    &lt;span class=&quot;hljs-comment&quot;&gt;// Get average results&lt;/span&gt;
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; meanF1 = metrics.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;acc, item&lt;/span&gt;) =&gt;&lt;/span&gt; acc + item[&lt;span class=&quot;hljs-string&quot;&gt;&quot;F1&quot;&lt;/span&gt;], &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) / metrics.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;;
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; meanAP = metrics.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;acc, item&lt;/span&gt;) =&gt;&lt;/span&gt; acc + item[&lt;span class=&quot;hljs-string&quot;&gt;&quot;AP&quot;&lt;/span&gt;], &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) / metrics.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;;
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; meanNDCG = metrics.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;acc, item&lt;/span&gt;) =&gt;&lt;/span&gt; acc + item[&lt;span class=&quot;hljs-string&quot;&gt;&quot;NDCG&quot;&lt;/span&gt;], &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) / metrics.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;;

    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; {
        &lt;span class=&quot;hljs-attr&quot;&gt;title&lt;/span&gt;: search.&lt;span class=&quot;hljs-property&quot;&gt;title&lt;/span&gt;,
        metrics,
        meanF1
        meanAP,
        meanNDCG,
    };
});

&lt;span class=&quot;hljs-comment&quot;&gt;// Output results&lt;/span&gt;
&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(finalResults);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The only parts missing now are the actual assessment functions: &lt;code&gt;getF1()&lt;/code&gt;, &lt;code&gt;getAP()&lt;/code&gt;, and &lt;code&gt;getNDCG()&lt;/code&gt;.&lt;/p&gt;&lt;h3 id=&quot;calculating-an-f-score-in-javascript&quot;&gt;Calculating an F-score in JavaScript&lt;/h3&gt;&lt;p&gt;The &lt;code&gt;getF1&lt;/code&gt; function takes two arguments:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;The set of results retrieved by the search algorithm for a query.&lt;/li&gt;&lt;li&gt;The ideal list of relevant results for that query from the ground truth dataset.&lt;/li&gt;&lt;/ol&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;F1&lt;/span&gt; = &lt;span class=&quot;hljs-title function_&quot;&gt;getF1&lt;/span&gt;(retrievedDocs, relevantDocs);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The function itself works by comparing the two sets of results to generate &lt;code&gt;precision&lt;/code&gt; and &lt;code&gt;recall&lt;/code&gt; values which are then fed into the F&lt;sub&gt;1&lt;/sub&gt; formula:&lt;/p&gt;&lt;div class=&quot;maths-block&quot;&gt;&lt;span class=&quot;katex&quot;&gt;&lt;span class=&quot;katex-mathml&quot;&gt;&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mtext&gt;F1 Score&lt;/mtext&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo&gt;×&lt;/mo&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mtext&gt;Precision&lt;/mtext&gt;&lt;mo&gt;×&lt;/mo&gt;&lt;mtext&gt;Recall&lt;/mtext&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mtext&gt;Precision&lt;/mtext&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mtext&gt;Recall&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;\text{F1 Score} = 2 \times \frac{\text{Precision} \times \text{Recall}}{\text{Precision} + \text{Recall}}&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&quot;katex-html&quot; aria-hidden=&quot;true&quot;&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:0.6833em;&quot;/&gt;&lt;span class=&quot;mord text&quot;&gt;&lt;span class=&quot;mord&quot;&gt;F1 Score&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;span class=&quot;mrel&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:0.7278em;vertical-align:-0.0833em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;span class=&quot;mbin&quot;&gt;×&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1.2834em;vertical-align:-0.4033em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mopen nulldelimiter&quot;/&gt;&lt;span class=&quot;mfrac&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.8801em;&quot;&gt;&lt;span style=&quot;top:-2.655em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord text mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;Precision&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mbin mtight&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mord text mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;Recall&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.23em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;frac-line&quot; style=&quot;border-bottom-width:0.04em;&quot;/&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.394em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord text mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;Precision&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mbin mtight&quot;&gt;×&lt;/span&gt;&lt;span class=&quot;mord text mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;Recall&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.4033em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mclose nulldelimiter&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; f1Score = &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; * (precision * recall) / (precision + recall);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The full &lt;code&gt;getF1&lt;/code&gt; function looks like this:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getF1&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;retrievedDocs, relevantDocs&lt;/span&gt;) =&gt; {
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; relevantSet = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Set&lt;/span&gt;(relevantDocs);

    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; relevantRetrieved = retrievedDocs.&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;doc&lt;/span&gt; =&gt;&lt;/span&gt;
        relevantSet.&lt;span class=&quot;hljs-title function_&quot;&gt;has&lt;/span&gt;(doc)
    ).&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;;

    &lt;span class=&quot;hljs-comment&quot;&gt;// Bail early to avoid division by zero&lt;/span&gt;
    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (relevantRetrieved === &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;

    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; precision = relevantRetrieved / retrievedDocs.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;;
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; recall = relevantRetrieved / relevantDocs.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;;

    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; f1Score = (&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; * (precision * recall)) / (precision + recall);

    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; f1Score;
};
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;calculating-average-precision-in-javascript&quot;&gt;Calculating Average Precision in JavaScript&lt;/h3&gt;&lt;p&gt;&lt;code&gt;getAP&lt;/code&gt; takes the same two arguments as &lt;code&gt;getF1&lt;/code&gt;: the actual results and the ideal results.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;AP&lt;/span&gt; = &lt;span class=&quot;hljs-title function_&quot;&gt;getAP&lt;/span&gt;(retrievedDocs, relevantDocs);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The calculation itself is more complicated.&lt;/p&gt;&lt;div class=&quot;maths-block&quot;&gt;&lt;span class=&quot;katex&quot;&gt;&lt;span class=&quot;katex-mathml&quot;&gt;&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mtext&gt;AP&lt;/mtext&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mfrac&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;/mfrac&gt;&lt;msubsup&gt;&lt;mo&gt;∑&lt;/mo&gt;&lt;mrow&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msubsup&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;⋅&lt;/mo&gt;&lt;mtext&gt;rel&lt;/mtext&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;\text{AP} = \frac{1}{R} \sum_{k=1}^{n} P(k) \cdot \text{rel}(k)&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&quot;katex-html&quot; aria-hidden=&quot;true&quot;&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:0.6833em;&quot;/&gt;&lt;span class=&quot;mord text&quot;&gt;&lt;span class=&quot;mord&quot;&gt;AP&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;span class=&quot;mrel&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1.1901em;vertical-align:-0.345em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mopen nulldelimiter&quot;/&gt;&lt;span class=&quot;mfrac&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.8451em;&quot;&gt;&lt;span style=&quot;top:-2.655em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mathnormal mtight&quot; style=&quot;margin-right:0.00773em;&quot;&gt;R&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.23em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;frac-line&quot; style=&quot;border-bottom-width:0.04em;&quot;/&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.394em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.345em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mclose nulldelimiter&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.1667em;&quot;/&gt;&lt;span class=&quot;mop&quot;&gt;&lt;span class=&quot;mop op-symbol small-op&quot; style=&quot;position:relative;top:0em;&quot;&gt;∑&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.8043em;&quot;&gt;&lt;span style=&quot;top:-2.4003em;margin-left:0em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mathnormal mtight&quot; style=&quot;margin-right:0.03148em;&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;mrel mtight&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mord mtight&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.2029em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mathnormal mtight&quot;&gt;n&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.2997em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.1667em;&quot;/&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.13889em;&quot;&gt;P&lt;/span&gt;&lt;span class=&quot;mopen&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.03148em;&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;mclose&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;span class=&quot;mbin&quot;&gt;⋅&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2222em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1em;vertical-align:-0.25em;&quot;/&gt;&lt;span class=&quot;mord text&quot;&gt;&lt;span class=&quot;mord&quot;&gt;rel&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mopen&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mord mathnormal&quot; style=&quot;margin-right:0.03148em;&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;mclose&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getAP&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;retrievedDocs, relevantDocs&lt;/span&gt;) =&gt; {
     &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;isRelevant&lt;/span&gt; = doc =&gt; relevantDocs.&lt;span class=&quot;hljs-title function_&quot;&gt;includes&lt;/span&gt;(doc);

    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;precisionAtK&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;retrievedDocs, k&lt;/span&gt;) =&gt; {
        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; relevantRetrieved = retrievedDocs
            .&lt;span class=&quot;hljs-title function_&quot;&gt;slice&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, k)
            .&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(isRelevant).&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;;
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; relevantRetrieved / k;
    };

    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; relevantPrecisions = retrievedDocs
        .&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;doc, k&lt;/span&gt;) =&gt;&lt;/span&gt;
            &lt;span class=&quot;hljs-title function_&quot;&gt;isRelevant&lt;/span&gt;(doc) ? &lt;span class=&quot;hljs-title function_&quot;&gt;precisionAtK&lt;/span&gt;(retrievedDocs, k + &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;) : &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;
        )
        .&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;_, k&lt;/span&gt;) =&gt;&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;isRelevant&lt;/span&gt;(retrievedDocs[k]));

    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; sumPrecision = relevantPrecisions.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(
        &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;sum, precision&lt;/span&gt;) =&gt;&lt;/span&gt; sum + precision,
        &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;
    );
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; R = relevantDocs.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;;

    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; R &gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; ? sumPrecision / R : &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;
};
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;calculating-normalized-discounted-cumulative-gain-in-javascript&quot;&gt;Calculating Normalized Discounted Cumulative Gain in JavaScript&lt;/h3&gt;&lt;p&gt;Calculating NDCG requires two functions: &lt;code&gt;getDCG&lt;/code&gt; and &lt;code&gt;getNDCG&lt;/code&gt;.&lt;/p&gt;&lt;p&gt;&lt;code&gt;getDCG&lt;/code&gt; compares the results of a search to the “relevant documents” ground truth:&lt;/p&gt;&lt;div class=&quot;maths-block&quot;&gt;&lt;span class=&quot;katex&quot;&gt;&lt;span class=&quot;katex-mathml&quot;&gt;&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mtext&gt;DCG&lt;/mtext&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msubsup&gt;&lt;mo&gt;∑&lt;/mo&gt;&lt;mrow&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;/msubsup&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;msup&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;msub&gt;&lt;mtext&gt;rel&lt;/mtext&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/msup&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mrow&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mo&gt;⁡&lt;/mo&gt;&lt;/mrow&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;\text{DCG}_p = \sum_{i=1}^{p} \frac{2^{\text{rel}_i} - 1}{\log_2(i + 1)}&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&quot;katex-html&quot; aria-hidden=&quot;true&quot;&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:0.9694em;vertical-align:-0.2861em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mord text&quot;&gt;&lt;span class=&quot;mord&quot;&gt;DCG&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.1514em;&quot;&gt;&lt;span style=&quot;top:-2.55em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mathnormal mtight&quot;&gt;p&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.2861em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;span class=&quot;mrel&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1.574em;vertical-align:-0.5311em;&quot;/&gt;&lt;span class=&quot;mop&quot;&gt;&lt;span class=&quot;mop op-symbol small-op&quot; style=&quot;position:relative;top:0em;&quot;&gt;∑&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.8043em;&quot;&gt;&lt;span style=&quot;top:-2.4003em;margin-left:0em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mathnormal mtight&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;mrel mtight&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mord mtight&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.2029em;margin-right:0.05em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.7em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mathnormal mtight&quot;&gt;p&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.2997em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.1667em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mopen nulldelimiter&quot;/&gt;&lt;span class=&quot;mfrac&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:1.0429em;&quot;&gt;&lt;span style=&quot;top:-2.655em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mop mtight&quot;&gt;&lt;span class=&quot;mop mtight&quot;&gt;&lt;span class=&quot;mtight&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;mtight&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;mtight&quot; style=&quot;margin-right:0.01389em;&quot;&gt;g&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.1944em;&quot;&gt;&lt;span style=&quot;top:-2.2341em;margin-right:0.0714em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.5em;&quot;/&gt;&lt;span class=&quot;sizing reset-size3 size1 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.2659em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mopen mtight&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mord mathnormal mtight&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;mbin mtight&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mord mtight&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;mclose mtight&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.23em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;frac-line&quot; style=&quot;border-bottom-width:0.04em;&quot;/&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.394em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.927em;&quot;&gt;&lt;span style=&quot;top:-2.931em;margin-right:0.0714em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.5em;&quot;/&gt;&lt;span class=&quot;sizing reset-size3 size1 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord text mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;rel&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;msupsub&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.3448em;&quot;&gt;&lt;span style=&quot;top:-2.3448em;margin-right:0.1em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:2.6595em;&quot;/&gt;&lt;span class=&quot;mord mathnormal mtight&quot;&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.3147em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mbin mtight&quot;&gt;−&lt;/span&gt;&lt;span class=&quot;mord mtight&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.5311em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mclose nulldelimiter&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getDCG&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;retrievedDocs, relevantDocs&lt;/span&gt;) =&gt; {
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; results.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;acc, result, i&lt;/span&gt;) =&gt;&lt;/span&gt; {
        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; relevance = relevantDocs.&lt;span class=&quot;hljs-title function_&quot;&gt;includes&lt;/span&gt;(result) ? &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; : &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; acc + relevance / &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log2&lt;/span&gt;(i + &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;);
    }, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);
};
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The &lt;code&gt;getNDCG&lt;/code&gt; function uses &lt;code&gt;getDCG&lt;/code&gt; to get the DCG values from both the retrieved documents and the &lt;em&gt;ideal&lt;/em&gt; results, and then divides them to get the normalized value.&lt;/p&gt;&lt;div class=&quot;maths-block&quot;&gt;&lt;span class=&quot;katex&quot;&gt;&lt;span class=&quot;katex-mathml&quot;&gt;&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mtext&gt;NDCG&lt;/mtext&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mfrac&gt;&lt;mtext&gt;DCG&lt;/mtext&gt;&lt;mtext&gt;IDCG&lt;/mtext&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;\text{NDCG} = \frac{\text{DCG}}{\text{IDCG}}&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&quot;katex-html&quot; aria-hidden=&quot;true&quot;&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:0.6833em;&quot;/&gt;&lt;span class=&quot;mord text&quot;&gt;&lt;span class=&quot;mord&quot;&gt;NDCG&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;span class=&quot;mrel&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mspace&quot; style=&quot;margin-right:0.2778em;&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;base&quot;&gt;&lt;span class=&quot;strut&quot; style=&quot;height:1.2173em;vertical-align:-0.345em;&quot;/&gt;&lt;span class=&quot;mord&quot;&gt;&lt;span class=&quot;mopen nulldelimiter&quot;/&gt;&lt;span class=&quot;mfrac&quot;&gt;&lt;span class=&quot;vlist-t vlist-t2&quot;&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.8723em;&quot;&gt;&lt;span style=&quot;top:-2.655em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord text mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;IDCG&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.23em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;frac-line&quot; style=&quot;border-bottom-width:0.04em;&quot;/&gt;&lt;/span&gt;&lt;span style=&quot;top:-3.394em;&quot;&gt;&lt;span class=&quot;pstrut&quot; style=&quot;height:3em;&quot;/&gt;&lt;span class=&quot;sizing reset-size6 size3 mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;&lt;span class=&quot;mord text mtight&quot;&gt;&lt;span class=&quot;mord mtight&quot;&gt;DCG&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-s&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;vlist-r&quot;&gt;&lt;span class=&quot;vlist&quot; style=&quot;height:0.345em;&quot;&gt;&lt;span/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;mclose nulldelimiter&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getNDCG&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;retrievedDocs, relevantDocs&lt;/span&gt;) =&gt; {
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; dcgValue = &lt;span class=&quot;hljs-title function_&quot;&gt;getDCG&lt;/span&gt;(retrievedDocs, relevantDocs);
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; idcgValue = &lt;span class=&quot;hljs-title function_&quot;&gt;getDCG&lt;/span&gt;(relevantDocs, relevantDocs);
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; dcgValue / idcgValue;
};
&lt;/code&gt;&lt;/pre&gt;&lt;hr/&gt;&lt;h2 id=&quot;part-3-running-the-tests&quot;&gt;Part 3: running the tests&lt;/h2&gt;&lt;p&gt;To sum up so far, I&#x27;ve worked out &lt;a href=&quot;#part-1-learning-the-basic-concepts&quot;&gt;some metrics to test for&lt;/a&gt; and built the &lt;a href=&quot;#part-2-implementing-the-assessment-in-javascript&quot;&gt;JS framework&lt;/a&gt; to allow me to test any search algorithm I want. The next step is to run the tests and see how my current search functionality performs.&lt;/p&gt;&lt;p&gt;I&#x27;ve constructed my &lt;strong&gt;&lt;a href=&quot;#ground-truth-and-subjectivity&quot;&gt;ground truth dataset&lt;/a&gt;&lt;/strong&gt; by looking at the most common search terms that lead folks to my site, plus sprinkling in a few &quot;obvious&quot; terms that I know should return a single result. (&lt;em&gt;You can view &lt;a href=&quot;https://gist.github.com/tomhazledine/9495ca5c9ebb1c9c91ce7f368f9b2a53&quot;&gt;the full JSON file in this Gist&lt;/a&gt;&lt;/em&gt;). I&#x27;ve kept my list of test queries quite short, but for future tests will aim to be more comprehensive.&lt;/p&gt;&lt;h3 id=&quot;the-results&quot;&gt;The results&lt;/h3&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;mean F&lt;sub&gt;1&lt;/sub&gt;&lt;/th&gt;&lt;th&gt;mean AP&lt;/th&gt;&lt;th&gt;mean NDCG&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;0.4284&lt;/td&gt;&lt;td&gt;0.5439&lt;/td&gt;&lt;td&gt;0.5597&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;I also logged each query&#x27;s individual F&lt;sub&gt;1&lt;/sub&gt;, AP, and NDCG values:&lt;/p&gt;&lt;div class=&quot;js__toggleVisibility&quot;&gt;&lt;button class=&quot;button js__showHideToggle showHide__toggle&quot;&gt;full results&lt;/button&gt;&lt;div class=&quot;js__showHideArea showHide__area&quot;&gt;&lt;div class=&quot;js__showHideAreaInner showHide__inner stack&quot;&gt;&lt;p&gt;&lt;strong&gt;Per-query results&lt;/strong&gt; &lt;em&gt;(rounded to 4 decimal places to keep the table legible)&lt;/em&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Query&lt;/th&gt;&lt;th&gt;F&lt;sub&gt;1&lt;/sub&gt;&lt;/th&gt;&lt;th&gt;AP&lt;/th&gt;&lt;th&gt;NDCG&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&quot;data visualisation&quot;&lt;/td&gt;&lt;td&gt;0.7143&lt;/td&gt;&lt;td&gt;0.8083&lt;/td&gt;&lt;td&gt;0.9270&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&quot;static site generator&quot;&lt;/td&gt;&lt;td&gt;0.6667&lt;/td&gt;&lt;td&gt;1.0000&lt;/td&gt;&lt;td&gt;1.0000&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&quot;web component&quot;&lt;/td&gt;&lt;td&gt;0.8000&lt;/td&gt;&lt;td&gt;0.8061&lt;/td&gt;&lt;td&gt;0.9088&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&quot;wordle&quot;&lt;/td&gt;&lt;td&gt;1.0000&lt;/td&gt;&lt;td&gt;1.0000&lt;/td&gt;&lt;td&gt;1.0000&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&quot;11ty vs hugo&quot;&lt;/td&gt;&lt;td&gt;0.0000&lt;/td&gt;&lt;td&gt;0.0000&lt;/td&gt;&lt;td&gt;0.0000&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&quot;eleventy vs jekyll&quot;&lt;/td&gt;&lt;td&gt;0.0000&lt;/td&gt;&lt;td&gt;0.0000&lt;/td&gt;&lt;td&gt;0.0000&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&quot;llm embedding&quot;&lt;/td&gt;&lt;td&gt;1.0000&lt;/td&gt;&lt;td&gt;1.0000&lt;/td&gt;&lt;td&gt;1.0000&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&quot;llm embedding visualization&quot;&lt;/td&gt;&lt;td&gt;0.0000&lt;/td&gt;&lt;td&gt;0.0000&lt;/td&gt;&lt;td&gt;0.0000&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&quot;bullet journal&quot;&lt;/td&gt;&lt;td&gt;0.8571&lt;/td&gt;&lt;td&gt;1.0000&lt;/td&gt;&lt;td&gt;1.0000&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&quot;react d3 line chart&quot;&lt;/td&gt;&lt;td&gt;0.0000&lt;/td&gt;&lt;td&gt;0.0000&lt;/td&gt;&lt;td&gt;0.0000&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&quot;picobel&quot;&lt;/td&gt;&lt;td&gt;0.8000&lt;/td&gt;&lt;td&gt;1.0000&lt;/td&gt;&lt;td&gt;1.0000&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&quot;add delay to audio online&quot;&lt;/td&gt;&lt;td&gt;0.0000&lt;/td&gt;&lt;td&gt;0.0000&lt;/td&gt;&lt;td&gt;0.0000&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&quot;how to calculate reading speed&quot;&lt;/td&gt;&lt;td&gt;0.0000&lt;/td&gt;&lt;td&gt;0.0000&lt;/td&gt;&lt;td&gt;0.0000&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&quot;decibel&quot;&lt;/td&gt;&lt;td&gt;0.1600&lt;/td&gt;&lt;td&gt;1.0000&lt;/td&gt;&lt;td&gt;1.0000&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;button class=&quot;showHide__toggle--close button js__showHideToggle&quot;&gt;Hide full results&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;h3 id=&quot;what-does-this-tell-me&quot;&gt;What does this tell me?&lt;/h3&gt;&lt;p&gt;I&#x27;ve actually found these results surprising! Due to the small scale of the content being searched over there are quite a few queries that return 1s across the board. This part is to be expected, as any specific query with only one or two matches will either be found or not found. More concerning and interesting are the queries that don&#x27;t get a full match.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Partial matches.&lt;/strong&gt; There are a few queries that show a decimal value denoting a partial-match with the ground-truth, and that seems to correlate with queries that have a lot of matched documents. The inference here is that either the order of the results is less than ideal, or that the search algorithm is returning too many results.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Total misses.&lt;/strong&gt; More concerning are the total misses; for such a small number of test queries there are a lot of them that return no results at all. This is a clear sign that the search algorithm is not working as intended. I&#x27;d definitely expect &lt;em&gt;&quot;llm embedding visualization&quot;&lt;/em&gt; to return a result, but the &quot;-ize&quot; vs &quot;-ise&quot; spelling difference is enough to throw it off. I thought my matching algorithm was smart enough to account for this, but clearly I was wrong.&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;next-steps&quot;&gt;Next steps&lt;/h3&gt;&lt;p&gt;From the point of view of &quot;actionable insights&quot;, this is great. I have very specific things to address, and a set way to test if my improvements &lt;em&gt;have&lt;/em&gt; improved things. I&#x27;ll also work on expanding the ground-truth dataset to include more queries, and to make sure that the queries are as varied as possible.&lt;/p&gt;&lt;p&gt;As for the overall mean results (the mean F&lt;sub&gt;1&lt;/sub&gt;, the MAP, and the mean NDCG), there&#x27;s not much I can glean from them at this stage other than &lt;em&gt;&quot;I need to make the numbers go up&quot;&lt;/em&gt;. They&#x27;ll be more useful when it comes to tracking changes to the algorithm, or comparing different algorithms entirely.&lt;/p&gt;&lt;p&gt;Thankfully there was some value to conducting this deep-dive, and I&#x27;m looking forward to seeing how the search functionality (and my &lt;em&gt;understanding&lt;/em&gt; of the search functionality) improves over time.&lt;/p&gt;&lt;div class=&quot;footnotes&quot;&gt;&lt;hr/&gt;&lt;ol&gt;&lt;li id=&quot;fn-1&quot;&gt;In an F&lt;sub&gt;1&lt;/sub&gt;-score the &quot;1&quot; denotes that precision and recall are equally weighted. The more generic F&lt;sub&gt;β&lt;/sub&gt;-score allows for variable weighting of precision and recall.&lt;a href=&quot;#fnref-1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id=&quot;fn-2&quot;&gt;NDCG can also be used in scenarios with graded relevance (i.e. documents A and B are both relevant, but B is &lt;strong&gt;more&lt;/strong&gt; relevant).&lt;a href=&quot;#fnref-2&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id=&quot;fn-3&quot;&gt;Thankfully my site is relatively small and I&#x27;ve got a pretty good mental map of all the articles. I imagine that building the &quot;ground truth&quot; for a bigger, more complex set of documents would be a tedious and slow process.&lt;a href=&quot;#fnref-3&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id=&quot;fn-4&quot;&gt;The &lt;code&gt;parser&lt;/code&gt; function will be different for each search algorithm. It extracts the URL from the search result object so all searches present their results in the same format. For this example we&#x27;re assuming that &lt;code&gt;myAwesomeSearch&lt;/code&gt; returns results that each have an &lt;code&gt;item&lt;/code&gt; with a &lt;code&gt;url&lt;/code&gt;.&lt;a href=&quot;#fnref-4&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;</content></entry><entry><title>What even is a week? (dates are hard)</title><link href="https://tomhazledine.com/what-is-an-iso-week/"/><updated>2024-06-10T00:00:00Z</updated><id>https://tomhazledine.com/what-is-an-iso-week/</id><content type="html">&lt;p&gt;Anyone who&#x27;s ever worked with dates in code will know that they can be, well, &lt;em&gt;unpredictable&lt;/em&gt;. Timezones are the classic bête noire of many a programmer and there are many, many horror stories of bugs caused by daylight savings time transitions.&lt;/p&gt;&lt;p&gt;My most recent instalment of &lt;em&gt;&quot;dates are hard&quot;&lt;/em&gt; comes courtesy of a simple question:&lt;/p&gt;&lt;p&gt;&lt;strong&gt;What even is a week?&lt;/strong&gt;&lt;/p&gt;&lt;hr/&gt;&lt;h2 id=&quot;why-care-about-weeks&quot;&gt;Why care about weeks?&lt;/h2&gt;&lt;p&gt;It&#x27;s easy to ignore &quot;weeks&quot; as a concept when working with dates in code. They rarely feature when we &lt;em&gt;write&lt;/em&gt; dates; &lt;code&gt;year-month-day&lt;/code&gt; is the international standard, although a lot of non-techie folks still often prefer &quot;day-month-year&quot; (and don&#x27;t even get me started on the madness that is &lt;code&gt;month-day-year&lt;/code&gt;). But when was the last time anyone asked you what &lt;em&gt;week&lt;/em&gt; it was?&lt;/p&gt;&lt;p&gt;Days of the week are important, sure, but does it really matter if the 1st of June is in the 22nd week of the year or the 23rd?&lt;/p&gt;&lt;p&gt;Business folks (you know, the suits that talk about &lt;em&gt;&quot;roadmaps&quot;&lt;/em&gt; and say things like &lt;em&gt;&quot;Q3 is right around the corner&quot;&lt;/em&gt;) obviously care about week numbers. But a situation where weeks are important to folks like me (i.e. demand-avoidant developers) is in visualising date information. Most calendars are laid out in a grid, with weeks as the rows and days as the columns. And if you&#x27;re creating a calendar UI with code, knowing which week &quot;row&quot; a given day falls in is pretty helpful.&lt;/p&gt;&lt;p&gt;The classic example of this is the &lt;a href=&quot;https://github.com/tomhazledine?tab=overview&amp;amp;from=2012-12-01&amp;amp;to=2012-12-31&quot;&gt;GitHub contribution graph&lt;/a&gt;: a grid-view of an entire calendar-year where each column represents a week.&lt;/p&gt;&lt;figure&gt;&lt;img alt=&quot;GitHub contribution graph&quot; src=&quot;/images/articles/github-contribution-pacman.png&quot;/&gt;&lt;figcaption&gt;Surely I didn&#x27;t really &lt;a href=&quot;https://github.com/tomhazledine?tab=overview&amp;amp;from=2012-12-01&amp;amp;to=2012-12-31&quot;&gt;deface my public GitHub contribution history?&lt;/a&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;So how does this translate into the world of frontend JavaScript? Is there a function we can call to get the week number of a given date?&lt;/p&gt;&lt;h2 id=&quot;native-js-date-methods&quot;&gt;Native JS date methods&lt;/h2&gt;&lt;p&gt;In theory (&lt;em&gt;note: this is foreshadowing&lt;/em&gt;) getting numerical values for &quot;day&quot;, &quot;month&quot;, &quot;year&quot;, etc. is straightforward when using the JS &lt;code&gt;Date&lt;/code&gt; object. We can create a date object with the &lt;code&gt;new Date()&lt;/code&gt; constructor, and then use the various &lt;code&gt;get&lt;/code&gt; methods to extract the relevant information.&lt;/p&gt;&lt;p&gt;To get a day number (Sunday = 0, Monday = 1, Saturday = 6) we can use the &lt;code&gt;getDay()&lt;/code&gt; method.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; date = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&#x27;2020-12-25&#x27;&lt;/span&gt;);
&lt;span class=&quot;hljs-comment&quot;&gt;// Fri Dec 25 2020 00:00:00 GMT+0000 (Greenwich Mean Time)&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; day = date.&lt;span class=&quot;hljs-title function_&quot;&gt;getDay&lt;/span&gt;();
&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(day); &lt;span class=&quot;hljs-comment&quot;&gt;// 5 (a.k.a. Friday)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;For months it&#x27;s the same: we can use the &lt;code&gt;getMonth&lt;/code&gt; method to return a numerical representation of the month. Like the days, these are zero-indexed so January = &lt;code&gt;0&lt;/code&gt;, February = &lt;code&gt;1&lt;/code&gt;, and December = &lt;code&gt;11&lt;/code&gt;.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; date = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&#x27;2020-12-25&#x27;&lt;/span&gt;);
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; month = date.&lt;span class=&quot;hljs-title function_&quot;&gt;getMonth&lt;/span&gt;();
&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(month); &lt;span class=&quot;hljs-comment&quot;&gt;// 11 (a.k.a. December)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;And the same can be done for years:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; date = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&#x27;2020-12-25&#x27;&lt;/span&gt;);
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; year = date.&lt;span class=&quot;hljs-title function_&quot;&gt;getYear&lt;/span&gt;();
&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(year); &lt;span class=&quot;hljs-comment&quot;&gt;// 120&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;Wait, what?!&lt;/strong&gt; Why is the year &lt;code&gt;120&lt;/code&gt;? Silly me, of course &lt;code&gt;getYear()&lt;/code&gt; returns the number of years since 1900. Totally logical.&lt;/p&gt;&lt;p&gt;Thankfully (if somewhat confusingly), &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/getYear&quot;&gt;&lt;code&gt;getYear&lt;/code&gt; is deprecated&lt;/a&gt;, and we should use &lt;code&gt;getFullYear&lt;/code&gt; instead:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; date = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&#x27;2020-12-25&#x27;&lt;/span&gt;);
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; year = date.&lt;span class=&quot;hljs-title function_&quot;&gt;getFullYear&lt;/span&gt;();
&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(year); &lt;span class=&quot;hljs-comment&quot;&gt;// 2020 (phew!)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;there-is-no-native-getweek&quot;&gt;There is no native &lt;code&gt;getWeek()&lt;/code&gt;&lt;/h2&gt;&lt;p&gt;So we can get the day, month, and year of a date with the native JS &lt;code&gt;Date&lt;/code&gt; object. But what about the week? Well, there is no &lt;code&gt;getWeek()&lt;/code&gt; method.&lt;/p&gt;&lt;p&gt;This is where date libraries come in. &lt;/p&gt;&lt;p&gt;For a long time, the go-to library for date manipulation in JavaScript was &lt;a href=&quot;https://momentjs.com/&quot;&gt;moment.js&lt;/a&gt;. But in &lt;a href=&quot;https://momentjs.com/docs/#/-project-status/&quot;&gt;an admirable display of humility&lt;/a&gt;, the maintainers of moment.js have deprecated the library in favour of smaller libraries like &lt;a href=&quot;https://date-fns.org/&quot;&gt;date-fns&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;There are lots of good reasons to &lt;strong&gt;not&lt;/strong&gt; use a library (they can be heavy, for starters, and often you can do everything you want with the native &lt;code&gt;Date&lt;/code&gt; object anyway) but they do make some things a lot easier. Like getting the week number of a date.&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://date-fns.org/&quot;&gt;date-fns&lt;/a&gt; is my current go-to when I need a date library. It&#x27;s small, works well with tree-shaking, and it&#x27;s date objects are immutable (a massive source of weirdness with both Moment and native date objects). And date-fns has a &lt;code&gt;getWeek&lt;/code&gt; method!&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; { getWeek } &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&#x27;date-fns&#x27;&lt;/span&gt;;

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; date = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&#x27;2020-12-25&#x27;&lt;/span&gt;);
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; week = &lt;span class=&quot;hljs-title function_&quot;&gt;getWeek&lt;/span&gt;(date); &lt;span class=&quot;hljs-comment&quot;&gt;// 52&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Great! Now we can start to build our grid; from the first day of the year to the last day of the year.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Week values for the first and last days of 2024&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; first = &lt;span class=&quot;hljs-title function_&quot;&gt;getWeek&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;2024-01-01&quot;&lt;/span&gt;));
&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(first);&lt;span class=&quot;hljs-comment&quot;&gt;// 1&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; last = &lt;span class=&quot;hljs-title function_&quot;&gt;getWeek&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;2024-12-31&quot;&lt;/span&gt;));
&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(last);&lt;span class=&quot;hljs-comment&quot;&gt;// 1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Say what now? The first day of the year is in week &lt;code&gt;1&lt;/code&gt;, and so is the last day of the year? That can&#x27;t be right. Does the same thing happen for all years?&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Week values for the first and last days of 2023&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; first = &lt;span class=&quot;hljs-title function_&quot;&gt;getWeek&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;2023-01-01&quot;&lt;/span&gt;));
&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(first);&lt;span class=&quot;hljs-comment&quot;&gt;// 1&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; last = &lt;span class=&quot;hljs-title function_&quot;&gt;getWeek&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;2023-12-31&quot;&lt;/span&gt;));
&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(last);&lt;span class=&quot;hljs-comment&quot;&gt;// 1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Week values for the first and last days of 2022&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; first = &lt;span class=&quot;hljs-title function_&quot;&gt;getWeek&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;2022-01-01&quot;&lt;/span&gt;));
&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(first);&lt;span class=&quot;hljs-comment&quot;&gt;// 1&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; last = &lt;span class=&quot;hljs-title function_&quot;&gt;getWeek&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;2022-12-31&quot;&lt;/span&gt;));
&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(last);&lt;span class=&quot;hljs-comment&quot;&gt;// 53&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;Fifty-three?!&lt;/strong&gt; Something fishy is going on. Clearly there are some (literal) edge-cases at play here. &lt;/p&gt;&lt;h3 id=&quot;why-are-the-first-and-last-days-of-2023-and-2024-in-the-same-week&quot;&gt;Why are the first and last days of 2023 and 2024 in the same week?&lt;/h3&gt;&lt;p&gt;The key thing to get our heads around here is that weeks don&#x27;t necessarily start on the first day of the year. We can say a week starts on a Monday, but not every &lt;em&gt;year&lt;/em&gt; will start on a Monday. 365 (or 366, of course) does not evenly divide by seven, so a given date will inevitably fall on a different day-of-the-week each year.&lt;/p&gt;&lt;p&gt;This means that sometimes the first &lt;strong&gt;week&lt;/strong&gt; of the year starts &lt;strong&gt;before&lt;/strong&gt; the first day of the year.&lt;/p&gt;&lt;figure&gt;&lt;img alt=&quot;A grid-view showing the first weeks of the year, with days in the current year highlighted. It shows three days at the very start of week one (sun, mon, tue) are not in the current year.&quot; src=&quot;/images/articles/week-numbers.svg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;Thus the last day of 2024 is actually in the first week of 2025, so returning &lt;code&gt;1&lt;/code&gt; when we ask for the week number makes sense. We&#x27;ll just need to account for the overflow by checking the &lt;em&gt;year&lt;/em&gt; when getting the week number, and if the year is actually &quot;next year&quot;, rather than returning &lt;code&gt;1&lt;/code&gt; we should add it on to the end of the week count (by adding &lt;code&gt;52&lt;/code&gt;).&lt;/p&gt;&lt;h3 id=&quot;why-is-the-last-day-of-2022-in-week-53&quot;&gt;Why is the last day of 2022 in week 53?&lt;/h3&gt;&lt;p&gt;This is also an artefact caused by weeks always starting on the same day (traditionally Monday or Sunday). The first week of the year is &quot;officially&quot; (we&#x27;ll dive into this &quot;officialness&quot; in more detail soon) defined as the week that contains the first Thursday of the year. This means that the first week of the year can have up to three days from the previous year in it (assuming a week-start of Monday). Even taking into account that the following year can &quot;steal&quot; a few days from the previous year, the days still occasionally fall so that a year will have 53 numbered weeks. &lt;/p&gt;&lt;p&gt;In general, &quot;week number 53&quot; is accurate and not a bug, so we just make sure our design accounts for it (e.g. by making sure our grid has 53 rows).&lt;/p&gt;&lt;h2 id=&quot;finding-an-immutable-reference-point&quot;&gt;Finding an immutable reference point&lt;/h2&gt;&lt;p&gt;So we&#x27;ve got it sorted, right? Hahaha, no. We&#x27;ve forgotten to account for timezones and localization!&lt;/p&gt;&lt;p&gt;The &lt;code&gt;Date&lt;/code&gt; object in JavaScript is based on the user&#x27;s local timezone. If you initialize a day with &lt;code&gt;new Date(&#x27;2020-12-25&#x27;)&lt;/code&gt; you&#x27;re actually creating a date object that represents midnight on the 25th of December 2020 &lt;em&gt;in whatever timezone the user is in&lt;/em&gt;. So you could theoretically get different week numbers for the same date, depending on where in the world the user is. And if you can&#x27;t rely on the &lt;em&gt;date&lt;/em&gt; to be consistent, you can&#x27;t rely on the &lt;em&gt;week&lt;/em&gt; to be consistent either.&lt;/p&gt;&lt;h3 id=&quot;local-timezone-vs-utc&quot;&gt;Local Timezone vs. UTC&lt;/h3&gt;&lt;p&gt;Suppose we have a date, December 25, 2020. Depending on the user&#x27;s local timezone, this date could correspond to different times, which might push the date into the next day or even the next week.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// User in New York (UTC-5)&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; dateNY = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&#x27;2020-12-25T00:00:00-05:00&#x27;&lt;/span&gt;);
&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(dateNY.&lt;span class=&quot;hljs-title function_&quot;&gt;toISOString&lt;/span&gt;()); &lt;span class=&quot;hljs-comment&quot;&gt;// Outputs: 2020-12-25T05:00:00.000Z&lt;/span&gt;

&lt;span class=&quot;hljs-comment&quot;&gt;// User in Tokyo (UTC+9)&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; dateTokyo = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&#x27;2020-12-25T00:00:00+09:00&#x27;&lt;/span&gt;);
&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(dateTokyo.&lt;span class=&quot;hljs-title function_&quot;&gt;toISOString&lt;/span&gt;()); &lt;span class=&quot;hljs-comment&quot;&gt;// Outputs: 2020-12-24T15:00:00.000Z&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Notice how the same local date corresponds to different UTC times. This discrepancy can lead to different week numbers if the week is calculated based on local time.&lt;/p&gt;&lt;h3 id=&quot;different-locales-different-week-starts&quot;&gt;Different Locales, Different Week Starts&lt;/h3&gt;&lt;p&gt;And to add another level of complexity, different locales have different definitions of what a &quot;week&quot; is. In the UK, weeks start on a Monday and end on a Sunday. In the US, weeks start on a Sunday and end on a Saturday (And in Iran, Afghanistan, and Somalia weeks start on a Saturday and end on a Friday).&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; { getWeek } &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&#x27;date-fns&#x27;&lt;/span&gt;;

&lt;span class=&quot;hljs-comment&quot;&gt;// Assuming weeks start on Sunday&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; weekUS = &lt;span class=&quot;hljs-title function_&quot;&gt;getWeek&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&#x27;2020-12-25&#x27;&lt;/span&gt;), { &lt;span class=&quot;hljs-attr&quot;&gt;weekStartsOn&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; });
&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(weekUS); &lt;span class=&quot;hljs-comment&quot;&gt;// Outputs: 52&lt;/span&gt;

&lt;span class=&quot;hljs-comment&quot;&gt;// Assuming weeks start on Monday&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; weekUK = &lt;span class=&quot;hljs-title function_&quot;&gt;getWeek&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&#x27;2020-12-25&#x27;&lt;/span&gt;), { &lt;span class=&quot;hljs-attr&quot;&gt;weekStartsOn&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; });
&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(weekUK); &lt;span class=&quot;hljs-comment&quot;&gt;// Outputs: 52&lt;/span&gt;

&lt;span class=&quot;hljs-comment&quot;&gt;// Assuming weeks start on Saturday&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; weekIR = &lt;span class=&quot;hljs-title function_&quot;&gt;getWeek&lt;/span&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&#x27;2020-12-25&#x27;&lt;/span&gt;), { &lt;span class=&quot;hljs-attr&quot;&gt;weekStartsOn&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt; });
&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(weekIR); &lt;span class=&quot;hljs-comment&quot;&gt;// Outputs: 53&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Here, the same date can belong to different weeks depending on the locale. This inconsistency can be problematic when you need a reliable week number for global applications.&lt;/p&gt;&lt;h3 id=&quot;standardizing-with-utc-and-iso-weeks&quot;&gt;Standardizing with UTC and ISO Weeks&lt;/h3&gt;&lt;p&gt;The first step in any date-related code should be to find an immutable reference point. For dates and times, this is &lt;strong&gt;UTC format&lt;/strong&gt;.&lt;/p&gt;&lt;p&gt;A UTC time is the same no matter where you are in the world, and it&#x27;s a sensible approach for any date-related code to get your dates into UTC format as soon as possible.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Unpredictable localized date:&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; date = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`2020-12-25`&lt;/span&gt;);

&lt;span class=&quot;hljs-comment&quot;&gt;// Predictable UTC date:&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; date = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;UTC&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2020&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;25&lt;/span&gt;));
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;There are a couple of things to note about &lt;code&gt;Date.UTC&lt;/code&gt;:&lt;/p&gt;&lt;p&gt;Firstly, months are zero-based which means &lt;code&gt;11&lt;/code&gt; is December. &lt;code&gt;Date.UTC(2020, 12, 25)&lt;/code&gt; would roll over to the next year (effectively &quot;month thirteen&quot;) and give you January 25th, 2021. It&#x27;s logical if you take into account the zero-based indexing, but it does make the declarations hard to read at a glance. In normal usage, &lt;code&gt;2020, 11, 25&lt;/code&gt; looks a lot like the 25th of November.&lt;/p&gt;&lt;p&gt;Secondly, &lt;code&gt;Date.UTC&lt;/code&gt; returns a timestamp (the number of milliseconds since the Unix epoch) rather than a &lt;code&gt;Date&lt;/code&gt; object. This means it doesn&#x27;t have any of the &lt;code&gt;get&lt;/code&gt; methods that a &lt;code&gt;Date&lt;/code&gt; object has. This is why the example above wraps &lt;code&gt;Date.UTC&lt;/code&gt; in a &lt;code&gt;new Date()&lt;/code&gt; constructor. date-fns functions, however, will happily accept a timestamp or a date object as an argument.&lt;/p&gt;&lt;h2 id=&quot;what-is-an-iso-week&quot;&gt;What is an ISO week?&lt;/h2&gt;&lt;p&gt;Getting dates nailed down in UTC format is great, but how can we do the same for weeks? The week-equivalent of this standardization is the &lt;strong&gt;ISO week&lt;/strong&gt;. If a (UTC) day falls on ISO week 03, it will always be the third week of the year, no matter where you are in the world.&lt;/p&gt;&lt;p&gt;We mentioned earlier that weeks are &quot;officially&quot; defined as starting on a Monday and ending on a Sunday. But defined by whom? &lt;/p&gt;&lt;p&gt;Our old friend &lt;a href=&quot;https://www.iso.org/home.html&quot;&gt;The International Standards Organization&lt;/a&gt; has us covered with &lt;a href=&quot;https://en.wikipedia.org/wiki/ISO_8601&quot;&gt;ISO 8601&lt;/a&gt;, the standard covering the worldwide exchange and communication of date and time-related data. ISO 8601 lays out the concept of an &lt;strong&gt;ISO week&lt;/strong&gt; which has &lt;em&gt;&quot;several mutually equivalent and compatible descriptions&quot;&lt;/em&gt; of week &lt;code&gt;01&lt;/code&gt;:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;the week with the first business day in the starting year (considering that Saturdays, Sundays and 1 January are non-working days),&lt;/li&gt;&lt;li&gt;the week with the starting year&#x27;s first Thursday in it (the formal ISO definition),&lt;/li&gt;&lt;li&gt;the week with 4 January in it,&lt;/li&gt;&lt;li&gt;the first week with the majority (four or more) of its days in the starting year, and&lt;/li&gt;&lt;li&gt;the week starting with the Monday in the period 29 December - 4 January.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;date-fns, of course, has a handy &lt;code&gt;getISOWeek&lt;/code&gt; method, and combining that with a UTC timestamp gives us a reliable, predictable, and immutable reference point for weeks. Hurrah!&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; { getISOWeek } &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&#x27;date-fns&#x27;&lt;/span&gt;;

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; date = &lt;span class=&quot;hljs-title class_&quot;&gt;Date&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;UTC&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2020&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;11&lt;/span&gt;,&lt;span class=&quot;hljs-number&quot;&gt;25&lt;/span&gt;);
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; week = &lt;span class=&quot;hljs-title function_&quot;&gt;getISOWeek&lt;/span&gt;(date); &lt;span class=&quot;hljs-comment&quot;&gt;// 52&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;one-final-spanner-in-the-works-what-day-does-the-week-start-on&quot;&gt;One final spanner in the works: what day does the week start on?&lt;/h2&gt;&lt;p&gt;We&#x27;ve already touched on the fact that weeks start on different days in different locales. The ISO week, by definition, &lt;em&gt;always&lt;/em&gt; starts on a Monday. But what if you want the bug-free predictable experience of using UTC and ISO week numbers, but want your week to start on a Sunday?&lt;/p&gt;&lt;p&gt;I ran into this exact scenario recently when recreating the GitHub contribution graph. As a reminder, the graph is a 7x52 (or 53 sometimes!) grid, with each column representing a week and each row representing a day. Because I&#x27;ve been burned by dates before, I used UTC dates and ISO weeks, but I wanted the graph to start on a Sunday, not a Monday. &lt;/p&gt;&lt;p&gt;This meant I needed to write a function that gave me all the immutable predictability of an ISO week number, but offset by a day.&lt;/p&gt;&lt;p&gt;The steps for that function were as follows:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;strong&gt;Work out the adjustment needed to get the week to start on the desired day.&lt;/strong&gt; I.e. by how many days would I need to offset the date to get the week to start on a Sunday? &lt;code&gt;0&lt;/code&gt; for Monday (as the ISO week already starts on a Monday) or &lt;code&gt;1&lt;/code&gt; for Sunday.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Apply that adjustment to the date.&lt;/strong&gt; Date-fns&#x27;s handy &lt;code&gt;addDays()&lt;/code&gt; function allows us to shift a date object by any given number of days.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Get the ISO week number of the adjusted date.&lt;/strong&gt; This is the easy part, we just use &lt;code&gt;getISOWeek()&lt;/code&gt; on the adjusted date.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Check if the ISO week is in the correct year.&lt;/strong&gt; If the ISO week is from the preceding or succeeding year, we need to ensure we use sequential week numbers. If the ISO week is from the preceding year, we return &lt;code&gt;0&lt;/code&gt;. If the ISO week is from the succeeding year, we return &lt;code&gt;ISOWeek + 52&lt;/code&gt;. If the ISO week is from the correct year, we return the ISO week number.&lt;/li&gt;&lt;/ol&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; { addDays, getISOWeek, getISOWeekYear } &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;date-fns&quot;&lt;/span&gt;;

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getAdjustedISOWeek&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;date, weekStart = &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;, year&lt;/span&gt;) =&gt; {
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; adjustments = {
        &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// isoWeek already starts on Monday&lt;/span&gt;
        &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// Add 6 days to start the week on Tuesday&lt;/span&gt;
        &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// Add 5 days to start the week on Wednesday&lt;/span&gt;
        &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// Add 4 days to start the week on Thursday&lt;/span&gt;
        &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// Add 3 days to start the week on Friday&lt;/span&gt;
        &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;// Add 2 days to start the week on Saturday&lt;/span&gt;
        &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;// Add a day to start the week on Sunday&lt;/span&gt;
    };
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; adjustment = adjustments[weekStart];
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; adjustedDay = &lt;span class=&quot;hljs-title function_&quot;&gt;addDays&lt;/span&gt;(date, adjustment);

    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ISOWeekYear&lt;/span&gt; = &lt;span class=&quot;hljs-title function_&quot;&gt;getISOWeekYear&lt;/span&gt;(adjustedDay);
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ISOWeek&lt;/span&gt; = &lt;span class=&quot;hljs-title function_&quot;&gt;getISOWeek&lt;/span&gt;(adjustedDay);

    &lt;span class=&quot;hljs-comment&quot;&gt;// If the ISO week is from the preceding or succeeding&lt;/span&gt;
    &lt;span class=&quot;hljs-comment&quot;&gt;// year, ensure we use sequential week numbers.&lt;/span&gt;
    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-title class_&quot;&gt;ISOWeekYear&lt;/span&gt; &amp;lt; year) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;;
    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;hljs-title class_&quot;&gt;ISOWeekYear&lt;/span&gt; &gt; year) &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ISOWeek&lt;/span&gt; + &lt;span class=&quot;hljs-number&quot;&gt;52&lt;/span&gt;;
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ISOWeek&lt;/span&gt;;
};
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The one downside to this approach is that when you run the function for every day in a year, some years will start at week &lt;code&gt;0&lt;/code&gt; and others on week &lt;code&gt;1&lt;/code&gt;. This is because the first day of the year might fall on a Sunday, and the first week of the year might start on the following Monday.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Assuming `days` is an array of objects that each have a `week` value created by `getAdjustedISOWeek`&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;normaliseWeekNumbers&lt;/span&gt; = days =&gt; {
    &lt;span class=&quot;hljs-comment&quot;&gt;// If the first day of the year is in week 0, increment all week numbers by 1&lt;/span&gt;
    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (days[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;week&lt;/span&gt; === &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; days.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;day&lt;/span&gt; =&gt;&lt;/span&gt; ({ ...day, &lt;span class=&quot;hljs-attr&quot;&gt;week&lt;/span&gt;: day.&lt;span class=&quot;hljs-property&quot;&gt;week&lt;/span&gt; + &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; }));
    }
    &lt;span class=&quot;hljs-comment&quot;&gt;// If the first day of the year is in week 1, do nothing&lt;/span&gt;
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; days;
};
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;working-with-dates-in-javascript-is-always-going-to-be-hard&quot;&gt;Working with dates in JavaScript is always going to be hard.&lt;/h2&gt;&lt;p&gt;There are so many edge cases and inconsistencies that it&#x27;s impossible to cover them all. Libraries like &lt;a href=&quot;https://date-fns.org/&quot;&gt;date-fns&lt;/a&gt; help a lot, and the upcoming &lt;a href=&quot;https://maggiepint.com/2017/04/09/fixing-javascript-date-getting-started/&quot;&gt;Temporal API&lt;/a&gt; will hopefully make things much easier. In the meantime, my recommendations when working with dates in JavaScript are:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;If you need to handle and store date information, &lt;strong&gt;get your dates into UTC format as early as possible.&lt;/strong&gt; &lt;/li&gt;&lt;li&gt;If you need to use week numbers, &lt;strong&gt;use ISO weeks.&lt;/strong&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;Both these strategies help you avoid the pitfalls of timezones and locale-specific. Or at least, they help you avoid the most common issues. As sure as the sun will rise tomorrow, you will always be able to find more date-related bugs.&lt;/p&gt;</content></entry><entry><title>Subsetting my font files reduced their size by more than 60%</title><link href="https://tomhazledine.com/subsetting-my-fonts-reduced-their-size-by-sixty-percent/"/><updated>2024-05-10T00:00:00Z</updated><id>https://tomhazledine.com/subsetting-my-fonts-reduced-their-size-by-sixty-percent/</id><content type="html">&lt;p&gt;Despite often describing myself as a &quot;typography nerd&quot;, there&#x27;s not all that much evidence of my font-nerdery on these pages. And given that I&#x27;m a vocal proponent of making sites small and fast, it&#x27;s doubly damning that I&#x27;ve never given much thought to the way webfonts are applied to my own site.&lt;/p&gt;&lt;nav class=&quot;toc&quot;&gt;&lt;h2 id=&quot;in-this-article&quot;&gt;In this article&lt;/h2&gt;&lt;ol&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#1-shift-happens&quot;&gt;Shift Happens &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#2-universal-principles-of-typography&quot;&gt;Universal Principles of Typography &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#this-sites-typographic-timeline&quot;&gt;This site&#x27;s typographic timeline &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#can-variable-fonts-help-me&quot;&gt;Can variable fonts help me? &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#what-is-font-subsetting&quot;&gt;What is font subsetting? &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#how-can-you-easily-subset-a-font-file&quot;&gt;How can you easily subset a font file? &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#even-more-optimisation&quot;&gt;Even more optimisation &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/nav&gt;&lt;p&gt;I&#x27;ve recently finished reading two books that have reignited my interest in typography; &lt;em&gt;Shift Happens&lt;/em&gt; by Marcin Wichary, and &lt;em&gt;Universal Principles of Typography&lt;/em&gt; by Elliot Jay Stocks.&lt;/p&gt;&lt;h3 id=&quot;1-shift-happens&quot;&gt;1. Shift Happens&lt;/h3&gt;&lt;p&gt;Marcin Wichary&#x27;s epic book about typewriters, &lt;a href=&quot;https://shifthappens.site/store&quot;&gt;&lt;em&gt;Shift Happens&lt;/em&gt;&lt;/a&gt;, came with a digital copy of &lt;strong&gt;Gorton Perfected&lt;/strong&gt; (view the &lt;a href=&quot;https://shifthappens.site/gorton-perfected-specimen.pdf&quot;&gt;specimen PDF&lt;/a&gt;), a re-jiggering of the classic Gorton typeface used on typewriter key caps and all over miscellaneous vintage hardware.&lt;/p&gt;&lt;p&gt;I used Gorton to typeset a data visualisation that I posted on &lt;a href=&quot;https://www.reddit.com/r/dataisbeautiful/comments/1cfw8kv/what_time_of_day_do_i_go_walking_spoiler_lunch/&quot;&gt;r/dataisbeautiful&lt;/a&gt;, and we all agreed the typeface looked awesome. Ever the magpie, I started to dream about what this website would look like if I switched to Gorton Perfected.&lt;/p&gt;&lt;h3 id=&quot;2-universal-principles-of-typography&quot;&gt;2. Universal Principles of Typography&lt;/h3&gt;&lt;p&gt;Reading Elliot Jay Stocks&#x27; excellent new book, &lt;a href=&quot;https://elliotjaystocks.com/book&quot;&gt;Universal Principles of Typography&lt;/a&gt;, reminded me that variable fonts were a thing that I&#x27;d been meaning to try for years but had still not gotten around to.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;Variable fonts&lt;/strong&gt; allow you to change aspects of a font dynamically. For example, you could have one single font file that has a variable axis for &lt;code&gt;weight&lt;/code&gt;. By changing the weight variable, you change the display weight of the font (i.e. how light or bold the font appears)&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;For several years I&#x27;ve been using multiple font files to handle the different font styles on this site: &quot;normal&quot;, &lt;em&gt;&quot;normal italic&quot;&lt;/em&gt;, &lt;strong&gt;&quot;heavy&quot;&lt;/strong&gt; (a.k.a. bold), and &lt;strong&gt;&lt;em&gt;heavy italic&lt;/em&gt;&lt;/strong&gt; were each being provided via a separate font file. &lt;/p&gt;&lt;h2 id=&quot;time-to-get-to-work&quot;&gt;Time to get to work&lt;/h2&gt;&lt;p&gt;Gorton Perfected has a variable axis for &quot;weight&quot;, so switching to Gorton could potentially not only breathe new life into my site&#x27;s look-and-feel, but could also bring a much-needed performance boost (by reducing the number of font files a browser would need to download to correctly render my site).&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;Now it was time to seriously look at changing things up.&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 id=&quot;this-sites-typographic-timeline&quot;&gt;This site&#x27;s typographic timeline&lt;/h2&gt;&lt;h3 id=&quot;2013---2016-futura&quot;&gt;2013 - 2016: Futura&lt;/h3&gt;&lt;p&gt;Something of an obvious choice, perhaps, but one &lt;a href=&quot;https://tomhazledine.com/futura-for-the-win/&quot;&gt;I thought long and hard about&lt;/a&gt;. I used Typekit (now known as Adobe Fonts) to provide the webfonts, essentially as a &quot;Fonts as a Service&quot; deal.&lt;/p&gt;&lt;h3 id=&quot;nov-2016---2019-brandon-grotesque-and-ff-tisa&quot;&gt;Nov 2016 - 2019: Brandon Grotesque and FF Tisa&lt;/h3&gt;&lt;p&gt;I think of this as my site&#x27;s &quot;fancy era&quot; (check it out on &lt;a href=&quot;https://web.archive.org/web/20160921030448/http://tomhazledine.com/inline-svg-icons&quot;&gt;the way-back-machine&lt;/a&gt;) and thus needed suitably fancy typefaces. Brandon Grotesque was a huge upgrade on Futura for the headings, and FF Tisa made for a beautiful accompaniment on all the body copy. In fact, I&#x27;m half temped to revisit this pairing as it worked so well. Both were provided, again, through a Typekit subscription.&lt;/p&gt;&lt;h3 id=&quot;jan-2019---current-cartograph&quot;&gt;Jan 2019 - current: Cartograph&lt;/h3&gt;&lt;p&gt;In 2019 I&#x27;d been spending way too much time on &lt;a href=&quot;https://danluu.com/&quot;&gt;https://danluu.com/&lt;/a&gt; and stripped my site&#x27;s styling &lt;em&gt;way back&lt;/em&gt;. As a CSS addict I couldn&#x27;t bring myself to remove all styles, so what I settled on was what you see today (as of May 2024). The design has barely changed at all in the intervening years. &lt;/p&gt;&lt;p&gt;This is when I ditched Typekit and bought a standalone license for &lt;a href=&quot;https://connary.com/cartograph.html&quot;&gt;Cartograph&lt;/a&gt; by Connary Fagen. I still love this font, and use it in as many places as I can. Having lost the convenience of Typekit&#x27;s FaaS hosting, this is when I switched to self-hosting the font files myself.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;@font-face&lt;/span&gt; {
    &lt;span class=&quot;hljs-attribute&quot;&gt;font-family&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Cartograph Sans&quot;&lt;/span&gt;;
    &lt;span class=&quot;hljs-attribute&quot;&gt;src&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;url&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/fonts/CartographSansCF-Medium.eot&quot;&lt;/span&gt;);
    &lt;span class=&quot;hljs-attribute&quot;&gt;src&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;url&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/fonts/CartographSansCF-Medium.eot?#iefix&quot;&lt;/span&gt;)
            &lt;span class=&quot;hljs-built_in&quot;&gt;format&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;embedded-opentype&quot;&lt;/span&gt;),
        &lt;span class=&quot;hljs-built_in&quot;&gt;url&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/fonts/CartographSansCF-Medium.woff&quot;&lt;/span&gt;) &lt;span class=&quot;hljs-built_in&quot;&gt;format&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;woff&quot;&lt;/span&gt;),
        &lt;span class=&quot;hljs-built_in&quot;&gt;url&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/fonts/CartographSansCF-Medium.ttf&quot;&lt;/span&gt;) &lt;span class=&quot;hljs-built_in&quot;&gt;format&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;truetype&quot;&lt;/span&gt;);
    &lt;span class=&quot;hljs-attribute&quot;&gt;font-weight&lt;/span&gt;: normal;
    &lt;span class=&quot;hljs-attribute&quot;&gt;font-style&lt;/span&gt;: normal;
    &lt;span class=&quot;hljs-attribute&quot;&gt;font-display&lt;/span&gt;: swap;
}

&lt;span class=&quot;hljs-comment&quot;&gt;/* Repeat for all font files */&lt;/span&gt;

&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:root&lt;/span&gt; {
    &lt;span class=&quot;hljs-attr&quot;&gt;--type-family--text&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Cartograph Sans&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;ff-tisa-web-pro&quot;&lt;/span&gt;, georgia, serif;
    &lt;span class=&quot;hljs-attr&quot;&gt;--type-family--code&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Cartograph Mono&quot;&lt;/span&gt;, Menlo, Monaco, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Andale Mono&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Lucida Console&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Courier New&quot;&lt;/span&gt;, monospace;
    &lt;span class=&quot;hljs-attr&quot;&gt;--type-weight--book&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;400&lt;/span&gt;;
    &lt;span class=&quot;hljs-attr&quot;&gt;--type-weight--bold&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;700&lt;/span&gt;;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;thats-a-lot-of-font-files&quot;&gt;That&#x27;s a lot of font files!&lt;/h2&gt;&lt;p&gt;To be able to cover all the scenarios that I regularly use I need five separate font files, and each comes at a cost.&lt;/p&gt;&lt;p&gt;Cartograph &lt;code&gt;.woff&lt;/code&gt; sizes:&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Font variant&lt;/th&gt;&lt;th&gt;Weight&lt;/th&gt;&lt;th&gt;Size&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Sans&lt;/td&gt;&lt;td&gt;Medium&lt;/td&gt;&lt;td&gt;37.8 kB&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Sans&lt;/td&gt;&lt;td&gt;MediumItalic&lt;/td&gt;&lt;td&gt;42.0 kB&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Sans&lt;/td&gt;&lt;td&gt;Heavy&lt;/td&gt;&lt;td&gt;38.9 kB&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Sans&lt;/td&gt;&lt;td&gt;HeavyItalic&lt;/td&gt;&lt;td&gt;42.8 kB&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Mono&lt;/td&gt;&lt;td&gt;Medium&lt;/td&gt;&lt;td&gt;35.4 kB&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Combined download &quot;cost&quot; for all font files: &lt;em&gt;&lt;strong&gt;196.9 kB&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;For context, my core CSS stylesheet (&lt;code&gt;app.css&lt;/code&gt;) is &lt;strong&gt;73 kB&lt;/strong&gt; and my loaded-on-every-page core JavaScript file is &lt;strong&gt;9.8 kB&lt;/strong&gt;. So while those font-file sizes may not seem to egregious in isolation, when viewed as a percentage of my total page weight they are a significant burden. For a JS-light page (such as this blog post), the fonts are more than 50% of the total payload a reader has to download.&lt;/p&gt;&lt;h2 id=&quot;can-variable-fonts-help-me&quot;&gt;Can variable fonts help me?&lt;/h2&gt;&lt;p&gt;Spoiler alert: maybe in the future, but not right now.&lt;/p&gt;&lt;p&gt;One of the inciting incidents that sent me down this rabbit hole was the idea that Gorton might make a good choice for this site. I tried it, and wasn&#x27;t in love with the results for a few reasons.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Gorton looks awesome when setting small caps (or just generously-letterspaced all-cap headlines). For long sections of body copy it&#x27;s not quite so elegant.&lt;/li&gt;&lt;li&gt;Gorton has no italic. While there&#x27;s a variable axis for weight, there&#x27;s no equivalent for skew. This one is a deal breaker. &lt;em&gt;My writing style needs italics.&lt;/em&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;So how about a different typeface, one with a variable weight &lt;em&gt;and&lt;/em&gt; italics? This is where the &quot;maybe in the future&quot; comes from.&lt;/p&gt;&lt;p&gt;I&#x27;m super picky about typefaces, and there aren&#x27;t many that I&#x27;d be happy with for something as important (to me) as my own website. And I &lt;em&gt;love&lt;/em&gt; Cartograph, so whatever replaces it had better be absolutely amazing and an upgrade on all fronts.&lt;/p&gt;&lt;h2 id=&quot;ive-come-this-far-now-i-need-to-fix-something&quot;&gt;I&#x27;ve come this far. Now I need to fix something&lt;/h2&gt;&lt;p&gt;Despite deciding the now is &lt;em&gt;not&lt;/em&gt; the time to change to a different typeface, I still had work to do. When it comes to webfont sizes I&#x27;ve been burying my head in the sand for too long, but now I&#x27;ve actually looked up the cold hard numbers I &lt;em&gt;have&lt;/em&gt; to fix it.&lt;/p&gt;&lt;p&gt;While variable fonts might be a dead-end (for now), I do still have some options. I&#x27;ve head about something called &quot;subsetting&quot; before, but never properly looked into it. So with that in mind I dug up an old Zach Leatherman post from my bookmarks: &lt;a href=&quot;https://www.zachleat.com/web/23-minutes/&quot;&gt;23 minutes of work for better font loading&lt;/a&gt;. In that post Zach walks through the steps required to subset a webfont and improve how the fonts are loaded.&lt;/p&gt;&lt;h2 id=&quot;what-is-font-subsetting&quot;&gt;What is font subsetting?&lt;/h2&gt;&lt;p&gt;Font subsetting is the process of removing all the characters from a font file that you don&#x27;t need. If you&#x27;re only using the Latin alphabet, for example, you can remove all the other characters from the font file and save a lot of space.&lt;/p&gt;&lt;p&gt;To subset a font you need two things: the original &lt;code&gt;.ttf&lt;/code&gt; font file, and a list of the characters you want to keep.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;TrueType Font (TTF) files are the standard font file format, and can be converted to other formats (like &lt;code&gt;.woff&lt;/code&gt; and &lt;code&gt;.woff2&lt;/code&gt;) for use on the web. If you&#x27;ve got the &lt;code&gt;.ttf&lt;/code&gt; you can create all the other formats you need.&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 id=&quot;how-can-you-easily-subset-a-font-file&quot;&gt;How can you easily subset a font file?&lt;/h2&gt;&lt;p&gt;Subsetting is one of those things that I&#x27;ve know about for a long time but always put off because it sounded so complicated. Editing raw font files sounds complex, and how do I even work out &lt;em&gt;which&lt;/em&gt; characters I need? Maybe I could do it for a headings-only font, but for body copy? That&#x27;s a lot of characters to work through.&lt;/p&gt;&lt;p&gt;Thankfully the aforementioned &lt;a href=&quot;https://www.zachleat.com/&quot;&gt;Zach&lt;/a&gt; has a handy little tool called &lt;code&gt;glyphhanger&lt;/code&gt; that can help with this. Give &lt;a href=&quot;https://github.com/zachleat/glyphhanger&quot;&gt;glyphhanger&lt;/a&gt; a font file and some html pages, and it will work out which characters you need to keep and then generate the new files for you. It even has a built-in spider that can follow links on your site and check all the pages for font usage.&lt;/p&gt;&lt;h3 id=&quot;installing-glyphhanger&quot;&gt;Installing &lt;code&gt;glyphhanger&lt;/code&gt;&lt;/h3&gt;&lt;p&gt;Glyphhanger can be installed as a node package (&lt;code&gt;npm install glyphhanger&lt;/code&gt;), but it also requires a few other non-node things to be installed too: &lt;code&gt;fonttools&lt;/code&gt;, &lt;code&gt;brotli&lt;/code&gt;, and &lt;code&gt;zopfli&lt;/code&gt;. The docs say to use &lt;code&gt;pip install fonttools&lt;/code&gt; which in my experience never works on modern Macs without a lot of fiddling. I guess the best option would be &lt;code&gt;pip3 install fonttools&lt;/code&gt; for modern Mac OS, but I used Homebrew for all three and had no issues (&lt;code&gt;brew install fonttools&lt;/code&gt; etc.).&lt;/p&gt;&lt;p&gt;The I ran this command:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;glyphhanger http://localhost:1337/archive/
    --US_ASCII
    --subset=src/public/fonts/raws/*.ttf
    --output=src/public/fonts/subsets
    --spider
    --jsdom
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;There&#x27;s a lot going on in that command so let&#x27;s break it down:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;http://localhost:1337/archive/&lt;/code&gt; is the URL of the site I want to subset the fonts for. I&#x27;m running a local server on port 1337 to serve the site, which glyphhanger can read without any trouble. I&#x27;ve linked to the archive page as it contains links to every article I&#x27;ve published (see the &lt;code&gt;--spider&lt;/code&gt; option later).&lt;/li&gt;&lt;li&gt;&lt;code&gt;--US_ASCII&lt;/code&gt; is the character set I want to include in the subset. My post archive &lt;em&gt;probably&lt;/em&gt; contains all the characters I need, but I do have other non-post pages, so including the basic ASCII set covers most of my bases.&lt;/li&gt;&lt;li&gt;&lt;code&gt;--subset=src/public/fonts/raws/*.ttf&lt;/code&gt; is the path to the raw font files I want to subset.&lt;/li&gt;&lt;li&gt;&lt;code&gt;--output=src/public/fonts/subsets&lt;/code&gt; is the path to save the subsetted font files.&lt;/li&gt;&lt;li&gt;&lt;code&gt;--spider&lt;/code&gt; tells glyphhanger to follow links on the site and check them for font usage. This means by using the &lt;code&gt;/archive&lt;/code&gt; URL glyphhanger can quickly check all the important pages on my site for font usage.&lt;/li&gt;&lt;li&gt;&lt;code&gt;--jsdom&lt;/code&gt; tells glyphhanger to use JSDOM to render the page and check for font usage. The default mode uses Puppeteer/headless Chrome, but given that my site is static (and therefore just plain HTML files and not JS-generated content) I can skip this and the command will run much faster.&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;the-results&quot;&gt;The results&lt;/h3&gt;&lt;p&gt;The size stats for the subset &lt;code&gt;woff&lt;/code&gt; files look much better:&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Font variant&lt;/th&gt;&lt;th&gt;Weight&lt;/th&gt;&lt;th&gt;Size&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Sans&lt;/td&gt;&lt;td&gt;Medium&lt;/td&gt;&lt;td&gt;16.7 kB&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Sans&lt;/td&gt;&lt;td&gt;MediumItalic&lt;/td&gt;&lt;td&gt;18.6 kB&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Sans&lt;/td&gt;&lt;td&gt;Heavy&lt;/td&gt;&lt;td&gt;17.0 kB&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Sans&lt;/td&gt;&lt;td&gt;HeavyItalic&lt;/td&gt;&lt;td&gt;18.8 kB&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Mono&lt;/td&gt;&lt;td&gt;Medium&lt;/td&gt;&lt;td&gt;15.8 kB&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;And what&#x27;s more, glyphhanger also generates &lt;code&gt;woff2&lt;/code&gt; files, which are even smaller:&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Font variant&lt;/th&gt;&lt;th&gt;Weight&lt;/th&gt;&lt;th&gt;Size&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Sans&lt;/td&gt;&lt;td&gt;Medium&lt;/td&gt;&lt;td&gt;13.7 kB&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Sans&lt;/td&gt;&lt;td&gt;MediumItalic&lt;/td&gt;&lt;td&gt;15.2 kB&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Sans&lt;/td&gt;&lt;td&gt;Heavy&lt;/td&gt;&lt;td&gt;14.0 kB&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Sans&lt;/td&gt;&lt;td&gt;HeavyItalic&lt;/td&gt;&lt;td&gt;15.5 kB&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Mono&lt;/td&gt;&lt;td&gt;Medium&lt;/td&gt;&lt;td&gt;12.9 kB&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;So now the combined download &quot;cost&quot; for all font files is &lt;em&gt;&lt;strong&gt;71.3 kB&lt;/strong&gt;&lt;/em&gt; (a saving of &lt;strong&gt;125.6 kB&lt;/strong&gt;).&lt;/p&gt;&lt;p&gt;My updated &lt;code&gt;@font-face&lt;/code&gt; rules now look like this:&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;Note I&#x27;ve also taken this opportunity to ditch the &lt;code&gt;.eot&lt;/code&gt; files, as they&#x27;re not needed for modern browsers.&lt;/p&gt;&lt;/blockquote&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;@font-face&lt;/span&gt; {
    &lt;span class=&quot;hljs-attribute&quot;&gt;font-family&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Cartograph Sans&quot;&lt;/span&gt;;
    &lt;span class=&quot;hljs-attribute&quot;&gt;src&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;url&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/fonts/subsets/CartographSansCF-Medium-subset.woff2&quot;&lt;/span&gt;)
            &lt;span class=&quot;hljs-built_in&quot;&gt;format&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;woff2&quot;&lt;/span&gt;),
        &lt;span class=&quot;hljs-built_in&quot;&gt;url&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/fonts/subsets/CartographSansCF-Medium-subset.zopfli.woff&quot;&lt;/span&gt;)
            &lt;span class=&quot;hljs-built_in&quot;&gt;format&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;woff&quot;&lt;/span&gt;),
        &lt;span class=&quot;hljs-built_in&quot;&gt;url&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/fonts/subsets/CartographSansCF-Medium-subset.ttf&quot;&lt;/span&gt;)
            &lt;span class=&quot;hljs-built_in&quot;&gt;format&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;truetype&quot;&lt;/span&gt;);
    &lt;span class=&quot;hljs-attribute&quot;&gt;font-weight&lt;/span&gt;: normal;
    &lt;span class=&quot;hljs-attribute&quot;&gt;font-style&lt;/span&gt;: normal;
    &lt;span class=&quot;hljs-attribute&quot;&gt;font-display&lt;/span&gt;: swap;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;even-more-optimisation&quot;&gt;Even more optimisation&lt;/h2&gt;&lt;p&gt;Because it&#x27;s been so long (years!) since I last looked at my font loading strategy, there were a couple of other things I could do to improve the situation.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Ditch IE!&lt;/strong&gt; Out of gotta-support-old-Internet-Explorer habit, I&#x27;ve been serving &lt;code&gt;.eot&lt;/code&gt; files for years. I&#x27;ve ditched IE support in my other assets a long time ago, so I can safely remove the &lt;code&gt;.eot&lt;/code&gt; from my asset pipeline and my CSS. It also has the added aesthetic benefit of cleaning up my &lt;code&gt;@font-face&lt;/code&gt; rules, too.&lt;/li&gt;&lt;/ul&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;@font-face&lt;/span&gt; {
    &lt;span class=&quot;hljs-comment&quot;&gt;/* ... */&lt;/span&gt;
    &lt;span class=&quot;hljs-comment&quot;&gt;/* These lines can go! */&lt;/span&gt;
    &lt;span class=&quot;hljs-attribute&quot;&gt;src&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;url&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/fonts/CartographSansCF-Medium.eot&quot;&lt;/span&gt;);
    &lt;span class=&quot;hljs-attribute&quot;&gt;src&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;url&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/fonts/CartographSansCF-Medium.eot?#iefix&quot;&lt;/span&gt;)&lt;span class=&quot;hljs-built_in&quot;&gt;format&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;embedded-opentype&quot;&lt;/span&gt;);
    &lt;span class=&quot;hljs-comment&quot;&gt;/* ... */&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Preloading.&lt;/strong&gt; Another tip from Zach&#x27;s posy was to set the font links in my site&#x27;s &lt;code&gt;&amp;lt;head&gt;&lt;/code&gt; to &quot;preload&quot;`. This makes the requests start earlier and reduces FOIT (&lt;em&gt;&quot;Flash of Invisible Text&quot;&lt;/em&gt;) and FOUT (&lt;em&gt;&quot;Flash of Unstyled Text&quot;&lt;/em&gt;). Previously I&#x27;d been relying on the stylesheet to instigate the font download, but by preloading in the core HTML of the site I can get them downloading as soon as possible.&lt;/li&gt;&lt;/ul&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-html&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;link&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;rel&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;preload&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;/fonts/subsets/CartographSansCF-Medium-subset.woff2&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;as&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;font&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;font/woff2&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;crossorigin&lt;/span&gt; &gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;link&lt;/span&gt;&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;&lt;p&gt;I&#x27;m really happy with the results of this work. I&#x27;ve saved a significant amount of bandwidth by subsetting my font files, and I&#x27;ve also taken the opportunity to clean up my font loading strategy. It&#x27;s a shame I can&#x27;t find a suitable variable font right now, but I&#x27;m happy with the results of this work. It was well worth the deep-dive.&lt;/p&gt;</content></entry><entry><title>Stacked Sparklines web component</title><link href="https://tomhazledine.com/stacked-sparklines-web-component/"/><updated>2024-04-23T00:00:00Z</updated><id>https://tomhazledine.com/stacked-sparklines-web-component/</id><content type="html">&lt;p&gt;Web components are finally viable! Well, I think they&#x27;ve been viable for a long time but I&#x27;m only just discovering how fun and useful they can be. I&#x27;ve just published a new one: a &lt;a href=&quot;https://github.com/tomhazledine/stacked-sparklines&quot;&gt;stacked sparklines&lt;/a&gt; component.&lt;/p&gt;&lt;nav class=&quot;toc&quot;&gt;&lt;h2 id=&quot;in-this-article&quot;&gt;In this article&lt;/h2&gt;&lt;ol&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#overview&quot;&gt;Overview &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#demo-gallery&quot;&gt;Demo Gallery &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;ol class=&quot;stack--small&quot;&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#example-1-using-all-the-options-to-generate-a-pulsar-chart&quot;&gt;Example 1: Using all the options to generate a pulsar chart &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#example-2-my-daily-steps-for-2023&quot;&gt;Example 2: My daily steps for 2023 &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/nav&gt;&lt;h2 id=&quot;overview&quot;&gt;Overview&lt;/h2&gt;&lt;p&gt;My recent SVG recreation of the &lt;a href=&quot;https://tomhazledine.com/known-pleasures-svg-line-art/&quot;&gt;&lt;em&gt;Unknown Pleasures&lt;/em&gt; album cover&lt;/a&gt; quickly expanded into a resusable JSX component. That worked well for this site, because all my components are rendered to static HTML at build-time. But what about those folks who don&#x27;t want to add the wieght of React to their projects? This was a perfect excuse to experiment with stripping out all the React from a compoment and turning it into a web component.&lt;/p&gt;&lt;p&gt;The &lt;code&gt;&amp;lt;stacked-sparklines&gt;&lt;/code&gt; component is available on npm (&lt;a href=&quot;https://www.npmjs.com/package/stacked-sparklines&quot;&gt;npmjs.com/package/stacked-sparklines&lt;/a&gt;) or you can download the source directly from the GitHub repository (&lt;a href=&quot;https://github.com/tomhazledine/stacked-sparklines&quot;&gt;github.com/tomhazledine/stacked-sparklines&lt;/a&gt;), and the total uncompressed size is &lt;strong&gt;30kb&lt;/strong&gt; (the lion&#x27;s share of which is the D3 scale and line functions).&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;yarn install stacked-sparklines
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&#x27;stacked-sparklines&#x27;&lt;/span&gt;;
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-html&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;stacked-sparklines&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;data-data&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;DATA_GOES_HERE&quot;&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;stacked-sparklines&lt;/span&gt;&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;stacked-sparklines data-test=&quot;true&quot;/&gt;&lt;/p&gt;&lt;hr/&gt;&lt;h2 id=&quot;demo-gallery&quot;&gt;Demo Gallery&lt;/h2&gt;&lt;p&gt;Click on an example to view the full-size version and see the code used to generate it.&lt;/p&gt;&lt;div class=&quot;cluster&quot;&gt;&lt;a href=&quot;#example-1-using-all-the-options-to-generate-a-pulsar-chart&quot;&gt;&lt;p&gt;Example 1&lt;/p&gt;&lt;stacked-sparklines data-data=&quot;[[-0.81,-0.91,-1.09,-1,-0.59,-0.82,-0.43,-0.68,-0.71,-0.27,-0.28,-0.05,-0.4,-0.06,-0.06,-0.14,0,-0.01,0.24,0.25,-0.04,0.33,0.24,0.15,-0.01,0.15,-0.06,0.19,0.34,0.36,-0.15,0.19,0.02,-0.18,-0.35,-0.47,-0.71,-0.82,-0.45,-0.59,-0.68,-1.16,-1.15,-0.62,-0.25,-0.31,-0.01,0.35,0.39,0.06,0.16,-0.3,-0.47,-0.44,-0.13,0.22,0.9,1.15,0.82,0.1,0.1,0.28,-0.05,0.43,0.36,0.61,0.24,-0.19,-0.95,-0.84,-1.22,-1.84,-1.01,-0.25,0.73,1.28,0.92,1.05,0.49,0.41,0.06,-0.02,0.55,0.71,1.04,1.68,1.67,2.07,2.53,2.49,2.7,3.33,3.18,3.79,3.34,3.45,2.81,2.67,2.27,1.75,1.76,1.16,1.14,1,0.64,0.32,0.32,0.37,0.17,0.29,0.77,1.14,1.58,2.05,2.33,3.02,3.48,3.84,4.41,4.91,5.44,6.34,6.59,7.2,8.12,8.26,9.25,10.02,10.48,11.06,12.45,13.32,13.67,14.18,14.47,14.6,14.96,15.04,15.16,14.76,15.4,14.88,14.75,14.2,14.36,13.34,12.35,11.72,11.04,10.82,10.25,9.63,8.98,8.92,8.46,8.44,8.96,8.96,9.26,9.49,9.34,9.47,8.98,9.07,9.01,9.39,10.2,10.7,11.48,11.73,11.71,11.73,11.81,11.83,12.09,12.14,12.51,13.05,12.8,13.52,13.15,13.43,13.76,13.58,13.77,13.61,12.36,10.93,10.19,9.18,9.2,8.57,8.74,8.56,7.84,7.34,7.09,6.04,5.78,5.02,4.87,4.43,3.73,3.41,3.28,2.67,2.47,1.96,1.67,1.19,0.89,0.97,0.64,0.3,-0.17,-0.46,-0.67,-0.44,-0.33,-0.73,-0.13,-0.29,-0.27,-0.36,0.01,0.24,0.31,-0.13,-0.07,0.01,0.31,0.32,0.02,-0.04,-0.04,-0.05,-0.21,0.17,0.11,-0.36,-0.15,-0.24,-0.25,-0.08,0,-0.05,-0.33,-0.48,-0.39,-0.46,-0.55,-0.13,-0.29,-0.09,-0.42,-0.48,-0.2,-0.47,-0.25,-0.46,-0.42,-0.61,-0.25,-0.66,-0.37,-0.34,-0.07,0.47,0.34,0.03,0.02,-0.56,-0.45,-0.26,-0.02,0.07,0.33,0.29,0.15,-0.1,0.05,-0.04,-0.05,0.31,0.14,-0.14,-0.13,0.06,-0.18,-0.36,-0.08,0.19,-0.19,-0.18,-0.2,-0.26,-0.52,-0.44,-0.58,-0.54],[-0.61,-0.4,-0.42,-0.38,-0.55,-0.51,-0.71,-0.79,-0.52,-0.4,-0.51,-0.32,-0.63,-0.46,-0.37,-0.33,-0.34,-0.65,-0.34,-0.75,-0.73,-0.75,-0.78,-0.39,-0.54,-0.33,-0.73,-0.49,-0.74,-0.62,-0.75,-0.63,-0.55,-0.6,-0.63,-0.64,-0.62,-0.31,-0.63,-0.53,-0.06,-0.48,-0.48,-0.16,-0.26,-0.07,-0.04,-0.03,-0.3,-0.42,-0.44,-0.44,-0.02,-0.06,-0.49,-0.31,0.05,-0.12,-0.03,0.11,0.29,-0.03,0.21,0.5,0.88,1.04,1.07,1.44,1.26,1.45,1.63,1.29,1.43,1.08,0.82,0.69,0.7,1.28,1.16,1.42,2.03,2.11,2.75,2.71,2.53,2.91,2.66,2.89,3.75,4.24,5.19,6.05,6.57,8.83,10.26,10.74,11.68,12.43,13.36,13.91,14.31,14.74,14.78,15.01,15.61,15.58,16.24,16.23,16.03,16.3,16.06,16.46,15.99,16.01,16.36,16.22,15.7,15.64,15.84,15.2,14.95,15.06,14.84,14.1,14.04,14.15,13.58,13.03,12.35,11.77,11.46,10.62,10.81,11.22,11.61,11.64,11.24,11.69,11.24,10.53,10.61,9.95,9.7,9.03,8.24,8.22,7.25,7.09,6.71,6.28,5.72,5.09,4.96,5.15,5.3,5.46,5.22,5.32,5.23,5.29,5.77,5.52,5.77,5.77,5.7,5.74,5.95,5.7,5.67,5.75,5.92,6.05,5.9,6.57,6.43,6.55,7.27,7.15,6.97,7.05,7,7.2,6.93,7.33,7.07,7.87,8.22,8.5,8.86,8.97,9.14,9.95,9.64,9.49,9.45,10.03,9.65,9.8,9.63,8.98,9.01,9.05,8.88,8.26,7.37,6.15,5.13,4.39,4.32,3.82,4.05,4,3.31,2.76,1.9,1.06,1.44,1.47,1.94,1.84,0.74,0.36,-0.18,0.09,0.47,0.78,1.04,0.78,0.2,0.08,-0.31,-0.92,-1.04,-0.56,-0.74,-0.38,-0.67,-0.13,-0.49,-0.44,-0.09,-0.07,0.32,0.16,0.41,0.22,0.25,0.21,0.43,0.57,0.5,0.18,0.28,0.48,0.41,0.14,0.17,-0.04,0.38,-0.12,0.33,-0.02,0.09,-0.17,0.07,-0.78,-1.44,-0.88,-0.7,0.07,0,0,0.03,-0.46,-0.49,-0.39,0.05,-0.31,-0.29,-0.06,-0.33,-0.35,-0.29,-0.24,-0.02,-0.2,-0.29,-0.38,0.04,-0.39,-0.34,-0.58,-0.26,-0.64,-1.05,-0.83,-0.8,-0.47,-0.13,-0.12],[-1.43,-1.15,-1.25,-1.13,-0.76,-0.25,0.4,0.26,0.3,0.36,0.73,0.27,0.33,0.04,0.41,-0.11,0.16,0.46,0.56,0.63,0.14,-0.09,-0.42,-0.96,-0.16,0.58,0.88,0.65,0.72,0.65,0.02,0.04,-0.53,-1,-1.35,-1.25,-1.25,-0.55,-0.73,-0.28,-0.33,-0.46,0.02,0.3,0.09,0,-0.18,-0.17,-0.16,-0.04,0.04,-0.03,0.2,-0.05,-0.28,-0.38,0.11,-0.22,-0.1,-0.27,-0.41,-0.35,-0.31,-0.04,0.19,0.14,0.14,0.22,0.4,0.6,0.32,0.18,0.43,0.43,0.52,0.25,0.19,0.67,0.93,1.48,1.53,1.83,1.94,2.29,2.22,2.28,3.06,3.23,3.66,3.98,4.42,5.09,4.99,5.47,6.14,6.33,6.52,6.96,7.26,7.12,7.01,6.93,6.94,7.23,7.19,8.77,10.49,11.72,13.16,14.88,16.91,18.23,19.1,20.04,20.6,22.76,25.66,28.43,28.46,28.61,27.12,25.79,23.69,21.82,19.8,18.24,16.4,14.43,13.95,13.86,12.95,12.74,11.9,11.79,12.31,12.39,12.64,13.72,13.69,14.19,13.83,13.94,15.33,16.02,17.06,17.6,17.45,17.27,17.6,17.43,17.82,18.61,19.29,19.67,19.26,19.03,18.08,17.58,16.68,15.46,14.41,13.23,12.05,10.93,10.37,9.85,9.38,8.79,8.29,7.51,7.45,6.86,6.36,6.15,5.26,5.2,4.35,4.09,4.09,4.56,4.75,4.5,4.45,4.6,4.76,4.92,4.85,4.79,4.77,4.99,4.87,4.62,4.96,4.88,4.94,4.95,4.05,3.86,3.11,2.77,3.55,3.89,4.2,3.68,3.09,2.55,2.55,2.22,2.26,2.43,2.68,2.28,1.53,1.6,1,0.74,-0.13,-0.33,-0.31,-0.1,-0.23,-0.15,-0.4,0.01,-0.15,-0.12,-0.18,-0.09,-0.6,-0.34,-0.27,-0.17,-0.62,-0.29,-0.38,-0.62,-0.48,-0.47,-0.45,-0.61,-0.68,-0.54,-0.54,-0.48,-0.63,-0.4,-0.58,-0.93,-0.8,-0.75,-0.5,-0.87,-0.59,-0.59,-0.5,-0.37,-0.37,-0.35,-0.81,-0.57,-0.5,-0.27,-0.51,-0.47,-0.68,-0.49,-0.33,-0.18,-0.17,-0.21,-0.18,-0.16,-0.11,-0.4,-0.49,-0.24,-0.51,-0.49,-0.1,-0.1,0.02,-0.28,-0.17,-0.03,-0.5,0,0.08,0.1,-0.29,-0.33,-0.29,0.16,0.83,0.99,1.28,0.11,-0.77,-0.88,-0.45,-1.01],[-1.09,-0.85,-0.72,-0.74,-0.26,-0.04,-0.19,0.18,0.03,0.19,0.14,-0.26,-0.19,-0.48,-0.34,-0.44,-0.86,-0.67,-0.31,-0.25,0.18,0.21,0.55,0.22,0.4,-0.12,0,0.29,-0.22,-0.36,0.14,-0.06,-0.23,-0.22,-0.23,-0.37,0.03,-0.24,-0.03,-0.27,0.1,0.04,-0.37,-0.32,-0.37,-0.09,-0.03,0.04,-0.14,-0.11,-0.29,-0.36,-0.43,-0.51,-0.26,-0.24,-0.55,-0.48,-0.52,-1,-0.75,-0.81,-0.52,-1.01,-0.78,-0.16,0.41,0.97,1.71,1.35,0.99,0.54,0.2,0.06,0,0.35,0.12,0.66,0.81,1.03,1.43,1.72,2.09,2.48,2.5,3.03,2.87,2.4,1.9,2.73,3.76,4.16,4.21,5.11,5.57,5.74,6.05,5.97,5.98,6.45,6.4,6.8,7.13,7.73,8.37,8.74,9.01,9.81,10.53,11.02,11.84,13.04,15.03,17.07,19.48,21.53,22.73,24.06,25.85,29.61,33.2,34.77,34.99,32.77,31.18,29.21,28.22,27.27,26.45,24.6,22.35,20.59,18.15,17.15,15.75,14.4,13.23,11.98,11.85,11.1,11.01,10.66,9.85,10,10.22,9.95,10.3,10.05,9.94,9.88,9.93,11.53,13.6,14.48,15.97,17.4,17.63,15.39,12.66,10.13,10.01,9.65,8.82,8.52,8.05,8.21,7.77,8.06,7.83,7.95,8.44,8.23,8.62,9.34,10.33,10.96,12.33,13.11,12.67,11.73,11.74,10.89,10.27,9.09,8.43,7.49,6.9,5.9,4.68,3.85,3.23,3.17,3.45,3.3,3.09,3.44,3.27,3.38,3.18,3.33,3.17,2.92,2.88,2.73,2.66,2.19,2.35,2.68,2.5,1.82,1.72,1.07,1,0.63,0.5,-0.15,-0.11,0.16,0.52,-0.04,-0.36,-0.37,-0.85,-0.8,-0.84,-0.79,-0.49,-0.64,-0.36,-0.11,-0.03,-0.32,-0.23,-0.35,-0.19,-0.36,-0.03,-0.16,-0.29,-0.02,-0.35,0.04,-0.37,0.07,-0.03,0.1,-0.35,0,0.46,0.8,0.96,1.11,1.02,1.04,0.46,0.56,0.55,0.42,0.36,0.32,0.49,-0.34,-0.57,-0.96,-0.82,-1.09,-1.31,-1.05,-1.3,-1.25,-0.64,-0.69,-0.17,0.11,0.18,0.23,0.23,-0.18,-0.53,-1.01,-0.77,-0.78,-0.67,-0.22,0.17,0.89,-0.1,-0.36,-0.64,0.01,0.48,0.52,-0.14,-1.13,-1.07,-1.03,-0.78,-0.4,0.18,0.27],[-1.13,-0.98,-0.93,-0.9,-1.14,-1,-0.9,-1.18,-1.3,-1.07,-1.18,-1.37,-0.85,-0.89,-0.96,-0.91,-0.97,-1.25,-0.92,-0.98,-1.37,-0.83,-1.26,-1.29,-0.85,-1.17,-0.87,-0.83,-1,-0.73,-1.08,-1.02,-0.79,-0.52,-0.78,-0.97,-1.06,-0.78,-1.06,-0.97,-0.87,-0.92,-1.05,-0.79,-0.77,-0.76,-1.02,-0.99,-0.81,-0.77,-0.43,-0.59,-0.86,-0.44,-0.61,-0.67,-0.61,-0.35,-0.79,-0.6,-0.6,-0.16,0.02,0.32,0.35,0.69,0.71,0.45,-0.06,-0.11,-0.34,-0.47,-0.06,0.21,0.54,0.98,1.12,1,1.2,1.03,0.98,0.73,0.99,0.93,1.27,1.18,1.38,1.73,2.22,2.09,3.02,3.57,3.73,3.72,4.14,4.09,4.77,5.37,5.93,6.57,7.24,7.61,8.06,9,9.53,10.24,11.03,11.54,12.54,13.28,14.24,15.12,15.54,15.56,15.06,15,13.89,12.93,12.22,10.88,10.28,9.42,8.48,8.14,7.69,7.37,6.7,6.31,6.18,5.83,5.44,5.39,4.82,4.42,4.64,4.42,3.72,3.53,3.26,3.08,3.95,4.44,4.97,5.54,5.62,6.11,5.82,6.17,5.84,5.91,6.5,6.56,6.91,7.44,7.84,8.28,8.47,9.12,9.54,9.25,9.18,9.22,8.98,8.77,8.41,8.85,8.59,8.31,7.88,7.02,6.7,5.66,5.25,5.26,4.72,4.91,4.69,4.33,4.13,3.47,3.87,3.8,4.09,4.24,4.36,4.63,4.77,4.85,5,4.74,4.92,4.94,4.62,4.17,3.84,3.18,3.03,3,2.52,2.62,2.61,2.08,2.3,2.18,2.36,2.39,2.27,1.6,1.51,0.97,0.77,0.94,0.66,1.06,0.94,1.33,1.35,0.41,-0.13,-0.67,-1.13,-0.74,-1.04,-0.86,-0.75,-0.46,-0.28,-0.36,-0.43,-0.14,-0.41,-0.07,-0.45,-0.19,-0.19,-0.05,-0.23,-0.04,0.21,0.03,0.21,-0.31,-0.8,-0.69,-0.22,-0.06,0.84,0.79,0.68,0.41,0.76,0.75,0.7,0.43,0.57,0.11,0.39,0.42,0.37,0.52,0.16,0.49,0.03,0.4,0.22,0,-0.09,-0.16,0,0.06,-0.14,0.03,0.07,0,-0.12,-0.09,0.14,-0.04,-0.42,-1.16,-1.21,-1.33,-0.64,-0.56,-0.03,-0.01,-0.12,-0.19,-0.37,-0.01,-0.27,-0.47,-0.49,-0.23,-0.75,-0.29,-0.54,-0.65,-0.64,-0.94],[-0.66,-0.89,-0.87,-0.87,-1.07,-1.14,-1.09,-1.61,-1.36,-1.55,-1.45,-2.04,-1.76,-2.03,-1.86,-1.95,-1.86,-1.2,-1.34,-1.09,-0.62,-0.56,-0.59,-0.65,-0.38,-0.7,-0.67,-0.54,-0.64,-0.7,-0.75,-0.85,-0.69,-0.81,-0.58,-0.39,-0.6,-0.4,-0.38,0.07,-0.19,0.36,-0.04,0.46,0.21,0.02,-0.03,0.01,0.18,0.24,-0.04,-0.49,0.01,0.11,0.32,0.62,0.84,1.12,1.43,2.01,1.78,2.09,2.19,2.54,2.32,2.43,2.49,2.18,2.5,2.31,2.46,2.16,2.01,2.38,2.32,2.09,1.56,1.55,1.7,1.59,1.6,1.88,2.39,2.32,2.47,2.46,2.68,3.25,3.47,3.52,4.02,4.43,4.58,5.48,5.77,6.52,7.19,7.74,8.64,9.21,9.78,10.22,10.02,10.09,10.23,10.52,10.55,10.17,10.31,10.43,10.82,10.91,10.96,10.54,10.92,10.78,10.97,10.97,10.94,11.35,10.99,11.06,11.51,13.37,14.5,15.95,17.25,18.03,18.66,19.26,19.74,19.42,19.27,19.08,18.66,18.49,18.4,17.86,17.02,15.77,15.09,14.13,13.34,12.75,12.18,11.47,11.14,10.89,10.41,9.88,9.68,10,9.51,9.5,9.48,8.93,8.95,9.67,10.23,10.7,11.34,11.42,11.58,11.4,11.32,10.96,10.6,10.5,10.52,11.32,11.5,12.28,12.39,13.16,13.21,14.29,15.22,16.49,17.52,18.04,18.94,19.94,20.38,20.59,20.54,20.53,20.99,20.52,19.61,18.33,16.64,15.58,14,12.46,11.19,9.55,7.78,5.43,4.73,5.07,5.39,5.94,6.18,5.7,5.12,4.12,3.63,3.57,3.17,2.8,2.54,2.19,2.41,1.67,1.95,1.64,1.28,0.86,0.98,0.37,0.09,-0.11,-0.36,-0.21,0.42,0.82,0.73,0.68,0.41,-0.18,-0.65,-0.61,-1.28,-0.8,-0.69,-0.65,0.09,0.06,0.15,-0.22,-0.9,-1.03,-1.34,-0.94,-0.51,-0.58,0.05,0.05,0.23,-0.03,-0.01,-0.33,0.04,-0.19,-0.23,-0.94,-1.53,-1.08,-1.24,-0.59,-0.37,0.1,0.4,0.46,0.2,0.54,0.15,0.46,0.23,-0.08,-0.18,-0.15,0.06,-0.15,-0.28,-0.05,-0.11,0.17,-0.03,-0.21,-0.21,0.16,-0.12,0.03,-0.33,0.12,-0.03,-0.07,-0.33,-0.43,-0.34,-0.58,-0.45,-0.46,-0.36,-0.55,-0.62,-0.71,-0.88,-0.7],[-0.36,-0.21,-0.44,-0.2,-0.31,-0.06,0.03,-0.22,-0.45,-0.15,-0.09,-0.36,-0.52,-0.4,-0.14,-0.5,-0.4,-0.6,-0.43,-0.16,-0.36,-0.31,-0.43,-0.69,-0.23,-0.51,-0.46,-0.15,-0.27,-0.09,-0.32,-0.48,-0.22,-0.11,0.02,0.01,-0.04,-0.21,-0.27,0.02,-0.18,-0.21,0,0.24,-0.15,0.33,-0.11,0.2,0.27,0.37,-0.12,-0.05,0.07,0.07,0.11,0.18,0.1,0.04,0.17,0.01,0.09,-0.09,-0.13,0.12,-0.04,0.31,0.34,0.64,0.66,0.34,0.61,0.69,0.57,0.76,1.04,1.06,1.48,2.11,2.2,2.94,2.73,2.91,3.18,3.55,3.79,3.91,4.73,4.97,6.16,6.45,7.26,7.81,9.07,10.7,12.6,14.69,16.83,18.7,19.53,19.09,18.53,18.23,17.36,17.07,16.27,15.99,15.31,14.16,13.03,11.99,11.14,9.97,9.16,7.98,7.39,6.44,5.2,4.34,3.58,3.07,2.41,1.42,0.81,0.02,-0.62,0.46,1.08,2.02,2.92,3.65,5.37,6.69,8.41,10.18,9.46,9.01,8.13,7.58,7.32,6.83,6.12,5.31,5.09,4.53,4.45,5.01,4.84,5.49,5.79,5.92,6.11,4.89,4.09,3.81,2.72,3.29,4.63,5.77,6.95,5.14,4.09,4.17,4.39,4.65,5.02,4.74,5.06,5.07,5.9,6.31,6.4,7.29,7.72,7.82,8.65,9.63,9.69,10.11,10.49,10.58,11.17,11.01,11.84,11.87,13.06,13.69,13.73,14.22,14.21,14.74,15,14.87,14.8,14.62,13.6,11.81,10.44,8.71,8.1,7.55,7.23,6.66,6.02,5.93,5.13,5.38,5.14,4.95,4.48,3.98,3.8,3.06,2.69,2.01,1.15,0.93,0.27,0.36,0.34,0.92,0.84,0.97,1.01,0.7,0.75,0.3,0.25,0.46,1.53,1.52,1.19,0.71,0.57,-0.23,-0.29,-0.45,-0.67,-0.95,-0.64,-0.47,-0.91,-0.77,-0.88,-0.91,-0.82,-0.85,-0.58,-0.4,-0.45,-0.67,-0.56,-0.66,-0.62,-0.62,-0.44,-0.46,-0.45,-0.89,-0.81,-0.8,-0.42,-0.55,-0.78,-0.6,-0.61,-0.57,-0.78,-0.63,-0.42,-0.42,-0.52,-0.55,-0.57,-0.33,-0.43,-0.73,-0.78,-0.79,-0.59,-0.68,-0.34,-0.27,-0.56,-0.36,-0.37,-0.35,-0.43,-0.55,-0.51,-0.45,-0.2,-0.21,-0.47,-1.17,-1.28,-1.45,-0.77,0.03,0.47,1.33],[-0.73,-0.83,-0.91,-1.1,-0.87,-0.71,-0.94,-0.8,-0.99,-0.8,-0.05,0.04,0.5,0.97,0.36,-0.28,-1.45,-1.93,-1.38,-0.48,-0.59,-0.43,-0.44,-0.29,-0.41,-0.36,-0.39,-0.55,-0.41,-0.4,-0.22,-0.08,-0.26,-0.49,-0.4,-0.13,-0.44,-0.34,-0.29,-0.19,0.01,0.06,-0.43,-0.08,-0.3,0.09,0.02,0.07,-0.13,0.02,-0.33,0.04,-0.19,0.09,0,0.03,0.1,0.01,0.21,-0.17,0.15,0.22,0.08,0.46,0.87,1.96,1.74,1.84,1.52,1.41,2.01,1.68,2.18,2.24,2.79,2.52,2.35,2.03,1.81,1.6,2.18,3.24,3.7,3.83,4.03,3.97,3.97,4,4.14,5.03,5.24,5.92,6.66,7.68,8.63,9.88,10.98,11.9,13.18,14.99,16.08,17.33,19.05,20.09,20.82,21.73,22.31,23.74,25.26,27.17,29.71,31.64,33.97,35.9,37.91,38.87,39.07,38.92,37.68,36.74,35.17,33.36,31.45,29.52,27.49,25.8,23.68,22.32,20.66,18.51,17.19,16.37,16.13,15.52,15.85,16.13,16.09,15.86,16.09,16.23,16.05,15.73,15.88,15.61,15.67,15.89,15.29,15.73,15.23,15.43,14.72,14.39,13.99,13.33,12.61,12.32,11.82,11.73,11.49,12.34,12.33,12.2,11.74,11.53,11.55,10.88,10.61,10.87,10.31,10.03,9.81,9.49,9.23,8.5,8.14,7.97,7.87,7.5,7.26,6.78,6.05,6.01,5.85,5.86,5.98,5.92,6.05,5.73,5.93,5.65,5.63,5.21,4.51,4.11,3.74,2.89,2.35,2.02,1.63,1.92,1.75,1.74,1.65,1.72,1.68,1.82,1.86,1.46,1.43,1.5,1.73,1.45,1.69,1.89,1.1,0.71,0.57,-0.12,0.06,0.43,0.58,0.89,0.86,1.02,0.91,0.66,0.76,0,0.13,-0.08,-0.45,-0.42,-0.08,-0.61,-0.37,-0.11,-0.17,-0.57,-0.65,-0.17,-0.13,-0.59,-0.5,-0.48,-0.59,-0.22,-0.31,-0.3,-0.3,-0.54,-0.28,-0.44,-0.44,-0.16,-0.16,-0.76,-0.8,-1.66,-0.99,-0.63,-0.46,0.19,0.25,-0.05,0.29,-0.06,0.04,-0.04,0.32,0.02,0.34,0.16,0.1,-0.25,-0.14,0.03,-0.14,-0.21,-0.04,0.06,-0.09,0.14,0.05,-0.02,-0.19,-0.02,0.05,-0.5,-0.07,-0.51,-0.19,-0.32,-0.56,-0.55,-0.12,-1.2,-1.4,-0.51,0.25,0.74],[-0.89,-0.61,-0.74,-0.85,-0.77,-0.93,-0.47,-0.69,-0.91,-0.58,-0.92,-0.64,-0.37,-0.77,-0.7,-0.58,-0.63,-0.91,-0.38,-0.92,-0.82,-0.41,-0.67,-0.9,-0.61,-0.9,-0.38,-0.52,-0.44,-0.58,-0.89,-0.68,-0.64,-0.72,-0.7,-0.68,-0.51,-0.39,-0.9,-0.39,-0.51,-0.79,-0.49,-0.51,-0.92,-0.41,-0.45,-0.9,-0.49,-0.74,-0.56,-0.68,-0.39,-0.26,0,-0.08,-0.27,0.08,0.38,0.25,1.26,1.74,1.16,0.92,0.37,0.65,0.66,0.34,0.35,0.39,0.24,0.58,2.18,2.11,2,2.02,1.92,1.49,1.23,1.6,1.35,1.46,1.27,1.69,1.56,1.7,1.49,1.74,1.87,1.41,1.93,2.56,3.25,4.15,4.96,6.23,6.59,7.68,8.46,9,9.42,9.93,10.32,10.75,11.09,11.85,12.34,12.69,13.01,13.35,13.79,14.16,14.47,14.95,15.85,15.69,16.3,16.56,17.2,17.5,18.05,16.51,14.51,12.89,11.78,10.18,9.43,8.37,6.73,6.89,7.58,8.65,9.66,10.8,11.2,12.46,13.1,13.56,14.37,15.1,15.64,15.77,15.93,15.79,15.96,16.32,15.76,15.97,15.91,14.52,13.74,12.54,11.96,11.53,11.09,10.67,10.44,9.79,9.36,8.64,8.5,7.29,6.42,5.22,4.68,3.35,2.71,1.26,0.5,-0.64,-1.6,-2.48,-3.6,-4.54,-5.89,-6.05,-5.18,-4.56,-3.42,-2.92,-2.47,-1.67,-0.4,0.61,1.27,1.84,1.81,1.9,1.63,1.77,1.81,1.68,1.8,2.16,1.82,2.14,2.03,2.02,2.27,1.81,1.94,1.77,2.24,1.72,2.08,2.2,1.76,1.71,1.9,1.83,2.24,1.78,1.24,0.43,0.43,0.25,0.26,0.98,0.94,0.69,0.28,-0.1,-0.15,-0.4,-0.27,-0.38,-0.02,-0.13,-0.23,-0.4,-0.19,-0.1,0.11,0.08,0.05,0.01,-0.36,-0.29,-0.25,0.11,0.21,0.16,0.08,0.04,0.17,-0.18,-0.01,-0.09,-0.09,0.29,-0.08,0.42,0.13,-0.34,-0.37,-0.49,-0.82,-0.47,-0.43,-0.83,-0.54,-0.28,0.33,0.05,-0.14,0.03,-0.19,-0.4,0.09,0.33,0.71,0.68,1.33,0.71,1.06,0.86,0.88,0.36,0.46,0.33,0.39,0.14,0.22,-0.26,-0.43,0.01,-0.41,-0.53,-0.72,-0.54,-0.92,-0.41,-0.94,-1,-0.75,-0.94,-1.05,-0.51,-0.47,-0.79],[-0.69,-0.54,-0.84,-0.89,-0.45,-0.32,-0.82,-0.21,-0.25,-0.19,0.01,0.18,-0.18,0.32,0.01,0.13,0.06,0.39,0.18,0.28,0.19,0.31,0.12,0.01,0.14,-0.06,0.42,0.33,0.28,0.25,0.05,-0.19,-0.86,-0.91,-0.54,-0.17,0.57,1.06,1.19,0.96,0.49,0.06,0.13,-0.58,-0.53,-0.46,-0.11,-0.27,-0.48,-0.18,-0.25,-0.56,-0.02,0.14,-0.07,0.6,0.42,0.68,1.18,0.99,1.25,1.24,1.27,1.45,0.89,1.36,1.42,1.79,1.81,1.26,0.17,0.76,1.14,2.03,2.14,2.46,2.92,2.69,3.1,2.71,2.74,3.1,3.03,3.09,2.65,2.99,2.98,2.99,3.64,4.35,5.28,5.88,7.18,7.75,9.17,10.17,10.9,12.09,12.93,13.61,14.33,15.44,15.42,15.37,15.13,15.16,14.64,14.43,14.59,14.75,14.41,14.56,15.22,16.81,18,19.51,20.54,22.54,24.2,26.16,27.44,28.41,28.91,28.72,29.09,28.48,28.43,27.9,27.91,27.31,27.29,26.71,26.18,26.36,24.99,23.93,22.68,21.46,20.6,20.2,19.02,18.27,17.86,17.12,17.38,17.44,17.42,17.21,17.33,17.4,17.2,17.37,17.33,17.28,17.78,18.49,18.72,19.61,21.28,21.35,20.66,20.57,21.37,22.1,22.27,21.95,21.46,20.97,19.93,19.23,18.58,18.49,18.36,17.58,17.57,17.16,16.64,16.69,16.78,16.74,16.58,16.2,16.04,15.87,14.79,13.87,12.74,12.03,11.42,10.38,9.49,8.75,8.48,7.43,7.38,7.19,7.55,7.52,7.55,6.72,6.66,5.77,5.36,4.64,3.63,2.41,1.83,1.86,1.71,1.89,2.34,2.41,2.41,2.31,1.7,1.04,1.45,1.48,1.75,1.38,1.05,0,-0.28,-0.24,-0.49,-0.04,-0.32,-0.22,-0.13,-0.28,-0.62,-0.36,-0.53,-0.46,-0.47,-0.18,-0.57,-0.17,-0.29,-0.67,-0.32,-0.25,-0.6,-0.64,-0.14,-0.55,-0.43,-0.17,-0.59,-0.37,-0.54,-0.51,-0.31,-0.51,-0.24,-0.37,-0.67,-0.53,-0.69,-0.34,-0.66,-0.34,-0.73,-0.67,-0.75,-0.37,-0.27,-0.7,-0.35,-0.36,-0.8,-0.6,-0.74,-0.28,-0.57,-0.82,-0.55,-0.86,-0.66,-0.58,-0.88,-0.1,1.1,1.07,0.08,-0.74,0.07,0.82,0.21,0.57,0.56,0.41,-0.04,-0.04,0.09,-0.16,0.24,-0.17,-0.09,0.01],[-0.65,-1.05,-0.7,-0.86,-0.48,-0.56,-0.46,-0.21,-0.35,-0.43,-1.08,-1.18,-1.51,-1.37,-1.05,-0.4,0.31,0.71,0.98,0.67,0.65,0.46,0.49,0.79,0.3,0.7,0.76,0.41,0.26,0.29,0.61,0.55,0.33,0.04,0.04,0.16,0.21,0.21,0.15,0.27,0.29,-0.06,-0.12,-0.22,-0.43,-0.3,-0.3,0,1.04,1.16,0.79,0.99,0.34,0.41,0.64,0.65,1.13,0.9,0.78,1.13,1.14,1.15,1.17,1.61,1.49,1.44,1.74,1.53,1.76,1.49,1.67,1.72,1.91,1.55,1.91,1.89,1.92,2.26,2.32,2.8,3.1,3.35,3.24,3.88,4.6,5.66,6.97,8.52,10.63,12.12,14.31,14.9,15.28,15.96,18.37,20.55,23.05,25.72,29.37,30.2,31.73,32.66,32.47,31.79,30.77,29.94,29.06,28.37,27.89,27.96,28.08,32.1,34.22,36.08,39.2,37.37,35.7,33.69,31.29,29.61,25.32,20.4,20.13,19.76,18.75,18.23,17.81,17.8,17.76,17.94,17.62,18.11,17.98,18.27,18.64,19.12,20.19,20.77,20.85,20.82,21.17,20.5,19.98,19.51,19.08,18.66,18.07,17.66,13.69,12.39,12.23,11.9,12.03,11.68,12.23,11.73,12.44,12.25,12.94,12.81,12.59,11.82,11.25,10.9,10.11,9.51,9.22,8.72,8.35,8.36,8.08,8.27,8.55,9.24,9.41,10.26,10.94,11.01,11.7,12.13,12.64,13.29,13.96,14.71,15.89,17.11,17.95,19.73,20.01,19.5,18.96,18.78,18,17.08,15.49,14.76,14.33,14.15,13.1,11.82,10.92,9.7,9.45,8.92,7.95,7.29,6.94,6.12,5.61,5.22,4.28,3.77,3.12,3.12,2.48,2.05,2.21,2.07,2.12,1.64,1.08,0.31,-0.3,-0.8,-0.59,-0.37,-0.66,-0.92,-0.47,-0.89,-0.61,-0.39,-0.52,-0.51,-0.59,-0.77,-0.63,-0.49,-0.42,-0.58,-0.69,-0.53,-0.26,-0.28,0.13,-0.1,-0.5,-0.74,-1.06,-0.57,-0.58,-0.3,-0.06,-0.38,0.05,0.06,-0.13,0.05,-0.01,-0.12,0.32,-0.01,0.29,-0.38,-0.31,-0.1,0.55,0.75,0.73,0.45,0.11,-0.01,-0.32,-0.19,-0.12,-0.22,0.12,0.12,-0.11,-0.1,-0.42,-0.19,-0.27,-0.56,-0.08,-0.53,-0.16,-0.25,-0.86,-1.37,-1.51,-1.56,-0.55,-0.21,-0.49,-0.23,-0.34,-0.54,-0.64,-0.84],[0.31,0.03,0.34,0.13,0.28,0.39,0.43,0.35,-0.01,0,0.12,0.45,-0.1,0.2,0.34,0.11,-0.09,0.37,-0.07,-0.08,0.43,0.3,0.34,0.4,0.15,0,0.38,0.15,0.21,0.21,0.26,-0.02,0.31,0.44,0.16,-0.09,0.45,0.14,0.35,-0.07,-0.02,-0.05,0.21,0.2,0.5,1.24,1.52,1.75,1.73,2.08,2.15,1.78,1.48,1.18,0.55,0.18,0.55,0.67,1.52,1.69,1.71,1.3,0.62,1.07,1.12,1.89,1.7,2,1.62,1.6,1.65,1.63,2.01,1.99,2.06,2.23,2.64,2.52,2.9,4.12,4.84,5.22,6.24,6.02,6,6.34,6.15,6.31,7.26,8.6,10.14,11.13,11.94,13.26,14.55,15.93,17.5,19.35,20.87,22.06,23.35,24.12,24.22,24.14,24.04,24.29,23.95,24.52,24.58,24.71,24.29,24.9,25.43,25.86,26.85,27.7,28.74,29.41,30.42,30.66,30.58,30.45,30.34,30.4,30.12,29.11,28.23,26.96,25.48,24.32,23.41,22.49,20.53,19.7,18.49,17.27,16.43,16.64,16.42,16.84,16.49,16.59,16.85,17.09,17.12,17.52,17.62,17.79,18.33,18.27,18.62,18.21,18.24,17.98,17.88,17.05,15.7,14.47,13.44,12.65,11.73,11.15,10.63,9.85,9.24,8.94,9.1,9.21,9.56,9.68,10.04,10.8,10.96,11.27,11.29,11.94,11.92,12.49,12.61,12.44,12.45,12.38,12.73,12.5,12.68,12.66,12.82,12.4,12.62,12.4,11.78,11.33,10.85,11.03,10.88,10.74,11.13,11.25,11.09,11.08,10.35,9.54,9.1,8.55,8.4,8.22,7.64,7.65,7.8,7.6,7.27,7.31,6.51,5.96,5.63,5.17,4.79,4.24,3.29,2.77,2.56,2.26,1.31,0.46,-0.5,-0.6,-0.18,-0.3,-0.27,-0.4,-0.23,-0.43,-0.16,-0.24,-0.42,-0.46,-0.42,-0.57,-0.32,-0.26,-0.37,-0.26,-0.18,-0.41,-0.23,-0.58,-0.61,-0.53,-0.42,-0.56,-0.5,-0.04,-0.56,-0.38,-0.02,-0.25,-0.46,-0.18,-0.38,-0.48,-0.24,-0.36,-0.54,-0.34,-0.24,-0.19,-0.36,-0.3,-0.32,-0.24,-0.1,-0.25,-0.15,-0.24,-0.04,-0.37,-0.13,-0.29,-0.09,-0.03,-0.18,-0.07,-0.34,0.07,-0.07,-0.43,-0.36,-0.09,-0.4,-0.18,0.06,-0.12,-0.27,-0.27,0.03,0.1,-0.45,-0.04,-0.67,-0.73],[-0.74,-0.65,-0.47,-0.22,-0.27,-0.28,0,-0.06,0.09,0.25,0.19,-0.16,0.11,-0.02,-0.2,-0.24,-0.09,-0.14,-0.08,-0.19,-0.59,-0.46,-0.58,-0.17,-0.38,-0.39,-0.72,-0.72,-0.82,-0.73,-0.66,-0.56,-0.54,-0.61,-1.04,-0.88,-0.75,-0.97,-0.89,-0.4,-0.61,-0.52,-0.43,-0.36,-0.12,-0.05,-0.31,-0.2,-0.14,-0.41,-0.08,0.06,-0.18,-0.1,-0.14,-0.27,-0.51,-0.4,-0.43,-0.39,-0.05,0.18,0.53,1.17,1.54,1.83,1.34,0.99,0.39,0.06,1.17,1.23,0.96,0.54,0.27,0.75,0.77,1.23,1.13,1.66,1.63,2.02,2.3,2.63,2.91,3.16,2.99,3.66,3.51,3.98,3.91,4.21,3.99,4.09,4.32,4.05,4.92,4.76,5.41,5.96,6.44,6.54,7.48,7.61,8.18,9.3,10.41,12.03,13.59,16.16,18.18,20.25,20.42,20.24,20.33,20.03,20.81,21.36,22.3,23.96,25.15,26.69,26.9,27.14,27.33,27.51,27.8,27.1,26.74,26.05,25.34,24.57,24.22,23.46,22.55,21.63,20.85,19.38,18.11,17.38,17.46,17.42,17.15,16.75,16.01,15.71,15.31,14.58,14.36,13.87,13.58,13.89,14.39,15.19,15.51,16.24,16.59,16.84,17.53,19.68,20.97,22.52,24.24,25.62,27.57,31.42,31.95,31.73,30.8,30.19,29.5,29.4,29.54,28.66,27.02,25.93,24.41,22.78,21.18,19.96,18.3,16.57,15.27,14.03,12.96,12.35,10.88,10.19,9.59,9.04,8.18,8.05,7.41,6.62,5.63,4.94,4.13,3.33,2.79,2.64,2.42,2.33,2.63,2.26,2.51,2.42,2.1,2.29,1.67,1.84,1.91,1.85,2.03,2.08,2.05,1.71,2.11,1.73,2.16,1.95,2.33,2.1,1.46,1.34,0.93,1.08,0.61,0.1,-0.52,-0.44,-0.11,-0.14,0.44,0.12,0.11,-0.36,-0.71,-0.78,-0.5,-0.12,0.11,-0.04,0.11,0.78,0.51,0.04,-0.82,-1.29,-0.75,0.43,0.34,0.44,-0.03,-0.36,-0.35,-0.62,-0.59,-0.37,-0.26,-0.53,-0.3,0.09,-0.27,0.03,0,0.07,0.3,-0.07,0.32,0.04,0.09,0.12,0.29,0.14,0.05,-0.08,0.19,-0.04,0.34,-0.23,-0.3,-0.95,-1.42,-0.91,-0.5,0.01,-0.18,-0.21,-0.13,-0.25,-0.23,-0.18,-0.05,-0.18,-0.26,-0.23,-0.31,-0.22,-0.14,0.04],[-0.35,-0.51,-0.37,-0.08,0,0.34,0.43,-0.27,-0.55,-1.06,-0.73,-0.21,-0.08,-0.09,0.35,0.08,0.02,-0.19,-0.17,-0.52,-0.13,-0.19,-0.51,-0.41,-0.49,-0.58,-0.61,-0.62,-0.95,-0.83,-1.08,-0.97,-0.34,-0.36,-0.25,0.24,0.04,0.46,0.08,0.27,0.09,0.22,0.08,-0.09,0,0.11,0.34,0.22,0.05,-0.04,-0.09,0.38,0.2,0.09,-0.14,0.22,-0.27,-0.35,0.14,0.23,0.37,0.6,0.99,1.37,2.07,2.32,2.28,2.04,1.82,1.71,1.32,1.39,1.37,1.38,1.93,2.01,2.36,1.94,2.04,2.13,1.88,1.79,2.58,3.01,3.5,3.73,4.29,4.41,5.12,5.03,5.46,5.74,5.65,6.25,6.41,6.41,6.79,7.31,7.56,7.71,8.06,8.18,8.06,8.48,8.78,8.48,8.78,9.19,9.17,8.94,9.27,9.16,9.07,9.14,8.7,8.75,9.14,10.9,12.45,14.13,15.54,17.03,17.54,18.22,18.59,18.92,20,20.31,20.85,22.33,23.52,23.77,23.36,22.36,21.87,20.97,20.48,19.32,18.99,17.7,16.9,16.2,16.1,16.49,16.32,16.13,15.99,15.99,16.07,15.8,15.75,15.87,16.29,15.75,15.87,15.74,15.79,16.29,16.02,16.08,15.75,15.43,15.27,15.21,14.92,14.69,13.72,13.59,13.07,12.37,13.76,15.34,16.47,16.45,17.21,17.26,17.74,18.15,18.85,19.25,19.7,20.31,21.06,20.62,20.48,19.79,19.14,18.12,16.55,15.42,14.38,13.72,12.5,11.27,10.08,9.17,8.38,7.79,7.42,6.44,5.92,5.66,5.04,5.13,4.68,4.78,3.78,2.48,1.38,0.8,1.08,1.41,1.83,2.04,2.19,2.29,2.5,2.13,2.17,2.17,2.18,2.09,1.84,1.63,1.18,0.47,0.16,0.06,-0.57,-0.05,0.74,1.04,0.56,0.84,0.44,0.4,0.43,0.12,0.3,0.26,-0.25,-0.26,0.17,0.06,-0.05,0.14,-0.32,0.07,-0.24,-0.53,-0.35,-0.26,-0.09,-0.14,-0.21,-0.43,-0.26,-0.58,-0.52,-0.28,-0.57,-0.77,-0.39,-0.61,-0.75,-0.84,-0.71,-1.63,-2.32,-1.64,-1.15,-0.53,0.05,-0.38,-0.38,-0.28,-0.4,0,-0.07,-0.18,-0.05,-0.23,0.04,-0.18,-0.37,-0.52,-0.32,-0.26,-0.55,-0.28,-0.15,-0.59,-0.07,-0.22,-0.21,-0.48,-0.44,-0.49,-1.33,-2.23],[-0.67,-0.88,-0.89,-0.69,-0.82,-0.52,-0.96,-0.86,-0.7,-0.39,-0.7,-0.33,-0.52,-0.6,-0.41,-0.64,-0.25,-0.32,-0.56,-0.3,-0.6,-0.35,-0.14,-0.55,-0.42,-0.62,-0.14,-0.31,-0.29,0.02,0.27,0.38,-0.1,-0.18,-0.51,-0.77,-0.34,-0.68,-0.52,-0.47,-0.62,-0.13,-0.41,-0.21,-0.36,-0.25,-0.1,0.01,0.05,0.14,0.66,0.66,0.29,0.21,0.1,0,0.32,0.59,0.57,0.54,0.55,0.62,0.72,0.89,1.33,1.88,2.13,1.69,2.1,1.75,2.04,2.17,3.1,3.26,3.38,3.33,3.24,3.62,3.31,3.59,4.1,5.1,5.6,6.66,7.66,8.77,9.52,10.86,12.14,14,15.96,17.55,19.83,21.38,23.03,22.88,23.27,23.83,23.94,23.69,23.68,23.61,23.38,22.84,22.8,22.18,22.19,22.25,21.85,21.5,21.73,21.59,21.64,21.18,20.92,21.22,20.36,19.11,17.69,16.83,17.01,17.1,17.25,17.2,17.31,17.94,18.19,18.27,18.64,18.34,19.28,19.77,20.46,21.22,21.7,21.41,21.64,21.1,20.72,19.9,19.44,18.41,18.05,17.31,16.62,15.53,15.5,15.64,14.98,14.39,14.17,13.43,12.77,12.51,11.95,11.52,11.11,10.59,9.9,9.24,8.85,8.78,8.75,8.53,8.93,8.5,8.37,8.72,8.79,8.64,8.88,9.82,10.93,11.87,12.63,12.98,13.53,14.36,15,16.2,17.57,18.22,19.51,21.1,22.83,24.85,25.19,26.07,25.01,24.02,23.09,22.15,21.33,20.19,18.87,17.94,17.68,17.35,16.37,15.44,13.9,12.95,11.63,10.17,9.54,8.47,7.85,7.5,6.66,6.08,5.27,5.06,4.77,4.19,3.47,3.39,2.57,2.23,2.16,2.36,2.25,1.65,1.72,1.41,1.54,0.7,0.39,0.11,0.39,0.81,0.46,-0.36,-0.32,-0.35,-0.54,-0.15,-0.28,-0.05,-0.04,-0.3,-0.31,-0.48,-0.35,-0.41,0.06,-0.33,0.06,0.05,-0.36,-0.29,0.08,0.12,-0.11,-0.04,-0.19,0.3,0.12,-0.05,0.25,0.18,0.17,-0.12,-0.41,-0.47,-0.96,-1.26,-0.91,-0.9,-0.5,0.04,-0.01,0.05,0.18,0.26,0.03,0,0.31,0.05,0.4,0.39,0.02,0.46,0.18,0.55,0.18,0.14,0.64,0.38,-0.44,-0.75,-1.37,-1.37,-1.32,-0.88,-0.72,-0.51,-0.21,-0.08,0.32,0.41],[-0.84,-0.64,-0.71,-0.38,-0.63,-0.73,-0.53,-0.47,-0.5,-0.49,-0.8,-1.26,-1.3,-1.22,-0.96,-0.91,-0.73,-0.44,-0.01,0.17,0.22,0.17,0.27,0.35,0.36,0.41,0.6,0.63,0.28,0.54,0.41,0.27,0.18,0.22,0.59,0.44,0.46,0.48,0.23,-0.2,0.07,-0.11,-0.09,-0.62,-0.71,-0.85,-0.67,-0.3,0.16,0.16,0.24,0.5,0.64,0.23,0.4,0.71,1.08,1.22,1.19,1.05,0.57,0.65,0.1,-0.11,0.36,1.13,1.36,1.91,1.76,2.32,2.34,2.03,1.17,1.24,1.42,2.52,2.66,3.6,3.81,4.41,4.88,5.46,6.28,6.54,6.86,8.31,9,10.12,11.55,12.48,13.75,13.91,14.15,13.89,14.22,14.24,13.97,15.03,16.45,17.34,18.6,19.65,20.35,20.77,21.22,22.03,22.79,23.96,25.27,26.53,29.34,31.7,33.9,36.42,37.69,35.26,32.93,30.27,28.74,27.05,26.39,25.91,25.05,24.42,23.91,23,22.37,22.07,21.36,21.1,20.8,20.75,20.45,20.09,19.53,19.56,19.33,19.16,18.38,18.42,17.8,17.57,17.66,17.12,16.76,16.71,15.98,15.69,15.36,15,15.01,14.7,14.3,14.4,13.99,13.77,13.45,13.24,13.18,13.07,12.75,12.62,12.71,12.27,12.47,12.45,12.1,12.01,12.14,11.95,12.28,11.97,11.78,10.6,9.65,9.05,9.06,9.37,9.2,9.49,9.69,10.34,10.51,10.58,10.54,10.95,10.25,9.91,9.64,9.15,8.49,9.09,9.34,9.6,9.68,10.16,9.35,8.62,7.91,7.77,7.61,7.46,7.42,7.51,7.56,7.64,7.77,7.25,6.81,6.83,6.78,6.24,5.53,4.56,3.95,3.08,2.64,2.06,1.53,0.72,0.41,-0.15,-0.55,-0.69,-0.26,0,-0.2,0.25,0.25,0.34,0.37,0.41,0.42,0.38,-0.08,0.32,0.24,0.07,-0.02,0,-0.02,0.16,0.09,-0.18,0.22,0.18,0.19,0.15,0.01,-0.27,-0.35,-0.12,0.1,-0.08,0.01,0.04,-0.34,-0.34,-0.39,-0.44,-0.19,-0.12,-0.18,-0.2,-0.22,0.01,-0.37,-0.32,-0.28,-0.5,-0.01,-0.5,-0.23,-0.29,-0.47,-0.23,-0.37,-0.51,-0.81,-0.64,-0.91,-0.93,-0.73,-0.67,-0.87,-0.7,-0.49,-0.52,-0.6,-1,-1.27,-1.01,-0.24,-0.13,-0.26,-0.05,-0.02,-0.15,0.19,0.19],[-0.45,-0.31,-0.09,-0.08,-0.27,-0.61,-0.53,-0.89,0,0,0.4,0.39,0.27,0.01,0.2,-0.17,0.03,-0.1,-0.23,0.23,0.13,0.03,0.06,-0.25,0.3,0.17,0.11,-0.07,-0.2,0.29,-0.13,0.26,-0.03,0.18,-0.23,0.21,-0.02,0.02,-0.15,-0.06,0.08,0.07,0.1,0.19,0.22,-0.12,0.27,0.06,0.07,-0.22,-0.36,-0.42,-0.76,-0.06,0.87,0.48,0.43,-0.06,-0.22,-0.89,-0.89,-0.66,-0.14,-0.11,-0.17,0.7,1.71,1.9,1.68,1.08,0.94,0.67,0.71,1.04,1.16,1.09,1.35,1.72,1.96,2.08,2.3,2.56,3.35,3.51,3.9,4.53,5.43,5.21,4.76,4.78,4.07,3.91,3.28,2.98,2.93,3.13,3.32,3.54,3.83,4.3,4.24,4.81,4.9,4.68,4.81,5.23,5.49,5.51,6,7.11,8.06,8.69,9.44,10.29,11.57,13.77,15.15,17.27,19.77,25.83,27.44,27.8,27.67,27.91,27.87,28.02,28.06,27.69,27.21,26.13,24.96,23.65,22.67,21.15,19.56,18.9,18.96,18.82,18.22,18.47,17.86,17.54,17.6,17.35,17.46,17.5,17.12,17.34,17.3,17.11,17.63,17.93,18.48,19.05,19.97,20.83,21.41,22.49,23.53,23.84,22.7,22.25,21.55,21.31,21.29,21.4,21.34,21.28,20.97,21.31,20.83,21.31,20.91,21.24,21.05,21.25,20.87,20.49,19.09,17.09,15.92,14.59,13.75,12.59,11.24,10.88,9.9,9.02,8.31,7.11,6.15,5.35,5.41,5.54,5.33,5.37,5.73,5.81,6.27,5.66,5.01,4.24,3.55,2.72,2.56,3.12,3.37,3.63,3.73,3.41,2.84,2.48,2.22,1.75,1.56,1.77,1.31,1.12,0.12,-0.01,-0.32,-0.19,-0.31,-0.07,-0.55,-0.39,-0.41,-0.3,0,-0.24,-0.03,-0.08,-0.22,-0.01,-0.21,-0.09,-0.2,-0.28,-0.48,-0.19,-0.18,0.02,-0.3,-0.81,-0.93,-0.86,-0.74,-0.6,-0.19,-0.05,-0.1,0.35,0.3,0.01,0,0.5,-0.06,0.05,-0.14,-0.01,0.33,0.2,-0.06,0.26,-0.07,-0.33,0.21,0.14,-0.13,0.07,0,-0.29,-0.28,-0.08,0,-0.55,0,-0.3,-0.26,-0.52,-0.42,-0.41,-0.78,-0.31,-0.6,-0.58,-0.78,-0.44,-0.23,-0.12,0.06,-0.02,-0.28,-0.01,0.02,-0.31,-0.33,-0.5,-0.52,-0.4],[-0.85,-1.13,-0.66,-0.54,-0.59,-0.53,-0.54,-0.24,-0.37,-0.36,-0.27,0,-0.27,0,0.07,-0.13,0.48,0.31,0.39,0.21,0.53,0.47,0.48,0.56,0.17,0.59,0.09,-0.09,0.29,0.25,0.09,0.34,0.36,-0.01,0.18,0.2,0.23,0.19,0.17,0.2,-0.02,-0.07,0.29,0.22,-0.17,-0.15,0.13,0.13,0.16,0.18,0.35,0.24,0.21,-0.02,0.2,0.27,0.82,0.69,0.78,0.73,0.7,0.2,0.16,-0.03,-0.62,0.29,0.53,1.35,1.5,1.39,1.5,1.15,1.42,1.24,2.1,2.42,3.14,3.12,2.75,2.95,2.67,2.29,2.5,2.47,2.54,2.75,2.78,2.7,3.03,3.62,4.05,4.45,4.71,5.61,5.9,6.2,6.72,7.36,7.85,8.35,9.3,9.87,11.4,11.92,13.19,14.59,15.59,16.42,18.8,20.7,22.06,23.85,24.1,24.16,23.83,24.17,23.88,24.03,23.57,23.04,22.72,22.05,21.38,21.3,20.62,20.24,19.47,19.31,18.56,17.87,16.97,16.75,15.79,14.64,13.42,13.4,12.58,12.37,11.79,11.15,10.32,10.32,9.26,8.82,9.27,9.41,9.87,9.99,10.47,11.01,11.03,11.63,11.94,11.91,14.31,17.17,18.17,18.76,18.82,18.73,18.74,18.83,18.04,16.82,15.85,15.14,15.1,14.98,14.9,14.95,15.83,16.82,18.46,19.09,20.23,20.64,20.62,20.78,20.17,18.47,17.64,16.49,16.4,15.57,14.81,14.53,14.69,14.66,15.07,14.72,14.88,14.9,13.87,12.15,10.9,9.12,8.59,8.17,7.67,7.64,7.05,6.96,6.04,5.53,4.69,4.25,3.36,3,3.11,3.01,2.77,2.75,2.76,2.85,2.35,2.31,2.04,2.28,2.37,1.59,1.6,0.84,0.69,0.17,0.01,0.05,0.24,0.12,0,-0.06,-0.21,-0.02,-0.24,-0.53,-0.57,-0.46,-0.34,-0.33,-0.43,-0.66,-0.64,-0.71,-0.66,-0.51,-0.34,-0.25,-0.22,-0.51,-0.57,-0.64,-0.46,-0.55,-0.66,-0.29,-0.44,-0.64,-0.75,-0.67,-0.21,-0.4,-0.77,-0.6,-0.53,-0.38,-0.54,-0.22,-0.72,-0.57,-0.5,-0.53,-0.54,-0.29,-0.85,-1.49,-1.93,-1.28,-1.05,-0.54,-0.24,-0.28,-0.44,-0.45,-0.63,-0.35,-0.68,-0.56,-0.3,-0.21,-0.3,-0.34,0.07,-1.16,-1.03,-1.12,-0.83,-1.22,-1.11,-1.15,-0.84,-0.89],[-0.97,-0.9,-1.12,-0.77,-1.25,-0.85,-1.01,-1.1,-1.22,-0.69,-0.89,-0.67,-0.96,-0.82,-0.97,-1.03,-0.55,-0.71,-0.59,-0.28,-0.3,-0.57,-0.16,-0.37,-0.39,0.13,-0.27,0.16,0.01,-0.44,-0.4,-0.79,-1.07,-0.91,-1.33,-1.11,-1.45,-1.67,-1.7,-1.66,-1.45,-2,-1.94,-1.95,-1.5,-1.63,-1.65,-1.32,-1.03,-0.23,-0.34,0.26,0.67,1.28,1.3,1.35,1.25,1.13,1.27,1.46,1.22,1.43,1.7,1.69,2.05,2.08,2.19,1.56,1.67,1.36,0.79,0.63,1.21,1.47,1.81,2.13,2.11,2.6,2.58,3.66,4.99,6.21,7.53,9.06,10.94,13.36,13.21,13.59,13.87,15.06,16.04,17.93,18.82,19.78,20.83,22.03,22.94,23.65,24.67,25.96,26.5,27.51,28.16,28.06,28.2,28.24,28.11,27.62,26.99,26.73,25.98,25.94,25.71,25.57,25.42,25.61,25.5,25.55,25.41,25.26,25.7,26.02,26.64,26.58,27.36,27.69,28.01,28.45,29.49,29.58,30.91,32.09,32.9,33.94,35.14,35.64,36.44,37.02,37.56,38.78,39.59,40.1,40.32,39.43,40.2,38.6,34.54,31.01,28.48,26.05,23.74,22.8,21.77,20.45,19.83,18.42,17.37,16.27,15.12,13.87,12.53,10.87,10.45,10.01,10.2,10.11,9.91,10.85,11.84,12.39,11.9,12.27,13.03,13.69,15.17,16.54,17.45,17.31,17.51,17.48,16.2,14.46,13.15,12.47,11.83,10.74,9.58,8.93,9.2,9.52,10.22,10.95,11.26,12.46,13.16,13.82,13.32,12.93,12.62,11.27,9.75,7.9,6.25,4.16,2.44,2.95,2.68,3.04,2.97,3,2.94,2.33,2.11,1.61,1.38,1.06,1.13,0.6,0.78,0.72,0.75,0.76,0.35,0.63,0.41,0.61,0.31,0.7,0.82,0.37,0.6,0.31,0.49,0.5,0.25,0.7,0.13,0.4,0.47,0.37,0.54,0.08,0.55,0.08,0.08,0.22,0.12,0.43,0.46,0.07,0.3,0.12,0.06,0.29,-0.09,-0.09,-0.1,-0.01,0.19,-0.2,-0.04,-0.2,-0.28,-0.05,-0.11,-0.16,0.14,-0.19,-0.18,0.14,-0.07,-0.28,0.09,-0.46,-0.31,-0.34,0.02,-0.53,-0.23,-0.37,-0.05,-0.24,-0.31,-0.15,-0.33,-0.46,-0.16,-0.36,-0.66,-0.24,-0.67,-1.23,-1.91,-1.56,-1.47,-1.12,-0.4,-0.35,-0.12,0.24],[-1.47,-1.18,-1.09,-1.37,-1.28,-1.08,-1.44,-1.22,-1.25,-1.1,-1.22,-1.6,-1.46,-1.27,-1.59,-1.35,-1.21,-1.34,-1.13,-1.08,-1.05,-1.29,-1.11,-1.12,-1.08,-0.93,-0.7,-0.65,-0.93,-0.86,-0.62,-0.89,-0.46,-0.74,-0.72,-0.7,-0.53,-0.16,-0.23,0.26,0.16,0.75,0.68,0.42,-0.01,0.05,-0.12,-0.79,-0.93,-0.88,-0.53,-0.87,-0.44,-1.01,-0.77,-0.28,-0.2,0.42,0.65,0.83,0.57,0.37,0.36,0.05,0.32,-0.06,0.28,1.2,1.39,2,2.77,2.59,1.85,1.46,1.61,1.52,1.96,2.42,2.61,3,3.69,4.03,4.01,4.29,4.1,4.05,4.21,4.01,4.6,5.49,5.86,6.78,7.28,7.96,9.01,9.82,10.55,11.69,13.4,15.24,17.35,19.64,21.57,23.97,26,29.15,32.68,33.73,34.26,34.27,34.53,33.61,32.68,31.76,30.79,29.99,29.28,28.17,27.23,25.71,24.82,23.31,22.04,21.09,19.8,18.22,16.98,15.58,14.72,13.53,13.02,11.84,10.97,10.4,9.97,10.22,10.08,10.44,10.3,11.05,11.43,11.95,12.3,11.77,10.87,10.62,10.11,9.4,8.99,8.34,8.51,8.25,8.1,8.27,8.58,8.58,8.96,9.48,9.81,10.25,10.67,10.61,10.57,10.36,10.79,11.42,11.94,12.16,11.97,11.69,11.6,12.06,11.63,11.64,11.6,12.06,11.81,11.67,11.62,12.13,12.53,12.68,13.23,14.01,14.01,14.45,15.09,15.59,16.04,16.02,14.52,13.02,11.47,11.25,11.03,10.76,10.44,9.71,9.66,9.66,9.21,9.29,9.3,9.19,9.14,8.59,8.4,7.5,6.63,5.46,5.16,4.42,3.9,4.06,3.57,3.01,2.78,2.43,2.3,1.97,1.98,1.53,1.53,1.22,1.34,1.03,1.41,1.1,0.97,0.29,0.27,0.1,-0.13,-0.26,0.12,0.19,-0.27,-0.26,0,-0.14,0.14,0.34,0.01,0.1,-0.02,-0.03,0.35,0,0.06,0.4,-0.11,-1.23,-1.25,-0.76,-0.5,0.15,0.27,0.07,0.28,-0.12,0.1,0.19,0.28,0.35,-0.22,-0.59,-0.6,0.15,0.38,0.48,0.31,0.27,0.23,0.37,0.04,0.3,-0.09,0.31,0.33,0.1,-0.11,-0.44,-0.4,-0.29,-0.59,-0.39,-0.46,-0.51,-1,-1.17,-0.58,-0.49,-0.27,-1.2,-0.46,-0.46,-0.4,0.03,0.16,0.86],[-0.47,-0.52,-0.44,-0.72,-0.45,-0.98,-1.26,-1.05,-1.42,-1.84,-2.25,-2.47,-2.07,-2.02,-1.84,-1.69,-1.31,-1.67,-1.53,-0.96,-1.06,-0.66,-0.87,-0.83,-0.85,-0.45,-0.43,-0.1,0.07,-0.05,0.13,0.3,0.24,0.47,0.64,0.37,0.53,0.48,0.49,0.43,0.44,0.46,0.11,0.16,0.17,-0.5,-0.18,-0.42,-0.75,-0.86,-0.69,-0.55,-0.52,-0.94,-0.81,-1.02,-0.47,0.44,0.96,0.77,0.98,0.64,0.92,1.58,2.88,2.94,2.94,2.69,2.54,2.5,2.15,2.27,2.48,2.75,2.97,2.97,3.13,2.97,2.73,2.44,1.97,2.47,3.19,3.61,3.43,2.93,2.78,3.19,3.29,3.84,4.26,4.8,4.93,4.86,5.32,7.08,8.5,8.91,9.81,10.26,11.08,11.91,12.5,13.43,15.2,16.99,18.5,20.06,21.81,23.52,26.01,28.85,31.99,35.22,37.83,40.91,41.79,42.17,44.2,47.53,48.87,49.89,47.32,43.49,40.8,38.92,36.99,34.46,31.63,28.35,25.24,23.65,21.52,19.61,17.96,17.72,17.33,17.16,16.48,16.53,16.3,15.75,15.39,14.66,13.15,12.48,10.88,10.28,9.38,10.05,9.93,10.63,11.09,11.32,11.73,11.13,10.91,10.23,9.54,9.01,8.01,7.33,6.78,6.85,7.08,6.66,6.62,6.67,6.66,7.09,6.89,6.92,6.98,6.99,7.04,7.23,6.87,6.91,7.21,6.56,6.5,6.25,6.43,6.07,6.16,5.94,5.63,6.16,7.1,6.33,5.64,5.99,6.18,6.29,6.52,5.65,4.51,3.25,2.35,0.7,0.47,1.28,2.18,2.03,2.25,2.02,1.76,1.23,1.15,0.59,0.35,0.49,0.32,0.05,0.33,0,0.39,0.97,1.07,1.39,1.31,1.12,0.78,-0.11,-0.31,0.38,0.7,1.57,1.7,0.85,0.53,0.08,-0.1,-0.21,-0.17,-0.26,0.03,0.14,-0.37,-0.04,-0.25,-0.09,-0.28,0.03,-0.33,-0.25,-0.41,-0.15,-0.4,-0.69,-0.74,-0.74,-1.42,-1.61,-1.26,-0.71,-0.31,-0.4,-0.04,-0.58,-0.65,-0.53,-0.51,-0.42,-0.99,-0.65,-0.73,-0.6,-0.52,-0.07,-0.06,0.01,-0.23,0.17,0.09,0.37,0.16,-0.35,-0.32,-0.65,-1.02,-0.83,-0.97,-0.54,-0.16,-0.01,-0.04,0.41,0.07,0.12,0.34,0.3,-0.15,0.3,0.07,-0.19,-0.19,-0.34,-0.5,-0.34],[-1.47,-1.4,-1.21,-0.92,-0.96,-0.57,-1.13,-0.84,-1.22,-1.42,-1.34,-1.51,-0.95,-0.15,0.2,0.19,0.23,0.21,-0.01,0.01,-0.21,-0.45,-0.38,-0.43,-0.32,0.28,0.6,0.74,0.2,-0.46,-0.92,-0.99,-0.89,-1.17,-1.18,-1.09,-1.24,-0.8,-0.98,-1.16,-1.04,-1.04,-0.85,-1.07,-0.86,-0.71,-0.69,-0.67,-1.16,-0.75,-0.75,-1.01,-0.78,-0.61,-0.8,-0.66,-0.69,-1.08,-0.55,-1.05,-0.95,-0.69,-0.67,-0.98,-0.74,-0.21,-0.23,-0.91,-0.98,-1.03,-0.63,0.38,0.14,0.1,-0.13,0.45,1.52,1.72,1.58,1.84,1.54,1.88,1.64,1.93,2,1.9,1.78,1.6,1.91,2.05,1.38,1.1,1.38,1.32,1.46,1.17,1.32,1.03,1.05,1.13,1.01,1.27,1.21,1.22,1.05,1.15,1.27,1.35,1.46,1.07,1.13,1.42,1.25,1.11,1.55,1.9,2.98,3.61,3.99,4.82,5.65,6.12,6.85,7.65,8.58,9.41,10.03,10.68,11.33,11.83,12.7,13.08,14.14,14.44,15.23,16.01,16.3,23.92,27.52,28.5,28.69,28.87,29.02,28.43,27.76,27.06,26.28,25.46,24.99,24.3,23.74,23.3,21.54,21.88,22.48,23.38,24.61,26.06,26.35,26.07,26.43,26.06,24.4,22.28,21.11,20.09,18.59,18.08,18,17.35,16.05,14.9,14.41,13.97,12.98,12.89,11.99,11.57,11.41,10.63,10.74,10.26,8.74,7.01,6.7,6.31,6.26,6.41,6.24,6.16,6.43,6.22,5.79,6.27,6.12,5.86,5.52,5.21,5.22,4.89,4.85,4.46,4.28,3.99,3.61,3.4,3.54,3.24,3.04,2.58,2.08,2.05,2.21,2.23,2.77,2.58,2.76,2.56,2.72,2.14,2.33,1.92,2.03,1.5,1.64,1.32,1.22,0.95,0.35,0.65,0.27,0.27,0.52,0.22,0.67,0.54,1.06,1.26,1.35,1.17,1.31,1.27,1.29,1.19,0.84,0.78,0.86,0.66,0.64,0.12,0.36,0.04,-0.14,-0.79,-1.58,-1.89,-1.06,-0.44,-0.15,-0.07,-0.07,-0.08,-0.04,-0.41,-0.18,-0.34,-0.17,-0.55,-0.58,-0.14,-0.53,-0.67,-0.33,-0.85,-0.93,-0.57,-1,-0.61,-0.7,-0.81,-0.9,-0.57,-0.83,-0.98,-0.94,-1.02,-1.04,-0.83,-0.77,-0.96,-0.96,-0.52,-0.86,-0.37,0.07,0.53,0.64,-0.27,-0.52,-0.3],[-0.31,-0.8,-0.41,-0.87,-0.5,-0.73,-0.64,-0.78,-0.44,-0.77,-0.67,-0.49,-0.94,-0.48,-0.51,-0.75,-1,-0.76,-0.56,-0.97,-0.68,-0.73,-1.03,-0.92,-1.21,-1.18,-0.8,-0.76,-0.87,-1.1,-1.14,-1.02,-1.22,-1.07,-1.2,-0.96,-0.48,-0.36,-0.44,-0.44,0.04,0.07,0.24,0.49,0.12,0.29,0.73,0.58,0.54,0.4,-0.07,-0.3,0.42,0.78,1.19,2.07,2.56,2.43,2.32,1.54,1.33,0.94,1.15,1.21,1.36,1.72,1.82,1.71,1.9,2.15,2.43,2.4,2.7,2.55,2.94,2.74,3.25,3.06,2.97,3.19,3.77,3.49,3.61,4.61,5.1,5.63,6.03,6.02,6.18,5.99,6.18,6.87,6.57,7.26,6.96,7.67,7.33,7.61,8.27,8.12,8.27,8.78,8.91,8.67,9.2,9.03,9.95,11.12,12.38,12.99,14.32,15.26,16.35,17.96,20.75,22.78,25.7,28.51,31.45,33.04,34.13,34.07,33.72,36.16,37.78,44.29,44.36,44.58,44.53,44.42,43.33,43.19,43.93,40.53,38.87,36.98,35.07,32.65,30.82,29.68,27.9,26.5,25.2,23.91,22.69,20.87,20.12,19.82,19.05,18.63,18.44,17.71,17.49,16.89,16.64,15.74,15.63,15.97,15.92,15.75,15.83,15.7,14.86,14.38,13.59,13.07,12.63,12.42,11.69,11.54,11.39,10.97,10.42,10.11,9.46,9.4,9.12,8.66,8.1,8.14,8.3,8.22,8.31,8.08,7.7,7.6,7.83,7.78,7.8,7.42,7.68,7.75,7.59,7.38,7.68,7.3,7.15,7.25,7.61,7.81,7.44,7.79,7.76,7.22,6.74,6.56,5.6,5.37,4.71,4.2,3.77,2.86,2.59,1.72,1.23,1.01,0.92,0.86,0.82,0.64,0.5,0.27,0.48,0.35,0.29,0.14,0.24,0.87,0.56,0.4,0.36,-0.11,-0.01,-0.1,-0.11,-0.16,-0.23,-0.05,-0.06,0.15,0.17,0.72,1.14,0.94,-0.14,-0.43,-0.05,-0.25,-0.1,-0.13,-0.17,0.18,-0.1,0.1,1.11,1.77,1.33,0.54,-0.23,0.02,0.12,-0.14,-0.35,-0.26,-0.05,0.02,-0.37,0.01,-0.38,-0.5,-0.43,0.24,1.2,1.05,0.51,-0.4,-0.29,-0.44,-0.03,-0.19,0.08,-0.26,-0.87,-0.73,-0.06,0.34,0.27,0.27,0.42,-0.26,-0.04,-0.16,-0.29,-0.77,-1.23,-1.62,-2.06,-2.33,-2.83,-3.1],[0.71,0.63,0.16,0.22,-0.09,0.07,0,-0.39,-0.23,-0.27,-0.37,-0.67,-0.33,-0.51,-0.65,-0.24,-0.61,-0.33,-0.35,0.12,0.32,0.86,1.11,0.85,0.63,0.46,0.11,0.08,0.1,-0.24,0.19,-0.2,-0.04,-0.04,-0.33,-0.19,-0.09,-0.4,-0.3,-0.31,-0.32,-0.92,-0.98,-1.01,-1.13,-0.9,-1.38,-1.54,-1.3,-1.76,-1.72,-1.61,-1.31,-1.56,-1.23,-1.47,-1.29,-1.09,-1.12,-0.5,0.78,1.99,2.44,3.12,2.94,2.59,2.16,1.75,1.11,0.64,1.24,1.23,2.25,2.49,2.87,3.49,4.23,3.99,4.14,3.99,3.63,4.03,4.1,4.17,3.94,4.89,5.73,6.42,7.24,8.24,8.85,9.96,10.91,12.14,12.74,15.21,17.18,19.23,21.46,23.33,23.9,24.3,24.88,25.37,25.91,26.58,26.6,27.46,28.66,29.56,31.14,32.54,32.97,32.8,33,33.17,32.81,32.31,31.54,30.49,29.58,29,27.26,25.32,22.99,20.94,20.43,20.44,21.11,21.32,21.3,21.49,22.07,23.25,26.38,28.26,29.72,29.38,28.26,26.42,25.44,24.46,23.83,23.11,22.52,21.84,21.44,20.6,20.04,19.55,18.83,18.32,17.89,17.17,17.28,16.81,16.21,16.1,15.99,15.52,15.19,14.72,15.28,15.18,15.64,15.44,15.88,16.04,16.37,16.68,16.99,16.76,17.13,16.96,17.09,17.18,17.2,17.38,17.26,17.51,17.75,17.98,18.05,18.65,18.57,19.12,19.05,19.06,18.68,18.88,18.63,18.5,17.83,17.59,16.93,16.47,16.19,15.7,15.59,15.13,14.6,14.28,14.51,14.33,14.53,14.28,14.27,13.32,12.14,10.76,10.21,8.83,8.34,7.91,6.92,6.35,5.82,5.13,4.39,3.69,3.81,3.94,3.51,3.67,3.21,3.56,3.26,2.66,2.67,1.87,2.07,1.52,1.18,0.64,0.64,0.33,0.23,-0.04,-0.07,-0.02,0.01,-0.45,-0.17,-0.39,-0.44,-0.34,0.13,-0.29,-0.14,-0.06,0.24,0.14,-0.03,0.04,-0.15,0.31,-0.19,-0.04,0.28,0.17,-0.04,-0.11,-0.19,-0.07,0.03,-0.09,-0.16,0.21,-0.13,0.25,0.15,-0.01,0.15,-0.25,-0.04,-0.19,0.15,-0.2,0.19,-0.11,-0.16,-0.39,-0.16,-0.22,-0.31,0.08,0.04,0.1,0.13,0,-0.24,-0.4,0.07,0.05,0.01,-0.34,-0.14,-0.45,-0.1,-0.48],[-0.9,-0.51,-0.99,-0.74,-0.62,-0.62,-0.49,-0.62,-0.5,-0.1,0.33,0.13,0.22,-0.11,-0.04,0.05,0.29,0.11,0.25,-0.14,-0.42,-0.36,-0.24,-0.53,-0.68,-0.62,-0.72,-0.92,-0.97,-1.2,-1.07,-0.87,-0.62,-0.85,-0.68,-0.37,-0.46,-0.47,-0.54,-0.21,-0.28,-0.57,-0.57,-0.11,-0.05,-0.34,-0.16,0,0.12,0,0.04,0.01,0.66,0.68,1.1,1.68,1.56,1.29,1.49,1.2,1.21,0.93,0.63,0.89,0.51,0.68,0.7,0.81,1.59,1.79,1.97,1.58,1.55,1.95,1.66,1.81,1.9,2.08,2.24,2.83,2.95,2.96,3.1,3.41,3.82,4.12,4.85,5.35,5.6,6.33,6.97,7.69,8.44,9.15,9.78,10.34,10.76,12.01,13.95,14.53,14.91,15.03,14.74,14.6,14.85,14.76,14.83,15.07,16.34,17.6,18.81,20.11,21.09,22.54,23.26,24.57,25.38,25.74,26.4,26.66,26.45,26.47,26.75,26.75,26.79,26.84,26.58,26.97,26.74,27.06,27.09,27.41,27.26,27.82,28.08,27.87,28.65,28.61,28.99,29.14,28.93,28.85,28.84,29.13,29.07,28.39,27.58,26.26,25.22,23.98,23.2,22.09,22.26,21.87,21.77,22.07,21.82,21.73,21.89,21.92,21.58,21.67,20.77,19.8,18.95,17.83,16.56,15.23,14.33,13.5,13.73,13.13,13.26,12.78,12.68,12.82,12.19,11.87,12.11,11.98,11.51,11.25,11.07,10.81,10.6,10.46,10.25,9.91,9.45,9.63,8.95,8.55,8.6,8.13,7.62,7.44,7.54,7.17,6.77,6.52,6.27,5.76,5.28,4.98,4.73,4.39,3.57,3.66,5.02,4.71,4.12,3.55,2.72,2.6,2.46,2.47,3,2.85,2.51,2.62,2.67,2.74,3,2.28,1.15,0.63,-0.07,-0.98,-0.43,0.87,1.06,0.93,0.79,0.46,0.68,0.44,0.05,0.06,-0.17,-0.17,0.25,-0.07,-0.25,0.09,0.15,-0.29,-0.16,0.03,-0.24,-0.08,-0.35,0.04,-0.06,-0.18,-0.36,-0.16,-0.4,-0.29,-0.01,0.14,-0.11,0.2,-0.09,0.02,-0.45,-0.45,-0.82,-0.73,-0.93,-0.66,-0.64,-0.32,-0.63,-0.38,-0.18,-0.05,-0.24,0.07,-0.04,-0.24,-0.09,-0.34,-0.01,-0.3,-0.25,-0.24,-0.17,-0.1,0.01,-0.11,0.15,0.05,-0.26,0.25,-0.11,0.35,0.29,0.12,0.28,-0.15],[-0.68,-0.45,-0.49,-0.09,-0.19,-0.12,0.08,0.18,0.04,0.02,-0.05,0.1,0.07,0.4,0.04,0.24,0.06,-0.05,-0.06,-0.25,-0.57,-0.18,-0.74,-0.79,-0.72,-0.43,-0.58,-0.78,-0.68,-0.49,-1.05,-0.52,-0.77,-0.57,-1.01,-1.12,-1.06,-0.78,-0.66,-0.76,-0.73,-0.64,-0.66,-0.79,-0.89,-1.01,-1.05,-0.73,-0.74,-0.92,-0.69,-0.69,-0.85,-0.58,-0.53,-0.44,-0.61,-0.37,0.05,0.11,0.24,0.02,0.41,0.51,0.22,0.41,0.97,1.33,1.63,1.69,1.75,1.69,2.09,2.1,2.45,2.53,2.3,2.34,2.34,1.92,1.91,2.46,3.41,3.86,4.38,4.6,5.29,5.71,6.5,7.55,8.39,9.8,10.45,11.62,13.06,14.07,15.1,16.19,17.57,17.88,18.39,19.12,19.25,20.29,20.57,21.12,21.47,22.24,22.71,23.45,23.74,24.62,25.16,25.84,26.71,28.03,29.08,30.14,31.72,33.91,35.71,38.12,40.12,41.39,43.78,47.27,47.27,48.09,47.61,46.35,45.32,44.22,42.23,39.28,36.06,33.28,31.65,30.46,29.6,28.67,27.91,27.12,26.72,27.06,26.88,26.99,27.6,26.65,25.98,25.58,24.86,24.32,23.5,23.25,22.48,21.95,21.67,20.79,20.6,20.02,19.5,20.44,20.81,21.49,22.31,22.83,25.17,26.72,29.14,30.81,32.48,33.48,34.96,36.09,36.07,35.52,34.86,33.03,31.69,29.77,27.39,25,23.32,21.2,19.27,17.92,15.86,14.32,13.43,12.6,12.26,11.47,10.95,9.9,8.92,7.65,6.66,5.55,3.91,3.04,1.54,0.66,0.84,1.31,0.92,1.37,1.44,1.77,1.86,1.61,1.33,1.15,1.3,1.39,1.09,0.59,0.48,0.79,0.61,0.6,0.3,0.55,0.43,0.7,0.31,-0.01,-0.01,-0.11,-0.27,-0.29,-0.56,-1.05,-0.57,0,0.09,0.55,0.71,0.47,0.54,0.57,0.54,0.43,0.77,0.31,0.3,0.52,0.31,0.03,0.34,-0.07,0.41,0.04,-0.24,0.1,0.22,0.02,-0.42,0.06,-0.27,-0.54,-0.18,-0.43,-0.31,-0.6,-0.83,-0.86,-0.77,-0.65,-0.68,-0.41,-0.37,-0.75,-0.76,-0.73,-0.67,-0.37,-0.67,-0.44,-0.48,-0.58,-0.63,-0.5,-0.07,-0.2,-0.04,0.08,0.28,-0.3,-0.49,-0.32,-0.28,-0.15,-0.28,0.04,-0.18,0.4,0.12,0.32,0.43,0.84],[-1.13,-0.83,-1.05,-1.13,-1.32,-1.12,-1.22,-1.28,-1.01,-1.14,-1.09,-0.97,-1.28,-1.53,-1.48,-1.95,-1.93,-2.11,-1.66,-0.97,-1.11,-0.57,-0.46,-0.77,-0.75,-0.52,-0.67,-0.9,-0.92,-1.39,-1.69,-1.45,-0.75,-0.14,0.97,1.04,0.74,0.55,0.28,0.02,-0.05,0.03,0.02,-0.09,-0.36,-0.27,-0.09,-0.42,-0.16,0.05,0.02,0.03,0.65,1.11,1.16,1.87,1.66,2.16,1.4,1.18,0.33,0.09,0.38,0.65,1.3,1.67,1.76,1.73,1.96,1.74,2.06,2.21,2.64,2.82,2.92,3.61,3.59,4.11,4.73,5.18,5.42,6.28,6.76,7.5,9.06,10.37,10.57,10.65,11.17,11.25,11.11,11.92,13.65,15.33,16.86,18.42,20.16,21.77,23.34,24.84,25.64,27.09,28.03,28.06,27.45,27.06,26.73,25.76,24.04,21.99,20.5,18.84,16.91,16.26,15.86,15.38,14.71,14.05,13.64,12.97,12.86,12.51,12,12.31,12.82,13.2,13.13,13.47,14.17,14.12,14.86,15.3,15.62,16.25,16.59,16.92,16.92,17.05,16.93,16.77,16.56,16.68,16.43,16.59,16.17,16.1,15.54,15.01,15.23,14.97,14.22,14.01,13.85,13.94,12.94,11.89,10.52,9.39,9.47,9.97,10.33,10.3,10.36,9.78,9.36,8.84,8.75,9.1,9.26,9.48,9.74,10.23,10.74,10.76,10.25,10.07,10.33,9.84,10.28,10.67,11.04,11.25,11.54,11.43,11.76,11.46,10.57,10.29,9.73,9.49,8.93,9.97,11.63,12.92,13.95,14.41,13.92,14.04,13.6,13.44,12.26,11.89,10.78,9.85,8.42,6.77,5.66,5.7,5.17,4.95,4.61,4.27,3.46,3.21,2.82,2.51,2.2,2.48,2.27,2.4,2.31,1.83,1.58,1.04,0.45,0.64,0.09,0.44,0.49,0.31,0.51,0.51,0.15,0.59,0.46,-0.03,-0.2,-0.5,-0.1,0.21,0.09,0.1,0.06,-0.1,-0.23,-0.17,-0.23,0.01,0.25,0.06,-0.33,-0.09,0.05,0.1,0.16,-0.32,0.1,0,0.08,-0.14,-0.12,0.07,-0.22,-0.21,-0.54,-0.8,-0.8,-0.71,-1.04,-1.03,-1.05,-0.7,-0.92,-0.22,0.08,-0.15,0.07,-0.1,-0.42,-0.63,-0.19,-0.02,0.3,0.05,0.22,-0.19,0.22,0.13,-0.28,0.11,-0.15,-0.03,-0.06,-0.27,0.05,0.04,-0.45,-0.29,-0.29,-0.04],[-1.78,-1.71,-1.23,-1.43,-1.23,-1.06,-0.67,-0.79,-0.75,-1.06,-0.57,-1.08,-0.74,-0.54,-0.52,-0.16,-0.14,-0.2,-0.06,-0.06,-0.02,0.01,-0.16,-0.18,-0.23,-0.15,0.05,0.07,-0.01,0.08,0,0.21,-0.22,0,-0.15,-0.17,0.2,0.06,-0.19,0,-0.01,-0.03,0.47,0.36,0.32,0,0.13,-0.6,-0.45,-0.64,-0.73,-0.8,-0.67,-0.7,-0.31,-0.57,0.1,-0.02,0.23,0.55,0.94,1.07,1.23,1.69,2.29,2.63,3.02,2.93,2.74,2.75,2.76,2.72,2.58,2.72,2.84,2.55,2.34,2.4,2.44,2.3,2.66,2.91,4.03,4.59,5.48,6.26,7.24,8.97,10.02,11.45,12.91,14.3,17.35,20.8,24.53,27.85,31.91,34.86,38.81,42.29,48.96,56.21,62.17,68.33,72.77,73.98,74.16,74.12,72.44,68.52,64.61,60.67,55.65,51.14,47.45,44.55,41.16,37.51,33.42,29.88,27.68,26.08,24.57,20.76,19.11,18.44,17.71,16.87,16.5,16.26,16.58,16.78,17.03,17.36,17.5,19.46,22.05,22.71,23.66,24.55,24.74,24.89,25.43,25.85,25.99,26.05,24.72,23.93,22.4,21.41,20.38,18.55,17.85,16.57,15.75,15.18,14.16,13.2,13.07,12.48,11.77,11.76,11.08,10.81,10.54,10.37,10.82,10.59,10.31,10.46,10.59,10.32,10.19,9.86,10.21,10.16,9.89,9.97,10.49,10.83,11.03,11.78,12.47,12.93,13.39,13.91,14.16,14.64,15,15.58,16.46,17.21,17.37,17.31,16.76,16.8,16.86,16.58,15.93,14.91,13.57,13.12,12.09,11.07,10.19,9.66,9.24,8.26,7.61,7.01,7.1,6.65,6.12,5.85,5.75,4.44,3.63,2.53,2.16,2.28,2.36,2.3,2.49,2.29,1.9,1.36,1.27,0.78,0.34,0.07,0.59,0.16,0.31,0.42,-0.4,-0.76,-0.17,-0.36,-0.53,0,-0.05,-0.44,-0.05,0.02,-0.02,-0.17,-0.12,0.37,0.34,0.33,0.28,-0.21,-0.59,-0.83,-0.48,-0.47,-0.47,-0.44,0.04,0.13,0.32,-0.09,0.23,0.08,0.09,0.17,0.23,-0.17,0.14,-0.14,0.06,0.07,0,0.15,0.1,-0.24,0.3,0.09,-0.1,-0.03,-0.06,0.23,-0.09,-0.2,0.26,-0.11,-0.16,0.2,0.21,-0.15,0.27,0.1,-0.17,-0.08,0.17,-0.16,-0.26,-0.17,-0.14,-0.17],[-1.3,-1.01,-1.09,-1.26,-1.18,-1.24,-0.82,-1.02,-1.31,-0.91,-0.78,-1.03,-0.79,-1.17,-1.08,-0.55,-0.49,-0.64,-0.46,-0.46,-0.4,-0.26,-0.34,-0.38,-0.36,-0.2,-0.59,-0.6,-0.62,-0.51,0.02,0.7,0.77,1.36,0.85,0.53,0.13,-0.01,-0.13,0,-0.03,0.02,-0.05,-0.01,-0.12,-0.12,-0.11,0.13,0.04,-0.36,-0.23,-0.36,-0.16,-0.35,-0.09,0.05,0.27,0.48,0.29,-0.19,-0.05,0.56,0.96,0.73,-0.14,-0.22,0.08,-0.05,0.12,-0.08,0.04,-0.08,0.87,1.03,1.2,1.26,1.21,1.31,2.34,3.14,2.78,2.78,3.4,3.78,4.86,5.04,4.81,5.15,5.69,5.59,6.54,7.19,7.77,8.41,9.02,10.04,10.82,11.76,12.57,13.71,14.98,16.32,17.3,18.17,20.1,21.41,23.43,25.48,28.19,30.91,31.23,31.28,35.06,35.13,35.42,33.92,32.2,30.74,29.28,28.1,27.12,25.48,24.6,23.2,22.07,20.97,19.5,18,17.42,17.48,17.29,17.27,17.35,17.64,17.44,16.94,16.92,17.17,16.56,16.03,16.23,15.55,15.16,14.52,14.13,13.79,14.62,14.81,15,14.66,14.57,14.3,13.82,13.32,13.23,13.38,13.31,13.15,13.17,13.21,13.53,13.69,14.11,14.25,14.91,15.4,16.45,17.06,17.94,17.91,17.24,15.75,14.68,13.62,12.65,11.75,11.28,11.37,10.88,10.64,10.01,9.7,8.66,7.97,7.29,6.89,6.08,5.89,6.21,6.5,6.62,6.51,6.58,7.1,7.64,7.69,7.84,7.81,7.53,7.87,6.78,5.64,5.02,4.52,4.2,3.69,3.51,3.56,3.19,3.51,3.42,3.29,3.17,3.48,3.24,2.84,2.66,2.46,2.26,2.14,2.09,2.15,1.78,2.18,1.51,1.11,0.97,0.62,0.62,0.55,0.33,0.38,0.33,0.08,0.24,0.36,0.04,-0.07,0.04,0.14,0.09,0.24,-0.14,-0.18,-0.16,0.01,-0.44,-0.36,-0.76,-0.63,-0.64,-0.29,-0.4,0.02,-0.13,0.05,0.12,-0.06,-0.55,-0.97,-0.69,-0.91,-0.94,-0.35,-0.45,-0.39,0.04,-0.07,-0.24,0.32,-0.03,0.13,0.28,0.26,0.08,0.37,0.29,-0.18,0.1,-0.18,0.1,0.29,0.28,0.19,-0.15,-0.24,-0.14,-0.04,-0.16,-0.34,-0.22,0.03,-0.14,-0.08,-0.05,0.1,0.09,-0.45,-0.26,0.06],[-0.78,-0.65,-0.34,-0.67,-0.8,-0.59,-0.62,-0.57,-0.85,-1.02,-0.85,-0.99,-0.87,-0.73,-0.8,-0.33,-0.69,-0.04,-0.16,0.34,0.12,0.46,0.14,0.04,0.4,0.35,0.15,0.28,-0.02,0.07,-0.11,0.18,-0.19,-0.11,-0.21,0.16,-0.42,0.08,-0.25,-0.33,-0.45,-0.36,-0.23,0.05,-0.28,0.11,0.2,-0.27,0.15,-0.19,-0.09,0,-0.15,-0.03,-0.16,0.08,-0.05,-0.16,-0.09,0.21,0.19,0.29,-0.07,0.46,0.67,0.55,0.89,1.35,1.84,1.65,1.75,1.7,1.86,1.87,1.96,1.84,2.04,1.91,1.71,1.58,2.06,1.78,2.28,2.91,3.16,3.67,4.11,4.58,4.58,4.62,4.83,5.02,5.54,5.39,5.59,5.62,6.06,5.88,5.96,6.02,6.54,7.19,7.46,8.15,8.84,9.42,9.99,11.64,13.26,15,16.41,18.32,20.75,21.68,23.14,24.21,25.13,25.8,26.56,30.23,33.71,37.49,40.78,47.38,50.18,51.65,51.24,49.74,48.07,46.43,43.26,40.15,37.35,34.73,32.02,29.66,27.62,24.64,22.44,21.12,20.64,20.1,19.07,18.64,17.83,17.43,17.3,17.06,17.17,16.99,17,16.71,16.76,15.98,15.88,15.5,15.42,15.36,15.59,14.76,14.37,13.79,13.18,12.5,11.88,11.62,11.19,10.29,9.86,9.25,8.67,8.21,7.98,7.43,6.54,6.75,6.98,6.79,6.64,6.78,7.08,6.54,6.42,6.23,6.48,5.9,5.93,5.66,5.74,5.35,5.43,5.36,5.25,5.15,4.76,4.4,4.47,4.29,4.32,4.17,4.06,3.78,3.03,2.81,2.51,2.23,2.02,1.83,1.68,1.76,1.83,1.83,1.56,1.7,1.41,0.9,0.53,0.51,0.15,-0.07,0.04,0.15,0.09,0.06,-0.17,0.25,-0.09,-0.1,0.07,0.2,0.17,0.09,-0.17,0.24,0.08,0.19,-0.29,-0.13,-0.24,-0.31,-0.21,-0.08,0.19,-0.3,0.11,-0.04,-0.01,-0.03,-0.06,-0.08,-0.19,-0.38,-0.24,0,-0.37,-0.19,-0.1,0,-0.37,-0.48,-0.47,-0.47,0.05,-0.17,-0.35,-0.15,-0.3,-0.02,-0.35,-0.44,-0.13,0.02,-0.38,-0.24,0.09,-0.11,-0.08,-0.28,-0.23,0.07,-0.26,-0.23,0.02,-0.33,0.22,0.09,0.1,-0.06,-0.27,-0.25,0.26,-0.28,-0.17,-0.08,0.28,-0.03,0.01,0.2,0.22,0.29],[-1.59,-1.19,-1.16,-0.87,-1.14,-0.71,-0.53,-0.33,-0.08,0.26,0.11,-0.39,-0.2,-0.91,-0.79,-1.07,-1.01,-0.72,-0.87,-0.87,-0.37,-0.28,-0.52,-0.52,-0.35,-0.46,-0.68,-0.34,-0.47,-0.4,-0.73,-0.69,-0.5,-0.98,-1.1,-0.9,-0.78,-0.96,-0.81,-0.98,-1.1,-0.79,-0.81,-0.85,-0.66,-0.57,-0.66,-0.59,-0.58,-0.43,-0.89,-0.82,-0.71,-0.64,-0.35,-0.3,-0.1,-0.18,-0.14,0.07,0.15,-0.11,0.05,0.4,0.62,0.96,0.98,1.01,0.71,1.04,0.71,1.5,1.37,1.79,2.33,2.43,2.85,3.08,3.25,3.29,3.5,3.45,3.85,4.13,4.18,4.18,3.66,4.13,3.6,3.96,4.19,5.21,6.33,6.6,7.7,8.65,8.57,9.49,9.33,10.16,10.04,10.77,11.24,11.2,11.55,12,12.24,12.81,13.14,13.33,13.57,13.94,14.16,14.86,15.2,15.07,15.7,15.89,16.07,16.88,16.97,17.07,17.41,18.09,18.5,19.23,20.23,20.69,21.19,21.98,22.31,22.87,23.13,23.12,22.35,22.07,22.07,21.5,21.13,21.14,20.68,20.19,20.03,19.47,18.84,17.78,17.23,16.11,15.83,15.37,15.32,15.37,15.32,15.53,15.55,16,16.17,16.07,16.35,16.8,17.08,17.7,18.83,19.25,19.78,20.93,21.54,22.07,22.52,23.81,24.43,24.11,22.97,22.55,22.19,22.34,21.8,21.88,21.9,22.64,23.8,25.75,26.41,26.06,26.51,26.49,25.77,24.65,22.31,20.39,17.81,15.73,12.27,9.58,8.38,7.68,6.96,6.62,6.19,5.97,5.55,5.33,4.42,3.68,3.77,3.33,3.42,3.35,2.91,3.03,2.96,3.15,3.21,2.98,3.23,3.22,3.02,2.59,2.22,1.83,1.32,1.3,1.07,1.15,0.66,0.62,0.8,0.35,0.32,0.37,0.5,0.08,-0.18,-0.02,0.09,-0.19,-0.49,-0.27,-0.36,-0.83,-0.8,-0.55,-0.73,-0.87,-0.87,-0.69,-0.51,0.03,0.61,0.46,0.2,0.08,0.04,0.2,-0.22,0,-0.19,-0.32,0.1,0.18,-0.04,-0.25,0.17,0.06,-0.02,0.15,0.14,-0.1,0.03,0.13,-0.34,0.06,-0.28,-0.34,-0.15,0.08,0.11,-0.34,-0.14,0.22,0.14,-0.07,0.07,-0.01,0.11,-0.02,-0.33,-0.57,-0.25,0.3,0.67,0.57,0.48,0.64,0.61,0.77,0.34,0.26,0.56,0.4],[-1.46,-1.84,-1.75,-1.47,-1.25,-1.46,-0.97,-0.79,-1.11,-1.03,-0.87,-0.67,-0.64,-0.59,-0.6,-0.97,-0.62,-0.64,-1.05,-0.76,-0.82,-0.58,-0.91,-0.72,-0.43,-0.37,-0.3,-0.41,-0.32,-0.35,-0.78,-0.49,-0.4,-0.65,-0.62,-0.77,-0.66,-0.54,-0.4,-0.66,-0.48,-0.5,-0.79,-0.51,-0.83,-0.83,-0.55,-0.99,-0.66,-0.63,0.1,0.55,0.64,0.4,0.22,0.46,0.07,0.22,0.57,0.71,1.1,0.75,0.75,1.06,0.76,1.03,0.92,1.05,1.19,1.61,1.47,1.61,1.48,1.38,1.28,1.48,1.76,2.26,2.39,2.87,3.25,3.66,4.29,5.55,7.04,8.65,10.43,12.28,14.05,16.47,18.16,19.27,20.9,22.42,24.1,27.2,30.91,34.33,35.64,37.21,39.33,39.54,37.88,36.03,34.47,32.42,30.9,28.85,26.66,25.69,24.73,23.96,23.28,21.96,20.9,21.06,20.83,21.6,21.56,21.98,22.61,22.87,23.47,22.68,21.96,21.81,21.89,21.89,22.39,23.4,24.09,25.79,26.46,27.45,28.45,29.01,29.4,29.32,28.77,28.45,27.85,27.65,27.75,27.87,28.26,28.4,28.26,27.78,26.82,25.8,23.93,21.78,19.91,19.64,18.57,17.86,16.91,16.53,16.83,16.71,16.05,15.49,14.9,14.67,13.73,13.32,12.14,11.5,12.62,13.16,13.72,12.97,12.89,12.33,12.4,12.49,13.53,14.43,15.83,16.53,17.76,18.71,19.14,19.31,20.1,21.51,22.63,24.21,24.26,23.51,22.63,22.04,20.79,20.24,18.91,17.46,16.44,15.02,14.15,13.07,11.95,10.84,9.76,8.62,7.8,7.12,6.59,5.83,5.89,5.8,5.83,5.16,5.32,4.89,4.26,3.31,2.84,2.23,2.39,1.74,1.64,1.12,1.79,1.9,1.8,2.24,1.38,1.2,0.62,-0.44,0.01,-0.08,-0.08,-0.07,0.07,-0.45,-0.19,-0.14,-0.21,-0.12,0.06,-0.14,0.22,-0.02,-0.26,-0.25,0,0.07,0.23,0.25,0.08,0.35,-0.09,-0.03,0.15,0.19,-0.03,0.09,0.19,0.1,0.45,0.41,0.58,0.12,0.33,-0.61,-1.06,-1.07,-0.18,0.64,0.85,0.81,0.29,0.41,0.29,0.68,0.38,0.24,0.19,-0.61,-1.02,-0.55,0.13,0.4,0.67,0.26,0.04,-0.61,-0.71,-0.44,-0.48,-0.66,-0.55,-0.24,-0.24,-0.05,-0.21,0.28,0.46,0.51],[-2.06,-2.07,-1.76,-1.79,-1.51,-1.84,-1.75,-1.43,-1.17,-1.01,-1,-0.78,-0.95,-0.94,-0.78,-0.78,-0.36,-0.45,-0.71,-0.55,-0.7,-0.67,-0.45,-0.63,-0.6,-0.71,-0.23,-0.3,-0.4,-0.69,-0.73,-0.68,-0.57,-0.66,-0.51,-0.55,-0.86,-0.56,-0.84,-0.67,-0.34,-0.55,0,0.25,-0.01,0.41,0.7,0.78,0.95,0.94,0.64,0.65,0.6,-0.2,-0.31,-0.92,-0.7,-0.43,0.2,0.29,0.95,1.27,1.05,1.59,1.53,1.47,1.39,1.75,2.53,2.56,2.46,2.51,2.82,2.44,2.97,2.49,3.06,3.12,3.23,3.54,3.9,4.17,4.92,6.16,6.76,7.47,8.97,10.18,11.67,12.63,14.13,15.4,17,17.32,16.98,16.85,17.31,17.33,17.41,18.76,19.46,20.85,21.14,21.39,21.04,21.15,21.22,21,20.96,20.94,21.25,21.39,21.56,21.76,22.16,23.19,23.58,24.06,23.67,23.32,23.32,22.78,22.66,22.08,22.34,22.09,21.77,21.41,21.04,20.77,20.89,20.33,20.11,20.16,20.09,19.36,19.07,19.04,18.66,18.79,18.48,17.91,17.44,17.69,17.38,17.62,17.24,17.08,17.2,16.59,16.09,15.4,15.13,14.52,14.23,13.55,13.53,13.81,13.55,14.12,14.65,14.73,13.95,14.31,14.42,14.66,13.86,12.98,12.43,11.84,11.78,11.42,11.71,11.42,11.11,11.53,10.81,10.65,10.79,10.44,10.72,10.79,11.33,11.73,12.58,12.88,13.23,13.44,13.87,13.56,13.15,13.02,12.41,10.74,10.33,9.89,10.24,10.3,10.01,9.5,8.7,7.57,7.18,6.41,6.44,6.45,6.93,6.84,7.1,6.26,5.74,5.16,4.42,3.71,2.48,1.84,2.54,2.9,3.12,2.97,2.74,2.15,1.8,1.72,1.42,1.5,1.41,1.51,0.9,0.01,-0.44,0.05,-0.17,0.09,-0.02,0.05,0.04,-0.26,-0.06,-0.17,-0.22,0.24,-0.02,0,0.16,0.09,0.38,-0.36,-0.74,-1.04,-1.01,-0.74,-0.76,-0.14,-0.2,0.1,0.48,0.4,0.69,0.19,0.26,0.32,0.21,0.27,0.04,0.37,0.22,0.45,0.28,0.38,0.31,0.24,0.43,0.02,-0.05,0.43,-0.12,-0.15,0.01,0.03,-0.03,-0.1,-0.02,-0.23,0.3,-0.18,-0.02,-0.14,0.05,-0.29,-0.1,0.08,-0.18,-0.08,0.13,0,-0.08,-0.28,-0.34,-0.14],[-0.12,-0.39,-0.48,-0.55,-0.35,-0.41,-0.47,-0.4,-0.6,-0.37,-0.55,-0.51,-0.71,-0.35,0.5,0.53,0.64,0.26,0.28,0.51,0.04,-0.08,-0.11,-0.01,-0.28,-0.23,-0.66,-0.55,-0.72,-0.9,-1.23,-0.84,-1.08,-0.99,-0.95,-1.26,-0.92,-0.56,0.17,0.39,0.43,0.27,-0.14,-1.47,-0.76,0.27,0.44,0.46,0.25,0.19,-0.16,0.1,0.42,0.42,0.46,-0.02,0.07,0.2,0.12,-0.08,-0.54,-0.16,0.26,0.35,0.49,0.21,0.2,0.43,1.12,1.12,1.57,0.93,0.04,-0.49,-0.19,0.13,0.98,0.86,1.46,2.01,1.99,2.34,2.99,2.94,2.71,2.8,2.96,3.67,4.29,5,5.09,5.6,6.34,6.58,6.63,6.54,7.03,7.44,7.45,8.38,8.62,8.82,9.39,10.17,10.55,11.24,11.74,12.69,13.1,13.79,14.81,16.02,17.28,17.93,19.19,20.33,21.16,22.39,23.62,24.56,25.43,26.68,27.66,28.7,29.62,30.05,30.27,30.04,30.35,29.41,28.98,28.46,28.26,27.48,26.11,24.98,23.25,22.45,20.72,19.67,18.44,17.05,15.72,15.41,15.38,15.3,15.18,15.25,14.97,14.76,14.46,13.67,13.74,13.81,13.93,13.29,11.95,11.38,10.47,9.6,10.19,10.53,11.11,11.25,11.48,11.78,12.46,11.14,10.81,10.47,9.73,9.41,9.24,9.31,8.71,8.97,8.84,8.84,8.77,8.81,8.75,8.6,8.79,8.4,8.84,8.61,8.82,8.65,8.92,8.72,6.11,5.71,5.66,5.62,5.36,5.42,5.25,4.41,4.51,3.79,3.76,3.03,2.68,2.51,2.63,2.21,1.7,1.81,1.22,0.85,1.06,0.57,0.54,0.57,0.89,0.27,0.52,0.48,0.92,1.19,1.22,0.73,0.46,-0.4,-0.23,0.42,1.05,0.99,0.42,0.04,-0.13,-0.13,0.1,-0.03,-0.26,0.13,-0.05,-0.19,-0.03,0.06,-0.01,-0.05,-0.15,-0.38,-0.27,-0.36,0.11,-0.33,0.05,-0.25,0.12,-0.18,-0.02,0.19,-0.31,-0.24,0,0,-0.36,-0.59,-0.22,-0.17,-0.12,-0.29,-0.54,-0.22,-0.5,-0.16,-0.21,-0.52,-0.17,-0.26,-0.2,-0.37,-0.08,-0.41,-0.13,-0.34,-0.35,-0.41,0.14,-0.15,0.21,-0.27,-0.23,-0.24,0.23,-0.12,0.14,-0.01,-0.11,0.22,-0.06,0.09,0.42,0.24,0.26,-0.04,0.06,0.3],[-1.33,-0.86,-1.31,-1.26,-1.26,-1,-0.84,-1.09,-1.06,-0.59,-1,-1.59,-1.97,-2.13,-2.54,-2.39,-1.82,-1.54,-1.72,-1.19,-1.52,-1.36,-0.92,-0.58,-0.36,-0.16,-0.14,-0.15,-0.2,-0.22,0.03,-0.12,0.09,0,-0.11,0.16,0.97,1.16,1.36,0.92,0.25,-0.69,-0.92,-0.86,-0.6,-0.89,-0.65,-1.14,-0.89,-0.94,-0.65,-0.58,-1.02,-0.88,-0.79,-0.85,-0.92,-0.81,-0.78,-1.34,-1.56,-1.54,-1.69,-2.07,-2.15,-1.82,-0.85,-0.32,0.82,1.45,1.59,1.9,1.85,2.35,2.16,2.34,2.59,2.55,2.3,2.13,2.33,2.98,3.04,3.53,3.65,3.48,4.21,4.68,5.66,5.88,6.64,7.27,8.2,8.82,9.01,10.06,10.51,11.24,12.08,13.2,14.16,14.96,15.13,15.25,15.21,15.5,15.12,15.42,15.16,15.13,15,14.83,15.19,14.78,14.99,14.52,14.88,14.27,14.28,14.29,14.63,15.73,16.22,16.99,17.4,18.09,19.16,19.64,20.56,23.57,26.98,29.8,31.03,32.8,33,33.01,32.26,31.06,29.22,27.86,27.42,26.62,26.31,24.74,22.64,20.84,18.91,17.07,16.72,16.53,16.43,16.17,15.42,14.95,14.25,13.58,13.49,13.09,12.75,12.22,12.09,11.39,11.41,10.95,11.25,11.17,10.88,11.48,12,12.44,12.93,13.41,13.26,13.63,13.57,13.56,13.44,13.28,13.07,12.79,12.98,12.75,12.95,13.53,14.01,14.72,14.29,13.86,12.88,12.32,11.89,10.87,10.2,8.85,8.09,7.48,6.36,6,4.93,3.94,3.57,2.81,2.22,2.14,2.45,2.61,2.48,2.38,2.65,2.63,2.13,2.25,2.45,2.46,2.46,2.76,3,3.08,2.94,2.31,2.1,1.76,1.68,1.43,1.15,1.15,0.88,0.34,0.12,0.27,0.23,0.62,0.8,1.08,0.98,0.99,0.87,0.81,0.79,0.47,0.58,0.73,0.58,-0.02,-0.04,-0.74,-1.06,-0.23,0.3,1.08,1.11,0.87,0.46,0.4,-0.2,-0.38,-0.45,-0.2,-0.25,-0.45,-0.34,-0.67,-0.17,-0.68,-0.62,-0.74,-0.79,-0.72,-0.6,-0.57,-0.6,-0.79,-0.5,-0.5,-0.65,-0.07,0.41,0.34,0.03,0.37,0.11,0.1,0.44,0.05,0.54,0.46,0,0.16,0.18,-0.02,0.43,0.1,0.38,-0.08,-0.18,-0.16,0.22,-0.17,0.18,-0.18],[-1.43,-1.18,-1.04,-1.05,-0.97,-0.7,-0.35,-0.52,-0.68,-0.61,-0.32,-0.36,-0.76,-0.2,-0.74,-0.48,-0.24,-0.09,0.15,-0.25,0.16,0.49,0.61,0.29,-0.36,-0.74,-1.06,-0.74,-0.89,-0.06,0.14,0.44,0.46,0.35,-0.08,-0.17,-0.51,-0.34,-0.93,-0.6,-0.54,0.01,0,0.41,0.9,0.82,0.89,0.58,0.82,0.8,0.44,0.49,0.65,-0.17,-1.13,-0.87,-0.43,0.04,0.3,-0.15,0.43,0.14,0.61,0.73,0.91,1.07,1.36,1.18,1.31,1.49,2.06,2.29,2.05,2.12,2.4,2.12,2.31,2.44,2.41,2.82,2.77,2.88,3.54,3.72,4.34,4.75,5.27,5.63,6.89,7.27,8.7,9.19,11.59,12.7,13.29,14.45,15.1,16.02,17.15,18.4,20.74,21.67,21.32,20.24,18.62,18.02,17.97,18.24,19.23,20,21.1,22.15,22.67,23.31,23.28,22.91,22.92,21.95,21.02,19.98,19.97,20.44,21.22,21.7,22.29,21.56,21.61,21.25,21.33,20.94,20.57,20.11,19.77,19.94,18.47,17.15,15.31,14.15,12.66,11.21,9.99,9.67,9.6,8.92,9.11,8.86,8.46,8.06,8.05,8,7.54,7.64,7.34,7.17,6.84,7.12,6.73,6.6,6.81,6.89,6.64,6.7,6.67,6.84,6.89,6.65,6.89,7.46,7.95,8.33,8.45,9.58,9.96,10.53,11.32,11.41,11.48,11.29,11.82,12.41,12.91,13.59,14.18,14.38,15.25,15.89,16.58,17.65,17.34,17.44,17.52,17.77,17.48,17.92,17.88,17.99,17.33,17.33,15.71,13.49,12.55,11.91,11.51,10.59,9.78,9.58,8.7,8.08,7.34,7.06,6.42,6.17,5.23,5.16,4.33,4.19,3.48,3.17,2.41,2.22,1.98,2.2,1.96,1.95,1.98,2.12,1.65,1.94,1.33,1.03,1.12,1.58,1.3,1.3,1.09,0.71,0.7,0.31,0.23,0.2,-0.16,-0.23,-0.28,-0.22,-0.06,0.02,0.07,-0.01,-0.21,-0.14,-0.14,-0.28,-0.16,-0.28,-0.18,0.07,-0.31,0,0.02,-0.01,-0.06,-0.24,-0.38,-0.26,0.1,-0.41,-0.02,-0.33,-0.15,-0.41,0.01,-0.4,-0.53,-0.24,-0.4,-0.71,-0.49,-0.68,-1.27,-0.87,-0.34,0.53,0.65,0.92,0.35,0.55,0.19,-0.13,0.06,-0.07,-0.11,-0.25,-0.02,-0.37,-0.43,-0.21,-0.26,-0.14,-0.23,-0.12],[-0.71,-0.54,-0.44,-0.7,-0.76,-0.66,-0.86,-0.32,-0.35,-0.35,-0.21,-0.29,-0.2,-0.11,0.09,0.08,0.13,-0.07,-0.38,-0.25,-0.44,-0.77,-0.72,-0.72,-0.65,-0.96,-1.26,-0.76,-1.23,-1.12,-0.91,-1.38,-1.42,-1.2,-1.19,-1.46,-1.61,-1.25,-1.45,-1.21,-1.49,-1.25,-0.74,-0.44,0.85,1.05,0.99,0.57,0.71,0.52,0.23,0.38,0.51,0.93,1.34,1.59,1.2,1.22,0.38,0,0.92,1.59,2.45,1.75,1.4,1.06,1.78,1.98,2.61,2.3,2.3,1.76,1.72,2.11,1.95,2,2.08,2.55,2.6,2.69,2.74,2.49,2.54,3.5,4.47,5.4,6.17,6.51,6.83,7.31,8.04,9.41,11.6,13.23,14.32,15.7,16.26,15.98,16.14,16.07,15.99,15.92,16.09,16.64,16.34,17.3,17.49,17.81,18.74,18.86,19.18,18.85,18.49,18.32,17.97,17.55,17.39,16.67,16.26,15.74,15.09,14.16,13.81,13.38,13.39,13.37,13.33,13.74,13.39,13.51,13.73,13.71,13.83,13.86,14.37,14.25,14.55,14.57,14.98,15.07,15.22,15.22,15.14,15.6,15,13.98,13.39,12.83,12.49,12.62,12.82,12.74,12.65,12.76,12.5,12.19,11.61,11.22,10.46,9.93,9.5,9.16,8.41,8.11,7.72,6.79,6.67,6.86,6.94,7.18,7.65,8.01,7.83,7.9,8.23,8.38,9.54,9.5,9.68,10.37,10.36,10.46,10.79,10.53,10.97,10.77,10.94,11.4,11.24,11.12,11.31,11.05,11.06,10.97,10.76,10.72,10.4,9.8,9.58,9.49,9.14,8.39,7.57,7.24,6.91,6.2,5.37,5.16,4.76,4.49,4.09,3.38,2.99,2.8,1.98,1.77,1.03,1.15,1.37,1.27,1.01,0.92,1.26,1,0.68,0.46,0.18,0.48,1.07,1.55,0.57,0.28,0.28,0.2,0.44,0.46,0.68,0.7,0.33,-0.13,-0.81,-0.53,-0.14,0.32,0.15,-0.59,-0.75,-0.5,-0.57,-1,-0.89,-0.71,-1.11,-0.84,-1.15,-0.91,-0.8,-0.91,-1.03,-0.44,-0.07,-0.08,-0.62,-1.03,-1.1,-0.85,-1.17,-0.64,-0.34,-0.41,-1.24,-1.37,-0.28,0.37,0.12,0.23,0,0,-0.04,0.03,0.44,-0.1,-0.1,0.18,-0.07,-0.05,0.17,0.03,0.13,0.19,0.02,-0.22,-0.05,0.17,0,-0.09,-0.12,-0.07,0.08,-0.13],[-0.28,-0.49,-0.77,-0.74,-0.45,-0.9,-0.52,-0.4,-0.13,0.26,-0.38,-0.56,-0.23,-0.55,-0.91,-0.95,-0.84,-0.49,-0.19,-0.87,-1.23,-1.02,0.2,0.39,0.5,0.33,-0.04,0.02,0.08,-0.23,0.1,0.07,0.27,0.45,0.26,0.34,0.69,0.45,0.2,-0.31,-0.24,-0.76,-1.27,-1.46,-1.23,-0.89,-0.82,-0.74,-0.5,-0.64,-0.37,-0.2,-0.59,-0.4,-0.12,-0.59,-0.34,-0.59,-0.23,-0.32,-0.34,-0.49,-0.3,0.23,0.44,1.05,0.87,0.66,0.68,0.8,0.84,0.55,0.93,1,1.36,1.77,1.93,1.69,2.07,1.92,1.85,1.85,2.06,2.42,2.83,2.88,3.4,3.38,3.48,3.32,3.95,4.37,5.31,5.5,6.32,6.91,7.47,8.06,8.38,8.61,9.51,10.12,10.72,11.06,11.74,12.35,12.77,13.27,14.12,14.76,15.19,16.15,16.4,17.57,18.5,19.68,20.36,21.9,22.93,24.7,26.53,28.57,30.95,33.52,34.97,36.39,38.02,38.9,39.54,39.78,39.42,38.97,38.16,36.05,33.96,31.58,29.56,27.71,25.51,23.91,21.75,20.24,18.62,16.75,15.75,15.38,14.83,14.04,13.83,14.03,14.2,13.17,12.65,11.43,11.36,10.53,9.64,9.34,8.69,8.37,8.17,8.22,8.4,8.77,8.58,8.71,8.55,8.82,8.93,8.82,8.69,8.75,8.55,8.95,8.9,8.63,8.59,8.87,8.62,8.36,7.75,7.54,7.57,6.96,6.65,6.56,6.39,6.31,5.78,5.72,5.23,5.42,4.79,4.64,3.77,3.28,3,2.18,2.26,2.37,2.22,2.1,2.44,2.18,1.86,1.71,1.39,1.46,0.95,1.34,1.26,0.91,0.89,1.01,1.87,2.16,1.87,1.69,1.26,0.77,0.75,0.88,0.56,0.58,0.55,0.28,0.36,0.33,0.29,0,0.06,0.03,-0.32,-0.14,-0.22,-0.33,-0.2,0.05,0.04,0.16,-0.33,-0.09,-0.17,0,-0.02,-0.17,-0.27,-0.24,-0.26,-0.29,-0.28,-0.26,0.02,0.04,-0.47,0,-0.33,-0.33,-0.52,-0.4,-0.26,-0.65,-0.17,-0.53,-0.16,-0.63,-0.66,-0.61,-0.37,-0.47,-0.26,-0.12,-0.17,-0.57,-0.54,-0.15,-0.5,-0.47,-0.39,-0.32,-0.46,-0.83,-0.68,-0.31,0.03,0.13,0.01,0.15,0.17,-0.19,0.18,0.59,0.66,0.48,0.46,0.12,-0.35,-0.41,-0.99,-1.14],[-1.1,-1.17,-0.98,-1.36,-1.08,-1.02,-1.26,-1.18,-1.41,-1.06,-1.1,-0.91,-1.24,-1.07,-1.18,-1.31,-1.19,-0.97,-0.94,-1.16,-1.28,-1.08,-0.94,-1,-0.84,-1.18,-0.75,-1.07,-0.87,-0.53,-0.53,-0.5,-0.85,-0.7,-0.81,-0.91,-0.95,-1.13,-0.84,-1.09,-0.74,-0.3,-0.39,-0.08,0.59,0.45,0.56,0.8,0.58,0.48,0.9,1.1,1.07,1.41,1.43,1.9,1.9,2.03,2.45,2.55,2.54,2.21,2.16,2.51,2.38,2.4,1.89,2.12,3.13,3.09,2.41,2.61,1.73,1.78,1.93,1.33,1.3,2.55,2.69,3.12,3.08,2.75,2.7,3.06,3.22,3.02,2.85,3.16,3.01,4.07,4.66,6.03,6.54,7.25,8.34,8.61,9.76,10.12,10.9,11.4,11.94,12.99,13.16,13.79,13.91,14.96,15.46,15.84,15.41,15.12,15.26,14.74,14.79,14.03,14.03,13.72,13.2,13.01,12.7,12.77,12.56,12.95,12.88,13.62,14.5,15.11,15.54,15.9,16.71,16.83,17.52,18.63,19.08,19.62,20.19,20.48,20.73,20.43,20.8,20.95,20.15,19.69,19.1,17.62,16.78,15.82,15.27,14.83,14.59,14.56,13.92,13.76,13.16,13.18,12.68,11.96,11.49,11.04,10.54,10.09,9.64,9.28,9.64,9.29,9.68,9.6,10.11,10.04,10.61,11.42,12.16,13.54,14.2,14.74,14.93,15.35,15.84,16.46,17.12,16.93,17.07,17.54,18.41,19.87,20.32,21.34,22.78,22.01,20.87,20.38,19.62,18.17,17.15,15.86,14.12,13.05,11.59,11.13,10,9.56,8.78,7.68,6.88,6.39,5.2,4.33,4.03,3.99,4.02,3.87,3.27,3.39,2.81,3.02,2.71,2.29,2,2.44,1.8,1.56,0.71,-0.1,-0.04,0.03,-0.26,0.13,0.27,0.2,-0.11,-0.26,0.3,-0.17,-0.22,0.01,0.27,0.17,0.56,0.52,0.96,1.27,0.41,0.25,0.09,-0.19,-0.24,0.05,-0.16,0.07,0,-0.22,-0.35,-0.5,-0.25,-0.41,-0.27,-0.38,-0.04,-0.31,-0.29,-0.4,0.03,-0.24,0.03,0.08,-0.31,-0.18,-0.13,0.24,0.01,-0.5,-0.9,-1.08,-0.44,-0.31,-0.42,-0.26,-0.03,-0.16,0.37,0.38,0.26,0.58,0.49,0.72,0.49,0.29,0.19,0.17,0.17,-0.19,-0.43,-0.5,-0.54,-0.18,-0.03,-0.51,-0.05,-0.55,-1.35,-1.35],[-0.08,-0.46,-0.25,-0.57,-0.1,-0.28,-0.47,-0.66,-0.41,-0.69,-0.42,-0.93,-0.78,-0.88,-0.88,-0.78,-0.74,-0.65,-0.81,-1.03,-0.94,-0.65,-0.75,-0.82,-0.51,-0.74,-0.58,-1.14,-0.47,-0.46,0.13,0.12,0.06,-0.33,-0.63,-0.6,-0.33,-0.41,-0.01,-0.11,0.22,-0.7,-1.4,-0.6,-0.25,0.08,0.4,0.72,1.93,1.45,1.46,1.2,1.03,1.14,0.53,0.44,0.13,0.11,-0.36,-0.31,-0.31,-0.12,-0.23,0.05,0.18,-0.02,-0.13,-0.38,-0.17,-0.09,-0.46,-0.18,0.22,0.31,0.83,0.96,0.82,1.16,1.38,2.06,2.34,2.22,2.38,3.07,2.82,2.91,2.89,2.76,3.63,4.36,5.02,5.5,6.25,6.87,7.49,8.2,9.12,9.88,11.04,12.48,13.09,13.78,14.52,14.75,15.46,15.7,16.24,16.6,17.45,17.33,17.06,16.25,16.2,16.17,15.6,15.37,14.96,14.78,14.23,14.31,14,13.36,13.17,13.02,12.86,12.71,12.43,11.96,11.5,11.01,9.7,8.2,7.37,7.01,7.09,6.75,6.39,6.39,5.92,6.21,6.82,6.7,7.5,7.4,8.14,8.46,8.33,8.75,9.1,9.13,9.31,9.73,9.25,9.55,9.46,9.45,9.36,9.17,9.38,9.27,9.15,9.22,9.53,9.03,9.18,9.02,8.69,8.24,8.21,8.52,8.11,8.46,8.22,8.46,8.39,8.51,9.06,9.41,9.54,9.78,9.95,9.79,9.15,9.26,8.92,8.61,8.86,9.8,9.15,8.28,7.92,7.9,8.37,9.25,9.26,9.38,8.15,6.68,5.81,5.41,4.67,4.14,3.68,3.37,2.76,2.6,1.92,2.25,2.05,2.2,2.26,1.8,1.76,1.14,1.14,0.4,0.82,0.77,0.49,0.31,0.13,0.16,0.34,0.51,0.9,0.53,0.23,0.07,0.17,0.16,0.33,0.05,-0.07,-0.19,0.11,-0.2,0.01,0.26,-0.05,0.22,0.26,-0.04,0.26,0.2,0.06,-0.05,0.18,0,-0.25,0,-0.62,-0.41,-0.86,-0.95,-0.71,-0.53,-0.18,-0.4,0.19,0.03,-0.18,0.05,-0.25,-0.31,-1.06,-0.93,-0.8,-1.09,-0.66,-0.46,0.11,1.22,1.24,1.14,0.65,1.03,0.86,0.34,0.41,0.39,-0.11,0.1,-0.4,-0.38,-0.01,-0.38,-0.31,-0.38,-0.45,-0.13,-0.42,-0.22,0.09,0.14,-0.08,0,-0.06,0.32,-0.07,0.12],[-1.07,-1.26,-0.95,-1.13,-1.34,-0.86,-0.5,-0.41,-0.26,0.51,0.45,-0.09,0.07,-0.22,-0.4,-0.21,-0.18,-0.54,-0.43,-0.15,-0.53,-0.57,-0.35,-0.62,-0.57,-0.96,-1.04,-0.76,-1.03,-0.83,-0.82,-0.89,-0.96,-0.81,-0.95,-0.59,-0.58,-0.96,-0.71,-0.78,-0.47,-0.73,-0.43,-0.22,-0.15,0.05,0,0.28,0.16,0.58,0.26,-0.09,-0.36,-0.56,0.01,0.26,0.68,0.72,0.9,0.32,0.09,0.32,0.06,0.45,0.39,1.19,1.5,1.55,1.35,1.15,0.96,0.81,1.52,2.05,2.77,2.81,2.92,2.87,3,2.96,3.26,3.53,4.17,4.49,5.15,5.92,6.62,6.74,7.69,8.44,9.2,10.19,10.55,10.78,11.22,11.46,11.17,11.38,11.88,12.95,13.46,14.11,14.44,14.72,15.29,15.32,15.68,15.96,16.23,15.97,16.31,16.39,17.01,16.66,17.15,17.45,17.77,17.65,17.85,18.35,18.08,18.39,18.45,18.33,17.94,18.24,18.4,17.98,17.91,17.99,18.29,18.12,18.74,18.96,19.27,19.67,19.83,20.59,20.83,21.02,21.39,21.4,21.83,22.02,20.52,19.65,18.18,17.11,15.81,15.32,15.01,14.27,13.81,13.16,13.02,12.63,11.88,11.95,11.13,11.37,10.89,10.49,10.43,9.76,9.71,9.03,9.11,8.93,8.6,8.19,8.17,7.98,7.85,8.21,8.2,8.23,7.88,8.3,7.93,7.96,8.47,8.24,8.3,7.97,8.13,8.02,8.45,8.33,7.86,7.98,7.58,7.39,7.59,7.41,7.01,6.84,6.43,6.19,6.14,5.73,5.49,5.01,4.46,4.2,4.3,3.68,3.33,3.21,3.29,3.52,3.22,3.1,2.86,2.6,2.45,1.99,1.52,1.48,1.38,0.79,0.63,0.71,1.14,1.03,0.87,0.47,0.21,0.24,0.59,0.95,1.27,1.31,1.14,1.51,1,0.15,-0.28,0.41,0.16,0.37,1.02,0.84,1.07,0.8,0.7,-0.06,-0.98,-0.77,-0.76,0,-0.02,0.16,0.05,0.2,0.18,0.53,0.61,0.11,0.48,-0.13,0.26,-0.35,-0.48,-0.16,-0.8,-1.01,-0.68,-1.04,-0.55,-0.29,-0.27,-0.15,-0.72,-0.85,-0.62,-0.83,-0.94,-0.56,-1.14,-0.9,-0.97,-0.78,-0.85,-0.09,0.35,-0.4,-0.53,-0.45,-0.59,-0.32,-0.11,-0.13,0.16,0.15,-0.72,-0.89,-0.9,-0.81,-0.7,-0.65],[0.34,-0.09,0.05,-0.03,-0.25,-0.37,-0.2,-0.1,-0.56,-0.67,-0.66,-0.5,-0.71,-0.76,-0.92,-0.69,-0.73,-1.25,-1.1,-1.1,-1.2,-1.09,-1.25,-1.15,-1.35,-1.06,-0.88,-0.83,-0.87,-1.21,-0.77,-0.86,-0.51,-0.86,-0.5,-0.85,-0.65,-0.53,-0.32,-0.52,-0.05,-0.06,-0.29,-0.09,-0.17,-0.08,0.14,-0.4,-0.02,-0.17,-0.16,0.33,0.64,0.64,0.38,0.41,0.3,-0.03,0.47,0.25,0.41,0.35,0.01,-0.13,-0.26,0.26,1.04,1.16,1.92,2,2.23,2.15,2.14,2.23,1.98,2.24,2.33,2.5,2.44,2.44,2.74,3.03,2.89,3.28,3.63,4.06,4.52,4.46,4.75,5.32,6.05,7.23,8.19,9.51,10.88,12.19,13.25,14.27,15.66,17.26,18.33,19.61,20.85,22.15,23.1,23.85,25.31,26.34,27.69,28.33,29.39,30.87,32.12,32.8,34.39,35.51,36.23,36.83,37.1,36.78,37.48,37.02,36.86,35.98,36.05,35.28,34.71,34.3,33.71,32.98,32.31,31.77,31.04,29.77,28.09,27.09,25.55,24.27,23.29,22.94,22.27,21.76,20.98,20.35,19.24,18.22,17.04,16.02,15.19,15.4,15.48,15.85,15.87,15.53,14.96,14.77,14.78,14.43,14.66,14.59,14.34,14.39,14.38,14.17,13.81,13.2,13.14,13.07,12.85,12.59,12.01,12.22,11.58,11.77,11.64,10.97,11.03,10.57,10.19,10.22,9.92,9.83,9.1,9.04,8.56,7.99,7.24,6.98,6.34,6.5,5.78,5.83,5.61,5.22,4.67,4.82,4.18,4.11,4.41,4.16,4.11,3.75,3.62,3.79,3.73,3.73,3.44,3.18,3.34,3.02,2.81,2.48,2.63,2.46,2.39,2.2,2,1.69,1.64,1.13,0.94,0.49,0.11,-0.36,-0.33,-0.02,0.05,-0.03,0.54,0.51,0.14,0.4,0.28,0.44,0.45,0.11,0.1,0.3,0.48,0.11,0.43,0.2,0.3,0.28,0.19,0.04,0.51,0.29,0.12,0.16,0.16,0.16,0.16,-0.05,0.4,0.32,-0.03,0.08,0.33,-0.11,0.17,-0.17,-0.14,-0.06,0.01,-0.19,0.12,0.04,0.16,-0.24,-0.34,-0.14,-0.03,0.01,-0.28,-0.26,-0.25,-0.15,-0.38,-0.02,-0.49,-0.22,-0.06,-0.01,-0.06,-0.46,-0.47,-0.52,-0.16,-0.57,-0.48,-0.63,-0.47,-0.47,-0.61,-0.68,-0.38,-0.35,-0.28,-0.51],[0.38,0.31,-0.12,-0.11,-0.09,-0.39,-0.31,-0.54,-0.41,-0.53,-0.34,-0.42,-0.29,-0.83,-0.42,-0.6,-0.68,-0.53,-0.28,-0.03,0.56,0.71,0.06,0.29,0.18,-0.37,-0.59,-0.67,-0.51,-1.03,-1.38,-1.72,-1.2,-0.34,-0.28,-0.41,-0.6,-0.46,-0.54,-0.62,-0.88,-1,-0.87,-0.96,-0.58,-0.91,-1.01,-0.87,-0.95,-0.85,-0.92,-1.53,-1.23,-1.15,-1.02,-0.37,0.6,0.61,0.34,0.44,0.23,0.46,0.7,0.72,0.95,0.85,0.45,1.14,1.69,0.98,0.86,0.32,0.52,0.87,0.68,1.02,1.88,1.88,1.8,1.51,1.63,2.02,1.92,2.04,2.16,1.98,2.33,2.64,2.71,4.17,5.46,7.08,9.17,10.54,12.67,14.12,15.12,15.53,16.91,17.44,18.44,18.91,19.67,20.88,21.52,21.93,22.5,22.76,22.74,23.02,23.11,22.87,22.61,22.5,21.83,22.01,21.46,21.94,22.1,22.06,22.06,22,22.13,22.65,23.08,23.3,23.57,23.92,24.24,24.68,25.1,25.17,24.89,24.47,24.59,24.33,24,23.75,23.15,23.09,22.52,21.27,20.75,20.12,18.94,18.54,17.76,17.75,16.93,16.95,16.65,16.01,16.32,15.89,15.07,14.97,15.17,15.34,15.3,15.7,15.76,16.09,16.27,16.41,17.21,18.21,19.08,21.01,22.75,23.04,23.29,23.37,23.62,23.45,23.72,23.19,23.35,23.43,23.56,23.21,22.74,22.43,22.06,21.77,20.11,18.64,17.61,16.51,15.15,13.89,12.99,11.8,10.82,10.24,9.4,8.94,8.16,7.25,6.33,5.69,5.09,4.02,3.29,2.44,2.78,2.43,2.32,2.69,2.42,2.45,2.1,1.93,1.62,1.45,1.18,1.43,1.32,0.96,1.37,1.32,1.26,1.29,1.39,0.8,0.76,1.04,0.57,0.44,-0.03,0.21,0.16,-0.12,0,0.03,-0.06,-0.19,-0.11,0.3,0.08,-0.13,0.15,-0.2,-0.24,-0.04,-0.62,-0.54,-0.96,-1.19,-1.65,-1.37,-1.42,-0.92,-0.56,-0.44,0.19,-0.42,-1,-0.82,-0.8,-0.81,-0.58,-0.56,-0.6,-0.99,-0.4,-0.4,-0.12,1.03,0.6,-0.15,-0.8,-1.09,-0.85,-0.3,-0.44,0.03,-0.18,0.11,0.3,0.02,0.1,0.24,0.24,0.28,0.29,-0.25,-0.12,0.05,-0.19,0.12,-0.02,0.27,-0.21,0.02,0.09,0.24,0.06,-0.1,0.15,0.12],[0.36,-0.02,-0.06,-0.03,0.15,0.24,0.19,0.06,0.34,0.2,0.47,0.18,0.24,0.01,0.24,0.04,0.27,0.28,-0.07,0.27,0.37,0.02,-0.32,-0.36,-1.05,-1.07,-0.92,-0.98,-1.19,-0.79,-0.8,-0.63,-0.05,0.38,0.6,0.38,0.65,0.09,0.41,0.54,0.07,0,0.34,0.28,0.15,-0.28,-0.48,-0.32,-0.68,-0.46,-0.94,-0.77,-0.44,-0.45,-0.56,-0.43,-0.48,-0.28,0.18,0.7,1.12,1.18,1.31,1.3,1.12,1.48,1.25,1.38,1.85,2,2.12,2.19,2.37,2.71,2.18,2.48,1.97,2.87,3.27,3.59,3.57,3.45,4,4.85,5.48,6.22,6.69,7.56,7.66,8.51,9.28,10.75,12.52,14.77,16.76,19.13,21.1,23.36,25.59,28.07,30.26,32.64,34.68,36.01,37.36,38.56,39.06,40.1,40.4,41,41.6,40.93,40.11,38.55,37.32,36.37,35.27,33.79,31.8,29.72,27.87,26.15,25.25,24.61,23.73,23.27,22.33,21.71,21.17,20.55,19.83,19,18.25,17.74,16.77,16.08,16.13,16.09,16.05,15.76,15.78,16.53,17.11,17.71,18.67,18.51,17.94,17.38,16.27,15.44,14.5,13.37,12.46,11.85,10.73,9.96,9.26,8.65,8.42,7.72,7.22,7.11,6.97,6.88,6.56,6.45,6.1,6.19,6.14,6.22,6.19,6.39,6.34,6.14,6.55,6.47,7.53,7.83,8.79,9.49,10.21,9.98,10.41,10.4,10.12,10.93,11.37,11.76,11.91,12.4,12.93,13.45,13.56,13.45,13.69,14.15,13.68,13.41,12.57,12.06,11.17,10.81,9.77,8.67,8.33,7.23,6.25,5.49,4.97,4.64,4.4,4.13,3.44,3.16,2.53,2.38,2.53,2.52,2.44,2.06,1.78,2.13,1.53,1.81,1.32,1.6,1.63,1.54,1.24,0.87,0.84,0.82,-0.07,-0.02,-0.09,-0.38,-0.5,-0.42,-0.17,-0.65,-0.22,-0.26,-0.56,-0.91,-0.76,-0.12,0.31,0.01,-0.07,-0.28,-0.29,-0.52,-0.38,-0.63,-0.46,-0.39,-0.64,-0.9,-0.52,-0.47,-0.48,-0.63,-0.02,-0.21,-0.68,-1.21,-1.09,-0.61,-0.63,-0.88,-0.5,-0.16,-0.69,-0.36,-0.47,-0.69,-0.24,0.21,0.71,0.75,0.05,0.09,-0.01,0.02,-0.08,-0.38,0.15,0.94,0.48,-0.36,-0.25,-0.44,-0.26,-0.66,-0.77,-0.63,-1.01,-1.11,-0.94,-1.08],[-0.54,-0.37,-0.45,-0.52,-0.55,-0.37,-0.25,-0.68,-0.63,-0.21,-0.43,-0.36,-0.54,-0.51,-0.65,-0.97,-0.53,-0.38,-0.41,-0.55,-0.61,-0.58,-0.38,-0.59,-0.61,-0.16,-0.01,-0.04,0.03,-0.25,-0.27,-0.37,-0.07,-0.37,-0.05,-0.33,-0.39,-0.02,-0.08,-0.6,-0.44,-0.23,-0.3,-0.24,0.44,0.41,0.44,0.4,-0.01,0.11,-0.54,-0.28,0.03,-0.23,0.04,0.28,0.2,0.54,1.09,1.21,1.37,1.07,1.72,1.9,2.15,2.27,2.36,2.61,2.73,2.93,2.98,3.22,3.18,3.07,2.95,3.41,3.46,4.32,4.41,5.04,5.92,6.48,6.15,6.59,6.67,6.9,7.85,9.14,9.37,9.41,9.38,10.13,10.49,11.39,12.17,13.09,14.29,15.45,17.32,20.16,22.74,25.18,28.32,30.71,34.06,37.65,40.95,51.49,55.47,59.49,63.47,64.93,67.69,73.69,74.31,73.41,70.86,66.56,62.74,58.93,55.05,50.3,45.67,40.78,36.55,34.15,31.68,29.11,27.01,25.42,23.69,21.73,21.19,20.22,19.62,18.47,17.76,17.37,16.53,15.61,15.2,14.29,13.15,12.49,11.9,10.98,10.16,9.57,9.6,10.07,10.11,10.53,10.12,9.55,9.18,8.29,8.04,6.94,6.59,5.94,5.23,4.51,3.96,3.76,3.88,3.52,3.15,2.91,2.85,2.96,3.11,2.88,3.25,3.07,3.11,2.99,3.25,5.06,6.54,8.22,9.62,11.19,11.83,12.66,13.84,14.61,15.69,16.3,17.19,17.3,17.3,17.28,16.43,15.22,14.41,14.13,12.84,12.16,11.34,11.1,10.92,10.69,10.29,10,9.05,8.19,7.64,6.79,6.71,6.11,5.95,5.46,5.14,5.01,4.7,4.43,3.99,3.14,2.93,2.83,2.68,2.5,2.33,2.58,2.5,2.49,2.38,1.38,0.97,1.6,2.08,1.41,1.32,1.1,0.71,0.2,-0.21,0,-0.37,-0.31,0.02,-0.13,-0.11,-0.15,-0.28,0.06,-0.11,0.17,-0.12,-0.08,0.05,-0.32,-0.17,-0.14,-0.19,-0.03,-0.1,0.11,0.02,-0.16,0.17,0.15,-0.07,-0.33,-0.24,-0.11,-0.02,0.11,-0.05,-0.36,0.06,-0.05,-0.12,-0.01,0.12,0.12,-0.09,-0.05,0.14,-0.18,-0.06,-0.02,-0.38,0.12,0.06,-0.12,0.51,0.6,0,-0.44,-0.38,-0.29,0,-0.27,-0.66,-0.46,0.14,0.54,0.5,1.04],[-0.15,-0.34,-0.33,-0.04,-0.23,-0.06,-0.27,-0.1,0.17,0.24,0,-0.44,-0.78,-0.79,-1.35,-1.58,-1.91,-1.51,-1.27,-0.76,-0.43,0.02,-0.09,0.15,-0.05,-0.18,-0.04,0.27,0.25,-0.05,-0.33,-0.08,-0.28,-0.4,-0.4,-0.39,-0.08,-0.11,-0.05,-0.35,-0.25,-0.59,-0.16,-0.72,-0.45,-0.3,-0.69,-0.48,-0.43,-0.48,-0.5,-0.69,-0.9,-0.62,-1.09,-0.91,-0.88,-0.91,-0.45,-0.5,-0.45,-0.48,-0.59,-0.17,0.14,0.95,1.41,1.83,2.04,2.16,2.47,2.61,2.56,2.92,2.93,3.09,3.31,3.32,3.33,3.27,3.27,3.67,3.54,3.16,3.29,3.63,3.47,3.71,4.78,5.75,6.99,6.94,7.72,7.83,8.87,10.15,10.67,11.82,12.9,14.06,15.02,16.11,16.74,17.43,18.58,19.59,20.88,21.88,22.88,23.46,23.95,24.17,24.41,24.32,24.95,25.13,25.17,25.11,25.85,25.66,25.91,26.28,25.99,26.38,26.18,26.17,26.33,25.74,25.2,24.34,23.75,23.25,22.43,21.74,21.34,20.75,19.99,19.16,18.5,17.87,17.55,16.83,16.18,15.36,14.87,14.78,14.25,13.47,13.18,12.97,12.42,11.84,11.97,12.36,11.9,12.11,12.38,12.52,12.56,12.12,12.23,11.83,11.91,11.49,11.42,11.64,11.58,11.01,10.86,10.97,10.87,10.59,10.76,10.58,10.68,11.01,10.62,10.68,10.26,10.43,9.84,9.91,9.49,9.29,9.11,9,8.77,8.16,8.19,7.63,7.5,7.39,7.05,6.56,6.34,6.11,6.05,5.44,5.67,5.35,5.02,4.49,4.17,3.95,3.77,4.07,3.75,3.56,3.66,3.71,3.41,3.44,3.19,3.22,2.97,2.83,3.07,2.67,2.65,2.11,2.32,2.16,1.75,1.71,1.36,0.91,1.14,0.61,0.39,0.2,0.16,0,0.3,0.65,0.84,0.64,0.48,0.82,0.53,1.02,1.02,0.97,0.66,0.69,0.32,-0.02,0.01,-0.53,-1.04,-0.79,-0.97,-0.85,-0.71,-0.45,-0.78,-0.82,-1.12,-1.39,-1.07,-0.63,-0.9,-0.37,-0.71,-0.23,0,-0.29,0.4,0.01,0.18,-0.15,0.05,0,0.13,-0.3,-0.86,-0.5,-0.17,0.01,0.22,0.66,0.57,0.47,0.07,0.57,0.22,0.11,0.23,0,0.05,0.36,-0.07,-0.04,-0.12,-0.07,0.02,0.13,-0.1,-0.02,-0.4,-0.98],[-1.23,-1.27,-1.12,-0.47,-0.14,-0.45,-0.13,0.29,0,0.14,0.24,0.12,-0.35,-0.04,-0.36,-0.43,0.05,-0.27,-0.38,-0.08,-0.38,-0.54,-0.68,-0.78,-0.44,-0.68,-0.83,-1.03,-0.36,-0.02,0.72,0.78,0.9,0.58,0.26,-0.09,-0.29,-0.04,-0.11,0,-0.14,-0.07,-0.17,-0.52,-0.15,-0.51,0.02,-0.47,-0.32,0.02,-0.01,-0.42,-0.46,-0.51,-0.13,-0.36,-0.15,-0.51,-0.68,-0.45,-0.71,-1.21,-0.88,-0.66,-0.66,-0.36,0.08,0.05,0.66,0.62,1.05,1.33,1.65,1.66,1.8,2.28,2.17,2.37,2.47,2.57,2.92,2.97,2.4,2.42,2.53,3.4,4.54,4.92,5.83,5.57,5.63,5.38,5.52,5.1,5.16,5.3,5.02,5.13,4.9,5.2,5.84,6.04,6.9,7.31,7.93,8.25,8.97,9.08,10.23,10.94,12,12.95,14.09,13.59,13.77,14.01,13.57,13.7,13.74,13.52,13.41,13.62,13.66,13.61,13.52,13.47,13.25,13.26,13.23,13.89,14.52,15.2,15.87,16.28,17.39,18.37,18.93,19.05,19.56,19.53,19.87,19.35,19.21,19.14,19.2,18.34,17.5,17.14,16.21,16,15.8,16.05,16.06,16.37,17.09,17.48,18.31,19.3,20.3,20.71,21.98,21.98,22.3,22.2,22.95,23.01,24.51,26.14,26.91,28.17,28.14,28.1,28.18,26.66,24.66,23.23,21.79,20.99,20.78,19.66,19.22,18.67,17.89,17.16,16.24,15.54,14.84,13.57,13.29,12.06,11.68,10.87,9.4,8.82,7.62,6.66,5.47,4.18,3.42,3.58,3.39,3.06,2.55,2.47,2.27,1.55,1.39,1.53,1.59,1.84,1.56,1.67,2.05,1.65,1.77,1.95,1.58,1.43,0.79,0.08,0.16,0.11,0.24,0.12,0,0.18,0.54,0.18,0.48,0.44,0.31,0.16,-0.33,0.1,0.88,1.33,0.47,-0.85,-0.2,0.83,1.1,1.43,1.22,0.76,0.58,0.36,0.39,0.02,0.12,0.03,-0.58,-0.47,-0.8,-1.05,-1.35,-1.45,-1.22,-1.03,-0.21,-0.25,0.12,0.15,-0.27,-0.06,-0.09,-0.35,-0.27,-0.42,-0.82,-0.58,-1.08,-0.82,-1.33,-1.34,-1.26,-1.26,-1.45,-1.51,-0.73,0.53,0.39,0.14,0.35,0.44,0.11,0.24,-0.09,-0.65,-0.94,-1.86,-1.34,-0.74,-0.24,-0.16,-0.04,0.15,-0.03,0.45,0.54,0.34],[-0.73,-0.82,-0.55,-0.63,-1.21,-1.24,-0.94,-1.15,-1.39,-1.22,-1.45,-1.18,-1.5,-1.39,-1.79,-1.8,-1.41,-1.53,-1.67,-1.51,-1.06,-1.13,-1.29,-1.07,-1.2,-0.84,-0.88,-0.64,-0.56,-0.71,-0.4,-0.08,-0.1,0.33,0.28,-0.44,-0.47,-0.97,-0.8,-1.03,-0.76,-0.96,-0.87,-1.16,-0.93,-0.92,-1.18,-1.07,-1.26,-1.31,-1.17,-0.91,-1.11,-0.95,-1.11,-1.39,-1.05,-0.79,-0.16,0.24,0.18,0.37,0.24,0.24,0.83,1.35,1.56,1.6,1.2,1.25,0.91,0.94,1.14,1.67,1.64,2.46,2.84,3.32,3.67,3.29,3.42,3.28,3.3,3.66,3.92,4.25,4.95,5.33,5.92,6.57,7.17,8.25,9.6,10.54,14.28,15.71,15.59,16.04,16.08,15.62,15.26,14.47,14.26,13.62,13.32,12.86,12.13,11.39,11.37,10.98,10.39,10.33,9.65,9.66,10.19,11.21,11.8,12.19,12.6,13.88,15.44,16.36,17.36,17.45,18.03,18.59,18.55,18.47,18.36,18.42,18.66,17.98,17.4,16.61,15.87,15.34,14.6,14.2,13.42,12.96,12.1,12,11.08,10.54,10.2,9.19,8.54,8.26,7.71,6.89,6.36,5.88,5.32,4.92,4.23,3.27,2.96,2.46,2.17,2.27,2.34,1.72,1.83,1.57,1.29,1.41,0.75,0.54,0.52,0.85,0.44,0.46,0.85,0.78,0.31,0.23,0.51,0.45,0.61,0.97,1.31,1.33,1.47,1.81,2.06,2.48,3.05,3.77,4.11,4.7,5.43,5.54,5.47,5.23,4.73,4.58,4.85,4.54,4.59,4.2,4.12,4.11,4.22,4,3.85,3.31,3.61,3.04,2.97,3.15,2.68,2.97,2.89,2.59,2.76,2.6,2.67,2.91,2.72,2.48,2.68,2.46,2.56,2.24,1.56,1.18,1.28,0.78,0.46,0.43,0.45,0.27,0.48,0.03,-0.08,0.22,0.23,0.25,-0.15,-0.22,-0.35,-0.1,0.04,0,-0.43,-0.03,0.03,-0.35,-0.42,0.12,-0.05,-0.27,0.05,-0.09,-0.23,0.03,0.11,0.05,-0.17,-0.36,0.01,0,-0.25,-0.14,-0.04,0.07,-0.28,-0.33,-0.39,-0.09,-0.06,-0.12,-0.05,0.08,-0.1,-0.02,-0.24,-0.3,-0.19,-0.17,-0.15,-0.15,-0.23,-0.04,-0.14,-0.18,-0.16,-0.02,-0.29,-0.32,-0.15,-0.45,-0.23,-0.22,-0.41,-0.24,-0.24,-0.15,-0.33,0.12],[-0.28,-0.82,-1.06,-0.74,-0.9,-1.41,-1.35,-1.06,-1.05,-0.49,-0.36,-1.06,-1.67,-0.66,-0.31,-0.14,-0.21,-0.1,-0.27,-0.47,-0.45,-0.76,-0.43,-0.82,-0.4,-0.82,-0.98,-0.78,-1.01,-0.92,-0.77,-1.31,-1.32,-1.02,-1.47,-1.15,-0.86,-0.91,-1.19,-1.15,-0.86,-0.61,-0.69,-0.71,-0.82,-0.39,-0.4,-0.18,-0.47,-0.48,-0.46,-0.4,-0.82,-0.71,0.49,1.7,1.7,1.81,1.81,2.26,2.03,2.16,2.11,2.2,2.66,2.64,2.63,2.81,2.93,2.47,2.66,2.25,2.16,2.33,2.93,2.93,3.22,4.02,4.01,4.9,4.76,5.34,6.45,6.9,7.79,8.15,9.35,9.65,10.82,11.06,12.08,12.78,14.33,14.94,15.97,17.22,19.28,21.07,23.52,25.65,27.7,29.97,31.5,33.73,35.5,37.15,39.11,41.15,42.73,43.63,43.52,43.78,44.33,43.6,43.29,42.61,41.92,40.63,38.84,37.72,36.26,34.95,33.53,31.61,30.3,29.09,27.65,25.99,24.64,23.13,22.19,21.4,20.77,19.94,19.69,19.22,18.44,17.94,17.57,17.09,16.68,16.68,17.24,16.92,17.26,17.56,17.51,17.59,17.85,17.79,17.82,18.32,18.34,18.04,17.49,17.09,16.54,16.05,15.3,14.63,14.26,14.37,13.63,13.53,13.23,13.02,12.51,12.57,12.22,12.3,12.03,12.32,12.19,11.99,11.99,12.04,12.36,12.51,12.49,13.08,13.35,13.45,13.77,14.3,14.77,14.63,15.09,15.19,15.72,15.83,15.73,15.42,15.37,14.25,12.83,12.06,12.6,12.77,13.26,12.39,12.07,11.5,10.69,10.12,9.67,9.47,8.5,8,7.62,7.22,6.49,6.23,5.43,5.03,4.51,3.81,3.66,2.93,2.54,2.6,2.29,2.37,2.12,1.46,1.02,0.93,-0.05,-0.48,-0.48,-0.53,-0.71,-0.84,-0.64,-0.78,-0.28,-0.47,-0.33,-0.5,-0.32,-0.22,-0.17,-0.18,-0.24,-0.39,-0.63,-0.79,-0.35,-0.17,0.07,0.14,0.01,0.31,0.49,0.37,0.48,0.5,0.21,0.55,0.32,0.28,0.51,0.59,0.5,0.5,0.42,0.66,0.48,0.6,0.34,0.4,0.2,0.22,0.28,0.34,0.57,0.28,0.18,0.38,0.42,0,0.19,0.41,0.18,0.05,-0.12,0.3,0.22,0.24,0.06,0.08,0.26,0.11,-0.03,0.16,-0.23,0.11,-0.08,0,-0.38,0.02],[-0.23,-0.51,-0.37,-0.21,-0.27,-0.57,-0.29,-1.05,-0.95,-1.32,-1.64,-1.07,-1.08,-0.61,-0.09,0.19,-0.2,-0.34,-0.3,-0.41,-0.68,-0.75,-0.6,-0.3,-0.39,-0.4,-0.78,-0.94,-0.86,-0.81,0.24,0.92,0.77,0.06,0.44,0.33,-0.26,-0.15,-0.4,-0.38,-0.94,-0.72,-1.01,-0.97,-0.02,0.59,0.77,0.97,0.42,0.73,0.69,1.12,0.95,0.45,0.33,0.31,0.15,0.53,1.03,1.4,1.43,0.9,0.92,0.26,0.23,0.09,-0.07,-0.24,-0.48,-0.2,0.07,0.11,0.99,1.7,1.92,2.35,2.27,2.35,3.05,3.23,3.23,3.18,3.07,3.29,3.3,4.12,5.2,5.68,6.02,6.22,6.32,6.85,6.69,6.61,7.05,7.32,7.14,7.63,7.75,8.28,8.63,9.58,10.2,10.43,10.44,10.83,11.56,11.98,12.11,11.42,11.28,10.87,10.22,9.9,9.6,9.45,8.64,8.2,7.83,7.36,7.14,6.35,5.74,5.46,5.81,5.61,5.74,6.18,6.93,7.73,8.55,9.1,9.02,9.13,9.55,9.52,9.62,9.39,9.43,10.02,9.84,10.1,10.17,10.11,10.26,10.32,10.35,10.28,9.99,9.96,10.45,10.35,10.46,9.76,9.02,8.47,7.45,7.28,6.23,5.8,5.19,4.64,3.84,3.73,3.01,2.62,2.16,2.46,2.54,3.59,4.42,5.48,6.53,7.67,7.72,8.09,8.05,8.28,8.31,8.82,9.2,9.14,9.58,9.63,9.27,9.7,9.27,9.41,9.61,9.49,9,8.7,8.02,7.59,7.29,6.9,6.06,5.66,5.25,4.45,4.03,3.45,2.83,2.7,1.99,2.34,1.85,1.91,1.78,1.13,1.16,1.14,1.68,1.92,2.5,2.38,2.51,2.18,2.03,1.98,2.07,2.09,1.76,1.6,1.31,0.61,0.29,-0.06,0.23,-0.27,-0.12,-0.07,-0.12,-0.45,-0.2,-0.1,-0.3,-0.24,-0.53,-0.27,-0.74,-0.67,-0.31,-0.34,-0.22,-0.32,-0.28,-0.66,-0.74,-0.7,-0.22,0.63,0.89,0.45,0.48,0.45,-0.21,-0.27,-0.87,-0.53,-0.66,-0.15,0.14,-0.07,0.19,0.06,0.2,-0.15,-0.27,-0.32,-0.3,-0.1,-0.24,-0.72,-0.84,-0.38,0.55,1.05,1.08,0.82,0.37,0.41,-0.01,-0.16,-0.45,-0.11,-0.15,-0.36,-0.24,-0.18,-0.08,-0.03,0.01,-0.08,-0.17,-0.16,-0.23,-0.44,0.02,-0.1],[-0.05,-0.14,-0.46,-0.3,-0.46,-0.23,-0.45,-0.3,-0.35,-0.55,-0.52,-1.29,-1.49,-1.34,-0.66,-0.67,-0.06,-0.38,-0.29,0.01,-0.37,-0.44,-0.23,-0.5,-0.25,-0.41,-0.5,-0.55,-0.65,-0.73,-0.66,-1.07,-1.15,-1.59,-1.61,-1.36,-1.6,-1.22,-1.31,-1.2,-1.42,-1.15,-1.44,-1.45,-1.35,-1.56,-1.5,-1.86,-1.96,-2.05,-1.95,-1.85,-1.65,-1.39,-1.49,0,0.79,1.75,1.81,1.34,1.05,0.81,0.59,0.89,0.86,1.61,1.67,1.73,1.95,1.94,1.84,1.76,1.63,1.74,2.08,1.88,2.09,1.94,1.63,2.25,2.21,2.57,2.44,3.2,3.4,3.54,4.25,4.74,5.45,6.61,7.18,7.85,8.33,8.54,8.87,9.7,10.12,10.66,11.01,11.66,11.79,12.6,12.6,13.18,13.93,14.26,14.66,15.48,15.55,16.52,16.48,17.39,17.5,17.81,17.53,17.52,17.51,17.75,18.07,18.88,20.16,20.62,21.52,24.49,28.41,32.5,36.63,40.16,43.98,47.26,52.8,56.96,59.23,61.08,62.64,64.59,65.04,61.59,57.46,53.64,49.33,44.85,42.7,39.99,37.92,35.16,29.55,28.04,26.56,25.59,24.47,23.01,22.41,22.3,21.64,21.69,21.81,21.76,21.59,21.96,21.49,21.52,21.86,21.61,20.89,20.69,20.36,19.84,20.18,20.56,21.19,21.1,21.53,21.42,21.72,21.85,21.7,21.56,21.58,21.48,21.47,21.69,22.11,22,22.93,23.35,24.29,23.68,22.84,21.9,21.1,19.18,17.23,14.25,12.04,10.44,9.51,8.35,7.59,7.32,6.5,5.82,5.31,5.12,3.89,3.3,2.94,2.42,1.67,1.71,1.66,1.53,1.84,2.3,2.14,2.14,1.99,1.82,1.5,1.54,1.29,1.12,0.92,0.65,0.27,0.66,0.52,0.7,0.36,0.12,-0.43,-0.56,-0.03,0.09,0.49,0.48,0.37,0.57,0.3,0.28,0.25,0.67,0.19,0.48,0.22,0.34,0.1,0.43,0.07,-0.17,0.09,-0.17,-0.3,-0.18,-0.34,-0.24,-0.07,-0.29,-0.27,-0.66,-0.64,-0.48,-0.77,-0.35,-0.8,-0.19,-0.04,0.33,0.53,0.68,0.9,0.77,0.53,0.27,0.22,0,-0.3,-0.67,-0.55,-0.32,-0.6,-0.3,-0.53,-0.36,-0.38,-0.33,-0.37,-0.27,-0.1,-0.02,-0.39,0.11,-0.16,0,0.1,-0.1,0.08,0.27,0.32,0.12],[0.44,0.32,0.17,0.48,0.01,0.1,-0.11,0.04,-0.25,0.15,-0.16,-0.23,-0.02,-0.08,-0.23,-0.01,-0.05,0.08,-0.15,-0.11,-0.46,-0.34,-0.47,-0.73,-1.45,-1.47,-1.02,-0.89,-0.28,-0.24,0.01,-0.09,-0.37,0.12,-0.19,-0.24,-0.28,-0.44,-0.63,-0.76,-0.71,-0.86,-1.16,-0.77,-1.01,-0.91,-1.11,-1.61,-1.56,-1.09,-0.85,-0.72,-0.16,0.13,0.18,0.4,0.53,0.15,-0.53,-0.92,-1.04,-0.88,0.07,0.67,1.6,2.01,1.78,1.81,1.74,1.72,2.14,2.4,2.87,3.19,2.99,2.78,2.85,2.7,2.9,3.1,3.16,3.21,2.84,4.37,5.38,5.99,7.02,8.58,9.57,10.98,12.84,14.72,15.47,16.77,20.65,24.76,26.29,27.9,28.71,32.27,36.67,41.29,47.44,51.16,54.13,56.97,58.5,60.44,60.48,58.36,55.4,52.74,51.12,48.99,47.48,41.42,39.06,36.29,33.47,29.99,30.14,30.06,30.44,30.05,30.62,30.66,30.6,30.98,31.05,30.93,30.85,30.97,31.5,30.87,30.43,30.52,29.83,29.78,29.37,29.02,28.64,28.18,27.98,27.34,27.12,26.06,25.15,23.8,22.58,21.85,21.85,21.7,21.23,21.08,20.71,20.34,20.18,20.32,19.94,19.71,19.64,19.76,19.74,19.64,20.03,19.35,18.67,17.42,16.73,15.47,14.88,14.29,13.57,13.02,12.93,11.83,11.75,10.71,11.05,10.74,10.9,11.26,11.6,12.31,12.54,12.77,13.15,13.24,13.21,13.4,13.73,14.24,13.89,14.39,15.43,15.79,16.84,17.13,16.99,16.22,14.59,14,13.86,13.45,12.42,9.1,7.26,7.22,7.17,6.91,7.12,5.38,4.11,3.56,3.45,3.05,2.47,1.83,1.76,1.71,1.28,1.11,1.25,1.2,1.04,0.49,0.38,0.05,-0.16,-0.12,-0.18,-0.13,-0.34,-0.28,-0.22,0.17,1.13,1.09,0.74,0.58,0.15,0.28,0.47,0.42,0.32,0.13,0.18,0.25,0.35,0.36,-0.07,0,0.25,0.09,0.01,0.39,0.1,0.29,0.05,0.03,0.26,-0.16,-0.17,0.25,0.32,-0.18,0.21,0.06,0,-0.18,-0.14,-0.12,-0.07,0,0.14,0.2,-0.19,-0.36,-0.07,-0.19,-0.32,-0.04,-0.2,-0.04,0.04,-0.43,-0.28,0,-0.07,-0.15,-0.07,-0.12,-0.02,-0.18,-0.08,-0.38,-0.33,-0.5,-0.59,-0.3],[0.11,0,-0.25,0.01,-0.12,0.05,0.14,-0.04,-0.11,0.08,-0.16,-0.13,-0.31,-0.62,-0.82,-0.94,-0.92,-0.56,-0.81,-0.67,-0.34,0.23,0.19,-0.03,0,-0.31,-0.21,-0.32,-0.48,-0.57,-0.41,-0.76,-0.56,-0.6,-0.64,-0.17,-0.32,-0.26,-0.46,-0.65,-0.55,-0.17,-0.25,-0.47,-0.5,-0.27,-0.18,0.31,0.65,0.71,1.08,0.85,0.33,0.41,0.29,0.13,0.31,0.11,0.19,-0.07,0.18,0.24,0.85,1.58,1.56,1.96,1.59,1.21,0.81,1.2,0.98,1.22,2.07,2.31,2.32,2.16,2.08,2.66,2.95,3.2,3.6,4.52,4.57,5.26,5.87,6.05,6.65,6.49,6.81,7.49,7.85,8.54,9.06,10.06,11.32,11.36,12.08,12.24,12.98,13.13,13.61,14.35,15.32,16.54,17.55,18.42,19.16,19.63,20.45,21.04,21.58,22.44,22.94,24.31,26.76,28.54,30.26,31.91,33.3,33.4,33.32,32.95,32.5,31.56,30.5,30.06,29.65,29.36,28.59,28.5,28.22,27.87,27.83,27.95,27.69,27.67,27.25,27.58,27.38,26.06,25.36,24.19,23.06,22.14,21.78,20.82,20.12,19.03,18.72,17.67,17.24,16.66,16.83,16.62,16.07,16.25,16,16.16,16.14,15.75,15.73,15.98,15.98,16.22,16.06,15.8,16.17,16.05,16.2,16.2,16.06,16.3,16.41,16.71,16.71,17.16,17.12,17.44,17.3,17.89,17.87,17.81,18,17.3,16.16,15.25,14.61,14.19,13.66,14.24,14.17,14.23,14.62,13.59,13.07,12.8,12.99,12.83,12.87,13,12.55,12.15,11.44,11.32,10.92,11.21,11.33,10.93,9.81,8.94,8.25,7.66,6.96,6.26,6.16,5.65,5.59,5.11,5.05,4.14,3.81,3.58,3.21,2.49,2.25,1.91,1.43,1.07,0.43,-0.14,0.06,-0.27,-0.28,-0.22,-0.08,0.25,0.25,-0.02,-0.14,0.06,0.01,-0.09,-0.21,-0.4,0.03,-0.15,-0.02,-0.31,-0.27,-0.2,-0.26,0.02,-0.03,-0.09,-0.26,-0.42,0,-0.45,-0.5,-0.25,-0.49,-0.25,-0.09,-0.27,-0.12,-0.34,-0.68,-0.83,-0.19,0.48,0.63,0.46,0.85,0.42,0.33,0.19,0.12,0.23,0.2,-0.08,0.1,0.26,0.22,0.27,-0.02,0.18,0.21,-0.16,-0.25,0.23,-0.27,-0.22,-0.27,0.23,0.25,-0.15,0.13,0.14,-0.24,-0.24],[-0.76,-1.17,-1.41,-1.34,-1.38,-1.12,-0.96,-0.64,-0.27,-0.54,-0.24,-0.7,-0.71,-0.68,-0.37,-0.58,-0.33,-0.43,-0.43,-0.64,-0.34,-0.78,-0.75,-0.55,-0.51,-0.85,-0.74,-0.95,-0.66,-0.89,-0.28,-0.51,0,-0.11,-0.53,-1.06,-0.69,0.21,0.23,0.19,0.26,-0.1,0.11,-0.17,-0.06,-0.19,-0.37,0.05,-0.29,-0.19,-0.26,-0.49,-0.63,-1.03,-1.18,-0.79,-1.05,-0.38,0.33,0.16,0.57,0.13,0.24,0.98,1.37,1.87,2.06,2.16,2.79,3.17,3.34,3.21,2.92,3.03,2.57,2.6,2.45,2.7,2.78,2.69,3.38,3.65,3.52,3.94,4.09,4.7,4.25,4.61,5.26,5.93,6.14,7.33,7.97,8.38,9.02,9.81,10.33,10.77,11.14,11.91,12.76,13.32,14.26,14.85,16.05,17.73,19.5,20.92,21.06,21.09,21.22,21.04,21.94,23.52,24.73,26.66,27.67,29.56,29.59,30.53,32.78,34.61,35.77,38.16,40.16,40.67,40.47,39.94,39.41,39.44,37.53,35.77,33.72,32.29,30.68,28.59,26.57,24.57,24.05,22.6,21.87,21.3,20.31,19.87,19.28,18.62,19.17,20.26,18.7,17.82,16.89,15.7,14.98,14.88,14.68,14.37,14.49,14.68,14.31,14.33,14.29,14.58,14.8,14.78,14.49,14.86,14.69,14.54,15.14,15.35,15.83,15.81,16.21,16.71,16.66,16.76,16.56,16.07,16.1,15.79,15.56,15.48,15.01,14.6,13.81,12.9,12.34,11.32,10.58,9.43,8.94,7.76,7,6.44,6.65,5.95,5.6,5.46,5.4,4.76,4.32,3.73,2.79,2.14,1.94,1.22,1.03,1.05,1.69,1.76,2.3,1.97,1.92,2.03,1.66,1.37,1.37,1.25,1.15,1.23,1.39,0.91,0.11,0.21,0.38,0.62,1.07,1,0.74,0.16,0.32,0.19,0.27,0.87,0.37,0.22,0.01,-0.61,-0.85,-0.46,-0.11,0.58,0.16,0.28,0.29,0,-0.09,-0.08,0.11,0.78,0.74,0.26,-0.14,-0.73,-0.76,-0.81,-1.16,-0.82,-0.82,-0.92,-0.88,-1.18,-1.03,-1.27,-0.73,-0.72,-0.89,-0.48,-0.22,0.05,0.29,0.26,0.27,0.52,0.5,0,0.19,0.01,-0.37,-0.53,-0.53,-0.66,-0.34,0.03,0.29,0.66,-0.04,-0.88,-0.3,-0.02,0.21,-0.11,-0.53,-0.63,-1.19,-1.27,-1.63,-1.41,-2.03,-2.31],[-0.41,-0.64,-0.5,-0.62,-0.48,-0.5,-0.25,-0.18,-0.28,-0.25,-0.38,-0.47,-0.22,-0.34,0,-0.17,-0.3,-0.6,-0.97,-0.61,-0.91,-1.07,-1.23,-0.63,-0.42,-0.33,-0.12,0.22,-0.05,0.06,0.29,-0.28,-0.2,-0.49,-0.49,-0.8,-0.78,-0.53,-0.94,-0.57,-0.82,-1.03,-0.78,-1.29,-0.88,-1.19,-0.77,-0.91,-1.16,-0.65,-0.41,0.42,0.3,0.17,0.05,0.06,0.87,1.05,1.17,0.59,0.21,0.18,0.67,0.96,1.55,2.07,2.22,2.32,2.81,2.86,3.1,3.4,3.22,3.31,3.45,3.33,3.43,3.5,3.75,4.07,4.3,4.29,4.46,4.91,5.11,6.1,7.78,8.76,10.33,11.34,12.78,14.21,15.2,16.86,20.39,22.72,24.73,26.76,27.73,28.49,29.12,29.66,29.55,28.23,25.77,23.17,21.77,20.88,20.17,19.33,17.92,16.2,15.05,14.33,13.39,12.81,11.77,11.66,11.81,11.74,12.44,12.63,13.17,14.31,15.21,16.73,17.6,18.86,20.27,21.21,22.6,23.93,25.29,26.69,28.09,27.77,27.9,27.81,27.59,27.73,27.68,27.68,27.82,26.72,25.43,24.63,24.24,23.59,20.86,19.54,18.56,18.23,18.68,19.29,20.35,20.9,22.45,24.62,26.09,29.19,31.29,31.68,32.26,33.06,35.22,35.21,34.76,33.36,32.09,31.82,31.86,30.29,29.07,28.86,28.39,28.12,28.31,28.13,28.56,28.58,28.6,28.61,27.63,26.61,24.43,22.5,20.6,19.45,17.37,16.13,14.06,12.97,12.64,12.1,11.97,11.51,10.61,9.95,9.41,8.98,8,7.06,6.48,5.14,5.39,4.92,5.16,4.91,4.59,4.38,3.69,3.6,2.61,2.18,2.03,1.02,0.66,0.71,0.91,0.68,0.7,0.46,0.21,0.39,0.51,0.49,0.13,0.46,1.11,1.6,1.03,0.71,0.32,-0.1,-0.35,-0.1,0.02,-0.19,-0.2,-0.34,-0.34,-0.1,-0.44,-0.54,-0.36,-0.56,-0.6,-0.94,-1.08,-1.01,-0.87,-0.27,0.24,-0.05,0.16,0.13,-0.06,0.06,0.44,0.14,-0.03,-0.06,-0.11,0.24,-0.02,0.05,-0.13,-0.13,-0.04,0.11,0,0.11,0.29,-0.09,0.01,0.07,0.09,0.64,0.65,1.1,0.48,-0.08,-0.53,-0.36,-0.32,-0.59,-0.45,-0.53,0,0.06,-0.03,-0.03,0.16,0.1,0.04,-0.02,-0.03,0.26,0.37,0.48],[-0.68,-0.59,-0.61,-0.25,-0.45,-0.32,-0.42,-0.5,-0.25,-0.25,-0.19,0,-0.08,0,0.18,-0.21,-0.03,-0.14,-0.53,-0.98,-1.65,-1.25,-0.69,-0.36,-0.39,-0.3,-0.36,-0.19,-0.7,-0.29,-0.49,-0.28,-0.57,-0.59,-0.59,-0.4,-0.31,-0.18,-0.3,-0.57,-0.5,-0.68,-0.2,-0.4,0.17,1.13,1.08,1.26,0.94,0.4,0.21,0.54,0.9,0.62,0.15,-0.18,0.36,0.23,0.16,0.52,0.71,0.98,0.93,0.97,0.75,0.85,1.25,1.5,1.89,1.9,2.05,2.32,2.43,2.44,2.47,2.84,2.59,2.94,2.88,2.35,2.35,2.11,2.88,3.32,3.52,4.41,4.54,4.79,5.82,6.61,6.97,7.98,9.93,11.72,13.05,13.68,15.15,15.75,17.06,19.28,22.29,23.74,24.06,24.89,24.55,24.42,24.62,23.79,22.87,22.1,21.26,20.16,19,18.33,18.06,17.71,17.31,16.9,16.29,16.27,15.77,15.73,15.39,15.52,15.6,15.47,15.65,15.35,15.22,15.22,15.23,15.57,15.2,15.45,15.62,15.75,15.43,15.72,15.46,15.55,15.53,15.46,15.75,15.79,15.34,14.66,14.03,13.91,13.44,12.44,11.92,11.56,11.47,10.85,10.75,10.68,10.22,9.93,9.98,9.45,9.18,9.19,8.95,8.16,7.97,8.25,8.15,8.95,9.69,10.38,11.17,10.8,11.53,12.49,13.4,14.78,15.3,16.37,17.29,17.9,17.68,17.3,17.06,17.12,17.27,18.25,18.55,18.34,17.73,17.55,18.06,17.94,17.72,17.78,18.14,17.67,17.79,18.27,17.97,17.84,17.52,16.16,14.94,13.45,11.7,10.38,10.71,10.27,10.2,10.41,10.21,9.78,9.16,8.73,8.1,6.95,6.18,4.84,4.64,3.96,3.89,3.46,3.06,2.82,2.44,2.26,1.84,1.42,1.3,0.89,1,0.3,0.13,-0.06,0.09,-0.49,-0.73,-0.16,0.05,-0.11,0.07,0.29,0.01,-0.03,-0.02,-0.02,0.17,0.25,-0.04,-0.07,-0.15,0.35,-0.15,0.24,-0.09,0.27,0.03,-0.17,-0.09,-0.13,0.14,0.01,-0.06,0.21,0.26,0.24,0.22,-0.09,0.12,0.25,0.17,0.16,0.08,-0.18,-0.18,-0.17,0.07,-0.37,-0.09,-0.08,0.15,0.06,-0.08,-0.35,-0.16,-0.06,-0.32,-0.29,-0.05,-0.09,-0.14,-0.43,-0.05,-0.43,-0.16,-0.09,0,-0.07,-0.31,0],[-0.98,-0.93,-1.09,-1.09,-1.01,-0.61,-0.78,-0.51,-0.66,-0.81,-0.34,-0.75,-0.47,-0.76,-0.68,-0.79,-0.92,-0.61,-0.81,-0.97,-0.55,-1.32,-1.04,-1.04,-0.46,-0.86,-0.59,-0.61,-0.34,-0.56,-0.78,-0.63,-0.88,-0.51,-0.68,-0.74,-0.58,-1.05,-1.08,-1.02,-1.26,-1.25,-0.74,-0.02,0.44,1.12,0.97,0.96,1.06,1.16,1.03,0.76,0.09,0.41,0.1,-0.22,-0.17,-0.13,0,0.03,0.46,0.65,0.97,1.36,1.36,1.82,1.8,1.95,1.87,1.11,0.91,1.31,2.24,2.43,2.26,1.88,2.03,2.6,2.91,3.08,2.82,2.86,2.85,2.9,2.97,2.81,3.31,3.58,3.73,4.21,4.4,4.47,5.14,5.45,5.98,6.56,7.34,9.14,12.59,12.8,13.49,14.26,14.75,16.35,18.65,19.57,20.01,19.85,19.43,18.51,17.84,17.79,18.67,18.95,19.88,20.99,22.89,23.82,24.49,24.95,25.8,25.82,25.64,24.9,24.31,23.49,23.58,23.04,22.92,22.62,22.82,22.49,22.09,22.25,21.88,21.41,21.24,20.8,20.27,19.61,19.03,18.57,17.8,17.05,16.52,15.36,14.77,14.41,13.88,13.33,12.44,12.02,11.54,11.31,11.44,11.07,10.97,10.66,10.08,9.77,10.19,10.07,10.42,10.41,10.52,10.58,10.64,10.77,10.91,10.84,11.07,10.71,10.8,10.92,10.75,11.17,11.04,11.16,11.26,10.95,10.5,9.71,9.63,8.9,8.74,8.71,8.74,8.94,9.49,9.4,9.64,9.58,10.36,11.35,10.72,10.45,10.51,10.68,11.08,11.13,11.55,11.35,10.63,10.49,9.92,9.14,7.95,7.4,7.23,6.97,7.22,5.86,4.61,3.64,3.12,2.64,2.67,2.75,2.87,1.63,1.32,1.58,1.64,1.92,1.78,2.26,1.64,1.58,1.26,0.41,0.19,-0.19,-0.3,-0.23,0,-0.1,-0.08,0.16,-0.08,0.01,0.33,0.18,-0.06,0.33,0.05,0.14,0.19,-0.02,-0.22,0.03,0.2,-0.25,-0.27,-0.19,0.11,0.15,-0.24,0.07,0.08,-0.33,-0.42,-0.08,-0.27,0.08,0.35,0.49,0.18,0.18,-0.03,-0.24,-0.23,-0.26,0.14,0.21,-0.1,-0.35,0.01,-0.06,-0.35,-0.29,-0.23,-0.1,-0.1,-0.14,0.64,0.46,0.03,-0.42,-0.16,-0.33,-0.3,-0.08,-0.13,-0.07,-0.04,-0.33,-0.26,-0.23,0.04,-0.08],[-0.5,-0.75,-0.41,-0.31,-0.66,-0.69,-0.65,-0.25,0.02,-0.36,-0.52,-0.69,-1.06,-1,-1,-1.07,-0.87,-0.52,-0.57,-0.38,-0.38,-0.31,-0.63,-0.47,-0.69,-0.8,-0.57,-0.95,-1.08,-0.79,-1.07,-0.95,-0.43,-0.57,-0.16,-0.12,-0.35,-0.45,-0.56,-0.22,-0.56,-0.49,-0.6,-0.76,-0.74,-0.83,-1.11,-1.27,-1.48,-1.18,-0.81,-0.2,0.22,0.3,0.39,0.72,0.55,0.52,0.41,0.38,0.09,0.64,1.11,1.08,1.14,1.07,1,0.92,0.59,0.36,0.54,0.68,1.08,0.72,1.41,1.55,1.75,2.17,2.45,2.73,2.7,2.94,2.9,2.82,2.66,2.93,2.86,2.58,3.19,3.32,4.07,3.77,4.01,4.14,4.44,4.2,4.23,4.38,4.85,5.05,5.99,7.21,8.33,9.25,10.43,11.21,11.51,12.51,12.77,13.93,14.49,14.93,16.14,16.96,17.87,19.41,20.16,20.29,20.64,21.16,21.85,22.92,23.63,23.6,24.49,25.71,27.17,28.01,28.85,30.08,30.4,31.6,32.32,32.73,33.36,34.63,33.3,31.3,29.4,28.67,28.33,27.97,27.12,25.08,22.29,20.7,18.97,17.23,15.83,14.07,13.33,12.76,11.74,10.97,10.88,10.14,10.28,10,9.51,9.94,9.65,9.49,9.8,9.42,10.15,10.83,10.4,9.93,9.98,9.85,10.6,10.35,10.35,10.36,9.5,8.89,8.84,8.19,8.27,7.74,7.45,7.69,7.32,6.88,6.78,6.41,6.23,6.23,6.45,6.53,6.69,6.66,6.69,6.64,6.6,6.13,5.64,5.11,4.6,3.74,3.36,3.21,3.2,3.04,2.82,2.53,2.23,2.36,1.94,1.83,1.72,1.46,1.21,1.45,1.11,1.27,1.19,0.76,0.65,1.13,0.68,0.86,0.75,0.69,0.79,0.69,0.32,0.47,0.23,0.09,0.03,-0.3,-0.03,-0.36,-0.19,-0.57,-0.48,-0.53,-0.04,-0.25,-0.13,-0.01,-0.24,0.12,0.14,-0.1,-0.15,0.15,-0.18,0.09,0.13,-0.13,0.12,0.04,-0.05,0,0.01,-0.23,-0.26,-0.43,-0.57,-0.85,-0.82,-1.01,-1.52,-1.37,-0.59,-0.4,-0.26,0.04,0.15,0.09,-0.18,-0.16,-0.06,-0.24,0,0.22,-0.01,-0.91,-1.43,-2.01,-1.63,-1.67,-1.71,-1.19,-0.4,0.16,-0.21,0.06,-0.13,-0.14,0.12,0.26,-0.18,0.12,-0.07,0.08,0,-0.04],[-0.68,-0.37,-0.36,-0.96,-0.75,-0.93,-1.07,-0.82,-1.08,-0.99,-1.17,-1,-1.48,-1.53,-1.3,-1.39,-1.82,-1.64,-1.46,-1.52,-1.27,-1.46,-1.24,-1.13,-1.35,-1.09,-1.69,-1.69,-1.59,-1.66,-1.46,-1.6,-1.6,-1.18,-1.12,-1.3,-1.43,-1.28,-1.25,-1.08,-1.25,-1.42,-1.25,-1.16,-1.37,-1.24,-0.85,-0.56,-0.3,0.03,-0.13,-0.14,0.32,0.14,0.28,0.46,0.74,0.58,0.98,0.87,0.35,0.55,0.28,-0.14,0.47,0.75,0.67,1.18,0.6,0.97,0.88,0.98,0.75,0.99,1.99,2.37,2.14,1.72,1.87,1.92,1.84,2.06,2.51,2.94,3.24,3.63,4.15,4.71,5.08,5.6,6.34,6.81,7.42,8.31,11.53,12.46,13.52,14.51,14.84,15.68,15.49,15.43,15.3,15.48,15.23,15.2,15.53,15.59,15.58,15.59,15.4,15.09,15.07,15.17,14.7,14.52,13.83,13.69,13.75,13.54,13.15,13.16,13.72,13.72,14.25,14.41,15.34,16.4,17.55,18.16,19.49,20.57,21.56,22.91,24.1,25.17,25.7,26.45,26.57,27.48,28.05,28.52,28.23,28.62,28.56,25.86,23.83,23.06,22.97,22.85,22.73,21.26,20.19,19.28,18.06,17.3,16.19,15.41,14.61,13.93,13.07,12.52,11.87,12.14,12.19,12.31,11.94,11.96,12.12,12.06,11.85,11.71,11.06,10.38,10.16,10.35,10.41,10.01,9.8,9.45,8.89,8.19,7.77,7.09,6.08,5.62,5.31,5.71,5.85,6.45,6.64,7.11,7.48,7.45,7.34,7.59,7.73,7.17,7.43,6.36,5.63,4.9,4.32,3.87,3.88,4.1,4.46,4.75,4.91,5.19,5.25,5.76,4.94,4.27,3.95,3.76,2.83,2.58,2.57,2.42,2.24,1.71,1.54,1.6,1.36,1.61,1.44,1.35,1.18,1.08,0.65,0.08,-0.51,-0.35,0.05,-0.09,-0.01,0.14,0.15,0.19,0.2,0.01,0.18,0.11,-0.04,-0.2,-0.31,-0.43,-0.14,-0.29,-0.4,-0.84,-0.62,-0.57,-0.12,0.2,0.31,-0.13,-0.05,0.21,0.04,0.05,0.05,-0.02,0.29,0.09,0.2,0.1,-0.04,0.02,0.03,-0.55,-0.27,-0.45,-0.11,-0.04,-0.46,-0.45,-0.47,-0.45,-0.03,0,-0.13,-0.16,0.11,-0.35,-0.09,0.18,0.11,-0.28,-0.11,-0.19,0.06,0.05,-0.06,-0.13,0.04,0.38,0.1,0.23],[-0.76,-1.15,-1.2,-1.03,-1.16,-0.9,-1.15,-0.95,-1.11,-0.82,-1.14,-1.23,-1.06,-1.17,-0.77,-0.82,-0.69,-0.69,-0.58,-1.15,-1.05,-1.49,-1.84,-1.87,-1.87,-2.07,-1.63,-2.01,-1.86,-1.69,-1.71,-1.15,-1,-0.85,-0.86,-0.72,-0.59,-0.53,-0.5,-0.58,-0.6,-0.88,-0.55,-0.74,-0.81,-1.32,-0.89,-1.42,-0.89,-0.7,-0.4,0.29,0.12,-0.31,-0.76,-1.35,-1.57,-1.5,-1.29,-1.49,-1.14,-0.66,-0.62,-0.43,0.03,0.3,1.07,1.36,1.47,1.32,1.09,1.22,1.44,1.69,2.06,2.22,2.27,1.85,1.47,1.26,1.4,1.39,1.51,1.43,1.66,2.05,2.25,2.76,3.56,4.6,5.47,6.75,8.71,9.59,11.14,12.42,13,13.27,13.43,14.34,16.45,17.91,19.78,22.83,23.84,24.93,25.62,26.44,26.49,25.24,23.76,22.59,20.93,18.7,17.6,16.4,15.85,15.24,14.62,13.94,13.89,13.91,13.73,13.7,13.54,13.68,14.18,13.95,14.13,14.5,14.35,14.19,14.31,14.46,15.34,15.63,16.72,17.73,19.4,20.01,20.26,21.49,22.74,23.37,23.91,24.37,22.96,21.82,20.19,18.92,17.58,16.15,15.33,13.97,13.88,13.39,12.79,11.52,10.1,9.61,10.25,10.24,9.97,10.27,10.25,10.4,10.05,9.87,9.17,8.13,8.43,8.2,8.39,7.77,7.24,6.9,5.94,6.41,6.69,6.85,6.97,8.41,9.2,10.39,10.4,10.21,10.12,10.56,10.99,11.36,11.64,12.41,12.41,12.88,12.94,13.4,13.85,13.35,12.46,11.73,11.26,10.76,9.71,9.07,8.48,7.95,7.3,6.79,6.18,5.97,5.53,5.69,5.48,5.24,5.33,4.6,4.41,4.15,3.57,3.18,2.58,2.1,2.08,1.45,1.46,1.12,1.25,0.58,0.7,0.4,0,0.36,0.54,0.35,0.45,-0.08,0.11,0.22,0.38,0.34,-0.16,-0.1,0.02,0.16,-0.05,0.12,-0.4,-0.17,-0.18,0.16,0.01,0.1,0.05,0.02,-0.23,0.11,-0.04,-0.17,0.22,0.26,0.08,0.06,0.07,0.33,-0.04,-0.03,0.41,-0.04,0.46,0.06,-0.03,0.31,0.55,0.2,0.18,0.14,0.16,0.71,0.38,0.39,0.42,0.52,0.12,0.27,0.51,0.03,0.06,0.35,0.02,0.14,-0.34,-0.39,-0.22,-0.45,-0.48,-0.78,-1.02,-0.92,-1.07,-1.24],[-0.84,-0.87,-0.48,-0.3,-0.58,-0.46,0.01,-0.25,-0.15,-0.43,-0.99,-1.13,-1.12,-0.77,-0.93,-0.95,-1.16,-1.05,-0.85,-1.07,-0.87,-1.2,-1.16,-1.23,-0.96,-1.25,-0.9,-0.73,-1.25,-0.94,-0.98,-0.83,-1.19,-1.16,-1.32,-1.43,-0.95,-0.65,-0.83,-0.22,0.04,-0.02,-0.39,-0.15,-0.23,-0.19,-0.07,-0.46,-0.26,-0.47,-0.85,-0.51,-0.74,-0.82,-1.14,-0.97,-1.27,-1.21,-0.8,-0.57,0.14,0.38,0.94,0.59,0.62,0.26,0.15,0.31,0.31,0.43,0.77,0.92,0.72,1.09,1.1,1.08,0.71,0.43,-0.48,-0.75,-0.18,0.4,0.99,1.84,2.11,2.4,3.04,3.42,3.77,3.77,3.49,3.35,4.02,4.03,4.38,4.81,5.2,5.61,6.59,7.37,7.78,8.87,9.73,10.68,12.03,13.1,14.37,15.23,16.64,17.84,19.26,20.23,21.43,22.38,22.53,23.68,25.5,27.03,27.49,28.33,29.08,28.54,27.78,26.75,25.88,25.36,24.42,23.38,22.34,21.24,21.13,20.32,20.23,19.32,18.81,18.17,17.18,16.62,15.63,15.11,14.53,14.03,13.22,12.76,12.63,11.98,11.46,11.22,11.18,11.19,11.27,11,10.91,11.29,10.95,10.94,11.15,10.86,11.04,10.72,10.76,10.56,10.26,10.36,9.8,9.94,9.59,9.36,8.9,8.71,8.57,7.97,7.61,7.1,6.7,6.08,6.22,6.19,6.57,6.64,7.27,7.37,7.42,7.49,7.22,7.47,7.46,7.33,6.88,7.2,6.8,6.64,6.67,6.05,6.24,5.81,5.86,6.06,5.74,5.62,6.05,5.62,5.88,6.08,5.67,6.04,5.8,5.57,5.1,4.11,3.62,3.23,2.92,2.48,2.67,2.13,1.75,1.7,1.4,1.56,1.43,0.94,1.16,0.48,0.78,0.17,0.23,0.47,0.16,0.23,0.31,-0.22,0.14,-0.17,-0.12,-0.21,-0.01,-0.21,-0.22,0.02,-0.01,-0.25,-0.14,-0.16,-0.33,-0.27,-0.52,-0.27,-0.77,-0.59,-0.96,-0.62,-0.62,0.08,0.2,0.21,0.39,0.23,0.63,0.52,0.75,0.76,0.73,0.35,0.79,0.38,0.14,-0.11,-0.25,-0.22,-0.22,-0.17,0.43,0.48,0.27,0.68,0.8,0.44,0.79,0.75,0.69,0.66,0.29,-0.24,-0.9,-0.64,-0.17,0.07,0.02,-0.54,-0.3,-0.51,0,0.13,0.67,0.96,1.1,0.92,0.79,0.87],[-0.97,-1.11,-0.82,-1.01,-0.63,-0.79,-1.19,-1.01,-0.95,-0.85,-0.69,-0.58,0.03,-0.02,0.07,0.03,0.29,-0.17,-0.18,-0.65,-0.27,-0.61,-0.8,-0.54,-1.07,-0.54,-0.42,-0.39,-0.08,0,-0.13,-0.63,-0.93,-0.25,-0.52,-0.53,-1,-0.95,-1.07,-0.75,-0.65,-0.75,-0.62,-0.85,-0.92,-1.33,-1.43,-0.96,-0.83,-0.28,0.01,-0.21,0.03,0.61,0.14,-0.26,-0.15,-0.36,-0.72,-0.14,-0.39,-0.14,0.01,0.21,0.32,0.5,0.52,0.89,1.27,0.96,1.16,1.15,1.57,1.79,2.04,2.21,2.27,1.43,0.95,0.08,0.9,1.08,1.6,1.57,2.04,2.02,2.19,2.95,3.04,3.65,4.7,5.06,5.6,6.41,6.88,7.08,7.83,7.57,7.99,8.02,7.76,8.21,8.16,8.44,8.51,8.37,8.97,9.17,8.96,9.31,9.36,9.52,10.03,9.91,10.04,10.48,11.21,12.25,13.18,13.88,15.05,15.75,16.9,17.21,18.13,18.09,17.84,18.07,19.1,19.75,20.39,21.51,22.07,21.88,21.97,22.33,21,19.59,18.35,17.74,16.98,17.38,16.9,16.74,17.16,16.98,16.52,16.59,16.44,16.03,16.06,15.5,13.93,14.2,14.28,14.5,14.67,14.44,13.97,13.38,13.17,12.9,12.66,12.36,12.66,13.09,14,12.52,11.53,11.13,11.58,11.16,11.05,10.3,10.05,9.59,8.88,8.55,7.82,7.6,7.33,6.97,6.64,6.8,6.47,6.3,6.4,6.69,6.71,6.49,6.81,6.35,6.49,6.7,6.59,6.41,5.96,6.06,5.86,5.92,5.46,5.07,4.18,3.75,2.62,2.58,2.56,2.34,2.62,2.57,2.39,2.54,2.35,2.6,2.24,1.76,1.34,1.09,1.49,1.06,0.97,0.5,0.67,0.29,0.27,0.29,0.38,-0.08,-0.07,-0.1,0.05,-0.14,0.34,-0.13,-0.13,-0.23,0.2,-0.23,-0.1,0.23,0.23,0,0.12,0.08,-0.32,-0.13,0.01,-0.5,-0.43,-0.64,-0.5,-0.78,-0.7,-0.37,-0.92,-0.98,-0.55,-0.57,-0.46,-0.61,-0.98,-0.45,-0.43,-0.64,-0.84,-0.5,-0.65,-0.81,-0.19,0.24,0.23,0.41,0.46,0.24,-0.18,-0.24,-0.42,0.07,0.61,1.04,1.03,0.51,0.39,0.48,0.58,0.22,0.33,-0.21,0.07,-0.17,-0.55,-0.12,0.04,0.4,0.73,0.9,0.59,0.62,0.84,0.97],[-1.87,-1.88,-2.09,-1.65,-1.26,-0.87,-0.51,-1.05,-0.99,-1.42,-1.33,-1.42,-1.67,-1.47,-1.23,-1.12,-1.36,-1.32,-0.46,-0.61,-0.45,-0.68,-0.89,-1.36,-1.88,-1.17,-1.17,-0.47,-0.54,-0.4,-0.89,-0.71,-1.24,-1.38,-1.49,-1.48,-1.33,-1.47,-1.29,-1.42,-1.3,-1.6,-1.53,-1.15,-1.15,-1.65,-1.66,-1.39,-1.23,-1.13,-1.26,-1.3,-1.21,-1.1,-1.48,-1.68,-1.37,-1.2,-0.69,0.28,0.83,0.5,0.42,0.21,-0.48,-0.78,-1.05,-0.97,-1.06,-1.21,-1.18,-1.07,-0.9,-0.51,0.29,0.28,0.71,0.79,1.4,1.75,2.1,1.92,2.26,2.78,3.31,3.15,3.54,3.82,4.21,4.26,4.47,4.44,4.66,5.46,6.14,7.23,9,9.8,10.67,11.46,11.99,12.84,13.36,13.95,15.15,16.73,18.15,19.9,20.06,20.33,21.26,21.21,21.1,21.17,21.09,20.86,20.33,20.1,19.98,19.64,19.16,18.56,18.5,17.71,17.05,16.5,15.6,14.95,13.75,13.18,12.13,10.89,9.81,8.87,8.1,6.92,5.86,5.86,5.44,5.11,5.25,5.17,5.4,5.03,5.29,5.82,6.28,6.34,6.46,6.02,5.97,5.49,5.59,4.83,4.19,3.54,3.2,2.74,2.34,2.74,2.87,2.74,3.2,3.22,3.64,4,4.3,4.47,4.58,5.19,5.06,5.5,5.67,5.92,6.2,6.33,6.29,6.4,6.84,7.1,7.28,7.44,7.88,7.64,7.03,7.07,6.79,6.87,6.75,6.78,7.13,7.16,7.03,7.41,7.56,7.83,7.89,8.49,8.3,7.9,7.57,6.89,6.87,6.05,6.03,5.22,5.29,4.83,4.21,4.08,3.38,3.27,2.97,2.34,2.02,2.07,1.4,1.15,0.9,0.58,0.65,0.52,1.13,1.57,2.48,2.35,2.6,2.56,2.14,1.62,1.48,1.17,1.12,0.43,0.39,0.1,0,0.23,0.88,1.05,1.42,1.02,1.18,1.19,0.59,-0.12,-0.86,-0.55,-0.41,-0.63,-0.35,-0.1,0.38,0.6,0.26,-0.06,0.21,0,-0.32,-0.46,-0.09,0.12,0.11,-0.12,0.09,0.22,-0.27,-0.08,-0.13,-0.15,0.39,-0.04,0.34,0.14,0.33,0.1,0.06,-0.03,-0.06,-0.07,0.13,0.09,-0.19,0.08,-0.31,-0.78,-0.79,-0.87,-0.58,-0.58,-0.49,0.15,0.33,-0.03,0.1,0.37,0.5,0.06,0.23,0.18],[-1.32,-0.92,-0.14,-0.3,-0.26,-0.17,-0.34,-0.55,-0.29,-0.38,-0.31,0.37,0.09,-0.5,-0.25,-0.67,-0.87,-0.31,-0.62,-0.17,-0.31,-0.16,-0.45,-0.53,-1.06,-1.1,-1.62,-1.34,-1.11,-0.31,-0.45,-0.89,-0.63,-0.53,-0.39,-0.58,-0.46,-0.32,0.11,0.03,0,-0.48,-0.05,0.1,-0.11,-0.69,-1.15,-1.22,-1.21,-0.59,-0.4,0.22,-0.21,-0.51,-0.48,-0.72,-0.42,-0.37,0.07,-0.28,-0.24,-0.01,-0.08,0.12,0.07,-0.03,0.62,1.73,1.46,1.5,0.91,0.86,0.89,0.08,-0.41,-0.7,-0.39,-0.14,0.53,0.72,0.74,0.93,1.56,1.92,1.97,2.49,2.83,3.39,3.72,4.1,4.85,4.85,5.2,6.04,6.57,7.21,8.01,9.73,10.81,12.26,12.95,14.11,15.1,15.12,15.24,18.53,19.52,20,21.44,23.35,23.88,25.64,27.39,27.93,29.06,30.27,31.8,33.58,33.88,33.8,32.3,31,29.24,27.73,25.72,24.42,22.72,21.12,20.74,20.76,20.48,20.06,19.41,19.11,18.67,18.92,18.55,18.73,18.47,18.16,17.79,17.49,17.3,17.26,17.08,16.14,15.93,15.64,14.66,14.58,13.81,13.39,12.61,12.22,11.52,11.18,11.45,11.36,10.62,10.23,9.14,8.33,8.09,7.55,7.74,7.8,8.31,8.3,8.03,8.27,8.13,8.46,8.48,8.39,8.25,8.16,7.8,7.74,7.98,8.45,9.13,9.14,9.58,9.75,9.54,9.02,7.75,7.61,7.03,7.38,6.92,6.88,7.17,7.62,8.07,7.69,7.88,7.68,7.58,7.26,7.18,6.54,6.31,5.86,5.69,5.63,5.33,4.96,4.44,4.45,4.02,4.04,3.83,3.14,3.15,2.78,2.39,2.03,1.84,1.75,1.66,1.16,1.38,1.33,1.12,0.92,0.42,0.02,-0.06,0.09,0.02,0.79,0.55,0.18,0.25,0.49,0.16,0.01,0.72,1.04,0.42,0.1,0.01,-0.5,-0.05,-0.04,-0.05,-0.37,-0.36,0.26,-0.08,-0.28,-0.88,-0.46,0.46,0.17,0.33,-0.07,-0.07,-0.27,-0.15,-0.53,-0.23,0.06,0.11,0.24,0.28,0.65,0.44,0.53,0.76,0.59,0.99,0.5,0.38,0.45,0.25,0,0.3,0.25,0.36,0.22,-0.32,-0.35,-0.84,-0.66,0.18,0.74,-0.07,-1,-1.47,-0.97,-0.63,-0.03,0.3,-0.09,-0.07,-1.17,-1.64,-1.9],[-0.64,-0.58,-0.52,-0.61,-0.91,-0.86,-0.95,-1.03,-0.75,-0.73,-0.77,-1.1,-0.83,-0.9,-1.36,-0.99,-0.96,-1.29,-0.81,-0.76,-1.11,-0.96,-1.04,-0.94,-1.08,-0.88,-1.13,-0.8,-0.85,-0.85,-0.7,-0.74,-0.83,-0.98,-0.87,-0.78,-0.57,-0.82,-0.79,-0.49,-0.72,-0.47,-0.32,-0.56,-0.69,-0.81,-0.54,-0.97,-1.15,-0.99,-1.29,-0.9,-0.87,-1.15,-1.26,-0.78,-0.99,-1.09,-0.02,0.32,-0.14,-0.58,-1.36,-0.79,-1.11,-0.71,-0.04,0.58,0.74,0.6,0.13,0.09,0.08,-0.33,-0.01,0.02,0.27,0.1,0.48,0.77,1.23,1.32,1.11,1.27,1.47,1.19,1.63,1.75,1.49,1.52,1.71,1.8,1.48,1.35,1.72,1.62,1.86,2.26,2.74,3.52,4.18,5.11,5.32,6.01,7.11,7.6,8.51,9.36,11.1,13.48,13.66,13.91,14.33,14.47,15.43,16.58,18.04,18.91,18.93,20.6,22.78,23.44,24.17,24.46,24.87,24.33,24.99,25.98,27.1,29.17,29.62,29.34,29.08,28.16,27.45,26.82,25.64,24.71,24.71,24.32,24.22,23.26,21.25,19.86,18.71,17.53,16.7,15.26,14.87,14.88,14.73,14.58,14.55,14.28,13.43,12.41,12,11.52,11.2,10.39,10.37,10.29,10.28,9.85,9.79,9.61,9.38,8.73,8.57,8.86,9.19,8.66,7.82,7.67,7.13,6.81,6.76,6.8,6.5,6.53,6.49,6.4,6.2,6.3,6.43,7.11,7.2,6.94,6.6,6.12,5.35,5.32,5.25,4.97,5.04,4.31,3.69,3.48,3.36,3.72,3.47,3.46,3.44,2.79,2.72,1.91,1.44,0.62,0.29,0.46,0.27,0.35,0.66,0.68,0.57,0.9,0.66,0.3,0.11,0.17,-0.19,0.08,-0.1,-0.04,-0.31,-0.14,0.09,-0.26,-0.22,0.04,0.06,-0.24,0.17,0.15,-0.37,-0.14,0.08,0.18,-0.19,-0.4,-0.03,-0.14,-0.42,0.15,0.01,-0.13,-0.29,-0.18,-0.04,-0.26,-0.3,-0.04,-0.26,0.16,-0.32,-0.17,-0.05,0.03,0.15,0.1,0.07,0.07,-0.24,-0.11,0.22,0.17,-0.11,-0.05,-0.07,0.34,0.32,0.09,0.38,-0.12,-0.07,0.4,0.36,-0.13,0.29,0.39,0.42,0,0.25,-0.08,-0.1,-0.11,-0.05,0.1,0.16,0.36,0.03,0.09,0.13,0.32,0.05,0.21,0.16,0.01,0.04,0.43],[-1.6,-1.48,-1.07,-1.47,-1.4,-1.52,-1.5,-1.6,-1.57,-1.2,-1.07,-1.48,-0.94,-0.9,-0.08,-0.56,-0.35,-0.55,-0.92,-1.08,-1.53,-1.93,-1.86,-1.5,-1.65,-1.35,-1.18,-1.24,-1.12,-1.1,-1.56,-1.6,-1.49,-1.25,-1.56,-1.26,-1.08,-1.24,-0.91,-0.68,-0.94,-1.2,-1.46,-1.65,-1.33,-0.98,-0.99,-1.12,-1.18,-1.11,-0.54,-0.12,-0.34,-0.53,-0.27,-0.72,-0.67,-0.63,-0.25,-0.24,-0.55,-1.37,-0.95,-0.84,-0.26,0.1,-0.2,-0.25,0.07,-0.45,-0.05,0.44,0.68,1.05,0.73,0.9,1.22,1.16,1.42,1.68,1.92,2.26,2.52,3.38,3.83,4.54,5.48,6.42,7.75,8.89,10.35,11.98,13.69,15.56,16.16,16.15,17.62,19.31,20.9,20.52,20.03,19.08,18.09,17.58,17.03,16.61,16.75,16.22,15.95,15.71,15.24,15.02,15.16,14.82,14.27,13.99,14.02,13.89,13.16,13.12,12.82,12.65,12.25,12.24,11.88,11.17,10.8,10.26,9.56,9.03,8.87,8.26,8.08,7.4,6.93,6.72,6.83,6.57,6.63,6.64,6.44,5.99,5.74,5.02,4.65,4.75,4.36,4.34,3.47,3.01,2.81,2.81,2.86,3.1,3.17,3.13,2.96,3.19,2.88,3.04,3.13,2.9,2.89,2.52,2.52,3.44,3.96,4.41,4.71,4.56,4.69,4.31,4.33,4.4,4.76,4.69,4.8,5.83,6.15,6.19,5.9,6.27,6.31,6.09,6.51,7.07,7.51,7.94,8.99,8.35,8.5,7.85,7.85,7.35,6.91,6.8,6.4,6.21,5.48,5.33,4.79,4.47,4,4.25,3.92,3.72,2.7,2.55,1.95,2.03,1.66,1.59,1.58,1.41,1.17,0.69,0.56,0.79,0.72,0.22,0.43,0.3,0.09,-0.35,-0.46,-0.16,-0.27,-0.33,-0.13,-0.19,-0.45,-0.07,-0.22,-0.38,-0.37,-0.87,0,0.23,0.28,0,-0.14,-0.68,-0.26,-0.61,0,0.04,0.2,0.23,0.2,0.2,0.05,0.31,0.24,0.34,0.01,-0.12,-0.09,0.25,-0.1,0.25,-0.06,-0.11,-0.16,-0.01,-0.09,0.07,0.05,-0.08,0.24,0.09,0.17,0.11,0.05,0.31,-0.1,-0.04,0.24,-0.09,0.23,0.04,0.3,-0.03,0.12,-0.2,0.3,-0.17,-0.21,-0.12,-0.49,-0.79,-0.57,-0.23,0.04,-0.09,0.05,0.17,0.09,-0.16,0.09,0.29],[-0.43,-0.25,-0.27,-0.8,-1.19,-1.58,-1.52,-1.02,-0.46,-0.37,-0.63,-0.37,-0.63,-0.83,-0.62,-0.93,-1.34,-1.65,-2.04,-1.85,-1.84,-1,-0.68,-0.14,-0.34,-0.27,-0.23,-0.07,-0.31,-0.39,-0.62,-0.85,-0.73,-0.93,-0.88,-0.62,-0.36,-0.62,-0.26,-0.5,-0.32,0,-0.15,-0.21,0.22,-0.13,-0.09,-0.06,0.04,-0.43,-0.15,-0.09,-0.41,-0.3,-0.22,-0.65,-0.57,-0.6,-0.51,-0.45,-0.38,-0.27,0.1,0,-0.14,-0.22,0,0.39,1.03,1.65,1.39,1.3,1.11,0.66,0.45,0.61,0.54,1.27,0.96,1.11,1.21,1.37,1.76,2.32,3.46,4.12,4.65,4.96,5.59,5.49,5.46,6.1,6.1,6.01,6.15,6.17,6.28,7,7.55,8.49,9.13,9.37,10.09,11.07,11.4,11.93,12.43,12.48,13.28,13.25,13.83,13.95,14.38,14.42,19.81,20.62,20.4,20.92,20.78,21.04,20.33,19.9,19.6,19.49,19.14,18.4,18.06,17.62,16.94,16.23,15.66,15.14,14.17,13.34,12.87,12.31,11.73,11,10.08,9.37,9.11,8.46,8.22,7.46,7.19,6.49,6.46,5.8,6.31,6.6,6.35,5.84,5.14,5.06,5.16,4.8,4.92,5.05,5.46,5.77,5.67,6.02,6.35,6.49,6.37,6.33,6.63,6.27,6.43,6.21,5.99,6.02,5.76,5.95,5.55,6.11,5.88,5.75,5.88,6.26,6.58,6.64,7.17,8.09,8.39,9.26,10.02,10.03,10.23,10.11,10.52,10.07,10.21,8.76,7.57,6.99,6.69,6.98,6.44,6.51,5.88,4.77,3.89,4.12,3.87,4.29,4.29,3.52,2.99,2.57,2.34,2.38,2.38,1.78,1.76,1.79,2.29,2.06,1.49,1.51,1.21,1.17,0.8,0.89,0.81,0.92,0.9,1.29,1.29,0.87,0.5,-0.16,-0.06,-0.29,-0.36,0,-0.31,-0.25,-0.26,0.24,-0.45,-1.17,-1.39,-1.38,-0.97,0,-0.1,-0.17,-0.28,-0.03,0.06,-0.17,-0.4,-0.24,-0.2,-0.45,-0.12,-0.29,-0.11,-0.04,-0.02,-0.3,-0.2,-0.63,-0.67,-0.64,-0.83,-0.44,-0.07,0.35,0,0.22,0.37,0.01,0.32,0.22,0.26,0.52,0.14,0.32,0.64,0.39,-0.25,-0.51,-0.38,-0.41,0.34,0.39,0.42,0.03,0.42,0.46,0.08,0.22,0.14,0.43,0.14,0.15,0.36,0.06],[-1.01,-0.47,-0.68,-0.61,-0.73,-0.91,-1.16,-0.91,-0.74,-0.8,-1.04,-0.72,-1.1,-0.78,-0.63,-0.7,-0.61,-0.56,-0.33,-0.23,0.3,0.58,0.25,-0.16,-0.03,-0.43,-0.41,-0.63,-0.73,-0.67,-0.77,-1,-0.79,-0.85,-0.69,-0.67,-0.56,-0.97,-0.58,-0.99,-0.91,-0.52,-0.73,-0.58,-0.82,-0.37,-0.54,-0.68,-0.57,-0.25,-0.4,-0.38,-0.43,-0.95,-1.08,-1.49,-1.04,-1.2,-1.05,-0.74,-0.67,-0.42,0.13,0.34,0.37,0.7,0.28,0.55,0.08,-0.2,0.27,0.22,0.38,0.36,-0.05,0.28,0.58,0.03,0.29,0.36,0.47,0.75,0.79,0.91,0.51,1.55,1.83,1.99,2.34,3.02,3,3.32,3.77,4.11,4.64,5.81,6.29,6.27,6.97,6.9,7.49,8.82,9.68,11,11.81,12.29,12.96,13.36,13.6,13.63,13.53,13.38,14.28,14.95,15.9,17.79,18.9,20.2,20.51,21.05,23.27,26.14,27.31,28.85,29.55,30.12,30.81,31.31,31.75,31.33,30.4,28.68,25.54,21.94,20.21,18.77,17.58,16.02,15.02,13.6,12.67,11.22,11.01,10.24,10.11,9.11,9.03,8.73,8.23,8.03,8.24,7.99,7.57,7.05,6.95,6.59,6.52,6.34,6.23,5.8,5.7,5.8,5.73,5.73,5.65,5.4,5.32,5.07,5.42,5.16,5.78,5.79,6.26,6.44,6.54,5.79,5.7,6.24,6.4,6.52,5.93,5.81,5.39,5.04,5.6,5.76,5.99,5.72,6.31,7.07,7.58,7.36,7.26,6.98,6.91,6.51,6.33,6.46,5.87,5.71,4.68,3.78,3.07,3.37,3.67,4.06,4.44,3.81,4.21,4.42,3.98,3.9,3.93,3.2,3.06,2.32,1.61,1.62,1.25,0.46,0.52,-0.2,-0.32,-0.69,-0.77,-0.45,-0.18,0.06,-0.36,-0.24,-0.26,-0.35,-0.04,0.04,-0.05,-0.21,-0.42,-0.12,0.12,-0.16,-0.42,-0.03,-0.31,-0.42,-0.39,-0.79,-0.84,-0.84,-0.85,-0.85,-0.59,-0.53,-0.36,0,0.46,0.25,0.2,0.04,0.34,0.49,0.4,0.17,0.41,0.44,0.57,0.31,0.1,-0.01,-0.52,-0.82,-0.48,0.14,0.09,0.02,0.27,-0.08,-0.26,-0.57,-0.65,-0.62,-0.91,-1.47,-1.54,-1.01,-0.27,-0.39,-0.21,-0.32,-0.05,-0.06,0.24,0.4,0.6,0.15,0.71,0.44,0.6,0.78,0.72,0.85],[0.16,-0.18,-0.54,-0.36,-0.31,-0.37,-0.51,-0.74,-0.92,-1.33,-0.53,-0.76,-0.82,-0.7,-1.1,-1.03,-1.37,-1.15,-0.81,-1.03,-1.04,-0.91,-1,-1.14,-1.08,-0.98,-0.67,-0.64,-0.75,-0.18,-0.23,-0.45,-0.03,-0.08,-0.42,-0.57,-0.47,-0.27,-0.22,-0.35,-0.52,-0.33,-0.59,-0.86,-0.44,-0.8,-0.71,-1.06,-0.8,-0.71,-0.78,-0.62,-0.57,-0.84,-1.01,-0.57,-0.68,-0.98,-0.85,-0.81,0.3,0.13,-0.14,0.06,-0.13,0.33,-0.21,-0.58,-0.67,-0.98,-1.05,-0.61,-0.56,-0.44,0.01,0.32,0.96,0.82,0.31,1.23,1.85,2.01,1.35,1.19,0.92,1.62,2.33,2.64,2.55,3.41,3.35,3.84,4.35,5.33,6.1,7.02,7.55,7.65,8.03,8.48,8.81,9.23,9.66,9.88,10.28,11.14,11.23,10.76,11.11,10.93,10.92,10.28,10.66,10.28,10.57,10.76,11,11.01,11.15,11.45,11.51,11.79,11.6,12.01,12.19,12.13,12.14,11.79,11.34,10.9,10.88,10.17,10.25,9.85,9.48,8.64,8.39,7.66,7.43,6.7,6.33,5.57,4.87,4.76,4.08,3.92,3.55,2.94,2.34,2.02,2.02,2.08,1.63,1.21,1.28,0.91,1.3,0.71,1.13,0.74,0.73,0.53,0.65,0.53,0.72,0.69,0.61,0.23,0.13,0.39,0.22,-0.01,-0.06,0.02,0.25,0.34,0.62,0.76,0.8,0.72,0.8,1.07,0.75,0.96,0.65,0.7,0.66,0.77,0.27,0.39,0.23,0.2,0.35,0.17,-0.1,0.38,-0.2,0.07,0.12,-0.22,-0.38,-0.03,-0.42,-0.68,-0.77,-0.69,-0.45,-0.57,-0.44,-0.32,-0.24,0.06,-0.09,-0.04,0.03,-0.03,0,-0.07,0.1,0.28,0.02,0.31,0.11,-0.25,0.06,0.07,-0.27,0.14,0.2,-0.25,-0.16,-0.25,-0.24,-0.02,-0.25,-0.04,-0.07,-0.45,-0.28,0.06,-0.02,-0.24,-0.32,0,-0.53,-0.58,-0.31,-0.46,-0.21,-0.45,-0.51,-0.37,-0.59,-0.09,-0.46,-0.19,-0.09,-0.08,0.04,0.29,0.12,0.37,-0.08,-1.01,0.64,1.21,0.89,0.75,0.26,0.1,0.49,0.21,0,-0.05,0.33,0.43,0.32,0.05,0.45,0.27,0.21,0.11,0.37,0.16,0.09,0.24,0.08,0.07,0.38,-0.01,0.22,0.04,0.24,-0.05,-0.12,0.04,0.15,0.17,-0.21,0.18],[-0.3,-0.59,-0.19,-0.53,-0.54,-0.3,-0.32,-0.13,0,0.55,1.23,0.84,0.48,0.01,-0.01,-0.21,0.09,-0.18,0.07,-0.29,-0.15,-0.31,-0.46,-0.52,-0.68,-0.88,-0.58,-0.83,-1.07,-1.01,-1.01,-1.47,-1.64,-1.21,-0.97,-1.14,-0.77,-0.81,-0.24,-0.11,-0.74,-0.89,-0.71,-0.81,-0.78,-0.62,-0.47,-0.32,-0.39,-0.27,-0.68,-0.53,-0.78,-1.04,-0.93,-0.66,-0.86,-0.78,-1.17,-0.77,-0.77,-1.03,-1.12,-0.3,0.27,0.66,0.77,0.97,1.24,1.56,1.22,0.83,0.45,0.91,0.98,0.69,1.1,1.26,1.54,1.5,1.4,1.71,1.81,2.37,2.3,2.48,1.86,2.45,3.15,4.16,5.41,6.59,7.02,8.18,8.4,10.05,11.8,14.36,14.83,15.27,15.68,16.54,16.93,16.99,16.75,17.34,16.95,17.13,16.86,16.67,16.47,16.21,16.26,16.68,17.04,17.96,18.2,18.48,18.97,19.75,20.5,20.73,20.79,20.88,21.42,21.59,21.98,22.25,22.58,23.57,24.14,24.9,24.9,25.56,25.66,24.59,22.45,21.97,22.15,21.34,20.7,20.11,20.05,19.53,19.35,19.06,19.17,19.08,18.89,18.98,19.12,19.3,19.47,19.6,19.64,19.65,19.44,18.82,19.18,18.89,19.33,19.48,19.05,19.46,19.4,19.27,18.67,18,17.58,17.2,16.91,16.44,15.91,15.14,14.24,13.79,13.27,12.84,12.98,12.67,12.44,12.1,11.76,12.13,12.04,12.2,12.27,12.2,12.03,11.88,12.09,12.12,12.64,13.04,13.13,12.54,11.68,11.21,11.12,10.84,10.75,10.42,10.08,9.86,9.83,10.06,9.48,8.88,9.03,8.36,7.94,7.25,6.52,6.01,5.38,5.12,4.94,4.55,3.68,3.41,2.97,2.47,1.43,1.12,1.12,1.52,1.43,0.9,1.23,0.95,0.56,0.64,1.52,1.31,0.62,0.18,0.01,-0.16,-0.05,-0.3,-0.06,-0.13,-0.13,-0.38,-0.02,0.08,-0.14,-0.2,0.07,0.01,0.08,-0.11,-0.4,-0.37,-0.39,0.03,-0.21,-0.04,0.16,-0.1,-0.3,0.19,0.06,0.26,-0.09,0.23,0.3,0.26,0.1,-0.05,0.25,-0.04,0.01,0.17,0.26,-0.02,0.11,0.2,-0.14,-0.04,-0.04,-0.06,0.03,0.02,-0.05,-0.03,0.22,-0.01,0.25,0.31,-0.17,0.2,0.27,0.03,0.1,-0.08,0.31,-0.05,0.25,0.33],[0,-0.12,0.1,-0.01,-0.15,-0.06,0.19,0.29,0.23,0.02,-0.08,0.17,-0.13,-0.2,0,-0.69,-0.66,-0.81,-0.98,-1.03,-0.95,-1.1,-1.08,-0.71,-0.63,-0.85,-0.9,-1.02,-0.81,-0.58,-0.93,-0.67,-0.8,-0.59,-0.5,-0.38,-0.31,-0.32,-0.24,-0.52,-1.22,-1.11,-1.53,-1.04,-0.37,-0.53,-0.68,-1.22,-1.19,-0.95,-0.76,-0.83,-0.72,-0.41,-0.56,-0.71,-0.48,-0.61,-0.75,-0.94,-1.44,-1.19,-1.41,-1.66,-1.81,-1.89,-1.67,-1.37,-0.52,-0.32,-0.37,0.02,-0.31,-0.31,0.34,1,1.31,1.32,0.92,1.19,1.12,1.11,1.13,1.38,1.39,1.54,2.14,2.23,2.67,2.86,2.81,2.46,2.79,3.48,3.66,4.83,5.61,6.44,6.79,7.67,8.39,9.1,10.35,11.09,12.13,12.96,13.81,14.81,15.98,17.59,18.6,19.38,20.73,21.97,23.01,23.9,24.91,25.88,26.2,26.64,27.24,27.89,28.41,27.87,27.66,27.34,26.33,24.94,24.09,23.55,22.7,21.85,21.7,21.43,20.97,20.96,21.38,21.81,21.93,22.27,22.81,23.02,22.64,22.63,22.63,22.87,22.54,22.57,22.18,21.43,21,20.45,19.57,19.01,18.41,17.16,16.32,15.34,15.18,14.79,14.39,14.35,13.94,13.39,13.1,12.51,12.42,11.9,11.57,11.29,11.1,10.71,10.56,10.17,9.82,9.5,8.96,8.69,8.41,8.47,8.16,7.56,7.42,6.79,6.77,6.33,5.87,6,5.86,6,5.79,5.98,5.84,5.61,5.67,5.67,5.94,6.05,6.32,6.11,6.2,6.81,6.54,6.01,5.03,4.79,4.2,4.02,4.07,3.81,3.86,3.58,3.46,3.47,3.54,3.53,3.58,2.65,2.05,1.56,1.59,1.46,1.33,1.26,1.52,1.16,1.16,0.63,0.79,0.36,-0.31,-0.64,-0.8,-0.79,-0.8,-0.83,-1.07,-0.75,-0.52,0.03,0.2,0.27,0.08,0.54,0.03,0.02,0.27,0.28,0.07,-0.12,-0.09,0.15,0.29,-0.01,0.06,-0.48,-0.94,-0.4,-0.06,-0.23,-0.31,0.15,0.1,-0.12,0.01,-0.04,0.48,-0.04,0.22,0.28,-0.04,0.09,-0.16,-0.78,-1.22,-1.12,-1.03,-0.86,-0.84,-0.96,-1.22,-0.98,-0.52,-0.2,0.11,0.12,0.31,0.15,0.26,0.39,0.09,0.2,0.15,0.46,0.48,0.47,0.41,0.32,0.57,0.48],[-0.16,-0.15,0.25,0.37,-0.13,0.06,0.11,-0.03,0.05,0.19,0.45,0.25,-0.12,-0.08,0.04,-0.11,-0.32,-0.23,0.07,-0.43,0.02,-0.41,-0.7,-1.2,-0.9,-0.87,-1.03,-0.75,-0.64,-0.27,-0.36,-0.4,-0.47,-0.36,-0.56,-0.17,-0.39,0.06,0.08,-0.39,-0.44,-0.75,-0.95,-0.89,-0.51,-0.84,-0.72,-0.37,-0.7,-0.63,-0.09,-0.11,0.11,0.58,0.25,0.12,-0.44,-0.72,-0.67,-0.58,-0.6,-0.27,0.27,0.48,0.48,0.18,0.28,-0.15,0.24,-0.04,-0.03,-0.02,0.82,0.98,1.4,0.93,1.85,1.57,1.46,1.89,2.36,2.27,2.48,2.66,2.45,2.97,3.32,3.4,4.22,5.12,5.83,6.11,5.86,6.44,6.79,6.82,7.59,7.74,8.24,8.44,8.42,9.13,9.28,9.26,9.57,9.31,9.63,9.54,9.19,9.44,9.25,9.53,9.64,9.61,10.84,11.5,12.76,13.74,14.31,15.35,16.6,17.4,18.03,19.52,20.51,22.5,24.26,26.66,27.69,28.76,28.83,29.04,28.89,28.15,27.59,26.55,25.97,25.44,24.29,23.04,22.02,20.97,20.63,19.96,19.5,18.1,16.58,15.93,15.84,15.61,14.95,14.8,14.54,14.63,14.5,14.53,14.39,14.76,14.84,14.83,14.7,15.57,15.66,16.35,16.6,17.52,18.72,19.49,19.99,20.36,20.9,21.41,21.83,22.24,22.42,21.78,22.03,21.96,21.85,21.96,22.59,23.01,23.1,23.16,22.48,20.11,18.25,16.89,15.99,14.97,13.77,12.66,11.08,10.12,8.86,7.86,7.3,6.71,5.85,4.53,4.11,3.98,3.3,2.74,2.24,1.97,1.8,1.58,1.34,0.86,0.8,0.53,0.6,-0.08,-0.46,-0.38,-0.55,0.05,0.45,0.93,0,-0.09,-0.49,-0.19,0.14,-0.13,0.3,0.27,0.33,0,-0.1,0.1,0.05,-0.02,-0.22,-0.19,-0.15,0.04,0.24,0.19,-0.12,-0.14,-0.07,-0.05,-0.12,0.24,0.22,-0.03,-0.39,-0.39,0.12,-0.23,0.07,-0.14,-0.25,-0.14,-0.28,0.03,0.09,0.01,-0.18,-0.27,-0.26,-0.23,-0.15,-0.27,0.02,0.17,0.2,0.09,0.06,-0.09,-0.43,-0.56,-0.65,0.1,-0.03,-0.06,-0.15,0.13,-0.14,0.1,0.25,-0.09,0.18,0.12,0.24,0.32,-0.02,0.4,0.28,-0.05,0.04,-0.06,0.42,0.1,0.02,-0.1,-0.16,-0.06],[0.19,0.06,-0.27,-0.11,0.09,0.03,-0.1,-0.03,0.05,0.1,0.74,0.49,0.53,0.75,0.72,0.23,-0.57,-1.05,-1.27,-1.61,-1.38,-1.25,-1.17,-0.04,0.45,0.96,0.58,0.4,0.01,0,0.39,0.28,0.57,0.39,0.7,0.24,0.72,0.42,0.58,-0.02,-0.55,-0.88,-0.74,-0.66,-0.92,-0.66,-0.96,-0.98,-0.86,-0.57,-1.04,-1.03,-0.99,-0.71,-1.14,-1.05,-1.12,-1,-0.92,-0.24,0.2,0.32,0.22,-0.32,-0.64,-0.47,0.1,-0.22,-0.15,0.07,0,-0.46,0.04,-0.07,0.3,0.34,0.41,0.93,1.45,1.89,2.21,2.44,2.77,3.39,4.12,4.09,4.98,6.6,7.5,8.44,9.62,10.89,12.08,13.21,15.08,16.38,18.65,22.02,24.07,24.41,24.24,24.42,25.56,26.37,27.11,27.76,28.54,29.34,29.95,30.77,30.36,29.5,27.9,26.78,25.72,24.9,23.56,22.59,21.38,20.5,18.9,17.71,17.15,16.07,15.7,14.87,14.17,13.39,12.94,11.94,11.91,11.47,10.71,10.69,10.17,10.31,10.01,9.62,9.53,9.15,8.79,8.38,8.06,7.73,7.25,6.86,7.32,7.09,7.02,6.71,6.71,6.61,5.86,5.5,5.18,5.12,4.34,4.37,4.06,4.02,3.94,4.07,3.9,4.07,4.32,4.7,4.78,5.29,5.39,5.87,6.15,6.26,6.6,6.96,6.92,7.3,7.41,7.34,7.48,7.31,7.3,7.14,7.13,6.87,7.02,6.7,6.79,6.59,7.09,7.09,7.16,7.35,7.28,7.74,7.92,8.03,7.82,7.45,6.61,6.54,5.89,5.11,4.58,3.93,3.47,3.27,2.77,2.55,2.41,2.36,2.29,2.15,2,2.36,2.42,1.58,1.29,1.17,0.33,0.37,0.43,-0.06,0.32,-0.01,0.44,0.06,-0.01,0,-0.39,-0.4,-0.46,-0.59,-0.54,-0.76,-0.6,-0.49,-0.02,0.66,0.45,-0.04,0.16,-0.32,-0.33,-0.07,-0.26,0.03,-0.37,-0.11,-0.28,-0.32,-0.73,-0.66,-0.33,-0.3,-0.4,-0.18,-0.65,-0.62,-0.64,-0.38,-0.48,-0.48,-0.16,0.04,0.12,-0.15,-0.26,-0.29,-0.27,-0.19,-0.5,-1.11,-0.97,-0.53,0,-0.34,-0.05,-0.46,-0.07,-0.01,0.01,0.06,-0.04,-0.05,-0.35,-0.36,-0.28,-0.08,0.15,-0.14,-0.23,-0.15,0.12,0.12,0.09,-0.06,-0.08,-0.04,0.23,-0.1],[-0.32,-0.83,-0.69,-0.8,-0.76,-0.16,0.15,0.24,0.1,0.11,-0.14,-0.17,-0.48,-0.08,0.26,0.06,0.57,0.13,0.57,0.02,0.4,-0.1,-0.28,-0.21,-0.05,-0.51,-0.69,-0.76,-0.76,-0.68,-0.25,-0.07,-0.01,-0.31,-0.41,-0.5,-0.47,-0.64,-0.04,0.46,-0.18,-0.78,-0.56,0.24,0,0.07,-0.66,-0.38,-0.92,-1.02,-0.93,-1.29,-1.63,-1.21,-0.81,-0.45,-0.32,-0.31,-0.23,-0.09,-0.14,0.39,0.32,0.3,0.35,0.1,-0.59,-0.49,0.01,-0.05,0.54,0.5,1.09,1.56,0.95,0.66,0.53,1.22,1.56,1.49,1.98,2.4,2.86,3.55,3.98,4.85,6.49,7.68,8.44,9.39,10.73,11.99,12.94,13.3,14.51,14.74,14.48,14.39,13.99,13.38,13.43,12.96,12.91,12.39,12.12,12.24,12.64,13.37,14,15.51,17.9,19.76,21.94,24.54,26.91,29.04,30.61,31.51,31.99,31.98,30.87,28.7,27.45,25.81,23.88,22.38,21.46,20.58,19.58,18.76,17.86,16.8,15.79,14.72,14.05,13.59,13.09,12.85,12.28,11.65,11.88,11.48,11.86,11.48,11.91,11.43,11.64,11.48,11.68,11.62,11.43,10.78,10.44,10.27,9.97,9.51,8.71,8.83,8.98,8.86,9.12,8.3,8.04,7.51,7.13,7.18,7.41,7.55,8.02,8.69,8.47,8.54,8.14,8.06,7.89,7.55,7.98,7.84,7.99,8.25,8.45,8.81,9.21,9.71,10.54,9.93,9.86,9.85,9.63,9.36,8.73,8.76,8.33,8.16,7.8,8.18,8.53,8.56,9.11,9.23,9.21,8.95,8.56,8.32,7.9,7.76,7.4,6.78,6.21,6.1,6.03,5.56,5.73,5.22,5.08,4.97,4.11,3.35,2.85,2.36,2.53,2.34,2.13,1.71,1.74,1.62,1.53,0.7,-0.11,0.08,0.22,-0.09,-0.2,0.15,-0.01,0.18,0.02,0.24,0.3,0.14,-0.06,0,0.05,0.04,0.24,-0.19,-0.1,-0.13,0.13,-0.1,-0.17,-0.01,0.69,0.75,0.44,0.1,0.01,0.19,-0.3,-0.34,0.12,0.09,-0.08,-0.23,-0.05,0,0,-0.14,-0.39,-0.31,-0.17,-0.49,-0.49,-0.52,-0.29,-0.38,0,0.05,-0.03,0.01,-0.33,-0.31,-0.28,0,-0.17,0.21,0.33,-0.1,0.34,0.38,0.06,0.38,-0.02,0.13,-0.12,0.08,-0.15,0.03,0.03,-0.54],[-0.16,-0.26,-0.36,-0.49,0,-0.15,-0.57,-0.57,-0.85,-0.6,-0.05,-0.25,-0.8,-0.48,-0.11,-0.62,-0.48,-1.03,-1.56,-0.91,-1.06,-1.1,-0.66,-0.16,0.19,0.03,-0.02,-0.4,-0.58,-0.64,-0.48,-0.75,-0.55,-0.47,-0.6,-0.57,-0.95,-0.45,-0.85,-0.7,-0.47,-0.74,-0.59,-0.77,-0.36,0.14,0.02,-0.46,-0.95,-1.28,-1.15,-0.77,-0.72,-0.75,-0.79,-1.05,-0.36,-0.28,-0.15,-0.33,-0.78,-0.71,-0.64,-1.21,-1.27,-1.08,-1.48,-1,-1.39,-1.17,-0.83,-0.91,-0.91,-0.89,-1.07,-0.6,0.57,0.65,0.83,1.21,1.1,1.21,1.73,1.33,1.64,1.48,1.52,1.01,1.54,1.98,2.15,2.47,2.53,3,3.06,3.17,3.82,3.71,4.35,4.37,4.38,4.07,3.81,3.94,4.23,3.8,3.84,3.65,4.03,3.77,3.74,3.31,3.81,4.21,4.54,5.29,5.56,6.12,6.6,7.23,7.35,7.9,8.31,8.88,9.62,9.94,10.23,11.09,11.34,12.22,13.27,14.05,14.67,13.66,13.46,13.58,12.72,12,11.13,9.8,9.56,9.28,8.87,8.6,8.62,7.99,7.58,7.63,7.04,6.89,6.74,7.02,6.77,6.51,6.22,6.29,6.05,6.34,6.37,6.41,6.08,6.18,6.26,6.07,6.01,6.27,5.99,6.12,6.51,6.09,6.54,6.28,6.61,6.83,6.94,6.66,7.06,6.77,6.69,6.99,6.96,7.19,6.95,7.03,7.55,7.48,7.15,7.05,6.64,6.32,6.4,5.85,5.65,4.96,4.72,4.81,4.39,4.08,4.06,3.96,3.63,3.55,3.1,3.03,2.75,2.53,2.37,3.21,3.15,2.93,3.03,2.29,2.38,1.94,1.83,1.81,1.59,1.2,1.13,1.18,1.12,1.03,0.44,0.47,0.35,0.47,1.05,1.41,0.8,0.94,0.52,0.42,0,0.4,0.21,0.42,0.39,-0.07,0.49,0.35,0.38,0.03,0.54,0.35,0.56,0.09,0.26,0.2,0.52,0.11,0.22,-0.2,0.05,-0.23,-0.29,-0.16,-0.32,-0.18,-0.23,-0.3,-0.5,-0.35,-0.45,-0.17,-0.2,-0.44,-0.11,-0.34,-0.41,-0.21,-0.03,-0.3,-0.31,-0.03,-0.29,-0.02,-0.4,-0.3,0.16,0.05,-0.08,0.09,0.18,0.24,0.16,-0.15,-0.26,0,-0.13,-0.33,-0.51,-0.56,-0.71,-0.29,-0.04,0.28,-0.01,-0.67,-0.86,-1.66],[0.62,0.64,0.59,0.3,0.01,0.05,-0.63,0.07,0.36,0.78,0.48,0.55,0.01,0.27,0.09,0.13,0.12,-0.03,-0.05,-0.1,-0.33,-0.33,-0.72,-0.61,-0.41,-0.91,-1.01,-0.61,-1.15,-0.94,-0.74,-0.68,-0.24,-0.07,0.13,0.17,0.02,0.33,-0.14,-0.52,-0.55,-0.55,-0.73,-0.96,-0.64,-0.51,-0.54,-0.46,-0.49,-0.78,-0.58,-0.31,-0.27,-0.07,0.01,-0.7,-0.54,-0.5,-0.61,-0.03,0.16,-0.14,-0.24,-0.41,0.01,0.43,0.53,0.73,0.38,0.23,0.13,0.47,1.18,0.8,0.62,0.41,0.42,0.48,0.53,0.34,0.44,1.26,1.78,2.08,2.29,3.17,3.6,4.2,4.89,6,8.07,8.78,10.04,11.46,13.42,15.77,17.71,20.1,22.58,25.18,27.64,29.23,30.47,31.61,32.93,33.42,33.41,33.87,34.38,33.75,33.49,32.66,32.15,31.82,31.04,30.9,29.72,28.05,26.59,25.09,23.31,22.07,20.84,20.16,19.16,18.26,17.31,16.71,15.57,15.27,14.64,13.61,13.27,13.46,13.35,13.85,13.38,13.3,13.76,13.64,14.69,15.35,16.28,17.4,18.4,19.13,19.41,19.18,18.37,16.39,14.85,13.66,12.28,11.74,11.06,11.02,10.46,10.36,9.77,9.54,9.33,9.49,9.65,9.19,9.36,9.54,9.55,9.54,9.79,10.25,11.1,11.88,13.4,13.09,12.71,12.92,13.07,13.28,14.2,15.04,15.82,16.12,16.94,17.95,18.79,21.68,22.19,22.98,22.83,22.47,21.8,21.43,20.3,17.69,15.48,13.8,12.19,10.91,10.08,9.91,8.69,7.88,6.81,6.11,5.48,5.16,5.19,4.55,4.2,4.17,3.34,3.1,2.85,2.81,2.74,2.32,1.72,1.5,1.59,1.16,0.78,-0.08,-0.11,0.09,-0.01,0.46,0.59,0.25,0.13,-0.15,-0.06,0.11,-0.41,0.06,-0.29,0.09,-0.23,-0.18,0.16,0.08,-0.04,0.35,0.26,-0.02,-0.22,-0.11,0,0.04,-0.26,-0.44,-0.44,0.03,-0.04,-0.06,0.02,-0.31,-0.02,0.03,-0.06,-0.46,0.04,-0.26,-0.19,-0.36,-0.03,-0.05,0.04,-0.45,-0.16,-0.34,-0.13,-0.1,-0.12,-0.36,-0.34,-0.08,-0.03,-0.08,-0.42,-0.03,-0.09,-0.1,0.23,0.22,0.26,0.2,-0.25,-0.07,-0.28,0.13,0.2,0.22,0.23,0.27,-0.1,-0.21,-0.09,-0.24,-0.17,-0.62],[0.32,0.31,0.28,0.42,-0.24,-0.48,-0.73,-0.64,0.04,0.02,-0.04,-0.8,-0.43,-0.05,-0.1,0.49,0.97,0.89,0.13,-0.31,0.23,0.32,0.36,-0.22,-0.48,-0.42,-0.54,-0.63,-0.39,-0.53,-0.65,-0.33,-0.63,-0.46,-0.67,-0.68,-0.68,-0.29,-0.4,-0.2,-0.41,-0.17,-0.22,-0.51,-0.47,-0.09,-0.14,-0.06,-0.18,-0.15,-0.54,-0.68,-0.23,-0.29,0.2,-0.35,-0.39,-0.13,-0.2,-0.13,0.13,-0.41,-0.83,-1.03,-0.83,-0.42,-0.64,-0.63,-0.34,-0.23,0.57,1.63,1.59,1.57,1.72,1.95,1.83,2.77,2.35,2.42,2.31,1.51,1.61,1.7,1.74,2.19,3.37,2.96,3,3.33,3.9,4.87,5.66,6.63,7.81,9.37,11.38,13.34,15.67,18.44,20.73,24.02,27.5,31.49,34.93,38.37,44.65,49.9,52.83,55.16,55.79,55.03,53.17,52.2,51.36,49.48,46.23,44.1,40.92,37.39,34.43,31.48,29.29,27.49,24.77,22.23,20.15,19.15,17.9,16.9,16.2,15.66,14.81,14.3,14.26,13.8,12.93,12.67,12.29,12.29,11.99,12.16,11.89,11.89,11.42,11.17,11.41,11.13,10.68,10.06,9.03,8.83,8.26,7.88,7.36,7.06,6.46,6.45,6.38,6.5,6.22,6.43,6.34,6.53,5.95,5.6,5.54,5.28,5.08,5.19,4.99,4.97,5.09,4.99,5.85,7.28,7.58,8.13,8.86,8.97,9.06,9.46,9.84,9.76,9.71,10.58,10.55,10.7,10.13,9.67,9.53,8.75,8.27,8.01,8.14,8.28,8.06,7.86,7.97,7.95,7.69,7.31,7.52,7.09,6.73,6.53,6.29,5.81,5.91,5.48,5.6,5.44,5.98,5.74,3.85,2.76,2.28,2.3,1.62,1.54,1.57,1.23,0.96,0.99,1.11,0.49,0.82,0.37,0.3,-0.14,-0.34,-0.32,-0.71,-0.46,-0.37,-0.29,-0.2,0.47,0.7,-0.09,-0.35,-0.81,-0.4,-0.43,-0.06,0.19,0.16,-0.06,-0.03,-0.11,0.15,0.04,0.29,0.15,-0.08,0.29,-0.01,-0.24,0.04,-0.17,-0.02,-0.01,0.15,0.2,0.21,-0.12,0.37,0.14,0,0.26,0.09,0.22,0.15,-0.12,0.29,0,-0.12,0.4,-0.17,0.25,-0.15,0.28,-0.16,0,0.26,0.03,-0.08,0,0.15,-0.19,-0.44,-0.53,-0.5,-0.49,-0.63,-0.56,-0.5,-0.38,-0.58,-0.43],[-0.09,-0.14,-0.24,-0.24,-0.66,0,0.29,0.29,0.6,0.86,1.33,0.53,-0.23,-0.58,-0.29,-0.12,-0.32,-0.7,-0.73,-0.57,-0.83,-0.85,-0.94,-1.03,-0.84,-0.53,-0.32,-0.17,-0.52,-0.45,-0.12,-0.56,-0.14,-0.34,-0.4,-0.27,-0.38,-0.13,-0.04,-0.21,-0.13,-0.18,0,-0.35,-0.61,-0.37,-0.26,0.16,-0.02,0.33,0.84,1.07,1.46,1.89,2.07,1.33,0.57,0.35,0.42,0.72,0.97,0.99,0.68,0.45,0.65,0.57,0.4,0.14,0.73,0.98,1.73,1.5,1.56,1.09,1.85,2.56,2.64,2.69,2.29,2.18,2.3,2.29,2.46,2.76,2.58,2.84,3.18,3.03,3.69,5.16,5.6,6.55,6.71,7.3,7.54,7.58,8.89,10.13,11.54,12.79,13.96,14.88,15.99,16.7,16.56,17.17,17.24,17.47,17.48,17.56,18.07,17.67,18.81,19.77,20.91,21.78,23.55,25.14,25.45,25.88,26.11,27.75,29.86,29.54,27.96,27.85,27.96,27.36,26.23,25.35,24.23,20.62,19.98,19.59,19.08,18.34,18.08,17.2,16.78,16.41,15.31,14.73,14.07,13.94,13.7,12.29,11.71,12.23,11.84,11.13,10.72,9.92,9.66,9.69,9.65,8.63,7.63,6.83,7.13,6.81,7.09,6.83,6.65,6.88,6.94,7.44,7.2,7.33,7.78,8.01,7.44,7.6,7.36,7.3,6.77,7.77,8.29,8.5,8.66,8.88,7.91,8.02,7.39,7.44,6.81,6.7,7.36,7.33,7.32,7.01,6.79,6.33,6.22,6.38,6.44,6.42,6.53,6.6,6.58,6.66,6.82,6.79,6.47,6.3,6.13,6.01,5.55,5.1,4.88,4.46,3.99,3.75,3.05,2.72,2.51,1.97,2.04,1.17,0.85,1.08,0.78,-0.04,0.4,-0.23,0.18,0.09,0.16,0.32,0.32,0.29,0.43,0.09,0,0.01,-0.42,-0.25,-0.39,-0.22,-0.35,-0.2,0.28,0.28,0.12,-0.58,-0.92,-0.82,-0.38,-0.01,-0.11,0.58,0.19,-0.47,-1.02,-1.21,-1.52,-1.51,-1.42,-1.24,-1.33,-0.68,-0.36,-0.02,-0.28,-0.29,-0.21,0.02,0.03,0.08,0.01,-0.03,-0.2,-0.13,-0.28,-0.11,-0.51,-0.63,-0.67,0,0.03,-0.14,-0.38,-0.16,0,-0.33,-0.21,-0.24,-0.52,-0.5,-0.4,-0.13,0.08,-0.88,-1.17,-0.36,-0.31,-0.12,0.29,-0.02,0.21,0.44],[0.11,0.05,0.05,-0.05,-0.03,-0.29,-0.08,-0.54,-0.01,0.01,-0.08,-0.15,-0.35,-0.59,-0.72,-0.95,-1.66,-1.38,-1.62,-0.73,-0.36,-0.22,0.09,0.06,-0.22,-0.19,-0.29,-0.14,0.11,0.05,-0.33,-0.46,-0.24,0.05,0,0.17,-0.25,-0.61,-0.54,-0.71,-0.13,-0.07,0.03,0.51,0.49,0.25,-0.55,-0.68,-0.12,-0.96,-0.95,-0.52,-0.91,-0.62,-0.48,-0.25,-0.73,-1.51,-1.28,-1.86,-1.62,-1.76,-1.64,-1.44,-1.17,-0.98,-0.56,-0.6,-0.16,0.23,1,0.61,0.47,0.38,0.23,0.27,0.04,-0.21,-0.37,-0.42,-0.75,-0.42,0.21,1.11,1.63,1.55,2.05,1.96,2.28,1.8,1.92,2.38,2.4,2.44,2.43,2.98,3.03,3.32,3.15,3.34,3.76,4.79,5.35,6.3,7.59,8.43,8.69,9.34,9.86,10.52,10.99,11.61,12.03,12.87,13.29,13.02,13.42,13.62,13.93,14.36,14.62,15.26,15.37,16.08,16.33,16.46,16.7,16.42,16.3,16.28,16.15,16.49,16.3,16.7,16.57,16.86,16.4,16.81,16.81,16.49,16.16,16.16,16.15,15.4,15.39,15.03,14.38,13.87,13.29,12.54,12.15,11.17,10.37,10.24,9.3,8.43,8.21,7.94,7.54,7.19,6.92,7.25,7.3,7.6,7.64,7.32,7.08,6.35,6.82,6.63,6.35,6.54,6.1,6.3,5.9,6.04,6.25,5.76,5.88,5.58,6.07,5.59,5.42,5.48,5.77,5.57,5.48,5.25,5.67,5.36,5.41,5.42,5.33,5.75,5.78,5.89,5.61,5.67,5.58,5.56,4.89,4.68,4.75,4.54,4.26,3.72,3.34,3.47,2.69,2.14,1.8,1.64,1.12,0.49,0.92,0.76,1.36,1.29,1.4,1.22,0.96,0.3,0.21,0.17,0.08,0.08,-0.04,-0.39,-0.21,-0.48,-0.27,-0.61,-0.52,-0.19,-0.29,-0.01,-0.25,-0.1,-0.46,-0.4,-0.06,0.14,-0.09,-0.2,-0.29,-0.32,-0.33,-0.25,-0.11,-0.23,0.05,0,0.16,0.11,-0.13,0.15,0.2,-0.03,-0.14,-0.08,0.17,0.08,0.34,-0.06,0.21,-0.11,0.23,0.14,0.22,-0.12,-0.06,0.06,0.18,0.14,-0.17,0.07,-0.03,0.01,-0.3,0.1,-0.37,-0.09,-0.3,-0.3,-0.68,-0.47,-0.74,-0.95,-1.33,-0.79,-0.73,-0.54,-0.53,-0.92,-0.68,-0.87,-1.31,-1.02,-1.1,-1.62],[0.12,-0.12,-0.12,-0.45,-0.24,-0.48,-0.57,-0.19,-0.07,-0.59,-0.21,-0.67,-0.94,-0.71,-1.04,-1.31,-1.31,-1.23,-1.53,-1.3,-1.8,-1.52,-1.84,-1.81,-1.2,-1.19,-1.37,-1.21,-1.22,-0.7,-0.55,-0.37,-0.69,-0.21,-0.18,-0.04,0.22,-0.02,0.34,0.13,-0.03,0.16,-0.16,0.07,-0.14,0.06,-0.23,-0.18,-0.47,-0.04,-0.36,0.14,0.14,-0.3,0.15,0.07,0.1,0.29,0.01,-0.06,-0.17,-0.31,0.01,0.12,-0.31,-0.19,1.48,2.73,2.53,2.76,2.76,2.52,2.3,2.5,2.53,2.57,2.29,2.15,2.45,2.45,2.48,2.48,2.59,2.55,2.02,1.93,2.22,3.19,3.78,4.33,5.11,6.05,6.94,7.75,8.28,9.54,11.21,13.49,15,16.74,18.44,20.54,21.96,23.12,24.33,24.47,23.93,23.76,22.87,22.41,22.24,21.95,21.96,21.88,22.38,22.72,24.39,25.3,24.97,24.19,22.95,22.17,21.65,21.46,21.26,20.97,20.6,19.93,19.05,18.82,18.03,18.52,18.95,19.71,19.2,19.36,19.38,19.14,19.56,20.32,20.4,18.32,17.71,16.9,16.57,16.62,15.54,15,14.25,13.53,13.19,12.7,12.29,12.12,11.71,11.25,10.72,10.98,10.5,10.91,11.15,11.55,12,11.96,11.27,10.4,10.02,9.72,9.6,9.03,8.55,8.41,8.1,8.24,7.71,7.34,7.41,7.85,8.23,8.63,9.14,9.09,9.56,10.15,10.99,11.47,11.73,12.16,12.99,13.55,14.77,15.64,16.32,17.79,19.63,20.88,22.71,22.87,22.38,21.68,20.85,18.53,16.84,14.06,10.18,9.37,8.28,7.58,6.57,5.8,4.82,3.86,3.19,3.13,2.93,3.24,2.66,2.52,1.97,1.74,1.39,1.53,1.52,1.51,0.89,0.58,0.44,1.37,0.68,0.51,-0.1,0.25,0.29,-0.08,0.17,0.08,0.21,-0.17,0.26,-0.1,0.23,0.36,0.23,0.2,-0.02,-0.72,-0.24,-0.25,-0.28,-0.62,-0.42,-0.65,-0.93,-0.86,-0.18,0.21,-0.26,0.03,-0.03,-0.57,-0.58,-0.45,-0.48,-0.08,-0.17,0.18,-0.08,-0.2,0.27,0.18,-0.13,0.34,0.1,0.4,0.03,-0.04,0.3,-0.22,-0.08,-0.26,-0.38,-0.08,-0.29,-0.09,-0.05,-0.19,0.45,0.62,0.09,-0.39,0.12,0.03,-0.28,0.02,-0.01,0.13,0.09,-0.01,-0.03,-0.23]]&quot; class=&quot;kp-pulsar-wc&quot; data-background=&quot;#efeeeb&quot; data-foreground=&quot;#666&quot; data-row-height=&quot;0.2&quot; data-size=&quot;200&quot; data-baseline=&quot;0&quot; data-scale=&quot;4&quot; data-margin=&quot;0.4&quot; data-label-left=&quot;CP 1919&quot; data-label-right=&quot;318 MHz&quot; data-caption-html=&quot;&amp;lt;strong&gt;Fig #1:&amp;lt;/strong&gt; Extract from &amp;lt;em&gt;Radio Observations of the Pulse Profiles and Dispersion Measures of Twelve Pulsars&amp;lt;/em&gt; by Harold D. Carft, Jr.&quot;/&gt;&lt;/a&gt;&lt;a href=&quot;#example-2-my-daily-steps-for-2023&quot;&gt;&lt;p&gt;Example 2&lt;/p&gt;&lt;stacked-sparklines class=&quot;yearly-steps__month&quot; data-test=&quot;true&quot; data-caption=&quot;October&quot; data-background=&quot;var(--primary)&quot; data-foreground=&quot;var(--white)&quot; data-size=&quot;200&quot; data-margin=&quot;0.2&quot; data-scale=&quot;1.5&quot; data-row-height=&quot;0.1&quot; data-baseline=&quot;0&quot;/&gt;&lt;/a&gt;&lt;/div&gt;&lt;hr/&gt;&lt;h2 id=&quot;example-1-using-all-the-options-to-generate-a-pulsar-chart&quot;&gt;Example 1: Using all the options to generate a pulsar chart&lt;/h2&gt;&lt;stacked-sparklines data-data=&quot;[[-0.81,-0.91,-1.09,-1,-0.59,-0.82,-0.43,-0.68,-0.71,-0.27,-0.28,-0.05,-0.4,-0.06,-0.06,-0.14,0,-0.01,0.24,0.25,-0.04,0.33,0.24,0.15,-0.01,0.15,-0.06,0.19,0.34,0.36,-0.15,0.19,0.02,-0.18,-0.35,-0.47,-0.71,-0.82,-0.45,-0.59,-0.68,-1.16,-1.15,-0.62,-0.25,-0.31,-0.01,0.35,0.39,0.06,0.16,-0.3,-0.47,-0.44,-0.13,0.22,0.9,1.15,0.82,0.1,0.1,0.28,-0.05,0.43,0.36,0.61,0.24,-0.19,-0.95,-0.84,-1.22,-1.84,-1.01,-0.25,0.73,1.28,0.92,1.05,0.49,0.41,0.06,-0.02,0.55,0.71,1.04,1.68,1.67,2.07,2.53,2.49,2.7,3.33,3.18,3.79,3.34,3.45,2.81,2.67,2.27,1.75,1.76,1.16,1.14,1,0.64,0.32,0.32,0.37,0.17,0.29,0.77,1.14,1.58,2.05,2.33,3.02,3.48,3.84,4.41,4.91,5.44,6.34,6.59,7.2,8.12,8.26,9.25,10.02,10.48,11.06,12.45,13.32,13.67,14.18,14.47,14.6,14.96,15.04,15.16,14.76,15.4,14.88,14.75,14.2,14.36,13.34,12.35,11.72,11.04,10.82,10.25,9.63,8.98,8.92,8.46,8.44,8.96,8.96,9.26,9.49,9.34,9.47,8.98,9.07,9.01,9.39,10.2,10.7,11.48,11.73,11.71,11.73,11.81,11.83,12.09,12.14,12.51,13.05,12.8,13.52,13.15,13.43,13.76,13.58,13.77,13.61,12.36,10.93,10.19,9.18,9.2,8.57,8.74,8.56,7.84,7.34,7.09,6.04,5.78,5.02,4.87,4.43,3.73,3.41,3.28,2.67,2.47,1.96,1.67,1.19,0.89,0.97,0.64,0.3,-0.17,-0.46,-0.67,-0.44,-0.33,-0.73,-0.13,-0.29,-0.27,-0.36,0.01,0.24,0.31,-0.13,-0.07,0.01,0.31,0.32,0.02,-0.04,-0.04,-0.05,-0.21,0.17,0.11,-0.36,-0.15,-0.24,-0.25,-0.08,0,-0.05,-0.33,-0.48,-0.39,-0.46,-0.55,-0.13,-0.29,-0.09,-0.42,-0.48,-0.2,-0.47,-0.25,-0.46,-0.42,-0.61,-0.25,-0.66,-0.37,-0.34,-0.07,0.47,0.34,0.03,0.02,-0.56,-0.45,-0.26,-0.02,0.07,0.33,0.29,0.15,-0.1,0.05,-0.04,-0.05,0.31,0.14,-0.14,-0.13,0.06,-0.18,-0.36,-0.08,0.19,-0.19,-0.18,-0.2,-0.26,-0.52,-0.44,-0.58,-0.54],[-0.61,-0.4,-0.42,-0.38,-0.55,-0.51,-0.71,-0.79,-0.52,-0.4,-0.51,-0.32,-0.63,-0.46,-0.37,-0.33,-0.34,-0.65,-0.34,-0.75,-0.73,-0.75,-0.78,-0.39,-0.54,-0.33,-0.73,-0.49,-0.74,-0.62,-0.75,-0.63,-0.55,-0.6,-0.63,-0.64,-0.62,-0.31,-0.63,-0.53,-0.06,-0.48,-0.48,-0.16,-0.26,-0.07,-0.04,-0.03,-0.3,-0.42,-0.44,-0.44,-0.02,-0.06,-0.49,-0.31,0.05,-0.12,-0.03,0.11,0.29,-0.03,0.21,0.5,0.88,1.04,1.07,1.44,1.26,1.45,1.63,1.29,1.43,1.08,0.82,0.69,0.7,1.28,1.16,1.42,2.03,2.11,2.75,2.71,2.53,2.91,2.66,2.89,3.75,4.24,5.19,6.05,6.57,8.83,10.26,10.74,11.68,12.43,13.36,13.91,14.31,14.74,14.78,15.01,15.61,15.58,16.24,16.23,16.03,16.3,16.06,16.46,15.99,16.01,16.36,16.22,15.7,15.64,15.84,15.2,14.95,15.06,14.84,14.1,14.04,14.15,13.58,13.03,12.35,11.77,11.46,10.62,10.81,11.22,11.61,11.64,11.24,11.69,11.24,10.53,10.61,9.95,9.7,9.03,8.24,8.22,7.25,7.09,6.71,6.28,5.72,5.09,4.96,5.15,5.3,5.46,5.22,5.32,5.23,5.29,5.77,5.52,5.77,5.77,5.7,5.74,5.95,5.7,5.67,5.75,5.92,6.05,5.9,6.57,6.43,6.55,7.27,7.15,6.97,7.05,7,7.2,6.93,7.33,7.07,7.87,8.22,8.5,8.86,8.97,9.14,9.95,9.64,9.49,9.45,10.03,9.65,9.8,9.63,8.98,9.01,9.05,8.88,8.26,7.37,6.15,5.13,4.39,4.32,3.82,4.05,4,3.31,2.76,1.9,1.06,1.44,1.47,1.94,1.84,0.74,0.36,-0.18,0.09,0.47,0.78,1.04,0.78,0.2,0.08,-0.31,-0.92,-1.04,-0.56,-0.74,-0.38,-0.67,-0.13,-0.49,-0.44,-0.09,-0.07,0.32,0.16,0.41,0.22,0.25,0.21,0.43,0.57,0.5,0.18,0.28,0.48,0.41,0.14,0.17,-0.04,0.38,-0.12,0.33,-0.02,0.09,-0.17,0.07,-0.78,-1.44,-0.88,-0.7,0.07,0,0,0.03,-0.46,-0.49,-0.39,0.05,-0.31,-0.29,-0.06,-0.33,-0.35,-0.29,-0.24,-0.02,-0.2,-0.29,-0.38,0.04,-0.39,-0.34,-0.58,-0.26,-0.64,-1.05,-0.83,-0.8,-0.47,-0.13,-0.12],[-1.43,-1.15,-1.25,-1.13,-0.76,-0.25,0.4,0.26,0.3,0.36,0.73,0.27,0.33,0.04,0.41,-0.11,0.16,0.46,0.56,0.63,0.14,-0.09,-0.42,-0.96,-0.16,0.58,0.88,0.65,0.72,0.65,0.02,0.04,-0.53,-1,-1.35,-1.25,-1.25,-0.55,-0.73,-0.28,-0.33,-0.46,0.02,0.3,0.09,0,-0.18,-0.17,-0.16,-0.04,0.04,-0.03,0.2,-0.05,-0.28,-0.38,0.11,-0.22,-0.1,-0.27,-0.41,-0.35,-0.31,-0.04,0.19,0.14,0.14,0.22,0.4,0.6,0.32,0.18,0.43,0.43,0.52,0.25,0.19,0.67,0.93,1.48,1.53,1.83,1.94,2.29,2.22,2.28,3.06,3.23,3.66,3.98,4.42,5.09,4.99,5.47,6.14,6.33,6.52,6.96,7.26,7.12,7.01,6.93,6.94,7.23,7.19,8.77,10.49,11.72,13.16,14.88,16.91,18.23,19.1,20.04,20.6,22.76,25.66,28.43,28.46,28.61,27.12,25.79,23.69,21.82,19.8,18.24,16.4,14.43,13.95,13.86,12.95,12.74,11.9,11.79,12.31,12.39,12.64,13.72,13.69,14.19,13.83,13.94,15.33,16.02,17.06,17.6,17.45,17.27,17.6,17.43,17.82,18.61,19.29,19.67,19.26,19.03,18.08,17.58,16.68,15.46,14.41,13.23,12.05,10.93,10.37,9.85,9.38,8.79,8.29,7.51,7.45,6.86,6.36,6.15,5.26,5.2,4.35,4.09,4.09,4.56,4.75,4.5,4.45,4.6,4.76,4.92,4.85,4.79,4.77,4.99,4.87,4.62,4.96,4.88,4.94,4.95,4.05,3.86,3.11,2.77,3.55,3.89,4.2,3.68,3.09,2.55,2.55,2.22,2.26,2.43,2.68,2.28,1.53,1.6,1,0.74,-0.13,-0.33,-0.31,-0.1,-0.23,-0.15,-0.4,0.01,-0.15,-0.12,-0.18,-0.09,-0.6,-0.34,-0.27,-0.17,-0.62,-0.29,-0.38,-0.62,-0.48,-0.47,-0.45,-0.61,-0.68,-0.54,-0.54,-0.48,-0.63,-0.4,-0.58,-0.93,-0.8,-0.75,-0.5,-0.87,-0.59,-0.59,-0.5,-0.37,-0.37,-0.35,-0.81,-0.57,-0.5,-0.27,-0.51,-0.47,-0.68,-0.49,-0.33,-0.18,-0.17,-0.21,-0.18,-0.16,-0.11,-0.4,-0.49,-0.24,-0.51,-0.49,-0.1,-0.1,0.02,-0.28,-0.17,-0.03,-0.5,0,0.08,0.1,-0.29,-0.33,-0.29,0.16,0.83,0.99,1.28,0.11,-0.77,-0.88,-0.45,-1.01],[-1.09,-0.85,-0.72,-0.74,-0.26,-0.04,-0.19,0.18,0.03,0.19,0.14,-0.26,-0.19,-0.48,-0.34,-0.44,-0.86,-0.67,-0.31,-0.25,0.18,0.21,0.55,0.22,0.4,-0.12,0,0.29,-0.22,-0.36,0.14,-0.06,-0.23,-0.22,-0.23,-0.37,0.03,-0.24,-0.03,-0.27,0.1,0.04,-0.37,-0.32,-0.37,-0.09,-0.03,0.04,-0.14,-0.11,-0.29,-0.36,-0.43,-0.51,-0.26,-0.24,-0.55,-0.48,-0.52,-1,-0.75,-0.81,-0.52,-1.01,-0.78,-0.16,0.41,0.97,1.71,1.35,0.99,0.54,0.2,0.06,0,0.35,0.12,0.66,0.81,1.03,1.43,1.72,2.09,2.48,2.5,3.03,2.87,2.4,1.9,2.73,3.76,4.16,4.21,5.11,5.57,5.74,6.05,5.97,5.98,6.45,6.4,6.8,7.13,7.73,8.37,8.74,9.01,9.81,10.53,11.02,11.84,13.04,15.03,17.07,19.48,21.53,22.73,24.06,25.85,29.61,33.2,34.77,34.99,32.77,31.18,29.21,28.22,27.27,26.45,24.6,22.35,20.59,18.15,17.15,15.75,14.4,13.23,11.98,11.85,11.1,11.01,10.66,9.85,10,10.22,9.95,10.3,10.05,9.94,9.88,9.93,11.53,13.6,14.48,15.97,17.4,17.63,15.39,12.66,10.13,10.01,9.65,8.82,8.52,8.05,8.21,7.77,8.06,7.83,7.95,8.44,8.23,8.62,9.34,10.33,10.96,12.33,13.11,12.67,11.73,11.74,10.89,10.27,9.09,8.43,7.49,6.9,5.9,4.68,3.85,3.23,3.17,3.45,3.3,3.09,3.44,3.27,3.38,3.18,3.33,3.17,2.92,2.88,2.73,2.66,2.19,2.35,2.68,2.5,1.82,1.72,1.07,1,0.63,0.5,-0.15,-0.11,0.16,0.52,-0.04,-0.36,-0.37,-0.85,-0.8,-0.84,-0.79,-0.49,-0.64,-0.36,-0.11,-0.03,-0.32,-0.23,-0.35,-0.19,-0.36,-0.03,-0.16,-0.29,-0.02,-0.35,0.04,-0.37,0.07,-0.03,0.1,-0.35,0,0.46,0.8,0.96,1.11,1.02,1.04,0.46,0.56,0.55,0.42,0.36,0.32,0.49,-0.34,-0.57,-0.96,-0.82,-1.09,-1.31,-1.05,-1.3,-1.25,-0.64,-0.69,-0.17,0.11,0.18,0.23,0.23,-0.18,-0.53,-1.01,-0.77,-0.78,-0.67,-0.22,0.17,0.89,-0.1,-0.36,-0.64,0.01,0.48,0.52,-0.14,-1.13,-1.07,-1.03,-0.78,-0.4,0.18,0.27],[-1.13,-0.98,-0.93,-0.9,-1.14,-1,-0.9,-1.18,-1.3,-1.07,-1.18,-1.37,-0.85,-0.89,-0.96,-0.91,-0.97,-1.25,-0.92,-0.98,-1.37,-0.83,-1.26,-1.29,-0.85,-1.17,-0.87,-0.83,-1,-0.73,-1.08,-1.02,-0.79,-0.52,-0.78,-0.97,-1.06,-0.78,-1.06,-0.97,-0.87,-0.92,-1.05,-0.79,-0.77,-0.76,-1.02,-0.99,-0.81,-0.77,-0.43,-0.59,-0.86,-0.44,-0.61,-0.67,-0.61,-0.35,-0.79,-0.6,-0.6,-0.16,0.02,0.32,0.35,0.69,0.71,0.45,-0.06,-0.11,-0.34,-0.47,-0.06,0.21,0.54,0.98,1.12,1,1.2,1.03,0.98,0.73,0.99,0.93,1.27,1.18,1.38,1.73,2.22,2.09,3.02,3.57,3.73,3.72,4.14,4.09,4.77,5.37,5.93,6.57,7.24,7.61,8.06,9,9.53,10.24,11.03,11.54,12.54,13.28,14.24,15.12,15.54,15.56,15.06,15,13.89,12.93,12.22,10.88,10.28,9.42,8.48,8.14,7.69,7.37,6.7,6.31,6.18,5.83,5.44,5.39,4.82,4.42,4.64,4.42,3.72,3.53,3.26,3.08,3.95,4.44,4.97,5.54,5.62,6.11,5.82,6.17,5.84,5.91,6.5,6.56,6.91,7.44,7.84,8.28,8.47,9.12,9.54,9.25,9.18,9.22,8.98,8.77,8.41,8.85,8.59,8.31,7.88,7.02,6.7,5.66,5.25,5.26,4.72,4.91,4.69,4.33,4.13,3.47,3.87,3.8,4.09,4.24,4.36,4.63,4.77,4.85,5,4.74,4.92,4.94,4.62,4.17,3.84,3.18,3.03,3,2.52,2.62,2.61,2.08,2.3,2.18,2.36,2.39,2.27,1.6,1.51,0.97,0.77,0.94,0.66,1.06,0.94,1.33,1.35,0.41,-0.13,-0.67,-1.13,-0.74,-1.04,-0.86,-0.75,-0.46,-0.28,-0.36,-0.43,-0.14,-0.41,-0.07,-0.45,-0.19,-0.19,-0.05,-0.23,-0.04,0.21,0.03,0.21,-0.31,-0.8,-0.69,-0.22,-0.06,0.84,0.79,0.68,0.41,0.76,0.75,0.7,0.43,0.57,0.11,0.39,0.42,0.37,0.52,0.16,0.49,0.03,0.4,0.22,0,-0.09,-0.16,0,0.06,-0.14,0.03,0.07,0,-0.12,-0.09,0.14,-0.04,-0.42,-1.16,-1.21,-1.33,-0.64,-0.56,-0.03,-0.01,-0.12,-0.19,-0.37,-0.01,-0.27,-0.47,-0.49,-0.23,-0.75,-0.29,-0.54,-0.65,-0.64,-0.94],[-0.66,-0.89,-0.87,-0.87,-1.07,-1.14,-1.09,-1.61,-1.36,-1.55,-1.45,-2.04,-1.76,-2.03,-1.86,-1.95,-1.86,-1.2,-1.34,-1.09,-0.62,-0.56,-0.59,-0.65,-0.38,-0.7,-0.67,-0.54,-0.64,-0.7,-0.75,-0.85,-0.69,-0.81,-0.58,-0.39,-0.6,-0.4,-0.38,0.07,-0.19,0.36,-0.04,0.46,0.21,0.02,-0.03,0.01,0.18,0.24,-0.04,-0.49,0.01,0.11,0.32,0.62,0.84,1.12,1.43,2.01,1.78,2.09,2.19,2.54,2.32,2.43,2.49,2.18,2.5,2.31,2.46,2.16,2.01,2.38,2.32,2.09,1.56,1.55,1.7,1.59,1.6,1.88,2.39,2.32,2.47,2.46,2.68,3.25,3.47,3.52,4.02,4.43,4.58,5.48,5.77,6.52,7.19,7.74,8.64,9.21,9.78,10.22,10.02,10.09,10.23,10.52,10.55,10.17,10.31,10.43,10.82,10.91,10.96,10.54,10.92,10.78,10.97,10.97,10.94,11.35,10.99,11.06,11.51,13.37,14.5,15.95,17.25,18.03,18.66,19.26,19.74,19.42,19.27,19.08,18.66,18.49,18.4,17.86,17.02,15.77,15.09,14.13,13.34,12.75,12.18,11.47,11.14,10.89,10.41,9.88,9.68,10,9.51,9.5,9.48,8.93,8.95,9.67,10.23,10.7,11.34,11.42,11.58,11.4,11.32,10.96,10.6,10.5,10.52,11.32,11.5,12.28,12.39,13.16,13.21,14.29,15.22,16.49,17.52,18.04,18.94,19.94,20.38,20.59,20.54,20.53,20.99,20.52,19.61,18.33,16.64,15.58,14,12.46,11.19,9.55,7.78,5.43,4.73,5.07,5.39,5.94,6.18,5.7,5.12,4.12,3.63,3.57,3.17,2.8,2.54,2.19,2.41,1.67,1.95,1.64,1.28,0.86,0.98,0.37,0.09,-0.11,-0.36,-0.21,0.42,0.82,0.73,0.68,0.41,-0.18,-0.65,-0.61,-1.28,-0.8,-0.69,-0.65,0.09,0.06,0.15,-0.22,-0.9,-1.03,-1.34,-0.94,-0.51,-0.58,0.05,0.05,0.23,-0.03,-0.01,-0.33,0.04,-0.19,-0.23,-0.94,-1.53,-1.08,-1.24,-0.59,-0.37,0.1,0.4,0.46,0.2,0.54,0.15,0.46,0.23,-0.08,-0.18,-0.15,0.06,-0.15,-0.28,-0.05,-0.11,0.17,-0.03,-0.21,-0.21,0.16,-0.12,0.03,-0.33,0.12,-0.03,-0.07,-0.33,-0.43,-0.34,-0.58,-0.45,-0.46,-0.36,-0.55,-0.62,-0.71,-0.88,-0.7],[-0.36,-0.21,-0.44,-0.2,-0.31,-0.06,0.03,-0.22,-0.45,-0.15,-0.09,-0.36,-0.52,-0.4,-0.14,-0.5,-0.4,-0.6,-0.43,-0.16,-0.36,-0.31,-0.43,-0.69,-0.23,-0.51,-0.46,-0.15,-0.27,-0.09,-0.32,-0.48,-0.22,-0.11,0.02,0.01,-0.04,-0.21,-0.27,0.02,-0.18,-0.21,0,0.24,-0.15,0.33,-0.11,0.2,0.27,0.37,-0.12,-0.05,0.07,0.07,0.11,0.18,0.1,0.04,0.17,0.01,0.09,-0.09,-0.13,0.12,-0.04,0.31,0.34,0.64,0.66,0.34,0.61,0.69,0.57,0.76,1.04,1.06,1.48,2.11,2.2,2.94,2.73,2.91,3.18,3.55,3.79,3.91,4.73,4.97,6.16,6.45,7.26,7.81,9.07,10.7,12.6,14.69,16.83,18.7,19.53,19.09,18.53,18.23,17.36,17.07,16.27,15.99,15.31,14.16,13.03,11.99,11.14,9.97,9.16,7.98,7.39,6.44,5.2,4.34,3.58,3.07,2.41,1.42,0.81,0.02,-0.62,0.46,1.08,2.02,2.92,3.65,5.37,6.69,8.41,10.18,9.46,9.01,8.13,7.58,7.32,6.83,6.12,5.31,5.09,4.53,4.45,5.01,4.84,5.49,5.79,5.92,6.11,4.89,4.09,3.81,2.72,3.29,4.63,5.77,6.95,5.14,4.09,4.17,4.39,4.65,5.02,4.74,5.06,5.07,5.9,6.31,6.4,7.29,7.72,7.82,8.65,9.63,9.69,10.11,10.49,10.58,11.17,11.01,11.84,11.87,13.06,13.69,13.73,14.22,14.21,14.74,15,14.87,14.8,14.62,13.6,11.81,10.44,8.71,8.1,7.55,7.23,6.66,6.02,5.93,5.13,5.38,5.14,4.95,4.48,3.98,3.8,3.06,2.69,2.01,1.15,0.93,0.27,0.36,0.34,0.92,0.84,0.97,1.01,0.7,0.75,0.3,0.25,0.46,1.53,1.52,1.19,0.71,0.57,-0.23,-0.29,-0.45,-0.67,-0.95,-0.64,-0.47,-0.91,-0.77,-0.88,-0.91,-0.82,-0.85,-0.58,-0.4,-0.45,-0.67,-0.56,-0.66,-0.62,-0.62,-0.44,-0.46,-0.45,-0.89,-0.81,-0.8,-0.42,-0.55,-0.78,-0.6,-0.61,-0.57,-0.78,-0.63,-0.42,-0.42,-0.52,-0.55,-0.57,-0.33,-0.43,-0.73,-0.78,-0.79,-0.59,-0.68,-0.34,-0.27,-0.56,-0.36,-0.37,-0.35,-0.43,-0.55,-0.51,-0.45,-0.2,-0.21,-0.47,-1.17,-1.28,-1.45,-0.77,0.03,0.47,1.33],[-0.73,-0.83,-0.91,-1.1,-0.87,-0.71,-0.94,-0.8,-0.99,-0.8,-0.05,0.04,0.5,0.97,0.36,-0.28,-1.45,-1.93,-1.38,-0.48,-0.59,-0.43,-0.44,-0.29,-0.41,-0.36,-0.39,-0.55,-0.41,-0.4,-0.22,-0.08,-0.26,-0.49,-0.4,-0.13,-0.44,-0.34,-0.29,-0.19,0.01,0.06,-0.43,-0.08,-0.3,0.09,0.02,0.07,-0.13,0.02,-0.33,0.04,-0.19,0.09,0,0.03,0.1,0.01,0.21,-0.17,0.15,0.22,0.08,0.46,0.87,1.96,1.74,1.84,1.52,1.41,2.01,1.68,2.18,2.24,2.79,2.52,2.35,2.03,1.81,1.6,2.18,3.24,3.7,3.83,4.03,3.97,3.97,4,4.14,5.03,5.24,5.92,6.66,7.68,8.63,9.88,10.98,11.9,13.18,14.99,16.08,17.33,19.05,20.09,20.82,21.73,22.31,23.74,25.26,27.17,29.71,31.64,33.97,35.9,37.91,38.87,39.07,38.92,37.68,36.74,35.17,33.36,31.45,29.52,27.49,25.8,23.68,22.32,20.66,18.51,17.19,16.37,16.13,15.52,15.85,16.13,16.09,15.86,16.09,16.23,16.05,15.73,15.88,15.61,15.67,15.89,15.29,15.73,15.23,15.43,14.72,14.39,13.99,13.33,12.61,12.32,11.82,11.73,11.49,12.34,12.33,12.2,11.74,11.53,11.55,10.88,10.61,10.87,10.31,10.03,9.81,9.49,9.23,8.5,8.14,7.97,7.87,7.5,7.26,6.78,6.05,6.01,5.85,5.86,5.98,5.92,6.05,5.73,5.93,5.65,5.63,5.21,4.51,4.11,3.74,2.89,2.35,2.02,1.63,1.92,1.75,1.74,1.65,1.72,1.68,1.82,1.86,1.46,1.43,1.5,1.73,1.45,1.69,1.89,1.1,0.71,0.57,-0.12,0.06,0.43,0.58,0.89,0.86,1.02,0.91,0.66,0.76,0,0.13,-0.08,-0.45,-0.42,-0.08,-0.61,-0.37,-0.11,-0.17,-0.57,-0.65,-0.17,-0.13,-0.59,-0.5,-0.48,-0.59,-0.22,-0.31,-0.3,-0.3,-0.54,-0.28,-0.44,-0.44,-0.16,-0.16,-0.76,-0.8,-1.66,-0.99,-0.63,-0.46,0.19,0.25,-0.05,0.29,-0.06,0.04,-0.04,0.32,0.02,0.34,0.16,0.1,-0.25,-0.14,0.03,-0.14,-0.21,-0.04,0.06,-0.09,0.14,0.05,-0.02,-0.19,-0.02,0.05,-0.5,-0.07,-0.51,-0.19,-0.32,-0.56,-0.55,-0.12,-1.2,-1.4,-0.51,0.25,0.74],[-0.89,-0.61,-0.74,-0.85,-0.77,-0.93,-0.47,-0.69,-0.91,-0.58,-0.92,-0.64,-0.37,-0.77,-0.7,-0.58,-0.63,-0.91,-0.38,-0.92,-0.82,-0.41,-0.67,-0.9,-0.61,-0.9,-0.38,-0.52,-0.44,-0.58,-0.89,-0.68,-0.64,-0.72,-0.7,-0.68,-0.51,-0.39,-0.9,-0.39,-0.51,-0.79,-0.49,-0.51,-0.92,-0.41,-0.45,-0.9,-0.49,-0.74,-0.56,-0.68,-0.39,-0.26,0,-0.08,-0.27,0.08,0.38,0.25,1.26,1.74,1.16,0.92,0.37,0.65,0.66,0.34,0.35,0.39,0.24,0.58,2.18,2.11,2,2.02,1.92,1.49,1.23,1.6,1.35,1.46,1.27,1.69,1.56,1.7,1.49,1.74,1.87,1.41,1.93,2.56,3.25,4.15,4.96,6.23,6.59,7.68,8.46,9,9.42,9.93,10.32,10.75,11.09,11.85,12.34,12.69,13.01,13.35,13.79,14.16,14.47,14.95,15.85,15.69,16.3,16.56,17.2,17.5,18.05,16.51,14.51,12.89,11.78,10.18,9.43,8.37,6.73,6.89,7.58,8.65,9.66,10.8,11.2,12.46,13.1,13.56,14.37,15.1,15.64,15.77,15.93,15.79,15.96,16.32,15.76,15.97,15.91,14.52,13.74,12.54,11.96,11.53,11.09,10.67,10.44,9.79,9.36,8.64,8.5,7.29,6.42,5.22,4.68,3.35,2.71,1.26,0.5,-0.64,-1.6,-2.48,-3.6,-4.54,-5.89,-6.05,-5.18,-4.56,-3.42,-2.92,-2.47,-1.67,-0.4,0.61,1.27,1.84,1.81,1.9,1.63,1.77,1.81,1.68,1.8,2.16,1.82,2.14,2.03,2.02,2.27,1.81,1.94,1.77,2.24,1.72,2.08,2.2,1.76,1.71,1.9,1.83,2.24,1.78,1.24,0.43,0.43,0.25,0.26,0.98,0.94,0.69,0.28,-0.1,-0.15,-0.4,-0.27,-0.38,-0.02,-0.13,-0.23,-0.4,-0.19,-0.1,0.11,0.08,0.05,0.01,-0.36,-0.29,-0.25,0.11,0.21,0.16,0.08,0.04,0.17,-0.18,-0.01,-0.09,-0.09,0.29,-0.08,0.42,0.13,-0.34,-0.37,-0.49,-0.82,-0.47,-0.43,-0.83,-0.54,-0.28,0.33,0.05,-0.14,0.03,-0.19,-0.4,0.09,0.33,0.71,0.68,1.33,0.71,1.06,0.86,0.88,0.36,0.46,0.33,0.39,0.14,0.22,-0.26,-0.43,0.01,-0.41,-0.53,-0.72,-0.54,-0.92,-0.41,-0.94,-1,-0.75,-0.94,-1.05,-0.51,-0.47,-0.79],[-0.69,-0.54,-0.84,-0.89,-0.45,-0.32,-0.82,-0.21,-0.25,-0.19,0.01,0.18,-0.18,0.32,0.01,0.13,0.06,0.39,0.18,0.28,0.19,0.31,0.12,0.01,0.14,-0.06,0.42,0.33,0.28,0.25,0.05,-0.19,-0.86,-0.91,-0.54,-0.17,0.57,1.06,1.19,0.96,0.49,0.06,0.13,-0.58,-0.53,-0.46,-0.11,-0.27,-0.48,-0.18,-0.25,-0.56,-0.02,0.14,-0.07,0.6,0.42,0.68,1.18,0.99,1.25,1.24,1.27,1.45,0.89,1.36,1.42,1.79,1.81,1.26,0.17,0.76,1.14,2.03,2.14,2.46,2.92,2.69,3.1,2.71,2.74,3.1,3.03,3.09,2.65,2.99,2.98,2.99,3.64,4.35,5.28,5.88,7.18,7.75,9.17,10.17,10.9,12.09,12.93,13.61,14.33,15.44,15.42,15.37,15.13,15.16,14.64,14.43,14.59,14.75,14.41,14.56,15.22,16.81,18,19.51,20.54,22.54,24.2,26.16,27.44,28.41,28.91,28.72,29.09,28.48,28.43,27.9,27.91,27.31,27.29,26.71,26.18,26.36,24.99,23.93,22.68,21.46,20.6,20.2,19.02,18.27,17.86,17.12,17.38,17.44,17.42,17.21,17.33,17.4,17.2,17.37,17.33,17.28,17.78,18.49,18.72,19.61,21.28,21.35,20.66,20.57,21.37,22.1,22.27,21.95,21.46,20.97,19.93,19.23,18.58,18.49,18.36,17.58,17.57,17.16,16.64,16.69,16.78,16.74,16.58,16.2,16.04,15.87,14.79,13.87,12.74,12.03,11.42,10.38,9.49,8.75,8.48,7.43,7.38,7.19,7.55,7.52,7.55,6.72,6.66,5.77,5.36,4.64,3.63,2.41,1.83,1.86,1.71,1.89,2.34,2.41,2.41,2.31,1.7,1.04,1.45,1.48,1.75,1.38,1.05,0,-0.28,-0.24,-0.49,-0.04,-0.32,-0.22,-0.13,-0.28,-0.62,-0.36,-0.53,-0.46,-0.47,-0.18,-0.57,-0.17,-0.29,-0.67,-0.32,-0.25,-0.6,-0.64,-0.14,-0.55,-0.43,-0.17,-0.59,-0.37,-0.54,-0.51,-0.31,-0.51,-0.24,-0.37,-0.67,-0.53,-0.69,-0.34,-0.66,-0.34,-0.73,-0.67,-0.75,-0.37,-0.27,-0.7,-0.35,-0.36,-0.8,-0.6,-0.74,-0.28,-0.57,-0.82,-0.55,-0.86,-0.66,-0.58,-0.88,-0.1,1.1,1.07,0.08,-0.74,0.07,0.82,0.21,0.57,0.56,0.41,-0.04,-0.04,0.09,-0.16,0.24,-0.17,-0.09,0.01],[-0.65,-1.05,-0.7,-0.86,-0.48,-0.56,-0.46,-0.21,-0.35,-0.43,-1.08,-1.18,-1.51,-1.37,-1.05,-0.4,0.31,0.71,0.98,0.67,0.65,0.46,0.49,0.79,0.3,0.7,0.76,0.41,0.26,0.29,0.61,0.55,0.33,0.04,0.04,0.16,0.21,0.21,0.15,0.27,0.29,-0.06,-0.12,-0.22,-0.43,-0.3,-0.3,0,1.04,1.16,0.79,0.99,0.34,0.41,0.64,0.65,1.13,0.9,0.78,1.13,1.14,1.15,1.17,1.61,1.49,1.44,1.74,1.53,1.76,1.49,1.67,1.72,1.91,1.55,1.91,1.89,1.92,2.26,2.32,2.8,3.1,3.35,3.24,3.88,4.6,5.66,6.97,8.52,10.63,12.12,14.31,14.9,15.28,15.96,18.37,20.55,23.05,25.72,29.37,30.2,31.73,32.66,32.47,31.79,30.77,29.94,29.06,28.37,27.89,27.96,28.08,32.1,34.22,36.08,39.2,37.37,35.7,33.69,31.29,29.61,25.32,20.4,20.13,19.76,18.75,18.23,17.81,17.8,17.76,17.94,17.62,18.11,17.98,18.27,18.64,19.12,20.19,20.77,20.85,20.82,21.17,20.5,19.98,19.51,19.08,18.66,18.07,17.66,13.69,12.39,12.23,11.9,12.03,11.68,12.23,11.73,12.44,12.25,12.94,12.81,12.59,11.82,11.25,10.9,10.11,9.51,9.22,8.72,8.35,8.36,8.08,8.27,8.55,9.24,9.41,10.26,10.94,11.01,11.7,12.13,12.64,13.29,13.96,14.71,15.89,17.11,17.95,19.73,20.01,19.5,18.96,18.78,18,17.08,15.49,14.76,14.33,14.15,13.1,11.82,10.92,9.7,9.45,8.92,7.95,7.29,6.94,6.12,5.61,5.22,4.28,3.77,3.12,3.12,2.48,2.05,2.21,2.07,2.12,1.64,1.08,0.31,-0.3,-0.8,-0.59,-0.37,-0.66,-0.92,-0.47,-0.89,-0.61,-0.39,-0.52,-0.51,-0.59,-0.77,-0.63,-0.49,-0.42,-0.58,-0.69,-0.53,-0.26,-0.28,0.13,-0.1,-0.5,-0.74,-1.06,-0.57,-0.58,-0.3,-0.06,-0.38,0.05,0.06,-0.13,0.05,-0.01,-0.12,0.32,-0.01,0.29,-0.38,-0.31,-0.1,0.55,0.75,0.73,0.45,0.11,-0.01,-0.32,-0.19,-0.12,-0.22,0.12,0.12,-0.11,-0.1,-0.42,-0.19,-0.27,-0.56,-0.08,-0.53,-0.16,-0.25,-0.86,-1.37,-1.51,-1.56,-0.55,-0.21,-0.49,-0.23,-0.34,-0.54,-0.64,-0.84],[0.31,0.03,0.34,0.13,0.28,0.39,0.43,0.35,-0.01,0,0.12,0.45,-0.1,0.2,0.34,0.11,-0.09,0.37,-0.07,-0.08,0.43,0.3,0.34,0.4,0.15,0,0.38,0.15,0.21,0.21,0.26,-0.02,0.31,0.44,0.16,-0.09,0.45,0.14,0.35,-0.07,-0.02,-0.05,0.21,0.2,0.5,1.24,1.52,1.75,1.73,2.08,2.15,1.78,1.48,1.18,0.55,0.18,0.55,0.67,1.52,1.69,1.71,1.3,0.62,1.07,1.12,1.89,1.7,2,1.62,1.6,1.65,1.63,2.01,1.99,2.06,2.23,2.64,2.52,2.9,4.12,4.84,5.22,6.24,6.02,6,6.34,6.15,6.31,7.26,8.6,10.14,11.13,11.94,13.26,14.55,15.93,17.5,19.35,20.87,22.06,23.35,24.12,24.22,24.14,24.04,24.29,23.95,24.52,24.58,24.71,24.29,24.9,25.43,25.86,26.85,27.7,28.74,29.41,30.42,30.66,30.58,30.45,30.34,30.4,30.12,29.11,28.23,26.96,25.48,24.32,23.41,22.49,20.53,19.7,18.49,17.27,16.43,16.64,16.42,16.84,16.49,16.59,16.85,17.09,17.12,17.52,17.62,17.79,18.33,18.27,18.62,18.21,18.24,17.98,17.88,17.05,15.7,14.47,13.44,12.65,11.73,11.15,10.63,9.85,9.24,8.94,9.1,9.21,9.56,9.68,10.04,10.8,10.96,11.27,11.29,11.94,11.92,12.49,12.61,12.44,12.45,12.38,12.73,12.5,12.68,12.66,12.82,12.4,12.62,12.4,11.78,11.33,10.85,11.03,10.88,10.74,11.13,11.25,11.09,11.08,10.35,9.54,9.1,8.55,8.4,8.22,7.64,7.65,7.8,7.6,7.27,7.31,6.51,5.96,5.63,5.17,4.79,4.24,3.29,2.77,2.56,2.26,1.31,0.46,-0.5,-0.6,-0.18,-0.3,-0.27,-0.4,-0.23,-0.43,-0.16,-0.24,-0.42,-0.46,-0.42,-0.57,-0.32,-0.26,-0.37,-0.26,-0.18,-0.41,-0.23,-0.58,-0.61,-0.53,-0.42,-0.56,-0.5,-0.04,-0.56,-0.38,-0.02,-0.25,-0.46,-0.18,-0.38,-0.48,-0.24,-0.36,-0.54,-0.34,-0.24,-0.19,-0.36,-0.3,-0.32,-0.24,-0.1,-0.25,-0.15,-0.24,-0.04,-0.37,-0.13,-0.29,-0.09,-0.03,-0.18,-0.07,-0.34,0.07,-0.07,-0.43,-0.36,-0.09,-0.4,-0.18,0.06,-0.12,-0.27,-0.27,0.03,0.1,-0.45,-0.04,-0.67,-0.73],[-0.74,-0.65,-0.47,-0.22,-0.27,-0.28,0,-0.06,0.09,0.25,0.19,-0.16,0.11,-0.02,-0.2,-0.24,-0.09,-0.14,-0.08,-0.19,-0.59,-0.46,-0.58,-0.17,-0.38,-0.39,-0.72,-0.72,-0.82,-0.73,-0.66,-0.56,-0.54,-0.61,-1.04,-0.88,-0.75,-0.97,-0.89,-0.4,-0.61,-0.52,-0.43,-0.36,-0.12,-0.05,-0.31,-0.2,-0.14,-0.41,-0.08,0.06,-0.18,-0.1,-0.14,-0.27,-0.51,-0.4,-0.43,-0.39,-0.05,0.18,0.53,1.17,1.54,1.83,1.34,0.99,0.39,0.06,1.17,1.23,0.96,0.54,0.27,0.75,0.77,1.23,1.13,1.66,1.63,2.02,2.3,2.63,2.91,3.16,2.99,3.66,3.51,3.98,3.91,4.21,3.99,4.09,4.32,4.05,4.92,4.76,5.41,5.96,6.44,6.54,7.48,7.61,8.18,9.3,10.41,12.03,13.59,16.16,18.18,20.25,20.42,20.24,20.33,20.03,20.81,21.36,22.3,23.96,25.15,26.69,26.9,27.14,27.33,27.51,27.8,27.1,26.74,26.05,25.34,24.57,24.22,23.46,22.55,21.63,20.85,19.38,18.11,17.38,17.46,17.42,17.15,16.75,16.01,15.71,15.31,14.58,14.36,13.87,13.58,13.89,14.39,15.19,15.51,16.24,16.59,16.84,17.53,19.68,20.97,22.52,24.24,25.62,27.57,31.42,31.95,31.73,30.8,30.19,29.5,29.4,29.54,28.66,27.02,25.93,24.41,22.78,21.18,19.96,18.3,16.57,15.27,14.03,12.96,12.35,10.88,10.19,9.59,9.04,8.18,8.05,7.41,6.62,5.63,4.94,4.13,3.33,2.79,2.64,2.42,2.33,2.63,2.26,2.51,2.42,2.1,2.29,1.67,1.84,1.91,1.85,2.03,2.08,2.05,1.71,2.11,1.73,2.16,1.95,2.33,2.1,1.46,1.34,0.93,1.08,0.61,0.1,-0.52,-0.44,-0.11,-0.14,0.44,0.12,0.11,-0.36,-0.71,-0.78,-0.5,-0.12,0.11,-0.04,0.11,0.78,0.51,0.04,-0.82,-1.29,-0.75,0.43,0.34,0.44,-0.03,-0.36,-0.35,-0.62,-0.59,-0.37,-0.26,-0.53,-0.3,0.09,-0.27,0.03,0,0.07,0.3,-0.07,0.32,0.04,0.09,0.12,0.29,0.14,0.05,-0.08,0.19,-0.04,0.34,-0.23,-0.3,-0.95,-1.42,-0.91,-0.5,0.01,-0.18,-0.21,-0.13,-0.25,-0.23,-0.18,-0.05,-0.18,-0.26,-0.23,-0.31,-0.22,-0.14,0.04],[-0.35,-0.51,-0.37,-0.08,0,0.34,0.43,-0.27,-0.55,-1.06,-0.73,-0.21,-0.08,-0.09,0.35,0.08,0.02,-0.19,-0.17,-0.52,-0.13,-0.19,-0.51,-0.41,-0.49,-0.58,-0.61,-0.62,-0.95,-0.83,-1.08,-0.97,-0.34,-0.36,-0.25,0.24,0.04,0.46,0.08,0.27,0.09,0.22,0.08,-0.09,0,0.11,0.34,0.22,0.05,-0.04,-0.09,0.38,0.2,0.09,-0.14,0.22,-0.27,-0.35,0.14,0.23,0.37,0.6,0.99,1.37,2.07,2.32,2.28,2.04,1.82,1.71,1.32,1.39,1.37,1.38,1.93,2.01,2.36,1.94,2.04,2.13,1.88,1.79,2.58,3.01,3.5,3.73,4.29,4.41,5.12,5.03,5.46,5.74,5.65,6.25,6.41,6.41,6.79,7.31,7.56,7.71,8.06,8.18,8.06,8.48,8.78,8.48,8.78,9.19,9.17,8.94,9.27,9.16,9.07,9.14,8.7,8.75,9.14,10.9,12.45,14.13,15.54,17.03,17.54,18.22,18.59,18.92,20,20.31,20.85,22.33,23.52,23.77,23.36,22.36,21.87,20.97,20.48,19.32,18.99,17.7,16.9,16.2,16.1,16.49,16.32,16.13,15.99,15.99,16.07,15.8,15.75,15.87,16.29,15.75,15.87,15.74,15.79,16.29,16.02,16.08,15.75,15.43,15.27,15.21,14.92,14.69,13.72,13.59,13.07,12.37,13.76,15.34,16.47,16.45,17.21,17.26,17.74,18.15,18.85,19.25,19.7,20.31,21.06,20.62,20.48,19.79,19.14,18.12,16.55,15.42,14.38,13.72,12.5,11.27,10.08,9.17,8.38,7.79,7.42,6.44,5.92,5.66,5.04,5.13,4.68,4.78,3.78,2.48,1.38,0.8,1.08,1.41,1.83,2.04,2.19,2.29,2.5,2.13,2.17,2.17,2.18,2.09,1.84,1.63,1.18,0.47,0.16,0.06,-0.57,-0.05,0.74,1.04,0.56,0.84,0.44,0.4,0.43,0.12,0.3,0.26,-0.25,-0.26,0.17,0.06,-0.05,0.14,-0.32,0.07,-0.24,-0.53,-0.35,-0.26,-0.09,-0.14,-0.21,-0.43,-0.26,-0.58,-0.52,-0.28,-0.57,-0.77,-0.39,-0.61,-0.75,-0.84,-0.71,-1.63,-2.32,-1.64,-1.15,-0.53,0.05,-0.38,-0.38,-0.28,-0.4,0,-0.07,-0.18,-0.05,-0.23,0.04,-0.18,-0.37,-0.52,-0.32,-0.26,-0.55,-0.28,-0.15,-0.59,-0.07,-0.22,-0.21,-0.48,-0.44,-0.49,-1.33,-2.23],[-0.67,-0.88,-0.89,-0.69,-0.82,-0.52,-0.96,-0.86,-0.7,-0.39,-0.7,-0.33,-0.52,-0.6,-0.41,-0.64,-0.25,-0.32,-0.56,-0.3,-0.6,-0.35,-0.14,-0.55,-0.42,-0.62,-0.14,-0.31,-0.29,0.02,0.27,0.38,-0.1,-0.18,-0.51,-0.77,-0.34,-0.68,-0.52,-0.47,-0.62,-0.13,-0.41,-0.21,-0.36,-0.25,-0.1,0.01,0.05,0.14,0.66,0.66,0.29,0.21,0.1,0,0.32,0.59,0.57,0.54,0.55,0.62,0.72,0.89,1.33,1.88,2.13,1.69,2.1,1.75,2.04,2.17,3.1,3.26,3.38,3.33,3.24,3.62,3.31,3.59,4.1,5.1,5.6,6.66,7.66,8.77,9.52,10.86,12.14,14,15.96,17.55,19.83,21.38,23.03,22.88,23.27,23.83,23.94,23.69,23.68,23.61,23.38,22.84,22.8,22.18,22.19,22.25,21.85,21.5,21.73,21.59,21.64,21.18,20.92,21.22,20.36,19.11,17.69,16.83,17.01,17.1,17.25,17.2,17.31,17.94,18.19,18.27,18.64,18.34,19.28,19.77,20.46,21.22,21.7,21.41,21.64,21.1,20.72,19.9,19.44,18.41,18.05,17.31,16.62,15.53,15.5,15.64,14.98,14.39,14.17,13.43,12.77,12.51,11.95,11.52,11.11,10.59,9.9,9.24,8.85,8.78,8.75,8.53,8.93,8.5,8.37,8.72,8.79,8.64,8.88,9.82,10.93,11.87,12.63,12.98,13.53,14.36,15,16.2,17.57,18.22,19.51,21.1,22.83,24.85,25.19,26.07,25.01,24.02,23.09,22.15,21.33,20.19,18.87,17.94,17.68,17.35,16.37,15.44,13.9,12.95,11.63,10.17,9.54,8.47,7.85,7.5,6.66,6.08,5.27,5.06,4.77,4.19,3.47,3.39,2.57,2.23,2.16,2.36,2.25,1.65,1.72,1.41,1.54,0.7,0.39,0.11,0.39,0.81,0.46,-0.36,-0.32,-0.35,-0.54,-0.15,-0.28,-0.05,-0.04,-0.3,-0.31,-0.48,-0.35,-0.41,0.06,-0.33,0.06,0.05,-0.36,-0.29,0.08,0.12,-0.11,-0.04,-0.19,0.3,0.12,-0.05,0.25,0.18,0.17,-0.12,-0.41,-0.47,-0.96,-1.26,-0.91,-0.9,-0.5,0.04,-0.01,0.05,0.18,0.26,0.03,0,0.31,0.05,0.4,0.39,0.02,0.46,0.18,0.55,0.18,0.14,0.64,0.38,-0.44,-0.75,-1.37,-1.37,-1.32,-0.88,-0.72,-0.51,-0.21,-0.08,0.32,0.41],[-0.84,-0.64,-0.71,-0.38,-0.63,-0.73,-0.53,-0.47,-0.5,-0.49,-0.8,-1.26,-1.3,-1.22,-0.96,-0.91,-0.73,-0.44,-0.01,0.17,0.22,0.17,0.27,0.35,0.36,0.41,0.6,0.63,0.28,0.54,0.41,0.27,0.18,0.22,0.59,0.44,0.46,0.48,0.23,-0.2,0.07,-0.11,-0.09,-0.62,-0.71,-0.85,-0.67,-0.3,0.16,0.16,0.24,0.5,0.64,0.23,0.4,0.71,1.08,1.22,1.19,1.05,0.57,0.65,0.1,-0.11,0.36,1.13,1.36,1.91,1.76,2.32,2.34,2.03,1.17,1.24,1.42,2.52,2.66,3.6,3.81,4.41,4.88,5.46,6.28,6.54,6.86,8.31,9,10.12,11.55,12.48,13.75,13.91,14.15,13.89,14.22,14.24,13.97,15.03,16.45,17.34,18.6,19.65,20.35,20.77,21.22,22.03,22.79,23.96,25.27,26.53,29.34,31.7,33.9,36.42,37.69,35.26,32.93,30.27,28.74,27.05,26.39,25.91,25.05,24.42,23.91,23,22.37,22.07,21.36,21.1,20.8,20.75,20.45,20.09,19.53,19.56,19.33,19.16,18.38,18.42,17.8,17.57,17.66,17.12,16.76,16.71,15.98,15.69,15.36,15,15.01,14.7,14.3,14.4,13.99,13.77,13.45,13.24,13.18,13.07,12.75,12.62,12.71,12.27,12.47,12.45,12.1,12.01,12.14,11.95,12.28,11.97,11.78,10.6,9.65,9.05,9.06,9.37,9.2,9.49,9.69,10.34,10.51,10.58,10.54,10.95,10.25,9.91,9.64,9.15,8.49,9.09,9.34,9.6,9.68,10.16,9.35,8.62,7.91,7.77,7.61,7.46,7.42,7.51,7.56,7.64,7.77,7.25,6.81,6.83,6.78,6.24,5.53,4.56,3.95,3.08,2.64,2.06,1.53,0.72,0.41,-0.15,-0.55,-0.69,-0.26,0,-0.2,0.25,0.25,0.34,0.37,0.41,0.42,0.38,-0.08,0.32,0.24,0.07,-0.02,0,-0.02,0.16,0.09,-0.18,0.22,0.18,0.19,0.15,0.01,-0.27,-0.35,-0.12,0.1,-0.08,0.01,0.04,-0.34,-0.34,-0.39,-0.44,-0.19,-0.12,-0.18,-0.2,-0.22,0.01,-0.37,-0.32,-0.28,-0.5,-0.01,-0.5,-0.23,-0.29,-0.47,-0.23,-0.37,-0.51,-0.81,-0.64,-0.91,-0.93,-0.73,-0.67,-0.87,-0.7,-0.49,-0.52,-0.6,-1,-1.27,-1.01,-0.24,-0.13,-0.26,-0.05,-0.02,-0.15,0.19,0.19],[-0.45,-0.31,-0.09,-0.08,-0.27,-0.61,-0.53,-0.89,0,0,0.4,0.39,0.27,0.01,0.2,-0.17,0.03,-0.1,-0.23,0.23,0.13,0.03,0.06,-0.25,0.3,0.17,0.11,-0.07,-0.2,0.29,-0.13,0.26,-0.03,0.18,-0.23,0.21,-0.02,0.02,-0.15,-0.06,0.08,0.07,0.1,0.19,0.22,-0.12,0.27,0.06,0.07,-0.22,-0.36,-0.42,-0.76,-0.06,0.87,0.48,0.43,-0.06,-0.22,-0.89,-0.89,-0.66,-0.14,-0.11,-0.17,0.7,1.71,1.9,1.68,1.08,0.94,0.67,0.71,1.04,1.16,1.09,1.35,1.72,1.96,2.08,2.3,2.56,3.35,3.51,3.9,4.53,5.43,5.21,4.76,4.78,4.07,3.91,3.28,2.98,2.93,3.13,3.32,3.54,3.83,4.3,4.24,4.81,4.9,4.68,4.81,5.23,5.49,5.51,6,7.11,8.06,8.69,9.44,10.29,11.57,13.77,15.15,17.27,19.77,25.83,27.44,27.8,27.67,27.91,27.87,28.02,28.06,27.69,27.21,26.13,24.96,23.65,22.67,21.15,19.56,18.9,18.96,18.82,18.22,18.47,17.86,17.54,17.6,17.35,17.46,17.5,17.12,17.34,17.3,17.11,17.63,17.93,18.48,19.05,19.97,20.83,21.41,22.49,23.53,23.84,22.7,22.25,21.55,21.31,21.29,21.4,21.34,21.28,20.97,21.31,20.83,21.31,20.91,21.24,21.05,21.25,20.87,20.49,19.09,17.09,15.92,14.59,13.75,12.59,11.24,10.88,9.9,9.02,8.31,7.11,6.15,5.35,5.41,5.54,5.33,5.37,5.73,5.81,6.27,5.66,5.01,4.24,3.55,2.72,2.56,3.12,3.37,3.63,3.73,3.41,2.84,2.48,2.22,1.75,1.56,1.77,1.31,1.12,0.12,-0.01,-0.32,-0.19,-0.31,-0.07,-0.55,-0.39,-0.41,-0.3,0,-0.24,-0.03,-0.08,-0.22,-0.01,-0.21,-0.09,-0.2,-0.28,-0.48,-0.19,-0.18,0.02,-0.3,-0.81,-0.93,-0.86,-0.74,-0.6,-0.19,-0.05,-0.1,0.35,0.3,0.01,0,0.5,-0.06,0.05,-0.14,-0.01,0.33,0.2,-0.06,0.26,-0.07,-0.33,0.21,0.14,-0.13,0.07,0,-0.29,-0.28,-0.08,0,-0.55,0,-0.3,-0.26,-0.52,-0.42,-0.41,-0.78,-0.31,-0.6,-0.58,-0.78,-0.44,-0.23,-0.12,0.06,-0.02,-0.28,-0.01,0.02,-0.31,-0.33,-0.5,-0.52,-0.4],[-0.85,-1.13,-0.66,-0.54,-0.59,-0.53,-0.54,-0.24,-0.37,-0.36,-0.27,0,-0.27,0,0.07,-0.13,0.48,0.31,0.39,0.21,0.53,0.47,0.48,0.56,0.17,0.59,0.09,-0.09,0.29,0.25,0.09,0.34,0.36,-0.01,0.18,0.2,0.23,0.19,0.17,0.2,-0.02,-0.07,0.29,0.22,-0.17,-0.15,0.13,0.13,0.16,0.18,0.35,0.24,0.21,-0.02,0.2,0.27,0.82,0.69,0.78,0.73,0.7,0.2,0.16,-0.03,-0.62,0.29,0.53,1.35,1.5,1.39,1.5,1.15,1.42,1.24,2.1,2.42,3.14,3.12,2.75,2.95,2.67,2.29,2.5,2.47,2.54,2.75,2.78,2.7,3.03,3.62,4.05,4.45,4.71,5.61,5.9,6.2,6.72,7.36,7.85,8.35,9.3,9.87,11.4,11.92,13.19,14.59,15.59,16.42,18.8,20.7,22.06,23.85,24.1,24.16,23.83,24.17,23.88,24.03,23.57,23.04,22.72,22.05,21.38,21.3,20.62,20.24,19.47,19.31,18.56,17.87,16.97,16.75,15.79,14.64,13.42,13.4,12.58,12.37,11.79,11.15,10.32,10.32,9.26,8.82,9.27,9.41,9.87,9.99,10.47,11.01,11.03,11.63,11.94,11.91,14.31,17.17,18.17,18.76,18.82,18.73,18.74,18.83,18.04,16.82,15.85,15.14,15.1,14.98,14.9,14.95,15.83,16.82,18.46,19.09,20.23,20.64,20.62,20.78,20.17,18.47,17.64,16.49,16.4,15.57,14.81,14.53,14.69,14.66,15.07,14.72,14.88,14.9,13.87,12.15,10.9,9.12,8.59,8.17,7.67,7.64,7.05,6.96,6.04,5.53,4.69,4.25,3.36,3,3.11,3.01,2.77,2.75,2.76,2.85,2.35,2.31,2.04,2.28,2.37,1.59,1.6,0.84,0.69,0.17,0.01,0.05,0.24,0.12,0,-0.06,-0.21,-0.02,-0.24,-0.53,-0.57,-0.46,-0.34,-0.33,-0.43,-0.66,-0.64,-0.71,-0.66,-0.51,-0.34,-0.25,-0.22,-0.51,-0.57,-0.64,-0.46,-0.55,-0.66,-0.29,-0.44,-0.64,-0.75,-0.67,-0.21,-0.4,-0.77,-0.6,-0.53,-0.38,-0.54,-0.22,-0.72,-0.57,-0.5,-0.53,-0.54,-0.29,-0.85,-1.49,-1.93,-1.28,-1.05,-0.54,-0.24,-0.28,-0.44,-0.45,-0.63,-0.35,-0.68,-0.56,-0.3,-0.21,-0.3,-0.34,0.07,-1.16,-1.03,-1.12,-0.83,-1.22,-1.11,-1.15,-0.84,-0.89],[-0.97,-0.9,-1.12,-0.77,-1.25,-0.85,-1.01,-1.1,-1.22,-0.69,-0.89,-0.67,-0.96,-0.82,-0.97,-1.03,-0.55,-0.71,-0.59,-0.28,-0.3,-0.57,-0.16,-0.37,-0.39,0.13,-0.27,0.16,0.01,-0.44,-0.4,-0.79,-1.07,-0.91,-1.33,-1.11,-1.45,-1.67,-1.7,-1.66,-1.45,-2,-1.94,-1.95,-1.5,-1.63,-1.65,-1.32,-1.03,-0.23,-0.34,0.26,0.67,1.28,1.3,1.35,1.25,1.13,1.27,1.46,1.22,1.43,1.7,1.69,2.05,2.08,2.19,1.56,1.67,1.36,0.79,0.63,1.21,1.47,1.81,2.13,2.11,2.6,2.58,3.66,4.99,6.21,7.53,9.06,10.94,13.36,13.21,13.59,13.87,15.06,16.04,17.93,18.82,19.78,20.83,22.03,22.94,23.65,24.67,25.96,26.5,27.51,28.16,28.06,28.2,28.24,28.11,27.62,26.99,26.73,25.98,25.94,25.71,25.57,25.42,25.61,25.5,25.55,25.41,25.26,25.7,26.02,26.64,26.58,27.36,27.69,28.01,28.45,29.49,29.58,30.91,32.09,32.9,33.94,35.14,35.64,36.44,37.02,37.56,38.78,39.59,40.1,40.32,39.43,40.2,38.6,34.54,31.01,28.48,26.05,23.74,22.8,21.77,20.45,19.83,18.42,17.37,16.27,15.12,13.87,12.53,10.87,10.45,10.01,10.2,10.11,9.91,10.85,11.84,12.39,11.9,12.27,13.03,13.69,15.17,16.54,17.45,17.31,17.51,17.48,16.2,14.46,13.15,12.47,11.83,10.74,9.58,8.93,9.2,9.52,10.22,10.95,11.26,12.46,13.16,13.82,13.32,12.93,12.62,11.27,9.75,7.9,6.25,4.16,2.44,2.95,2.68,3.04,2.97,3,2.94,2.33,2.11,1.61,1.38,1.06,1.13,0.6,0.78,0.72,0.75,0.76,0.35,0.63,0.41,0.61,0.31,0.7,0.82,0.37,0.6,0.31,0.49,0.5,0.25,0.7,0.13,0.4,0.47,0.37,0.54,0.08,0.55,0.08,0.08,0.22,0.12,0.43,0.46,0.07,0.3,0.12,0.06,0.29,-0.09,-0.09,-0.1,-0.01,0.19,-0.2,-0.04,-0.2,-0.28,-0.05,-0.11,-0.16,0.14,-0.19,-0.18,0.14,-0.07,-0.28,0.09,-0.46,-0.31,-0.34,0.02,-0.53,-0.23,-0.37,-0.05,-0.24,-0.31,-0.15,-0.33,-0.46,-0.16,-0.36,-0.66,-0.24,-0.67,-1.23,-1.91,-1.56,-1.47,-1.12,-0.4,-0.35,-0.12,0.24],[-1.47,-1.18,-1.09,-1.37,-1.28,-1.08,-1.44,-1.22,-1.25,-1.1,-1.22,-1.6,-1.46,-1.27,-1.59,-1.35,-1.21,-1.34,-1.13,-1.08,-1.05,-1.29,-1.11,-1.12,-1.08,-0.93,-0.7,-0.65,-0.93,-0.86,-0.62,-0.89,-0.46,-0.74,-0.72,-0.7,-0.53,-0.16,-0.23,0.26,0.16,0.75,0.68,0.42,-0.01,0.05,-0.12,-0.79,-0.93,-0.88,-0.53,-0.87,-0.44,-1.01,-0.77,-0.28,-0.2,0.42,0.65,0.83,0.57,0.37,0.36,0.05,0.32,-0.06,0.28,1.2,1.39,2,2.77,2.59,1.85,1.46,1.61,1.52,1.96,2.42,2.61,3,3.69,4.03,4.01,4.29,4.1,4.05,4.21,4.01,4.6,5.49,5.86,6.78,7.28,7.96,9.01,9.82,10.55,11.69,13.4,15.24,17.35,19.64,21.57,23.97,26,29.15,32.68,33.73,34.26,34.27,34.53,33.61,32.68,31.76,30.79,29.99,29.28,28.17,27.23,25.71,24.82,23.31,22.04,21.09,19.8,18.22,16.98,15.58,14.72,13.53,13.02,11.84,10.97,10.4,9.97,10.22,10.08,10.44,10.3,11.05,11.43,11.95,12.3,11.77,10.87,10.62,10.11,9.4,8.99,8.34,8.51,8.25,8.1,8.27,8.58,8.58,8.96,9.48,9.81,10.25,10.67,10.61,10.57,10.36,10.79,11.42,11.94,12.16,11.97,11.69,11.6,12.06,11.63,11.64,11.6,12.06,11.81,11.67,11.62,12.13,12.53,12.68,13.23,14.01,14.01,14.45,15.09,15.59,16.04,16.02,14.52,13.02,11.47,11.25,11.03,10.76,10.44,9.71,9.66,9.66,9.21,9.29,9.3,9.19,9.14,8.59,8.4,7.5,6.63,5.46,5.16,4.42,3.9,4.06,3.57,3.01,2.78,2.43,2.3,1.97,1.98,1.53,1.53,1.22,1.34,1.03,1.41,1.1,0.97,0.29,0.27,0.1,-0.13,-0.26,0.12,0.19,-0.27,-0.26,0,-0.14,0.14,0.34,0.01,0.1,-0.02,-0.03,0.35,0,0.06,0.4,-0.11,-1.23,-1.25,-0.76,-0.5,0.15,0.27,0.07,0.28,-0.12,0.1,0.19,0.28,0.35,-0.22,-0.59,-0.6,0.15,0.38,0.48,0.31,0.27,0.23,0.37,0.04,0.3,-0.09,0.31,0.33,0.1,-0.11,-0.44,-0.4,-0.29,-0.59,-0.39,-0.46,-0.51,-1,-1.17,-0.58,-0.49,-0.27,-1.2,-0.46,-0.46,-0.4,0.03,0.16,0.86],[-0.47,-0.52,-0.44,-0.72,-0.45,-0.98,-1.26,-1.05,-1.42,-1.84,-2.25,-2.47,-2.07,-2.02,-1.84,-1.69,-1.31,-1.67,-1.53,-0.96,-1.06,-0.66,-0.87,-0.83,-0.85,-0.45,-0.43,-0.1,0.07,-0.05,0.13,0.3,0.24,0.47,0.64,0.37,0.53,0.48,0.49,0.43,0.44,0.46,0.11,0.16,0.17,-0.5,-0.18,-0.42,-0.75,-0.86,-0.69,-0.55,-0.52,-0.94,-0.81,-1.02,-0.47,0.44,0.96,0.77,0.98,0.64,0.92,1.58,2.88,2.94,2.94,2.69,2.54,2.5,2.15,2.27,2.48,2.75,2.97,2.97,3.13,2.97,2.73,2.44,1.97,2.47,3.19,3.61,3.43,2.93,2.78,3.19,3.29,3.84,4.26,4.8,4.93,4.86,5.32,7.08,8.5,8.91,9.81,10.26,11.08,11.91,12.5,13.43,15.2,16.99,18.5,20.06,21.81,23.52,26.01,28.85,31.99,35.22,37.83,40.91,41.79,42.17,44.2,47.53,48.87,49.89,47.32,43.49,40.8,38.92,36.99,34.46,31.63,28.35,25.24,23.65,21.52,19.61,17.96,17.72,17.33,17.16,16.48,16.53,16.3,15.75,15.39,14.66,13.15,12.48,10.88,10.28,9.38,10.05,9.93,10.63,11.09,11.32,11.73,11.13,10.91,10.23,9.54,9.01,8.01,7.33,6.78,6.85,7.08,6.66,6.62,6.67,6.66,7.09,6.89,6.92,6.98,6.99,7.04,7.23,6.87,6.91,7.21,6.56,6.5,6.25,6.43,6.07,6.16,5.94,5.63,6.16,7.1,6.33,5.64,5.99,6.18,6.29,6.52,5.65,4.51,3.25,2.35,0.7,0.47,1.28,2.18,2.03,2.25,2.02,1.76,1.23,1.15,0.59,0.35,0.49,0.32,0.05,0.33,0,0.39,0.97,1.07,1.39,1.31,1.12,0.78,-0.11,-0.31,0.38,0.7,1.57,1.7,0.85,0.53,0.08,-0.1,-0.21,-0.17,-0.26,0.03,0.14,-0.37,-0.04,-0.25,-0.09,-0.28,0.03,-0.33,-0.25,-0.41,-0.15,-0.4,-0.69,-0.74,-0.74,-1.42,-1.61,-1.26,-0.71,-0.31,-0.4,-0.04,-0.58,-0.65,-0.53,-0.51,-0.42,-0.99,-0.65,-0.73,-0.6,-0.52,-0.07,-0.06,0.01,-0.23,0.17,0.09,0.37,0.16,-0.35,-0.32,-0.65,-1.02,-0.83,-0.97,-0.54,-0.16,-0.01,-0.04,0.41,0.07,0.12,0.34,0.3,-0.15,0.3,0.07,-0.19,-0.19,-0.34,-0.5,-0.34],[-1.47,-1.4,-1.21,-0.92,-0.96,-0.57,-1.13,-0.84,-1.22,-1.42,-1.34,-1.51,-0.95,-0.15,0.2,0.19,0.23,0.21,-0.01,0.01,-0.21,-0.45,-0.38,-0.43,-0.32,0.28,0.6,0.74,0.2,-0.46,-0.92,-0.99,-0.89,-1.17,-1.18,-1.09,-1.24,-0.8,-0.98,-1.16,-1.04,-1.04,-0.85,-1.07,-0.86,-0.71,-0.69,-0.67,-1.16,-0.75,-0.75,-1.01,-0.78,-0.61,-0.8,-0.66,-0.69,-1.08,-0.55,-1.05,-0.95,-0.69,-0.67,-0.98,-0.74,-0.21,-0.23,-0.91,-0.98,-1.03,-0.63,0.38,0.14,0.1,-0.13,0.45,1.52,1.72,1.58,1.84,1.54,1.88,1.64,1.93,2,1.9,1.78,1.6,1.91,2.05,1.38,1.1,1.38,1.32,1.46,1.17,1.32,1.03,1.05,1.13,1.01,1.27,1.21,1.22,1.05,1.15,1.27,1.35,1.46,1.07,1.13,1.42,1.25,1.11,1.55,1.9,2.98,3.61,3.99,4.82,5.65,6.12,6.85,7.65,8.58,9.41,10.03,10.68,11.33,11.83,12.7,13.08,14.14,14.44,15.23,16.01,16.3,23.92,27.52,28.5,28.69,28.87,29.02,28.43,27.76,27.06,26.28,25.46,24.99,24.3,23.74,23.3,21.54,21.88,22.48,23.38,24.61,26.06,26.35,26.07,26.43,26.06,24.4,22.28,21.11,20.09,18.59,18.08,18,17.35,16.05,14.9,14.41,13.97,12.98,12.89,11.99,11.57,11.41,10.63,10.74,10.26,8.74,7.01,6.7,6.31,6.26,6.41,6.24,6.16,6.43,6.22,5.79,6.27,6.12,5.86,5.52,5.21,5.22,4.89,4.85,4.46,4.28,3.99,3.61,3.4,3.54,3.24,3.04,2.58,2.08,2.05,2.21,2.23,2.77,2.58,2.76,2.56,2.72,2.14,2.33,1.92,2.03,1.5,1.64,1.32,1.22,0.95,0.35,0.65,0.27,0.27,0.52,0.22,0.67,0.54,1.06,1.26,1.35,1.17,1.31,1.27,1.29,1.19,0.84,0.78,0.86,0.66,0.64,0.12,0.36,0.04,-0.14,-0.79,-1.58,-1.89,-1.06,-0.44,-0.15,-0.07,-0.07,-0.08,-0.04,-0.41,-0.18,-0.34,-0.17,-0.55,-0.58,-0.14,-0.53,-0.67,-0.33,-0.85,-0.93,-0.57,-1,-0.61,-0.7,-0.81,-0.9,-0.57,-0.83,-0.98,-0.94,-1.02,-1.04,-0.83,-0.77,-0.96,-0.96,-0.52,-0.86,-0.37,0.07,0.53,0.64,-0.27,-0.52,-0.3],[-0.31,-0.8,-0.41,-0.87,-0.5,-0.73,-0.64,-0.78,-0.44,-0.77,-0.67,-0.49,-0.94,-0.48,-0.51,-0.75,-1,-0.76,-0.56,-0.97,-0.68,-0.73,-1.03,-0.92,-1.21,-1.18,-0.8,-0.76,-0.87,-1.1,-1.14,-1.02,-1.22,-1.07,-1.2,-0.96,-0.48,-0.36,-0.44,-0.44,0.04,0.07,0.24,0.49,0.12,0.29,0.73,0.58,0.54,0.4,-0.07,-0.3,0.42,0.78,1.19,2.07,2.56,2.43,2.32,1.54,1.33,0.94,1.15,1.21,1.36,1.72,1.82,1.71,1.9,2.15,2.43,2.4,2.7,2.55,2.94,2.74,3.25,3.06,2.97,3.19,3.77,3.49,3.61,4.61,5.1,5.63,6.03,6.02,6.18,5.99,6.18,6.87,6.57,7.26,6.96,7.67,7.33,7.61,8.27,8.12,8.27,8.78,8.91,8.67,9.2,9.03,9.95,11.12,12.38,12.99,14.32,15.26,16.35,17.96,20.75,22.78,25.7,28.51,31.45,33.04,34.13,34.07,33.72,36.16,37.78,44.29,44.36,44.58,44.53,44.42,43.33,43.19,43.93,40.53,38.87,36.98,35.07,32.65,30.82,29.68,27.9,26.5,25.2,23.91,22.69,20.87,20.12,19.82,19.05,18.63,18.44,17.71,17.49,16.89,16.64,15.74,15.63,15.97,15.92,15.75,15.83,15.7,14.86,14.38,13.59,13.07,12.63,12.42,11.69,11.54,11.39,10.97,10.42,10.11,9.46,9.4,9.12,8.66,8.1,8.14,8.3,8.22,8.31,8.08,7.7,7.6,7.83,7.78,7.8,7.42,7.68,7.75,7.59,7.38,7.68,7.3,7.15,7.25,7.61,7.81,7.44,7.79,7.76,7.22,6.74,6.56,5.6,5.37,4.71,4.2,3.77,2.86,2.59,1.72,1.23,1.01,0.92,0.86,0.82,0.64,0.5,0.27,0.48,0.35,0.29,0.14,0.24,0.87,0.56,0.4,0.36,-0.11,-0.01,-0.1,-0.11,-0.16,-0.23,-0.05,-0.06,0.15,0.17,0.72,1.14,0.94,-0.14,-0.43,-0.05,-0.25,-0.1,-0.13,-0.17,0.18,-0.1,0.1,1.11,1.77,1.33,0.54,-0.23,0.02,0.12,-0.14,-0.35,-0.26,-0.05,0.02,-0.37,0.01,-0.38,-0.5,-0.43,0.24,1.2,1.05,0.51,-0.4,-0.29,-0.44,-0.03,-0.19,0.08,-0.26,-0.87,-0.73,-0.06,0.34,0.27,0.27,0.42,-0.26,-0.04,-0.16,-0.29,-0.77,-1.23,-1.62,-2.06,-2.33,-2.83,-3.1],[0.71,0.63,0.16,0.22,-0.09,0.07,0,-0.39,-0.23,-0.27,-0.37,-0.67,-0.33,-0.51,-0.65,-0.24,-0.61,-0.33,-0.35,0.12,0.32,0.86,1.11,0.85,0.63,0.46,0.11,0.08,0.1,-0.24,0.19,-0.2,-0.04,-0.04,-0.33,-0.19,-0.09,-0.4,-0.3,-0.31,-0.32,-0.92,-0.98,-1.01,-1.13,-0.9,-1.38,-1.54,-1.3,-1.76,-1.72,-1.61,-1.31,-1.56,-1.23,-1.47,-1.29,-1.09,-1.12,-0.5,0.78,1.99,2.44,3.12,2.94,2.59,2.16,1.75,1.11,0.64,1.24,1.23,2.25,2.49,2.87,3.49,4.23,3.99,4.14,3.99,3.63,4.03,4.1,4.17,3.94,4.89,5.73,6.42,7.24,8.24,8.85,9.96,10.91,12.14,12.74,15.21,17.18,19.23,21.46,23.33,23.9,24.3,24.88,25.37,25.91,26.58,26.6,27.46,28.66,29.56,31.14,32.54,32.97,32.8,33,33.17,32.81,32.31,31.54,30.49,29.58,29,27.26,25.32,22.99,20.94,20.43,20.44,21.11,21.32,21.3,21.49,22.07,23.25,26.38,28.26,29.72,29.38,28.26,26.42,25.44,24.46,23.83,23.11,22.52,21.84,21.44,20.6,20.04,19.55,18.83,18.32,17.89,17.17,17.28,16.81,16.21,16.1,15.99,15.52,15.19,14.72,15.28,15.18,15.64,15.44,15.88,16.04,16.37,16.68,16.99,16.76,17.13,16.96,17.09,17.18,17.2,17.38,17.26,17.51,17.75,17.98,18.05,18.65,18.57,19.12,19.05,19.06,18.68,18.88,18.63,18.5,17.83,17.59,16.93,16.47,16.19,15.7,15.59,15.13,14.6,14.28,14.51,14.33,14.53,14.28,14.27,13.32,12.14,10.76,10.21,8.83,8.34,7.91,6.92,6.35,5.82,5.13,4.39,3.69,3.81,3.94,3.51,3.67,3.21,3.56,3.26,2.66,2.67,1.87,2.07,1.52,1.18,0.64,0.64,0.33,0.23,-0.04,-0.07,-0.02,0.01,-0.45,-0.17,-0.39,-0.44,-0.34,0.13,-0.29,-0.14,-0.06,0.24,0.14,-0.03,0.04,-0.15,0.31,-0.19,-0.04,0.28,0.17,-0.04,-0.11,-0.19,-0.07,0.03,-0.09,-0.16,0.21,-0.13,0.25,0.15,-0.01,0.15,-0.25,-0.04,-0.19,0.15,-0.2,0.19,-0.11,-0.16,-0.39,-0.16,-0.22,-0.31,0.08,0.04,0.1,0.13,0,-0.24,-0.4,0.07,0.05,0.01,-0.34,-0.14,-0.45,-0.1,-0.48],[-0.9,-0.51,-0.99,-0.74,-0.62,-0.62,-0.49,-0.62,-0.5,-0.1,0.33,0.13,0.22,-0.11,-0.04,0.05,0.29,0.11,0.25,-0.14,-0.42,-0.36,-0.24,-0.53,-0.68,-0.62,-0.72,-0.92,-0.97,-1.2,-1.07,-0.87,-0.62,-0.85,-0.68,-0.37,-0.46,-0.47,-0.54,-0.21,-0.28,-0.57,-0.57,-0.11,-0.05,-0.34,-0.16,0,0.12,0,0.04,0.01,0.66,0.68,1.1,1.68,1.56,1.29,1.49,1.2,1.21,0.93,0.63,0.89,0.51,0.68,0.7,0.81,1.59,1.79,1.97,1.58,1.55,1.95,1.66,1.81,1.9,2.08,2.24,2.83,2.95,2.96,3.1,3.41,3.82,4.12,4.85,5.35,5.6,6.33,6.97,7.69,8.44,9.15,9.78,10.34,10.76,12.01,13.95,14.53,14.91,15.03,14.74,14.6,14.85,14.76,14.83,15.07,16.34,17.6,18.81,20.11,21.09,22.54,23.26,24.57,25.38,25.74,26.4,26.66,26.45,26.47,26.75,26.75,26.79,26.84,26.58,26.97,26.74,27.06,27.09,27.41,27.26,27.82,28.08,27.87,28.65,28.61,28.99,29.14,28.93,28.85,28.84,29.13,29.07,28.39,27.58,26.26,25.22,23.98,23.2,22.09,22.26,21.87,21.77,22.07,21.82,21.73,21.89,21.92,21.58,21.67,20.77,19.8,18.95,17.83,16.56,15.23,14.33,13.5,13.73,13.13,13.26,12.78,12.68,12.82,12.19,11.87,12.11,11.98,11.51,11.25,11.07,10.81,10.6,10.46,10.25,9.91,9.45,9.63,8.95,8.55,8.6,8.13,7.62,7.44,7.54,7.17,6.77,6.52,6.27,5.76,5.28,4.98,4.73,4.39,3.57,3.66,5.02,4.71,4.12,3.55,2.72,2.6,2.46,2.47,3,2.85,2.51,2.62,2.67,2.74,3,2.28,1.15,0.63,-0.07,-0.98,-0.43,0.87,1.06,0.93,0.79,0.46,0.68,0.44,0.05,0.06,-0.17,-0.17,0.25,-0.07,-0.25,0.09,0.15,-0.29,-0.16,0.03,-0.24,-0.08,-0.35,0.04,-0.06,-0.18,-0.36,-0.16,-0.4,-0.29,-0.01,0.14,-0.11,0.2,-0.09,0.02,-0.45,-0.45,-0.82,-0.73,-0.93,-0.66,-0.64,-0.32,-0.63,-0.38,-0.18,-0.05,-0.24,0.07,-0.04,-0.24,-0.09,-0.34,-0.01,-0.3,-0.25,-0.24,-0.17,-0.1,0.01,-0.11,0.15,0.05,-0.26,0.25,-0.11,0.35,0.29,0.12,0.28,-0.15],[-0.68,-0.45,-0.49,-0.09,-0.19,-0.12,0.08,0.18,0.04,0.02,-0.05,0.1,0.07,0.4,0.04,0.24,0.06,-0.05,-0.06,-0.25,-0.57,-0.18,-0.74,-0.79,-0.72,-0.43,-0.58,-0.78,-0.68,-0.49,-1.05,-0.52,-0.77,-0.57,-1.01,-1.12,-1.06,-0.78,-0.66,-0.76,-0.73,-0.64,-0.66,-0.79,-0.89,-1.01,-1.05,-0.73,-0.74,-0.92,-0.69,-0.69,-0.85,-0.58,-0.53,-0.44,-0.61,-0.37,0.05,0.11,0.24,0.02,0.41,0.51,0.22,0.41,0.97,1.33,1.63,1.69,1.75,1.69,2.09,2.1,2.45,2.53,2.3,2.34,2.34,1.92,1.91,2.46,3.41,3.86,4.38,4.6,5.29,5.71,6.5,7.55,8.39,9.8,10.45,11.62,13.06,14.07,15.1,16.19,17.57,17.88,18.39,19.12,19.25,20.29,20.57,21.12,21.47,22.24,22.71,23.45,23.74,24.62,25.16,25.84,26.71,28.03,29.08,30.14,31.72,33.91,35.71,38.12,40.12,41.39,43.78,47.27,47.27,48.09,47.61,46.35,45.32,44.22,42.23,39.28,36.06,33.28,31.65,30.46,29.6,28.67,27.91,27.12,26.72,27.06,26.88,26.99,27.6,26.65,25.98,25.58,24.86,24.32,23.5,23.25,22.48,21.95,21.67,20.79,20.6,20.02,19.5,20.44,20.81,21.49,22.31,22.83,25.17,26.72,29.14,30.81,32.48,33.48,34.96,36.09,36.07,35.52,34.86,33.03,31.69,29.77,27.39,25,23.32,21.2,19.27,17.92,15.86,14.32,13.43,12.6,12.26,11.47,10.95,9.9,8.92,7.65,6.66,5.55,3.91,3.04,1.54,0.66,0.84,1.31,0.92,1.37,1.44,1.77,1.86,1.61,1.33,1.15,1.3,1.39,1.09,0.59,0.48,0.79,0.61,0.6,0.3,0.55,0.43,0.7,0.31,-0.01,-0.01,-0.11,-0.27,-0.29,-0.56,-1.05,-0.57,0,0.09,0.55,0.71,0.47,0.54,0.57,0.54,0.43,0.77,0.31,0.3,0.52,0.31,0.03,0.34,-0.07,0.41,0.04,-0.24,0.1,0.22,0.02,-0.42,0.06,-0.27,-0.54,-0.18,-0.43,-0.31,-0.6,-0.83,-0.86,-0.77,-0.65,-0.68,-0.41,-0.37,-0.75,-0.76,-0.73,-0.67,-0.37,-0.67,-0.44,-0.48,-0.58,-0.63,-0.5,-0.07,-0.2,-0.04,0.08,0.28,-0.3,-0.49,-0.32,-0.28,-0.15,-0.28,0.04,-0.18,0.4,0.12,0.32,0.43,0.84],[-1.13,-0.83,-1.05,-1.13,-1.32,-1.12,-1.22,-1.28,-1.01,-1.14,-1.09,-0.97,-1.28,-1.53,-1.48,-1.95,-1.93,-2.11,-1.66,-0.97,-1.11,-0.57,-0.46,-0.77,-0.75,-0.52,-0.67,-0.9,-0.92,-1.39,-1.69,-1.45,-0.75,-0.14,0.97,1.04,0.74,0.55,0.28,0.02,-0.05,0.03,0.02,-0.09,-0.36,-0.27,-0.09,-0.42,-0.16,0.05,0.02,0.03,0.65,1.11,1.16,1.87,1.66,2.16,1.4,1.18,0.33,0.09,0.38,0.65,1.3,1.67,1.76,1.73,1.96,1.74,2.06,2.21,2.64,2.82,2.92,3.61,3.59,4.11,4.73,5.18,5.42,6.28,6.76,7.5,9.06,10.37,10.57,10.65,11.17,11.25,11.11,11.92,13.65,15.33,16.86,18.42,20.16,21.77,23.34,24.84,25.64,27.09,28.03,28.06,27.45,27.06,26.73,25.76,24.04,21.99,20.5,18.84,16.91,16.26,15.86,15.38,14.71,14.05,13.64,12.97,12.86,12.51,12,12.31,12.82,13.2,13.13,13.47,14.17,14.12,14.86,15.3,15.62,16.25,16.59,16.92,16.92,17.05,16.93,16.77,16.56,16.68,16.43,16.59,16.17,16.1,15.54,15.01,15.23,14.97,14.22,14.01,13.85,13.94,12.94,11.89,10.52,9.39,9.47,9.97,10.33,10.3,10.36,9.78,9.36,8.84,8.75,9.1,9.26,9.48,9.74,10.23,10.74,10.76,10.25,10.07,10.33,9.84,10.28,10.67,11.04,11.25,11.54,11.43,11.76,11.46,10.57,10.29,9.73,9.49,8.93,9.97,11.63,12.92,13.95,14.41,13.92,14.04,13.6,13.44,12.26,11.89,10.78,9.85,8.42,6.77,5.66,5.7,5.17,4.95,4.61,4.27,3.46,3.21,2.82,2.51,2.2,2.48,2.27,2.4,2.31,1.83,1.58,1.04,0.45,0.64,0.09,0.44,0.49,0.31,0.51,0.51,0.15,0.59,0.46,-0.03,-0.2,-0.5,-0.1,0.21,0.09,0.1,0.06,-0.1,-0.23,-0.17,-0.23,0.01,0.25,0.06,-0.33,-0.09,0.05,0.1,0.16,-0.32,0.1,0,0.08,-0.14,-0.12,0.07,-0.22,-0.21,-0.54,-0.8,-0.8,-0.71,-1.04,-1.03,-1.05,-0.7,-0.92,-0.22,0.08,-0.15,0.07,-0.1,-0.42,-0.63,-0.19,-0.02,0.3,0.05,0.22,-0.19,0.22,0.13,-0.28,0.11,-0.15,-0.03,-0.06,-0.27,0.05,0.04,-0.45,-0.29,-0.29,-0.04],[-1.78,-1.71,-1.23,-1.43,-1.23,-1.06,-0.67,-0.79,-0.75,-1.06,-0.57,-1.08,-0.74,-0.54,-0.52,-0.16,-0.14,-0.2,-0.06,-0.06,-0.02,0.01,-0.16,-0.18,-0.23,-0.15,0.05,0.07,-0.01,0.08,0,0.21,-0.22,0,-0.15,-0.17,0.2,0.06,-0.19,0,-0.01,-0.03,0.47,0.36,0.32,0,0.13,-0.6,-0.45,-0.64,-0.73,-0.8,-0.67,-0.7,-0.31,-0.57,0.1,-0.02,0.23,0.55,0.94,1.07,1.23,1.69,2.29,2.63,3.02,2.93,2.74,2.75,2.76,2.72,2.58,2.72,2.84,2.55,2.34,2.4,2.44,2.3,2.66,2.91,4.03,4.59,5.48,6.26,7.24,8.97,10.02,11.45,12.91,14.3,17.35,20.8,24.53,27.85,31.91,34.86,38.81,42.29,48.96,56.21,62.17,68.33,72.77,73.98,74.16,74.12,72.44,68.52,64.61,60.67,55.65,51.14,47.45,44.55,41.16,37.51,33.42,29.88,27.68,26.08,24.57,20.76,19.11,18.44,17.71,16.87,16.5,16.26,16.58,16.78,17.03,17.36,17.5,19.46,22.05,22.71,23.66,24.55,24.74,24.89,25.43,25.85,25.99,26.05,24.72,23.93,22.4,21.41,20.38,18.55,17.85,16.57,15.75,15.18,14.16,13.2,13.07,12.48,11.77,11.76,11.08,10.81,10.54,10.37,10.82,10.59,10.31,10.46,10.59,10.32,10.19,9.86,10.21,10.16,9.89,9.97,10.49,10.83,11.03,11.78,12.47,12.93,13.39,13.91,14.16,14.64,15,15.58,16.46,17.21,17.37,17.31,16.76,16.8,16.86,16.58,15.93,14.91,13.57,13.12,12.09,11.07,10.19,9.66,9.24,8.26,7.61,7.01,7.1,6.65,6.12,5.85,5.75,4.44,3.63,2.53,2.16,2.28,2.36,2.3,2.49,2.29,1.9,1.36,1.27,0.78,0.34,0.07,0.59,0.16,0.31,0.42,-0.4,-0.76,-0.17,-0.36,-0.53,0,-0.05,-0.44,-0.05,0.02,-0.02,-0.17,-0.12,0.37,0.34,0.33,0.28,-0.21,-0.59,-0.83,-0.48,-0.47,-0.47,-0.44,0.04,0.13,0.32,-0.09,0.23,0.08,0.09,0.17,0.23,-0.17,0.14,-0.14,0.06,0.07,0,0.15,0.1,-0.24,0.3,0.09,-0.1,-0.03,-0.06,0.23,-0.09,-0.2,0.26,-0.11,-0.16,0.2,0.21,-0.15,0.27,0.1,-0.17,-0.08,0.17,-0.16,-0.26,-0.17,-0.14,-0.17],[-1.3,-1.01,-1.09,-1.26,-1.18,-1.24,-0.82,-1.02,-1.31,-0.91,-0.78,-1.03,-0.79,-1.17,-1.08,-0.55,-0.49,-0.64,-0.46,-0.46,-0.4,-0.26,-0.34,-0.38,-0.36,-0.2,-0.59,-0.6,-0.62,-0.51,0.02,0.7,0.77,1.36,0.85,0.53,0.13,-0.01,-0.13,0,-0.03,0.02,-0.05,-0.01,-0.12,-0.12,-0.11,0.13,0.04,-0.36,-0.23,-0.36,-0.16,-0.35,-0.09,0.05,0.27,0.48,0.29,-0.19,-0.05,0.56,0.96,0.73,-0.14,-0.22,0.08,-0.05,0.12,-0.08,0.04,-0.08,0.87,1.03,1.2,1.26,1.21,1.31,2.34,3.14,2.78,2.78,3.4,3.78,4.86,5.04,4.81,5.15,5.69,5.59,6.54,7.19,7.77,8.41,9.02,10.04,10.82,11.76,12.57,13.71,14.98,16.32,17.3,18.17,20.1,21.41,23.43,25.48,28.19,30.91,31.23,31.28,35.06,35.13,35.42,33.92,32.2,30.74,29.28,28.1,27.12,25.48,24.6,23.2,22.07,20.97,19.5,18,17.42,17.48,17.29,17.27,17.35,17.64,17.44,16.94,16.92,17.17,16.56,16.03,16.23,15.55,15.16,14.52,14.13,13.79,14.62,14.81,15,14.66,14.57,14.3,13.82,13.32,13.23,13.38,13.31,13.15,13.17,13.21,13.53,13.69,14.11,14.25,14.91,15.4,16.45,17.06,17.94,17.91,17.24,15.75,14.68,13.62,12.65,11.75,11.28,11.37,10.88,10.64,10.01,9.7,8.66,7.97,7.29,6.89,6.08,5.89,6.21,6.5,6.62,6.51,6.58,7.1,7.64,7.69,7.84,7.81,7.53,7.87,6.78,5.64,5.02,4.52,4.2,3.69,3.51,3.56,3.19,3.51,3.42,3.29,3.17,3.48,3.24,2.84,2.66,2.46,2.26,2.14,2.09,2.15,1.78,2.18,1.51,1.11,0.97,0.62,0.62,0.55,0.33,0.38,0.33,0.08,0.24,0.36,0.04,-0.07,0.04,0.14,0.09,0.24,-0.14,-0.18,-0.16,0.01,-0.44,-0.36,-0.76,-0.63,-0.64,-0.29,-0.4,0.02,-0.13,0.05,0.12,-0.06,-0.55,-0.97,-0.69,-0.91,-0.94,-0.35,-0.45,-0.39,0.04,-0.07,-0.24,0.32,-0.03,0.13,0.28,0.26,0.08,0.37,0.29,-0.18,0.1,-0.18,0.1,0.29,0.28,0.19,-0.15,-0.24,-0.14,-0.04,-0.16,-0.34,-0.22,0.03,-0.14,-0.08,-0.05,0.1,0.09,-0.45,-0.26,0.06],[-0.78,-0.65,-0.34,-0.67,-0.8,-0.59,-0.62,-0.57,-0.85,-1.02,-0.85,-0.99,-0.87,-0.73,-0.8,-0.33,-0.69,-0.04,-0.16,0.34,0.12,0.46,0.14,0.04,0.4,0.35,0.15,0.28,-0.02,0.07,-0.11,0.18,-0.19,-0.11,-0.21,0.16,-0.42,0.08,-0.25,-0.33,-0.45,-0.36,-0.23,0.05,-0.28,0.11,0.2,-0.27,0.15,-0.19,-0.09,0,-0.15,-0.03,-0.16,0.08,-0.05,-0.16,-0.09,0.21,0.19,0.29,-0.07,0.46,0.67,0.55,0.89,1.35,1.84,1.65,1.75,1.7,1.86,1.87,1.96,1.84,2.04,1.91,1.71,1.58,2.06,1.78,2.28,2.91,3.16,3.67,4.11,4.58,4.58,4.62,4.83,5.02,5.54,5.39,5.59,5.62,6.06,5.88,5.96,6.02,6.54,7.19,7.46,8.15,8.84,9.42,9.99,11.64,13.26,15,16.41,18.32,20.75,21.68,23.14,24.21,25.13,25.8,26.56,30.23,33.71,37.49,40.78,47.38,50.18,51.65,51.24,49.74,48.07,46.43,43.26,40.15,37.35,34.73,32.02,29.66,27.62,24.64,22.44,21.12,20.64,20.1,19.07,18.64,17.83,17.43,17.3,17.06,17.17,16.99,17,16.71,16.76,15.98,15.88,15.5,15.42,15.36,15.59,14.76,14.37,13.79,13.18,12.5,11.88,11.62,11.19,10.29,9.86,9.25,8.67,8.21,7.98,7.43,6.54,6.75,6.98,6.79,6.64,6.78,7.08,6.54,6.42,6.23,6.48,5.9,5.93,5.66,5.74,5.35,5.43,5.36,5.25,5.15,4.76,4.4,4.47,4.29,4.32,4.17,4.06,3.78,3.03,2.81,2.51,2.23,2.02,1.83,1.68,1.76,1.83,1.83,1.56,1.7,1.41,0.9,0.53,0.51,0.15,-0.07,0.04,0.15,0.09,0.06,-0.17,0.25,-0.09,-0.1,0.07,0.2,0.17,0.09,-0.17,0.24,0.08,0.19,-0.29,-0.13,-0.24,-0.31,-0.21,-0.08,0.19,-0.3,0.11,-0.04,-0.01,-0.03,-0.06,-0.08,-0.19,-0.38,-0.24,0,-0.37,-0.19,-0.1,0,-0.37,-0.48,-0.47,-0.47,0.05,-0.17,-0.35,-0.15,-0.3,-0.02,-0.35,-0.44,-0.13,0.02,-0.38,-0.24,0.09,-0.11,-0.08,-0.28,-0.23,0.07,-0.26,-0.23,0.02,-0.33,0.22,0.09,0.1,-0.06,-0.27,-0.25,0.26,-0.28,-0.17,-0.08,0.28,-0.03,0.01,0.2,0.22,0.29],[-1.59,-1.19,-1.16,-0.87,-1.14,-0.71,-0.53,-0.33,-0.08,0.26,0.11,-0.39,-0.2,-0.91,-0.79,-1.07,-1.01,-0.72,-0.87,-0.87,-0.37,-0.28,-0.52,-0.52,-0.35,-0.46,-0.68,-0.34,-0.47,-0.4,-0.73,-0.69,-0.5,-0.98,-1.1,-0.9,-0.78,-0.96,-0.81,-0.98,-1.1,-0.79,-0.81,-0.85,-0.66,-0.57,-0.66,-0.59,-0.58,-0.43,-0.89,-0.82,-0.71,-0.64,-0.35,-0.3,-0.1,-0.18,-0.14,0.07,0.15,-0.11,0.05,0.4,0.62,0.96,0.98,1.01,0.71,1.04,0.71,1.5,1.37,1.79,2.33,2.43,2.85,3.08,3.25,3.29,3.5,3.45,3.85,4.13,4.18,4.18,3.66,4.13,3.6,3.96,4.19,5.21,6.33,6.6,7.7,8.65,8.57,9.49,9.33,10.16,10.04,10.77,11.24,11.2,11.55,12,12.24,12.81,13.14,13.33,13.57,13.94,14.16,14.86,15.2,15.07,15.7,15.89,16.07,16.88,16.97,17.07,17.41,18.09,18.5,19.23,20.23,20.69,21.19,21.98,22.31,22.87,23.13,23.12,22.35,22.07,22.07,21.5,21.13,21.14,20.68,20.19,20.03,19.47,18.84,17.78,17.23,16.11,15.83,15.37,15.32,15.37,15.32,15.53,15.55,16,16.17,16.07,16.35,16.8,17.08,17.7,18.83,19.25,19.78,20.93,21.54,22.07,22.52,23.81,24.43,24.11,22.97,22.55,22.19,22.34,21.8,21.88,21.9,22.64,23.8,25.75,26.41,26.06,26.51,26.49,25.77,24.65,22.31,20.39,17.81,15.73,12.27,9.58,8.38,7.68,6.96,6.62,6.19,5.97,5.55,5.33,4.42,3.68,3.77,3.33,3.42,3.35,2.91,3.03,2.96,3.15,3.21,2.98,3.23,3.22,3.02,2.59,2.22,1.83,1.32,1.3,1.07,1.15,0.66,0.62,0.8,0.35,0.32,0.37,0.5,0.08,-0.18,-0.02,0.09,-0.19,-0.49,-0.27,-0.36,-0.83,-0.8,-0.55,-0.73,-0.87,-0.87,-0.69,-0.51,0.03,0.61,0.46,0.2,0.08,0.04,0.2,-0.22,0,-0.19,-0.32,0.1,0.18,-0.04,-0.25,0.17,0.06,-0.02,0.15,0.14,-0.1,0.03,0.13,-0.34,0.06,-0.28,-0.34,-0.15,0.08,0.11,-0.34,-0.14,0.22,0.14,-0.07,0.07,-0.01,0.11,-0.02,-0.33,-0.57,-0.25,0.3,0.67,0.57,0.48,0.64,0.61,0.77,0.34,0.26,0.56,0.4],[-1.46,-1.84,-1.75,-1.47,-1.25,-1.46,-0.97,-0.79,-1.11,-1.03,-0.87,-0.67,-0.64,-0.59,-0.6,-0.97,-0.62,-0.64,-1.05,-0.76,-0.82,-0.58,-0.91,-0.72,-0.43,-0.37,-0.3,-0.41,-0.32,-0.35,-0.78,-0.49,-0.4,-0.65,-0.62,-0.77,-0.66,-0.54,-0.4,-0.66,-0.48,-0.5,-0.79,-0.51,-0.83,-0.83,-0.55,-0.99,-0.66,-0.63,0.1,0.55,0.64,0.4,0.22,0.46,0.07,0.22,0.57,0.71,1.1,0.75,0.75,1.06,0.76,1.03,0.92,1.05,1.19,1.61,1.47,1.61,1.48,1.38,1.28,1.48,1.76,2.26,2.39,2.87,3.25,3.66,4.29,5.55,7.04,8.65,10.43,12.28,14.05,16.47,18.16,19.27,20.9,22.42,24.1,27.2,30.91,34.33,35.64,37.21,39.33,39.54,37.88,36.03,34.47,32.42,30.9,28.85,26.66,25.69,24.73,23.96,23.28,21.96,20.9,21.06,20.83,21.6,21.56,21.98,22.61,22.87,23.47,22.68,21.96,21.81,21.89,21.89,22.39,23.4,24.09,25.79,26.46,27.45,28.45,29.01,29.4,29.32,28.77,28.45,27.85,27.65,27.75,27.87,28.26,28.4,28.26,27.78,26.82,25.8,23.93,21.78,19.91,19.64,18.57,17.86,16.91,16.53,16.83,16.71,16.05,15.49,14.9,14.67,13.73,13.32,12.14,11.5,12.62,13.16,13.72,12.97,12.89,12.33,12.4,12.49,13.53,14.43,15.83,16.53,17.76,18.71,19.14,19.31,20.1,21.51,22.63,24.21,24.26,23.51,22.63,22.04,20.79,20.24,18.91,17.46,16.44,15.02,14.15,13.07,11.95,10.84,9.76,8.62,7.8,7.12,6.59,5.83,5.89,5.8,5.83,5.16,5.32,4.89,4.26,3.31,2.84,2.23,2.39,1.74,1.64,1.12,1.79,1.9,1.8,2.24,1.38,1.2,0.62,-0.44,0.01,-0.08,-0.08,-0.07,0.07,-0.45,-0.19,-0.14,-0.21,-0.12,0.06,-0.14,0.22,-0.02,-0.26,-0.25,0,0.07,0.23,0.25,0.08,0.35,-0.09,-0.03,0.15,0.19,-0.03,0.09,0.19,0.1,0.45,0.41,0.58,0.12,0.33,-0.61,-1.06,-1.07,-0.18,0.64,0.85,0.81,0.29,0.41,0.29,0.68,0.38,0.24,0.19,-0.61,-1.02,-0.55,0.13,0.4,0.67,0.26,0.04,-0.61,-0.71,-0.44,-0.48,-0.66,-0.55,-0.24,-0.24,-0.05,-0.21,0.28,0.46,0.51],[-2.06,-2.07,-1.76,-1.79,-1.51,-1.84,-1.75,-1.43,-1.17,-1.01,-1,-0.78,-0.95,-0.94,-0.78,-0.78,-0.36,-0.45,-0.71,-0.55,-0.7,-0.67,-0.45,-0.63,-0.6,-0.71,-0.23,-0.3,-0.4,-0.69,-0.73,-0.68,-0.57,-0.66,-0.51,-0.55,-0.86,-0.56,-0.84,-0.67,-0.34,-0.55,0,0.25,-0.01,0.41,0.7,0.78,0.95,0.94,0.64,0.65,0.6,-0.2,-0.31,-0.92,-0.7,-0.43,0.2,0.29,0.95,1.27,1.05,1.59,1.53,1.47,1.39,1.75,2.53,2.56,2.46,2.51,2.82,2.44,2.97,2.49,3.06,3.12,3.23,3.54,3.9,4.17,4.92,6.16,6.76,7.47,8.97,10.18,11.67,12.63,14.13,15.4,17,17.32,16.98,16.85,17.31,17.33,17.41,18.76,19.46,20.85,21.14,21.39,21.04,21.15,21.22,21,20.96,20.94,21.25,21.39,21.56,21.76,22.16,23.19,23.58,24.06,23.67,23.32,23.32,22.78,22.66,22.08,22.34,22.09,21.77,21.41,21.04,20.77,20.89,20.33,20.11,20.16,20.09,19.36,19.07,19.04,18.66,18.79,18.48,17.91,17.44,17.69,17.38,17.62,17.24,17.08,17.2,16.59,16.09,15.4,15.13,14.52,14.23,13.55,13.53,13.81,13.55,14.12,14.65,14.73,13.95,14.31,14.42,14.66,13.86,12.98,12.43,11.84,11.78,11.42,11.71,11.42,11.11,11.53,10.81,10.65,10.79,10.44,10.72,10.79,11.33,11.73,12.58,12.88,13.23,13.44,13.87,13.56,13.15,13.02,12.41,10.74,10.33,9.89,10.24,10.3,10.01,9.5,8.7,7.57,7.18,6.41,6.44,6.45,6.93,6.84,7.1,6.26,5.74,5.16,4.42,3.71,2.48,1.84,2.54,2.9,3.12,2.97,2.74,2.15,1.8,1.72,1.42,1.5,1.41,1.51,0.9,0.01,-0.44,0.05,-0.17,0.09,-0.02,0.05,0.04,-0.26,-0.06,-0.17,-0.22,0.24,-0.02,0,0.16,0.09,0.38,-0.36,-0.74,-1.04,-1.01,-0.74,-0.76,-0.14,-0.2,0.1,0.48,0.4,0.69,0.19,0.26,0.32,0.21,0.27,0.04,0.37,0.22,0.45,0.28,0.38,0.31,0.24,0.43,0.02,-0.05,0.43,-0.12,-0.15,0.01,0.03,-0.03,-0.1,-0.02,-0.23,0.3,-0.18,-0.02,-0.14,0.05,-0.29,-0.1,0.08,-0.18,-0.08,0.13,0,-0.08,-0.28,-0.34,-0.14],[-0.12,-0.39,-0.48,-0.55,-0.35,-0.41,-0.47,-0.4,-0.6,-0.37,-0.55,-0.51,-0.71,-0.35,0.5,0.53,0.64,0.26,0.28,0.51,0.04,-0.08,-0.11,-0.01,-0.28,-0.23,-0.66,-0.55,-0.72,-0.9,-1.23,-0.84,-1.08,-0.99,-0.95,-1.26,-0.92,-0.56,0.17,0.39,0.43,0.27,-0.14,-1.47,-0.76,0.27,0.44,0.46,0.25,0.19,-0.16,0.1,0.42,0.42,0.46,-0.02,0.07,0.2,0.12,-0.08,-0.54,-0.16,0.26,0.35,0.49,0.21,0.2,0.43,1.12,1.12,1.57,0.93,0.04,-0.49,-0.19,0.13,0.98,0.86,1.46,2.01,1.99,2.34,2.99,2.94,2.71,2.8,2.96,3.67,4.29,5,5.09,5.6,6.34,6.58,6.63,6.54,7.03,7.44,7.45,8.38,8.62,8.82,9.39,10.17,10.55,11.24,11.74,12.69,13.1,13.79,14.81,16.02,17.28,17.93,19.19,20.33,21.16,22.39,23.62,24.56,25.43,26.68,27.66,28.7,29.62,30.05,30.27,30.04,30.35,29.41,28.98,28.46,28.26,27.48,26.11,24.98,23.25,22.45,20.72,19.67,18.44,17.05,15.72,15.41,15.38,15.3,15.18,15.25,14.97,14.76,14.46,13.67,13.74,13.81,13.93,13.29,11.95,11.38,10.47,9.6,10.19,10.53,11.11,11.25,11.48,11.78,12.46,11.14,10.81,10.47,9.73,9.41,9.24,9.31,8.71,8.97,8.84,8.84,8.77,8.81,8.75,8.6,8.79,8.4,8.84,8.61,8.82,8.65,8.92,8.72,6.11,5.71,5.66,5.62,5.36,5.42,5.25,4.41,4.51,3.79,3.76,3.03,2.68,2.51,2.63,2.21,1.7,1.81,1.22,0.85,1.06,0.57,0.54,0.57,0.89,0.27,0.52,0.48,0.92,1.19,1.22,0.73,0.46,-0.4,-0.23,0.42,1.05,0.99,0.42,0.04,-0.13,-0.13,0.1,-0.03,-0.26,0.13,-0.05,-0.19,-0.03,0.06,-0.01,-0.05,-0.15,-0.38,-0.27,-0.36,0.11,-0.33,0.05,-0.25,0.12,-0.18,-0.02,0.19,-0.31,-0.24,0,0,-0.36,-0.59,-0.22,-0.17,-0.12,-0.29,-0.54,-0.22,-0.5,-0.16,-0.21,-0.52,-0.17,-0.26,-0.2,-0.37,-0.08,-0.41,-0.13,-0.34,-0.35,-0.41,0.14,-0.15,0.21,-0.27,-0.23,-0.24,0.23,-0.12,0.14,-0.01,-0.11,0.22,-0.06,0.09,0.42,0.24,0.26,-0.04,0.06,0.3],[-1.33,-0.86,-1.31,-1.26,-1.26,-1,-0.84,-1.09,-1.06,-0.59,-1,-1.59,-1.97,-2.13,-2.54,-2.39,-1.82,-1.54,-1.72,-1.19,-1.52,-1.36,-0.92,-0.58,-0.36,-0.16,-0.14,-0.15,-0.2,-0.22,0.03,-0.12,0.09,0,-0.11,0.16,0.97,1.16,1.36,0.92,0.25,-0.69,-0.92,-0.86,-0.6,-0.89,-0.65,-1.14,-0.89,-0.94,-0.65,-0.58,-1.02,-0.88,-0.79,-0.85,-0.92,-0.81,-0.78,-1.34,-1.56,-1.54,-1.69,-2.07,-2.15,-1.82,-0.85,-0.32,0.82,1.45,1.59,1.9,1.85,2.35,2.16,2.34,2.59,2.55,2.3,2.13,2.33,2.98,3.04,3.53,3.65,3.48,4.21,4.68,5.66,5.88,6.64,7.27,8.2,8.82,9.01,10.06,10.51,11.24,12.08,13.2,14.16,14.96,15.13,15.25,15.21,15.5,15.12,15.42,15.16,15.13,15,14.83,15.19,14.78,14.99,14.52,14.88,14.27,14.28,14.29,14.63,15.73,16.22,16.99,17.4,18.09,19.16,19.64,20.56,23.57,26.98,29.8,31.03,32.8,33,33.01,32.26,31.06,29.22,27.86,27.42,26.62,26.31,24.74,22.64,20.84,18.91,17.07,16.72,16.53,16.43,16.17,15.42,14.95,14.25,13.58,13.49,13.09,12.75,12.22,12.09,11.39,11.41,10.95,11.25,11.17,10.88,11.48,12,12.44,12.93,13.41,13.26,13.63,13.57,13.56,13.44,13.28,13.07,12.79,12.98,12.75,12.95,13.53,14.01,14.72,14.29,13.86,12.88,12.32,11.89,10.87,10.2,8.85,8.09,7.48,6.36,6,4.93,3.94,3.57,2.81,2.22,2.14,2.45,2.61,2.48,2.38,2.65,2.63,2.13,2.25,2.45,2.46,2.46,2.76,3,3.08,2.94,2.31,2.1,1.76,1.68,1.43,1.15,1.15,0.88,0.34,0.12,0.27,0.23,0.62,0.8,1.08,0.98,0.99,0.87,0.81,0.79,0.47,0.58,0.73,0.58,-0.02,-0.04,-0.74,-1.06,-0.23,0.3,1.08,1.11,0.87,0.46,0.4,-0.2,-0.38,-0.45,-0.2,-0.25,-0.45,-0.34,-0.67,-0.17,-0.68,-0.62,-0.74,-0.79,-0.72,-0.6,-0.57,-0.6,-0.79,-0.5,-0.5,-0.65,-0.07,0.41,0.34,0.03,0.37,0.11,0.1,0.44,0.05,0.54,0.46,0,0.16,0.18,-0.02,0.43,0.1,0.38,-0.08,-0.18,-0.16,0.22,-0.17,0.18,-0.18],[-1.43,-1.18,-1.04,-1.05,-0.97,-0.7,-0.35,-0.52,-0.68,-0.61,-0.32,-0.36,-0.76,-0.2,-0.74,-0.48,-0.24,-0.09,0.15,-0.25,0.16,0.49,0.61,0.29,-0.36,-0.74,-1.06,-0.74,-0.89,-0.06,0.14,0.44,0.46,0.35,-0.08,-0.17,-0.51,-0.34,-0.93,-0.6,-0.54,0.01,0,0.41,0.9,0.82,0.89,0.58,0.82,0.8,0.44,0.49,0.65,-0.17,-1.13,-0.87,-0.43,0.04,0.3,-0.15,0.43,0.14,0.61,0.73,0.91,1.07,1.36,1.18,1.31,1.49,2.06,2.29,2.05,2.12,2.4,2.12,2.31,2.44,2.41,2.82,2.77,2.88,3.54,3.72,4.34,4.75,5.27,5.63,6.89,7.27,8.7,9.19,11.59,12.7,13.29,14.45,15.1,16.02,17.15,18.4,20.74,21.67,21.32,20.24,18.62,18.02,17.97,18.24,19.23,20,21.1,22.15,22.67,23.31,23.28,22.91,22.92,21.95,21.02,19.98,19.97,20.44,21.22,21.7,22.29,21.56,21.61,21.25,21.33,20.94,20.57,20.11,19.77,19.94,18.47,17.15,15.31,14.15,12.66,11.21,9.99,9.67,9.6,8.92,9.11,8.86,8.46,8.06,8.05,8,7.54,7.64,7.34,7.17,6.84,7.12,6.73,6.6,6.81,6.89,6.64,6.7,6.67,6.84,6.89,6.65,6.89,7.46,7.95,8.33,8.45,9.58,9.96,10.53,11.32,11.41,11.48,11.29,11.82,12.41,12.91,13.59,14.18,14.38,15.25,15.89,16.58,17.65,17.34,17.44,17.52,17.77,17.48,17.92,17.88,17.99,17.33,17.33,15.71,13.49,12.55,11.91,11.51,10.59,9.78,9.58,8.7,8.08,7.34,7.06,6.42,6.17,5.23,5.16,4.33,4.19,3.48,3.17,2.41,2.22,1.98,2.2,1.96,1.95,1.98,2.12,1.65,1.94,1.33,1.03,1.12,1.58,1.3,1.3,1.09,0.71,0.7,0.31,0.23,0.2,-0.16,-0.23,-0.28,-0.22,-0.06,0.02,0.07,-0.01,-0.21,-0.14,-0.14,-0.28,-0.16,-0.28,-0.18,0.07,-0.31,0,0.02,-0.01,-0.06,-0.24,-0.38,-0.26,0.1,-0.41,-0.02,-0.33,-0.15,-0.41,0.01,-0.4,-0.53,-0.24,-0.4,-0.71,-0.49,-0.68,-1.27,-0.87,-0.34,0.53,0.65,0.92,0.35,0.55,0.19,-0.13,0.06,-0.07,-0.11,-0.25,-0.02,-0.37,-0.43,-0.21,-0.26,-0.14,-0.23,-0.12],[-0.71,-0.54,-0.44,-0.7,-0.76,-0.66,-0.86,-0.32,-0.35,-0.35,-0.21,-0.29,-0.2,-0.11,0.09,0.08,0.13,-0.07,-0.38,-0.25,-0.44,-0.77,-0.72,-0.72,-0.65,-0.96,-1.26,-0.76,-1.23,-1.12,-0.91,-1.38,-1.42,-1.2,-1.19,-1.46,-1.61,-1.25,-1.45,-1.21,-1.49,-1.25,-0.74,-0.44,0.85,1.05,0.99,0.57,0.71,0.52,0.23,0.38,0.51,0.93,1.34,1.59,1.2,1.22,0.38,0,0.92,1.59,2.45,1.75,1.4,1.06,1.78,1.98,2.61,2.3,2.3,1.76,1.72,2.11,1.95,2,2.08,2.55,2.6,2.69,2.74,2.49,2.54,3.5,4.47,5.4,6.17,6.51,6.83,7.31,8.04,9.41,11.6,13.23,14.32,15.7,16.26,15.98,16.14,16.07,15.99,15.92,16.09,16.64,16.34,17.3,17.49,17.81,18.74,18.86,19.18,18.85,18.49,18.32,17.97,17.55,17.39,16.67,16.26,15.74,15.09,14.16,13.81,13.38,13.39,13.37,13.33,13.74,13.39,13.51,13.73,13.71,13.83,13.86,14.37,14.25,14.55,14.57,14.98,15.07,15.22,15.22,15.14,15.6,15,13.98,13.39,12.83,12.49,12.62,12.82,12.74,12.65,12.76,12.5,12.19,11.61,11.22,10.46,9.93,9.5,9.16,8.41,8.11,7.72,6.79,6.67,6.86,6.94,7.18,7.65,8.01,7.83,7.9,8.23,8.38,9.54,9.5,9.68,10.37,10.36,10.46,10.79,10.53,10.97,10.77,10.94,11.4,11.24,11.12,11.31,11.05,11.06,10.97,10.76,10.72,10.4,9.8,9.58,9.49,9.14,8.39,7.57,7.24,6.91,6.2,5.37,5.16,4.76,4.49,4.09,3.38,2.99,2.8,1.98,1.77,1.03,1.15,1.37,1.27,1.01,0.92,1.26,1,0.68,0.46,0.18,0.48,1.07,1.55,0.57,0.28,0.28,0.2,0.44,0.46,0.68,0.7,0.33,-0.13,-0.81,-0.53,-0.14,0.32,0.15,-0.59,-0.75,-0.5,-0.57,-1,-0.89,-0.71,-1.11,-0.84,-1.15,-0.91,-0.8,-0.91,-1.03,-0.44,-0.07,-0.08,-0.62,-1.03,-1.1,-0.85,-1.17,-0.64,-0.34,-0.41,-1.24,-1.37,-0.28,0.37,0.12,0.23,0,0,-0.04,0.03,0.44,-0.1,-0.1,0.18,-0.07,-0.05,0.17,0.03,0.13,0.19,0.02,-0.22,-0.05,0.17,0,-0.09,-0.12,-0.07,0.08,-0.13],[-0.28,-0.49,-0.77,-0.74,-0.45,-0.9,-0.52,-0.4,-0.13,0.26,-0.38,-0.56,-0.23,-0.55,-0.91,-0.95,-0.84,-0.49,-0.19,-0.87,-1.23,-1.02,0.2,0.39,0.5,0.33,-0.04,0.02,0.08,-0.23,0.1,0.07,0.27,0.45,0.26,0.34,0.69,0.45,0.2,-0.31,-0.24,-0.76,-1.27,-1.46,-1.23,-0.89,-0.82,-0.74,-0.5,-0.64,-0.37,-0.2,-0.59,-0.4,-0.12,-0.59,-0.34,-0.59,-0.23,-0.32,-0.34,-0.49,-0.3,0.23,0.44,1.05,0.87,0.66,0.68,0.8,0.84,0.55,0.93,1,1.36,1.77,1.93,1.69,2.07,1.92,1.85,1.85,2.06,2.42,2.83,2.88,3.4,3.38,3.48,3.32,3.95,4.37,5.31,5.5,6.32,6.91,7.47,8.06,8.38,8.61,9.51,10.12,10.72,11.06,11.74,12.35,12.77,13.27,14.12,14.76,15.19,16.15,16.4,17.57,18.5,19.68,20.36,21.9,22.93,24.7,26.53,28.57,30.95,33.52,34.97,36.39,38.02,38.9,39.54,39.78,39.42,38.97,38.16,36.05,33.96,31.58,29.56,27.71,25.51,23.91,21.75,20.24,18.62,16.75,15.75,15.38,14.83,14.04,13.83,14.03,14.2,13.17,12.65,11.43,11.36,10.53,9.64,9.34,8.69,8.37,8.17,8.22,8.4,8.77,8.58,8.71,8.55,8.82,8.93,8.82,8.69,8.75,8.55,8.95,8.9,8.63,8.59,8.87,8.62,8.36,7.75,7.54,7.57,6.96,6.65,6.56,6.39,6.31,5.78,5.72,5.23,5.42,4.79,4.64,3.77,3.28,3,2.18,2.26,2.37,2.22,2.1,2.44,2.18,1.86,1.71,1.39,1.46,0.95,1.34,1.26,0.91,0.89,1.01,1.87,2.16,1.87,1.69,1.26,0.77,0.75,0.88,0.56,0.58,0.55,0.28,0.36,0.33,0.29,0,0.06,0.03,-0.32,-0.14,-0.22,-0.33,-0.2,0.05,0.04,0.16,-0.33,-0.09,-0.17,0,-0.02,-0.17,-0.27,-0.24,-0.26,-0.29,-0.28,-0.26,0.02,0.04,-0.47,0,-0.33,-0.33,-0.52,-0.4,-0.26,-0.65,-0.17,-0.53,-0.16,-0.63,-0.66,-0.61,-0.37,-0.47,-0.26,-0.12,-0.17,-0.57,-0.54,-0.15,-0.5,-0.47,-0.39,-0.32,-0.46,-0.83,-0.68,-0.31,0.03,0.13,0.01,0.15,0.17,-0.19,0.18,0.59,0.66,0.48,0.46,0.12,-0.35,-0.41,-0.99,-1.14],[-1.1,-1.17,-0.98,-1.36,-1.08,-1.02,-1.26,-1.18,-1.41,-1.06,-1.1,-0.91,-1.24,-1.07,-1.18,-1.31,-1.19,-0.97,-0.94,-1.16,-1.28,-1.08,-0.94,-1,-0.84,-1.18,-0.75,-1.07,-0.87,-0.53,-0.53,-0.5,-0.85,-0.7,-0.81,-0.91,-0.95,-1.13,-0.84,-1.09,-0.74,-0.3,-0.39,-0.08,0.59,0.45,0.56,0.8,0.58,0.48,0.9,1.1,1.07,1.41,1.43,1.9,1.9,2.03,2.45,2.55,2.54,2.21,2.16,2.51,2.38,2.4,1.89,2.12,3.13,3.09,2.41,2.61,1.73,1.78,1.93,1.33,1.3,2.55,2.69,3.12,3.08,2.75,2.7,3.06,3.22,3.02,2.85,3.16,3.01,4.07,4.66,6.03,6.54,7.25,8.34,8.61,9.76,10.12,10.9,11.4,11.94,12.99,13.16,13.79,13.91,14.96,15.46,15.84,15.41,15.12,15.26,14.74,14.79,14.03,14.03,13.72,13.2,13.01,12.7,12.77,12.56,12.95,12.88,13.62,14.5,15.11,15.54,15.9,16.71,16.83,17.52,18.63,19.08,19.62,20.19,20.48,20.73,20.43,20.8,20.95,20.15,19.69,19.1,17.62,16.78,15.82,15.27,14.83,14.59,14.56,13.92,13.76,13.16,13.18,12.68,11.96,11.49,11.04,10.54,10.09,9.64,9.28,9.64,9.29,9.68,9.6,10.11,10.04,10.61,11.42,12.16,13.54,14.2,14.74,14.93,15.35,15.84,16.46,17.12,16.93,17.07,17.54,18.41,19.87,20.32,21.34,22.78,22.01,20.87,20.38,19.62,18.17,17.15,15.86,14.12,13.05,11.59,11.13,10,9.56,8.78,7.68,6.88,6.39,5.2,4.33,4.03,3.99,4.02,3.87,3.27,3.39,2.81,3.02,2.71,2.29,2,2.44,1.8,1.56,0.71,-0.1,-0.04,0.03,-0.26,0.13,0.27,0.2,-0.11,-0.26,0.3,-0.17,-0.22,0.01,0.27,0.17,0.56,0.52,0.96,1.27,0.41,0.25,0.09,-0.19,-0.24,0.05,-0.16,0.07,0,-0.22,-0.35,-0.5,-0.25,-0.41,-0.27,-0.38,-0.04,-0.31,-0.29,-0.4,0.03,-0.24,0.03,0.08,-0.31,-0.18,-0.13,0.24,0.01,-0.5,-0.9,-1.08,-0.44,-0.31,-0.42,-0.26,-0.03,-0.16,0.37,0.38,0.26,0.58,0.49,0.72,0.49,0.29,0.19,0.17,0.17,-0.19,-0.43,-0.5,-0.54,-0.18,-0.03,-0.51,-0.05,-0.55,-1.35,-1.35],[-0.08,-0.46,-0.25,-0.57,-0.1,-0.28,-0.47,-0.66,-0.41,-0.69,-0.42,-0.93,-0.78,-0.88,-0.88,-0.78,-0.74,-0.65,-0.81,-1.03,-0.94,-0.65,-0.75,-0.82,-0.51,-0.74,-0.58,-1.14,-0.47,-0.46,0.13,0.12,0.06,-0.33,-0.63,-0.6,-0.33,-0.41,-0.01,-0.11,0.22,-0.7,-1.4,-0.6,-0.25,0.08,0.4,0.72,1.93,1.45,1.46,1.2,1.03,1.14,0.53,0.44,0.13,0.11,-0.36,-0.31,-0.31,-0.12,-0.23,0.05,0.18,-0.02,-0.13,-0.38,-0.17,-0.09,-0.46,-0.18,0.22,0.31,0.83,0.96,0.82,1.16,1.38,2.06,2.34,2.22,2.38,3.07,2.82,2.91,2.89,2.76,3.63,4.36,5.02,5.5,6.25,6.87,7.49,8.2,9.12,9.88,11.04,12.48,13.09,13.78,14.52,14.75,15.46,15.7,16.24,16.6,17.45,17.33,17.06,16.25,16.2,16.17,15.6,15.37,14.96,14.78,14.23,14.31,14,13.36,13.17,13.02,12.86,12.71,12.43,11.96,11.5,11.01,9.7,8.2,7.37,7.01,7.09,6.75,6.39,6.39,5.92,6.21,6.82,6.7,7.5,7.4,8.14,8.46,8.33,8.75,9.1,9.13,9.31,9.73,9.25,9.55,9.46,9.45,9.36,9.17,9.38,9.27,9.15,9.22,9.53,9.03,9.18,9.02,8.69,8.24,8.21,8.52,8.11,8.46,8.22,8.46,8.39,8.51,9.06,9.41,9.54,9.78,9.95,9.79,9.15,9.26,8.92,8.61,8.86,9.8,9.15,8.28,7.92,7.9,8.37,9.25,9.26,9.38,8.15,6.68,5.81,5.41,4.67,4.14,3.68,3.37,2.76,2.6,1.92,2.25,2.05,2.2,2.26,1.8,1.76,1.14,1.14,0.4,0.82,0.77,0.49,0.31,0.13,0.16,0.34,0.51,0.9,0.53,0.23,0.07,0.17,0.16,0.33,0.05,-0.07,-0.19,0.11,-0.2,0.01,0.26,-0.05,0.22,0.26,-0.04,0.26,0.2,0.06,-0.05,0.18,0,-0.25,0,-0.62,-0.41,-0.86,-0.95,-0.71,-0.53,-0.18,-0.4,0.19,0.03,-0.18,0.05,-0.25,-0.31,-1.06,-0.93,-0.8,-1.09,-0.66,-0.46,0.11,1.22,1.24,1.14,0.65,1.03,0.86,0.34,0.41,0.39,-0.11,0.1,-0.4,-0.38,-0.01,-0.38,-0.31,-0.38,-0.45,-0.13,-0.42,-0.22,0.09,0.14,-0.08,0,-0.06,0.32,-0.07,0.12],[-1.07,-1.26,-0.95,-1.13,-1.34,-0.86,-0.5,-0.41,-0.26,0.51,0.45,-0.09,0.07,-0.22,-0.4,-0.21,-0.18,-0.54,-0.43,-0.15,-0.53,-0.57,-0.35,-0.62,-0.57,-0.96,-1.04,-0.76,-1.03,-0.83,-0.82,-0.89,-0.96,-0.81,-0.95,-0.59,-0.58,-0.96,-0.71,-0.78,-0.47,-0.73,-0.43,-0.22,-0.15,0.05,0,0.28,0.16,0.58,0.26,-0.09,-0.36,-0.56,0.01,0.26,0.68,0.72,0.9,0.32,0.09,0.32,0.06,0.45,0.39,1.19,1.5,1.55,1.35,1.15,0.96,0.81,1.52,2.05,2.77,2.81,2.92,2.87,3,2.96,3.26,3.53,4.17,4.49,5.15,5.92,6.62,6.74,7.69,8.44,9.2,10.19,10.55,10.78,11.22,11.46,11.17,11.38,11.88,12.95,13.46,14.11,14.44,14.72,15.29,15.32,15.68,15.96,16.23,15.97,16.31,16.39,17.01,16.66,17.15,17.45,17.77,17.65,17.85,18.35,18.08,18.39,18.45,18.33,17.94,18.24,18.4,17.98,17.91,17.99,18.29,18.12,18.74,18.96,19.27,19.67,19.83,20.59,20.83,21.02,21.39,21.4,21.83,22.02,20.52,19.65,18.18,17.11,15.81,15.32,15.01,14.27,13.81,13.16,13.02,12.63,11.88,11.95,11.13,11.37,10.89,10.49,10.43,9.76,9.71,9.03,9.11,8.93,8.6,8.19,8.17,7.98,7.85,8.21,8.2,8.23,7.88,8.3,7.93,7.96,8.47,8.24,8.3,7.97,8.13,8.02,8.45,8.33,7.86,7.98,7.58,7.39,7.59,7.41,7.01,6.84,6.43,6.19,6.14,5.73,5.49,5.01,4.46,4.2,4.3,3.68,3.33,3.21,3.29,3.52,3.22,3.1,2.86,2.6,2.45,1.99,1.52,1.48,1.38,0.79,0.63,0.71,1.14,1.03,0.87,0.47,0.21,0.24,0.59,0.95,1.27,1.31,1.14,1.51,1,0.15,-0.28,0.41,0.16,0.37,1.02,0.84,1.07,0.8,0.7,-0.06,-0.98,-0.77,-0.76,0,-0.02,0.16,0.05,0.2,0.18,0.53,0.61,0.11,0.48,-0.13,0.26,-0.35,-0.48,-0.16,-0.8,-1.01,-0.68,-1.04,-0.55,-0.29,-0.27,-0.15,-0.72,-0.85,-0.62,-0.83,-0.94,-0.56,-1.14,-0.9,-0.97,-0.78,-0.85,-0.09,0.35,-0.4,-0.53,-0.45,-0.59,-0.32,-0.11,-0.13,0.16,0.15,-0.72,-0.89,-0.9,-0.81,-0.7,-0.65],[0.34,-0.09,0.05,-0.03,-0.25,-0.37,-0.2,-0.1,-0.56,-0.67,-0.66,-0.5,-0.71,-0.76,-0.92,-0.69,-0.73,-1.25,-1.1,-1.1,-1.2,-1.09,-1.25,-1.15,-1.35,-1.06,-0.88,-0.83,-0.87,-1.21,-0.77,-0.86,-0.51,-0.86,-0.5,-0.85,-0.65,-0.53,-0.32,-0.52,-0.05,-0.06,-0.29,-0.09,-0.17,-0.08,0.14,-0.4,-0.02,-0.17,-0.16,0.33,0.64,0.64,0.38,0.41,0.3,-0.03,0.47,0.25,0.41,0.35,0.01,-0.13,-0.26,0.26,1.04,1.16,1.92,2,2.23,2.15,2.14,2.23,1.98,2.24,2.33,2.5,2.44,2.44,2.74,3.03,2.89,3.28,3.63,4.06,4.52,4.46,4.75,5.32,6.05,7.23,8.19,9.51,10.88,12.19,13.25,14.27,15.66,17.26,18.33,19.61,20.85,22.15,23.1,23.85,25.31,26.34,27.69,28.33,29.39,30.87,32.12,32.8,34.39,35.51,36.23,36.83,37.1,36.78,37.48,37.02,36.86,35.98,36.05,35.28,34.71,34.3,33.71,32.98,32.31,31.77,31.04,29.77,28.09,27.09,25.55,24.27,23.29,22.94,22.27,21.76,20.98,20.35,19.24,18.22,17.04,16.02,15.19,15.4,15.48,15.85,15.87,15.53,14.96,14.77,14.78,14.43,14.66,14.59,14.34,14.39,14.38,14.17,13.81,13.2,13.14,13.07,12.85,12.59,12.01,12.22,11.58,11.77,11.64,10.97,11.03,10.57,10.19,10.22,9.92,9.83,9.1,9.04,8.56,7.99,7.24,6.98,6.34,6.5,5.78,5.83,5.61,5.22,4.67,4.82,4.18,4.11,4.41,4.16,4.11,3.75,3.62,3.79,3.73,3.73,3.44,3.18,3.34,3.02,2.81,2.48,2.63,2.46,2.39,2.2,2,1.69,1.64,1.13,0.94,0.49,0.11,-0.36,-0.33,-0.02,0.05,-0.03,0.54,0.51,0.14,0.4,0.28,0.44,0.45,0.11,0.1,0.3,0.48,0.11,0.43,0.2,0.3,0.28,0.19,0.04,0.51,0.29,0.12,0.16,0.16,0.16,0.16,-0.05,0.4,0.32,-0.03,0.08,0.33,-0.11,0.17,-0.17,-0.14,-0.06,0.01,-0.19,0.12,0.04,0.16,-0.24,-0.34,-0.14,-0.03,0.01,-0.28,-0.26,-0.25,-0.15,-0.38,-0.02,-0.49,-0.22,-0.06,-0.01,-0.06,-0.46,-0.47,-0.52,-0.16,-0.57,-0.48,-0.63,-0.47,-0.47,-0.61,-0.68,-0.38,-0.35,-0.28,-0.51],[0.38,0.31,-0.12,-0.11,-0.09,-0.39,-0.31,-0.54,-0.41,-0.53,-0.34,-0.42,-0.29,-0.83,-0.42,-0.6,-0.68,-0.53,-0.28,-0.03,0.56,0.71,0.06,0.29,0.18,-0.37,-0.59,-0.67,-0.51,-1.03,-1.38,-1.72,-1.2,-0.34,-0.28,-0.41,-0.6,-0.46,-0.54,-0.62,-0.88,-1,-0.87,-0.96,-0.58,-0.91,-1.01,-0.87,-0.95,-0.85,-0.92,-1.53,-1.23,-1.15,-1.02,-0.37,0.6,0.61,0.34,0.44,0.23,0.46,0.7,0.72,0.95,0.85,0.45,1.14,1.69,0.98,0.86,0.32,0.52,0.87,0.68,1.02,1.88,1.88,1.8,1.51,1.63,2.02,1.92,2.04,2.16,1.98,2.33,2.64,2.71,4.17,5.46,7.08,9.17,10.54,12.67,14.12,15.12,15.53,16.91,17.44,18.44,18.91,19.67,20.88,21.52,21.93,22.5,22.76,22.74,23.02,23.11,22.87,22.61,22.5,21.83,22.01,21.46,21.94,22.1,22.06,22.06,22,22.13,22.65,23.08,23.3,23.57,23.92,24.24,24.68,25.1,25.17,24.89,24.47,24.59,24.33,24,23.75,23.15,23.09,22.52,21.27,20.75,20.12,18.94,18.54,17.76,17.75,16.93,16.95,16.65,16.01,16.32,15.89,15.07,14.97,15.17,15.34,15.3,15.7,15.76,16.09,16.27,16.41,17.21,18.21,19.08,21.01,22.75,23.04,23.29,23.37,23.62,23.45,23.72,23.19,23.35,23.43,23.56,23.21,22.74,22.43,22.06,21.77,20.11,18.64,17.61,16.51,15.15,13.89,12.99,11.8,10.82,10.24,9.4,8.94,8.16,7.25,6.33,5.69,5.09,4.02,3.29,2.44,2.78,2.43,2.32,2.69,2.42,2.45,2.1,1.93,1.62,1.45,1.18,1.43,1.32,0.96,1.37,1.32,1.26,1.29,1.39,0.8,0.76,1.04,0.57,0.44,-0.03,0.21,0.16,-0.12,0,0.03,-0.06,-0.19,-0.11,0.3,0.08,-0.13,0.15,-0.2,-0.24,-0.04,-0.62,-0.54,-0.96,-1.19,-1.65,-1.37,-1.42,-0.92,-0.56,-0.44,0.19,-0.42,-1,-0.82,-0.8,-0.81,-0.58,-0.56,-0.6,-0.99,-0.4,-0.4,-0.12,1.03,0.6,-0.15,-0.8,-1.09,-0.85,-0.3,-0.44,0.03,-0.18,0.11,0.3,0.02,0.1,0.24,0.24,0.28,0.29,-0.25,-0.12,0.05,-0.19,0.12,-0.02,0.27,-0.21,0.02,0.09,0.24,0.06,-0.1,0.15,0.12],[0.36,-0.02,-0.06,-0.03,0.15,0.24,0.19,0.06,0.34,0.2,0.47,0.18,0.24,0.01,0.24,0.04,0.27,0.28,-0.07,0.27,0.37,0.02,-0.32,-0.36,-1.05,-1.07,-0.92,-0.98,-1.19,-0.79,-0.8,-0.63,-0.05,0.38,0.6,0.38,0.65,0.09,0.41,0.54,0.07,0,0.34,0.28,0.15,-0.28,-0.48,-0.32,-0.68,-0.46,-0.94,-0.77,-0.44,-0.45,-0.56,-0.43,-0.48,-0.28,0.18,0.7,1.12,1.18,1.31,1.3,1.12,1.48,1.25,1.38,1.85,2,2.12,2.19,2.37,2.71,2.18,2.48,1.97,2.87,3.27,3.59,3.57,3.45,4,4.85,5.48,6.22,6.69,7.56,7.66,8.51,9.28,10.75,12.52,14.77,16.76,19.13,21.1,23.36,25.59,28.07,30.26,32.64,34.68,36.01,37.36,38.56,39.06,40.1,40.4,41,41.6,40.93,40.11,38.55,37.32,36.37,35.27,33.79,31.8,29.72,27.87,26.15,25.25,24.61,23.73,23.27,22.33,21.71,21.17,20.55,19.83,19,18.25,17.74,16.77,16.08,16.13,16.09,16.05,15.76,15.78,16.53,17.11,17.71,18.67,18.51,17.94,17.38,16.27,15.44,14.5,13.37,12.46,11.85,10.73,9.96,9.26,8.65,8.42,7.72,7.22,7.11,6.97,6.88,6.56,6.45,6.1,6.19,6.14,6.22,6.19,6.39,6.34,6.14,6.55,6.47,7.53,7.83,8.79,9.49,10.21,9.98,10.41,10.4,10.12,10.93,11.37,11.76,11.91,12.4,12.93,13.45,13.56,13.45,13.69,14.15,13.68,13.41,12.57,12.06,11.17,10.81,9.77,8.67,8.33,7.23,6.25,5.49,4.97,4.64,4.4,4.13,3.44,3.16,2.53,2.38,2.53,2.52,2.44,2.06,1.78,2.13,1.53,1.81,1.32,1.6,1.63,1.54,1.24,0.87,0.84,0.82,-0.07,-0.02,-0.09,-0.38,-0.5,-0.42,-0.17,-0.65,-0.22,-0.26,-0.56,-0.91,-0.76,-0.12,0.31,0.01,-0.07,-0.28,-0.29,-0.52,-0.38,-0.63,-0.46,-0.39,-0.64,-0.9,-0.52,-0.47,-0.48,-0.63,-0.02,-0.21,-0.68,-1.21,-1.09,-0.61,-0.63,-0.88,-0.5,-0.16,-0.69,-0.36,-0.47,-0.69,-0.24,0.21,0.71,0.75,0.05,0.09,-0.01,0.02,-0.08,-0.38,0.15,0.94,0.48,-0.36,-0.25,-0.44,-0.26,-0.66,-0.77,-0.63,-1.01,-1.11,-0.94,-1.08],[-0.54,-0.37,-0.45,-0.52,-0.55,-0.37,-0.25,-0.68,-0.63,-0.21,-0.43,-0.36,-0.54,-0.51,-0.65,-0.97,-0.53,-0.38,-0.41,-0.55,-0.61,-0.58,-0.38,-0.59,-0.61,-0.16,-0.01,-0.04,0.03,-0.25,-0.27,-0.37,-0.07,-0.37,-0.05,-0.33,-0.39,-0.02,-0.08,-0.6,-0.44,-0.23,-0.3,-0.24,0.44,0.41,0.44,0.4,-0.01,0.11,-0.54,-0.28,0.03,-0.23,0.04,0.28,0.2,0.54,1.09,1.21,1.37,1.07,1.72,1.9,2.15,2.27,2.36,2.61,2.73,2.93,2.98,3.22,3.18,3.07,2.95,3.41,3.46,4.32,4.41,5.04,5.92,6.48,6.15,6.59,6.67,6.9,7.85,9.14,9.37,9.41,9.38,10.13,10.49,11.39,12.17,13.09,14.29,15.45,17.32,20.16,22.74,25.18,28.32,30.71,34.06,37.65,40.95,51.49,55.47,59.49,63.47,64.93,67.69,73.69,74.31,73.41,70.86,66.56,62.74,58.93,55.05,50.3,45.67,40.78,36.55,34.15,31.68,29.11,27.01,25.42,23.69,21.73,21.19,20.22,19.62,18.47,17.76,17.37,16.53,15.61,15.2,14.29,13.15,12.49,11.9,10.98,10.16,9.57,9.6,10.07,10.11,10.53,10.12,9.55,9.18,8.29,8.04,6.94,6.59,5.94,5.23,4.51,3.96,3.76,3.88,3.52,3.15,2.91,2.85,2.96,3.11,2.88,3.25,3.07,3.11,2.99,3.25,5.06,6.54,8.22,9.62,11.19,11.83,12.66,13.84,14.61,15.69,16.3,17.19,17.3,17.3,17.28,16.43,15.22,14.41,14.13,12.84,12.16,11.34,11.1,10.92,10.69,10.29,10,9.05,8.19,7.64,6.79,6.71,6.11,5.95,5.46,5.14,5.01,4.7,4.43,3.99,3.14,2.93,2.83,2.68,2.5,2.33,2.58,2.5,2.49,2.38,1.38,0.97,1.6,2.08,1.41,1.32,1.1,0.71,0.2,-0.21,0,-0.37,-0.31,0.02,-0.13,-0.11,-0.15,-0.28,0.06,-0.11,0.17,-0.12,-0.08,0.05,-0.32,-0.17,-0.14,-0.19,-0.03,-0.1,0.11,0.02,-0.16,0.17,0.15,-0.07,-0.33,-0.24,-0.11,-0.02,0.11,-0.05,-0.36,0.06,-0.05,-0.12,-0.01,0.12,0.12,-0.09,-0.05,0.14,-0.18,-0.06,-0.02,-0.38,0.12,0.06,-0.12,0.51,0.6,0,-0.44,-0.38,-0.29,0,-0.27,-0.66,-0.46,0.14,0.54,0.5,1.04],[-0.15,-0.34,-0.33,-0.04,-0.23,-0.06,-0.27,-0.1,0.17,0.24,0,-0.44,-0.78,-0.79,-1.35,-1.58,-1.91,-1.51,-1.27,-0.76,-0.43,0.02,-0.09,0.15,-0.05,-0.18,-0.04,0.27,0.25,-0.05,-0.33,-0.08,-0.28,-0.4,-0.4,-0.39,-0.08,-0.11,-0.05,-0.35,-0.25,-0.59,-0.16,-0.72,-0.45,-0.3,-0.69,-0.48,-0.43,-0.48,-0.5,-0.69,-0.9,-0.62,-1.09,-0.91,-0.88,-0.91,-0.45,-0.5,-0.45,-0.48,-0.59,-0.17,0.14,0.95,1.41,1.83,2.04,2.16,2.47,2.61,2.56,2.92,2.93,3.09,3.31,3.32,3.33,3.27,3.27,3.67,3.54,3.16,3.29,3.63,3.47,3.71,4.78,5.75,6.99,6.94,7.72,7.83,8.87,10.15,10.67,11.82,12.9,14.06,15.02,16.11,16.74,17.43,18.58,19.59,20.88,21.88,22.88,23.46,23.95,24.17,24.41,24.32,24.95,25.13,25.17,25.11,25.85,25.66,25.91,26.28,25.99,26.38,26.18,26.17,26.33,25.74,25.2,24.34,23.75,23.25,22.43,21.74,21.34,20.75,19.99,19.16,18.5,17.87,17.55,16.83,16.18,15.36,14.87,14.78,14.25,13.47,13.18,12.97,12.42,11.84,11.97,12.36,11.9,12.11,12.38,12.52,12.56,12.12,12.23,11.83,11.91,11.49,11.42,11.64,11.58,11.01,10.86,10.97,10.87,10.59,10.76,10.58,10.68,11.01,10.62,10.68,10.26,10.43,9.84,9.91,9.49,9.29,9.11,9,8.77,8.16,8.19,7.63,7.5,7.39,7.05,6.56,6.34,6.11,6.05,5.44,5.67,5.35,5.02,4.49,4.17,3.95,3.77,4.07,3.75,3.56,3.66,3.71,3.41,3.44,3.19,3.22,2.97,2.83,3.07,2.67,2.65,2.11,2.32,2.16,1.75,1.71,1.36,0.91,1.14,0.61,0.39,0.2,0.16,0,0.3,0.65,0.84,0.64,0.48,0.82,0.53,1.02,1.02,0.97,0.66,0.69,0.32,-0.02,0.01,-0.53,-1.04,-0.79,-0.97,-0.85,-0.71,-0.45,-0.78,-0.82,-1.12,-1.39,-1.07,-0.63,-0.9,-0.37,-0.71,-0.23,0,-0.29,0.4,0.01,0.18,-0.15,0.05,0,0.13,-0.3,-0.86,-0.5,-0.17,0.01,0.22,0.66,0.57,0.47,0.07,0.57,0.22,0.11,0.23,0,0.05,0.36,-0.07,-0.04,-0.12,-0.07,0.02,0.13,-0.1,-0.02,-0.4,-0.98],[-1.23,-1.27,-1.12,-0.47,-0.14,-0.45,-0.13,0.29,0,0.14,0.24,0.12,-0.35,-0.04,-0.36,-0.43,0.05,-0.27,-0.38,-0.08,-0.38,-0.54,-0.68,-0.78,-0.44,-0.68,-0.83,-1.03,-0.36,-0.02,0.72,0.78,0.9,0.58,0.26,-0.09,-0.29,-0.04,-0.11,0,-0.14,-0.07,-0.17,-0.52,-0.15,-0.51,0.02,-0.47,-0.32,0.02,-0.01,-0.42,-0.46,-0.51,-0.13,-0.36,-0.15,-0.51,-0.68,-0.45,-0.71,-1.21,-0.88,-0.66,-0.66,-0.36,0.08,0.05,0.66,0.62,1.05,1.33,1.65,1.66,1.8,2.28,2.17,2.37,2.47,2.57,2.92,2.97,2.4,2.42,2.53,3.4,4.54,4.92,5.83,5.57,5.63,5.38,5.52,5.1,5.16,5.3,5.02,5.13,4.9,5.2,5.84,6.04,6.9,7.31,7.93,8.25,8.97,9.08,10.23,10.94,12,12.95,14.09,13.59,13.77,14.01,13.57,13.7,13.74,13.52,13.41,13.62,13.66,13.61,13.52,13.47,13.25,13.26,13.23,13.89,14.52,15.2,15.87,16.28,17.39,18.37,18.93,19.05,19.56,19.53,19.87,19.35,19.21,19.14,19.2,18.34,17.5,17.14,16.21,16,15.8,16.05,16.06,16.37,17.09,17.48,18.31,19.3,20.3,20.71,21.98,21.98,22.3,22.2,22.95,23.01,24.51,26.14,26.91,28.17,28.14,28.1,28.18,26.66,24.66,23.23,21.79,20.99,20.78,19.66,19.22,18.67,17.89,17.16,16.24,15.54,14.84,13.57,13.29,12.06,11.68,10.87,9.4,8.82,7.62,6.66,5.47,4.18,3.42,3.58,3.39,3.06,2.55,2.47,2.27,1.55,1.39,1.53,1.59,1.84,1.56,1.67,2.05,1.65,1.77,1.95,1.58,1.43,0.79,0.08,0.16,0.11,0.24,0.12,0,0.18,0.54,0.18,0.48,0.44,0.31,0.16,-0.33,0.1,0.88,1.33,0.47,-0.85,-0.2,0.83,1.1,1.43,1.22,0.76,0.58,0.36,0.39,0.02,0.12,0.03,-0.58,-0.47,-0.8,-1.05,-1.35,-1.45,-1.22,-1.03,-0.21,-0.25,0.12,0.15,-0.27,-0.06,-0.09,-0.35,-0.27,-0.42,-0.82,-0.58,-1.08,-0.82,-1.33,-1.34,-1.26,-1.26,-1.45,-1.51,-0.73,0.53,0.39,0.14,0.35,0.44,0.11,0.24,-0.09,-0.65,-0.94,-1.86,-1.34,-0.74,-0.24,-0.16,-0.04,0.15,-0.03,0.45,0.54,0.34],[-0.73,-0.82,-0.55,-0.63,-1.21,-1.24,-0.94,-1.15,-1.39,-1.22,-1.45,-1.18,-1.5,-1.39,-1.79,-1.8,-1.41,-1.53,-1.67,-1.51,-1.06,-1.13,-1.29,-1.07,-1.2,-0.84,-0.88,-0.64,-0.56,-0.71,-0.4,-0.08,-0.1,0.33,0.28,-0.44,-0.47,-0.97,-0.8,-1.03,-0.76,-0.96,-0.87,-1.16,-0.93,-0.92,-1.18,-1.07,-1.26,-1.31,-1.17,-0.91,-1.11,-0.95,-1.11,-1.39,-1.05,-0.79,-0.16,0.24,0.18,0.37,0.24,0.24,0.83,1.35,1.56,1.6,1.2,1.25,0.91,0.94,1.14,1.67,1.64,2.46,2.84,3.32,3.67,3.29,3.42,3.28,3.3,3.66,3.92,4.25,4.95,5.33,5.92,6.57,7.17,8.25,9.6,10.54,14.28,15.71,15.59,16.04,16.08,15.62,15.26,14.47,14.26,13.62,13.32,12.86,12.13,11.39,11.37,10.98,10.39,10.33,9.65,9.66,10.19,11.21,11.8,12.19,12.6,13.88,15.44,16.36,17.36,17.45,18.03,18.59,18.55,18.47,18.36,18.42,18.66,17.98,17.4,16.61,15.87,15.34,14.6,14.2,13.42,12.96,12.1,12,11.08,10.54,10.2,9.19,8.54,8.26,7.71,6.89,6.36,5.88,5.32,4.92,4.23,3.27,2.96,2.46,2.17,2.27,2.34,1.72,1.83,1.57,1.29,1.41,0.75,0.54,0.52,0.85,0.44,0.46,0.85,0.78,0.31,0.23,0.51,0.45,0.61,0.97,1.31,1.33,1.47,1.81,2.06,2.48,3.05,3.77,4.11,4.7,5.43,5.54,5.47,5.23,4.73,4.58,4.85,4.54,4.59,4.2,4.12,4.11,4.22,4,3.85,3.31,3.61,3.04,2.97,3.15,2.68,2.97,2.89,2.59,2.76,2.6,2.67,2.91,2.72,2.48,2.68,2.46,2.56,2.24,1.56,1.18,1.28,0.78,0.46,0.43,0.45,0.27,0.48,0.03,-0.08,0.22,0.23,0.25,-0.15,-0.22,-0.35,-0.1,0.04,0,-0.43,-0.03,0.03,-0.35,-0.42,0.12,-0.05,-0.27,0.05,-0.09,-0.23,0.03,0.11,0.05,-0.17,-0.36,0.01,0,-0.25,-0.14,-0.04,0.07,-0.28,-0.33,-0.39,-0.09,-0.06,-0.12,-0.05,0.08,-0.1,-0.02,-0.24,-0.3,-0.19,-0.17,-0.15,-0.15,-0.23,-0.04,-0.14,-0.18,-0.16,-0.02,-0.29,-0.32,-0.15,-0.45,-0.23,-0.22,-0.41,-0.24,-0.24,-0.15,-0.33,0.12],[-0.28,-0.82,-1.06,-0.74,-0.9,-1.41,-1.35,-1.06,-1.05,-0.49,-0.36,-1.06,-1.67,-0.66,-0.31,-0.14,-0.21,-0.1,-0.27,-0.47,-0.45,-0.76,-0.43,-0.82,-0.4,-0.82,-0.98,-0.78,-1.01,-0.92,-0.77,-1.31,-1.32,-1.02,-1.47,-1.15,-0.86,-0.91,-1.19,-1.15,-0.86,-0.61,-0.69,-0.71,-0.82,-0.39,-0.4,-0.18,-0.47,-0.48,-0.46,-0.4,-0.82,-0.71,0.49,1.7,1.7,1.81,1.81,2.26,2.03,2.16,2.11,2.2,2.66,2.64,2.63,2.81,2.93,2.47,2.66,2.25,2.16,2.33,2.93,2.93,3.22,4.02,4.01,4.9,4.76,5.34,6.45,6.9,7.79,8.15,9.35,9.65,10.82,11.06,12.08,12.78,14.33,14.94,15.97,17.22,19.28,21.07,23.52,25.65,27.7,29.97,31.5,33.73,35.5,37.15,39.11,41.15,42.73,43.63,43.52,43.78,44.33,43.6,43.29,42.61,41.92,40.63,38.84,37.72,36.26,34.95,33.53,31.61,30.3,29.09,27.65,25.99,24.64,23.13,22.19,21.4,20.77,19.94,19.69,19.22,18.44,17.94,17.57,17.09,16.68,16.68,17.24,16.92,17.26,17.56,17.51,17.59,17.85,17.79,17.82,18.32,18.34,18.04,17.49,17.09,16.54,16.05,15.3,14.63,14.26,14.37,13.63,13.53,13.23,13.02,12.51,12.57,12.22,12.3,12.03,12.32,12.19,11.99,11.99,12.04,12.36,12.51,12.49,13.08,13.35,13.45,13.77,14.3,14.77,14.63,15.09,15.19,15.72,15.83,15.73,15.42,15.37,14.25,12.83,12.06,12.6,12.77,13.26,12.39,12.07,11.5,10.69,10.12,9.67,9.47,8.5,8,7.62,7.22,6.49,6.23,5.43,5.03,4.51,3.81,3.66,2.93,2.54,2.6,2.29,2.37,2.12,1.46,1.02,0.93,-0.05,-0.48,-0.48,-0.53,-0.71,-0.84,-0.64,-0.78,-0.28,-0.47,-0.33,-0.5,-0.32,-0.22,-0.17,-0.18,-0.24,-0.39,-0.63,-0.79,-0.35,-0.17,0.07,0.14,0.01,0.31,0.49,0.37,0.48,0.5,0.21,0.55,0.32,0.28,0.51,0.59,0.5,0.5,0.42,0.66,0.48,0.6,0.34,0.4,0.2,0.22,0.28,0.34,0.57,0.28,0.18,0.38,0.42,0,0.19,0.41,0.18,0.05,-0.12,0.3,0.22,0.24,0.06,0.08,0.26,0.11,-0.03,0.16,-0.23,0.11,-0.08,0,-0.38,0.02],[-0.23,-0.51,-0.37,-0.21,-0.27,-0.57,-0.29,-1.05,-0.95,-1.32,-1.64,-1.07,-1.08,-0.61,-0.09,0.19,-0.2,-0.34,-0.3,-0.41,-0.68,-0.75,-0.6,-0.3,-0.39,-0.4,-0.78,-0.94,-0.86,-0.81,0.24,0.92,0.77,0.06,0.44,0.33,-0.26,-0.15,-0.4,-0.38,-0.94,-0.72,-1.01,-0.97,-0.02,0.59,0.77,0.97,0.42,0.73,0.69,1.12,0.95,0.45,0.33,0.31,0.15,0.53,1.03,1.4,1.43,0.9,0.92,0.26,0.23,0.09,-0.07,-0.24,-0.48,-0.2,0.07,0.11,0.99,1.7,1.92,2.35,2.27,2.35,3.05,3.23,3.23,3.18,3.07,3.29,3.3,4.12,5.2,5.68,6.02,6.22,6.32,6.85,6.69,6.61,7.05,7.32,7.14,7.63,7.75,8.28,8.63,9.58,10.2,10.43,10.44,10.83,11.56,11.98,12.11,11.42,11.28,10.87,10.22,9.9,9.6,9.45,8.64,8.2,7.83,7.36,7.14,6.35,5.74,5.46,5.81,5.61,5.74,6.18,6.93,7.73,8.55,9.1,9.02,9.13,9.55,9.52,9.62,9.39,9.43,10.02,9.84,10.1,10.17,10.11,10.26,10.32,10.35,10.28,9.99,9.96,10.45,10.35,10.46,9.76,9.02,8.47,7.45,7.28,6.23,5.8,5.19,4.64,3.84,3.73,3.01,2.62,2.16,2.46,2.54,3.59,4.42,5.48,6.53,7.67,7.72,8.09,8.05,8.28,8.31,8.82,9.2,9.14,9.58,9.63,9.27,9.7,9.27,9.41,9.61,9.49,9,8.7,8.02,7.59,7.29,6.9,6.06,5.66,5.25,4.45,4.03,3.45,2.83,2.7,1.99,2.34,1.85,1.91,1.78,1.13,1.16,1.14,1.68,1.92,2.5,2.38,2.51,2.18,2.03,1.98,2.07,2.09,1.76,1.6,1.31,0.61,0.29,-0.06,0.23,-0.27,-0.12,-0.07,-0.12,-0.45,-0.2,-0.1,-0.3,-0.24,-0.53,-0.27,-0.74,-0.67,-0.31,-0.34,-0.22,-0.32,-0.28,-0.66,-0.74,-0.7,-0.22,0.63,0.89,0.45,0.48,0.45,-0.21,-0.27,-0.87,-0.53,-0.66,-0.15,0.14,-0.07,0.19,0.06,0.2,-0.15,-0.27,-0.32,-0.3,-0.1,-0.24,-0.72,-0.84,-0.38,0.55,1.05,1.08,0.82,0.37,0.41,-0.01,-0.16,-0.45,-0.11,-0.15,-0.36,-0.24,-0.18,-0.08,-0.03,0.01,-0.08,-0.17,-0.16,-0.23,-0.44,0.02,-0.1],[-0.05,-0.14,-0.46,-0.3,-0.46,-0.23,-0.45,-0.3,-0.35,-0.55,-0.52,-1.29,-1.49,-1.34,-0.66,-0.67,-0.06,-0.38,-0.29,0.01,-0.37,-0.44,-0.23,-0.5,-0.25,-0.41,-0.5,-0.55,-0.65,-0.73,-0.66,-1.07,-1.15,-1.59,-1.61,-1.36,-1.6,-1.22,-1.31,-1.2,-1.42,-1.15,-1.44,-1.45,-1.35,-1.56,-1.5,-1.86,-1.96,-2.05,-1.95,-1.85,-1.65,-1.39,-1.49,0,0.79,1.75,1.81,1.34,1.05,0.81,0.59,0.89,0.86,1.61,1.67,1.73,1.95,1.94,1.84,1.76,1.63,1.74,2.08,1.88,2.09,1.94,1.63,2.25,2.21,2.57,2.44,3.2,3.4,3.54,4.25,4.74,5.45,6.61,7.18,7.85,8.33,8.54,8.87,9.7,10.12,10.66,11.01,11.66,11.79,12.6,12.6,13.18,13.93,14.26,14.66,15.48,15.55,16.52,16.48,17.39,17.5,17.81,17.53,17.52,17.51,17.75,18.07,18.88,20.16,20.62,21.52,24.49,28.41,32.5,36.63,40.16,43.98,47.26,52.8,56.96,59.23,61.08,62.64,64.59,65.04,61.59,57.46,53.64,49.33,44.85,42.7,39.99,37.92,35.16,29.55,28.04,26.56,25.59,24.47,23.01,22.41,22.3,21.64,21.69,21.81,21.76,21.59,21.96,21.49,21.52,21.86,21.61,20.89,20.69,20.36,19.84,20.18,20.56,21.19,21.1,21.53,21.42,21.72,21.85,21.7,21.56,21.58,21.48,21.47,21.69,22.11,22,22.93,23.35,24.29,23.68,22.84,21.9,21.1,19.18,17.23,14.25,12.04,10.44,9.51,8.35,7.59,7.32,6.5,5.82,5.31,5.12,3.89,3.3,2.94,2.42,1.67,1.71,1.66,1.53,1.84,2.3,2.14,2.14,1.99,1.82,1.5,1.54,1.29,1.12,0.92,0.65,0.27,0.66,0.52,0.7,0.36,0.12,-0.43,-0.56,-0.03,0.09,0.49,0.48,0.37,0.57,0.3,0.28,0.25,0.67,0.19,0.48,0.22,0.34,0.1,0.43,0.07,-0.17,0.09,-0.17,-0.3,-0.18,-0.34,-0.24,-0.07,-0.29,-0.27,-0.66,-0.64,-0.48,-0.77,-0.35,-0.8,-0.19,-0.04,0.33,0.53,0.68,0.9,0.77,0.53,0.27,0.22,0,-0.3,-0.67,-0.55,-0.32,-0.6,-0.3,-0.53,-0.36,-0.38,-0.33,-0.37,-0.27,-0.1,-0.02,-0.39,0.11,-0.16,0,0.1,-0.1,0.08,0.27,0.32,0.12],[0.44,0.32,0.17,0.48,0.01,0.1,-0.11,0.04,-0.25,0.15,-0.16,-0.23,-0.02,-0.08,-0.23,-0.01,-0.05,0.08,-0.15,-0.11,-0.46,-0.34,-0.47,-0.73,-1.45,-1.47,-1.02,-0.89,-0.28,-0.24,0.01,-0.09,-0.37,0.12,-0.19,-0.24,-0.28,-0.44,-0.63,-0.76,-0.71,-0.86,-1.16,-0.77,-1.01,-0.91,-1.11,-1.61,-1.56,-1.09,-0.85,-0.72,-0.16,0.13,0.18,0.4,0.53,0.15,-0.53,-0.92,-1.04,-0.88,0.07,0.67,1.6,2.01,1.78,1.81,1.74,1.72,2.14,2.4,2.87,3.19,2.99,2.78,2.85,2.7,2.9,3.1,3.16,3.21,2.84,4.37,5.38,5.99,7.02,8.58,9.57,10.98,12.84,14.72,15.47,16.77,20.65,24.76,26.29,27.9,28.71,32.27,36.67,41.29,47.44,51.16,54.13,56.97,58.5,60.44,60.48,58.36,55.4,52.74,51.12,48.99,47.48,41.42,39.06,36.29,33.47,29.99,30.14,30.06,30.44,30.05,30.62,30.66,30.6,30.98,31.05,30.93,30.85,30.97,31.5,30.87,30.43,30.52,29.83,29.78,29.37,29.02,28.64,28.18,27.98,27.34,27.12,26.06,25.15,23.8,22.58,21.85,21.85,21.7,21.23,21.08,20.71,20.34,20.18,20.32,19.94,19.71,19.64,19.76,19.74,19.64,20.03,19.35,18.67,17.42,16.73,15.47,14.88,14.29,13.57,13.02,12.93,11.83,11.75,10.71,11.05,10.74,10.9,11.26,11.6,12.31,12.54,12.77,13.15,13.24,13.21,13.4,13.73,14.24,13.89,14.39,15.43,15.79,16.84,17.13,16.99,16.22,14.59,14,13.86,13.45,12.42,9.1,7.26,7.22,7.17,6.91,7.12,5.38,4.11,3.56,3.45,3.05,2.47,1.83,1.76,1.71,1.28,1.11,1.25,1.2,1.04,0.49,0.38,0.05,-0.16,-0.12,-0.18,-0.13,-0.34,-0.28,-0.22,0.17,1.13,1.09,0.74,0.58,0.15,0.28,0.47,0.42,0.32,0.13,0.18,0.25,0.35,0.36,-0.07,0,0.25,0.09,0.01,0.39,0.1,0.29,0.05,0.03,0.26,-0.16,-0.17,0.25,0.32,-0.18,0.21,0.06,0,-0.18,-0.14,-0.12,-0.07,0,0.14,0.2,-0.19,-0.36,-0.07,-0.19,-0.32,-0.04,-0.2,-0.04,0.04,-0.43,-0.28,0,-0.07,-0.15,-0.07,-0.12,-0.02,-0.18,-0.08,-0.38,-0.33,-0.5,-0.59,-0.3],[0.11,0,-0.25,0.01,-0.12,0.05,0.14,-0.04,-0.11,0.08,-0.16,-0.13,-0.31,-0.62,-0.82,-0.94,-0.92,-0.56,-0.81,-0.67,-0.34,0.23,0.19,-0.03,0,-0.31,-0.21,-0.32,-0.48,-0.57,-0.41,-0.76,-0.56,-0.6,-0.64,-0.17,-0.32,-0.26,-0.46,-0.65,-0.55,-0.17,-0.25,-0.47,-0.5,-0.27,-0.18,0.31,0.65,0.71,1.08,0.85,0.33,0.41,0.29,0.13,0.31,0.11,0.19,-0.07,0.18,0.24,0.85,1.58,1.56,1.96,1.59,1.21,0.81,1.2,0.98,1.22,2.07,2.31,2.32,2.16,2.08,2.66,2.95,3.2,3.6,4.52,4.57,5.26,5.87,6.05,6.65,6.49,6.81,7.49,7.85,8.54,9.06,10.06,11.32,11.36,12.08,12.24,12.98,13.13,13.61,14.35,15.32,16.54,17.55,18.42,19.16,19.63,20.45,21.04,21.58,22.44,22.94,24.31,26.76,28.54,30.26,31.91,33.3,33.4,33.32,32.95,32.5,31.56,30.5,30.06,29.65,29.36,28.59,28.5,28.22,27.87,27.83,27.95,27.69,27.67,27.25,27.58,27.38,26.06,25.36,24.19,23.06,22.14,21.78,20.82,20.12,19.03,18.72,17.67,17.24,16.66,16.83,16.62,16.07,16.25,16,16.16,16.14,15.75,15.73,15.98,15.98,16.22,16.06,15.8,16.17,16.05,16.2,16.2,16.06,16.3,16.41,16.71,16.71,17.16,17.12,17.44,17.3,17.89,17.87,17.81,18,17.3,16.16,15.25,14.61,14.19,13.66,14.24,14.17,14.23,14.62,13.59,13.07,12.8,12.99,12.83,12.87,13,12.55,12.15,11.44,11.32,10.92,11.21,11.33,10.93,9.81,8.94,8.25,7.66,6.96,6.26,6.16,5.65,5.59,5.11,5.05,4.14,3.81,3.58,3.21,2.49,2.25,1.91,1.43,1.07,0.43,-0.14,0.06,-0.27,-0.28,-0.22,-0.08,0.25,0.25,-0.02,-0.14,0.06,0.01,-0.09,-0.21,-0.4,0.03,-0.15,-0.02,-0.31,-0.27,-0.2,-0.26,0.02,-0.03,-0.09,-0.26,-0.42,0,-0.45,-0.5,-0.25,-0.49,-0.25,-0.09,-0.27,-0.12,-0.34,-0.68,-0.83,-0.19,0.48,0.63,0.46,0.85,0.42,0.33,0.19,0.12,0.23,0.2,-0.08,0.1,0.26,0.22,0.27,-0.02,0.18,0.21,-0.16,-0.25,0.23,-0.27,-0.22,-0.27,0.23,0.25,-0.15,0.13,0.14,-0.24,-0.24],[-0.76,-1.17,-1.41,-1.34,-1.38,-1.12,-0.96,-0.64,-0.27,-0.54,-0.24,-0.7,-0.71,-0.68,-0.37,-0.58,-0.33,-0.43,-0.43,-0.64,-0.34,-0.78,-0.75,-0.55,-0.51,-0.85,-0.74,-0.95,-0.66,-0.89,-0.28,-0.51,0,-0.11,-0.53,-1.06,-0.69,0.21,0.23,0.19,0.26,-0.1,0.11,-0.17,-0.06,-0.19,-0.37,0.05,-0.29,-0.19,-0.26,-0.49,-0.63,-1.03,-1.18,-0.79,-1.05,-0.38,0.33,0.16,0.57,0.13,0.24,0.98,1.37,1.87,2.06,2.16,2.79,3.17,3.34,3.21,2.92,3.03,2.57,2.6,2.45,2.7,2.78,2.69,3.38,3.65,3.52,3.94,4.09,4.7,4.25,4.61,5.26,5.93,6.14,7.33,7.97,8.38,9.02,9.81,10.33,10.77,11.14,11.91,12.76,13.32,14.26,14.85,16.05,17.73,19.5,20.92,21.06,21.09,21.22,21.04,21.94,23.52,24.73,26.66,27.67,29.56,29.59,30.53,32.78,34.61,35.77,38.16,40.16,40.67,40.47,39.94,39.41,39.44,37.53,35.77,33.72,32.29,30.68,28.59,26.57,24.57,24.05,22.6,21.87,21.3,20.31,19.87,19.28,18.62,19.17,20.26,18.7,17.82,16.89,15.7,14.98,14.88,14.68,14.37,14.49,14.68,14.31,14.33,14.29,14.58,14.8,14.78,14.49,14.86,14.69,14.54,15.14,15.35,15.83,15.81,16.21,16.71,16.66,16.76,16.56,16.07,16.1,15.79,15.56,15.48,15.01,14.6,13.81,12.9,12.34,11.32,10.58,9.43,8.94,7.76,7,6.44,6.65,5.95,5.6,5.46,5.4,4.76,4.32,3.73,2.79,2.14,1.94,1.22,1.03,1.05,1.69,1.76,2.3,1.97,1.92,2.03,1.66,1.37,1.37,1.25,1.15,1.23,1.39,0.91,0.11,0.21,0.38,0.62,1.07,1,0.74,0.16,0.32,0.19,0.27,0.87,0.37,0.22,0.01,-0.61,-0.85,-0.46,-0.11,0.58,0.16,0.28,0.29,0,-0.09,-0.08,0.11,0.78,0.74,0.26,-0.14,-0.73,-0.76,-0.81,-1.16,-0.82,-0.82,-0.92,-0.88,-1.18,-1.03,-1.27,-0.73,-0.72,-0.89,-0.48,-0.22,0.05,0.29,0.26,0.27,0.52,0.5,0,0.19,0.01,-0.37,-0.53,-0.53,-0.66,-0.34,0.03,0.29,0.66,-0.04,-0.88,-0.3,-0.02,0.21,-0.11,-0.53,-0.63,-1.19,-1.27,-1.63,-1.41,-2.03,-2.31],[-0.41,-0.64,-0.5,-0.62,-0.48,-0.5,-0.25,-0.18,-0.28,-0.25,-0.38,-0.47,-0.22,-0.34,0,-0.17,-0.3,-0.6,-0.97,-0.61,-0.91,-1.07,-1.23,-0.63,-0.42,-0.33,-0.12,0.22,-0.05,0.06,0.29,-0.28,-0.2,-0.49,-0.49,-0.8,-0.78,-0.53,-0.94,-0.57,-0.82,-1.03,-0.78,-1.29,-0.88,-1.19,-0.77,-0.91,-1.16,-0.65,-0.41,0.42,0.3,0.17,0.05,0.06,0.87,1.05,1.17,0.59,0.21,0.18,0.67,0.96,1.55,2.07,2.22,2.32,2.81,2.86,3.1,3.4,3.22,3.31,3.45,3.33,3.43,3.5,3.75,4.07,4.3,4.29,4.46,4.91,5.11,6.1,7.78,8.76,10.33,11.34,12.78,14.21,15.2,16.86,20.39,22.72,24.73,26.76,27.73,28.49,29.12,29.66,29.55,28.23,25.77,23.17,21.77,20.88,20.17,19.33,17.92,16.2,15.05,14.33,13.39,12.81,11.77,11.66,11.81,11.74,12.44,12.63,13.17,14.31,15.21,16.73,17.6,18.86,20.27,21.21,22.6,23.93,25.29,26.69,28.09,27.77,27.9,27.81,27.59,27.73,27.68,27.68,27.82,26.72,25.43,24.63,24.24,23.59,20.86,19.54,18.56,18.23,18.68,19.29,20.35,20.9,22.45,24.62,26.09,29.19,31.29,31.68,32.26,33.06,35.22,35.21,34.76,33.36,32.09,31.82,31.86,30.29,29.07,28.86,28.39,28.12,28.31,28.13,28.56,28.58,28.6,28.61,27.63,26.61,24.43,22.5,20.6,19.45,17.37,16.13,14.06,12.97,12.64,12.1,11.97,11.51,10.61,9.95,9.41,8.98,8,7.06,6.48,5.14,5.39,4.92,5.16,4.91,4.59,4.38,3.69,3.6,2.61,2.18,2.03,1.02,0.66,0.71,0.91,0.68,0.7,0.46,0.21,0.39,0.51,0.49,0.13,0.46,1.11,1.6,1.03,0.71,0.32,-0.1,-0.35,-0.1,0.02,-0.19,-0.2,-0.34,-0.34,-0.1,-0.44,-0.54,-0.36,-0.56,-0.6,-0.94,-1.08,-1.01,-0.87,-0.27,0.24,-0.05,0.16,0.13,-0.06,0.06,0.44,0.14,-0.03,-0.06,-0.11,0.24,-0.02,0.05,-0.13,-0.13,-0.04,0.11,0,0.11,0.29,-0.09,0.01,0.07,0.09,0.64,0.65,1.1,0.48,-0.08,-0.53,-0.36,-0.32,-0.59,-0.45,-0.53,0,0.06,-0.03,-0.03,0.16,0.1,0.04,-0.02,-0.03,0.26,0.37,0.48],[-0.68,-0.59,-0.61,-0.25,-0.45,-0.32,-0.42,-0.5,-0.25,-0.25,-0.19,0,-0.08,0,0.18,-0.21,-0.03,-0.14,-0.53,-0.98,-1.65,-1.25,-0.69,-0.36,-0.39,-0.3,-0.36,-0.19,-0.7,-0.29,-0.49,-0.28,-0.57,-0.59,-0.59,-0.4,-0.31,-0.18,-0.3,-0.57,-0.5,-0.68,-0.2,-0.4,0.17,1.13,1.08,1.26,0.94,0.4,0.21,0.54,0.9,0.62,0.15,-0.18,0.36,0.23,0.16,0.52,0.71,0.98,0.93,0.97,0.75,0.85,1.25,1.5,1.89,1.9,2.05,2.32,2.43,2.44,2.47,2.84,2.59,2.94,2.88,2.35,2.35,2.11,2.88,3.32,3.52,4.41,4.54,4.79,5.82,6.61,6.97,7.98,9.93,11.72,13.05,13.68,15.15,15.75,17.06,19.28,22.29,23.74,24.06,24.89,24.55,24.42,24.62,23.79,22.87,22.1,21.26,20.16,19,18.33,18.06,17.71,17.31,16.9,16.29,16.27,15.77,15.73,15.39,15.52,15.6,15.47,15.65,15.35,15.22,15.22,15.23,15.57,15.2,15.45,15.62,15.75,15.43,15.72,15.46,15.55,15.53,15.46,15.75,15.79,15.34,14.66,14.03,13.91,13.44,12.44,11.92,11.56,11.47,10.85,10.75,10.68,10.22,9.93,9.98,9.45,9.18,9.19,8.95,8.16,7.97,8.25,8.15,8.95,9.69,10.38,11.17,10.8,11.53,12.49,13.4,14.78,15.3,16.37,17.29,17.9,17.68,17.3,17.06,17.12,17.27,18.25,18.55,18.34,17.73,17.55,18.06,17.94,17.72,17.78,18.14,17.67,17.79,18.27,17.97,17.84,17.52,16.16,14.94,13.45,11.7,10.38,10.71,10.27,10.2,10.41,10.21,9.78,9.16,8.73,8.1,6.95,6.18,4.84,4.64,3.96,3.89,3.46,3.06,2.82,2.44,2.26,1.84,1.42,1.3,0.89,1,0.3,0.13,-0.06,0.09,-0.49,-0.73,-0.16,0.05,-0.11,0.07,0.29,0.01,-0.03,-0.02,-0.02,0.17,0.25,-0.04,-0.07,-0.15,0.35,-0.15,0.24,-0.09,0.27,0.03,-0.17,-0.09,-0.13,0.14,0.01,-0.06,0.21,0.26,0.24,0.22,-0.09,0.12,0.25,0.17,0.16,0.08,-0.18,-0.18,-0.17,0.07,-0.37,-0.09,-0.08,0.15,0.06,-0.08,-0.35,-0.16,-0.06,-0.32,-0.29,-0.05,-0.09,-0.14,-0.43,-0.05,-0.43,-0.16,-0.09,0,-0.07,-0.31,0],[-0.98,-0.93,-1.09,-1.09,-1.01,-0.61,-0.78,-0.51,-0.66,-0.81,-0.34,-0.75,-0.47,-0.76,-0.68,-0.79,-0.92,-0.61,-0.81,-0.97,-0.55,-1.32,-1.04,-1.04,-0.46,-0.86,-0.59,-0.61,-0.34,-0.56,-0.78,-0.63,-0.88,-0.51,-0.68,-0.74,-0.58,-1.05,-1.08,-1.02,-1.26,-1.25,-0.74,-0.02,0.44,1.12,0.97,0.96,1.06,1.16,1.03,0.76,0.09,0.41,0.1,-0.22,-0.17,-0.13,0,0.03,0.46,0.65,0.97,1.36,1.36,1.82,1.8,1.95,1.87,1.11,0.91,1.31,2.24,2.43,2.26,1.88,2.03,2.6,2.91,3.08,2.82,2.86,2.85,2.9,2.97,2.81,3.31,3.58,3.73,4.21,4.4,4.47,5.14,5.45,5.98,6.56,7.34,9.14,12.59,12.8,13.49,14.26,14.75,16.35,18.65,19.57,20.01,19.85,19.43,18.51,17.84,17.79,18.67,18.95,19.88,20.99,22.89,23.82,24.49,24.95,25.8,25.82,25.64,24.9,24.31,23.49,23.58,23.04,22.92,22.62,22.82,22.49,22.09,22.25,21.88,21.41,21.24,20.8,20.27,19.61,19.03,18.57,17.8,17.05,16.52,15.36,14.77,14.41,13.88,13.33,12.44,12.02,11.54,11.31,11.44,11.07,10.97,10.66,10.08,9.77,10.19,10.07,10.42,10.41,10.52,10.58,10.64,10.77,10.91,10.84,11.07,10.71,10.8,10.92,10.75,11.17,11.04,11.16,11.26,10.95,10.5,9.71,9.63,8.9,8.74,8.71,8.74,8.94,9.49,9.4,9.64,9.58,10.36,11.35,10.72,10.45,10.51,10.68,11.08,11.13,11.55,11.35,10.63,10.49,9.92,9.14,7.95,7.4,7.23,6.97,7.22,5.86,4.61,3.64,3.12,2.64,2.67,2.75,2.87,1.63,1.32,1.58,1.64,1.92,1.78,2.26,1.64,1.58,1.26,0.41,0.19,-0.19,-0.3,-0.23,0,-0.1,-0.08,0.16,-0.08,0.01,0.33,0.18,-0.06,0.33,0.05,0.14,0.19,-0.02,-0.22,0.03,0.2,-0.25,-0.27,-0.19,0.11,0.15,-0.24,0.07,0.08,-0.33,-0.42,-0.08,-0.27,0.08,0.35,0.49,0.18,0.18,-0.03,-0.24,-0.23,-0.26,0.14,0.21,-0.1,-0.35,0.01,-0.06,-0.35,-0.29,-0.23,-0.1,-0.1,-0.14,0.64,0.46,0.03,-0.42,-0.16,-0.33,-0.3,-0.08,-0.13,-0.07,-0.04,-0.33,-0.26,-0.23,0.04,-0.08],[-0.5,-0.75,-0.41,-0.31,-0.66,-0.69,-0.65,-0.25,0.02,-0.36,-0.52,-0.69,-1.06,-1,-1,-1.07,-0.87,-0.52,-0.57,-0.38,-0.38,-0.31,-0.63,-0.47,-0.69,-0.8,-0.57,-0.95,-1.08,-0.79,-1.07,-0.95,-0.43,-0.57,-0.16,-0.12,-0.35,-0.45,-0.56,-0.22,-0.56,-0.49,-0.6,-0.76,-0.74,-0.83,-1.11,-1.27,-1.48,-1.18,-0.81,-0.2,0.22,0.3,0.39,0.72,0.55,0.52,0.41,0.38,0.09,0.64,1.11,1.08,1.14,1.07,1,0.92,0.59,0.36,0.54,0.68,1.08,0.72,1.41,1.55,1.75,2.17,2.45,2.73,2.7,2.94,2.9,2.82,2.66,2.93,2.86,2.58,3.19,3.32,4.07,3.77,4.01,4.14,4.44,4.2,4.23,4.38,4.85,5.05,5.99,7.21,8.33,9.25,10.43,11.21,11.51,12.51,12.77,13.93,14.49,14.93,16.14,16.96,17.87,19.41,20.16,20.29,20.64,21.16,21.85,22.92,23.63,23.6,24.49,25.71,27.17,28.01,28.85,30.08,30.4,31.6,32.32,32.73,33.36,34.63,33.3,31.3,29.4,28.67,28.33,27.97,27.12,25.08,22.29,20.7,18.97,17.23,15.83,14.07,13.33,12.76,11.74,10.97,10.88,10.14,10.28,10,9.51,9.94,9.65,9.49,9.8,9.42,10.15,10.83,10.4,9.93,9.98,9.85,10.6,10.35,10.35,10.36,9.5,8.89,8.84,8.19,8.27,7.74,7.45,7.69,7.32,6.88,6.78,6.41,6.23,6.23,6.45,6.53,6.69,6.66,6.69,6.64,6.6,6.13,5.64,5.11,4.6,3.74,3.36,3.21,3.2,3.04,2.82,2.53,2.23,2.36,1.94,1.83,1.72,1.46,1.21,1.45,1.11,1.27,1.19,0.76,0.65,1.13,0.68,0.86,0.75,0.69,0.79,0.69,0.32,0.47,0.23,0.09,0.03,-0.3,-0.03,-0.36,-0.19,-0.57,-0.48,-0.53,-0.04,-0.25,-0.13,-0.01,-0.24,0.12,0.14,-0.1,-0.15,0.15,-0.18,0.09,0.13,-0.13,0.12,0.04,-0.05,0,0.01,-0.23,-0.26,-0.43,-0.57,-0.85,-0.82,-1.01,-1.52,-1.37,-0.59,-0.4,-0.26,0.04,0.15,0.09,-0.18,-0.16,-0.06,-0.24,0,0.22,-0.01,-0.91,-1.43,-2.01,-1.63,-1.67,-1.71,-1.19,-0.4,0.16,-0.21,0.06,-0.13,-0.14,0.12,0.26,-0.18,0.12,-0.07,0.08,0,-0.04],[-0.68,-0.37,-0.36,-0.96,-0.75,-0.93,-1.07,-0.82,-1.08,-0.99,-1.17,-1,-1.48,-1.53,-1.3,-1.39,-1.82,-1.64,-1.46,-1.52,-1.27,-1.46,-1.24,-1.13,-1.35,-1.09,-1.69,-1.69,-1.59,-1.66,-1.46,-1.6,-1.6,-1.18,-1.12,-1.3,-1.43,-1.28,-1.25,-1.08,-1.25,-1.42,-1.25,-1.16,-1.37,-1.24,-0.85,-0.56,-0.3,0.03,-0.13,-0.14,0.32,0.14,0.28,0.46,0.74,0.58,0.98,0.87,0.35,0.55,0.28,-0.14,0.47,0.75,0.67,1.18,0.6,0.97,0.88,0.98,0.75,0.99,1.99,2.37,2.14,1.72,1.87,1.92,1.84,2.06,2.51,2.94,3.24,3.63,4.15,4.71,5.08,5.6,6.34,6.81,7.42,8.31,11.53,12.46,13.52,14.51,14.84,15.68,15.49,15.43,15.3,15.48,15.23,15.2,15.53,15.59,15.58,15.59,15.4,15.09,15.07,15.17,14.7,14.52,13.83,13.69,13.75,13.54,13.15,13.16,13.72,13.72,14.25,14.41,15.34,16.4,17.55,18.16,19.49,20.57,21.56,22.91,24.1,25.17,25.7,26.45,26.57,27.48,28.05,28.52,28.23,28.62,28.56,25.86,23.83,23.06,22.97,22.85,22.73,21.26,20.19,19.28,18.06,17.3,16.19,15.41,14.61,13.93,13.07,12.52,11.87,12.14,12.19,12.31,11.94,11.96,12.12,12.06,11.85,11.71,11.06,10.38,10.16,10.35,10.41,10.01,9.8,9.45,8.89,8.19,7.77,7.09,6.08,5.62,5.31,5.71,5.85,6.45,6.64,7.11,7.48,7.45,7.34,7.59,7.73,7.17,7.43,6.36,5.63,4.9,4.32,3.87,3.88,4.1,4.46,4.75,4.91,5.19,5.25,5.76,4.94,4.27,3.95,3.76,2.83,2.58,2.57,2.42,2.24,1.71,1.54,1.6,1.36,1.61,1.44,1.35,1.18,1.08,0.65,0.08,-0.51,-0.35,0.05,-0.09,-0.01,0.14,0.15,0.19,0.2,0.01,0.18,0.11,-0.04,-0.2,-0.31,-0.43,-0.14,-0.29,-0.4,-0.84,-0.62,-0.57,-0.12,0.2,0.31,-0.13,-0.05,0.21,0.04,0.05,0.05,-0.02,0.29,0.09,0.2,0.1,-0.04,0.02,0.03,-0.55,-0.27,-0.45,-0.11,-0.04,-0.46,-0.45,-0.47,-0.45,-0.03,0,-0.13,-0.16,0.11,-0.35,-0.09,0.18,0.11,-0.28,-0.11,-0.19,0.06,0.05,-0.06,-0.13,0.04,0.38,0.1,0.23],[-0.76,-1.15,-1.2,-1.03,-1.16,-0.9,-1.15,-0.95,-1.11,-0.82,-1.14,-1.23,-1.06,-1.17,-0.77,-0.82,-0.69,-0.69,-0.58,-1.15,-1.05,-1.49,-1.84,-1.87,-1.87,-2.07,-1.63,-2.01,-1.86,-1.69,-1.71,-1.15,-1,-0.85,-0.86,-0.72,-0.59,-0.53,-0.5,-0.58,-0.6,-0.88,-0.55,-0.74,-0.81,-1.32,-0.89,-1.42,-0.89,-0.7,-0.4,0.29,0.12,-0.31,-0.76,-1.35,-1.57,-1.5,-1.29,-1.49,-1.14,-0.66,-0.62,-0.43,0.03,0.3,1.07,1.36,1.47,1.32,1.09,1.22,1.44,1.69,2.06,2.22,2.27,1.85,1.47,1.26,1.4,1.39,1.51,1.43,1.66,2.05,2.25,2.76,3.56,4.6,5.47,6.75,8.71,9.59,11.14,12.42,13,13.27,13.43,14.34,16.45,17.91,19.78,22.83,23.84,24.93,25.62,26.44,26.49,25.24,23.76,22.59,20.93,18.7,17.6,16.4,15.85,15.24,14.62,13.94,13.89,13.91,13.73,13.7,13.54,13.68,14.18,13.95,14.13,14.5,14.35,14.19,14.31,14.46,15.34,15.63,16.72,17.73,19.4,20.01,20.26,21.49,22.74,23.37,23.91,24.37,22.96,21.82,20.19,18.92,17.58,16.15,15.33,13.97,13.88,13.39,12.79,11.52,10.1,9.61,10.25,10.24,9.97,10.27,10.25,10.4,10.05,9.87,9.17,8.13,8.43,8.2,8.39,7.77,7.24,6.9,5.94,6.41,6.69,6.85,6.97,8.41,9.2,10.39,10.4,10.21,10.12,10.56,10.99,11.36,11.64,12.41,12.41,12.88,12.94,13.4,13.85,13.35,12.46,11.73,11.26,10.76,9.71,9.07,8.48,7.95,7.3,6.79,6.18,5.97,5.53,5.69,5.48,5.24,5.33,4.6,4.41,4.15,3.57,3.18,2.58,2.1,2.08,1.45,1.46,1.12,1.25,0.58,0.7,0.4,0,0.36,0.54,0.35,0.45,-0.08,0.11,0.22,0.38,0.34,-0.16,-0.1,0.02,0.16,-0.05,0.12,-0.4,-0.17,-0.18,0.16,0.01,0.1,0.05,0.02,-0.23,0.11,-0.04,-0.17,0.22,0.26,0.08,0.06,0.07,0.33,-0.04,-0.03,0.41,-0.04,0.46,0.06,-0.03,0.31,0.55,0.2,0.18,0.14,0.16,0.71,0.38,0.39,0.42,0.52,0.12,0.27,0.51,0.03,0.06,0.35,0.02,0.14,-0.34,-0.39,-0.22,-0.45,-0.48,-0.78,-1.02,-0.92,-1.07,-1.24],[-0.84,-0.87,-0.48,-0.3,-0.58,-0.46,0.01,-0.25,-0.15,-0.43,-0.99,-1.13,-1.12,-0.77,-0.93,-0.95,-1.16,-1.05,-0.85,-1.07,-0.87,-1.2,-1.16,-1.23,-0.96,-1.25,-0.9,-0.73,-1.25,-0.94,-0.98,-0.83,-1.19,-1.16,-1.32,-1.43,-0.95,-0.65,-0.83,-0.22,0.04,-0.02,-0.39,-0.15,-0.23,-0.19,-0.07,-0.46,-0.26,-0.47,-0.85,-0.51,-0.74,-0.82,-1.14,-0.97,-1.27,-1.21,-0.8,-0.57,0.14,0.38,0.94,0.59,0.62,0.26,0.15,0.31,0.31,0.43,0.77,0.92,0.72,1.09,1.1,1.08,0.71,0.43,-0.48,-0.75,-0.18,0.4,0.99,1.84,2.11,2.4,3.04,3.42,3.77,3.77,3.49,3.35,4.02,4.03,4.38,4.81,5.2,5.61,6.59,7.37,7.78,8.87,9.73,10.68,12.03,13.1,14.37,15.23,16.64,17.84,19.26,20.23,21.43,22.38,22.53,23.68,25.5,27.03,27.49,28.33,29.08,28.54,27.78,26.75,25.88,25.36,24.42,23.38,22.34,21.24,21.13,20.32,20.23,19.32,18.81,18.17,17.18,16.62,15.63,15.11,14.53,14.03,13.22,12.76,12.63,11.98,11.46,11.22,11.18,11.19,11.27,11,10.91,11.29,10.95,10.94,11.15,10.86,11.04,10.72,10.76,10.56,10.26,10.36,9.8,9.94,9.59,9.36,8.9,8.71,8.57,7.97,7.61,7.1,6.7,6.08,6.22,6.19,6.57,6.64,7.27,7.37,7.42,7.49,7.22,7.47,7.46,7.33,6.88,7.2,6.8,6.64,6.67,6.05,6.24,5.81,5.86,6.06,5.74,5.62,6.05,5.62,5.88,6.08,5.67,6.04,5.8,5.57,5.1,4.11,3.62,3.23,2.92,2.48,2.67,2.13,1.75,1.7,1.4,1.56,1.43,0.94,1.16,0.48,0.78,0.17,0.23,0.47,0.16,0.23,0.31,-0.22,0.14,-0.17,-0.12,-0.21,-0.01,-0.21,-0.22,0.02,-0.01,-0.25,-0.14,-0.16,-0.33,-0.27,-0.52,-0.27,-0.77,-0.59,-0.96,-0.62,-0.62,0.08,0.2,0.21,0.39,0.23,0.63,0.52,0.75,0.76,0.73,0.35,0.79,0.38,0.14,-0.11,-0.25,-0.22,-0.22,-0.17,0.43,0.48,0.27,0.68,0.8,0.44,0.79,0.75,0.69,0.66,0.29,-0.24,-0.9,-0.64,-0.17,0.07,0.02,-0.54,-0.3,-0.51,0,0.13,0.67,0.96,1.1,0.92,0.79,0.87],[-0.97,-1.11,-0.82,-1.01,-0.63,-0.79,-1.19,-1.01,-0.95,-0.85,-0.69,-0.58,0.03,-0.02,0.07,0.03,0.29,-0.17,-0.18,-0.65,-0.27,-0.61,-0.8,-0.54,-1.07,-0.54,-0.42,-0.39,-0.08,0,-0.13,-0.63,-0.93,-0.25,-0.52,-0.53,-1,-0.95,-1.07,-0.75,-0.65,-0.75,-0.62,-0.85,-0.92,-1.33,-1.43,-0.96,-0.83,-0.28,0.01,-0.21,0.03,0.61,0.14,-0.26,-0.15,-0.36,-0.72,-0.14,-0.39,-0.14,0.01,0.21,0.32,0.5,0.52,0.89,1.27,0.96,1.16,1.15,1.57,1.79,2.04,2.21,2.27,1.43,0.95,0.08,0.9,1.08,1.6,1.57,2.04,2.02,2.19,2.95,3.04,3.65,4.7,5.06,5.6,6.41,6.88,7.08,7.83,7.57,7.99,8.02,7.76,8.21,8.16,8.44,8.51,8.37,8.97,9.17,8.96,9.31,9.36,9.52,10.03,9.91,10.04,10.48,11.21,12.25,13.18,13.88,15.05,15.75,16.9,17.21,18.13,18.09,17.84,18.07,19.1,19.75,20.39,21.51,22.07,21.88,21.97,22.33,21,19.59,18.35,17.74,16.98,17.38,16.9,16.74,17.16,16.98,16.52,16.59,16.44,16.03,16.06,15.5,13.93,14.2,14.28,14.5,14.67,14.44,13.97,13.38,13.17,12.9,12.66,12.36,12.66,13.09,14,12.52,11.53,11.13,11.58,11.16,11.05,10.3,10.05,9.59,8.88,8.55,7.82,7.6,7.33,6.97,6.64,6.8,6.47,6.3,6.4,6.69,6.71,6.49,6.81,6.35,6.49,6.7,6.59,6.41,5.96,6.06,5.86,5.92,5.46,5.07,4.18,3.75,2.62,2.58,2.56,2.34,2.62,2.57,2.39,2.54,2.35,2.6,2.24,1.76,1.34,1.09,1.49,1.06,0.97,0.5,0.67,0.29,0.27,0.29,0.38,-0.08,-0.07,-0.1,0.05,-0.14,0.34,-0.13,-0.13,-0.23,0.2,-0.23,-0.1,0.23,0.23,0,0.12,0.08,-0.32,-0.13,0.01,-0.5,-0.43,-0.64,-0.5,-0.78,-0.7,-0.37,-0.92,-0.98,-0.55,-0.57,-0.46,-0.61,-0.98,-0.45,-0.43,-0.64,-0.84,-0.5,-0.65,-0.81,-0.19,0.24,0.23,0.41,0.46,0.24,-0.18,-0.24,-0.42,0.07,0.61,1.04,1.03,0.51,0.39,0.48,0.58,0.22,0.33,-0.21,0.07,-0.17,-0.55,-0.12,0.04,0.4,0.73,0.9,0.59,0.62,0.84,0.97],[-1.87,-1.88,-2.09,-1.65,-1.26,-0.87,-0.51,-1.05,-0.99,-1.42,-1.33,-1.42,-1.67,-1.47,-1.23,-1.12,-1.36,-1.32,-0.46,-0.61,-0.45,-0.68,-0.89,-1.36,-1.88,-1.17,-1.17,-0.47,-0.54,-0.4,-0.89,-0.71,-1.24,-1.38,-1.49,-1.48,-1.33,-1.47,-1.29,-1.42,-1.3,-1.6,-1.53,-1.15,-1.15,-1.65,-1.66,-1.39,-1.23,-1.13,-1.26,-1.3,-1.21,-1.1,-1.48,-1.68,-1.37,-1.2,-0.69,0.28,0.83,0.5,0.42,0.21,-0.48,-0.78,-1.05,-0.97,-1.06,-1.21,-1.18,-1.07,-0.9,-0.51,0.29,0.28,0.71,0.79,1.4,1.75,2.1,1.92,2.26,2.78,3.31,3.15,3.54,3.82,4.21,4.26,4.47,4.44,4.66,5.46,6.14,7.23,9,9.8,10.67,11.46,11.99,12.84,13.36,13.95,15.15,16.73,18.15,19.9,20.06,20.33,21.26,21.21,21.1,21.17,21.09,20.86,20.33,20.1,19.98,19.64,19.16,18.56,18.5,17.71,17.05,16.5,15.6,14.95,13.75,13.18,12.13,10.89,9.81,8.87,8.1,6.92,5.86,5.86,5.44,5.11,5.25,5.17,5.4,5.03,5.29,5.82,6.28,6.34,6.46,6.02,5.97,5.49,5.59,4.83,4.19,3.54,3.2,2.74,2.34,2.74,2.87,2.74,3.2,3.22,3.64,4,4.3,4.47,4.58,5.19,5.06,5.5,5.67,5.92,6.2,6.33,6.29,6.4,6.84,7.1,7.28,7.44,7.88,7.64,7.03,7.07,6.79,6.87,6.75,6.78,7.13,7.16,7.03,7.41,7.56,7.83,7.89,8.49,8.3,7.9,7.57,6.89,6.87,6.05,6.03,5.22,5.29,4.83,4.21,4.08,3.38,3.27,2.97,2.34,2.02,2.07,1.4,1.15,0.9,0.58,0.65,0.52,1.13,1.57,2.48,2.35,2.6,2.56,2.14,1.62,1.48,1.17,1.12,0.43,0.39,0.1,0,0.23,0.88,1.05,1.42,1.02,1.18,1.19,0.59,-0.12,-0.86,-0.55,-0.41,-0.63,-0.35,-0.1,0.38,0.6,0.26,-0.06,0.21,0,-0.32,-0.46,-0.09,0.12,0.11,-0.12,0.09,0.22,-0.27,-0.08,-0.13,-0.15,0.39,-0.04,0.34,0.14,0.33,0.1,0.06,-0.03,-0.06,-0.07,0.13,0.09,-0.19,0.08,-0.31,-0.78,-0.79,-0.87,-0.58,-0.58,-0.49,0.15,0.33,-0.03,0.1,0.37,0.5,0.06,0.23,0.18],[-1.32,-0.92,-0.14,-0.3,-0.26,-0.17,-0.34,-0.55,-0.29,-0.38,-0.31,0.37,0.09,-0.5,-0.25,-0.67,-0.87,-0.31,-0.62,-0.17,-0.31,-0.16,-0.45,-0.53,-1.06,-1.1,-1.62,-1.34,-1.11,-0.31,-0.45,-0.89,-0.63,-0.53,-0.39,-0.58,-0.46,-0.32,0.11,0.03,0,-0.48,-0.05,0.1,-0.11,-0.69,-1.15,-1.22,-1.21,-0.59,-0.4,0.22,-0.21,-0.51,-0.48,-0.72,-0.42,-0.37,0.07,-0.28,-0.24,-0.01,-0.08,0.12,0.07,-0.03,0.62,1.73,1.46,1.5,0.91,0.86,0.89,0.08,-0.41,-0.7,-0.39,-0.14,0.53,0.72,0.74,0.93,1.56,1.92,1.97,2.49,2.83,3.39,3.72,4.1,4.85,4.85,5.2,6.04,6.57,7.21,8.01,9.73,10.81,12.26,12.95,14.11,15.1,15.12,15.24,18.53,19.52,20,21.44,23.35,23.88,25.64,27.39,27.93,29.06,30.27,31.8,33.58,33.88,33.8,32.3,31,29.24,27.73,25.72,24.42,22.72,21.12,20.74,20.76,20.48,20.06,19.41,19.11,18.67,18.92,18.55,18.73,18.47,18.16,17.79,17.49,17.3,17.26,17.08,16.14,15.93,15.64,14.66,14.58,13.81,13.39,12.61,12.22,11.52,11.18,11.45,11.36,10.62,10.23,9.14,8.33,8.09,7.55,7.74,7.8,8.31,8.3,8.03,8.27,8.13,8.46,8.48,8.39,8.25,8.16,7.8,7.74,7.98,8.45,9.13,9.14,9.58,9.75,9.54,9.02,7.75,7.61,7.03,7.38,6.92,6.88,7.17,7.62,8.07,7.69,7.88,7.68,7.58,7.26,7.18,6.54,6.31,5.86,5.69,5.63,5.33,4.96,4.44,4.45,4.02,4.04,3.83,3.14,3.15,2.78,2.39,2.03,1.84,1.75,1.66,1.16,1.38,1.33,1.12,0.92,0.42,0.02,-0.06,0.09,0.02,0.79,0.55,0.18,0.25,0.49,0.16,0.01,0.72,1.04,0.42,0.1,0.01,-0.5,-0.05,-0.04,-0.05,-0.37,-0.36,0.26,-0.08,-0.28,-0.88,-0.46,0.46,0.17,0.33,-0.07,-0.07,-0.27,-0.15,-0.53,-0.23,0.06,0.11,0.24,0.28,0.65,0.44,0.53,0.76,0.59,0.99,0.5,0.38,0.45,0.25,0,0.3,0.25,0.36,0.22,-0.32,-0.35,-0.84,-0.66,0.18,0.74,-0.07,-1,-1.47,-0.97,-0.63,-0.03,0.3,-0.09,-0.07,-1.17,-1.64,-1.9],[-0.64,-0.58,-0.52,-0.61,-0.91,-0.86,-0.95,-1.03,-0.75,-0.73,-0.77,-1.1,-0.83,-0.9,-1.36,-0.99,-0.96,-1.29,-0.81,-0.76,-1.11,-0.96,-1.04,-0.94,-1.08,-0.88,-1.13,-0.8,-0.85,-0.85,-0.7,-0.74,-0.83,-0.98,-0.87,-0.78,-0.57,-0.82,-0.79,-0.49,-0.72,-0.47,-0.32,-0.56,-0.69,-0.81,-0.54,-0.97,-1.15,-0.99,-1.29,-0.9,-0.87,-1.15,-1.26,-0.78,-0.99,-1.09,-0.02,0.32,-0.14,-0.58,-1.36,-0.79,-1.11,-0.71,-0.04,0.58,0.74,0.6,0.13,0.09,0.08,-0.33,-0.01,0.02,0.27,0.1,0.48,0.77,1.23,1.32,1.11,1.27,1.47,1.19,1.63,1.75,1.49,1.52,1.71,1.8,1.48,1.35,1.72,1.62,1.86,2.26,2.74,3.52,4.18,5.11,5.32,6.01,7.11,7.6,8.51,9.36,11.1,13.48,13.66,13.91,14.33,14.47,15.43,16.58,18.04,18.91,18.93,20.6,22.78,23.44,24.17,24.46,24.87,24.33,24.99,25.98,27.1,29.17,29.62,29.34,29.08,28.16,27.45,26.82,25.64,24.71,24.71,24.32,24.22,23.26,21.25,19.86,18.71,17.53,16.7,15.26,14.87,14.88,14.73,14.58,14.55,14.28,13.43,12.41,12,11.52,11.2,10.39,10.37,10.29,10.28,9.85,9.79,9.61,9.38,8.73,8.57,8.86,9.19,8.66,7.82,7.67,7.13,6.81,6.76,6.8,6.5,6.53,6.49,6.4,6.2,6.3,6.43,7.11,7.2,6.94,6.6,6.12,5.35,5.32,5.25,4.97,5.04,4.31,3.69,3.48,3.36,3.72,3.47,3.46,3.44,2.79,2.72,1.91,1.44,0.62,0.29,0.46,0.27,0.35,0.66,0.68,0.57,0.9,0.66,0.3,0.11,0.17,-0.19,0.08,-0.1,-0.04,-0.31,-0.14,0.09,-0.26,-0.22,0.04,0.06,-0.24,0.17,0.15,-0.37,-0.14,0.08,0.18,-0.19,-0.4,-0.03,-0.14,-0.42,0.15,0.01,-0.13,-0.29,-0.18,-0.04,-0.26,-0.3,-0.04,-0.26,0.16,-0.32,-0.17,-0.05,0.03,0.15,0.1,0.07,0.07,-0.24,-0.11,0.22,0.17,-0.11,-0.05,-0.07,0.34,0.32,0.09,0.38,-0.12,-0.07,0.4,0.36,-0.13,0.29,0.39,0.42,0,0.25,-0.08,-0.1,-0.11,-0.05,0.1,0.16,0.36,0.03,0.09,0.13,0.32,0.05,0.21,0.16,0.01,0.04,0.43],[-1.6,-1.48,-1.07,-1.47,-1.4,-1.52,-1.5,-1.6,-1.57,-1.2,-1.07,-1.48,-0.94,-0.9,-0.08,-0.56,-0.35,-0.55,-0.92,-1.08,-1.53,-1.93,-1.86,-1.5,-1.65,-1.35,-1.18,-1.24,-1.12,-1.1,-1.56,-1.6,-1.49,-1.25,-1.56,-1.26,-1.08,-1.24,-0.91,-0.68,-0.94,-1.2,-1.46,-1.65,-1.33,-0.98,-0.99,-1.12,-1.18,-1.11,-0.54,-0.12,-0.34,-0.53,-0.27,-0.72,-0.67,-0.63,-0.25,-0.24,-0.55,-1.37,-0.95,-0.84,-0.26,0.1,-0.2,-0.25,0.07,-0.45,-0.05,0.44,0.68,1.05,0.73,0.9,1.22,1.16,1.42,1.68,1.92,2.26,2.52,3.38,3.83,4.54,5.48,6.42,7.75,8.89,10.35,11.98,13.69,15.56,16.16,16.15,17.62,19.31,20.9,20.52,20.03,19.08,18.09,17.58,17.03,16.61,16.75,16.22,15.95,15.71,15.24,15.02,15.16,14.82,14.27,13.99,14.02,13.89,13.16,13.12,12.82,12.65,12.25,12.24,11.88,11.17,10.8,10.26,9.56,9.03,8.87,8.26,8.08,7.4,6.93,6.72,6.83,6.57,6.63,6.64,6.44,5.99,5.74,5.02,4.65,4.75,4.36,4.34,3.47,3.01,2.81,2.81,2.86,3.1,3.17,3.13,2.96,3.19,2.88,3.04,3.13,2.9,2.89,2.52,2.52,3.44,3.96,4.41,4.71,4.56,4.69,4.31,4.33,4.4,4.76,4.69,4.8,5.83,6.15,6.19,5.9,6.27,6.31,6.09,6.51,7.07,7.51,7.94,8.99,8.35,8.5,7.85,7.85,7.35,6.91,6.8,6.4,6.21,5.48,5.33,4.79,4.47,4,4.25,3.92,3.72,2.7,2.55,1.95,2.03,1.66,1.59,1.58,1.41,1.17,0.69,0.56,0.79,0.72,0.22,0.43,0.3,0.09,-0.35,-0.46,-0.16,-0.27,-0.33,-0.13,-0.19,-0.45,-0.07,-0.22,-0.38,-0.37,-0.87,0,0.23,0.28,0,-0.14,-0.68,-0.26,-0.61,0,0.04,0.2,0.23,0.2,0.2,0.05,0.31,0.24,0.34,0.01,-0.12,-0.09,0.25,-0.1,0.25,-0.06,-0.11,-0.16,-0.01,-0.09,0.07,0.05,-0.08,0.24,0.09,0.17,0.11,0.05,0.31,-0.1,-0.04,0.24,-0.09,0.23,0.04,0.3,-0.03,0.12,-0.2,0.3,-0.17,-0.21,-0.12,-0.49,-0.79,-0.57,-0.23,0.04,-0.09,0.05,0.17,0.09,-0.16,0.09,0.29],[-0.43,-0.25,-0.27,-0.8,-1.19,-1.58,-1.52,-1.02,-0.46,-0.37,-0.63,-0.37,-0.63,-0.83,-0.62,-0.93,-1.34,-1.65,-2.04,-1.85,-1.84,-1,-0.68,-0.14,-0.34,-0.27,-0.23,-0.07,-0.31,-0.39,-0.62,-0.85,-0.73,-0.93,-0.88,-0.62,-0.36,-0.62,-0.26,-0.5,-0.32,0,-0.15,-0.21,0.22,-0.13,-0.09,-0.06,0.04,-0.43,-0.15,-0.09,-0.41,-0.3,-0.22,-0.65,-0.57,-0.6,-0.51,-0.45,-0.38,-0.27,0.1,0,-0.14,-0.22,0,0.39,1.03,1.65,1.39,1.3,1.11,0.66,0.45,0.61,0.54,1.27,0.96,1.11,1.21,1.37,1.76,2.32,3.46,4.12,4.65,4.96,5.59,5.49,5.46,6.1,6.1,6.01,6.15,6.17,6.28,7,7.55,8.49,9.13,9.37,10.09,11.07,11.4,11.93,12.43,12.48,13.28,13.25,13.83,13.95,14.38,14.42,19.81,20.62,20.4,20.92,20.78,21.04,20.33,19.9,19.6,19.49,19.14,18.4,18.06,17.62,16.94,16.23,15.66,15.14,14.17,13.34,12.87,12.31,11.73,11,10.08,9.37,9.11,8.46,8.22,7.46,7.19,6.49,6.46,5.8,6.31,6.6,6.35,5.84,5.14,5.06,5.16,4.8,4.92,5.05,5.46,5.77,5.67,6.02,6.35,6.49,6.37,6.33,6.63,6.27,6.43,6.21,5.99,6.02,5.76,5.95,5.55,6.11,5.88,5.75,5.88,6.26,6.58,6.64,7.17,8.09,8.39,9.26,10.02,10.03,10.23,10.11,10.52,10.07,10.21,8.76,7.57,6.99,6.69,6.98,6.44,6.51,5.88,4.77,3.89,4.12,3.87,4.29,4.29,3.52,2.99,2.57,2.34,2.38,2.38,1.78,1.76,1.79,2.29,2.06,1.49,1.51,1.21,1.17,0.8,0.89,0.81,0.92,0.9,1.29,1.29,0.87,0.5,-0.16,-0.06,-0.29,-0.36,0,-0.31,-0.25,-0.26,0.24,-0.45,-1.17,-1.39,-1.38,-0.97,0,-0.1,-0.17,-0.28,-0.03,0.06,-0.17,-0.4,-0.24,-0.2,-0.45,-0.12,-0.29,-0.11,-0.04,-0.02,-0.3,-0.2,-0.63,-0.67,-0.64,-0.83,-0.44,-0.07,0.35,0,0.22,0.37,0.01,0.32,0.22,0.26,0.52,0.14,0.32,0.64,0.39,-0.25,-0.51,-0.38,-0.41,0.34,0.39,0.42,0.03,0.42,0.46,0.08,0.22,0.14,0.43,0.14,0.15,0.36,0.06],[-1.01,-0.47,-0.68,-0.61,-0.73,-0.91,-1.16,-0.91,-0.74,-0.8,-1.04,-0.72,-1.1,-0.78,-0.63,-0.7,-0.61,-0.56,-0.33,-0.23,0.3,0.58,0.25,-0.16,-0.03,-0.43,-0.41,-0.63,-0.73,-0.67,-0.77,-1,-0.79,-0.85,-0.69,-0.67,-0.56,-0.97,-0.58,-0.99,-0.91,-0.52,-0.73,-0.58,-0.82,-0.37,-0.54,-0.68,-0.57,-0.25,-0.4,-0.38,-0.43,-0.95,-1.08,-1.49,-1.04,-1.2,-1.05,-0.74,-0.67,-0.42,0.13,0.34,0.37,0.7,0.28,0.55,0.08,-0.2,0.27,0.22,0.38,0.36,-0.05,0.28,0.58,0.03,0.29,0.36,0.47,0.75,0.79,0.91,0.51,1.55,1.83,1.99,2.34,3.02,3,3.32,3.77,4.11,4.64,5.81,6.29,6.27,6.97,6.9,7.49,8.82,9.68,11,11.81,12.29,12.96,13.36,13.6,13.63,13.53,13.38,14.28,14.95,15.9,17.79,18.9,20.2,20.51,21.05,23.27,26.14,27.31,28.85,29.55,30.12,30.81,31.31,31.75,31.33,30.4,28.68,25.54,21.94,20.21,18.77,17.58,16.02,15.02,13.6,12.67,11.22,11.01,10.24,10.11,9.11,9.03,8.73,8.23,8.03,8.24,7.99,7.57,7.05,6.95,6.59,6.52,6.34,6.23,5.8,5.7,5.8,5.73,5.73,5.65,5.4,5.32,5.07,5.42,5.16,5.78,5.79,6.26,6.44,6.54,5.79,5.7,6.24,6.4,6.52,5.93,5.81,5.39,5.04,5.6,5.76,5.99,5.72,6.31,7.07,7.58,7.36,7.26,6.98,6.91,6.51,6.33,6.46,5.87,5.71,4.68,3.78,3.07,3.37,3.67,4.06,4.44,3.81,4.21,4.42,3.98,3.9,3.93,3.2,3.06,2.32,1.61,1.62,1.25,0.46,0.52,-0.2,-0.32,-0.69,-0.77,-0.45,-0.18,0.06,-0.36,-0.24,-0.26,-0.35,-0.04,0.04,-0.05,-0.21,-0.42,-0.12,0.12,-0.16,-0.42,-0.03,-0.31,-0.42,-0.39,-0.79,-0.84,-0.84,-0.85,-0.85,-0.59,-0.53,-0.36,0,0.46,0.25,0.2,0.04,0.34,0.49,0.4,0.17,0.41,0.44,0.57,0.31,0.1,-0.01,-0.52,-0.82,-0.48,0.14,0.09,0.02,0.27,-0.08,-0.26,-0.57,-0.65,-0.62,-0.91,-1.47,-1.54,-1.01,-0.27,-0.39,-0.21,-0.32,-0.05,-0.06,0.24,0.4,0.6,0.15,0.71,0.44,0.6,0.78,0.72,0.85],[0.16,-0.18,-0.54,-0.36,-0.31,-0.37,-0.51,-0.74,-0.92,-1.33,-0.53,-0.76,-0.82,-0.7,-1.1,-1.03,-1.37,-1.15,-0.81,-1.03,-1.04,-0.91,-1,-1.14,-1.08,-0.98,-0.67,-0.64,-0.75,-0.18,-0.23,-0.45,-0.03,-0.08,-0.42,-0.57,-0.47,-0.27,-0.22,-0.35,-0.52,-0.33,-0.59,-0.86,-0.44,-0.8,-0.71,-1.06,-0.8,-0.71,-0.78,-0.62,-0.57,-0.84,-1.01,-0.57,-0.68,-0.98,-0.85,-0.81,0.3,0.13,-0.14,0.06,-0.13,0.33,-0.21,-0.58,-0.67,-0.98,-1.05,-0.61,-0.56,-0.44,0.01,0.32,0.96,0.82,0.31,1.23,1.85,2.01,1.35,1.19,0.92,1.62,2.33,2.64,2.55,3.41,3.35,3.84,4.35,5.33,6.1,7.02,7.55,7.65,8.03,8.48,8.81,9.23,9.66,9.88,10.28,11.14,11.23,10.76,11.11,10.93,10.92,10.28,10.66,10.28,10.57,10.76,11,11.01,11.15,11.45,11.51,11.79,11.6,12.01,12.19,12.13,12.14,11.79,11.34,10.9,10.88,10.17,10.25,9.85,9.48,8.64,8.39,7.66,7.43,6.7,6.33,5.57,4.87,4.76,4.08,3.92,3.55,2.94,2.34,2.02,2.02,2.08,1.63,1.21,1.28,0.91,1.3,0.71,1.13,0.74,0.73,0.53,0.65,0.53,0.72,0.69,0.61,0.23,0.13,0.39,0.22,-0.01,-0.06,0.02,0.25,0.34,0.62,0.76,0.8,0.72,0.8,1.07,0.75,0.96,0.65,0.7,0.66,0.77,0.27,0.39,0.23,0.2,0.35,0.17,-0.1,0.38,-0.2,0.07,0.12,-0.22,-0.38,-0.03,-0.42,-0.68,-0.77,-0.69,-0.45,-0.57,-0.44,-0.32,-0.24,0.06,-0.09,-0.04,0.03,-0.03,0,-0.07,0.1,0.28,0.02,0.31,0.11,-0.25,0.06,0.07,-0.27,0.14,0.2,-0.25,-0.16,-0.25,-0.24,-0.02,-0.25,-0.04,-0.07,-0.45,-0.28,0.06,-0.02,-0.24,-0.32,0,-0.53,-0.58,-0.31,-0.46,-0.21,-0.45,-0.51,-0.37,-0.59,-0.09,-0.46,-0.19,-0.09,-0.08,0.04,0.29,0.12,0.37,-0.08,-1.01,0.64,1.21,0.89,0.75,0.26,0.1,0.49,0.21,0,-0.05,0.33,0.43,0.32,0.05,0.45,0.27,0.21,0.11,0.37,0.16,0.09,0.24,0.08,0.07,0.38,-0.01,0.22,0.04,0.24,-0.05,-0.12,0.04,0.15,0.17,-0.21,0.18],[-0.3,-0.59,-0.19,-0.53,-0.54,-0.3,-0.32,-0.13,0,0.55,1.23,0.84,0.48,0.01,-0.01,-0.21,0.09,-0.18,0.07,-0.29,-0.15,-0.31,-0.46,-0.52,-0.68,-0.88,-0.58,-0.83,-1.07,-1.01,-1.01,-1.47,-1.64,-1.21,-0.97,-1.14,-0.77,-0.81,-0.24,-0.11,-0.74,-0.89,-0.71,-0.81,-0.78,-0.62,-0.47,-0.32,-0.39,-0.27,-0.68,-0.53,-0.78,-1.04,-0.93,-0.66,-0.86,-0.78,-1.17,-0.77,-0.77,-1.03,-1.12,-0.3,0.27,0.66,0.77,0.97,1.24,1.56,1.22,0.83,0.45,0.91,0.98,0.69,1.1,1.26,1.54,1.5,1.4,1.71,1.81,2.37,2.3,2.48,1.86,2.45,3.15,4.16,5.41,6.59,7.02,8.18,8.4,10.05,11.8,14.36,14.83,15.27,15.68,16.54,16.93,16.99,16.75,17.34,16.95,17.13,16.86,16.67,16.47,16.21,16.26,16.68,17.04,17.96,18.2,18.48,18.97,19.75,20.5,20.73,20.79,20.88,21.42,21.59,21.98,22.25,22.58,23.57,24.14,24.9,24.9,25.56,25.66,24.59,22.45,21.97,22.15,21.34,20.7,20.11,20.05,19.53,19.35,19.06,19.17,19.08,18.89,18.98,19.12,19.3,19.47,19.6,19.64,19.65,19.44,18.82,19.18,18.89,19.33,19.48,19.05,19.46,19.4,19.27,18.67,18,17.58,17.2,16.91,16.44,15.91,15.14,14.24,13.79,13.27,12.84,12.98,12.67,12.44,12.1,11.76,12.13,12.04,12.2,12.27,12.2,12.03,11.88,12.09,12.12,12.64,13.04,13.13,12.54,11.68,11.21,11.12,10.84,10.75,10.42,10.08,9.86,9.83,10.06,9.48,8.88,9.03,8.36,7.94,7.25,6.52,6.01,5.38,5.12,4.94,4.55,3.68,3.41,2.97,2.47,1.43,1.12,1.12,1.52,1.43,0.9,1.23,0.95,0.56,0.64,1.52,1.31,0.62,0.18,0.01,-0.16,-0.05,-0.3,-0.06,-0.13,-0.13,-0.38,-0.02,0.08,-0.14,-0.2,0.07,0.01,0.08,-0.11,-0.4,-0.37,-0.39,0.03,-0.21,-0.04,0.16,-0.1,-0.3,0.19,0.06,0.26,-0.09,0.23,0.3,0.26,0.1,-0.05,0.25,-0.04,0.01,0.17,0.26,-0.02,0.11,0.2,-0.14,-0.04,-0.04,-0.06,0.03,0.02,-0.05,-0.03,0.22,-0.01,0.25,0.31,-0.17,0.2,0.27,0.03,0.1,-0.08,0.31,-0.05,0.25,0.33],[0,-0.12,0.1,-0.01,-0.15,-0.06,0.19,0.29,0.23,0.02,-0.08,0.17,-0.13,-0.2,0,-0.69,-0.66,-0.81,-0.98,-1.03,-0.95,-1.1,-1.08,-0.71,-0.63,-0.85,-0.9,-1.02,-0.81,-0.58,-0.93,-0.67,-0.8,-0.59,-0.5,-0.38,-0.31,-0.32,-0.24,-0.52,-1.22,-1.11,-1.53,-1.04,-0.37,-0.53,-0.68,-1.22,-1.19,-0.95,-0.76,-0.83,-0.72,-0.41,-0.56,-0.71,-0.48,-0.61,-0.75,-0.94,-1.44,-1.19,-1.41,-1.66,-1.81,-1.89,-1.67,-1.37,-0.52,-0.32,-0.37,0.02,-0.31,-0.31,0.34,1,1.31,1.32,0.92,1.19,1.12,1.11,1.13,1.38,1.39,1.54,2.14,2.23,2.67,2.86,2.81,2.46,2.79,3.48,3.66,4.83,5.61,6.44,6.79,7.67,8.39,9.1,10.35,11.09,12.13,12.96,13.81,14.81,15.98,17.59,18.6,19.38,20.73,21.97,23.01,23.9,24.91,25.88,26.2,26.64,27.24,27.89,28.41,27.87,27.66,27.34,26.33,24.94,24.09,23.55,22.7,21.85,21.7,21.43,20.97,20.96,21.38,21.81,21.93,22.27,22.81,23.02,22.64,22.63,22.63,22.87,22.54,22.57,22.18,21.43,21,20.45,19.57,19.01,18.41,17.16,16.32,15.34,15.18,14.79,14.39,14.35,13.94,13.39,13.1,12.51,12.42,11.9,11.57,11.29,11.1,10.71,10.56,10.17,9.82,9.5,8.96,8.69,8.41,8.47,8.16,7.56,7.42,6.79,6.77,6.33,5.87,6,5.86,6,5.79,5.98,5.84,5.61,5.67,5.67,5.94,6.05,6.32,6.11,6.2,6.81,6.54,6.01,5.03,4.79,4.2,4.02,4.07,3.81,3.86,3.58,3.46,3.47,3.54,3.53,3.58,2.65,2.05,1.56,1.59,1.46,1.33,1.26,1.52,1.16,1.16,0.63,0.79,0.36,-0.31,-0.64,-0.8,-0.79,-0.8,-0.83,-1.07,-0.75,-0.52,0.03,0.2,0.27,0.08,0.54,0.03,0.02,0.27,0.28,0.07,-0.12,-0.09,0.15,0.29,-0.01,0.06,-0.48,-0.94,-0.4,-0.06,-0.23,-0.31,0.15,0.1,-0.12,0.01,-0.04,0.48,-0.04,0.22,0.28,-0.04,0.09,-0.16,-0.78,-1.22,-1.12,-1.03,-0.86,-0.84,-0.96,-1.22,-0.98,-0.52,-0.2,0.11,0.12,0.31,0.15,0.26,0.39,0.09,0.2,0.15,0.46,0.48,0.47,0.41,0.32,0.57,0.48],[-0.16,-0.15,0.25,0.37,-0.13,0.06,0.11,-0.03,0.05,0.19,0.45,0.25,-0.12,-0.08,0.04,-0.11,-0.32,-0.23,0.07,-0.43,0.02,-0.41,-0.7,-1.2,-0.9,-0.87,-1.03,-0.75,-0.64,-0.27,-0.36,-0.4,-0.47,-0.36,-0.56,-0.17,-0.39,0.06,0.08,-0.39,-0.44,-0.75,-0.95,-0.89,-0.51,-0.84,-0.72,-0.37,-0.7,-0.63,-0.09,-0.11,0.11,0.58,0.25,0.12,-0.44,-0.72,-0.67,-0.58,-0.6,-0.27,0.27,0.48,0.48,0.18,0.28,-0.15,0.24,-0.04,-0.03,-0.02,0.82,0.98,1.4,0.93,1.85,1.57,1.46,1.89,2.36,2.27,2.48,2.66,2.45,2.97,3.32,3.4,4.22,5.12,5.83,6.11,5.86,6.44,6.79,6.82,7.59,7.74,8.24,8.44,8.42,9.13,9.28,9.26,9.57,9.31,9.63,9.54,9.19,9.44,9.25,9.53,9.64,9.61,10.84,11.5,12.76,13.74,14.31,15.35,16.6,17.4,18.03,19.52,20.51,22.5,24.26,26.66,27.69,28.76,28.83,29.04,28.89,28.15,27.59,26.55,25.97,25.44,24.29,23.04,22.02,20.97,20.63,19.96,19.5,18.1,16.58,15.93,15.84,15.61,14.95,14.8,14.54,14.63,14.5,14.53,14.39,14.76,14.84,14.83,14.7,15.57,15.66,16.35,16.6,17.52,18.72,19.49,19.99,20.36,20.9,21.41,21.83,22.24,22.42,21.78,22.03,21.96,21.85,21.96,22.59,23.01,23.1,23.16,22.48,20.11,18.25,16.89,15.99,14.97,13.77,12.66,11.08,10.12,8.86,7.86,7.3,6.71,5.85,4.53,4.11,3.98,3.3,2.74,2.24,1.97,1.8,1.58,1.34,0.86,0.8,0.53,0.6,-0.08,-0.46,-0.38,-0.55,0.05,0.45,0.93,0,-0.09,-0.49,-0.19,0.14,-0.13,0.3,0.27,0.33,0,-0.1,0.1,0.05,-0.02,-0.22,-0.19,-0.15,0.04,0.24,0.19,-0.12,-0.14,-0.07,-0.05,-0.12,0.24,0.22,-0.03,-0.39,-0.39,0.12,-0.23,0.07,-0.14,-0.25,-0.14,-0.28,0.03,0.09,0.01,-0.18,-0.27,-0.26,-0.23,-0.15,-0.27,0.02,0.17,0.2,0.09,0.06,-0.09,-0.43,-0.56,-0.65,0.1,-0.03,-0.06,-0.15,0.13,-0.14,0.1,0.25,-0.09,0.18,0.12,0.24,0.32,-0.02,0.4,0.28,-0.05,0.04,-0.06,0.42,0.1,0.02,-0.1,-0.16,-0.06],[0.19,0.06,-0.27,-0.11,0.09,0.03,-0.1,-0.03,0.05,0.1,0.74,0.49,0.53,0.75,0.72,0.23,-0.57,-1.05,-1.27,-1.61,-1.38,-1.25,-1.17,-0.04,0.45,0.96,0.58,0.4,0.01,0,0.39,0.28,0.57,0.39,0.7,0.24,0.72,0.42,0.58,-0.02,-0.55,-0.88,-0.74,-0.66,-0.92,-0.66,-0.96,-0.98,-0.86,-0.57,-1.04,-1.03,-0.99,-0.71,-1.14,-1.05,-1.12,-1,-0.92,-0.24,0.2,0.32,0.22,-0.32,-0.64,-0.47,0.1,-0.22,-0.15,0.07,0,-0.46,0.04,-0.07,0.3,0.34,0.41,0.93,1.45,1.89,2.21,2.44,2.77,3.39,4.12,4.09,4.98,6.6,7.5,8.44,9.62,10.89,12.08,13.21,15.08,16.38,18.65,22.02,24.07,24.41,24.24,24.42,25.56,26.37,27.11,27.76,28.54,29.34,29.95,30.77,30.36,29.5,27.9,26.78,25.72,24.9,23.56,22.59,21.38,20.5,18.9,17.71,17.15,16.07,15.7,14.87,14.17,13.39,12.94,11.94,11.91,11.47,10.71,10.69,10.17,10.31,10.01,9.62,9.53,9.15,8.79,8.38,8.06,7.73,7.25,6.86,7.32,7.09,7.02,6.71,6.71,6.61,5.86,5.5,5.18,5.12,4.34,4.37,4.06,4.02,3.94,4.07,3.9,4.07,4.32,4.7,4.78,5.29,5.39,5.87,6.15,6.26,6.6,6.96,6.92,7.3,7.41,7.34,7.48,7.31,7.3,7.14,7.13,6.87,7.02,6.7,6.79,6.59,7.09,7.09,7.16,7.35,7.28,7.74,7.92,8.03,7.82,7.45,6.61,6.54,5.89,5.11,4.58,3.93,3.47,3.27,2.77,2.55,2.41,2.36,2.29,2.15,2,2.36,2.42,1.58,1.29,1.17,0.33,0.37,0.43,-0.06,0.32,-0.01,0.44,0.06,-0.01,0,-0.39,-0.4,-0.46,-0.59,-0.54,-0.76,-0.6,-0.49,-0.02,0.66,0.45,-0.04,0.16,-0.32,-0.33,-0.07,-0.26,0.03,-0.37,-0.11,-0.28,-0.32,-0.73,-0.66,-0.33,-0.3,-0.4,-0.18,-0.65,-0.62,-0.64,-0.38,-0.48,-0.48,-0.16,0.04,0.12,-0.15,-0.26,-0.29,-0.27,-0.19,-0.5,-1.11,-0.97,-0.53,0,-0.34,-0.05,-0.46,-0.07,-0.01,0.01,0.06,-0.04,-0.05,-0.35,-0.36,-0.28,-0.08,0.15,-0.14,-0.23,-0.15,0.12,0.12,0.09,-0.06,-0.08,-0.04,0.23,-0.1],[-0.32,-0.83,-0.69,-0.8,-0.76,-0.16,0.15,0.24,0.1,0.11,-0.14,-0.17,-0.48,-0.08,0.26,0.06,0.57,0.13,0.57,0.02,0.4,-0.1,-0.28,-0.21,-0.05,-0.51,-0.69,-0.76,-0.76,-0.68,-0.25,-0.07,-0.01,-0.31,-0.41,-0.5,-0.47,-0.64,-0.04,0.46,-0.18,-0.78,-0.56,0.24,0,0.07,-0.66,-0.38,-0.92,-1.02,-0.93,-1.29,-1.63,-1.21,-0.81,-0.45,-0.32,-0.31,-0.23,-0.09,-0.14,0.39,0.32,0.3,0.35,0.1,-0.59,-0.49,0.01,-0.05,0.54,0.5,1.09,1.56,0.95,0.66,0.53,1.22,1.56,1.49,1.98,2.4,2.86,3.55,3.98,4.85,6.49,7.68,8.44,9.39,10.73,11.99,12.94,13.3,14.51,14.74,14.48,14.39,13.99,13.38,13.43,12.96,12.91,12.39,12.12,12.24,12.64,13.37,14,15.51,17.9,19.76,21.94,24.54,26.91,29.04,30.61,31.51,31.99,31.98,30.87,28.7,27.45,25.81,23.88,22.38,21.46,20.58,19.58,18.76,17.86,16.8,15.79,14.72,14.05,13.59,13.09,12.85,12.28,11.65,11.88,11.48,11.86,11.48,11.91,11.43,11.64,11.48,11.68,11.62,11.43,10.78,10.44,10.27,9.97,9.51,8.71,8.83,8.98,8.86,9.12,8.3,8.04,7.51,7.13,7.18,7.41,7.55,8.02,8.69,8.47,8.54,8.14,8.06,7.89,7.55,7.98,7.84,7.99,8.25,8.45,8.81,9.21,9.71,10.54,9.93,9.86,9.85,9.63,9.36,8.73,8.76,8.33,8.16,7.8,8.18,8.53,8.56,9.11,9.23,9.21,8.95,8.56,8.32,7.9,7.76,7.4,6.78,6.21,6.1,6.03,5.56,5.73,5.22,5.08,4.97,4.11,3.35,2.85,2.36,2.53,2.34,2.13,1.71,1.74,1.62,1.53,0.7,-0.11,0.08,0.22,-0.09,-0.2,0.15,-0.01,0.18,0.02,0.24,0.3,0.14,-0.06,0,0.05,0.04,0.24,-0.19,-0.1,-0.13,0.13,-0.1,-0.17,-0.01,0.69,0.75,0.44,0.1,0.01,0.19,-0.3,-0.34,0.12,0.09,-0.08,-0.23,-0.05,0,0,-0.14,-0.39,-0.31,-0.17,-0.49,-0.49,-0.52,-0.29,-0.38,0,0.05,-0.03,0.01,-0.33,-0.31,-0.28,0,-0.17,0.21,0.33,-0.1,0.34,0.38,0.06,0.38,-0.02,0.13,-0.12,0.08,-0.15,0.03,0.03,-0.54],[-0.16,-0.26,-0.36,-0.49,0,-0.15,-0.57,-0.57,-0.85,-0.6,-0.05,-0.25,-0.8,-0.48,-0.11,-0.62,-0.48,-1.03,-1.56,-0.91,-1.06,-1.1,-0.66,-0.16,0.19,0.03,-0.02,-0.4,-0.58,-0.64,-0.48,-0.75,-0.55,-0.47,-0.6,-0.57,-0.95,-0.45,-0.85,-0.7,-0.47,-0.74,-0.59,-0.77,-0.36,0.14,0.02,-0.46,-0.95,-1.28,-1.15,-0.77,-0.72,-0.75,-0.79,-1.05,-0.36,-0.28,-0.15,-0.33,-0.78,-0.71,-0.64,-1.21,-1.27,-1.08,-1.48,-1,-1.39,-1.17,-0.83,-0.91,-0.91,-0.89,-1.07,-0.6,0.57,0.65,0.83,1.21,1.1,1.21,1.73,1.33,1.64,1.48,1.52,1.01,1.54,1.98,2.15,2.47,2.53,3,3.06,3.17,3.82,3.71,4.35,4.37,4.38,4.07,3.81,3.94,4.23,3.8,3.84,3.65,4.03,3.77,3.74,3.31,3.81,4.21,4.54,5.29,5.56,6.12,6.6,7.23,7.35,7.9,8.31,8.88,9.62,9.94,10.23,11.09,11.34,12.22,13.27,14.05,14.67,13.66,13.46,13.58,12.72,12,11.13,9.8,9.56,9.28,8.87,8.6,8.62,7.99,7.58,7.63,7.04,6.89,6.74,7.02,6.77,6.51,6.22,6.29,6.05,6.34,6.37,6.41,6.08,6.18,6.26,6.07,6.01,6.27,5.99,6.12,6.51,6.09,6.54,6.28,6.61,6.83,6.94,6.66,7.06,6.77,6.69,6.99,6.96,7.19,6.95,7.03,7.55,7.48,7.15,7.05,6.64,6.32,6.4,5.85,5.65,4.96,4.72,4.81,4.39,4.08,4.06,3.96,3.63,3.55,3.1,3.03,2.75,2.53,2.37,3.21,3.15,2.93,3.03,2.29,2.38,1.94,1.83,1.81,1.59,1.2,1.13,1.18,1.12,1.03,0.44,0.47,0.35,0.47,1.05,1.41,0.8,0.94,0.52,0.42,0,0.4,0.21,0.42,0.39,-0.07,0.49,0.35,0.38,0.03,0.54,0.35,0.56,0.09,0.26,0.2,0.52,0.11,0.22,-0.2,0.05,-0.23,-0.29,-0.16,-0.32,-0.18,-0.23,-0.3,-0.5,-0.35,-0.45,-0.17,-0.2,-0.44,-0.11,-0.34,-0.41,-0.21,-0.03,-0.3,-0.31,-0.03,-0.29,-0.02,-0.4,-0.3,0.16,0.05,-0.08,0.09,0.18,0.24,0.16,-0.15,-0.26,0,-0.13,-0.33,-0.51,-0.56,-0.71,-0.29,-0.04,0.28,-0.01,-0.67,-0.86,-1.66],[0.62,0.64,0.59,0.3,0.01,0.05,-0.63,0.07,0.36,0.78,0.48,0.55,0.01,0.27,0.09,0.13,0.12,-0.03,-0.05,-0.1,-0.33,-0.33,-0.72,-0.61,-0.41,-0.91,-1.01,-0.61,-1.15,-0.94,-0.74,-0.68,-0.24,-0.07,0.13,0.17,0.02,0.33,-0.14,-0.52,-0.55,-0.55,-0.73,-0.96,-0.64,-0.51,-0.54,-0.46,-0.49,-0.78,-0.58,-0.31,-0.27,-0.07,0.01,-0.7,-0.54,-0.5,-0.61,-0.03,0.16,-0.14,-0.24,-0.41,0.01,0.43,0.53,0.73,0.38,0.23,0.13,0.47,1.18,0.8,0.62,0.41,0.42,0.48,0.53,0.34,0.44,1.26,1.78,2.08,2.29,3.17,3.6,4.2,4.89,6,8.07,8.78,10.04,11.46,13.42,15.77,17.71,20.1,22.58,25.18,27.64,29.23,30.47,31.61,32.93,33.42,33.41,33.87,34.38,33.75,33.49,32.66,32.15,31.82,31.04,30.9,29.72,28.05,26.59,25.09,23.31,22.07,20.84,20.16,19.16,18.26,17.31,16.71,15.57,15.27,14.64,13.61,13.27,13.46,13.35,13.85,13.38,13.3,13.76,13.64,14.69,15.35,16.28,17.4,18.4,19.13,19.41,19.18,18.37,16.39,14.85,13.66,12.28,11.74,11.06,11.02,10.46,10.36,9.77,9.54,9.33,9.49,9.65,9.19,9.36,9.54,9.55,9.54,9.79,10.25,11.1,11.88,13.4,13.09,12.71,12.92,13.07,13.28,14.2,15.04,15.82,16.12,16.94,17.95,18.79,21.68,22.19,22.98,22.83,22.47,21.8,21.43,20.3,17.69,15.48,13.8,12.19,10.91,10.08,9.91,8.69,7.88,6.81,6.11,5.48,5.16,5.19,4.55,4.2,4.17,3.34,3.1,2.85,2.81,2.74,2.32,1.72,1.5,1.59,1.16,0.78,-0.08,-0.11,0.09,-0.01,0.46,0.59,0.25,0.13,-0.15,-0.06,0.11,-0.41,0.06,-0.29,0.09,-0.23,-0.18,0.16,0.08,-0.04,0.35,0.26,-0.02,-0.22,-0.11,0,0.04,-0.26,-0.44,-0.44,0.03,-0.04,-0.06,0.02,-0.31,-0.02,0.03,-0.06,-0.46,0.04,-0.26,-0.19,-0.36,-0.03,-0.05,0.04,-0.45,-0.16,-0.34,-0.13,-0.1,-0.12,-0.36,-0.34,-0.08,-0.03,-0.08,-0.42,-0.03,-0.09,-0.1,0.23,0.22,0.26,0.2,-0.25,-0.07,-0.28,0.13,0.2,0.22,0.23,0.27,-0.1,-0.21,-0.09,-0.24,-0.17,-0.62],[0.32,0.31,0.28,0.42,-0.24,-0.48,-0.73,-0.64,0.04,0.02,-0.04,-0.8,-0.43,-0.05,-0.1,0.49,0.97,0.89,0.13,-0.31,0.23,0.32,0.36,-0.22,-0.48,-0.42,-0.54,-0.63,-0.39,-0.53,-0.65,-0.33,-0.63,-0.46,-0.67,-0.68,-0.68,-0.29,-0.4,-0.2,-0.41,-0.17,-0.22,-0.51,-0.47,-0.09,-0.14,-0.06,-0.18,-0.15,-0.54,-0.68,-0.23,-0.29,0.2,-0.35,-0.39,-0.13,-0.2,-0.13,0.13,-0.41,-0.83,-1.03,-0.83,-0.42,-0.64,-0.63,-0.34,-0.23,0.57,1.63,1.59,1.57,1.72,1.95,1.83,2.77,2.35,2.42,2.31,1.51,1.61,1.7,1.74,2.19,3.37,2.96,3,3.33,3.9,4.87,5.66,6.63,7.81,9.37,11.38,13.34,15.67,18.44,20.73,24.02,27.5,31.49,34.93,38.37,44.65,49.9,52.83,55.16,55.79,55.03,53.17,52.2,51.36,49.48,46.23,44.1,40.92,37.39,34.43,31.48,29.29,27.49,24.77,22.23,20.15,19.15,17.9,16.9,16.2,15.66,14.81,14.3,14.26,13.8,12.93,12.67,12.29,12.29,11.99,12.16,11.89,11.89,11.42,11.17,11.41,11.13,10.68,10.06,9.03,8.83,8.26,7.88,7.36,7.06,6.46,6.45,6.38,6.5,6.22,6.43,6.34,6.53,5.95,5.6,5.54,5.28,5.08,5.19,4.99,4.97,5.09,4.99,5.85,7.28,7.58,8.13,8.86,8.97,9.06,9.46,9.84,9.76,9.71,10.58,10.55,10.7,10.13,9.67,9.53,8.75,8.27,8.01,8.14,8.28,8.06,7.86,7.97,7.95,7.69,7.31,7.52,7.09,6.73,6.53,6.29,5.81,5.91,5.48,5.6,5.44,5.98,5.74,3.85,2.76,2.28,2.3,1.62,1.54,1.57,1.23,0.96,0.99,1.11,0.49,0.82,0.37,0.3,-0.14,-0.34,-0.32,-0.71,-0.46,-0.37,-0.29,-0.2,0.47,0.7,-0.09,-0.35,-0.81,-0.4,-0.43,-0.06,0.19,0.16,-0.06,-0.03,-0.11,0.15,0.04,0.29,0.15,-0.08,0.29,-0.01,-0.24,0.04,-0.17,-0.02,-0.01,0.15,0.2,0.21,-0.12,0.37,0.14,0,0.26,0.09,0.22,0.15,-0.12,0.29,0,-0.12,0.4,-0.17,0.25,-0.15,0.28,-0.16,0,0.26,0.03,-0.08,0,0.15,-0.19,-0.44,-0.53,-0.5,-0.49,-0.63,-0.56,-0.5,-0.38,-0.58,-0.43],[-0.09,-0.14,-0.24,-0.24,-0.66,0,0.29,0.29,0.6,0.86,1.33,0.53,-0.23,-0.58,-0.29,-0.12,-0.32,-0.7,-0.73,-0.57,-0.83,-0.85,-0.94,-1.03,-0.84,-0.53,-0.32,-0.17,-0.52,-0.45,-0.12,-0.56,-0.14,-0.34,-0.4,-0.27,-0.38,-0.13,-0.04,-0.21,-0.13,-0.18,0,-0.35,-0.61,-0.37,-0.26,0.16,-0.02,0.33,0.84,1.07,1.46,1.89,2.07,1.33,0.57,0.35,0.42,0.72,0.97,0.99,0.68,0.45,0.65,0.57,0.4,0.14,0.73,0.98,1.73,1.5,1.56,1.09,1.85,2.56,2.64,2.69,2.29,2.18,2.3,2.29,2.46,2.76,2.58,2.84,3.18,3.03,3.69,5.16,5.6,6.55,6.71,7.3,7.54,7.58,8.89,10.13,11.54,12.79,13.96,14.88,15.99,16.7,16.56,17.17,17.24,17.47,17.48,17.56,18.07,17.67,18.81,19.77,20.91,21.78,23.55,25.14,25.45,25.88,26.11,27.75,29.86,29.54,27.96,27.85,27.96,27.36,26.23,25.35,24.23,20.62,19.98,19.59,19.08,18.34,18.08,17.2,16.78,16.41,15.31,14.73,14.07,13.94,13.7,12.29,11.71,12.23,11.84,11.13,10.72,9.92,9.66,9.69,9.65,8.63,7.63,6.83,7.13,6.81,7.09,6.83,6.65,6.88,6.94,7.44,7.2,7.33,7.78,8.01,7.44,7.6,7.36,7.3,6.77,7.77,8.29,8.5,8.66,8.88,7.91,8.02,7.39,7.44,6.81,6.7,7.36,7.33,7.32,7.01,6.79,6.33,6.22,6.38,6.44,6.42,6.53,6.6,6.58,6.66,6.82,6.79,6.47,6.3,6.13,6.01,5.55,5.1,4.88,4.46,3.99,3.75,3.05,2.72,2.51,1.97,2.04,1.17,0.85,1.08,0.78,-0.04,0.4,-0.23,0.18,0.09,0.16,0.32,0.32,0.29,0.43,0.09,0,0.01,-0.42,-0.25,-0.39,-0.22,-0.35,-0.2,0.28,0.28,0.12,-0.58,-0.92,-0.82,-0.38,-0.01,-0.11,0.58,0.19,-0.47,-1.02,-1.21,-1.52,-1.51,-1.42,-1.24,-1.33,-0.68,-0.36,-0.02,-0.28,-0.29,-0.21,0.02,0.03,0.08,0.01,-0.03,-0.2,-0.13,-0.28,-0.11,-0.51,-0.63,-0.67,0,0.03,-0.14,-0.38,-0.16,0,-0.33,-0.21,-0.24,-0.52,-0.5,-0.4,-0.13,0.08,-0.88,-1.17,-0.36,-0.31,-0.12,0.29,-0.02,0.21,0.44],[0.11,0.05,0.05,-0.05,-0.03,-0.29,-0.08,-0.54,-0.01,0.01,-0.08,-0.15,-0.35,-0.59,-0.72,-0.95,-1.66,-1.38,-1.62,-0.73,-0.36,-0.22,0.09,0.06,-0.22,-0.19,-0.29,-0.14,0.11,0.05,-0.33,-0.46,-0.24,0.05,0,0.17,-0.25,-0.61,-0.54,-0.71,-0.13,-0.07,0.03,0.51,0.49,0.25,-0.55,-0.68,-0.12,-0.96,-0.95,-0.52,-0.91,-0.62,-0.48,-0.25,-0.73,-1.51,-1.28,-1.86,-1.62,-1.76,-1.64,-1.44,-1.17,-0.98,-0.56,-0.6,-0.16,0.23,1,0.61,0.47,0.38,0.23,0.27,0.04,-0.21,-0.37,-0.42,-0.75,-0.42,0.21,1.11,1.63,1.55,2.05,1.96,2.28,1.8,1.92,2.38,2.4,2.44,2.43,2.98,3.03,3.32,3.15,3.34,3.76,4.79,5.35,6.3,7.59,8.43,8.69,9.34,9.86,10.52,10.99,11.61,12.03,12.87,13.29,13.02,13.42,13.62,13.93,14.36,14.62,15.26,15.37,16.08,16.33,16.46,16.7,16.42,16.3,16.28,16.15,16.49,16.3,16.7,16.57,16.86,16.4,16.81,16.81,16.49,16.16,16.16,16.15,15.4,15.39,15.03,14.38,13.87,13.29,12.54,12.15,11.17,10.37,10.24,9.3,8.43,8.21,7.94,7.54,7.19,6.92,7.25,7.3,7.6,7.64,7.32,7.08,6.35,6.82,6.63,6.35,6.54,6.1,6.3,5.9,6.04,6.25,5.76,5.88,5.58,6.07,5.59,5.42,5.48,5.77,5.57,5.48,5.25,5.67,5.36,5.41,5.42,5.33,5.75,5.78,5.89,5.61,5.67,5.58,5.56,4.89,4.68,4.75,4.54,4.26,3.72,3.34,3.47,2.69,2.14,1.8,1.64,1.12,0.49,0.92,0.76,1.36,1.29,1.4,1.22,0.96,0.3,0.21,0.17,0.08,0.08,-0.04,-0.39,-0.21,-0.48,-0.27,-0.61,-0.52,-0.19,-0.29,-0.01,-0.25,-0.1,-0.46,-0.4,-0.06,0.14,-0.09,-0.2,-0.29,-0.32,-0.33,-0.25,-0.11,-0.23,0.05,0,0.16,0.11,-0.13,0.15,0.2,-0.03,-0.14,-0.08,0.17,0.08,0.34,-0.06,0.21,-0.11,0.23,0.14,0.22,-0.12,-0.06,0.06,0.18,0.14,-0.17,0.07,-0.03,0.01,-0.3,0.1,-0.37,-0.09,-0.3,-0.3,-0.68,-0.47,-0.74,-0.95,-1.33,-0.79,-0.73,-0.54,-0.53,-0.92,-0.68,-0.87,-1.31,-1.02,-1.1,-1.62],[0.12,-0.12,-0.12,-0.45,-0.24,-0.48,-0.57,-0.19,-0.07,-0.59,-0.21,-0.67,-0.94,-0.71,-1.04,-1.31,-1.31,-1.23,-1.53,-1.3,-1.8,-1.52,-1.84,-1.81,-1.2,-1.19,-1.37,-1.21,-1.22,-0.7,-0.55,-0.37,-0.69,-0.21,-0.18,-0.04,0.22,-0.02,0.34,0.13,-0.03,0.16,-0.16,0.07,-0.14,0.06,-0.23,-0.18,-0.47,-0.04,-0.36,0.14,0.14,-0.3,0.15,0.07,0.1,0.29,0.01,-0.06,-0.17,-0.31,0.01,0.12,-0.31,-0.19,1.48,2.73,2.53,2.76,2.76,2.52,2.3,2.5,2.53,2.57,2.29,2.15,2.45,2.45,2.48,2.48,2.59,2.55,2.02,1.93,2.22,3.19,3.78,4.33,5.11,6.05,6.94,7.75,8.28,9.54,11.21,13.49,15,16.74,18.44,20.54,21.96,23.12,24.33,24.47,23.93,23.76,22.87,22.41,22.24,21.95,21.96,21.88,22.38,22.72,24.39,25.3,24.97,24.19,22.95,22.17,21.65,21.46,21.26,20.97,20.6,19.93,19.05,18.82,18.03,18.52,18.95,19.71,19.2,19.36,19.38,19.14,19.56,20.32,20.4,18.32,17.71,16.9,16.57,16.62,15.54,15,14.25,13.53,13.19,12.7,12.29,12.12,11.71,11.25,10.72,10.98,10.5,10.91,11.15,11.55,12,11.96,11.27,10.4,10.02,9.72,9.6,9.03,8.55,8.41,8.1,8.24,7.71,7.34,7.41,7.85,8.23,8.63,9.14,9.09,9.56,10.15,10.99,11.47,11.73,12.16,12.99,13.55,14.77,15.64,16.32,17.79,19.63,20.88,22.71,22.87,22.38,21.68,20.85,18.53,16.84,14.06,10.18,9.37,8.28,7.58,6.57,5.8,4.82,3.86,3.19,3.13,2.93,3.24,2.66,2.52,1.97,1.74,1.39,1.53,1.52,1.51,0.89,0.58,0.44,1.37,0.68,0.51,-0.1,0.25,0.29,-0.08,0.17,0.08,0.21,-0.17,0.26,-0.1,0.23,0.36,0.23,0.2,-0.02,-0.72,-0.24,-0.25,-0.28,-0.62,-0.42,-0.65,-0.93,-0.86,-0.18,0.21,-0.26,0.03,-0.03,-0.57,-0.58,-0.45,-0.48,-0.08,-0.17,0.18,-0.08,-0.2,0.27,0.18,-0.13,0.34,0.1,0.4,0.03,-0.04,0.3,-0.22,-0.08,-0.26,-0.38,-0.08,-0.29,-0.09,-0.05,-0.19,0.45,0.62,0.09,-0.39,0.12,0.03,-0.28,0.02,-0.01,0.13,0.09,-0.01,-0.03,-0.23]]&quot; class=&quot;kp-pulsar-wc&quot; data-row-height=&quot;0.2&quot; data-size=&quot;600&quot; data-baseline=&quot;0&quot; data-scale=&quot;4&quot; data-margin=&quot;0.4&quot; data-label-left=&quot;CP 1919&quot; data-label-right=&quot;318 MHz&quot; data-caption-html=&quot;&amp;lt;strong&gt;Fig #1:&amp;lt;/strong&gt; Extract from &amp;lt;em&gt;Radio Observations of the Pulse Profiles and Dispersion Measures of Twelve Pulsars&amp;lt;/em&gt; by Harold D. Carft, Jr.&quot;/&gt;&lt;p&gt;This example recreates the original pulsar chart that inspired the &lt;em&gt;Unknown Pleasures&lt;/em&gt; album cover. It makes use of all three text labels: &lt;code&gt;data-label-left&lt;/code&gt; and &lt;code&gt;data-label-right&lt;/code&gt;, as well as the &lt;code&gt;data-caption-html&lt;/code&gt; attribute (an alternative option to a plain-text &lt;code&gt;data-caption&lt;/code&gt;) that allows the inclusion of HTML elements in the caption.&lt;/p&gt;&lt;p&gt;Because the data is so dense (~80 lines stacked together), the &lt;code&gt;data-scale&lt;/code&gt; and &lt;code&gt;data-row-height&lt;/code&gt; attributes have been manualy set.&lt;/p&gt;&lt;p&gt;Full details on the available options are available in the &lt;a href=&quot;https://github.com/tomhazledine/stacked-sparklines&quot;&gt;Stacked Sparklines README on GitHub&lt;/a&gt;.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; The web component expects the data to be passed as a string. This is because web components can only accept strings as attributes. To pass an array of data, you&#x27;ll need to stringify it first and inject it using whatever templating language you&#x27;re using.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;DATA_STRING&lt;/span&gt; = &lt;span class=&quot;hljs-title class_&quot;&gt;JSON&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stringify&lt;/span&gt;(pulsarData);
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-html&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;stacked-sparklines&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;kp-pulsar-wc&quot;&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;data-data&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;{{DATA_STRING}}&quot;&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;data-row-height&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;0.2&quot;&lt;/span&gt; 
    &lt;span class=&quot;hljs-attr&quot;&gt;data-size&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;600&quot;&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;data-baseline&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;0&quot;&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;data-scale&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;4&quot;&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;data-margin&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;0.4&quot;&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;data-label-left&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;CP 1919&quot;&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;data-label-right&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;318 MHz&quot;&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;data-caption-html&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;strong&gt;Fig #1:&amp;lt;/strong&gt; Extract from &amp;lt;em&gt;Radio Observations of the Pulse Profiles and Dispersion Measures of Twelve Pulsars&amp;lt;/em&gt; by Harold D. Carft, Jr.&quot;&lt;/span&gt;
&gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;stacked-sparklines&lt;/span&gt;&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;hr/&gt;&lt;h2 id=&quot;example-2-my-daily-steps-for-2023&quot;&gt;Example 2: My daily steps for 2023&lt;/h2&gt;&lt;figure&gt;&lt;div class=&quot;yearly-steps&quot;&gt;&lt;stacked-sparklines class=&quot;yearly-steps__month yearly-steps__january&quot; data-data=&quot;[[0,0,0,0,0,0,0,116,239,189,447,412,1897,275,383,628,381,459,477,65,228,26,303,0],[0,0,0,0,0,0,0,147,136,259,228,284,679,287,110,1342,1382,299,437,709,224,679,224,0],[0,0,0,0,0,0,0,209,290,1647,674,367,0,494,399,0,8,0,469,192,365,0,291,0],[0,0,0,0,0,0,0,43,414,646,346,0,9,0,413,144,182,745,138,315,588,119,287,0],[0,0,0,0,0,0,0,152,329,424,162,0,0,73,414,0,0,0,617,402,404,8,436,0],[0,0,0,0,0,0,135,208,102,439,607,34,73,389,511,544,0,0,0,854,764,421,229,188],[0,0,0,0,0,0,0,36,58,303,208,903,19,290,1172,57,401,937,270,316,406,305,287,10],[0,0,0,0,0,0,0,44,211,328,613,429,669,363,615,790,1091,1372,469,493,194,23,188,0],[0,0,0,0,0,0,38,75,341,684,0,0,283,0,87,126,17,0,548,582,248,219,42,199],[0,0,0,0,0,0,127,109,346,543,72,213,86,0,1344,420,0,0,462,206,419,158,367,0],[0,0,0,0,0,0,0,123,352,602,204,204,0,117,3666,1064,0,0,64,823,635,342,239,10],[0,0,0,0,0,0,84,39,380,344,110,0,543,109,0,52,0,0,166,316,472,218,43,0],[0,0,0,0,0,0,0,0,145,641,114,0,344,518,358,132,0,10,61,496,579,334,105,388],[0,0,0,0,0,0,0,0,93,250,330,562,298,591,559,794,638,197,194,500,0,238,148,0],[0,0,0,0,0,0,86,43,498,722,346,841,772,121,47,2834,123,176,745,467,531,41,249,63],[0,0,0,0,0,0,105,102,520,351,0,16,233,148,0,0,0,267,401,349,401,202,220,0],[0,0,0,0,0,0,0,118,886,826,13,2,175,18,3587,2514,40,539,0,386,240,223,229,31],[0,0,0,0,0,0,120,272,430,856,179,0,336,1332,574,0,0,484,261,819,216,245,104,0],[0,0,0,0,0,74,57,0,375,648,68,0,309,148,38,40,144,9,94,674,691,225,390,0],[0,0,0,0,0,0,89,140,682,285,101,0,65,0,1086,122,57,26,70,78,440,30,361,101],[0,0,0,0,0,0,0,0,27,146,783,3034,781,762,0,78,151,50,440,199,298,58,397,138],[0,0,0,0,0,0,0,121,134,672,310,509,459,511,249,315,847,108,312,458,454,82,39,243],[0,0,0,0,0,0,34,98,292,1223,163,27,0,217,0,0,16,4,471,61,477,71,178,164],[0,0,0,0,0,0,45,283,567,381,8,0,179,342,48,168,374,11,225,834,384,8,307,48],[0,0,0,0,0,0,0,47,573,877,144,125,81,50,2176,154,0,0,211,1406,33,80,157,0],[0,0,0,0,0,0,49,215,282,101,320,385,135,151,637,0,0,0,279,166,463,116,339,47],[0,0,0,0,0,0,0,27,313,288,214,16,599,0,1119,528,10,0,70,714,287,31,273,0],[0,0,0,0,0,0,0,83,182,528,105,489,342,687,956,1362,951,675,748,170,234,159,273,12],[0,0,0,0,0,0,0,0,163,313,331,438,724,538,661,1937,703,615,740,230,189,245,107,0],[0,0,0,0,0,0,0,158,547,1365,103,0,97,0,87,64,469,0,759,434,522,99,393,0],[0,0,0,0,0,0,25,274,409,767,136,0,127,0,0,8,11,18,518,406,54,347,22,12]]&quot; data-caption=&quot;January&quot; data-background=&quot;var(--primary)&quot; data-foreground=&quot;var(--white)&quot; data-size=&quot;300&quot; data-margin=&quot;0.2&quot; data-scale=&quot;1.5&quot; data-row-height=&quot;0.1&quot; data-baseline=&quot;0&quot;/&gt;&lt;stacked-sparklines class=&quot;yearly-steps__month yearly-steps__february&quot; data-data=&quot;[[0,0,0,0,0,0,0,0,85,429,178,0,9,245,1593,269,0,0,0,20,596,84,315,110],[0,0,0,0,0,20,0,50,588,301,318,0,0,1429,229,60,12,465,256,282,458,6,266,0],[0,0,0,0,0,0,0,114,485,632,379,208,0,0,11,275,0,179,319,309,268,36,383,0],[0,0,0,0,0,0,78,25,339,679,747,456,2441,1563,3916,1143,109,705,0,19,133,694,156,110],[0,33,0,0,0,0,0,116,321,245,787,702,3513,2459,610,546,1594,0,0,40,1002,1301,22,14],[0,0,0,0,0,0,0,8,11,1096,716,0,2169,661,384,290,8,229,88,1868,2144,0,0,0],[0,0,0,0,0,0,0,0,0,0,1373,243,272,634,630,0,837,1095,169,912,4,52,1505,751],[0,0,0,0,0,0,0,0,14,689,1083,0,230,734,1186,0,1533,435,278,8,178,156,873,1048],[84,0,0,0,0,0,0,0,16,663,1833,734,1802,17,0,0,75,2693,308,334,107,0,0,0],[0,0,0,0,0,0,0,36,370,658,91,300,0,151,271,290,15,0,172,139,773,204,145,317],[0,0,0,0,0,0,0,261,192,397,1495,664,534,8,110,277,103,205,499,238,78,18,109,0],[0,0,0,0,0,0,0,127,208,375,637,446,729,107,220,1652,1202,463,540,474,88,99,76,0],[0,0,0,0,0,0,0,0,58,453,94,0,0,16,2617,323,25,22,841,410,354,205,218,0],[0,0,0,0,0,0,0,37,387,713,113,250,0,0,1217,694,0,68,424,295,601,144,212,20],[0,0,0,0,0,0,0,46,54,480,691,8,22,52,310,25,0,0,123,196,880,228,331,75],[0,0,0,0,0,0,0,153,168,745,378,0,0,578,31,0,230,0,122,739,573,0,336,15],[0,0,0,0,105,0,17,149,192,912,158,0,92,107,665,22,249,204,180,205,280,236,47,0],[0,0,0,0,0,0,0,203,0,71,988,156,173,1253,4562,681,262,668,177,250,479,131,257,11],[0,0,0,0,0,0,0,97,218,320,259,596,542,4566,947,503,216,640,152,233,742,63,86,0],[0,0,0,0,0,0,0,109,382,730,4,0,0,192,2338,0,0,55,474,385,763,78,179,26],[0,0,25,0,0,0,185,220,254,1213,0,450,109,0,230,1243,0,0,210,348,282,210,451,58],[0,0,0,0,0,0,263,519,44,1157,1612,587,570,562,674,73,306,259,881,25,48,18,1274,1074],[14,0,0,0,0,0,0,0,0,10,1481,874,109,2762,1711,2134,1498,1853,1492,253,0,575,53,0],[0,0,0,0,0,86,0,0,249,539,276,0,122,0,184,194,127,0,181,241,156,22,378,40],[0,0,0,0,0,0,0,89,130,548,510,3947,3060,877,666,1889,673,416,321,8,67,0,35,0],[0,0,28,93,168,35,0,94,0,29,24,52,103,0,52,257,154,187,0,0,194,152,199,0],[0,0,0,0,0,19,0,0,198,964,264,196,929,1006,1406,489,4,142,197,507,130,316,116,0],[0,0,0,0,0,0,0,160,1145,1510,249,138,128,193,0,0,0,0,511,328,195,89,154,0]]&quot; data-caption=&quot;February&quot; data-background=&quot;var(--primary)&quot; data-foreground=&quot;var(--white)&quot; data-size=&quot;300&quot; data-margin=&quot;0.2&quot; data-scale=&quot;1.5&quot; data-row-height=&quot;0.1&quot; data-baseline=&quot;0&quot;/&gt;&lt;stacked-sparklines class=&quot;yearly-steps__month yearly-steps__march&quot; data-data=&quot;[[0,26,0,0,0,0,0,96,57,374,204,0,0,546,8,0,113,223,448,302,1275,467,203,26],[0,0,0,0,0,60,0,0,73,477,231,90,0,0,815,70,228,0,0,199,165,100,175,0],[0,102,0,39,0,0,0,61,421,512,163,0,0,293,623,0,86,16,290,436,162,83,195,46],[6,0,0,0,0,0,0,221,160,285,141,471,498,652,759,1438,1625,573,184,458,337,78,68,44],[0,52,0,0,0,31,2,122,79,270,287,852,327,422,325,367,271,489,311,119,337,0,194,0],[0,0,0,0,0,0,0,143,458,733,186,393,336,318,4726,59,0,0,405,424,295,40,246,0],[0,0,0,0,0,0,0,179,419,566,165,0,0,93,0,0,0,0,998,293,99,219,170,139],[0,0,0,0,0,0,0,0,64,309,455,136,0,0,0,35,447,660,165,287,519,74,470,0],[0,46,0,0,0,0,0,102,426,396,338,190,932,300,127,59,37,156,761,52,24,52,442,430],[126,0,0,0,0,0,0,0,0,268,161,185,79,0,0,194,742,301,658,236,212,10,337,0],[0,0,0,0,0,0,0,53,477,763,481,1739,332,39,62,836,781,434,411,196,393,0,216,0],[0,0,0,0,0,53,0,42,293,412,1185,927,2740,1247,311,49,494,482,783,209,202,83,25,0],[0,0,0,0,0,0,42,192,431,252,0,0,105,18,581,358,0,24,428,403,120,0,140,0],[0,0,0,0,0,0,21,235,375,549,395,282,0,0,2183,42,0,0,346,142,309,9,269,0],[0,0,0,0,0,0,23,158,39,602,163,0,0,550,350,822,0,0,123,398,295,78,917,0],[0,0,0,0,0,0,0,138,329,577,120,0,686,1349,71,0,0,0,138,241,354,0,314,0],[0,0,0,0,0,0,0,40,571,670,0,102,49,18,14,0,149,213,55,685,312,9,266,34],[0,0,0,0,0,0,0,112,291,321,542,1462,2115,2067,384,221,263,179,595,56,579,216,61,0],[0,0,0,0,0,0,0,137,336,392,345,444,1496,1449,485,419,291,266,684,341,622,0,126,0],[0,0,0,0,0,0,0,154,534,500,456,1137,560,567,1006,1558,335,224,331,122,641,62,205,0],[0,0,0,0,0,0,0,135,753,309,823,13,4667,48,589,31,286,429,552,397,261,412,41,0],[0,0,0,0,0,0,0,206,268,385,507,437,158,2105,766,1282,273,213,135,297,538,134,61,0],[0,0,0,0,0,0,0,127,383,344,813,0,64,845,200,344,74,322,611,428,311,68,315,0],[0,0,0,0,0,0,49,200,431,878,529,584,1437,1005,1703,1945,284,772,331,291,416,80,253,0],[0,0,0,0,0,0,0,56,407,163,417,1600,511,423,584,769,2572,821,616,363,186,323,217,43],[0,0,0,0,0,0,50,96,472,457,554,724,1462,204,312,486,268,551,64,423,145,301,78,0],[0,0,46,0,0,0,0,130,698,189,191,0,0,0,0,288,520,398,320,227,159,319,0,0],[0,0,0,0,0,0,0,205,206,428,0,0,0,345,0,99,13,466,368,568,81,272,0,0],[0,0,0,0,0,0,62,0,358,372,0,0,556,0,94,157,241,8,323,1055,55,234,0,0],[0,0,0,0,0,0,217,121,430,522,0,0,975,84,247,29,192,520,215,238,81,340,108,0],[0,0,0,0,0,0,110,148,398,86,0,0,135,163,245,98,11,87,463,467,77,36,98,42]]&quot; data-caption=&quot;March&quot; data-background=&quot;var(--primary)&quot; data-foreground=&quot;var(--white)&quot; data-size=&quot;300&quot; data-margin=&quot;0.2&quot; data-scale=&quot;1.5&quot; data-row-height=&quot;0.1&quot; data-baseline=&quot;0&quot;/&gt;&lt;stacked-sparklines class=&quot;yearly-steps__month yearly-steps__april&quot; data-data=&quot;[[12,0,0,0,0,0,59,187,160,433,734,349,354,144,76,232,697,70,76,220,20,418,0,0],[0,0,0,0,0,0,104,29,353,231,462,219,147,1130,83,854,308,500,138,312,8,192,96,0],[0,0,0,0,0,0,62,251,653,216,0,120,0,698,150,0,0,387,434,451,58,227,0,0],[0,0,0,0,0,0,170,292,473,41,16,128,47,197,1647,150,0,739,268,587,0,385,39,0],[0,0,0,0,0,0,221,171,194,483,27,0,146,225,103,61,0,0,184,503,140,25,215,0],[0,0,0,0,0,0,247,390,196,241,161,0,132,236,0,616,0,0,220,280,308,99,149,0],[0,0,22,0,0,0,0,125,94,644,696,388,123,339,3020,110,0,489,144,830,85,384,0,0],[0,0,0,0,0,0,212,192,172,1921,747,804,1709,2129,1934,322,193,1081,55,347,0,254,0,0],[0,0,0,0,0,0,167,291,190,450,389,356,23,505,0,3171,3346,428,228,497,12,260,0,0],[0,0,0,0,0,0,15,283,221,205,544,637,653,171,664,634,1177,230,222,353,121,297,36,0],[41,0,0,0,0,0,25,401,384,82,60,0,0,0,0,263,0,442,172,417,97,367,0,0],[0,0,0,0,0,0,149,499,160,101,86,0,51,1218,1423,0,0,46,305,716,64,261,65,0],[0,0,0,0,0,0,75,193,709,437,0,16,0,88,16,179,26,203,95,154,109,330,0,0],[8,0,0,0,0,0,0,91,630,202,0,3,189,2497,408,0,0,43,83,244,86,217,72,0],[0,0,0,0,0,0,0,158,251,11,373,420,1093,1721,1644,92,988,547,80,220,219,40,0,0],[0,0,0,0,0,0,128,173,226,325,427,694,1787,1645,704,418,423,446,280,182,0,200,0,0],[0,0,0,0,0,0,138,477,515,0,0,193,360,222,77,39,13,327,245,152,164,167,0,0],[0,0,0,0,0,57,108,559,329,0,82,0,210,4221,117,159,0,785,351,254,185,378,0,58],[0,0,0,0,0,0,140,266,399,82,284,0,653,1488,0,305,157,499,588,477,52,133,33,0],[0,0,0,0,0,0,18,426,234,521,197,0,165,182,0,143,27,157,166,511,225,294,0,0],[0,0,0,0,0,0,195,228,858,55,128,0,12,425,167,11,0,101,158,551,62,381,130,91],[0,0,0,0,0,88,0,38,89,222,253,426,746,828,1396,449,455,512,535,105,147,274,15,0],[0,0,0,0,0,0,49,280,311,287,990,553,321,2074,1586,181,243,750,201,377,73,228,11,0],[0,0,0,0,0,0,80,370,505,49,84,0,0,0,192,692,0,349,569,338,234,243,0,0],[0,0,0,0,0,0,63,500,308,40,10,212,4,40,0,275,0,504,123,133,5,68,52,0],[0,0,0,0,0,62,294,351,670,49,10,0,1146,779,294,13,0,108,252,857,325,141,52,0],[69,0,0,0,0,69,67,225,309,169,0,0,483,0,0,231,149,241,298,226,0,30,136,0],[0,0,0,0,0,0,103,76,1108,203,215,27,0,0,0,54,0,486,583,95,9,219,0,0],[0,0,0,0,0,43,147,112,402,1054,89,2327,194,2481,3787,282,364,695,439,161,32,153,48,0],[0,0,0,0,0,0,141,161,309,391,529,532,1000,2566,2561,306,474,158,60,336,139,375,50,0]]&quot; data-caption=&quot;April&quot; data-background=&quot;var(--primary)&quot; data-foreground=&quot;var(--white)&quot; data-size=&quot;300&quot; data-margin=&quot;0.2&quot; data-scale=&quot;1.5&quot; data-row-height=&quot;0.1&quot; data-baseline=&quot;0&quot;/&gt;&lt;stacked-sparklines class=&quot;yearly-steps__month yearly-steps__may&quot; data-data=&quot;[[0,0,0,0,0,0,61,82,366,220,636,281,1957,3146,219,569,708,360,211,55,14,245,0,0],[0,0,0,0,0,39,280,242,650,8,364,0,41,720,138,0,2,405,338,293,164,54,0,0],[0,0,0,0,0,0,0,341,248,325,0,0,1308,436,16,118,0,124,120,200,239,800,0,0],[0,0,0,0,26,0,145,332,645,51,580,307,389,386,470,687,196,665,193,728,86,465,113,0],[0,0,0,0,0,0,24,713,526,391,1337,0,260,319,0,177,1039,646,364,387,61,0,0,0],[0,0,0,0,0,0,0,9,155,110,717,6038,462,0,246,395,462,244,41,96,0,132,54,0],[0,0,0,0,0,0,16,0,213,1656,2054,87,1069,314,0,0,119,831,144,216,254,211,19,0],[0,0,0,0,0,0,0,26,0,693,641,28,164,0,794,0,291,176,586,846,0,212,88,0],[0,0,0,0,0,0,221,355,406,142,0,151,257,284,20,0,8,577,199,222,43,335,20,0],[0,0,0,0,0,0,0,183,224,343,0,0,112,651,106,0,0,0,387,645,70,169,0,0],[18,0,0,0,0,67,119,125,530,122,0,0,1041,310,62,161,9,102,204,319,4,236,0,51],[0,0,0,0,0,0,150,209,449,53,110,24,21,193,82,40,0,0,222,27,359,150,0,0],[0,0,0,0,0,47,83,236,340,670,1857,2288,484,740,559,959,688,525,260,173,125,283,76,0],[0,0,0,0,0,0,41,9,0,511,447,516,596,619,2048,0,509,684,319,129,3,481,0,70],[0,0,0,0,0,0,99,313,426,190,100,33,0,347,128,0,23,763,355,206,158,581,0,56],[1,0,0,0,0,0,248,571,442,199,68,33,71,8,163,0,60,516,195,213,41,372,22,0],[0,0,0,0,0,163,39,199,1033,245,0,0,220,0,988,53,236,169,418,579,75,543,463,0],[0,0,0,0,0,0,65,121,174,223,670,216,395,9,50,3784,280,128,648,245,340,120,33,0],[0,0,0,0,0,0,84,278,530,1769,878,162,2308,3658,1827,252,575,499,94,719,0,251,162,0],[0,0,0,0,70,0,0,131,252,273,1059,11,1340,22,2560,2430,404,274,682,464,455,415,0,0],[0,0,0,0,0,0,0,64,213,431,399,788,964,706,2335,1492,1500,902,692,410,279,267,65,0],[0,0,0,0,0,0,247,385,593,0,9,455,0,4381,95,154,11,455,563,363,118,401,0,0],[0,0,0,0,0,0,44,485,777,368,331,0,0,12,0,0,0,191,278,761,158,441,0,0],[0,0,0,0,0,0,44,625,471,631,19,5,0,0,39,0,410,0,116,949,317,123,95,0],[0,0,0,0,0,0,124,222,237,146,0,80,120,175,456,2,0,0,697,384,0,397,8,0],[0,0,0,0,0,0,0,133,682,454,0,20,67,5342,824,0,91,512,593,388,47,396,72,60],[0,0,0,0,0,0,113,228,271,730,1693,865,759,1101,37,1626,155,194,1078,3067,822,691,111,345],[0,0,0,0,41,0,0,98,201,219,1279,890,142,322,4168,1054,262,1024,264,251,48,187,0,47],[0,0,0,0,0,0,157,189,435,106,320,1105,852,884,2431,1241,1275,609,318,971,337,121,0,0],[0,0,0,0,0,73,255,261,741,79,58,206,358,50,0,39,215,206,571,485,195,371,46,0],[0,0,0,0,0,0,249,255,221,430,20,164,0,0,239,1334,0,377,501,647,192,332,14,0]]&quot; data-caption=&quot;May&quot; data-background=&quot;var(--primary)&quot; data-foreground=&quot;var(--white)&quot; data-size=&quot;300&quot; data-margin=&quot;0.2&quot; data-scale=&quot;1.5&quot; data-row-height=&quot;0.1&quot; data-baseline=&quot;0&quot;/&gt;&lt;stacked-sparklines class=&quot;yearly-steps__month yearly-steps__june&quot; data-data=&quot;[[0,0,0,0,0,68,12,316,351,663,151,0,26,243,5089,713,13,478,456,339,345,331,231,0],[0,0,0,0,0,0,21,218,429,934,546,540,676,550,470,432,1119,862,280,748,0,706,0,0],[0,0,0,0,0,0,133,395,294,1200,662,1448,762,328,1309,740,761,201,130,2069,447,484,1731,1540],[363,70,0,0,0,75,0,91,445,560,213,1372,689,1990,1954,951,260,316,383,310,314,53,0,0],[0,0,0,0,0,0,128,396,483,356,0,0,0,3960,3413,0,0,410,277,336,267,257,93,0],[0,0,13,0,0,0,80,164,698,119,239,0,2125,3662,0,0,0,500,114,604,194,267,0,0],[0,0,0,0,0,47,12,456,176,346,0,0,67,110,1556,48,0,0,291,764,554,526,22,0],[0,0,0,0,0,0,120,760,635,0,1590,2538,2119,2041,3144,685,893,109,889,410,220,388,160,0],[0,0,0,0,0,0,41,513,741,370,0,9,0,210,572,243,0,113,171,247,126,444,0,0],[0,0,0,0,0,0,0,20,11,626,324,251,601,902,3180,1691,1051,660,386,451,344,169,23,0],[0,0,0,0,0,0,47,0,469,1295,2708,486,887,528,3487,2087,1790,974,194,678,502,550,28,0],[0,0,0,0,0,46,1893,0,0,95,0,1254,565,360,10,1935,0,0,2683,1933,750,0,0,41],[9,0,0,0,0,0,0,27,1780,0,124,215,1302,967,541,203,0,0,923,2488,45,7,15,0],[0,0,0,0,0,0,9,33,694,1654,0,221,1812,310,0,115,9,586,24,36,21,785,1299,0],[0,0,0,0,0,0,0,16,16,1855,2391,428,209,364,2227,2,0,17,29,1866,235,517,164,0],[0,0,0,0,0,45,418,187,538,231,224,156,600,410,226,0,0,0,256,652,332,210,50,0],[0,0,0,0,0,0,0,0,63,0,27,872,237,894,766,1496,558,947,551,423,201,211,0,0],[0,0,0,0,0,0,0,12,25,232,2869,2936,754,357,157,809,551,407,468,588,16,232,66,0],[0,0,0,0,0,0,0,611,507,17,0,10,0,1261,907,0,0,403,536,745,71,517,0,0],[0,0,0,0,0,0,165,15,634,461,140,0,429,291,26,354,19,461,440,759,123,212,117,0],[0,0,0,0,0,0,0,194,726,116,0,0,138,423,22,0,167,19,297,1057,70,360,57,0],[0,0,0,0,0,0,48,637,141,468,0,415,310,0,0,0,389,326,139,406,0,409,397,0],[0,0,0,0,0,0,21,435,483,1034,0,8,212,136,8,544,17,660,185,182,424,312,11,0],[0,0,0,0,0,75,12,14,223,719,110,206,736,1153,439,1163,736,454,185,430,56,549,93,0],[0,0,0,0,0,0,0,262,180,289,717,305,756,503,4172,694,46,321,432,517,746,379,0,0],[0,0,0,0,0,0,127,508,531,136,84,162,328,646,0,0,0,776,588,739,221,542,0,0],[0,0,0,0,0,0,56,285,645,0,0,55,0,598,0,0,0,578,903,161,222,131,329,0],[0,0,0,0,0,0,328,94,567,129,318,132,167,1800,552,58,425,121,213,947,112,302,11,0],[0,0,0,0,0,0,208,630,208,358,161,173,0,256,273,0,0,0,333,433,416,309,182,0],[0,0,0,0,0,0,172,186,578,973,0,235,0,1039,2212,0,198,23,105,461,109,227,96,0]]&quot; data-caption=&quot;June&quot; data-background=&quot;var(--primary)&quot; data-foreground=&quot;var(--white)&quot; data-size=&quot;300&quot; data-margin=&quot;0.2&quot; data-scale=&quot;1.5&quot; data-row-height=&quot;0.1&quot; data-baseline=&quot;0&quot;/&gt;&lt;stacked-sparklines class=&quot;yearly-steps__month yearly-steps__july&quot; data-data=&quot;[[0,0,0,0,0,0,0,119,216,306,681,1209,914,887,209,1130,127,513,851,389,8,0,480,46],[0,0,0,0,0,0,0,334,218,0,57,742,712,264,347,5244,1378,86,388,112,261,342,0,0],[0,0,0,0,0,0,66,374,551,0,130,0,327,175,0,319,0,778,492,210,144,311,0,0],[0,0,0,0,0,69,19,480,595,157,220,8,0,3326,3203,0,6,787,1010,391,319,858,53,0],[0,0,0,0,0,0,71,65,509,0,61,294,278,99,320,158,176,1169,1782,107,519,202,167,0],[0,0,0,0,0,0,52,392,273,471,74,0,1122,468,337,0,436,103,200,595,566,419,168,0],[0,0,0,0,0,0,10,288,532,243,8,397,0,0,983,1537,304,0,126,739,40,454,14,0],[0,0,0,0,0,0,25,247,419,594,154,690,163,1811,5338,1767,723,376,448,972,234,247,136,26],[0,0,0,0,0,0,0,351,0,996,349,336,339,415,282,185,284,415,97,457,396,533,0,0],[0,0,0,0,0,0,201,509,808,0,140,80,289,4089,313,0,0,670,469,224,614,44,19,0],[0,0,0,0,0,0,327,325,695,0,256,18,34,9,259,0,0,593,252,337,87,257,15,0],[0,0,0,47,0,0,198,475,777,213,0,36,1567,2138,0,0,0,0,117,445,164,490,74,0],[0,0,0,0,0,30,280,563,149,170,59,0,114,274,0,127,8,849,358,478,435,136,0,0],[0,0,0,0,0,0,17,191,853,356,64,0,184,0,657,0,14,0,316,31,155,0,141,0],[0,0,0,0,0,0,93,28,0,427,1808,496,78,204,199,148,709,722,328,163,54,135,107,0],[0,0,0,0,0,0,0,122,30,588,720,172,172,795,2954,2802,155,368,228,757,228,117,26,0],[0,0,0,0,0,0,80,244,665,56,0,9,94,109,0,0,0,467,570,22,92,169,58,0],[0,0,0,0,0,0,59,373,565,99,0,2,70,1303,418,0,0,772,347,460,0,127,33,0],[0,0,0,0,0,110,40,182,386,0,660,10,8,0,44,272,3,825,652,83,119,418,135,0],[0,0,0,0,0,0,32,180,406,129,157,96,0,638,3830,0,0,344,153,326,29,234,72,0],[0,0,0,0,0,0,150,226,504,146,0,0,0,1953,2957,84,0,0,364,262,406,231,184,0],[0,0,0,0,0,0,0,241,107,0,568,781,766,1222,1807,463,326,392,400,155,146,156,38,0],[0,0,0,0,0,88,4,62,264,408,305,891,1458,1375,4544,387,836,455,38,275,0,258,75,0],[0,65,14,0,0,0,145,570,547,58,190,0,0,3433,813,8,0,296,282,409,87,79,194,0],[0,0,0,0,0,0,393,314,476,92,60,39,0,3159,3314,0,99,825,954,147,226,288,43,0],[0,0,0,0,0,0,119,38,241,499,42,0,779,5507,1408,0,0,0,670,625,391,53,201,0],[0,0,0,0,0,0,415,445,227,94,0,563,5839,254,0,22,358,0,1026,229,179,199,0,0],[0,0,0,0,0,90,171,27,500,127,0,39,2871,3540,12,121,0,83,121,471,203,131,46,0],[0,0,0,0,0,10,3,193,0,195,1073,671,355,58,961,613,539,466,200,225,91,261,0,0],[0,0,0,0,0,0,173,58,85,694,686,160,899,430,963,720,244,498,82,601,421,332,116,0],[0,0,0,0,0,0,339,274,419,110,478,10,16,3894,4175,0,0,550,484,68,109,8,159,0]]&quot; data-caption=&quot;July&quot; data-background=&quot;var(--primary)&quot; data-foreground=&quot;var(--white)&quot; data-size=&quot;300&quot; data-margin=&quot;0.2&quot; data-scale=&quot;1.5&quot; data-row-height=&quot;0.1&quot; data-baseline=&quot;0&quot;/&gt;&lt;stacked-sparklines class=&quot;yearly-steps__month yearly-steps__august&quot; data-data=&quot;[[0,0,0,0,0,0,139,390,401,157,0,0,570,6625,492,0,0,281,332,153,285,270,137,0],[0,0,0,0,0,154,20,474,517,191,104,0,5017,3309,0,91,209,0,280,1240,867,34,264,0],[0,0,0,0,0,0,156,376,85,109,262,1676,6332,287,15,338,0,514,309,328,38,220,58,0],[0,0,0,0,0,0,89,470,471,159,434,0,2055,5843,291,52,0,8,563,630,551,170,141,0],[0,0,0,0,0,108,109,552,675,0,605,310,433,282,0,1241,1013,1137,859,837,2212,130,95,0],[0,0,0,0,0,0,0,49,626,531,673,319,937,1815,595,1877,458,164,380,2221,174,294,0,0],[0,0,0,0,0,0,34,557,563,399,150,268,1995,1601,0,0,290,243,634,361,532,13,132,0],[0,0,0,0,0,10,82,277,616,81,163,0,1847,1311,3679,234,0,240,369,292,37,866,0,0],[0,0,0,0,0,0,96,279,314,158,372,48,0,6862,1186,0,0,450,545,222,835,86,320,0],[0,0,0,0,0,0,0,492,429,239,8,0,0,5031,2741,0,0,0,107,291,203,282,220,0],[0,0,0,0,0,0,98,225,793,296,297,23,115,3061,2294,708,171,203,635,1064,480,330,8,75],[0,0,0,0,0,0,257,659,501,212,551,1052,765,2919,3888,687,472,589,323,367,0,281,25,0],[0,0,0,0,0,79,151,82,125,125,1590,281,869,1201,983,947,233,630,197,368,0,334,0,0],[0,0,70,0,0,0,0,91,607,288,0,340,8,579,65,3285,3975,9,786,409,192,55,215,0],[0,0,0,0,0,185,330,529,908,214,248,1833,3447,3463,992,269,22,276,442,439,256,237,0,0],[0,0,0,0,0,168,112,430,667,746,164,0,2057,2282,73,0,0,66,3638,1184,70,292,0,0],[0,0,0,0,0,0,0,298,129,191,9,2040,1312,1306,199,126,138,725,432,3234,456,180,58,0],[0,0,0,0,0,77,148,459,712,0,85,0,18,372,355,424,316,3720,1031,2288,279,157,0,0],[0,0,0,83,0,0,281,550,203,975,233,941,735,893,2099,4763,573,390,437,445,109,242,0,0],[0,0,0,0,0,0,0,507,358,566,2059,951,1035,1504,4885,2405,202,441,160,713,370,417,104,0],[0,0,0,0,0,0,82,478,812,859,0,84,3094,3996,21,0,453,683,274,485,98,200,133,0],[0,16,11,0,0,0,381,356,612,287,290,406,0,0,5017,1912,4287,661,410,509,508,481,102,0],[89,0,0,0,0,0,312,287,765,316,3459,13,0,3953,1132,2073,540,429,272,486,3,258,0,0],[0,0,0,0,0,0,216,273,80,458,339,1420,1644,1082,3834,1586,3323,388,124,714,289,160,93,0],[0,0,0,0,0,0,98,631,408,125,372,1168,398,543,444,996,448,108,38,523,457,252,62,0],[0,0,0,0,0,64,0,401,500,688,536,480,908,1532,2225,1069,322,603,488,419,0,481,0,0],[0,0,0,0,0,0,384,215,146,428,695,195,0,0,3171,4814,750,121,179,59,165,243,71,0],[0,93,0,0,0,0,175,240,491,607,1343,0,458,2451,1709,1942,517,446,388,304,0,207,68,0],[0,0,0,0,0,0,167,642,1738,941,475,328,222,193,150,894,353,533,219,2441,205,80,475,53],[13,0,0,0,0,0,260,151,298,524,589,213,1613,1568,1090,129,87,286,399,1249,600,235,727,0],[0,0,0,0,0,0,0,525,527,199,325,282,157,1124,768,554,199,847,280,631,8,254,0,0]]&quot; data-caption=&quot;August&quot; data-background=&quot;var(--primary)&quot; data-foreground=&quot;var(--white)&quot; data-size=&quot;300&quot; data-margin=&quot;0.2&quot; data-scale=&quot;1.5&quot; data-row-height=&quot;0.1&quot; data-baseline=&quot;0&quot;/&gt;&lt;stacked-sparklines class=&quot;yearly-steps__month yearly-steps__september&quot; data-data=&quot;[[0,131,0,0,0,0,176,347,428,430,108,817,4,0,141,0,0,0,1676,154,302,213,135,0],[54,0,64,0,0,0,0,481,361,489,672,2310,850,701,376,2404,414,806,582,133,0,219,185,1],[30,0,0,0,0,0,26,380,397,947,1997,1043,1151,958,236,841,1018,961,75,361,40,156,168,0],[0,0,0,0,0,0,75,350,470,74,868,446,1837,219,2000,2677,1330,0,120,346,284,64,0,0],[0,0,0,0,0,0,225,425,1275,107,182,449,774,97,3531,4728,10,295,450,1154,421,281,248,0],[0,0,0,0,0,0,185,178,769,439,852,665,8,0,0,1031,4074,206,840,857,150,156,67,0],[0,0,0,0,0,0,234,781,1467,316,0,177,54,950,6079,43,0,279,527,187,92,154,13,0],[47,69,85,0,0,0,126,456,361,460,398,2439,665,443,2854,1257,1832,596,495,494,242,161,0,0],[0,0,0,0,0,0,62,173,541,514,766,1281,1562,3250,1763,2077,902,578,54,84,171,176,173,0],[0,0,0,0,0,0,0,426,211,342,593,2073,1447,35,305,46,82,842,333,383,233,18,206,0],[0,0,0,0,73,0,199,545,520,0,0,118,1226,775,269,0,337,3271,1615,766,271,319,48,0],[0,0,0,100,0,0,369,581,1003,134,0,107,1313,3356,1719,138,0,626,662,490,122,255,0,0],[0,0,0,0,0,189,0,556,441,868,101,396,813,2311,2581,823,0,201,154,416,353,113,29,0],[0,0,100,0,0,0,103,821,467,160,1601,564,97,1112,0,96,98,255,105,4853,108,239,72,0],[0,0,0,0,0,264,48,98,434,1083,138,0,304,5390,421,995,556,1271,247,243,341,311,56,94],[0,0,0,0,0,86,137,525,253,340,713,1255,687,559,662,1413,449,904,362,1355,35,269,0,0],[0,0,91,51,0,0,0,131,442,634,0,410,961,1759,2065,0,526,313,751,253,232,67,100,0],[0,0,0,105,80,0,137,479,70,280,21,0,0,4869,2572,0,551,920,506,433,268,198,69,0],[0,0,0,0,0,135,61,468,1035,177,0,0,0,2380,3636,0,0,125,438,695,221,62,0,0],[0,95,9,0,0,0,0,276,883,80,0,0,0,6444,1963,0,0,199,510,52,171,573,74,0],[0,0,0,0,0,0,287,793,426,75,8,0,2873,3769,0,10,0,893,373,990,10,108,0,0],[0,0,181,0,12,169,204,250,734,316,0,0,147,5933,855,0,370,56,162,537,381,228,0,64],[129,0,0,0,0,0,240,470,576,640,1239,1808,1584,666,2965,4138,812,303,238,633,182,198,112,0],[229,0,0,0,0,0,191,0,353,445,379,218,285,217,3070,4041,393,388,394,550,367,103,0,0],[162,84,0,0,0,233,211,543,72,131,171,83,0,0,4188,2291,0,348,523,568,366,164,0,0],[0,0,0,0,138,0,0,465,763,103,0,14,3754,3831,0,32,0,601,339,121,232,173,0,0],[0,134,40,0,0,0,174,335,365,243,0,0,217,4659,1821,252,0,902,217,471,298,368,0,0],[0,0,0,75,15,0,136,702,88,380,64,64,0,2463,3122,0,144,604,483,244,73,1316,64,0],[0,0,0,0,0,0,241,327,271,45,397,9,8,2686,4865,250,0,286,912,320,0,276,109,0],[0,84,0,0,0,0,222,771,307,563,885,500,357,1395,3245,2162,74,474,82,452,118,176,218,0]]&quot; data-caption=&quot;September&quot; data-background=&quot;var(--primary)&quot; data-foreground=&quot;var(--white)&quot; data-size=&quot;300&quot; data-margin=&quot;0.2&quot; data-scale=&quot;1.5&quot; data-row-height=&quot;0.1&quot; data-baseline=&quot;0&quot;/&gt;&lt;stacked-sparklines class=&quot;yearly-steps__month yearly-steps__october&quot; data-data=&quot;[[0,0,0,0,0,0,248,266,410,475,150,265,590,205,142,3235,3327,173,177,562,431,155,61,0],[0,0,127,32,0,0,461,726,441,18,42,51,0,583,5705,1187,17,798,933,453,296,299,0,0],[0,0,0,0,0,0,116,561,2275,305,69,169,312,2884,111,71,8,637,698,362,146,1371,56,0],[0,0,0,78,0,0,35,189,474,49,0,92,2809,4120,0,0,0,204,658,1114,182,142,122,0],[0,0,0,0,0,167,207,863,594,0,0,0,0,5487,1141,227,0,573,406,605,74,213,0,0],[99,12,0,0,0,0,35,226,325,18,0,113,1972,6042,131,139,233,37,149,325,359,111,114,0],[75,57,0,0,0,0,0,247,488,680,2281,444,360,1380,877,883,446,1168,776,225,248,221,64,0],[0,0,0,0,0,0,211,246,513,417,411,1809,19,461,2912,2139,1521,447,200,379,926,85,91,0],[0,0,0,0,0,0,0,483,627,0,58,260,0,3645,4588,0,0,597,300,315,0,348,0,0],[0,0,0,0,0,0,324,906,578,0,135,0,0,2384,5482,0,0,690,424,612,67,194,0,67],[0,0,0,0,0,131,256,223,287,128,315,0,0,0,6054,1166,0,0,716,440,371,202,46,0],[0,0,0,0,0,0,59,905,597,0,0,127,831,5778,767,0,0,64,66,596,382,212,44,0],[0,0,0,0,0,0,78,119,697,359,54,16,0,1059,148,1087,0,124,1303,565,537,567,0,0],[0,0,0,0,29,0,166,161,465,310,931,1075,467,488,659,379,610,648,267,1173,1403,796,198,0],[0,0,0,0,0,82,109,75,526,397,802,963,694,591,136,2453,602,1,939,121,411,1088,321,0],[0,0,0,0,0,0,0,713,594,0,71,0,2204,5773,0,0,203,1175,977,422,370,250,0,0],[0,0,0,0,0,0,180,471,847,28,56,0,4422,4101,0,0,86,366,306,86,363,273,0,0],[0,160,0,0,0,0,78,567,432,234,106,0,16,51,2079,5103,0,335,268,94,321,118,56,0],[0,0,0,0,0,0,0,590,723,0,41,62,0,5887,517,105,0,830,646,425,590,196,284,0],[0,0,0,217,14,0,0,261,558,231,506,0,0,1363,5750,341,0,184,415,655,242,115,0,0],[0,120,0,0,0,0,129,391,373,464,1357,107,52,4112,4497,424,137,1141,140,310,328,258,88,0],[0,0,0,62,102,229,530,95,458,435,532,42,305,217,1012,305,334,644,577,925,34,308,0,0],[0,0,0,0,0,83,0,766,224,0,133,8,68,5137,1363,0,91,1383,638,420,634,0,64,0],[0,0,0,0,0,0,138,400,632,0,0,1,14,0,6041,442,79,519,525,380,694,142,153,0],[0,0,0,0,0,0,371,335,451,357,696,63,684,3462,727,758,616,165,273,933,743,399,107,0],[0,0,0,0,0,0,58,274,369,75,0,0,21,331,417,4719,0,1019,972,631,206,274,659,0],[0,0,0,0,0,0,0,403,402,0,0,67,138,922,5710,0,0,0,344,20,410,46,559,1044],[0,0,0,0,0,0,78,295,314,520,2003,348,292,2317,1779,6106,821,454,279,400,576,28,0,0],[0,0,0,0,0,0,359,256,414,846,843,172,506,77,4664,2422,385,367,317,302,591,110,343,0],[0,0,0,0,0,0,56,0,891,261,0,0,34,0,0,2970,5093,0,852,546,373,180,142,0],[0,0,0,0,0,5,18,0,440,683,11,32,0,4698,3299,16,0,296,762,849,267,137,87,71]]&quot; data-caption=&quot;October&quot; data-background=&quot;var(--primary)&quot; data-foreground=&quot;var(--white)&quot; data-size=&quot;300&quot; data-margin=&quot;0.2&quot; data-scale=&quot;1.5&quot; data-row-height=&quot;0.1&quot; data-baseline=&quot;0&quot;/&gt;&lt;stacked-sparklines class=&quot;yearly-steps__month yearly-steps__november&quot; data-data=&quot;[[0,0,0,0,0,0,0,392,255,429,16,84,169,985,3842,0,202,60,0,542,362,754,210,113],[0,0,0,0,0,0,0,762,510,561,171,808,668,0,5570,1274,167,124,524,265,333,309,188,64],[0,0,0,0,0,0,0,179,321,379,99,100,147,37,2739,3936,292,0,0,159,663,419,238,332],[0,0,0,0,0,0,0,152,268,950,1131,457,170,456,246,203,351,404,412,258,553,215,140,51],[0,0,0,0,0,0,0,101,375,419,621,1081,385,72,3015,3355,143,258,362,426,103,249,175,34],[0,0,0,0,0,0,0,102,848,806,78,0,0,612,5891,515,0,0,563,885,743,455,244,163],[0,0,0,0,0,0,167,556,26,1006,2097,280,1478,521,475,0,152,0,175,0,851,67,0,2309],[0,0,0,0,0,0,0,0,8,28,17,2988,510,439,1700,0,129,1913,1294,0,878,2399,86,0],[0,0,0,0,0,0,0,0,0,44,2986,1387,2149,477,1774,2096,1695,1193,682,459,3,536,177,0],[0,0,0,69,0,0,0,0,412,491,404,96,0,0,261,3930,2463,0,130,890,276,371,112,111],[50,0,154,0,0,0,0,208,481,778,793,840,239,265,343,44,77,3120,1014,172,107,323,1119,0],[0,0,0,19,24,0,0,0,192,367,321,178,366,2083,5069,228,335,271,182,391,320,268,78,0],[0,0,0,0,0,0,0,168,607,458,40,114,8,201,0,0,6018,93,546,534,512,562,148,0],[0,0,0,0,0,0,0,36,596,444,0,0,81,0,4890,2651,0,0,354,222,232,302,227,94],[0,0,0,0,0,0,0,50,580,602,85,185,0,0,4105,4499,0,263,201,127,884,53,72,29],[0,0,0,0,0,0,0,0,295,844,898,639,69,123,32,2701,284,441,550,115,371,120,264,0],[0,0,0,0,0,0,0,0,43,666,283,106,0,234,151,5777,1223,0,0,460,337,185,141,441],[0,0,0,0,0,0,0,318,619,928,638,847,211,444,1078,806,1262,352,711,869,19,462,205,231],[0,0,0,0,0,0,0,124,497,165,341,1456,711,1728,449,424,4749,618,533,669,590,463,146,0],[0,0,14,0,0,0,0,144,777,867,0,66,42,0,100,0,5865,693,648,1046,122,257,148,0],[0,0,0,0,0,0,0,21,926,260,0,131,70,0,3070,3747,76,0,228,722,593,151,288,164],[0,0,0,0,0,0,0,139,418,781,0,37,0,0,66,750,5367,166,0,502,279,85,756,64],[619,0,0,0,0,110,0,360,737,757,60,380,22,0,494,2530,0,0,256,634,575,85,30,125],[0,0,0,0,0,0,0,0,35,779,643,0,270,0,8,292,6116,41,79,802,437,72,504,0],[0,0,0,76,0,0,0,0,161,826,398,464,249,804,572,2082,660,658,744,449,266,0,84,73],[247,0,0,0,0,0,0,0,293,614,347,327,3346,4604,88,316,145,185,216,289,200,299,273,28],[0,0,0,0,99,0,0,206,415,865,0,0,60,0,0,5416,930,0,261,654,799,343,533,30],[0,0,0,0,0,0,0,14,1113,665,60,0,3,2822,3774,0,0,0,264,670,118,435,18,216],[50,0,0,0,0,0,0,472,380,213,74,414,111,246,16,3686,1817,0,989,0,566,151,10,28],[994,172,0,0,0,0,93,294,282,557,1073,1905,0,0,0,0,4463,166,307,554,278,205,70,262]]&quot; data-caption=&quot;November&quot; data-background=&quot;var(--primary)&quot; data-foreground=&quot;var(--white)&quot; data-size=&quot;300&quot; data-margin=&quot;0.2&quot; data-scale=&quot;1.5&quot; data-row-height=&quot;0.1&quot; data-baseline=&quot;0&quot;/&gt;&lt;stacked-sparklines class=&quot;yearly-steps__month yearly-steps__december&quot; data-data=&quot;[[0,0,0,0,0,0,0,0,71,212,477,615,481,832,427,135,349,463,136,219,286,829,164,0],[0,0,0,0,0,0,0,0,34,393,480,570,1476,2475,555,1369,378,65,508,473,186,253,371,479],[0,0,0,0,0,107,0,0,0,163,294,209,1093,1729,2655,681,2502,682,337,361,501,671,107,217],[0,26,0,0,0,0,0,394,680,928,22,1,0,0,240,5488,896,62,483,915,58,269,336,54],[0,0,0,0,0,0,0,202,565,176,363,0,95,0,3185,3191,253,0,943,604,209,342,132,112],[0,0,0,0,0,0,0,246,153,448,0,0,324,0,0,2594,3039,409,0,218,185,1034,304,1112],[0,0,0,0,0,0,137,404,624,269,1853,9,0,4281,173,0,0,0,269,633,518,178,0,691],[0,0,0,0,0,0,102,279,54,947,218,55,37,24,872,5574,146,0,43,240,394,25,1045,0],[0,0,0,0,0,0,0,0,207,412,424,987,1392,1197,956,5384,3636,459,123,205,346,285,143,115],[0,0,0,0,0,0,0,0,230,182,849,1012,1059,437,386,1564,596,359,588,493,331,218,0,273],[0,0,0,0,0,0,0,271,748,440,117,0,137,0,5788,2852,0,0,724,750,1011,279,156,184],[0,0,0,0,0,0,0,61,460,128,436,81,72,0,4432,3408,0,0,499,547,224,96,45,261],[33,0,0,0,0,0,0,0,136,666,96,368,0,287,0,2802,3916,156,0,349,201,226,458,109],[409,0,0,0,0,0,0,0,602,326,0,322,0,0,110,2869,4210,0,426,867,81,258,0,230],[0,0,0,0,0,0,0,0,229,376,99,8,74,0,4313,3685,188,0,199,738,559,237,513,138],[0,0,0,0,0,0,0,0,181,229,841,358,296,1142,137,0,284,480,424,10,331,361,57,67],[0,0,0,0,0,0,0,0,140,157,267,186,1375,984,453,340,69,234,525,916,642,545,393,0],[0,0,0,0,0,0,0,150,360,339,218,432,266,460,440,450,432,837,451,347,384,291,401,337],[0,0,0,0,0,0,0,0,98,429,986,157,0,1481,247,1920,1728,22,226,665,573,403,281,0],[0,9,0,0,0,0,0,0,6,392,285,328,600,754,1872,1964,1223,471,320,210,857,189,186,20],[0,171,32,0,0,0,50,126,292,726,196,343,568,428,283,1330,5090,796,342,319,110,279,252,39],[0,0,0,0,0,0,93,52,396,307,251,329,434,732,1788,2526,1611,209,926,341,311,274,37,227],[57,0,0,0,0,0,0,0,115,303,436,277,431,1257,2961,1702,138,358,350,344,571,402,382,0],[273,0,0,0,0,0,230,90,395,580,421,370,1426,1045,275,0,59,48,631,879,450,487,629,448],[0,0,0,0,0,0,52,191,162,486,479,659,878,602,364,274,371,560,545,480,464,76,193,456],[20,0,0,0,0,0,0,0,0,324,258,2683,5079,2397,766,182,534,257,889,262,163,249,470,17],[0,0,0,0,0,0,0,0,60,289,280,267,141,416,536,2964,1231,410,420,222,169,928,284,133],[0,0,0,0,0,0,155,0,0,381,139,623,190,1569,5542,1168,265,248,350,217,336,161,166,69],[0,0,0,0,0,0,0,0,348,287,483,3221,1240,1859,121,1395,60,738,379,289,297,214,172,272],[0,0,0,0,0,0,0,119,0,181,191,278,599,351,0,252,3535,88,331,374,221,244,51,144],[0,0,0,0,0,0,0,96,318,356,346,738,687,184,456,167,477,2,679,356,164,435,58,213]]&quot; data-caption=&quot;December&quot; data-background=&quot;var(--primary)&quot; data-foreground=&quot;var(--white)&quot; data-size=&quot;300&quot; data-margin=&quot;0.2&quot; data-scale=&quot;1.5&quot; data-row-height=&quot;0.1&quot; data-baseline=&quot;0&quot;/&gt;&lt;/div&gt;&lt;figcaption&gt;Each line represents a day, with steps measured at hourly intervals.&lt;/figcaption&gt;&lt;/figure&gt;&lt;blockquote&gt;&lt;p&gt;The code for this example uses &lt;code&gt;JSX&lt;/code&gt; to show how the component can be used in a React-like environment. The &lt;code&gt;key&lt;/code&gt; attribute is React-specific, and the self-closing tag is JSX-specific. The component itself is a standard web component and can be used in any environment that supports them.&lt;/p&gt;&lt;/blockquote&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-jsx&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; stepsData &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;./data/2023-steps.js&quot;&lt;/span&gt;;

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; monthNames = [
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;January&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;February&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;March&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;April&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;May&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;June&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;July&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;August&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;September&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;October&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;November&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;December&quot;&lt;/span&gt;
];

&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;default&lt;/span&gt; () =&gt; (
    &lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;className&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;yearly-steps&quot;&lt;/span&gt;&gt;&lt;/span&gt;
        {stepsData.map((month, i) =&gt; (
            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;stacked-sparklines&lt;/span&gt;
                &lt;span class=&quot;hljs-attr&quot;&gt;key&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{&lt;/span&gt;`&lt;span class=&quot;hljs-attr&quot;&gt;month_&lt;/span&gt;${&lt;span class=&quot;hljs-attr&quot;&gt;i&lt;/span&gt;}`}
                &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{&lt;/span&gt;`&lt;span class=&quot;hljs-attr&quot;&gt;yearly-steps__&lt;/span&gt;${&lt;span class=&quot;hljs-attr&quot;&gt;monthNames&lt;/span&gt;[&lt;span class=&quot;hljs-attr&quot;&gt;i&lt;/span&gt;]&lt;span class=&quot;hljs-attr&quot;&gt;.toLowerCase&lt;/span&gt;()}`}
                &lt;span class=&quot;hljs-attr&quot;&gt;data-data&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{JSON.stringify(month)}&lt;/span&gt;
                &lt;span class=&quot;hljs-attr&quot;&gt;data-caption&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{monthNames[i]}&lt;/span&gt;
                &lt;span class=&quot;hljs-attr&quot;&gt;data-background&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;#00b7c6&quot;&lt;/span&gt;
                &lt;span class=&quot;hljs-attr&quot;&gt;data-foreground&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;#fdfdfa&quot;&lt;/span&gt;
                &lt;span class=&quot;hljs-attr&quot;&gt;data-size&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;300&quot;&lt;/span&gt;
                &lt;span class=&quot;hljs-attr&quot;&gt;data-margin&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;0.2&quot;&lt;/span&gt;
                &lt;span class=&quot;hljs-attr&quot;&gt;data-scale&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;1.5&quot;&lt;/span&gt;
                &lt;span class=&quot;hljs-attr&quot;&gt;data-row-height&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;0.1&quot;&lt;/span&gt;
                &lt;span class=&quot;hljs-attr&quot;&gt;data-baseline&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;0&quot;&lt;/span&gt;
            /&gt;&lt;/span&gt;
        ))}
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;div&lt;/span&gt;&gt;&lt;/span&gt;&lt;/span&gt;
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;This example renders multiple &lt;code&gt;&amp;lt;stacked-sparklines&gt;&lt;/code&gt; components into a grid, each representing a month of the year. The data is passed as a stringified array, and the &lt;code&gt;data-caption&lt;/code&gt; attribute is used to label each chart with the month name. &lt;code&gt;data-background&lt;/code&gt; and &lt;code&gt;data-foreground&lt;/code&gt; are used to set the colours of the chart. The SVGs rendered by the component are &lt;a href=&quot;&quot;&gt;fully styleable with CSS&lt;/a&gt;, but these attributes allow for quick and easy customisation.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;I&#x27;ll keep adding to this gallery as-and-when I create new examples. If you have any ideas for cool things to do with this component, let me know over on Mastodon: &lt;a href=&quot;https://mastodon.social/@tomhazledine&quot;&gt;@thomashazledine@mastodon.social&lt;/a&gt;!&lt;/p&gt;&lt;/blockquote&gt;</content></entry><entry><title>Known Pleasures: SVG line art</title><link href="https://tomhazledine.com/known-pleasures-svg-line-art/"/><updated>2024-03-26T00:00:00Z</updated><id>https://tomhazledine.com/known-pleasures-svg-line-art/</id><content type="html">&lt;p&gt;The cover art of Joy Division&#x27;s debut album, &lt;em&gt;Unknown Pleasures&lt;/em&gt;, is about as good as it gets. It&#x27;s instantly recognisable and a perfect example of how a simple, abstract image can become iconic. And because it&#x27;s both simple and data-driven, it feels like a great candidate for recreating with code.&lt;/p&gt;&lt;figure&gt;&lt;img alt=&quot;The cover art for Unknown Pleasures vinyl&quot; src=&quot;/images/articles/unknown-pleasures-vinyl.jpg&quot;/&gt;&lt;figcaption&gt;Joy Division - Unknown Pleasures ( &lt;a href=&quot;https://factoryrecords.org/factory-records/fact-10-joy-division-unknown-pleasures.php&quot;&gt;FACT 10&lt;/a&gt;, 1979)&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;After all, it&#x27;s just a series of lines, right? And I&#x27;ve already written a lot about &lt;a href=&quot;https://tomhazledine.com/line-graphs-with-react-svg-d3/&quot;&gt;how to draw lines with SVG&lt;/a&gt;. &lt;strong&gt;How hard could it be?&lt;/strong&gt;&lt;/p&gt;&lt;hr/&gt;&lt;h2 id=&quot;step-1-drawing-a-line&quot;&gt;Step 1: drawing a line&lt;/h2&gt;&lt;p&gt;In my post on &lt;a href=&quot;https://tomhazledine.com/line-graphs-with-react-svg-d3/&quot;&gt;line graphs with React, SVG, and D3&lt;/a&gt; I covered how to use &lt;a href=&quot;https://d3js.org/&quot;&gt;D3.js&lt;/a&gt; to convert &quot;real world&quot; data into a format compatible with SVG&#x27;s &lt;code&gt;&amp;lt;path&gt;&lt;/code&gt; element. To recap, the process is as follows:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;#find-the-bounds-of-your-range-and-domain&quot;&gt;Find the bounds of your &quot;range&quot; and &quot;domain&quot;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;#create-a-line-generator-function&quot;&gt;Create a &quot;line generator&quot; function&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;#build-the-svg-markup&quot;&gt;Build the SVG markup&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;find-the-bounds-of-your-range-and-domain&quot;&gt;Find the bounds of your &quot;range&quot; and &quot;domain&quot;&lt;/h3&gt;&lt;p&gt;For both &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt; axes, define the &lt;strong&gt;domain of your data&lt;/strong&gt; (i.e. the minimum and maximum values) and the &lt;strong&gt;range of your graph&lt;/strong&gt; (i.e. the width and height of the SVG canvas). The domain and range are the two things you need to generate a D3 &quot;scale&quot; function.&lt;/p&gt;&lt;p&gt;This example code assumes we&#x27;re creating an SVG canvas that is 100px wide and 100px tall and dataset that is an array of ten random data points ranging from 0 to 10.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; { scaleLinear } &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;d3&quot;&lt;/span&gt;;

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; xScale = &lt;span class=&quot;hljs-title function_&quot;&gt;scaleLinear&lt;/span&gt;()
    .&lt;span class=&quot;hljs-title function_&quot;&gt;domain&lt;/span&gt;([&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;])
    .&lt;span class=&quot;hljs-title function_&quot;&gt;range&lt;/span&gt;([&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;]);

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; yScale = &lt;span class=&quot;hljs-title function_&quot;&gt;scaleLinear&lt;/span&gt;()
    .&lt;span class=&quot;hljs-title function_&quot;&gt;domain&lt;/span&gt;([&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;])
    .&lt;span class=&quot;hljs-title function_&quot;&gt;range&lt;/span&gt;([&lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]);
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;Don&#x27;t forget to flip the Y axis!&lt;/strong&gt; SVG&#x27;s coordinate system has the origin at the top-left corner, whereas most data visualisations have the origin at the bottom-left corner. If you don&#x27;t flip the Y axis ([100, 0] rather than [0,100]), your graph will be upside-down.&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 id=&quot;create-a-line-generator-function&quot;&gt;Create a &quot;line generator&quot; function&lt;/h3&gt;&lt;p&gt;Armed with your &lt;code&gt;xScale&lt;/code&gt; and &lt;code&gt;yScale&lt;/code&gt; functions, you can now create a line-generator function. This is a function that will convert an array of data into a string of &lt;code&gt;M&lt;/code&gt; and &lt;code&gt;L&lt;/code&gt; commands. These strings are &lt;a href=&quot;https://tomhazledine.com/svg-markup#the-basics-of-the-svg-markup-language&quot;&gt;how an SVG defines a line&lt;/a&gt;.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; { line } &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;d3&quot;&lt;/span&gt;;

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; lineGenerator = &lt;span class=&quot;hljs-title function_&quot;&gt;line&lt;/span&gt;()
    &lt;span class=&quot;hljs-comment&quot;&gt;// Here we&#x27;re using the index of the data point as the x-coordinate&lt;/span&gt;
    .&lt;span class=&quot;hljs-title function_&quot;&gt;x&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;_, d&lt;/span&gt;) =&gt;&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;xScale&lt;/span&gt;(d))
    .&lt;span class=&quot;hljs-title function_&quot;&gt;y&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;d&lt;/span&gt; =&gt;&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;yScale&lt;/span&gt;(d));
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;build-the-svg-markup&quot;&gt;Build the SVG markup&lt;/h3&gt;&lt;p&gt;We can then use this &lt;code&gt;getPathData&lt;/code&gt; function to generate the &lt;code&gt;d&lt;/code&gt; attribute of a &lt;code&gt;&amp;lt;path&gt;&lt;/code&gt; element in our SVG:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; data = &lt;span class=&quot;hljs-title function_&quot;&gt;generateRandomBellCurveData&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;40&lt;/span&gt;);
&lt;span class=&quot;hljs-comment&quot;&gt;// [&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;//     4.761029986699451,&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;//     0,&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;//     5.327995603655005,&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;//     7.1660931217039066,&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;//     etc...&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;// ]&lt;/span&gt;

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; path = &lt;span class=&quot;hljs-title function_&quot;&gt;lineGenerator&lt;/span&gt;(data);

&lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(path);
&lt;span class=&quot;hljs-comment&quot;&gt;// &quot;M0,1L12.5,50L25,20L37.5,30L50,35L62.5,70L75,100L87.5,90L100,30&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;Generating &quot;random&quot; data&lt;/strong&gt; I&#x27;ve written a small function to generate &quot;random-ish&quot; data that roughly follows a &quot;normal distribution&quot; (i.e. a bell curve). I won&#x27;t include it here, but you can view my &lt;code&gt;generateRandomBellCurveData()&lt;/code&gt; function &lt;a href=&quot;https://gist.github.com/tomhazledine/ba2ac1c046d0a86ccab09e9dde807871&quot;&gt;in this GitHub Gist&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-svg&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;svg&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;width&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;400&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;height&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;400&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;viewBox&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;0 0 100 100&quot;&lt;/span&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;d&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;M0,1L12.5,50L25,20L37.5,30L50,35L62.5,70L75,100L87.5,90L100,30&quot;&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;path&lt;/span&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;svg&lt;/span&gt;&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;figure&gt;&lt;figcaption&gt;A simple line graph using an SVG &lt;code&gt;&amp;lt;path&gt;&lt;/code&gt; element.&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2 id=&quot;step-2-applying-margins-to-the-graph&quot;&gt;Step 2: applying margins to the graph&lt;/h2&gt;&lt;p&gt;We might have successfully used some data to draw a line in an SVG, but there&#x27;s still a long way to go yet.&lt;/p&gt;&lt;p&gt;One big difference between our simple line and the &lt;em&gt;Unknown Pleasures&lt;/em&gt; cover art is whitespace. &lt;a href=&quot;https://factoryrecords.org/designed-by-peter-saville-chronological.php&quot;&gt;Peter Saville&#x27;s&lt;/a&gt; graphic has lots, and ours has none.&lt;/p&gt;&lt;p&gt;Adding margins and padding to elements with CSS is very straightforward, but in SVG-land things are a bit more complicated. This is because our &lt;code&gt;path&lt;/code&gt; element is defined in terms of absolute coordinates relative to the SVG canvas. If we want to add margins, we then also need to adjust the position of the path element. This can be achieved in a few different ways:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;strong&gt;Translate the path&lt;/strong&gt;: This is the simplest way to move the path around. You can use the &lt;code&gt;transform&lt;/code&gt; attribute to move the path around. For example, &lt;code&gt;transform=&quot;translate(10, 10)&quot;&lt;/code&gt; would move the path 10px to the right and 10px down, allowing us to safely add a 10px margin to the SVG (by making the SVG&#x27;s width and height &lt;em&gt;120px&lt;/em&gt;).&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Use the &lt;code&gt;viewBox&lt;/code&gt; attribute&lt;/strong&gt;: This is a bit more complicated, but allows you to define a &quot;virtual&quot; canvas that is larger than the actual SVG element. If our path is drawn with x/y coordinates between 0 and 100, we could set the &lt;code&gt;viewBox&lt;/code&gt; attribute to &lt;code&gt;&quot;-10 -10 120 120&quot;&lt;/code&gt; to add a 10px margin to all sides of the SVG.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Adjust the path data&lt;/strong&gt;: This is the most complicated option, but also the most flexible. You could adjust the path data itself to add margins. For example, if you wanted to add a 10px margin to the top and left of the SVG, you could add &lt;code&gt;M-10,-10&lt;/code&gt; to the start of the path data or (and this is the approach I favour) you can adjust the &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt; scales to add margins to the data before it&#x27;s converted into a path.&lt;/li&gt;&lt;/ol&gt;&lt;figure&gt;&lt;figcaption&gt;Our line graph with a 100px margin, showing a 100×100 SVG canvas positioned within a viewBox of &lt;code&gt;&quot;-100 -100 300 300&quot;&lt;/code&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2 id=&quot;step-3-stacking-multiple-lines&quot;&gt;Step 3: stacking multiple lines&lt;/h2&gt;&lt;p&gt;The next step is to &quot;stack&quot; multiple lines on top of each other. This is where things start to get a bit more complicated, as we need to generate multiple paths and then layer them on top of each other.&lt;/p&gt;&lt;p&gt;In code-terms, this means working with an array of rows, and then mapping over that array to get our path data.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Create an array of ten items, each of which is an array of 40 points&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; rows = &lt;span class=&quot;hljs-title class_&quot;&gt;Array&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;from&lt;/span&gt;({ &lt;span class=&quot;hljs-attr&quot;&gt;length&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt; }, &lt;span class=&quot;hljs-function&quot;&gt;() =&gt;&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;generateRandomBellCurveData&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;40&lt;/span&gt;));

&lt;span class=&quot;hljs-comment&quot;&gt;// Run each row through the line generator to get the path data&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; paths = rows.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;row&lt;/span&gt; =&gt;&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;lineGenerator&lt;/span&gt;(row));
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;When rendering our SVG, it&#x27;s easy enough to map over the &lt;code&gt;paths&lt;/code&gt; array to generate multiple &lt;code&gt;&amp;lt;path&gt;&lt;/code&gt; elements:&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; for the rest of this article will use &lt;code&gt;JSX&lt;/code&gt; for rendering SVG markup. JSX is the React templating language, but React is not at all required for anything shown in this article. I just find JSX to be a more readable way to write SVG markup.&lt;/p&gt;&lt;/blockquote&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-jsx&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; pathMarkup = lines.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;line,i&lt;/span&gt;) =&gt;&lt;/span&gt; &lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;key&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{i}&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;d&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{line}&lt;/span&gt; /&gt;&lt;/span&gt;&lt;/span&gt;);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;But&lt;/strong&gt; if we do this, we&#x27;d end up with all the lines aligned to the same baseline. Each line would bleed into the others and we&#x27;d be left with a mess.&lt;/p&gt;&lt;figure&gt;&lt;figcaption&gt;All the lines have the same baseline, so they all bleed into one.&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;What we &lt;em&gt;want&lt;/em&gt; is to evenly distribute the lines across the canvas, so that they don&#x27;t overlap. This could be done with a transform on each &lt;code&gt;&amp;lt;path&gt;&lt;/code&gt;, but a more flexible alternative is to let the &lt;code&gt;yScale&lt;/code&gt; function do the heavy lifting.&lt;/p&gt;&lt;p&gt;The trick is to work out the baseline for each row, and then use that to generate a new &lt;code&gt;yScale&lt;/code&gt; function for each row. The baseline can be calculated by dividing the height of the canvas by the number of rows and then multiplying that by the row index, which provides the px value for the bottom of each row. Feeding this into the range of the &lt;code&gt;yScale&lt;/code&gt; in (where we had previously hard-coded &lt;code&gt;100&lt;/code&gt;) will then distribute the lines evenly across the canvas.&lt;/p&gt;&lt;p&gt;Offsetting the lines&#x27; baseline doesn&#x27;t completely solve the issue, however. The lines themselves still are still the same height as the whole canvas. This means each successive line creeps more and more over the top of the graph&#x27;s boundary. This is fixed by constraining the height of the lines, which can be done by setting the &lt;code&gt;yRange&lt;/code&gt; to be a fixed height rather than the full height of the canvas. (For the example code, &lt;code&gt;rowHeight&lt;/code&gt; is set to be &lt;code&gt;20px&lt;/code&gt;.)&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; xScale = &lt;span class=&quot;hljs-title function_&quot;&gt;scaleLinear&lt;/span&gt;()
    .&lt;span class=&quot;hljs-title function_&quot;&gt;domain&lt;/span&gt;([&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, data[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;].&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;])
    .&lt;span class=&quot;hljs-title function_&quot;&gt;range&lt;/span&gt;([&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;]);

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; rowGap = &lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt; / (data.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; rowHeight = &lt;span class=&quot;hljs-number&quot;&gt;20&lt;/span&gt;;

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; rows = data.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;row, i&lt;/span&gt;) =&gt;&lt;/span&gt; {
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; rowBaseline = &lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt; - i * rowGap;
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; yRange = [rowBaseline, rowBaseline - rowHeight];

    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; yScale = &lt;span class=&quot;hljs-title function_&quot;&gt;scaleLinear&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;domain&lt;/span&gt;([&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;]).&lt;span class=&quot;hljs-title function_&quot;&gt;range&lt;/span&gt;(yRange);

    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; lineGenerator = &lt;span class=&quot;hljs-title function_&quot;&gt;line&lt;/span&gt;()
        .&lt;span class=&quot;hljs-title function_&quot;&gt;x&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;_, d&lt;/span&gt;) =&gt;&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;xScale&lt;/span&gt;(d))
        .&lt;span class=&quot;hljs-title function_&quot;&gt;y&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;d&lt;/span&gt; =&gt;&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;yScale&lt;/span&gt;(d));

    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; { &lt;span class=&quot;hljs-attr&quot;&gt;line&lt;/span&gt;: &lt;span class=&quot;hljs-title function_&quot;&gt;lineGenerator&lt;/span&gt;(row), rowBaseline };
});
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&quot;cluster cluster--not-narrow cluster--even cluster--top&quot;&gt;&lt;figure&gt;&lt;figcaption&gt;We can evenly spread the lines vertically in our graph, but then they overflow the edge of the canvas.&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure&gt;&lt;figcaption&gt;By constraining the vertical &quot;range&quot; of each line, they all stay within the bounds of the canvas.&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;&lt;p&gt;There&#x27;s one last thing to be done to complete the effect, and that is to handle the &quot;fill&quot; of the lines. In the original &lt;em&gt;Unknown Pleasures&lt;/em&gt; cover art, the lines are filled in such a way that they obscure each other. This is achieved by using a separate &quot;area&quot; for each line, rather than a single &lt;code&gt;&amp;lt;path&gt;&lt;/code&gt; element.&lt;/p&gt;&lt;p&gt;Instead of running the data through a &quot;line generator&quot; function, we can use a &quot;area generator&quot; function as well. This is similar to the line generator, but instead of just generating a line, it generates a closed path that fills the area between the line and the baseline.&lt;/p&gt;&lt;p&gt;A area generator is created in much the same way as a line generator, but uses D3&#x27;s &lt;code&gt;area&lt;/code&gt; function in place of the &lt;code&gt;line&lt;/code&gt; function. The area generator allows us to define both a &lt;code&gt;y0&lt;/code&gt; and &lt;code&gt;y1&lt;/code&gt; function, which are used to define the top and bottom of the area. So the data (&lt;code&gt;d&lt;/code&gt;) gets passed into &lt;code&gt;y1&lt;/code&gt; and the baseline (&lt;code&gt;0&lt;/code&gt;) gets passed into &lt;code&gt;y0&lt;/code&gt;, giving us a filled area between the line and the baseline.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; areaGenerator = &lt;span class=&quot;hljs-title function_&quot;&gt;area&lt;/span&gt;()
    .&lt;span class=&quot;hljs-title function_&quot;&gt;x&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;_, d&lt;/span&gt;) =&gt;&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;xScale&lt;/span&gt;(d))
    .&lt;span class=&quot;hljs-title function_&quot;&gt;y0&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;() =&gt;&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;yScale&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;))
    .&lt;span class=&quot;hljs-title function_&quot;&gt;y1&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;d&lt;/span&gt; =&gt;&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;yScale&lt;/span&gt;(d));
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Then when the data is mapped over, we can generate both a line and an area for each row.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; rows = data.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;row&lt;/span&gt; =&gt;&lt;/span&gt; {
    &lt;span class=&quot;hljs-comment&quot;&gt;// ...&lt;/span&gt;
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; {
        &lt;span class=&quot;hljs-attr&quot;&gt;line&lt;/span&gt;: &lt;span class=&quot;hljs-title function_&quot;&gt;lineGenerator&lt;/span&gt;(row),
        &lt;span class=&quot;hljs-attr&quot;&gt;area&lt;/span&gt;: &lt;span class=&quot;hljs-title function_&quot;&gt;shapeGenerator&lt;/span&gt;(row)
    };
});
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;And then when rendering the SVG, we can use both the &lt;code&gt;line&lt;/code&gt; and &lt;code&gt;area&lt;/code&gt; strings to render a line and an area for each row.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-jsx&quot;&gt;{
    rows.&lt;span class=&quot;hljs-title function_&quot;&gt;reverse&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;row, i&lt;/span&gt;) =&gt;&lt;/span&gt; (
        &lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;g&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;key&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{i}&lt;/span&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;className&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;area&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;d&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{row.area}&lt;/span&gt; /&gt;&lt;/span&gt;
            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;className&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;line&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;d&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{row.line}&lt;/span&gt; /&gt;&lt;/span&gt;
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;g&lt;/span&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    ));
}
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;Note the &lt;code&gt;.reverse()&lt;/code&gt; added to the data array.&lt;/strong&gt; This is necessary to ensure the lines are drawn in the correct order. Unlike CSS, SVG has no concept of z-index, so source-order is king.&lt;/p&gt;&lt;/blockquote&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.line&lt;/span&gt; {
    fill: none;
    stroke: black;
    stroke-&lt;span class=&quot;hljs-attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;;
}

&lt;span class=&quot;hljs-selector-class&quot;&gt;.area&lt;/span&gt; {
    fill: white;
    stroke: none;
}
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&quot;cluster cluster--not-narrow cluster--even cluster--top&quot;&gt;&lt;figure&gt;&lt;figcaption&gt;Sometimes the lines overlap each other.&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure&gt;&lt;figcaption&gt;Filling the areas under each line hides this.&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure&gt;&lt;figcaption&gt;Matching the fill to the background cleans things up.&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;&lt;h2 id=&quot;step-4-using-real-data&quot;&gt;Step 4: using real data&lt;/h2&gt;&lt;p&gt;So far the chart has being using the pseudo-random data that &lt;code&gt;generateRandomBellCurveData()&lt;/code&gt; spits out. To really recreate the iconic cover art, it would be great to use the actual data that inspired it.&lt;/p&gt;&lt;blockquote&gt;&lt;h3 id=&quot;pulsar-psr-b191921&quot;&gt;Pulsar PSR B1919+21&lt;/h3&gt;&lt;p&gt;The image is a visualisation of the first pulsar ever discovered, &lt;a href=&quot;https://en.wikipedia.org/wiki/PSR_B1919%2B21&quot;&gt;PSR B1919+21&lt;/a&gt;. The data was collected at the Arecibo Observatory in Puerto Rico in 1970, and the image was published in the scientific journal &lt;em&gt;Nature&lt;/em&gt; in 1971. The image shows the radio signal emitted by the pulsar, which is a rapidly rotating neutron star. The signal is a series of evenly spaced pulses, which is why the image looks like a series of peaks and troughs.&lt;/p&gt;&lt;p&gt;How it came to be used in the cover art for &lt;em&gt;Unknown Pleasures&lt;/em&gt; is &lt;a href=&quot;https://www.scientificamerican.com/blog/sa-visual/pop-culture-pulsar-the-science-behind-joy-division-s-unknown-pleasures-album-cover/&quot;&gt;quite the story&lt;/a&gt; and well worth looking into.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;Getting the data into a JavaScript array was a quick task, but plugging it into the graph component required a bit of extra tweaking.&lt;/p&gt;&lt;p&gt;The graph was already calculating the offset for each line based on the number of lines in the data (&lt;code&gt;const rowGap = layout.height / (data.length - 1);&lt;/code&gt;). So even though our original test data had ten rows and the pulsar data has eighty rows, the line-offsets worked nicely without any tweaking.&lt;/p&gt;&lt;p&gt;The same goes for the &lt;code&gt;xScale&lt;/code&gt;, which was already by calculated based on the number of points in each row: &lt;code&gt;.domain([0, data[0].length - 1])&lt;/code&gt;. Another freebie!&lt;/p&gt;&lt;p&gt;The &lt;code&gt;yScale&lt;/code&gt;, however, needed a little attention. That scale was previously hard-coded to account for a minimum data value of &lt;code&gt;0&lt;/code&gt; and a max of &lt;code&gt;100&lt;/code&gt;. To allow for &lt;em&gt;any&lt;/em&gt; data, this needs to be changes to calculate the min and max values of the data and then use those to set the domain of the &lt;code&gt;yScale&lt;/code&gt;.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; dataMax = data.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(
    &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;acc, row&lt;/span&gt;) =&gt;&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;max&lt;/span&gt;(acc, &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;max&lt;/span&gt;(...row)),
    &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;
);

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; dataMin = data.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(
    &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;acc, row&lt;/span&gt;) =&gt;&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;min&lt;/span&gt;(acc, &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;min&lt;/span&gt;(...row)),
    &lt;span class=&quot;hljs-title class_&quot;&gt;Infinity&lt;/span&gt;
);
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;Using pixels in SVGs can be a bit weird.&lt;/strong&gt; SVGs don&#x27;t have an intrinsic unit of measurement, so when you define a width or height in an SVG the default unit is &quot;user units&quot;, which are relative to the &lt;code&gt;viewBox&lt;/code&gt; of the SVG. This means we can style an SVG line with CSS and set it to &lt;code&gt;1px&lt;/code&gt;, but what&#x27;s really being set is &lt;code&gt;1 user unit&lt;/code&gt;, which could be any number of pixels depending on the &lt;code&gt;viewBox&lt;/code&gt; and the outer dimensions of the SVG element. Add a responsive percentage width to the SVG (which I always do) and suddenly the connection between CSS &lt;code&gt;px&lt;/code&gt; and rendered pixels in the final SVG becomes even less clear.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;Owing to the fact there there are so many more rows in the real data than in our test data, the overall scale of the graphic had to be tweaked too. The SVG canvas was being defined as &lt;code&gt;100&lt;/code&gt; which meant that a &quot;1 pixel&quot; width line was being rendered as a 1% width line. With 80 rows to consider, the final image was just a blobby mess. Bumping the scale of the &lt;code&gt;viewBox&lt;/code&gt; up to &lt;code&gt;400&lt;/code&gt; fixed this.&lt;/p&gt;&lt;figure&gt;&lt;figcaption&gt;The final graphic (with captions from the original paper).&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2 id=&quot;bonus-different-data&quot;&gt;Bonus: different data&lt;/h2&gt;&lt;p&gt;Having gone to the effort of making the graph component work with arbitrary data, the next obvious step is to throw other data sets at it and see what happens.&lt;/p&gt;&lt;p&gt;My daily step count (broken down by hour) actually works pretty well in this format.&lt;/p&gt;&lt;p&gt;A lot of the &quot;fun&quot; from these stacked graphs comes from having data that fits a couple of basic requirements:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;It looks best with lines that start low and end low, with a peak in the middle.&lt;/li&gt;&lt;li&gt;The data should be noisy, but not &lt;em&gt;too&lt;/em&gt; noisy. Each line should ideally overlap some of the others while still maintaining the general trend.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;The original Pulsar data is a perfect example of these requirements, but that kind of data is surprisingly hard to find.&lt;/p&gt;&lt;p&gt;I thought weather data would be a great fit for this, and the UK&#x27;s Met Office provides a &lt;a href=&quot;https://climatedataportal.metoffice.gov.uk/&quot;&gt;Climate Data Portal&lt;/a&gt; that lets you download average monthly temperatures for any 2km square in the UK. I grabbed the data for my local area and, well, it doesn&#x27;t quite look as good as I was hoping. The data is just too uniform.&lt;/p&gt;&lt;p&gt;In retrospect, I guess this is to be expected. There isn&#x27;t that much variation in the temperature where I am right now and the temperature a couple of KM in either direction. To get a better looking chart, I should cherry-pick the temperatures from locations further apart.&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;To close the loop on this little experiment, it seemed only fitting to style the pulsar data to look as close to the original Joy Division album cover as possible.&lt;/p&gt;&lt;figure&gt;&lt;figcaption&gt;My best SVG recreation of the cover for &lt;em&gt;Unknown Pleasures&lt;/em&gt; Joy Division, 1979&lt;/figcaption&gt;&lt;/figure&gt;&lt;hr/&gt;&lt;h2 id=&quot;sources&quot;&gt;Sources&lt;/h2&gt;&lt;p&gt;I got a &lt;code&gt;.csv&lt;/code&gt; of the Pulsar data from &lt;a href=&quot;https://gist.github.com/borgar/31c1e476b8e92a11d7e9&quot;&gt;this Gist&lt;/a&gt; by &lt;a href=&quot;https://github.com/borgar&quot;&gt;Borgar&lt;/a&gt;, which I found in &lt;a href=&quot;https://observablehq.com/@d3/psr-b1919-21&quot;&gt;this D3 demo by D3-creator Mike Bostock&lt;/a&gt; which in turn I found via &lt;a href=&quot;https://datawookie.dev/blog/2019/07/recreating-unknown-pleasures-graphic/&quot;&gt;this excellent post that &lt;em&gt;also&lt;/em&gt; recreates the Unknown Pleasures graphic using code&lt;/a&gt;. For what it&#x27;s worth, I only found those posts when looking for the data &lt;strong&gt;after&lt;/strong&gt; I&#x27;d written my code (although a LOT of my D3 knowledge comes from other Observable demos by Bostock).&lt;/p&gt;&lt;p&gt;I learned a lot about the history of the original graphic from &lt;a href=&quot;https://www.scientificamerican.com/blog/sa-visual/pop-culture-pulsar-the-science-behind-joy-division-s-unknown-pleasures-album-cover/&quot;&gt;this fantastic article in Scientific American&lt;/a&gt;, which also contains some great dynamic visualisations that explain how pulsar data is collected and interpreted.&lt;/p&gt;&lt;p&gt;I got the idea to embark on this project by seeing &lt;a href=&quot;https://www.tiktok.com/@scientificamerican/video/7340775819725327658&quot;&gt;this TikTok&lt;/a&gt; which was made by the author of the Scientific American article referenced above, &lt;a href=&quot;https://www.scientificamerican.com/author/jen-christiansen/&quot;&gt;Jen Christiansen&lt;/a&gt;. Thanks, Jen!&lt;/p&gt;</content></entry><entry><title>RSS is Awesome</title><link href="https://tomhazledine.com/rss-is-awesome/"/><updated>2024-02-29T00:00:00Z</updated><id>https://tomhazledine.com/rss-is-awesome/</id><content type="html">&lt;p&gt;RSS is “having a moment” right now, and I’m 100% here for it. Well, maybe folks aren’t explicitly excited about RSS specifically, but an independent and open Web (a Weird Web, even?) is being talked about a lot. Burned by recent trends in &lt;em&gt;[looks around]&lt;/em&gt; &lt;strong&gt;everything&lt;/strong&gt;, we’ve realised that having some degree of control over the way our content is distributed is actually quite useful.&lt;/p&gt;&lt;h2 id=&quot;we-almost-lost-it&quot;&gt;We almost lost it&lt;/h2&gt;&lt;p&gt;When I wrote &lt;a href=&quot;https://tomhazledine.com/adding-rss&quot;&gt;a post about RSS in 2021&lt;/a&gt; it felt so off-trend that I added a “yes, it’s still a thing” caveat right in the post’s title. And honestly, I wasn’t super confident that it &lt;em&gt;was&lt;/em&gt; still “a thing”. So it’s massive relief to see that something I care a lot about is &lt;em&gt;growing&lt;/em&gt; in relevance.&lt;/p&gt;&lt;p&gt;In short, blogs are back! And with the demise of algorithmic feeds (or at least their massively reduced reach) we’re all looking for reliable way to &lt;em&gt;find&lt;/em&gt; all this content. And it turns out RSS was pretty much the best tool for the job all along.&lt;/p&gt;&lt;h2 id=&quot;skin-in-the-game&quot;&gt;Skin in the game&lt;/h2&gt;&lt;p&gt;A principle I’ve been trying to live by lately is that &lt;strong&gt;if I think something’s important I should be demonstrably involved&lt;/strong&gt;. In some form or other I should have some skin in the game. To paraphrase a saying tied to musicians’ muscle memory: it’s not just enough to know something “in the head” - if I care about it I should know it “in the hand” too.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;I think podcasting is simply the best medium, &lt;a href=&quot;https://aqoc.dev&quot;&gt;so I’ve got a podcast&lt;/a&gt;&lt;/li&gt;&lt;li&gt;I think YouTube is an amazing outlet for the world’s creativity and knowledge, &lt;a href=&quot;https://www.youtube.com/tomhazledine&quot;&gt;so I’ve got a YouTube channel to share some things I’m super-nerdy about&lt;/a&gt;&lt;/li&gt;&lt;li&gt;I’m excited about the potential of Web Components (maybe we don’t all need React after all?!), so I’ve &lt;a href=&quot;https://picobel.tomhazledine.com/web-component/&quot;&gt;released one of my open-source tools as a Web Component&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;My projects are not setting the world alight, but I’m &lt;strong&gt;involved&lt;/strong&gt;. If podcasting or YouTube come up in conversation, I can talk from experience. I can legitimately say &lt;a href=&quot;https://youtu.be/6xG4oFny2Pk?t=46&quot;&gt;“I was there”&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;So how does that apply to RSS? Well, for starters I’ve been blogging in some form or other since 2008 so I’ve definitely put my fair share of RSS feeds out into the world. But that feels a bit &lt;em&gt;passive&lt;/em&gt;. If I truly want to have some skin in the RSS game, I need to be contributing. I need to give something back, something that helps other folks (not just burdening them with something more of mine to read).&lt;/p&gt;&lt;p&gt;So I’ve built an RSS reader.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;Err, don’t we have those already?&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;True, there are loads of RSS reader apps out there. And some of them are &lt;a href=&quot;https://netnewswire.com/&quot;&gt;really good&lt;/a&gt;, too. But none are &lt;em&gt;exactly&lt;/em&gt; what I’m looking for. And what’s the use of being a developer if you can’t build things you like?&lt;/p&gt;&lt;h2 id=&quot;building-a-thing-is-the-best-way-to-learn-a-thing&quot;&gt;Building a thing is the best way to learn a thing.&lt;/h2&gt;&lt;p&gt;In classic &lt;em&gt;“how hard can it be?”&lt;/em&gt; tradition, I learned &lt;strong&gt;a lot&lt;/strong&gt; while building my app.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;What we colloquially think of as RSS is actually a quite fragmented ecosystem with many flavours (RSS/Atom/JSON/etc.) that all have subtly different specifications. So writing a feed parser that can handle any feed a user might throw at it needs to account for the fact that YOU CANNOT ASSUME ANY “REQUIRED” FIELDS WILL BE PRESENT.&lt;/li&gt;&lt;li&gt;A properly useful feed reader consumes A LOT of data. I naively assumed that because all I’d be storing would be text content, the payloads would be small. But even with a limited set of test feeds, my local state soon hit tens of megabytes.&lt;/li&gt;&lt;li&gt;Everyone has a different set of priorities for what makes a “good” feed reader experience. Some people want notifications and statuses up the wazoo, some folks want the most minimal interface possible.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;And because RSS has been around for so long, there are a lot of “nice to have” features in pretty much every reader:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Auto-discovery of feed URLs.&lt;/strong&gt; Being able to submit a plain ol’ URL for a site and have the reader-app find the feed URLs is table-stakes at this point.&lt;/li&gt;&lt;li&gt;Once you open the door to auto-discovery of feed URLs, you need your UI to be able to &lt;strong&gt;handle sites that have multiple different feeds&lt;/strong&gt;.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Resolving relative URLs within feed content&lt;/strong&gt; (for links, images, etc.). Despite the best practice of making all URLs in feeds absolute, comparatively few feeds actually implement this (so dead links and missing images are super common when browsing a naively-parsed feed).&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Universal import and export via OPML file&lt;/strong&gt;. OPML is a markup format that allows groups of feed URLs (or podcasts) to be exported and imported into pretty much any mainstream app that deals with RSS.&lt;/li&gt;&lt;/ul&gt;&lt;h2 id=&quot;prioritising-the-features-i-care-most-about&quot;&gt;Prioritising the features I care most about&lt;/h2&gt;&lt;p&gt;So building my RSS app was a useful exercise solely from a learning perspective, but I was also able to throw in some features purely because they’re what &lt;em&gt;I’m&lt;/em&gt; interested in 😆&lt;/p&gt;&lt;h3 id=&quot;an-almost-serverless-app&quot;&gt;An (almost) serverless app.&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;No accounts.&lt;/strong&gt; I (currently) have very little interest in creating a &lt;a href=&quot;https://en.wikipedia.org/wiki/Create,_read,_update_and_delete&quot;&gt;CRUD&lt;/a&gt; app or in dealing with all the user-management and server-side shenanigans that come with such an app, so from the get-go my USP for this project was “no accounts”. Users can just hit the homepage and get started using the reader functionality.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Local storage.&lt;/strong&gt; So if I’m not running a server and database, where does all the feed content go? The add needs some persistence of data, so naturally the browser’s “local storage” was the first thing I tried. Plain old &lt;code&gt;localStorage&lt;/code&gt; turned out to be too small for all the data a feed reader needs to store, so I ended up using &lt;code&gt;localStorage&lt;/code&gt;&#x27;s beefier buddy, &lt;code&gt;IndexedDB&lt;/code&gt; (there&#x27;s an entire database platform built right into the browser. Who knew?!). &lt;/li&gt;&lt;li&gt;&lt;strong&gt;Static hosting.&lt;/strong&gt; Having no backend means that deploying my reader app is miraculously simple, especially with static hosting platforms like Netlify.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Edge functions.&lt;/strong&gt; When I said the app was static and serverless, I lied. Thanks to (perfectly sensible and secure) CORS restrictions, client-side JavaScript can&#x27;t just go around downloading content from arbitrary URLs willy nilly. And reading content from arbitrary URLs is pretty much the one key feature of an RSS reader. To get around this, the &lt;em&gt;&quot;read the content of the URL&quot;&lt;/em&gt; part of my reader app lives on a Netlify &quot;edge function&quot;. This is a simple Node.js function that accepts a feed URL, reads it, and returns the data to the client-side JS.&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;the-reading-experience-i-want&quot;&gt;The reading experience I want.&lt;/h3&gt;&lt;p&gt;Another big win from a selfish standpoint is that by building my own feed reader app I get to craft whatever esoteric and bespoke reading experience I want.&lt;/p&gt;&lt;p&gt;I&#x27;ve written before about &lt;a href=&quot;https://tomhazledine.com/html-doesnt-need-any-styling/&quot;&gt;how little styling it takes to make vanilla HTML an excellent way to read content&lt;/a&gt;, but I do like to put my own spin on things. Alongside basic typographic best-practices (like sensible line-lengths, line-heights, and font sizes) I appreciate a well-crafted &lt;code&gt;&amp;lt;hr&gt;&lt;/code&gt; element and a confidently opinionated &lt;code&gt;&amp;lt;blockquote&gt;&lt;/code&gt;.&lt;/p&gt;&lt;p&gt;And then there&#x27;s the &quot;reader app&quot; specifics around feed management. Can the feeds be organised in groups? Can you drag-and-drop from one group to another? Can you fine tune your &quot;unread&quot; and &quot;new&quot; notifications?&lt;/p&gt;&lt;p&gt;Add to that my (perhaps unusual) preference for monospaced typefaces and loud accent colours in both light and dark themes, my ideal reading experience isn&#x27;t something I can realistically expect anyone else to create for me.&lt;/p&gt;&lt;h2 id=&quot;you-can-use-it-too&quot;&gt;You can use it too&lt;/h2&gt;&lt;p&gt;So now I’ve sung my reader app’s praises, where can you go to actually use it? Well, my final flourish was to find a domain name I thought summed up how I felt about the whole experience:&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://rssisawesome.com&quot;&gt;rssisawesome.com&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;</content></entry><entry><title>So long, and thanks for all the Sass</title><link href="https://tomhazledine.com/so-long-and-thanks-for-all-the-sass/"/><updated>2024-01-29T00:00:00Z</updated><id>https://tomhazledine.com/so-long-and-thanks-for-all-the-sass/</id><content type="html">&lt;p&gt;A strange thing just happened. I was starting a new web project and setting up my build pipeline (and yes, I&#x27;m the kind of nerd who enjoys that kind of thing), and I &lt;strong&gt;didn&#x27;t&lt;/strong&gt; import my boilerplate &lt;code&gt;.scss&lt;/code&gt; templates. This is probably the first time I&#x27;ve not started a project by importing Sass in, oh, about ten years.&lt;/p&gt;&lt;nav class=&quot;toc&quot;&gt;&lt;h2 id=&quot;in-this-article&quot;&gt;In this article&lt;/h2&gt;&lt;ol&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#what-is-sassscss-and-why-did-i-need-it-in-the-first-place&quot;&gt;What is Sass/SCSS and why did I need it in the first place? &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#why-dont-i-need-to-use-sass-now&quot;&gt;Why don&#x27;t I need to use Sass now? &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#what-did-i-need-to-change-and-refactor&quot;&gt;What did I need to change and refactor? &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;ol class=&quot;stack--small&quot;&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#comments&quot;&gt;Comments &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#variables&quot;&gt;Variables &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#breakpoints-mixin&quot;&gt;Breakpoints mixin &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#imports-and-partials&quot;&gt;Imports and partials &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#nesting&quot;&gt;Nesting &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#colour-functions&quot;&gt;Colour functions &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#maybe-dont-just-ship-it-though&quot;&gt;Maybe don’t just ship it, though... &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;ol class=&quot;stack--small&quot;&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#its-probably-still-worth-bundling-your-assets&quot;&gt;It’s probably still worth bundling your assets &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#and-while-youre-at-it-why-not-minify-the-code-as-well&quot;&gt;And while you’re at it, why not minify the code as well &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#my-esbuild-mvp-config-for-bundling-and-minifiying-css-files&quot;&gt;My esbuild “MVP” config for bundling and minifiying CSS files &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#what-have-i-learnt&quot;&gt;What have I learnt? &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/nav&gt;&lt;h2 id=&quot;what-is-sassscss-and-why-did-i-need-it-in-the-first-place&quot;&gt;What is Sass/SCSS and why did I need it in the first place?&lt;/h2&gt;&lt;p&gt;CSS is how I got into &quot;programming&quot; in the first place (&lt;a href=&quot;https://www.codecademy.com/resources/blog/myspace-and-the-coding-legacy/&quot;&gt;thank you, MySpace!&lt;/a&gt;), and I&#x27;ve always loved doing &lt;a href=&quot;https://codepen.io/tomhazledine/full/RwxeVw&quot;&gt;fun&lt;/a&gt; and &lt;a href=&quot;https://codepen.io/tomhazledine/full/GodQxW&quot;&gt;weird&lt;/a&gt; and &lt;a href=&quot;https://codepen.io/tomhazledine/full/VKvNJg&quot;&gt;over-engineered&lt;/a&gt; things with CSS. But a big part of what made me confident that CSS was a professional tool I could build a career around was being able to enhance my workflow with &quot;pre-processing&quot;.&lt;/p&gt;&lt;p&gt;CSS was always powerful, but it came with quirks and edge-cases and a lot of tiny papercuts. Using a preprocesser took a lot of that pain away and made the developer experience delightful. &lt;strong&gt;&lt;a href=&quot;https://sass-lang.com/&quot;&gt;Sass&lt;/a&gt; helped me fall in love with frontend development.&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;Simply put, Sass was a tool that let me write the CSS I &lt;em&gt;wanted&lt;/em&gt; to write and would then transform it into a &quot;proper&quot; stylesheet that any web browser could understand. Rather than writing &lt;code&gt;styles.css&lt;/code&gt;, I&#x27;d name my file &lt;code&gt;styles.scss&lt;/code&gt; and get instant access to all sorts of fancy extra features.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;Side note:&lt;/strong&gt; &lt;code&gt;SCSS&lt;/code&gt; was the Sass syntax I always preferred, because it more closely resembled vanilla CSS in its formatting - all CSS is valid SCSS, whereas the more uncommon &lt;code&gt;.sass&lt;/code&gt; syntax removed braces and semicolons.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;Using Sass meant I could use variables for colours and other often-repeated values. I could use logic and perform calculations and write &quot;mixins&quot; that meant I could reuse blocks of functionality without repeating myself too much. And I could nest selectors and break my code into smaller files that were easier to read and maintain.&lt;/p&gt;&lt;p&gt;So much of that sounds trivial nowadays, but back in 2012 when I was first learning about these concepts it felt revolutionary. I&#x27;d already been tinkering with CSS for years at that point, but learning Sass was the first time I ever felt more like a &quot;programmer&quot; than a &quot;designer&quot;.&lt;/p&gt;&lt;h2 id=&quot;why-dont-i-need-to-use-sass-now&quot;&gt;Why don&#x27;t I need to use Sass now?&lt;/h2&gt;&lt;p&gt;Over the years my use of Sass evolved to the point where I&#x27;d built up a solid &quot;starter kit&quot; of Sass conventions and tricks that I found useful in almost every project. Rather than revisiting a load of decisions and choices with every new project, I could get to &quot;meaningful work&quot; much faster. I&#x27;d update the starter kit periodically as I learnt new things or discovered new ways to tackle old problems. But, as is often the case with foundational things that become part of your muscle memory, I tended to be a bit slow in &lt;em&gt;removing&lt;/em&gt; deprecated or redundant parts. It &quot;just worked&quot; so why invest time in changing it too much?&lt;/p&gt;&lt;p&gt;In the early 2010s it felt like vanilla CSS moved at a glacially slow pace. After the influx of new features in CSS3, things took a long time to trickle out to all browsers and supporting &quot;legacy&quot; browsers was a big deal. But thankfully things are different now. The switch to &quot;evergreen&quot; browsers (ones that automatically update without their users having to do anything) was a massive step forward, as were the introduction of features like custom properties (a.k.a. variables) and grid systems and imports. &lt;strong&gt;CSS is great now, and we can pretty much use all the fun stuff everywhere!&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;I could probably have dropped my Sass starter-kit a few years ago, and a lot of my work projects have been Sass-free for even longer. But this week was the first time I started a new side project and actively avoided adding Sass. Rather than blindly importing the starter-kit just as I always had done before, I instead refactored the whole thing to use vanilla CSS.&lt;/p&gt;&lt;h2 id=&quot;what-did-i-need-to-change-and-refactor&quot;&gt;What did I need to change and refactor?&lt;/h2&gt;&lt;p&gt;The Sass-to-CSS refactor was delightfully straightforward, but it wasn&#x27;t just a case of renaming the file extensions.&lt;/p&gt;&lt;h3 id=&quot;comments&quot;&gt;Comments&lt;/h3&gt;&lt;p&gt;The first big find-and-replace job was to tackle code comments. In Sass you can use a double forward slash to mark any following text on the line as a comment just like in JavaScript: &lt;code&gt;// text&lt;/code&gt;. But in vanilla CSS you can only use &lt;code&gt;/* text */&lt;/code&gt;. Crucially, the vanilla version requires the closing &lt;code&gt;*/&lt;/code&gt; at the end of the comment. Honestly this might be the biggest thing I miss from Sass, and I was surprised by how much the closing-tag requirement annoyed me. But on the plus side it&#x27;s encouraging me to be more diligent about removing lines I&#x27;d commented-out &quot;temporarily&quot; (and which had inevitably remained in my code for years).&lt;/p&gt;&lt;h3 id=&quot;variables&quot;&gt;Variables&lt;/h3&gt;&lt;p&gt;In Sass a variable is defined with the &lt;code&gt;$name: value;&lt;/code&gt; syntax. 10 years ago this was an absolute game changer, but vanilla CSS has had &quot;custom properties&quot; for years now. Because custom properties are part of the vanilla spec, they can be altered and scoped at run-time, which actually makes them &lt;em&gt;more&lt;/em&gt; powerful than Sass variables.&lt;/p&gt;&lt;p&gt;There is a case to be made that complex calculations using variables are better done in Sass because all the work happens at build-time (whereas custom properties are worked out by browsers on the fly when the code is run), but in the vast majority of use cases (and, in fact, in &lt;em&gt;all&lt;/em&gt; of mine) CSS custom properties are a better choice.&lt;/p&gt;&lt;p&gt;Aside from having to add a &quot;scope&quot; to the variable declarations (Sass vars can be defined anywhere and everywhere within a SCSS file, whereas CSS custom properties need to be defined within a selector) this was a simple refactor. In fact, this is a change I made a long time ago (back when &lt;a href=&quot;https://tomhazledine.com/dark-mode&quot;&gt;&quot;dark mode&quot;&lt;/a&gt; became a common requirement). Since then, all my colour and type vars have been custom properties, and this recent refactor of my starter kit caught a few extra spacing variables that I had forgotten to convert.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;$colour-red&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;#ff4136&lt;/span&gt;;

&lt;span class=&quot;hljs-selector-class&quot;&gt;.foo&lt;/span&gt; {
    &lt;span class=&quot;hljs-attribute&quot;&gt;color&lt;/span&gt;: &lt;span class=&quot;hljs-variable&quot;&gt;$colour-red&lt;/span&gt;;
}
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:root&lt;/span&gt; {
    &lt;span class=&quot;hljs-attr&quot;&gt;--colour-red&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;#ff4136&lt;/span&gt;;
}

&lt;span class=&quot;hljs-selector-class&quot;&gt;.foo&lt;/span&gt; {
    &lt;span class=&quot;hljs-attribute&quot;&gt;color&lt;/span&gt;: &lt;span class=&quot;hljs-built_in&quot;&gt;var&lt;/span&gt;(--colour-red);
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;breakpoints-mixin&quot;&gt;Breakpoints mixin&lt;/h3&gt;&lt;p&gt;Early in my Sass days I adopted a breakpoint &quot;mixin&quot; strategy for standardising my responsive breakpoints. A mixin is a reusable block of code that can be included (or &quot;mixed in&quot;) throughout a stylesheet, so rather than YOLO&#x27;ing a new media query every time I needed one I could use my &lt;code&gt;bp($size)&lt;/code&gt; mixin to target specific breakpoints.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-scss&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// My lengthly (and now completely redundant) breakpoint mixin:&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;@mixin&lt;/span&gt; bp(&lt;span class=&quot;hljs-variable&quot;&gt;$point&lt;/span&gt;) {
    &lt;span class=&quot;hljs-comment&quot;&gt;// &quot;min-width&quot; breakpoints (screens getting bigger)&lt;/span&gt;
    &lt;span class=&quot;hljs-keyword&quot;&gt;@if&lt;/span&gt; &lt;span class=&quot;hljs-variable&quot;&gt;$point&lt;/span&gt; == u1 {
        &lt;span class=&quot;hljs-keyword&quot;&gt;@media&lt;/span&gt; (&lt;span class=&quot;hljs-attribute&quot;&gt;min-width&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;960px&lt;/span&gt;) {
            &lt;span class=&quot;hljs-keyword&quot;&gt;@content&lt;/span&gt;;
        }
    } &lt;span class=&quot;hljs-keyword&quot;&gt;@else&lt;/span&gt; if &lt;span class=&quot;hljs-variable&quot;&gt;$point&lt;/span&gt; == u2 {
        &lt;span class=&quot;hljs-keyword&quot;&gt;@media&lt;/span&gt; (&lt;span class=&quot;hljs-attribute&quot;&gt;min-width&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1200px&lt;/span&gt;) {
            &lt;span class=&quot;hljs-keyword&quot;&gt;@content&lt;/span&gt;;
        }
    } &lt;span class=&quot;hljs-keyword&quot;&gt;@else&lt;/span&gt; if &lt;span class=&quot;hljs-variable&quot;&gt;$point&lt;/span&gt; == u3 {
        &lt;span class=&quot;hljs-comment&quot;&gt;// etc...&lt;/span&gt;
    }
    &lt;span class=&quot;hljs-comment&quot;&gt;// &quot;max-width&quot; breakpoints (screens getting smaller)&lt;/span&gt;
    &lt;span class=&quot;hljs-keyword&quot;&gt;@else&lt;/span&gt; if &lt;span class=&quot;hljs-variable&quot;&gt;$point&lt;/span&gt; == d1 {
        &lt;span class=&quot;hljs-keyword&quot;&gt;@media&lt;/span&gt; (&lt;span class=&quot;hljs-attribute&quot;&gt;max-width&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1000px&lt;/span&gt;) {
            &lt;span class=&quot;hljs-keyword&quot;&gt;@content&lt;/span&gt;;
        }
    } &lt;span class=&quot;hljs-keyword&quot;&gt;@else&lt;/span&gt; if &lt;span class=&quot;hljs-variable&quot;&gt;$point&lt;/span&gt; == d2 {
        &lt;span class=&quot;hljs-comment&quot;&gt;// etc...&lt;/span&gt;
    }
}

&lt;span class=&quot;hljs-comment&quot;&gt;// The mixin in use:&lt;/span&gt;
&lt;span class=&quot;hljs-selector-class&quot;&gt;.related-llm-icon&lt;/span&gt; {
    &lt;span class=&quot;hljs-attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;80%&lt;/span&gt;;
    &lt;span class=&quot;hljs-keyword&quot;&gt;@include&lt;/span&gt; bp(u2) {
        &lt;span class=&quot;hljs-attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;50%&lt;/span&gt;;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;At first glance, this seems like an ideal use for custom properties. At the expence of a few extra characters (i.e. writing a full &lt;code&gt;@media (min-width...&lt;/code&gt; statement) I could have pretty much the same functionallity as with the original mixin. &lt;em&gt;(Beware - this is a trap!)&lt;/em&gt;&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;/* Breakpoint variables: */&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;/* &lt;span class=&quot;hljs-doctag&quot;&gt;Note:&lt;/span&gt; THIS DOES NOT WORK! */&lt;/span&gt;
&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:root&lt;/span&gt; {
    &lt;span class=&quot;hljs-attr&quot;&gt;--breakpoint-1&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;960px&lt;/span&gt;;
    &lt;span class=&quot;hljs-attr&quot;&gt;--breakpoint-2&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1200px&lt;/span&gt;
}

&lt;span class=&quot;hljs-comment&quot;&gt;/* Using a breakpoint: */&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;/* &lt;span class=&quot;hljs-doctag&quot;&gt;Note:&lt;/span&gt; THIS DOES NOT WORK! */&lt;/span&gt;
&lt;span class=&quot;hljs-selector-class&quot;&gt;.responsive-thing&lt;/span&gt; {
    &lt;span class=&quot;hljs-attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;80%&lt;/span&gt;;
    &lt;span class=&quot;hljs-keyword&quot;&gt;@media&lt;/span&gt; (&lt;span class=&quot;hljs-attribute&quot;&gt;min-width&lt;/span&gt;: var(--breakpoint-&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;)) {
        &lt;span class=&quot;hljs-attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;50%&lt;/span&gt;;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;&lt;p&gt;⚠️ I was totally wrong about this! You &lt;strong&gt;cannot&lt;/strong&gt; use custom properties in media queries. I spent way longer than I&#x27;d care to admit debugging why my media queries weren&#x27;t being applied.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;At the time of writing, I haven&#x27;t cracked this issue. I&#x27;d love to be able to set my breakpoint values in a single place without having to resort to any pre- or post-processing, but for now I&#x27;m back to copy/pasting good ol&#x27; Magic Numbers.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.responsive-thing&lt;/span&gt; {
    &lt;span class=&quot;hljs-attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;80%&lt;/span&gt;;
    &lt;span class=&quot;hljs-keyword&quot;&gt;@media&lt;/span&gt; (&lt;span class=&quot;hljs-attribute&quot;&gt;min-width&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1200px&lt;/span&gt;) {
        &lt;span class=&quot;hljs-attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;50%&lt;/span&gt;;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;imports-and-partials&quot;&gt;Imports and partials&lt;/h3&gt;&lt;p&gt;I was expecting some difficulty when restructuring my Sass partials into vanilla CSS files, but it was actually the easiest part of the whole process. Vanilla CSS&#x27;s &lt;code&gt;@import&lt;/code&gt; syntax is identical to that of Sass, so all I needed to do was add the &lt;code&gt;.css&lt;/code&gt; file extension to each import path.&lt;/p&gt;&lt;p&gt;Importing lots of partials into a single production file was a &quot;big win&quot; when I switched from vanilla to Sass, but looking back at the &lt;a href=&quot;https://caniuse.com/?search=%40import&quot;&gt;caniuse compatibility table for &lt;code&gt;@import&lt;/code&gt;&lt;/a&gt; makes me wonder why I thought I needed Sass for this. I don&#x27;t regret my choice, as I think build-time bundling is &lt;em&gt;still&lt;/em&gt; a good idea (see my &lt;a href=&quot;#its-probably-still-worth-bundling-your-assets&quot;&gt;later section about bundling&lt;/a&gt;) and back in 2012 my Sass pipeline was the only way I knew how to do that kind of thing. Thankfully now (as we&#x27;ll see in a few paragraphs) there are much simpler ways to bundle and minify your CSS.&lt;/p&gt;&lt;h3 id=&quot;nesting&quot;&gt;Nesting&lt;/h3&gt;&lt;p&gt;The ability to nest selectors in Sass was a much bigger deal for me when I started than it is now. Back then, the idea of nesting selectors aligned with my mental model for structuring my style rules. Over time, that mental model has shifted; first to limiting nesting to 2 or 3 levels deep, and then with my adoption of BEM it pretty much disappeared completely.&lt;/p&gt;&lt;p&gt;If you&#x27;d asked me last week, I&#x27;d have said I hardly ever nest selectors at all anymore. That said, it was interesting to see during this latest refactor exactly how much nesting I still had in my starter kit. Not loads, but enough that I had to spend a bit of time copy/pasting root classes onto the start of selectors. None of this substantially changed the structure of my stylesheets, but maybe a little bit of nesting &lt;em&gt;does&lt;/em&gt; still fit with how I think about CSS. With that in mind, I might be open to a future where I set up the tooling to reintroduce nesting into my workflow.&lt;/p&gt;&lt;h3 id=&quot;colour-functions&quot;&gt;Colour functions&lt;/h3&gt;&lt;p&gt;Sass has some build-in functions for manipulating colours, and I used them a lot. The most common ones I used were &lt;code&gt;darken()&lt;/code&gt; and lighten, which would take a colour (hex-code, string name, whatever you were using would work) and make it darker or lighter by the specified amount. &lt;code&gt;darken($colour, 20%)&lt;/code&gt; was my go-to way to set the colours for hover states and dropshadows and meant I didn&#x27;t have to manually calculate the new colour values.&lt;/p&gt;&lt;p&gt;I &lt;strong&gt;do&lt;/strong&gt; miss the interoperability of colour formats in Sass (being able to mix and match &lt;code&gt;#ff4136&lt;/code&gt; and &lt;code&gt;red&lt;/code&gt; and &lt;code&gt;rgb(255, 65, 54)&lt;/code&gt; within the same context was great), but I&#x27;ve gradually retrained myself to simply put in a bit more work when defining my colour variables. In places where I would have used &lt;code&gt;darken()&lt;/code&gt; or &lt;code&gt;lighten()&lt;/code&gt; I now use &lt;code&gt;hsl()&lt;/code&gt;, where the &quot;lightness&quot; value of the hue/saturation/lightness format behaves just the same as using a percentage value in &lt;code&gt;darken&lt;/code&gt; or &lt;code&gt;lighten&lt;/code&gt;. And with tools like Copilot on hand to do the conversion from hex to hsl for me, it&#x27;s not even that much extra work.&lt;/p&gt;&lt;h2 id=&quot;maybe-dont-just-ship-it-though&quot;&gt;Maybe don’t just ship it, though...&lt;/h2&gt;&lt;p&gt;Despite the fact that you &lt;em&gt;can&lt;/em&gt; responsibly ship un-processed CSS files with your project, for any large (normal?) sized project you’d be leaving money on the table if you didn’t put &lt;em&gt;some&lt;/em&gt; effort into optimisation.&lt;/p&gt;&lt;h3 id=&quot;its-probably-still-worth-bundling-your-assets&quot;&gt;It’s probably still worth bundling your assets&lt;/h3&gt;&lt;p&gt;If you’re not bundling your code, every &lt;code&gt;@import&lt;/code&gt; statement means the browser has to make another request. Bundling (a.k.a. smushing all your code together into one &lt;a href=&quot;https://knowyourmeme.com/memes/big-chungus&quot;&gt;Big Chungus&lt;/a&gt; of a file) means the browser needs to make fewer requests to your server in order to render your page, so in most cases “fewer requests” means “faster page load”.&lt;/p&gt;&lt;p&gt;Obviously part of the joy of switching to a mostly-vanilla workflow is that you don’t have to faff about with build tools anymore, so adding a bundling step &lt;strong&gt;is&lt;/strong&gt; adding complexity to your project. But the options are so much simpler, quicker, and easier to setup than they were ten years ago.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;I recommend esbuild for your bundling/post-processing tasks, but I &lt;strong&gt;strongly&lt;/strong&gt; believe that if you’re already using another tool (for your JavaScript, or images, or whatever) then you should add your stylesheet processing into &lt;em&gt;that&lt;/em&gt; tool rather than spend ages refactoring.&lt;/p&gt;&lt;p&gt;Vanilla CSS optimisation and processing is table-stakes for tools like &lt;a href=&quot;https://webpack.js.org/&quot;&gt;webpack&lt;/a&gt; and &lt;a href=&quot;https://parceljs.org/&quot;&gt;Parcel&lt;/a&gt; and &lt;a href=&quot;https://vitejs.dev/&quot;&gt;Vite&lt;/a&gt; and &lt;a href=&quot;https://www.snowpack.dev/&quot;&gt;Snowpack&lt;/a&gt; and all the rest... Whichever you choose, you’ll be fine.&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 id=&quot;and-while-youre-at-it-why-not-minify-the-code-as-well&quot;&gt;And while you’re at it, why not minify the code as well&lt;/h3&gt;&lt;p&gt;If you’ve gone to the effort of bundling, it’s generally a trivial extra step to add minification to your build as well. Minification reduces the file size of your CSS by eliminating unnecessary characters (whitespace, line breaks, comments, etc.) without altering the functionality.&lt;/p&gt;&lt;p&gt;Some unminified CSS:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;/* Main container style */&lt;/span&gt;
&lt;span class=&quot;hljs-selector-class&quot;&gt;.container&lt;/span&gt; {
    &lt;span class=&quot;hljs-attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;80%&lt;/span&gt;;
    &lt;span class=&quot;hljs-attribute&quot;&gt;margin&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; auto;
    &lt;span class=&quot;hljs-attribute&quot;&gt;padding&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;20px&lt;/span&gt;;
}

&lt;span class=&quot;hljs-comment&quot;&gt;/* Header style */&lt;/span&gt;
&lt;span class=&quot;hljs-selector-class&quot;&gt;.header&lt;/span&gt; {
    &lt;span class=&quot;hljs-attribute&quot;&gt;background-color&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;#f3f3f3&lt;/span&gt;;
    &lt;span class=&quot;hljs-attribute&quot;&gt;padding&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;10px&lt;/span&gt;;
    &lt;span class=&quot;hljs-attribute&quot;&gt;font-size&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;24px&lt;/span&gt;;
    &lt;span class=&quot;hljs-attribute&quot;&gt;border&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1px&lt;/span&gt; solid &lt;span class=&quot;hljs-number&quot;&gt;#d1d1d1&lt;/span&gt;;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The same code, after being minified *(note that as far as the computers are concerned, &lt;a href=&quot;https://knowyourmeme.com/memes/theyre-the-same-picture&quot;&gt;they’re the same picture&lt;/a&gt;):&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-css&quot;&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.container&lt;/span&gt;{&lt;span class=&quot;hljs-attribute&quot;&gt;width&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;80%&lt;/span&gt;;&lt;span class=&quot;hljs-attribute&quot;&gt;margin&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; auto;&lt;span class=&quot;hljs-attribute&quot;&gt;padding&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;20px&lt;/span&gt;}&lt;span class=&quot;hljs-selector-class&quot;&gt;.header&lt;/span&gt;{&lt;span class=&quot;hljs-attribute&quot;&gt;background-color&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;#f3f3f3&lt;/span&gt;;&lt;span class=&quot;hljs-attribute&quot;&gt;padding&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;10px&lt;/span&gt;;&lt;span class=&quot;hljs-attribute&quot;&gt;font-size&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;24px&lt;/span&gt;;&lt;span class=&quot;hljs-attribute&quot;&gt;border&lt;/span&gt;:&lt;span class=&quot;hljs-number&quot;&gt;1px&lt;/span&gt; solid &lt;span class=&quot;hljs-number&quot;&gt;#d1d1d1&lt;/span&gt;}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;my-esbuild-mvp-config-for-bundling-and-minifiying-css-files&quot;&gt;My esbuild “MVP” config for bundling and minifiying CSS files&lt;/h3&gt;&lt;p&gt;My setup uses &lt;a href=&quot;https://esbuild.github.io/&quot;&gt;esbuild&lt;/a&gt;, and compared to my previous pipelines is hilariously simple (and replaces ~140 lines of webpack config or ~200 of &lt;code&gt;gulpfile.js&lt;/code&gt; if you’re feeling &lt;em&gt;really&lt;/em&gt; nostalgic).&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// build.js&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; { build } &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;esbuild&quot;&lt;/span&gt;;

&lt;span class=&quot;hljs-title function_&quot;&gt;build&lt;/span&gt;({
    &lt;span class=&quot;hljs-attr&quot;&gt;entryPoints&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&#x27;app.css&#x27;&lt;/span&gt;],
    &lt;span class=&quot;hljs-attr&quot;&gt;outfile&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&#x27;out.css&#x27;&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;bundle&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;minify&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;,
});
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Okay, okay... my real setup is a bit more involved than that. It has flags to handle “development” and “production” builds differently, and will watch files for changes and create source maps and smartly rename multiple source files and a whole load of other useful things.&lt;/p&gt;&lt;p&gt;But the point is: that small snippet is all you &lt;strong&gt;need&lt;/strong&gt;. &lt;/p&gt;&lt;p&gt;Install esbuild and add that &lt;code&gt;build.js&lt;/code&gt; file and you’re pretty much good-to-go. Rename the &lt;code&gt;entryPoints&lt;/code&gt; and &lt;code&gt;outfile&lt;/code&gt; paths to match your folder structure and you can create production-ready CSS by running &lt;code&gt;node build.js&lt;/code&gt;.&lt;/p&gt;&lt;p&gt;It’s not as straightforward as shipping vanilla, un-processed CSS files, but on balance probably still worth the effort (and it’s a hell of a lot less effort than it used to be!).&lt;/p&gt;&lt;h2 id=&quot;what-have-i-learnt&quot;&gt;What have I learnt?&lt;/h2&gt;&lt;p&gt;My biggest takeaway from this exercise is that &lt;strong&gt;I should have done this much sooner!&lt;/strong&gt; Sass is one of those tools that I&#x27;d been using for so long that it had become second nature, and I&#x27;d stopped even thinking about it. Let alone thinking about if I still needed it. It&#x27;s so easy to sleep on these &quot;base layer&quot; parts of my tooling, even though it&#x27;s something I&#x27;d interact with almost every day. Now I need to evaluate the rest of my setup and see if there are any other parts in need of a good spring cleaning.&lt;/p&gt;&lt;p&gt;But either way, Sass was an important part of my developer journey and I&#x27;ll always have fond memories of us ing it. So long, Sass, and &lt;a href=&quot;https://youtu.be/N_dUmDBfp6k?si=pbSDltIAVNraoP1i&amp;amp;t=30&quot;&gt;thanks for all the fish&lt;/a&gt;.&lt;/p&gt;</content></entry><entry><title>Mapping LLM embeddings in three dimensions</title><link href="https://tomhazledine.com/mapping-llm-embeddings-in-3d/"/><updated>2023-12-30T00:00:00Z</updated><id>https://tomhazledine.com/mapping-llm-embeddings-in-3d/</id><content type="html">&lt;p&gt;Embeddings are long lists of seemingly inscrutable numbers created by an LLM, but if you&#x27;re prepared to lose a little precision you can force them into 3D space where they&#x27;re a little easier to comprehend and explain.&lt;/p&gt;&lt;figure class=&quot;post-content__image-wrapper&quot;&gt;&lt;div id=&quot;embedding-example&quot;/&gt;&lt;figcaption class=&quot;post-content__caption&quot;&gt;&lt;p&gt;fig #1: &lt;strong&gt;Headlines from a galaxy far, far away.&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;Plotting the semantic &quot;meaning&quot; of strings of text that have been converted to embeddings by an LLM. Hover over points to see the original text value and use the &quot;rotation&quot; slider to create a parallax effect.&lt;/p&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2 id=&quot;what-am-i-trying-to-show-here&quot;&gt;What am I trying to show here?&lt;/h2&gt;&lt;p&gt;I talked a lot about &quot;embeddings&quot; in a recent article about &lt;a href=&quot;https://tomhazledine.com/llm-related-posts&quot;&gt;finding related posts within my blog archive&lt;/a&gt;. In that article I showed how embeddings could be used to calculate similarities between different chunks of text, and while writing it I had to work out how best to describe what embeddings actually are.&lt;/p&gt;&lt;p&gt;The most obvious description I found for embeddings was the one most closely tied to how I was using them; I was using them to calculate how &quot;close&quot; two piece of text were to each other, so that naturally led to relying on &lt;strong&gt;physical space&lt;/strong&gt; as a useful metaphor. Sure, the embeddings I use are coordinates in fifteen-hundred-dimensional space, but if you squint your eyes &lt;em&gt;just so&lt;/em&gt; you can shrug and say &lt;em&gt;&quot;coordinates are coordinates&quot;&lt;/em&gt;. As I said in that article:&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;&quot;by using embeddings you&#x27;re creating a &#x27;map&#x27; of the meaning of your content&quot;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;Me, &lt;a href=&quot;https://tomhazledine.com/llm-related-posts&quot;&gt;a few weeks ago&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;Over the past few months I&#x27;ve found this to be a really helpful way to think about embeddings, and I&#x27;ve been describing this theoretical &quot;map&quot; whenever I&#x27;ve mansplained embeddings to people (apologies if you&#x27;ve met me lately and been bored stiff by my constant LLM talk).&lt;/p&gt;&lt;h2 id=&quot;how-can-we-actually-visualise-this-map&quot;&gt;How can we &lt;em&gt;actually&lt;/em&gt; visualise this map?&lt;/h2&gt;&lt;p&gt;It&#x27;s all well and good to describe a theoretical multi-dimensional &quot;map of content&quot;, but quite another to come up with a way to visualise it without access to a &lt;a href=&quot;https://en.wikipedia.org/wiki/Hypercube&quot;&gt;tesseract or any other n-dimensional hypercube&lt;/a&gt;. As I mentioned in the previous article, I&#x27;ve been using OpenAI&#x27;s &lt;code&gt;ada-002&lt;/code&gt; model to create my embeddings, and the embeddings it creates are &lt;a href=&quot;https://byjus.com/maths/what-is-vector/&quot;&gt;&quot;vectors&quot;&lt;/a&gt; made up of 1,536 numbers. To plot these vectors on a graph you&#x27;d need to (somehow) visualise 1,536-dimensional space. That&#x27;s an impossibility, so the only &lt;em&gt;practical&lt;/em&gt; option is to reduce the number of dimensions we&#x27;re dealing with. Thankfully there is a mathematical tool we can put to use to achieve this, provided we&#x27;re happy to lose some data in the process.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Principal_component_analysis&quot;&gt;Principle component analysis&lt;/a&gt;&lt;/strong&gt; is a &quot;dimensionality reduction&quot; technique that allows us to take a large-dimensional dataset and convert it into a smaller set of dimensions. This is a new technique to me (and I copy/pasted most of the code I used) but to the best of my understanding a &quot;principal component&quot; can be seen as a &quot;direction&quot; in multidimensional space. In a 3D space, the directions are up/down, left/right, forward/backward (the classic &lt;code&gt;x&lt;/code&gt;, &lt;code&gt;y&lt;/code&gt;, &lt;code&gt;z&lt;/code&gt; coordinates). In 4D, 5D, n-D space, the same idea applies. Principle Component Analysis (PCA) works out which dimensions have the most variance and ignores the ones with less variance.&lt;/p&gt;&lt;p&gt;It&#x27;s an inherently lossy processes as we&#x27;re literally ignoring parts of the data, but it&#x27;s a good way to get the general &quot;vibe&quot; for a dataset. I&#x27;m happy listening to MP3s and looking at JPEGs online as the compression benefits outweigh the loss in fidelity. And the embeddings I&#x27;ve been working with represent such a small dataset that I&#x27;m happy to lose some detail in exchange for the added comprehensibility.&lt;/p&gt;&lt;p&gt;The practical implementation of PCA into my project was actually fairly trivial thanks to the &lt;a href=&quot;https://mljs.github.io/pca&quot;&gt;&lt;code&gt;ml-pca&lt;/code&gt; Node.js package&lt;/a&gt;, so now I can take my list of embeddings (with each embedding being an array of 1,536 numbers) and transform them into arrays of just three numbers.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; { &lt;span class=&quot;hljs-variable constant_&quot;&gt;PCA&lt;/span&gt; } &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;ml-pca&quot;&lt;/span&gt;;
&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; { embeddings } &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;./my-local-data.js&quot;&lt;/span&gt;

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; pca = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;PCA&lt;/span&gt;(embeddings);

&lt;span class=&quot;hljs-comment&quot;&gt;// Get the first three principal components&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; { data } = pca.&lt;span class=&quot;hljs-title function_&quot;&gt;predict&lt;/span&gt;(embeddings, { &lt;span class=&quot;hljs-attr&quot;&gt;nComponents&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt; });
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;I did originally include an example of a &lt;strong&gt;full&lt;/strong&gt; embedding here, but it was just too much scrolling even if it was funny to see the full before/after comparison. Suffice it to say, this processes turns a big array into a small array.&lt;/p&gt;&lt;h2 id=&quot;what-does-this-tell-me-about-my-data&quot;&gt;What does this tell me about my data?&lt;/h2&gt;&lt;p&gt;Given that I&#x27;d already created an embedding for each of my blog posts, the next natural step was to run a PCA on them and plot them in a 3D scatter graph. The labels on the graph show just the post titles, but the embeddings were calculated from the entire content of each post. The primary category each post belongs to is manually set by me when I write each post, and the colours of the point on the graph each correspond to a specific category.&lt;/p&gt;&lt;figure class=&quot;post-content__image-wrapper&quot;&gt;&lt;div id=&quot;embedding-vis&quot;/&gt;&lt;figcaption class=&quot;post-content__caption&quot;&gt;&lt;p&gt;fig #1: &lt;strong&gt;A &quot;map&quot; of my blog posts&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;Each post&#x27;s position in space is determined by the embedding of the content (a.k.a. they&#x27;re arranged by semantic meaning).&lt;/p&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;This graph is pretty, but currently just serves as a novelty. It was a lot of fun to make, as I&#x27;ve done a lot of 2D SVG graphing but never anything that tried to show three dimensions like this (and I&#x27;m rather pleased with how it turned out). I find it fascinating to see &quot;objective&quot; relationships between content I&#x27;ve written over the last ten years, especially the little clusters of topics...&lt;/p&gt;&lt;p&gt;There are a few massive outliers where I spent a month writing about sports prediction. There&#x27;s a pleasing &quot;podcasting zone&quot; over to the right and nice little typography corner down the bottom, too. While not being intrinsically useful yet, it&#x27;s already got me rethinking how I categorise my archive, and also got me thinking about clusters I&#x27;d like to flesh out more (and gaps that might need filling!).&lt;/p&gt;&lt;p&gt;Importantly, what it &lt;em&gt;does&lt;/em&gt; do is show visually how my &lt;a href=&quot;https://tomhazledine.com/llm-related-posts&quot;&gt;cosine similarity calculations&lt;/a&gt; were working out which posts were similar. A &lt;strong&gt;LOT&lt;/strong&gt; of the dimensions have been removed, but the basic premise is still clearly shown. **This graph is a much more concrete illustration of &quot;embedding space&quot; than my previous hand-wavey, back-of-a-napkin attempts ever were. It also has the benefit of being based on real data (even if it is greatly optimised).&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;When I&#x27;m describing embeddings as a &quot;map of content&quot; I can now show them this graph to make my point more clearly than my bumbling words ever could.&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 id=&quot;this-is-not-a-true-map-of-embedding-space&quot;&gt;This is not a true &quot;map&quot; of embedding space&lt;/h2&gt;&lt;p&gt;In some ways this is not the post I set out to write.&lt;/p&gt;&lt;p&gt;When I was first experimenting with PCA, I assumed that the outputs represented absolute values. I though that an embedding for a string of text would always result in the same 3D coordinates and PCA would &quot;simplify&quot; all embedding data in the same way. I naively thought that PCA would allow me to map &lt;em&gt;any&lt;/em&gt; embedding into the same 3D space. I was wrong about this.&lt;/p&gt;&lt;p&gt;Because the principal components are determined by the &lt;em&gt;variance&lt;/em&gt; in the data, different data sets will have more or less variance in different dimensions. The PCA &quot;space&quot; that gets created is unique to each set of embeddings that the PCA has been run with. The &quot;map&quot; of my blog posts will be drawn in a very different space to the map of &lt;em&gt;your&lt;/em&gt; blog posts, so we couldn&#x27;t combine the two sets of 3D coords. But if we combined our embeddings and ran a PCA for all of them at the same time then we &lt;em&gt;would&lt;/em&gt; have a map of our combined posts but the positions wouldn&#x27;t match the original independent maps.&lt;/p&gt;&lt;p&gt;My original plan was to build the graph framework and have a form input where anyone could type in some text and see it added into the embedding space. I thought I could make a real map of all embeddings. &lt;strong&gt;PCA just doesn&#x27;t work like that&lt;/strong&gt;. I &lt;em&gt;could&lt;/em&gt; (and might yet?!) create a page where you can input a whole set of text strings and have it calculate the embeddings and PCA&#x27;d 3D map in real-time, but what with building the SVG cube graph from scratch I&#x27;ve already burned more time on this post that I intended. That&#x27;ll have to wait for a future project.&lt;/p&gt;&lt;h2 id=&quot;what-next&quot;&gt;What next?&lt;/h2&gt;&lt;p&gt;Aside from building the interactive version of the graph, what are the next steps for this? Crucially, &lt;strong&gt;how can I turn this curiosity into something genuinely useful&lt;/strong&gt;?&lt;/p&gt;&lt;h3 id=&quot;fancy-data-vis&quot;&gt;Fancy data vis&lt;/h3&gt;&lt;p&gt;I love a good piece of data visualisation, and embeddings open up a host of new areas for me to experiment with. And if I use embeddings and PCA to generate &quot;spatial&quot; graphs and charts, it&#x27;s a small step to pair that with other factors to tell interesting stories with data.&lt;/p&gt;&lt;h3 id=&quot;search-index-size-optimisation&quot;&gt;Search index size optimisation&lt;/h3&gt;&lt;p&gt;Following on from my &quot;related posts&quot; experiments, I&#x27;ve been testing out embeddings as the basis for a genuine site-search engine. It &quot;kind of&quot; works currently, but the biggest issue is that embeddings are so damn large! My current set of &quot;whole file&quot; embeddings comes in at about 1.6 MB, which is more than three times the size of my real search index (which, at 419 KB contains all the text content of all my pages). Yep, the JSON file with a single embedding for each post is larger than the actual content of all those posts. And to get search results that compete with, say, Fuse.js&#x27; matching engine I&#x27;d need even more embeddings; ideally one per paragraph of text. Totally un-useable for the statically-generated client-side-only approach I prefer.&lt;/p&gt;&lt;p&gt;Applying principle component analysis to those embeddings might (maybe) change that. I doubt three dimensions will produce good search results, but perhaps even halving the number of dimensions might still produce useable results while being a more manageable size. I&#x27;ll definitely be doing more experimentation around this in the coming weeks.&lt;/p&gt;&lt;p&gt;Wherever I go with this next, I&#x27;m having a lot of fun and I&#x27;m definitely not finished yet.&lt;/p&gt;</content></entry><entry><title>Publishing on npm is weird</title><link href="https://tomhazledine.com/npm-publishing/"/><updated>2023-11-30T00:00:00Z</updated><id>https://tomhazledine.com/npm-publishing/</id><content type="html">&lt;p&gt;This is a list of a few things I’ve learned while publishing my JavaScript shenanigans on npm. Or, more accurately, it&#x27;s a list of things I’ve banged my head against while &lt;em&gt;trying&lt;/em&gt; to publish on npm. Some of it is logical, some of it is inscrutable. All of it was necessary. I’m documenting it here so that next time I go to publish something I can avoid going down a hundred-open-tabs search-engine rabbit hole (again!).&lt;/p&gt;
&lt;h2 id=&quot;the-scenario&quot; tabindex=&quot;-1&quot;&gt;The scenario&lt;/h2&gt;
&lt;p&gt;I really &lt;a href=&quot;https://tomhazledine.com/wordle-node-script/&quot;&gt;enjoy&lt;/a&gt; &lt;a href=&quot;https://tomhazledine.com/oblique-strategies-via-npx/&quot;&gt;writing&lt;/a&gt; &lt;a href=&quot;https://tomhazledine.com/llm-related-posts/&quot;&gt;scripts&lt;/a&gt; in Node. I long ago accepted the fact that JavaScript is the language I’m most fluent in, and now I “lean in” to being able to write JS &lt;em&gt;everywhere&lt;/em&gt;. Other people might use Bash or Python to solve their little problems but when I want to automate something or inspect some data, I turn to Node.js.&lt;/p&gt;
&lt;p&gt;And when I want to share my work, the &lt;a href=&quot;https://www.npmjs.com/&quot;&gt;npm&lt;/a&gt; registry is the first place I think of. It’s great to be able to run &lt;code&gt;yarn add my-thing&lt;/code&gt; (or &lt;code&gt;npm install my thing&lt;/code&gt; if you prefer) and instantly be able to reuse my little scripts.&lt;/p&gt;
&lt;p&gt;So what has consistently tripped me up? And what have I learned after publishing a few things?&lt;/p&gt;
&lt;h2 id=&quot;put-it-in-the-bin&quot; tabindex=&quot;-1&quot;&gt;Put it in the bin&lt;/h2&gt;
&lt;p&gt;If a script is to be run by an end user (i.e. they write &lt;code&gt;npm run your-cool-script&lt;/code&gt; or &lt;code&gt;yarn your-cool-script&lt;/code&gt;), you need to add that script to the &lt;code&gt;bin&lt;/code&gt; section of your &lt;code&gt;package.json&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-json&quot;&gt;{
    &quot;bin&quot;: {
	    &quot;your-cool-script&quot;: &quot;./path/to/the/script.js&quot;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;type-%3D-module&quot; tabindex=&quot;-1&quot;&gt;Type = module&lt;/h2&gt;
&lt;p&gt;If you’re writing using ESM syntax (&lt;code&gt;import foo, { bar } from “baz”&lt;/code&gt;, etc...), you need to declare your package as a “module” in your &lt;code&gt;package.json&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-json&quot;&gt;{
    &quot;type&quot;: &quot;module&quot;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;shebang&quot; tabindex=&quot;-1&quot;&gt;Shebang&lt;/h2&gt;
&lt;p&gt;If you want your script to run correctly on Unix-like systems (which MacOS and Linux both are) then the file should start with a “shebang”: &lt;code&gt;#!/usr/bin/env node&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;This is a comment that specifies which interpreter the system should use for the script, and uses the user’s &lt;code&gt;env&lt;/code&gt; command to find the &lt;code&gt;node&lt;/code&gt; interpreter in the system’s &lt;code&gt;PATH&lt;/code&gt;. Note that &lt;code&gt;bin&lt;/code&gt; is &lt;a href=&quot;#put-it-in-the-bin&quot;&gt;again&lt;/a&gt; being used as a place to store executable scripts, this time at a system level.&lt;/p&gt;
&lt;p&gt;Shebang get’s its name from a concatenation of “sharp” (i.e. &lt;code&gt;#&lt;/code&gt;) and “bang” (i.e. &lt;code&gt;!&lt;/code&gt;) as interpreter comments all start with &lt;code&gt;#!&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;If you’re using a tool like &lt;code&gt;esbuild&lt;/code&gt; to compile your script from multiple source files, then you’ll need to make use of the “banner” configuration option. Setting a “banner” is a way to inject arbitrary text at the start of your final built file.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;const esbuildConfig = {
    // ...
    banner: {
        js: &quot;#!/usr/bin/env node&quot;
    }
};
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;esbuild%E2%80%99s-format-and-platform&quot; tabindex=&quot;-1&quot;&gt;esbuild’s format and platform&lt;/h2&gt;
&lt;p&gt;Speaking of esbuild, there are a couple of other configuration options that you should set: &lt;code&gt;format&lt;/code&gt; and &lt;code&gt;platform&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;You need to set &lt;code&gt;format&lt;/code&gt; to be “esm” because even now at the end of 2023 ESM is &lt;em&gt;still&lt;/em&gt; not the default. CommonJS just will not die, and it will never cease to confound me as to why.&lt;/p&gt;
&lt;p&gt;Setting &lt;code&gt;platform&lt;/code&gt; to “node” makes more sense, however, as the esbuild is primarily a tool for building things for the web. By setting this config value we’re telling it not to worry too much about built-in Node packages like &lt;code&gt;path&lt;/code&gt; and &lt;code&gt;fs&lt;/code&gt; (which it would freak out about if we tried to compile those for the web).&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;const esbuildConfig = {
    // ...
    format: &quot;esm&quot;,
    platform: &quot;node&quot;,
    banner: {
        js: &quot;#!/usr/bin/env node&quot;
    }
};
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;let-the-npm-cli-do-the-work&quot; tabindex=&quot;-1&quot;&gt;Let the npm CLI do the work&lt;/h2&gt;
&lt;p&gt;Versioning is an important part of reliably releasing your code, especially if you’re like me and constantly George Lucas-ing your creations. &lt;a href=&quot;https://semver.org/&quot;&gt;SemVer&lt;/a&gt; (a.k.a. &lt;strong&gt;sem&lt;/strong&gt;antic &lt;strong&gt;ver&lt;/strong&gt;sioning) is our friend here, so stick to the &lt;code&gt;{major}.{minor}.{patch}&lt;/code&gt; format.&lt;/p&gt;
&lt;p&gt;I very quickly learned to stop manually tweaking the &lt;code&gt;version&lt;/code&gt; value in my &lt;code&gt;package.json&lt;/code&gt;. It’s much more straightforward to run &lt;code&gt;npm version {major|minor|patch}&lt;/code&gt;. This takes care of bumping the package version and cutting a new “tag”. If these get out of sync, then you’ll have problems when pushing the code to npm, so the CLI is a much more reliable way to handle this process. Just remember to &lt;code&gt;git push --tags&lt;/code&gt; to ensure the new tag gets pushed to your repo.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;Note:&lt;/strong&gt; Watch out if you’re in a sub-folder of a monorepo, &lt;code&gt;npm version&lt;/code&gt; won’t do the tagging and commit for you!&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&quot;always-start-at-zero&quot; tabindex=&quot;-1&quot;&gt;Always start at zero&lt;/h2&gt;
&lt;p&gt;As an aside to versioning, I find it helpful to always start with a “major” version of &lt;code&gt;0&lt;/code&gt; (so commit #1 is usually version &lt;code&gt;0.1.0&lt;/code&gt;). When in the early stages of a new project I’m frequently adding “breaking changes” as I find my feet, so if I struck strictly to SemVer and began at &lt;code&gt;v1.0.0&lt;/code&gt; I’d be on version three hundred before my code ever saw the light of day.&lt;/p&gt;
&lt;p&gt;The pre-version-one freedom to play fast-and-loose with backwards compatibility is essential, in my opinion.&lt;/p&gt;
&lt;h2 id=&quot;go-forth-and-publish&quot; tabindex=&quot;-1&quot;&gt;Go forth and publish&lt;/h2&gt;
&lt;p&gt;This is not a comprehensive list of &lt;em&gt;All The Things You Need To Know To Publish On npm™️&lt;/em&gt;, but everything include here is something I’ve had to learn through trial and error. I’ll hit more obstacles, I’m sure, and when I do I might remember to add them to this page (maybe). But at least I’ve got these ones out of my working memory and into long term storage. And is that not the main purpose of technical blogging after all?&lt;/p&gt;</content></entry><entry><title>TomBot2000: automatically finding related posts using LLMs</title><link href="https://tomhazledine.com/llm-related-posts/"/><updated>2023-10-27T00:00:00Z</updated><id>https://tomhazledine.com/llm-related-posts/</id><content type="html">&lt;p&gt;I&#x27;ve been having a lot of fun lately with &lt;strong&gt;embeddings&lt;/strong&gt;. They are a somewhat-overlooked sideshow to the current GPT/LLM/AI circus, but in my view they are even more interesting than the headline-grabbing chat apps. And unlike the the chat interfaces, embeddings are a way to make LLMs &lt;em&gt;actually useful&lt;/em&gt; without any of the worries about &quot;hallucination&quot; or &lt;em&gt;just-plain-wrong&lt;/em&gt; content.&lt;/p&gt;&lt;p&gt;A large part of what I&#x27;ve been using embeddings for is &quot;natural language search&quot; which (at the simplest level) involves defining how similar two bits of text are. Give the robots two different pieces of content and they then decide how similar the &quot;meanings&quot; of the two pieces are on a scale of &lt;code&gt;0.0&lt;/code&gt; to &lt;code&gt;1.0&lt;/code&gt;. This is great for search applications where it neatly sidesteps the need for complex algorithms and complicated matching engines (rendering a lot of my &lt;a href=&quot;https://tomhazledine.com/client-side-search-static-site/&quot;&gt;previous search work&lt;/a&gt; charmingly obsolete!), but it&#x27;s also a neat solution to a problem that I&#x27;ve been halfheartedly grappling with for years: &lt;strong&gt;finding &quot;related posts&quot; for blog content&lt;/strong&gt;.&lt;/p&gt;&lt;nav class=&quot;toc&quot;&gt;&lt;h2 id=&quot;in-this-article&quot;&gt;In this article&lt;/h2&gt;&lt;ol&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#why-do-i-care-about-related-posts&quot;&gt;Why do I care about related posts? &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#how-have-i-tried-and-failed-to-generate-related-posts-in-the-past&quot;&gt;How have I tried and failed to generate related posts in the past? &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;ol class=&quot;stack--small&quot;&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#failed-attempt-1-the-manual-approach&quot;&gt;Failed attempt #1: the manual approach &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#failed-attempt-2-leaning-on-cms-features&quot;&gt;Failed attempt #2: leaning on CMS features &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#so-what-are-embeddings&quot;&gt;So what are embeddings? &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#using-embeddings-for-natural-language-search&quot;&gt;Using embeddings for &quot;natural language search&quot; &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#can-embeddings-be-used-to-calculate-relations-between-our-content&quot;&gt;Can embeddings be used to calculate relations between our content? &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#calculating-the-related-posts&quot;&gt;Calculating the related posts &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#gotchas&quot;&gt;Gotchas &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#script-optimisation&quot;&gt;Script optimisation &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#ship-it&quot;&gt;Ship it! &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/nav&gt;&lt;h2 id=&quot;why-do-i-care-about-related-posts&quot;&gt;Why do I care about related posts?&lt;/h2&gt;&lt;p&gt;When I talk about &quot;related posts&quot;, what I&#x27;m referring to is the section at the end of an article that points the reader to other, similar content. The promise being made to any reader that reaches the end of an article or post is: &lt;strong&gt;&lt;em&gt;&quot;If you liked reading that, then you&#x27;ll probably be interested in this too&quot;&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;&lt;p&gt;Partly I want to make my sites more useful to people who visit them, but &lt;em&gt;mostly&lt;/em&gt; I just want to keep readers on my site. I&#x27;ve been working on blog-style content sites for well over a decade-and-a-half at this point, and I&#x27;m keenly aware of how tough a challenge &quot;audience retention&quot; can be.&lt;/p&gt;&lt;p&gt;The default option of &quot;next post&quot; and &quot;previous post&quot; links (I default option I&#x27;ve often used myself) doesn&#x27;t really provide much value. Only the most ardent completionists are going to work their way through a site from the very start to the very end. If you can surface &lt;em&gt;related&lt;/em&gt; content instead, that&#x27;s inevitably going to be more useful.&lt;/p&gt;&lt;h2 id=&quot;how-have-i-tried-and-failed-to-generate-related-posts-in-the-past&quot;&gt;How have I tried and failed to generate related posts in the past?&lt;/h2&gt;&lt;h3 id=&quot;failed-attempt-1-the-manual-approach&quot;&gt;Failed attempt #1: the manual approach&lt;/h3&gt;&lt;p&gt;The &quot;easiest&quot; way to add related content to the bottom of a post is to do it manually. By which I mean picking a couple of posts that you have personally decided are related to the post you&#x27;ve just written. Then you type the links out at the end of the post&#x27;s content yourself. You, the post&#x27;s author, do the choosing. You find the links. You write the description. In many ways this is probably the &lt;em&gt;best&lt;/em&gt; way to do it, but there are a few issues:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;strong&gt;You can only choose from content that already exists.&lt;/strong&gt; This is because the related content you select is limited to the articles or posts you&#x27;ve already published, leaving no room for future publications to be included. In theory, you could revisit every post every time you add a new one and update the related links, but this quickly becomes impractical and time-consuming.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;The links you choose might break.&lt;/strong&gt; Once you have hand-written a related post link, that link is locked in place. If the permalink for the related post changes (for example, if you update the title of the post or change the structure of your site) then you need to remember to come back and update the link (or at the very least setup a 303 redirect). Again, this is lots of work, and an almost certain recipe for &quot;dead links&quot; once your site reaches any kind of scale.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;It&#x27;s a lot of work.&lt;/strong&gt; Both issues 1. and 2. involve a lot of manual effort, but there&#x27;s also the cognitive overhead of keeping all your posts&#x27; content in your head. Plus it takes a lot of time and brainpower to come up with the &quot;relations&quot; in the first place.&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;In short, choosing related posts is a process that cries out for automation.&lt;/p&gt;&lt;h3 id=&quot;failed-attempt-2-leaning-on-cms-features&quot;&gt;Failed attempt #2: leaning on CMS features&lt;/h3&gt;&lt;p&gt;One massive time saving that can be made is to define &quot;related posts&quot; in whatever CMS you&#x27;re using. Back (way back!) when I used WordPress, it was relatively trivial to add a custom field to the edit screen that allowed me to select any existing post from a dropdown. With that mechanic in place it&#x27;s possible to &lt;em&gt;quickly&lt;/em&gt; select a &quot;related&quot; post (or several) whenever a new post is written.&lt;/p&gt;&lt;p&gt;This is still a &lt;em&gt;slightly&lt;/em&gt; manual process because you still have to choose the relations, but it does avoid some of the pitfalls of an entirely manual process:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;By selecting a post from within the CMS rather than by pasting a URL string, the relation is dynamically linked to the post object (meaning if the title or permalink change, the &quot;related&quot; link inherits those changes).&lt;/li&gt;&lt;li&gt;Because this approach uses the post object there are also more possibilities at the presentational level, as templates can access &lt;em&gt;any&lt;/em&gt; part of the post (meaning the &quot;related posts&quot; section of the page can include post excerpts, thumbnail images, or any other content associated with the post).&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Another potential enhancement is to fully automate the process by letting the CMS automatically select related posts for you. In WordPress land there are no doubt plenty of plugins that offer this functionality (but as with all WP plugins, proceed with caution. Here be dragons!). I&#x27;ve used a couple myself over the years, and they&#x27;ve been &lt;em&gt;fine&lt;/em&gt;. As far as I can tell they use a combination of metadata matching (are these posts in the same category, for example?) and &lt;a href=&quot;https://tomhazledine.com/client-side-search-static-site/#search-fundamentals&quot;&gt;&quot;traditional&quot; search queries&lt;/a&gt; to compare posts (although how they build their queries I do not know - if I was building a plugin like this I&#x27;d probably use some combination of post-title and excerpt to get the best balance of accuracy and performance).&lt;/p&gt;&lt;h4 id=&quot;but-static-sites-dont-use-a-cms&quot;&gt;But static sites don&#x27;t use a CMS...&lt;/h4&gt;&lt;p&gt;The biggest caveat to this whole approach (and the reason I haven&#x27;t used it in years) is that a static site doesn&#x27;t have a CMS. And, in case you missed it, &lt;a href=&quot;https://tomhazledine.com/eleventy-static-site-generator&quot;&gt;I&#x27;m a huge advocate of static sites and static site generators&lt;/a&gt;. Sure, some of you might be using a fancy headless CMS or whatever, but for me one of the main appeals of running a static site is that &lt;strong&gt;all my content is nothing more than a folder full of markdown files&lt;/strong&gt;.&lt;/p&gt;&lt;p&gt;The one major downside to &lt;em&gt;just using markdown files&lt;/em&gt; is that if you want any custom metadata (such as links to related posts) you have to write it in yourself. The format is a bit more structured than yolo-ing it in the main content flow as-per &lt;a href=&quot;#failed-attempt-%231%3A-the-manual-approach&quot;&gt;the fully manual approach&lt;/a&gt; (if you can call YAML structured #shotsFired), but still comes with all the same downsides.&lt;/p&gt;&lt;h2 id=&quot;so-what-are-embeddings&quot;&gt;So what are embeddings?&lt;/h2&gt;&lt;p&gt;Embeddings power my 100%-automated related posts workflow. The general concept of &quot;embeddings&quot; is an offshoot of the Large Language Model (LLM) technology that makes tools like ChatGPT work. The basic idea is that you can take a piece of text (a blog post, for example) and turn it into a vector (an array of numbers). This vector is called an &quot;embedding&quot; and it represents the &quot;meaning&quot; of the text. It&#x27;s a weird concept to get your head around at first, but you can learn more about embeddings in detail in Simon Willion&#x27;s excellent explainer, &lt;a href=&quot;https://simonwillison.net/2023/Oct/23/embeddings/&quot;&gt;&quot;Embeddings: What they are and why they matter&quot;&lt;/a&gt;.&lt;/p&gt;&lt;p&gt;The way I think about it is like this: an embedding is a mathematical representation of the meaning of a chunk of content. And because the embedding is an array of numbers it can be treated as a set of coordinates. If the embedding was a simple one with only two numbers, you could plot it on a 2D graph and the the position of that point on the graph would represent the meaning of the text used to create the embedding. In essence, &lt;strong&gt;by using embeddings you&#x27;re creating a &quot;map&quot; of the meaning of your content&lt;/strong&gt;.&lt;/p&gt;&lt;p&gt;Of course it&#x27;s more complex than that as the embeddings are actually a lot longer than two numbers, but the principle is the same. The longer the vector, the more dimensions you have to plot the point in. The more dimensions you have, the more accurate the representation of the meaning of the text. I&#x27;ve been using OpenAI&#x27;s &lt;code&gt;ada-002&lt;/code&gt; model to create my embeddings, and the embeddings it creates are made up of 1536 numbers. To plot these vectors on a graph you&#x27;d need to (somehow) visualise a 1536-dimensional space. Like I said, it&#x27;s a tricky concept to get your head around.&lt;/p&gt;&lt;h2 id=&quot;using-embeddings-for-natural-language-search&quot;&gt;Using embeddings for &quot;natural language search&quot;&lt;/h2&gt;&lt;p&gt;It is the &quot;semantic mapping&quot; aspect of embeddings that make them useful. If you have a set of embeddings created from different strings of text, their &quot;position&quot; in 1536-dimensional space represents their meaning. If they are close, then the meanings are similar. If they are far apart, then the meanings are different.&lt;/p&gt;&lt;p&gt;The practical application of this &quot;closeness&quot; is that you can measure how &quot;close&quot; multiple embeddings are and compare them against each other. If one of your strings happens to be a &quot;search query&quot;, then tada: you&#x27;ve built a search engine! Rig up an input field to generate an embedding of whatever question the user asks, and then compare that embedding to the embeddings of all your content.&lt;/p&gt;&lt;p&gt;That simple search engine will work just fine with &quot;normal&quot; queries that you&#x27;d type into any old search box, but it would also work really well with &lt;strong&gt;natural language queries&lt;/strong&gt;.&lt;/p&gt;&lt;p&gt;And the similarity is computationally &quot;easy&quot; to calculate, too. If you&#x27;ve already done the work to create the embeddings, then the similarity can be worked out with a function known as &lt;a href=&quot;https://en.wikipedia.org/wiki/Cosine_similarity&quot;&gt;&lt;strong&gt;cosine similarity&lt;/strong&gt;&lt;/a&gt;.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;cosineSimilarity&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;a, b&lt;/span&gt;) =&gt; {
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; dotProduct = a.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;acc, cur, i&lt;/span&gt;) =&gt;&lt;/span&gt; acc + cur * b[i], &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; magnitudeA = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;sqrt&lt;/span&gt;(a.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;acc, cur&lt;/span&gt;) =&gt;&lt;/span&gt; acc + cur ** &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;));
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; magnitudeB = &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;sqrt&lt;/span&gt;(b.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;acc, cur&lt;/span&gt;) =&gt;&lt;/span&gt; acc + cur ** &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;));
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; magnitudeProduct = magnitudeA * magnitudeB;
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; similarity = dotProduct / magnitudeProduct;
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; similarity;
};
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;There&#x27;s a lot of (to my eyes) complicated maths going on in that &lt;code&gt;cosineSimilarity&lt;/code&gt; function, but thankfully you don&#x27;t need to understand exactly how it works to use it effectively. (Although of course you &lt;em&gt;can&lt;/em&gt; just copy/paste that function into &lt;a href=&quot;https://chat.openai.com&quot;&gt;ChatGPT&lt;/a&gt; and get a pretty decent explanation).&lt;/p&gt;&lt;p&gt;Complex or not, calculating cosine similarity is &lt;strong&gt;a lot&lt;/strong&gt; less work than creating a fully-fledged search algorithm, and the results will be of similar quality. In fact, I&#x27;d be willing to bet that the embedding-based search would win a head-to-head comparison most of the time.&lt;/p&gt;&lt;p&gt;There are some caveats to this, as how you&#x27;ve divided up the content before creating your embeddings will effect the results (did you embed every sentence, or every paragraph, or the whole article as a single embedding? Those choices will have consequences).&lt;/p&gt;&lt;blockquote&gt;&lt;h4 id=&quot;handy-fact-hallucination-is-not-a-problem-when-working-with-embeddings&quot;&gt;Handy fact: hallucination is not a problem when working with embeddings&lt;/h4&gt;&lt;p&gt;Anyone who&#x27;s used LLMs for any amount of time will have hit upon the biggest obstacle to using them for &quot;proper work&quot;: &lt;strong&gt;LLMs hallucinate&lt;/strong&gt;. Yep, they just make stuff up all the time, giving you &quot;facts&quot; that sound plausible but may or may not actually be true. This is an issue with all chat-based LLM interactions where the LLM is generating text.&lt;/p&gt;&lt;p&gt;The beauty of using LLM embeddings is that at no point is any text being generated. An LLM generates an embedding of text that we explicitly gave it. The &quot;AI magic&quot; is in how it turns the meaning of the text into a list of numbers. We don&#x27;t need it to generate any text for us, so there&#x27;s no scope for making stuff up.&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 id=&quot;can-embeddings-be-used-to-calculate-relations-between-our-content&quot;&gt;Can embeddings be used to calculate relations between our content?&lt;/h2&gt;&lt;p&gt;In short: yes, yes it can. That same &lt;code&gt;cosineSimilarity&lt;/code&gt; function that we used to compare a post&#x27;s embedding to an embedded search term can also be used to compare one post to another. If we do that for all the posts in our blog&#x27;s archive, then we compare the similarities to find the &lt;code&gt;N&lt;/code&gt; most similar posts.&lt;/p&gt;&lt;p&gt;I&#x27;ve also added some GPT-powered sugar on top of the standard &quot;related posts&quot; concept by getting GPT4 to tell us &lt;em&gt;why&lt;/em&gt; the two posts are similar. This lets me flesh out the related-posts section with useful information that will &lt;em&gt;hopefully&lt;/em&gt; entice readers into exploring more articles on my site.&lt;/p&gt;&lt;h2 id=&quot;calculating-the-related-posts&quot;&gt;Calculating the related posts&lt;/h2&gt;&lt;p&gt;I&#x27;ve written a node script that does this for my blog posts every time I publish a new article. The script works like this:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;It reads all the markdown (&lt;code&gt;.md&lt;/code&gt; or &lt;code&gt;.mdx&lt;/code&gt;) files in my content directory, and extracts the relevant content (i.e. the title, subtitle, and body-copy of the post).&lt;/li&gt;&lt;li&gt;This post content is then sent to the &lt;a href=&quot;https://platform.openai.com/docs/api-reference/embeddings/create&quot;&gt;OpenAI &lt;strong&gt;embeddings&lt;/strong&gt; API&lt;/a&gt; to generate a single embedding for that whole post.&lt;/li&gt;&lt;li&gt;I then use the &lt;a href=&quot;https://platform.openai.com/docs/api-reference/completions&quot;&gt;&lt;strong&gt;completions&lt;/strong&gt; API&lt;/a&gt; to summarise the content of each post. This will help me in later steps because the API has limits on how much text it can parse at any one time. Sending over two full blog posts&#x27; worth of content will mean I quickly hit the limits and can&#x27;t generate the &quot;why are these posts similar?&quot; text. By creating a shorter summary of each post at this stage, I can then use those summaries in my later prompts.&lt;/li&gt;&lt;li&gt;For each post, the script then finds the top two most-similar posts based on the cosine similarity of the embedding vectors.&lt;/li&gt;&lt;li&gt;For each &quot;similar post&quot; the script then compares the posts&#x27; summary with the summary of the starting post, and sends these to GPT4 to generate the &quot;why these are similar&quot; text.&lt;/li&gt;&lt;li&gt;The final step is to write this &quot;similar posts&quot; data back into the frontmatter of the original markdown files.&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;Because this script just needs the markdown files of my blog posts, it can live outside the normal build pipeline of my site. In fact, it could work just as well with any Static Site Generator - if you&#x27;ve got a folder of markdown files, this script would work just fine.&lt;/p&gt;&lt;h2 id=&quot;gotchas&quot;&gt;Gotchas&lt;/h2&gt;&lt;p&gt;Seeing the script laid out step-by-step like that makes it all look rather simple, but there were a few obstacles to overcome that turned an hour&#x27;s POC into several days&#x27; worth of development effort.&lt;/p&gt;&lt;h3 id=&quot;gotcha-1-api-rate-limits&quot;&gt;Gotcha #1: API Rate limits&lt;/h3&gt;&lt;p&gt;It turns out that you can&#x27;t just spam the OpenAI API with hundreds of requests all at once, so I had to add pauses in my script to account for this. When in &quot;dev mode&quot; the script will stop any wait for user input (&quot;press &lt;code&gt;y&lt;/code&gt; to continue&quot;) after every API call, but also has a simpler mode for automatically running through all the requests: it just waits for 6 seconds after every API call to before continuing.&lt;/p&gt;&lt;h3 id=&quot;gotcha-2-api-token-limits&quot;&gt;Gotcha #2: API token limits&lt;/h3&gt;&lt;p&gt;As I noted in step #3, the API also has a &quot;context limit&quot; - a.k.a. how much content can it process at once. This is measured in &quot;tokens&quot; (which roughly works out to a token or two per word in a sentence). For GPT3.5 the token limit is 4,097 tokens, and for GPT4 the limit is 8,192.&lt;/p&gt;&lt;h3 id=&quot;gotcha-3-gpt4-pricing&quot;&gt;Gotcha #3: GPT4 pricing&lt;/h3&gt;&lt;p&gt;The OpenAI API is not free to use. Thankfully the embeddings requests are really cheap, and in the process of building and debugging my script I generated literally hundreds of embeddings (using the &lt;code&gt;text-embedding-ada-002&lt;/code&gt; model) and never got my usage above even a single dollar. GPT3 (using the &lt;code&gt;gpt-3.5-turbo&lt;/code&gt; model) is a little more expensive, and &lt;code&gt;GPT-4&lt;/code&gt; is even more so!&lt;/p&gt;&lt;p&gt;While the cost of generating the embeddings was negligible, generating the &lt;em&gt;&quot;why are these posts similar&quot;&lt;/em&gt; text cost about two and half dollars per run of the complete script. This was for my personal blog which has about ~50 posts, and includes generating the summaries and then using those summaries to generate the final text.&lt;/p&gt;&lt;p&gt;For my own sanity I&#x27;ve spent a lot of time implementing caching to avoid running scripts multiple times for the same content, so future runs (i.e. when new posts are added to my site) will cost a lot less (generally somewhere between a few cents and a dollar).&lt;/p&gt;&lt;h3 id=&quot;gotcha-4-prompt-tweaking&quot;&gt;Gotcha #4: Prompt tweaking&lt;/h3&gt;&lt;p&gt;Again, the embeddings side of things doesn&#x27;t require any trickery or shenanigans (it just works!), but generating the GPT summaries and &lt;em&gt;&quot;why are these posts similar&quot;&lt;/em&gt; content required a bit of what the hype-merchants call &quot;prompt engineering&quot;. In my experience, the GPT models can be a bit &lt;em&gt;enthusiastic&lt;/em&gt; when generating text, so it took a little bit of careful prompt phrasing to stop them creating over-the-top SEO-fodder (the kind of stuff that marketers and Google seem to love, but real humans hate).&lt;/p&gt;&lt;p&gt;If you&#x27;re interested, here&#x27;s the full prompt I used to generate the &lt;em&gt;&quot;why are these two posts similar&quot;&lt;/em&gt; text:&lt;/p&gt;&lt;pre&gt;&lt;code&gt;You are an automatic recommendation engine for my technical blog. At the end of each blog post, you recommend other posts that readers may be interested in.

I&#x27;ll provide the summaries for two blog posts. Can you describe why someone who has just read the first post might be interested in reading the second post?

Here is the first post:

${postSummary}

Here is the second post:

${similarPostSummary}

Here are some additional instructions to help you write the recommendation:

* Focus on the facts included in the post and the author&#x27;s opinions.
* Start every summary with &quot;This is similar to what you&#x27;ve just read because&quot;
* Limit responses to single sentence.
* Avoid hyperbole (such as &quot;It&#x27;s an enlightening read&quot; or similar). Just describe the similarities of the post and why it might be interesting to someone who has just read the first post.
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;There a lot of hand-wavey stuff going on there, but after a lot of experimentation that was the prompt that gave me the most reliable results.&lt;/p&gt;&lt;h3 id=&quot;gotcha-5-inconsistent-output&quot;&gt;Gotcha #5: Inconsistent output&lt;/h3&gt;&lt;p&gt;Annoyingly, even with a super-specific prompt the output from GPT generation is not always consistent. For instance, it &lt;em&gt;sometimes&lt;/em&gt; adds quote marks around the final text, and other times it doesn&#x27;t. Not a huge issue, but something that does need to be accounted for at the code level.&lt;/p&gt;&lt;h3 id=&quot;gotcha-6-hallucination&quot;&gt;Gotcha #6: Hallucination&lt;/h3&gt;&lt;p&gt;Even when mostly relying on hallucination-less embeddings, and even when being super-explicit with my prompts and providing &lt;em&gt;all&lt;/em&gt; the relevant content in the API requests, &lt;strong&gt;even then, hallucination is a bit of a problem&lt;/strong&gt;. When generating the summaries it can be subtly wrong about the content of the post it&#x27;s summarising, and when describing why two summaries are similar it occasionally went off-piste and misunderstood the meaning of a post.&lt;/p&gt;&lt;p&gt;After a lot of prompt-tweaking and experimentation I&#x27;ve ended up with a script that I&#x27;m happy with for this specific application, but it does highlight the general problem with hallucination. Now I&#x27;ve spent more time working with these LLMs it&#x27;s really apparent to me that the hallucinations are &lt;em&gt;the&lt;/em&gt; biggest obstacle to doing &quot;useful work&quot; with LLM content generation.&lt;/p&gt;&lt;h3 id=&quot;gotcha-7-post-deletion-requires-recalculating-similarities&quot;&gt;Gotcha #7: Post deletion (requires recalculating similarities)&lt;/h3&gt;&lt;p&gt;Predictably (although I didn&#x27;t predict it when writing the first iteration of the script!), when a post is deleted or changed you need to re-generate (or at least check) &lt;em&gt;all&lt;/em&gt; the similar posts for all of the posts. Easy enough to handle when the content has changed, but deleting a markdown file did result in my script exploding in annoying and hard to debug ways. Got it sorted in the end, but it was enough of a headache to include on this list!&lt;/p&gt;&lt;h3 id=&quot;gotcha-8-node-memory&quot;&gt;Gotcha #8: Node memory&lt;/h3&gt;&lt;p&gt;This was the biggest bit of uncharted territory for me. Storing all that content in Node&#x27;s memory meant I eventually hit the memory ceiling! Keeping the post content in memory wasn&#x27;t an issue, and nor was storing the object that contained the summaries and the similarities. The killer (from Node&#x27;s perspective) was keeping all that &lt;em&gt;and&lt;/em&gt; the embeddings (i.e. a whole load of arrays each with 1536 floating points) &lt;em&gt;and&lt;/em&gt; not being smart about how many times I map and reduce the data &lt;em&gt;and&lt;/em&gt; trying to write them to a file. Probably a problem I would have avoided entirely if I had a CS degree and knew more about what &quot;Big O&quot; meant, but I got there in the end.&lt;/p&gt;&lt;h2 id=&quot;script-optimisation&quot;&gt;Script optimisation&lt;/h2&gt;&lt;p&gt;In the end I did quite a lot of &quot;optimisation&quot; work to get the script to a place where I could rely on it for all the scenarios in my blog workflow (calculating the initial &quot;related posts&quot; for a folder of markdown files, regenerating when new posts are added, handling changes to old post content, and removing and renaming posts).&lt;/p&gt;&lt;h3 id=&quot;caching&quot;&gt;Caching&lt;/h3&gt;&lt;p&gt;To avoid making repeated calls to the (expensive) API for content I&#x27;d already generated, I saved the results to a local cache file. If an embedding already existed in my cache, then I could skip fetching that API response a second time. This saved on both execution time and money spent. To invalidate the cache, I generated a &lt;code&gt;sha256&lt;/code&gt; hash from the post&#x27;s content (being sure to hash just the posts&#x27; title and content and &lt;em&gt;not&lt;/em&gt; the frontmatter, as the script saved it&#x27;s results in the posts&#x27; frontmatter and would therefore instantly invalidate the cache).&lt;/p&gt;&lt;h3 id=&quot;separate-cache-storage-for-embeddings&quot;&gt;Separate cache storage for embeddings&lt;/h3&gt;&lt;p&gt;The embedding arrays, being as long as they are, were a big memory-management concern. In the end, I cached those separately to the rest of the data and just saved a unique key for each embedding in the main cache. That meant that only the embeddings that I actually needed would be loaded into memory.&lt;/p&gt;&lt;h3 id=&quot;regenerate-only-when-content-has-actually-changed&quot;&gt;Regenerate only when content has actually changed&lt;/h3&gt;&lt;p&gt;With the cache/hash pattern in place, the script was able to tell if a post&#x27;s content had changed since the last time the script had been run. This meant I could skip API calls for any post that hadn&#x27;t changed, but a subtle &quot;gotcha&quot; was that I still needed to regenerate the related posts for a given post if any of the &lt;em&gt;relations&lt;/em&gt; had changed. Thankfully the embedding-based similarity calculation was fast and cheap and could be done without calling any APIs, so I only needed to regenerate the GPT-generated content if the relations had actually changed (I&#x27;d re-calculate the relations for every post, but then if the resulting relations were the same for a post, they could be safely skipped).&lt;/p&gt;&lt;h2 id=&quot;ship-it&quot;&gt;Ship it!&lt;/h2&gt;&lt;p&gt;So with the script complete the only thing left to do now is use the thing! The script is triggered by running the command &lt;code&gt;yarn related&lt;/code&gt;, and the output looks like this:&lt;/p&gt;&lt;figure class=&quot;post-content__image-wrapper&quot;&gt;&lt;img class=&quot;post-content__image&quot; src=&quot;/images/articles/recent-posts-terminal.png&quot; alt=&quot;Sceenshot of terminal output that reads: Generating data for 2023-10-27-llm-related-posts.
Generating summary with 5442 tokens
In this blog post, the author discusses how they used embeddings and GPT4 to generate related posts for their blog. Embeddings, derived from Large Language Model (LLM) technology, are used for ‘natural language search’, determining how similar two pieces of text are. This is useful for search applications and generating related blog posts.
The author provides a step-by-step guide to their automated process for generating related posts. They extract relevant content from all markdown files in their directory, generate a single post embedding with OpenAI&#x27;s API, find the top two most similar posts, compare these summaries, and writes this data back into the original markdown files.
Several hurdles were encountered along the way, including API rate limits, token limits, pricing, prompt engineering, inconsistency and hallucination in the output, deletion, and node memory. The author overcame these hurdles to use and optimize the script for their blog workflow.
Pausing to allow for openai API rate limiting. Proceed? (y/n)y
Calculating similarities
Comparing 2023-10-27-llm-related-posts to 47 other posts
Generating comparison between 2023-10-27-llm-related-posts &amp;amp; 2021-01-17-adding-rss
This is similar to what you&#x27;ve just read because it also deals with the topic of automated blog content distribution, specifically diving into the process of integrating an RSS feed, a channel which - like the LLM-based automatic posting from the first post - also bypasses algorithmic interferences.
Score: 0.7949880662192309
Generating comparison between 2023-10-27-llm-related-posts &amp;amp; 2022-02-25-wordle-node-script
This is similar to what you&#x27;ve just read because it delves into another practical application of scripting and data manipulation, this time focusing on a word game, which could interest readers who enjoy seeing real-world implications of coding and automated processes.
Score: 0.7938704968029567
Updating frontmatter
Complete!&quot;/&gt;&lt;figcaption class=&quot;post-content__caption&quot;&gt;Screenshot of the terminal output for the script that generates related posts for my blog.&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;That output is a little verbose, but it&#x27;s useful for debugging and for seeing what&#x27;s going on under the hood. The script also updates the frontmatter of the markdown files with the related posts data, so the final result looks like this:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-yaml&quot;&gt;&lt;span class=&quot;hljs-attr&quot;&gt;related:&lt;/span&gt;
    &lt;span class=&quot;hljs-bullet&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;relativePath:&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2021-01-17&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;-adding-rss&lt;/span&gt;
      &lt;span class=&quot;hljs-attr&quot;&gt;permalink:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;/adding-rss/&lt;/span&gt;
      &lt;span class=&quot;hljs-attr&quot;&gt;date:&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2021-01-17&lt;/span&gt;
      &lt;span class=&quot;hljs-attr&quot;&gt;tags:&lt;/span&gt;
          &lt;span class=&quot;hljs-bullet&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;articles&lt;/span&gt;
      &lt;span class=&quot;hljs-attr&quot;&gt;categories:&lt;/span&gt;
          &lt;span class=&quot;hljs-bullet&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;code&lt;/span&gt;
      &lt;span class=&quot;hljs-attr&quot;&gt;title:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;RSS&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2021&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(yes,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;it&#x27;s&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;still&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;thing)&lt;/span&gt;
      &lt;span class=&quot;hljs-attr&quot;&gt;excerpt:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;Adding&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;an&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;RSS&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;feed&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;an&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;Eleventy&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;site&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(mostly)&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;easy&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;peasy.&lt;/span&gt;
      &lt;span class=&quot;hljs-attr&quot;&gt;summary:&lt;/span&gt;
          &lt;span class=&quot;hljs-bullet&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;This&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;similar&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;what&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;you&#x27;ve&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;just&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;read&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;because&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;it&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;also&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;deals&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;the&lt;/span&gt;
            &lt;span class=&quot;hljs-string&quot;&gt;topic&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;automated&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;blog&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;content&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;distribution,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;specifically&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;diving&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;into&lt;/span&gt;
            &lt;span class=&quot;hljs-string&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;process&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;integrating&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;an&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;RSS&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;feed,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;channel&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;which&lt;/span&gt; &lt;span class=&quot;hljs-bullet&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;like&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;the&lt;/span&gt;
            &lt;span class=&quot;hljs-string&quot;&gt;LLM-based&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;automatic&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;posting&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;first&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;post&lt;/span&gt; &lt;span class=&quot;hljs-bullet&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;also&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;bypasses&lt;/span&gt;
            &lt;span class=&quot;hljs-string&quot;&gt;algorithmic&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;interferences.&lt;/span&gt;
      &lt;span class=&quot;hljs-attr&quot;&gt;score:&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0.7949880662192309&lt;/span&gt;
    &lt;span class=&quot;hljs-bullet&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;relativePath:&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2022-02-25&lt;/span&gt;&lt;span class=&quot;hljs-string&quot;&gt;-wordle-node-script&lt;/span&gt;
      &lt;span class=&quot;hljs-attr&quot;&gt;permalink:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;/wordle-node-script/&lt;/span&gt;
      &lt;span class=&quot;hljs-attr&quot;&gt;date:&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;2022-02-25&lt;/span&gt;
      &lt;span class=&quot;hljs-attr&quot;&gt;tags:&lt;/span&gt;
          &lt;span class=&quot;hljs-bullet&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;articles&lt;/span&gt;
          &lt;span class=&quot;hljs-bullet&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;featured&lt;/span&gt;
      &lt;span class=&quot;hljs-attr&quot;&gt;categories:&lt;/span&gt;
          &lt;span class=&quot;hljs-bullet&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;code&lt;/span&gt;
      &lt;span class=&quot;hljs-attr&quot;&gt;title:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;Improving&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;my&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;Wordle&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;opening&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;words&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;simple&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;scripts&lt;/span&gt;
      &lt;span class=&quot;hljs-attr&quot;&gt;excerpt:&lt;/span&gt;
          &lt;span class=&quot;hljs-string&quot;&gt;Crafting&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;command-line&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;scripts&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;calculate&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;most&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;frequently&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;used&lt;/span&gt;
          &lt;span class=&quot;hljs-string&quot;&gt;letters&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;Wordle&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;(and&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;finding&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;an&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;optimal&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;sequence&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;starting&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;words).&lt;/span&gt;
      &lt;span class=&quot;hljs-attr&quot;&gt;summary:&lt;/span&gt;
          &lt;span class=&quot;hljs-bullet&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;This&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;similar&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;what&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;you&#x27;ve&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;just&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;read&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;because&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;it&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;delves&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;into&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;another&lt;/span&gt;
            &lt;span class=&quot;hljs-string&quot;&gt;practical&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;application&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;scripting&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;manipulation,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;time&lt;/span&gt;
            &lt;span class=&quot;hljs-string&quot;&gt;focusing&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;word&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;game,&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;which&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;could&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;interest&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;readers&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;who&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;enjoy&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;seeing&lt;/span&gt;
            &lt;span class=&quot;hljs-string&quot;&gt;real-world&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;implications&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;coding&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;automated&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;processes.&lt;/span&gt;
      &lt;span class=&quot;hljs-attr&quot;&gt;score:&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0.7938704968029567&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;That YAML frontmatter gives me enough content to build a nice little template wrapper for the related posts section of my site. And with all that complete, you should be able to view the real-world results of this script at the bottom of this very page. The &quot;related posts&quot; functionality is live on this blog, and I&#x27;m pretty happy with the results. I&#x27;ve been using it for a few weeks now and it&#x27;s been working well.&lt;/p&gt;&lt;h3 id=&quot;how-much-does-it-cost-to-run&quot;&gt;How much does it cost to run?&lt;/h3&gt;&lt;p&gt;For the record, running that script with a single new blog post resulted in four calls to the GPT4 &lt;code&gt;completions&lt;/code&gt; API endpoint, which cost roughly thirty cents (prices in USD as that&#x27;s what OpenAI use in their billing).&lt;/p&gt;&lt;h3 id=&quot;is-the-script-available-for-anyone-to-use&quot;&gt;Is the script available for anyone to use?&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;Update:&lt;/strong&gt; Yes, yes it is. I&#x27;ve opend-sourced the script and published it to NPM. You can find it here: &lt;a href=&quot;https://github.com/tomhazledine/related-posts&quot;&gt;github.com/tomhazledine/related-posts&lt;/a&gt;. Currently needs an OpenAI API key to work, but I&#x27;m working on a way to hook it up to other LLMs. If you have any questions or suggestions feel free to raise a PR or @ me on Mastodon (I&#x27;m &lt;a href=&quot;https://mastodon.social/@tomhazledine&quot;&gt;@tomhazledine@mastodon.social&lt;/a&gt;).&lt;/p&gt;&lt;p&gt;&lt;del&gt;Not yet, but it could be soon. If you&#x27;re interested in implementing something similar for your own site, I&#x27;m not far off packaging the script into something universal that I can open-source on NPM. So if that would be useful to you, then @ me on Mastodon (I&#x27;m &lt;a href=&quot;https://mastodon.social/@tomhazledine&quot;&gt;@tomhazledine@mastodon.social&lt;/a&gt;). If more than a couple of people ask me, I&#x27;ll happilly put in the work to make the script more generic and publish it. It&#x27;s 90% done already, but as with all software projects I&#x27;m anticipating the final 10% of the work will take 90% of the time!&lt;/del&gt;&lt;/p&gt;</content></entry><entry><title>Improving SVG chart interactivity with Voronoi diagrams</title><link href="https://tomhazledine.com/improving-svg-chart-interactivity-with-voronoi-diagrams/"/><updated>2023-09-30T00:00:00Z</updated><id>https://tomhazledine.com/improving-svg-chart-interactivity-with-voronoi-diagrams/</id><content type="html">&lt;p&gt;Scatter plots are a fun way to visualize data, showing both the relationship between two variables and the distribution of data points. And they&#x27;re reasonably trivial to create in web-friendly SVG (especially if you get a library like &lt;a href=&quot;https://d3js.org/&quot;&gt;D3.js&lt;/a&gt; involved). One issue, though, is hover interactions.&lt;/p&gt;&lt;p&gt;I&#x27;ve made so many graphs that include hover-triggered tooltips, and the sheer precision required to target those points with a cursor can be infuriating. You can solve this UX problem by making the points (and thus the hover-targets) bigger, but that inteferes with the design of the chart as a whole. For charts with complex datasets, it&#x27;s often not feasible to make the points big enough to be easily targeted.&lt;/p&gt;&lt;figure class=&quot;post-content__image-wrapper&quot;&gt;&lt;div id=&quot;voronoi-example-01&quot;&gt;&lt;div class=&quot;voronoi-scatter__placeholder&quot;/&gt;&lt;/div&gt;&lt;figcaption class=&quot;post-content__caption&quot;&gt;Tiny points require precision to target with a cursor&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2 id=&quot;adding-a-hitbox-to-our-points&quot;&gt;Adding a hitbox to our points&lt;/h2&gt;&lt;p&gt;When I&#x27;m building charts like these I&#x27;m using SVG, so there are plenty of options to try. One approach is to really dive into the &quot;hitbox&quot; analogy from video-games. The visual part of the datapoint doesn&#x27;t have to be the only part you can target with the mouse!&lt;/p&gt;&lt;div class=&quot;cluster cluster--not-narrow&quot;&gt;&lt;blockquote class=&quot;width-66&quot;&gt;&lt;h3&gt;What is a &quot;hitbox&quot;?&lt;/h3&gt;&lt;p&gt;In video games, &lt;strong&gt;hitbox&lt;/strong&gt; is a term used to describe the area in which a character can be hit by an attack. While a character&#x27;s appearance can be a complex shape, the hitbox is often much simpler; a primitive circle or rectangle that roughly covers the area of the character.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Visual size `!==` hitbox size.&lt;/strong&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;figure class=&quot;post-content__image-wrapper width-33&quot;&gt;&lt;img src=&quot;/images/articles/voronoi-minecraft-hitbox.svg&quot; alt=&quot;Diagram of a character with a hitbox that extends beyond the visual portion of the character&quot;/&gt;&lt;figcaption class=&quot;post-content__caption&quot;&gt;Illustration of how a hitbox can extend beyond the visual portion of a character&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;&lt;h2 id=&quot;make-the-logo-hitbox-bigger&quot;&gt;Make the &lt;del&gt;logo&lt;/del&gt; &lt;em&gt;hitbox&lt;/em&gt; bigger&lt;/h2&gt;&lt;p&gt;With SVG, we can use the &lt;code&gt;&amp;lt;g&gt;&lt;/code&gt; tag to &quot;group&quot; several elements together. This means we can replace a datapoint&#x27;s single &lt;code&gt;&amp;lt;circle&gt;&lt;/code&gt; element with &lt;em&gt;two&lt;/em&gt; circles and treat them as a single element.&lt;/p&gt;&lt;p&gt;In this example, we have a circle with a radius of &lt;code&gt;2&lt;/code&gt; that fires the &lt;code&gt;handleHover()&lt;/code&gt; event when hovered. &lt;em&gt;(Note we&#x27;re assuming the SVG is being writen as a React component in JSX, with &lt;code&gt;d&lt;/code&gt; as the data point and &lt;code&gt;handleHover&lt;/code&gt; as the event handler.)&lt;/em&gt;&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-jsx&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;DataPoint&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;{ d, handleHover }&lt;/span&gt;) =&gt; (
    &lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;circle&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;r&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{2}&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;cx&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{d.x}&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;cy&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{d.y}&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;onMouseOver&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{handleHover}&lt;/span&gt; /&gt;&lt;/span&gt;&lt;/span&gt;
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;To add a bigger hitbox to this point, we can add a second circle with a larger radius and no fill. Because we&#x27;re adding &lt;code&gt;fill: &quot;none&quot;&lt;/code&gt; as a style rule this circle will be invisible, but it will still trigger the &lt;code&gt;handleHover()&lt;/code&gt; event when hovered if we set &lt;code&gt;pointerEvents&lt;/code&gt; to &lt;code&gt;&quot;all&quot;&lt;/code&gt;.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-jsx&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;DataPoint&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;{ d, handleHover }&lt;/span&gt;) =&gt; (
    &lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;g&lt;/span&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;circle&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;r&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{2}&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;cx&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{d.x}&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;cy&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{d.y}&lt;/span&gt; /&gt;&lt;/span&gt;
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;circle&lt;/span&gt;
            &lt;span class=&quot;hljs-attr&quot;&gt;r&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{10}&lt;/span&gt;
            &lt;span class=&quot;hljs-attr&quot;&gt;cx&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{d.x}&lt;/span&gt;
            &lt;span class=&quot;hljs-attr&quot;&gt;cy&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{d.y}&lt;/span&gt;
            &lt;span class=&quot;hljs-attr&quot;&gt;onMouseOver&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{handleHover}&lt;/span&gt;
            &lt;span class=&quot;hljs-attr&quot;&gt;style&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{{&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;fill:&lt;/span&gt; &quot;&lt;span class=&quot;hljs-attr&quot;&gt;none&lt;/span&gt;&quot; }}
            &lt;span class=&quot;hljs-attr&quot;&gt;pointerEvents&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;all&quot;&lt;/span&gt;
        /&gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;g&lt;/span&gt;&gt;&lt;/span&gt;&lt;/span&gt;
);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;So now we can render a scatter graph with the original design we wanted, but with the added benefit of a larger hitbox for each point.&lt;/p&gt;&lt;figure class=&quot;post-content__image-wrapper&quot;&gt;&lt;div id=&quot;voronoi-example-02&quot;&gt;&lt;div class=&quot;voronoi-scatter__placeholder&quot;/&gt;&lt;/div&gt;&lt;figcaption class=&quot;post-content__caption&quot;&gt;The hitbox is now larger than the visual portion of the datapoint&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2 id=&quot;more-hitboxes-more-problems&quot;&gt;More hitboxes, more problems&lt;/h2&gt;&lt;p&gt;This approach works well for charts with sparse datasets, but it doesn&#x27;t scale well. We&#x27;ve now effectively added a buffer zone around each of our points that will obscure anything behind it. This means that if we have a lot of points, we&#x27;ll end up with a lot of overlapping hitboxes. And overlapping hitboxes means that we could easily be trying to hover over one point, but accidentally trigger the hover event for a different point.&lt;/p&gt;&lt;p&gt;Ideally we&#x27;d like to have hitboxes that are as large as possible &lt;em&gt;without overlapping any other points&lt;/em&gt;. What we need, it turns out, is a &lt;strong&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Voronoi_diagram&quot;&gt;Voronoi diagram&lt;/a&gt;&lt;/strong&gt;.&lt;/p&gt;&lt;blockquote&gt;&lt;h2 id=&quot;what-is-a-voronoi-diagram&quot;&gt;What is a Voronoi diagram?&lt;/h2&gt;&lt;p&gt;At its simplest, a Voronoi diagram divides our chart area into &quot;cells&quot; that are each assigned to a single datapoint. The cell for a given datapoint is the area of the chart that is closer to that datapoint than any other datapoint.&lt;/p&gt;&lt;/blockquote&gt;&lt;figure class=&quot;post-content__image-wrapper&quot;&gt;&lt;div id=&quot;voronoi-example-03&quot;&gt;&lt;div class=&quot;voronoi-scatter__placeholder&quot;/&gt;&lt;/div&gt;&lt;figcaption class=&quot;post-content__caption&quot;&gt;Example Voronoi diagram&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;Voronoi diagrams are named after the Russian mathematician Georgy Voronoy, who introduced the concept in 1908 (although the concept can be traced all with way back to Descartes). Mathematically, the process of creating Voronoi diagrams is a complicated procedure involving &lt;a href=&quot;https://en.wikipedia.org/wiki/Delaunay_triangulation&quot;&gt;Delaunay triangulation&lt;/a&gt; and &quot;circumcircles&quot; (all a mystery to a mere code monkey like myself!), but thankfully we don&#x27;t have to deal with that directlty when creating our charts in SVG.&lt;/p&gt;&lt;h2 id=&quot;voronoi-diagrams-in-d3js&quot;&gt;Voronoi diagrams in D3.js&lt;/h2&gt;&lt;p&gt;If you&#x27;re not familiar with D3.js, it&#x27;s a JavaScript library for creating data visualizations in SVG (it can do &lt;code&gt;canvas&lt;/code&gt; stuff too, but all I ever use it for is generating path data to pipe into SVGs). I use it all the time for converting data into charts and graphs.&lt;/p&gt;&lt;p&gt;It&#x27;s a powerful library, but it can be a bit daunting at times and a lot of the demo code you can find (which is plentiful and inspiring) assumes a D3-only workflow. My approach is a bit more peacemeal, as I just use the parts of D3.js that I need to generate path data and coordinates that I then &quot;manually&quot; add to SVG in JSX.&lt;/p&gt;&lt;p&gt;The circles in the example-code above aren&#x27;t using D3 directly, but my normal workflow is to use D3 to map my data to a pixel domain, so the &lt;code&gt;cx&lt;/code&gt; and &lt;code&gt;cy&lt;/code&gt; data &lt;em&gt;will&lt;/em&gt; have been run through a D3 &quot;scale&quot; function. &lt;em&gt;I&#x27;ll write more about how I use D3 scales in a future post.&lt;/em&gt;&lt;/p&gt;&lt;p&gt;So, to create a Voronoi diagram in D3, we need to use the &lt;code&gt;Delaunay&lt;/code&gt; and &lt;code&gt;Voronoi&lt;/code&gt; modules. We can then use the &lt;code&gt;Delaunay.from()&lt;/code&gt; method to create a Delaunay triangulation from our data, and the &lt;code&gt;voronoi()&lt;/code&gt; method to create a Voronoi diagram from that triangulation.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;React&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;react&quot;&lt;/span&gt;;
&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; { &lt;span class=&quot;hljs-title class_&quot;&gt;Delaunay&lt;/span&gt; } &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;d3-delaunay&quot;&lt;/span&gt;;

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;HoverTargets&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;{ data, scales, layout, handleHover }&lt;/span&gt;) =&gt; {
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; delaunay = &lt;span class=&quot;hljs-title class_&quot;&gt;Delaunay&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;from&lt;/span&gt;(
        data.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;d&lt;/span&gt; =&gt;&lt;/span&gt; [scales.&lt;span class=&quot;hljs-title function_&quot;&gt;x&lt;/span&gt;(d.&lt;span class=&quot;hljs-property&quot;&gt;x&lt;/span&gt;), scales.&lt;span class=&quot;hljs-title function_&quot;&gt;y&lt;/span&gt;(d.&lt;span class=&quot;hljs-property&quot;&gt;y&lt;/span&gt;)])
    );

    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; voronoi = delaunay.&lt;span class=&quot;hljs-title function_&quot;&gt;voronoi&lt;/span&gt;([
        layout.&lt;span class=&quot;hljs-property&quot;&gt;graph&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;left&lt;/span&gt;,
        layout.&lt;span class=&quot;hljs-property&quot;&gt;graph&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;top&lt;/span&gt;,
        layout.&lt;span class=&quot;hljs-property&quot;&gt;graph&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;right&lt;/span&gt;,
        layout.&lt;span class=&quot;hljs-property&quot;&gt;graph&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;bottom&lt;/span&gt;
    ]);

    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; shapes = data.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;d, i&lt;/span&gt;) =&gt;&lt;/span&gt; {
        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; path = voronoi.&lt;span class=&quot;hljs-title function_&quot;&gt;renderCell&lt;/span&gt;(i);
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (
            &lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;path&lt;/span&gt;
                &lt;span class=&quot;hljs-attr&quot;&gt;key&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{&lt;/span&gt;`&lt;span class=&quot;hljs-attr&quot;&gt;hover-target-&lt;/span&gt;${&lt;span class=&quot;hljs-attr&quot;&gt;i&lt;/span&gt;}`}
                &lt;span class=&quot;hljs-attr&quot;&gt;pointerEvents&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;all&quot;&lt;/span&gt;
                &lt;span class=&quot;hljs-attr&quot;&gt;d&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{path}&lt;/span&gt;
                &lt;span class=&quot;hljs-attr&quot;&gt;onMouseOver&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{e&lt;/span&gt; =&gt;&lt;/span&gt; handleHover(e, d)}
            /&gt;&lt;/span&gt;
        );
    });

    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;g&lt;/span&gt;&gt;&lt;/span&gt;{shapes}&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;g&lt;/span&gt;&gt;&lt;/span&gt;&lt;/span&gt;;
};

&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;HoverTargets&lt;/span&gt;;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;In this example we created a &lt;code&gt;HoverTargets&lt;/code&gt; component that will map over our data and return an SVG &lt;code&gt;&amp;lt;path&gt;&lt;/code&gt; for each point (this will be the voronoi &quot;cell&quot;). Within the component we create a Delaunay triangulation object from our data points using the &lt;code&gt;Delaunay.from()&lt;/code&gt; method. The &lt;code&gt;data.map(d =&gt; [scales.x(d.x), scales.y(d.y)])&lt;/code&gt; part of the code uses D3 scales to translate our data points into pixel positions.&lt;/p&gt;&lt;p&gt;Once we have the Delaunay triangulation, we create a Voronoi diagram by calling &lt;code&gt;delaunay.voronoi()&lt;/code&gt; with the boundaries of our graph area as an argument. The result is a Voronoi diagram that perfectly fits within the confines of our chart, and it automatically divides the space into cells that correspond to our data points.&lt;/p&gt;&lt;p&gt;The we populate our &lt;code&gt;&amp;lt;path&gt;&lt;/code&gt; into the &lt;code&gt;shapes&lt;/code&gt; array, with the &lt;code&gt;d&lt;/code&gt; value for each path based on the Voronoi cells. When a cell is hovered over, the handleHover function is called, and the associated data point is passed as an argument. This gives us a perfect hitbox for each point.&lt;/p&gt;&lt;figure class=&quot;post-content__image-wrapper&quot;&gt;&lt;div id=&quot;voronoi-example-04&quot;&gt;&lt;div class=&quot;voronoi-scatter__placeholder&quot;/&gt;&lt;/div&gt;&lt;figcaption class=&quot;post-content__caption&quot;&gt;Voronoi diagram incorporated into a scatter plot&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2 id=&quot;making-it-interactive&quot;&gt;Making it interactive&lt;/h2&gt;&lt;p&gt;The final step is to make the Voronoi diagram interactive by adding an &lt;code&gt;onMouseOver&lt;/code&gt; event listener to each Voronoi cell. Then, when the cell is hovered that listener passes the associated data point to the component&#x27;s state, which we can then use to apply our hover effects to the correct point on the graph. This can include stylistic effects (like visually highlighting the active point, as in the example below) or functional effects like showing a tooltip or adjusting other parts of the graph.&lt;/p&gt;&lt;figure class=&quot;post-content__image-wrapper&quot;&gt;&lt;div id=&quot;voronoi-example-05&quot;&gt;&lt;div class=&quot;voronoi-scatter__placeholder&quot;/&gt;&lt;/div&gt;&lt;figcaption class=&quot;post-content__caption&quot;&gt;Using the Voronoi shapes as hitboxes for the points. The first diagram shows the hitboxes, and the second shows the points with the hitboxes hidden.&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;I&#x27;ll acknowledge that this overview does contain a few &lt;em&gt;&lt;a href=&quot;https://knowyourmeme.com/memes/how-to-draw-an-owl&quot;&gt;&quot;draw the rest of the owl&quot;&lt;/a&gt;&lt;/em&gt; moments. I&#x27;ve assumed a certain amount of familiarity with D3.js and React, but if you already know how to attach event listeners and toggle class names based on state, then this article should give you all you need to get cracing with Voronoi diagrams.&lt;/p&gt;&lt;p&gt;By using Voronoi diagrams, we can drastically improve the interactivity of SVG charts, making them more user-friendly and accurate. The best part is that it&#x27;s all possible with just a few lines of additional code when you&#x27;re already using D3.js. So the next time you find yourself grappling with hover issues on your scatter plot or any other kind of chart, give Voronoi diagrams a try.&lt;/p&gt;&lt;p&gt;To summarize:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;When building SVG graphs don&#x27;t rely on hover interactions on visually small elements - they are hard to target with a cursor.&lt;/li&gt;&lt;li&gt;You can use invisible elements to extend the &quot;hitbox&quot; of your points, but the quick-and-dirty approach (i.e. just makeing the points bigger) can lead to overlapping hitboxes and inaccurate hover interactions.&lt;/li&gt;&lt;li&gt;Voronoi diagrams are a great way to create hitboxes that are as large as possible without overlapping any other points.&lt;/li&gt;&lt;li&gt;If you&#x27;re using D3.js, the &lt;code&gt;d3-delaunay&lt;/code&gt; package is a great way to create Voronoi diagrams from your data.&lt;/li&gt;&lt;/ol&gt;</content></entry><entry><title>What if minesweeper kept getting harder?</title><link href="https://tomhazledine.com/what-if-minesweeper-kept-getting-harder/"/><updated>2023-08-31T00:00:00Z</updated><id>https://tomhazledine.com/what-if-minesweeper-kept-getting-harder/</id><content type="html">&lt;p&gt;I&#x27;ve burnt thousands of hours playing &lt;a href=&quot;https://en.wikipedia.org/wiki/Minesweeper_(video_game)&quot;&gt;Minesweeper&lt;/a&gt; over the years, and my preferred method of keeping things interesting was to add a mine everytime I completed the grid. I often wondered if someone would automate this process, and (as is the way of all software nerds) I inevitably decided to do it myself.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://incremental-minesweeper.netlify.app/&quot;&gt;Play my incrementally harder version here&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://incremental-minesweeper.netlify.app/&quot;&gt;&lt;img src=&quot;/images/articles/minesweeper-screenshot-400.png&quot; alt=&quot;Screenshot of my version of Minesweeper, showing a lost game of minesweeper: a 10-by-ten board with 10 mines marked in red in random positions. The player has cleared a portion of the top-right of the board before hitting a mine. They are currently on level 10, and now have the option to restart at level 9. Their high score is shows as being 20.&quot;/&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;This soon turned into &lt;em&gt;quite&lt;/em&gt; the project, so I&#x27;m explaining myself here. But before I get to that, it&#x27;s worth explaining how Minesweeper works (for those of you who &lt;em&gt;didn&#x27;t&lt;/em&gt; sink thousands of hours into Windows 3.11/95/98).&lt;/p&gt;&lt;h2 id=&quot;how-to-play-minesweeper&quot;&gt;How to play Minesweeper&lt;/h2&gt;&lt;p&gt;Playing Minesweeper involves clicking cells on a grid to reveal their contents. If you click a cell that contains a mine, you lose. If you clear all the cells that don&#x27;t contain a mine, you win.&lt;/p&gt;&lt;p&gt;The basic controls:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Left-click (or a tap on a touch-enabled device) reveals a cell.&lt;/li&gt;&lt;li&gt;Right-click (or a long-press) flags&lt;sup id=&quot;fnref-1&quot;&gt;&lt;a href=&quot;#fn-1&quot; class=&quot;footnote-ref&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; or unflags a cell.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;If the cell you click is &lt;em&gt;adjacent&lt;/em&gt; to any mines, it will show you the number of mines that it is adjacent to. For example, if a cell has a &lt;code&gt;1&lt;/code&gt; on it, there is 1 mine next to that cell. This could be above, below, left, right, or diagonal to the numbered cell.&lt;/p&gt;&lt;p&gt;This means you can use logic to deduce where the mines are. For example, if a &lt;code&gt;8&lt;/code&gt; is surrounded by eight unrevealed cells you can deduce that &lt;em&gt;every&lt;/em&gt; surrounding cell contains a mine.&lt;/p&gt;&lt;p&gt;If you click a cell that is blank (i.e. contains no number), all the surrounding cells will be revealed. If any of those cells are also blank, all the surrounding cells of those cells will be revealed, and so on. This is called a &quot;cascade&quot; and is a key part of keeping the gameplay speedy.&lt;/p&gt;&lt;p&gt;Take this example 4x4 grid version of the game...&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/articles/minesweeper.svg&quot; alt=&quot;3 images of a 4x4 minesweeper board. Board 1 is completely uncleared except for cell B3, which shows a number 1. The second board is a continuation of the game, and shows more cleared cells - with only four left uncleared. Board 3 shows the game in a loss state, with two mines exposed and marked in red.&quot;/&gt;&lt;/p&gt;&lt;ol&gt;&lt;li&gt;For the first move, the player clicks to reveal cell &lt;strong&gt;B3&lt;/strong&gt;. It contains a &lt;code&gt;1&lt;/code&gt;, so the player knows that there is one mine adjacent to that cell, but it isn&#x27;t a particularly useful opening move. There&#x27;s no clue &lt;em&gt;which&lt;/em&gt; of the adjacent cells contains the mine.&lt;/li&gt;&lt;li&gt;The player then clicks to reveal cell &lt;strong&gt;A3&lt;/strong&gt;. This cell is blank, so the &quot;cascade&quot; kicks in and reveals all the connected black cells and the numbered cells that are adjoining. This tells a smart player that cells &lt;strong&gt;C3&lt;/strong&gt; and &lt;strong&gt;D3&lt;/strong&gt; must contain mines.&lt;/li&gt;&lt;li&gt;Our player, however, is &lt;em&gt;not&lt;/em&gt; smart and clicks on &lt;strong&gt;C3&lt;/strong&gt;. This is a mine, and they lose the game.&lt;/li&gt;&lt;/ol&gt;&lt;h2 id=&quot;how-does-my-version-differ-from-classic-minesweeper&quot;&gt;How does my version differ from &quot;classic&quot; Minesweeper?&lt;/h2&gt;&lt;h3 id=&quot;1-difficulty-the-main-point-of-making-my-version&quot;&gt;1. Difficulty (the main point of making my version)&lt;/h3&gt;&lt;p&gt;In my version, the difficulty increases as you play. This is achieved by adding a mine to the grid every time you complete it. This means that the grid gets more difficult to complete as you play, and the number of mines becomes your score.&lt;/p&gt;&lt;h3 id=&quot;2-size&quot;&gt;2. Size&lt;/h3&gt;&lt;p&gt;For my version, I&#x27;ve constrained things to a 10 x 10 grid. The primary reason for this is that I wanted to make the game playable on mobile devices, and ten-by-ten is about the largest I could fit on a phone screen and still be able to play comfortably with my fat and clumsy fingers.&lt;/p&gt;&lt;h3 id=&quot;4-you-always-start-with-a-clear-cell&quot;&gt;4. You always start with a clear cell&lt;/h3&gt;&lt;p&gt;No matter which cell you click first, it will always be a clear cell. This is to avoid the frustration of losing on the first click, which is a common occurrence in the original game.&lt;/p&gt;&lt;h3 id=&quot;5-flagging&quot;&gt;5. Flagging&lt;/h3&gt;&lt;p&gt;At first I left the concept of &quot;flagging&quot; or &quot;marking&quot; cells out of my version, taking the view that &quot;flagging is for chumps&quot;. But early playtesters were adamant I add it, so I caved to the pressure.&lt;/p&gt;&lt;h2 id=&quot;how-well-will-you-do&quot;&gt;How well will you do?&lt;/h2&gt;&lt;p&gt;I&#x27;ve been tinkering with this version for about a year now, and my all-time high score is 36. Can you beat that? If so, take a screenshot and show me &lt;a href=&quot;https://mastodon.social/@tomhazledine&quot;&gt;on Mastodon (@tomhazledine@mastodon.social)&lt;/a&gt;.&lt;/p&gt;&lt;div class=&quot;footnotes&quot;&gt;&lt;hr/&gt;&lt;ol&gt;&lt;li id=&quot;fn-1&quot;&gt;&lt;strong&gt;Note:&lt;/strong&gt; &quot;flagging&quot; (or &quot;marking&quot; or &quot;chording&quot; in some versions of the game) is for chumps who aren&#x27;t confident enough to yolo their way to victory.&lt;a href=&quot;#fnref-1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;</content></entry><entry><title>Adding client side search to a static site</title><link href="https://tomhazledine.com/client-side-search-static-site/"/><updated>2023-05-31T00:00:00Z</updated><id>https://tomhazledine.com/client-side-search-static-site/</id><content type="html">&lt;p&gt;In the bad old days (a.k.a. &quot;a couple of years ago&quot;) adding search functionality to a statically-generated site required third-party services that provided a search backend (like Algolia or Elastic or whatever). Thankfully we can now run a (simple) search using only client-side tech thanks to libraries like &lt;a href=&quot;https://fusejs.io&quot;&gt;Fuse.js&lt;/a&gt;. As Fuse say in their docs: &lt;em&gt;&quot;you don’t need to setup a dedicated backend just to handle search.&quot;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;So how does it all work? Why do we even want site search functionality? And what are the steps required to add a decent search experience to a statically-generated site like mine?&lt;/p&gt;&lt;h2 id=&quot;why-add-search-to-a-blog-like-this&quot;&gt;Why add search to a blog like this?&lt;/h2&gt;&lt;p&gt;It&#x27;s a good question, especially when you consider that Google exists already. But a built-in search function does significantly improve the user experience for a site like this.&lt;/p&gt;&lt;p&gt;It offers readers a fast and direct way to find the specific content they&#x27;re interested in, eliminating the need to navigate through multiple pages or understand the overall structure of the site. This ease of use not only enhances the site&#x27;s accessibility but also increases engagement, as readers are more likely to stay longer and explore more content if they can easily locate the bits that interest them.&lt;/p&gt;&lt;h2 id=&quot;search-fundamentals&quot;&gt;Search fundamentals&lt;/h2&gt;&lt;p&gt;At its simplest, a site-search function is a tool that allows users to search for specific content within a website. When a user enters a search query into the search box on the site, the search function scans the content of the site to find pages that match the query and returns a list of results.&lt;/p&gt;&lt;p&gt;This is normally a two-step process that consists of &quot;indexing&quot; and &quot;querying&quot;.&lt;/p&gt;&lt;p&gt;To start, an index is created of the content. The index is a representation of all the information on the site that could be relevant to a search and is specifically created to enable efficient searching. The index should contain metadata about each page, such as its title, description, and keywords, as well as the content of the page itself.&lt;/p&gt;&lt;p&gt;Then, when a search is made, the search engine queries this index to find pages that match the query. The results are then displayed to the user in a list, ordered by relevancy. In the context of a content-search function for a website, the relevance of search results could be determined by factors such as the presence of keywords in the page title, the frequency of keywords in the page content, and the overall quality of the content itself.&lt;/p&gt;&lt;p&gt;So to build an effective search engine for a site, we need to have two key features:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;A way to create an index of the site&#x27;s content.&lt;/li&gt;&lt;li&gt;A way to query that index to return relevant results.&lt;/li&gt;&lt;/ol&gt;&lt;h2 id=&quot;the-two-options-server-side-and-client-side&quot;&gt;The two options: server-side and client-side&lt;/h2&gt;&lt;p&gt;There are two primary options when it comes to implementing search. The traditional approach is &quot;server-side&quot;, where the search is executed on a server. The alternative, which we&#x27;ll be focusing on, is &quot;client-side&quot;, where the search is performed in the user&#x27;s web browser.&lt;/p&gt;&lt;p&gt;There are benefits and trade-offs for both approaches, but in my view client-side search is the best option for a site like mine.&lt;/p&gt;&lt;h2 id=&quot;why-not-use-server-side-search&quot;&gt;Why not use server-side search?&lt;/h2&gt;&lt;p&gt;In the past when creating static sites that needed a search function I&#x27;ve used an external service. These have been server-side solutions like Elastic or Algolia, which index your site&#x27;s content for you and provide API endpoints for performing searches.&lt;/p&gt;&lt;h3 id=&quot;1-cost&quot;&gt;1. Cost&lt;/h3&gt;&lt;p&gt;The biggest obstacle to adding server-side search to a static site is cost. Even though &lt;em&gt;my&lt;/em&gt; static site doesn&#x27;t require a server, if I&#x27;m using server-side search there has to be server &lt;em&gt;somewhere&lt;/em&gt;. While there are free tiers available for many server-side services, it&#x27;s likely that I&#x27;d need a paid plan. Costs can escalate quickly depending on the amount of data indexed and the number of search queries made, and for a &quot;continual tinkerer&quot; like myself the amount of fine-tuning and customisation I&#x27;d want would inevitably result in expensive bills.&lt;/p&gt;&lt;h3 id=&quot;2-fun&quot;&gt;2. Fun&lt;/h3&gt;&lt;p&gt;For a real business deciding between building or buying a complicated second-order function like search, it generally makes sense to let a third party handle the complexity in exchange for money. As highlighted in the point above, I&#x27;m not keen on splashing too much cash on this project (aside from ethereal &quot;career&quot; benefits, this blog generates no income at all) but there are other benefits to building it myself.&lt;/p&gt;&lt;p&gt;For starters, having a proper project to work on is a great way to reinforce things I&#x27;ve learnt. So by building my own search function I&#x27;ll inevitably learn more about building search functions. Plus I actually enjoy these kinds of nitty-gritty software challenges.&lt;/p&gt;&lt;p&gt;Building it myself will also give me more control over the end result. I&#x27;ll be able to fine-tune and customise as much as I like, without having to fight too much against a system that has it&#x27;s own conventions and defined way of doing things. And that&#x27;s what my whole career has been built on thus far; learning how to do things myself to get around the limitations of off-the-shelf products.&lt;/p&gt;&lt;p&gt;But I&#x27;m not willing to compromise on the &quot;staticness&quot; of this site, so if I&#x27;m determined not to use an external service then I&#x27;ll have to find an option that works client-side.&lt;/p&gt;&lt;h2 id=&quot;how-does-client-side-search-work&quot;&gt;How does client-side search work?&lt;/h2&gt;&lt;p&gt;For a static content site, client-side search should be a two step process. The first step is to generate an index whenever a site is built. The second step is to provide frontend components to perform a query against that index.&lt;/p&gt;&lt;p&gt;The index-creation should be handled by the SSG, and the query functionality would be handled by component-level JavaScript.&lt;/p&gt;&lt;h3 id=&quot;creating-the-index&quot;&gt;Creating the index&lt;/h3&gt;&lt;p&gt;Part of the power of using a Static Site Generator is that you can interact with all your content at build time. By generating a search index when the site is built, I&#x27;m able to leverage this power to address one of the biggest problems with any client-side search: generating an index is a costly operation.&lt;/p&gt;&lt;p&gt;To perform a search, the search engine needs an index to query against, and to make an index requires the code to be able to &quot;see&quot; &lt;em&gt;all&lt;/em&gt; the content within a site. Server-side search engines traditionally &quot;crawl&quot; all the pages of a website to generate an index that is then stored server-side, but client-side search engines often generate their index in the client at the time a search is made. Using an SSG allows me to get the best of both worlds by generating the index at build time.&lt;/p&gt;&lt;p&gt;This approach comes with an extra benefit, too: because the index is generated at build time, whenever the site&#x27;s content changes (and thus triggers a rebuild) the index is automatically regenerated. No more waiting for crawlers or manually-triggered re-indexing. Any search results &lt;em&gt;always&lt;/em&gt; represent the most up-to-date content on the site.&lt;/p&gt;&lt;p&gt;In a client-side context, the best format for a search index is a JSON array. Each page in the site becomes an object in the array, each with a &lt;code&gt;title&lt;/code&gt;, &lt;code&gt;url&lt;/code&gt;, and &lt;code&gt;content&lt;/code&gt; keys. These are the keys I&#x27;ve chosen to use, but the beauty of &quot;rolling your own&quot; is that you can easily tailor this to your own content. Are &quot;tags&quot; crucial to your information architecture? Include them in the search index. The same goes for anything else you think might contribute to the relevancy of search results; categories, keywords, meta-data, etc. If you think it will produce better results, include it in the index (and then test and refine over time).&lt;/p&gt;&lt;p&gt;Once created, I need a way for my client-side JavaScript to be able to read the index, so I need to make it available to the browser. The easiest way to do this is to save the index as a JSON file and include it in the site&#x27;s build output. This way the index is available to the browser at the same time as the rest of the site&#x27;s content. You can see the index for this site here: &lt;a href=&quot;https://tomhazledine.com/search-data.json&quot;&gt;search-data.json&lt;/a&gt;&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-json&quot;&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Adding client side search to a static site&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;&quot;url&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;/client-side-search-static-site/&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;
            &lt;span class=&quot;hljs-string&quot;&gt;&quot;In the bad old days (of, like, a couple of years ago) adding search functionality to a statically-generated site required third-party services that provided a search backend (like Algolia or Elastic or whatever). &quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;hljs-string&quot;&gt;&quot;Thankfully we can now run a (simple) search using only client-side tech thanks to libraries like Fuse.js. &quot;&lt;/span&gt;
            &lt;span class=&quot;hljs-comment&quot;&gt;// etc...&lt;/span&gt;
        &lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;hljs-punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Oblique Strategies via npx&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;&quot;url&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;/oblique-strategies-via-npx/&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;hljs-punctuation&quot;&gt;[&lt;/span&gt;
            &lt;span class=&quot;hljs-string&quot;&gt;&quot;In 1975 Brian Eno and Peter Schmidt released their Oblique Strategies; &amp;amp;quot;Over One Hundred Worthwhile Dilemmas&amp;amp;quot;&quot;&lt;/span&gt;&lt;span class=&quot;hljs-punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;hljs-string&quot;&gt;&quot;The Oblique Strategies constitute a set of over 100 cards, each of which is a suggestion of a course of action or thinking to assist in creative situations.&quot;&lt;/span&gt;
            &lt;span class=&quot;hljs-comment&quot;&gt;// etc...&lt;/span&gt;
        &lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;hljs-punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;hljs-comment&quot;&gt;// etc...&lt;/span&gt;
&lt;span class=&quot;hljs-punctuation&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; Because of the way our matching engine works (see the &lt;a href=&quot;#fusejs&quot;&gt;section on Fuse.js&lt;/a&gt; later in this article), the content body is split into an array of sentences. This is achieved using &lt;code&gt;Intl.Segmenter&lt;/code&gt;:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; segmenter = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Intl&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;Segmenter&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;en&quot;&lt;/span&gt;, { &lt;span class=&quot;hljs-attr&quot;&gt;granularity&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;sentence&quot;&lt;/span&gt; });
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; segments = [...segmenter.&lt;span class=&quot;hljs-title function_&quot;&gt;segment&lt;/span&gt;(content)]
    .&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;segment&lt;/span&gt; =&gt;&lt;/span&gt; segment.&lt;span class=&quot;hljs-property&quot;&gt;segment&lt;/span&gt;)
    &lt;span class=&quot;hljs-comment&quot;&gt;// Cap sentences at 240 chars&lt;/span&gt;
    .&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;line&lt;/span&gt; =&gt;&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;chunk&lt;/span&gt;(line, &lt;span class=&quot;hljs-number&quot;&gt;240&lt;/span&gt;))
    .&lt;span class=&quot;hljs-title function_&quot;&gt;flat&lt;/span&gt;()
    &lt;span class=&quot;hljs-comment&quot;&gt;// Remove trailing whitespace&lt;/span&gt;
    .&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;line&lt;/span&gt; =&gt;&lt;/span&gt; line.&lt;span class=&quot;hljs-title function_&quot;&gt;trim&lt;/span&gt;())
    &lt;span class=&quot;hljs-comment&quot;&gt;// Remove empty lines&lt;/span&gt;
    .&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;line&lt;/span&gt; =&gt;&lt;/span&gt; line.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; &gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;);
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;querying-the-index&quot;&gt;Querying the index&lt;/h3&gt;&lt;p&gt;With the index handled, the next step is to write code to query that index. At the core of the search engine is a &quot;matching&quot; function that consumes the index and any given search term and returns a list of results ordered by relevancy.&lt;/p&gt;&lt;p&gt;A simple &quot;matching&quot; function would search the index for exact matches of a search term, but in practice this does not produce useful results. A more sophisticated matching engine should account for several things:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;It should consider variations of the search term, such as singular versus plural forms or different verb tenses, which can help to find more accurate and relevant results.&lt;/li&gt;&lt;li&gt;It should account for synonyms or related terms that might be relevant to the search query, allowing for a more comprehensive set of results. For example, a search for &quot;car&quot; might also include results about automobiles, vehicles, or transportation.&lt;/li&gt;&lt;li&gt;It should account for &quot;stop words&quot;, which are common words often excluded from search queries because they are considered to have little semantic value or meaning.&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;Stop words are particularly tricky, as sometimes they should be included and sometimes omitted. Stop words are often articles, prepositions, and conjunctions, such as &quot;a&quot;, &quot;an&quot;, &quot;the&quot;, &quot;in&quot;, &quot;on&quot;, &quot;and&quot;, and &quot;or&quot;. A naive search function would treat them like any other word in the search query which can lead to search results that are cluttered with irrelevant pages that happen to contain the stop words. For example, if a user searches for &quot;the best coffee in town,&quot; a naive search function may return results for every page that includes the words &quot;the&quot;, &quot;best&quot;, &quot;coffee&quot;, and &quot;in&quot; regardless of whether the page is actually about coffee or has any useful information about the best coffee in town.&lt;/p&gt;&lt;p&gt;A smarter search function would take stop words into account and exclude them from the search query, focusing instead on the more meaningful keywords. But it would also be able to handle cases were users &lt;em&gt;are&lt;/em&gt; searching for an exact match. For example, if a user searches for &quot;red shoes&quot; (in quotes), the search engine will only return results that contain that exact phrase, rather than returning any content that contains either &quot;red&quot; or &quot;shoes&quot; separately.&lt;/p&gt;&lt;p&gt;In short, writing a matching engine is a big project and not one to take lightly. After several POC projects where I compared hand-written options to off-the-shelf options, there was one clear winner: Fuse.js.&lt;/p&gt;&lt;h2 id=&quot;fusejs&quot;&gt;Fuse.js&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://fusejs.io&quot;&gt;Fuse.js&lt;/a&gt; is a JavaScript library that focuses on what it calls &quot;fuzzy&quot; searching.&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;Generally speaking, fuzzy searching (more formally known as approximate string matching) is the technique of finding strings that are approximately equal to a given pattern (rather than exactly).&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;Fuse performed well in head-to-head tests against other options (including a complex hand-rolled function) and has good documentation, wide usage, and is under active development.&lt;/p&gt;&lt;p&gt;As with anything code-related, specific implementation details get complicated quickly, but the basic implimentation of Fuse is a straightforward process. We initialise a new instance of Fuse with our index data and a configuration object, and then we can call the &lt;code&gt;search&lt;/code&gt; method on that instance with a search term. The &lt;code&gt;search&lt;/code&gt; method returns an array of results, each of which contains a reference to the original item in the index and the matched text.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; options = {
    &lt;span class=&quot;hljs-attr&quot;&gt;includeMatches&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;findAllMatches&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;minMatchCharLength&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;threshold&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;0.3&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;ignoreLocation&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;keys&lt;/span&gt;: [
        { &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;title&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;weight&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt; },
        { &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;content&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;weight&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; }
    ]
};
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; index = &lt;span class=&quot;hljs-keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;fetch&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/search-data.json&quot;&lt;/span&gt;).&lt;span class=&quot;hljs-title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;res&lt;/span&gt; =&gt;&lt;/span&gt; res.&lt;span class=&quot;hljs-title function_&quot;&gt;json&lt;/span&gt;());
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; fuse = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;Fuse&lt;/span&gt;(index, options);
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; results = fuse.&lt;span class=&quot;hljs-title function_&quot;&gt;search&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;search term&quot;&lt;/span&gt;);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The configuration options are powerful and allow for a lot of fine-tuning. The &lt;code&gt;keys&lt;/code&gt; option is particularly useful, as it allows us to specify which fields in the index should be searched and how much weight should be given to each field. In the example above, we&#x27;re telling Fuse to search the &lt;code&gt;title&lt;/code&gt; field with twice as much weight as the &lt;code&gt;content&lt;/code&gt; field. This means that a match in the &lt;code&gt;title&lt;/code&gt; field will be considered twice as relevant as a match in the &lt;code&gt;content&lt;/code&gt; field.&lt;/p&gt;&lt;p&gt;I&#x27;m also setting the threshold to &lt;code&gt;0.3&lt;/code&gt; (meaning that only results with a score of &lt;code&gt;0.3&lt;/code&gt; or higher will be returned) which is a comparatively low value. My site doesn&#x27;t have thousands of pages, so I&#x27;m happy to return a lot of results and let the user decide which is most relevant. If you have a larger site, you may want to increase this value to return fewer results.&lt;/p&gt;&lt;h2 id=&quot;optimization&quot;&gt;Optimization&lt;/h2&gt;&lt;p&gt;Ultimately there are some trade-offs and compromises that come from choosing client-side over server-side search. These are few, thankfully, and I&#x27;ve mitigated as many of these as I feasibly can.&lt;/p&gt;&lt;p&gt;While the configuration options are powerful, they are not as powerful as a fully server-side stack and Elastic (or other similar services). A client-side option is always going to be constrained by the power of the browser it&#x27;s running inside.&lt;/p&gt;&lt;p&gt;For deep sites, the index can get quite large (sometimes up to multiple megabytes for sites with thousands of pages). For the search to work that index needs to be loaded into the client. I&#x27;ve mitigated this by lazy-loading the index and leveraging caching, but there&#x27;s no way to &lt;em&gt;search&lt;/em&gt; an index without &lt;em&gt;having&lt;/em&gt; the index. This is one area where server-side power can really speed things up. But on the flip-side, a server-side search will always require a network round-trip to fetch the results, so while the client-side search is slower on first load, every actual search feels pleasingly fast.&lt;/p&gt;&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;&lt;p&gt;I&#x27;m really happy with the search experience on my site. It&#x27;s fast, it&#x27;s accurate, and it&#x27;s easy to use. It&#x27;s also a great example of how powerful modern browsers are and how much can be achieved with a little bit of JavaScript.&lt;/p&gt;&lt;p&gt;And because I&#x27;ve built it myself, I can tweak and improve it as I see fit. I can add new features, change the UI, and make it work exactly how I want it to. I can also use it as a learning tool to better understand how search engines work and how to improve them.&lt;/p&gt;</content></entry><entry><title>Oblique Strategies via npx</title><link href="https://tomhazledine.com/oblique-strategies-via-npx/"/><updated>2022-10-24T00:00:00Z</updated><id>https://tomhazledine.com/oblique-strategies-via-npx/</id><content type="html">&lt;p&gt;In 1975 Brian Eno and Peter Schmidt released their &lt;a href=&quot;https://www.enoshop.co.uk/product/oblique-strategies.html&quot;&gt;Oblique Strategies&lt;/a&gt;; &lt;em&gt;&quot;Over One Hundred Worthwhile Dilemmas&quot;&lt;/em&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The Oblique Strategies constitute a set of over 100 cards, each of which is a suggestion of a course of action or thinking to assist in creative situations. These famous cards have been used by many artists and creative people all over the world since their initial publication. Fifth edition 2001.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;You can buy your own set of the cards on Brian Eno&#x27;s shop (&lt;a href=&quot;https://www.enoshop.co.uk/product/oblique-strategies.html&quot;&gt;www.enoshop.co.uk/product/oblique-strategies&lt;/a&gt;), but you can also get a mini taste of oblique inspiration in your terminal by running the following npx command:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;npx oblique-strategy
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;examples&quot; tabindex=&quot;-1&quot;&gt;Examples&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;┌────────────────────────┐
│                        │
│  Remove a restriction  │
│                        │
│    - Edition 4 (1996)  │
│                        │
└────────────────────────┘
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;┌─────────────────────────────┐
│                             │
│  Is the tuning appropriate  │
│                             │
│         - Edition 1 (1975)  │
│                             │
└─────────────────────────────┘
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;┌──────────────────────────────────┐
│                                  │
│  Fill every beat with something  │
│                                  │
│              - Edition 2 (1978)  │
│                                  │
└──────────────────────────────────┘
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;about-the-code&quot; tabindex=&quot;-1&quot;&gt;About the code&lt;/h2&gt;
&lt;p&gt;The full code for this npm package is viewable on my GitHub at &lt;a href=&quot;https://github.com/tomhazledine/oblique-strategy&quot;&gt;github.com/tomhazledine/oblique-strategy&lt;/a&gt;, but there&#x27;s not really too much to it. There are more lines dedicated to drawing the box around the output than there are for actually picking the strategy.&lt;/p&gt;
&lt;figure&gt;&lt;img src=&quot;/images/articles/oblique-strategies-box-600.jpg&quot; alt=&quot;&quot; data-alt=&quot;An open box of Oblique Strategies on a wooden table-top. The top card is visible, and reads &#x27;Think: Inside the work. Outside the work.&#x27;&quot;/&gt;&lt;figcaption&gt;&quot;proof&quot; that I own a legit copy of the strategies&lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;The strategies themselves were all found on other GitHub repos. I&#x27;ve deliberately not credited any of those projects because, well, they&#x27;re clearly breaching some kind of copyright 🤷‍♂️ - as too, I should note, am I. As recompense for my flagrant disregard of others&#x27; work, I&#x27;ve bought a physical copy of the Oblique Strategies &lt;a href=&quot;https://www.enoshop.co.uk/product/oblique-strategies.html&quot;&gt;for the princely sum of £50&lt;/a&gt; and I&#x27;ll take this repo down the second anyone complains.&lt;/p&gt;
&lt;p&gt;In truth this was more of a learning exercise for me. I wanted to master the &lt;code&gt;npx&lt;/code&gt; process and learned a lot about &lt;code&gt;package.bin&lt;/code&gt; in the process, so I&#x27;m considering this project a success.&lt;/p&gt;</content></entry><entry><title>Improving my Wordle opening words using simple node scripts</title><link href="https://tomhazledine.com/wordle-node-script/"/><updated>2022-02-25T00:00:00Z</updated><id>https://tomhazledine.com/wordle-node-script/</id><content type="html">&lt;p&gt;Let’s be honest, by this point you’re either addicted to &lt;a href=&quot;https://www.powerlanguage.co.uk/wordle/&quot;&gt;Wordle&lt;/a&gt;&lt;sup id=&quot;fnref-1&quot;&gt;&lt;a href=&quot;#fn-1&quot; class=&quot;footnote-ref&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; or sick to death of hearing about it. And yes, I&#x27;m shamelessly using Wordle as click-bait for this post. Having lured you in with the promise of Wordle-insight (which I will deliver!) I&#x27;m going to try and get you excited about writing tiny scripts.&lt;/p&gt;&lt;p&gt;Tiny scripts that you run in your terminal can help with, well, pretty much anything involving large amounts of data. They can help you with the stuff that humans are generally bad at but computers are great at. Like analysing the 12,972 words that Wordle uses in its code.&lt;/p&gt;&lt;h2 id=&quot;i-want-to-find-a-sequence-of-guesses-that-covers-as-many-of-the-most-common-consonants-as-possible&quot;&gt;I want to find a sequence of guesses that covers as many of the most common consonants as possible.&lt;/h2&gt;&lt;p&gt;My strategy is to hit the most common letters as quickly as possible, but at the same time be able to get through as many guesses as possible without repeating letters. I’m not “solving” Wordle; I just want to optimise my opening sequence of guesses to make playing it more fun.&lt;sup id=&quot;fnref-2&quot;&gt;&lt;a href=&quot;#fn-2&quot; class=&quot;footnote-ref&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;&lt;p&gt;The practical considerations of my approach:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;Try to minimise the amount of vowels in the first couple of guesses. Once you get past guess #3 words are harder to form without repeating letters, so keeping some handy word-makers in my pocket is helpful.&lt;/li&gt;&lt;li&gt;It would be really helpful to know which letters actually &lt;em&gt;are&lt;/em&gt; the most common (rather than just relying on my flawed gut-feel).&lt;/li&gt;&lt;li&gt;I need a &quot;complete&quot; dictionary of words to choose from (a.k.a. my own vocabulary is not good enough).&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;I can solve all three issues by writing a little bit of code that I&#x27;ll run on the command-line in my terminal app.&lt;/p&gt;&lt;h2 id=&quot;scripts-can-be-gross-and-bad-as-long-as-they-work&quot;&gt;Scripts can be gross and &quot;bad&quot;, as long as they work&lt;/h2&gt;&lt;p&gt;One joy of tiny scripts is that they&#x27;re just for me and all I really care about is the &lt;em&gt;output&lt;/em&gt;. That means I can use whatever language I like. I spend most of my time writing JavaScript so I&#x27;ll use Node for my scripts, but you can 100% get the same results with Python or PHP or bash or whatever you like.&lt;/p&gt;&lt;p&gt;It also means that I can play fast and loose with &quot;best practices&quot;. Working something out for thousands of items (in this case the Wordle words) is practically impossible by hand, but easy for a script, so even if my code is objectively terrible (with multiple inefficiencies and &lt;code&gt;O(n log n)&lt;/code&gt; complexity), the computer can still calculate the result in fractions of a second.&lt;/p&gt;&lt;p&gt;I also don&#x27;t need to worry about extensibility or re-use. As long as it works for the data-set I&#x27;m working with right now, that&#x27;s fine! I&#x27;ll just throw this script away when I&#x27;m done anyway.&lt;/p&gt;&lt;h2 id=&quot;where-does-wordle-get-its-words-from&quot;&gt;Where does Wordle get its words from?&lt;/h2&gt;&lt;p&gt;The source code of Wordle&lt;sup id=&quot;fnref-3&quot;&gt;&lt;a href=&quot;#fn-3&quot; class=&quot;footnote-ref&quot;&gt;3&lt;/a&gt;&lt;/sup&gt; contains two arrays of words which I&#x27;m calling &quot;winners&quot; and &quot;guesses&quot;. &lt;code&gt;winners&lt;/code&gt; has 2,315 items and shows all the potential winning words, whereas &lt;code&gt;guesses&lt;/code&gt; is longer (10,657) and contains all possible valid guesses.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; winners = [&lt;span class=&quot;hljs-string&quot;&gt;&quot;cigar&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;rebut&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;sissy&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;humph&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;awake&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-comment&quot;&gt;/* etc. */&lt;/span&gt; ],
&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; guesses = [&lt;span class=&quot;hljs-string&quot;&gt;&quot;aahed&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;aalii&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;aargh&quot;&lt;/span&gt; &lt;span class=&quot;hljs-comment&quot;&gt;/* etc. */&lt;/span&gt;];
&lt;span class=&quot;hljs-comment&quot;&gt;// Combine the two lists into one array&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; words = [...winners,...guesses];
&lt;/code&gt;&lt;/pre&gt;&lt;figcaption&gt;I&#x27;ve saved these lists in a js file called `/dictionary.js`&lt;/figcaption&gt;&lt;h2 id=&quot;which-letters-are-most-common&quot;&gt;Which letters are most common?&lt;/h2&gt;&lt;p&gt;Working out the frequency of letters is a three-step process. The first step is to count how many times each letter appears in the list of words. Then I need to sort those letters into a useful order (most frequent at the start, least frequent at the end). The third step is to work out the &lt;em&gt;relative&lt;/em&gt; frequency of each letter from the raw count.&lt;/p&gt;&lt;p&gt;The initial counting is done by importing our word list&lt;sup id=&quot;fnref-4&quot;&gt;&lt;a href=&quot;#fn-4&quot; class=&quot;footnote-ref&quot;&gt;4&lt;/a&gt;&lt;/sup&gt; and flattening it to a single string of letters with &lt;code&gt;words.join(&#x27;&#x27;)&lt;/code&gt;. We then turn this into an array of letters with a &quot;spread&quot;: &lt;code&gt;[...words.join(&#x27;&#x27;)]&lt;/code&gt;. The we run that array through a &lt;code&gt;reduce()&lt;/code&gt; operation to create an object where every letter is a key with a the letter&#x27;s count as a value.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; { words } &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;./dictionary.js&quot;&lt;/span&gt;;

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;letterFrequency&lt;/span&gt; = letters =&gt;
    letters.&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;total, letter&lt;/span&gt;) =&gt;&lt;/span&gt; {
        total[letter] ? total[letter]++ : (total[letter] = &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; total;
    }, {});

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; allLetters = [...words.&lt;span class=&quot;hljs-title function_&quot;&gt;join&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;)];
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; unsortedFrequencies = &lt;span class=&quot;hljs-title function_&quot;&gt;letterFrequency&lt;/span&gt;(allLetters);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;That &lt;code&gt;letterFrequency()&lt;/code&gt; function produces an output that looks like this:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-attr&quot;&gt;unsortedFrequencies&lt;/span&gt;: {
    &lt;span class=&quot;hljs-attr&quot;&gt;h&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1371&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;d&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2060&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;l&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;2652&lt;/span&gt;,
    &lt;span class=&quot;hljs-comment&quot;&gt;// etc...&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Sorting is a bit fiddly. Because our unsorted letters are in object-form, we&#x27;ll need to use &lt;code&gt;Object.keys(frequencies)&lt;/code&gt; to allow us to map through the keys and apply a &lt;code&gt;.sort()&lt;/code&gt; to them.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;sortFrequencies&lt;/span&gt; = frequencies =&gt;
    &lt;span class=&quot;hljs-title class_&quot;&gt;Object&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;keys&lt;/span&gt;(frequencies)
        .&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;key&lt;/span&gt; =&gt;&lt;/span&gt; ({
            &lt;span class=&quot;hljs-attr&quot;&gt;letter&lt;/span&gt;: key,
            &lt;span class=&quot;hljs-attr&quot;&gt;count&lt;/span&gt;: frequencies[key]
        }))
        .&lt;span class=&quot;hljs-title function_&quot;&gt;sort&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a, b&lt;/span&gt;) =&gt;&lt;/span&gt; frequencies[b] - frequencies[a]);

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; sortedFrequencies = &lt;span class=&quot;hljs-title function_&quot;&gt;sortFrequencies&lt;/span&gt;(unsortedFrequencies);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The third step is to calculate the percentage that each letter occurs in the full list of letters. I&#x27;m aiming for accuracy to two decimal places here, hence the &lt;code&gt;* 100&lt;/code&gt; and &lt;code&gt;/ 100&lt;/code&gt; dance I need to do to get the rounding to work.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;calculatePercentages&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;totalCount, frequencies&lt;/span&gt;) =&gt;
    frequencies.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;frequency&lt;/span&gt; =&gt;&lt;/span&gt; {
        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; percentage =
            &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;round&lt;/span&gt;((frequency.&lt;span class=&quot;hljs-property&quot;&gt;count&lt;/span&gt; / totalCount) * &lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;) / &lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;;
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; { ...frequency, percentage };
    });

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; percentages = &lt;span class=&quot;hljs-title function_&quot;&gt;calculatePercentages&lt;/span&gt;(allLetters.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;, sortedFrequencies);
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;letter-frequency-results&quot;&gt;Letter frequency results&lt;/h2&gt;&lt;p&gt;So what does this little script discover? I&#x27;ve saved it in a file called &lt;code&gt;frequencies.js&lt;/code&gt;, so to run it I open my terminal, &lt;code&gt;cd&lt;/code&gt; to the directory that contains the script, and run:&lt;/p&gt;&lt;pre&gt;&lt;code&gt;node frequencies
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;For my real version I &quot;wasted&quot; some time building a little function to print the results as a graph directly into my terminal (see the screenshot), but for this post I&#x27;ve prettied-up the results a little more.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/articles/wordle-script-screenshot.png&quot; alt=&quot;A screenshot of my terminal showing the output of my letter-frequency calculations as a bar chart, replicated on this page in more accessible form below&quot;/&gt;&lt;/p&gt;&lt;p&gt;My first run of the script found the most common letters in the entire Wordle &quot;dictionary&quot;. Unsurprisingly the vowels all ranked pretty high, but the most commonly occurring letter was &lt;code&gt;S&lt;/code&gt;.&lt;/p&gt;&lt;figure&gt;&lt;div class=&quot;bar-graph&quot;&gt;&lt;div class=&quot;bar-graph__tick-labels&quot;&gt;&lt;span class=&quot;bar-graph__tick-label&quot; style=&quot;left:20%&quot;&gt;5%&lt;/span&gt;&lt;span class=&quot;bar-graph__tick-label&quot; style=&quot;left:40%&quot;&gt;10%&lt;/span&gt;&lt;span class=&quot;bar-graph__tick-label&quot; style=&quot;left:60%&quot;&gt;15%&lt;/span&gt;&lt;span class=&quot;bar-graph__tick-label&quot; style=&quot;left:80%&quot;&gt;20%&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;01:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;S&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:40%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:40%&quot;&gt;10% (6665)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;02:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;E&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:40%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:40%&quot;&gt;10% (6662)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;03:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;A&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:36%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:36%&quot;&gt;9% (5990)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;04:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;O&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:28%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:28%&quot;&gt;7% (4438)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;05:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;R&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:24%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:24%&quot;&gt;6% (4158)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;06:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;I&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:24%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:24%&quot;&gt;6% (3759)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;07:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;L&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:20%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:20%&quot;&gt;5% (3371)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;08:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;T&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:20%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:20%&quot;&gt;5% (3295)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;09:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;N&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:20%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:20%&quot;&gt;5% (2952)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;10:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;U&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:16%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:16%&quot;&gt;4% (2511)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;figcaption&gt;The 10 most common letters in the Wordle dictionary&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;For my second run of the script, I filtered out the vowels. This doesn&#x27;t change the values for any of the letters, but lets me focus on the letters that I think might be more &quot;valuable&quot; when choosing Wordle guesses.&lt;/p&gt;&lt;figure&gt;&lt;div class=&quot;bar-graph&quot;&gt;&lt;div class=&quot;bar-graph__tick-labels&quot;&gt;&lt;span class=&quot;bar-graph__tick-label&quot; style=&quot;left:20%&quot;&gt;5%&lt;/span&gt;&lt;span class=&quot;bar-graph__tick-label&quot; style=&quot;left:40%&quot;&gt;10%&lt;/span&gt;&lt;span class=&quot;bar-graph__tick-label&quot; style=&quot;left:60%&quot;&gt;15%&lt;/span&gt;&lt;span class=&quot;bar-graph__tick-label&quot; style=&quot;left:80%&quot;&gt;20%&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;01:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;S&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:40%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:40%&quot;&gt;10% (6665)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;02:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;R&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:24%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:24%&quot;&gt;6% (4158)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;03:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;L&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:20%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:20%&quot;&gt;5% (3371)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;04:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;T&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:20%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:20%&quot;&gt;5% (3295)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;05:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;N&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:20%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:20%&quot;&gt;5% (2952)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;06:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;D&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:16%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:16%&quot;&gt;4% (2453)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;07:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;Y&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:12%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:12%&quot;&gt;3% (2074)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;08:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;C&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:12%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:12%&quot;&gt;3% (2028)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;09:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;P&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:12%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:12%&quot;&gt;3% (2019)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;10:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;M&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:12%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:12%&quot;&gt;3% (1976)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;figcaption&gt;The 10 most common consonants in the Wordle dictionary&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;For completeness, and to assuage my curiosity, I also ran the script against just the &quot;winning&quot; words. This one is potentially a &quot;spoiler&quot; and some could call it cheating, so feel free to skip these results if you like. It was interesting, however, to see how the frequencies changed for this reduced set of words!&lt;/p&gt;&lt;div class=&quot;js__toggleVisibility&quot;&gt;&lt;button class=&quot;spoiler__toggle button js__showHideToggle showHide__toggle&quot;&gt;the spoiler&lt;/button&gt;&lt;div class=&quot;spoiler js__showHideArea showHide__area&quot;&gt;&lt;div class=&quot;js__showHideAreaInner showHide__inner&quot;&gt;&lt;figure&gt;&lt;div class=&quot;bar-graph&quot;&gt;&lt;div class=&quot;bar-graph__tick-labels&quot;&gt;&lt;span class=&quot;bar-graph__tick-label&quot; style=&quot;left:20%&quot;&gt;5%&lt;/span&gt;&lt;span class=&quot;bar-graph__tick-label&quot; style=&quot;left:40%&quot;&gt;10%&lt;/span&gt;&lt;span class=&quot;bar-graph__tick-label&quot; style=&quot;left:60%&quot;&gt;15%&lt;/span&gt;&lt;span class=&quot;bar-graph__tick-label&quot; style=&quot;left:80%&quot;&gt;20%&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;01:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;E&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:44%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:44%&quot;&gt;11% (1233)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;02:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;A&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:32%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:32%&quot;&gt;8% (979)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;03:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;R&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:32%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:32%&quot;&gt;8% (899)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;04:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;O&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:28%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:28%&quot;&gt;7% (754)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;05:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;T&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:24%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:24%&quot;&gt;6% (729)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;06:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;L&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:24%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:24%&quot;&gt;6% (719)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;07:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;I&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:24%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:24%&quot;&gt;6% (671)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;08:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;S&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:24%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:24%&quot;&gt;6% (669)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;09:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;N&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:20%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:20%&quot;&gt;5% (575)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;10:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;C&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:16%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:16%&quot;&gt;4% (477)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;11:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;U&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:16%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:16%&quot;&gt;4% (467)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;12:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;Y&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:16%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:16%&quot;&gt;4% (425)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;13:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;D&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:12%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:12%&quot;&gt;3% (393)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;14:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;H&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:12%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:12%&quot;&gt;3% (389)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;15:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;P&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:12%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:12%&quot;&gt;3% (367)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;16:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;M&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:12%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:12%&quot;&gt;3% (316)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;17:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;G&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:12%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:12%&quot;&gt;3% (311)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;18:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;B&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:8%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:8%&quot;&gt;2% (281)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;19:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;F&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:8%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:8%&quot;&gt;2% (230)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;20:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;K&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:8%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:8%&quot;&gt;2% (210)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;21:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;W&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:8%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:8%&quot;&gt;2% (195)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;22:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;V&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:4%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:4%&quot;&gt;1% (153)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;23:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;Z&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:0%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:0%&quot;&gt;0% (40)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;24:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;X&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:0%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:0%&quot;&gt;0% (37)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;25:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;Q&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:0%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:0%&quot;&gt;0% (29)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;bar-graph__bar-wrapper&quot;&gt;&lt;span class=&quot;bar-graph__bar-index&quot;&gt;26:&lt;/span&gt;&lt;span class=&quot;bar-graph__bar-key&quot;&gt;J&lt;/span&gt;&lt;div class=&quot;bar-graph__bar&quot;&gt;&lt;span class=&quot;bar-graph__bar-value&quot; style=&quot;width:0%&quot;/&gt;&lt;div class=&quot;bar-graph__ticks&quot;&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:20%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:40%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:60%&quot;/&gt;&lt;span class=&quot;bar-graph__tick&quot; style=&quot;left:80%&quot;/&gt;&lt;/div&gt;&lt;span class=&quot;bar-graph__bar-label&quot; style=&quot;left:0%&quot;&gt;0% (27)&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;figcaption&gt;The most common letters in the &quot;winning&quot; Wordle word list&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;h2 id=&quot;finding-the-best-sequence-of-words&quot;&gt;Finding the best sequence of words&lt;/h2&gt;&lt;p&gt;The next script I need will be my word finder, which I&#x27;ll create in a file called &lt;code&gt;wordfinder.js&lt;/code&gt;. To apply the letter-frequency information from the previous step, I&#x27;ll need a script that can do two things:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;Find all the words from the list that contain a given set of letters (a.k.a. &lt;em&gt;find all words in the list that contain &quot;a&quot;, &quot;b&quot;, and &quot;c&quot;&lt;/em&gt;)&lt;/li&gt;&lt;li&gt;Find all the words that do not include any of the letters in a given set (a.k.a. &lt;em&gt;find me all the five-letter words that do not contain: &quot;abcdefghijk&quot;&lt;/em&gt;)&lt;/li&gt;&lt;/ol&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Find words that contain *all* input letters.&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;inclusiveMatches&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;input, words&lt;/span&gt;) =&gt; {
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; letters = [...input];
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; matches = words.&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;word&lt;/span&gt; =&gt;&lt;/span&gt; {
        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; hits = letters
            .&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;letter&lt;/span&gt; =&gt;&lt;/span&gt; word.&lt;span class=&quot;hljs-title function_&quot;&gt;includes&lt;/span&gt;(letter))
            .&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;hit&lt;/span&gt; =&gt;&lt;/span&gt; hit);
        &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; hits.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; == letters.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;;
    });
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; matches;
};

&lt;span class=&quot;hljs-comment&quot;&gt;// Find words that do *not* contain any of the input letters.&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;exclusiveMatches&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;input, words&lt;/span&gt;) =&gt; {
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; alphabet = &lt;span class=&quot;hljs-string&quot;&gt;&quot;abcdefghijklmnopqrstuvwxyz&quot;&lt;/span&gt;;
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; allowedLetters = [...input].&lt;span class=&quot;hljs-title function_&quot;&gt;reduce&lt;/span&gt;(
        &lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a, l&lt;/span&gt;) =&gt;&lt;/span&gt; a.&lt;span class=&quot;hljs-title function_&quot;&gt;replace&lt;/span&gt;(l, &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;),
        alphabet
    );
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; match = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;RegExp&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;`^[&lt;span class=&quot;hljs-subst&quot;&gt;${allowedLetters}&lt;/span&gt;]+$`&lt;/span&gt;);
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; matches = words.&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;word&lt;/span&gt; =&gt;&lt;/span&gt; match.&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(word));
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; matches;
};
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;I could just input the full dictionary from the last script, but there are a couple of other steps I can add to make my search more focused.&lt;/p&gt;&lt;p&gt;One of my objectives is to maximise the amount of the alphabet I cover with my opening Wordle guesses, so I know straight away that I&#x27;m not interested in words with repeated letters. A word where every letter is different is known as an &quot;isogram&quot;, so with a little regEx magic we can filter out any isograms from our list.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;isIsogram&lt;/span&gt; = string =&gt; !&lt;span class=&quot;hljs-regexp&quot;&gt;/(.).*\1/&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;test&lt;/span&gt;(string);

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; noRepeatedLetters = words.&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(isIsogram);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Once we have our list of words that match our criteria (words that contain all the &lt;code&gt;MUST_HAVE_LETTERS&lt;/code&gt; but none of the &lt;code&gt;MUST_NOT_HAVE_LETTERS&lt;/code&gt;), I would find it really useful to sort them by the amount of vowels. Particularly when selecting our first or second Wordle guess, there could be &lt;em&gt;a lot&lt;/em&gt; of options (we&#x27;re dealing with a word-list with &gt;12k entries, after all!). One of my heuristics is that I want my early guesses to include as few vowels as possible in order to maximise the word options on the later guesses.&lt;/p&gt;&lt;p&gt;Sorting by vowel-count is a two step process. I&#x27;ll need a function to count the number of vowels in a given word, and I&#x27;ll need a function to sort the words by that count.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;countVowels&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;word, vowels = &lt;span class=&quot;hljs-string&quot;&gt;&quot;aeiou&quot;&lt;/span&gt;&lt;/span&gt;) =&gt; {
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; letters = [...word.&lt;span class=&quot;hljs-title function_&quot;&gt;toLowerCase&lt;/span&gt;()];
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; justVowels = letters.&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;char&lt;/span&gt; =&gt;&lt;/span&gt; vowels.&lt;span class=&quot;hljs-title function_&quot;&gt;indexOf&lt;/span&gt;(char) &gt; -&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; justVowels.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt;;
};

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;orderByVowels&lt;/span&gt; = words =&gt;
    words
        .&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;word&lt;/span&gt; =&gt;&lt;/span&gt; ({ word, &lt;span class=&quot;hljs-attr&quot;&gt;vowelCount&lt;/span&gt;: &lt;span class=&quot;hljs-title function_&quot;&gt;countVowels&lt;/span&gt;(word) }))
        .&lt;span class=&quot;hljs-title function_&quot;&gt;sort&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;a, b&lt;/span&gt;) =&gt;&lt;/span&gt; (a.&lt;span class=&quot;hljs-property&quot;&gt;vowelCount&lt;/span&gt; &gt; b.&lt;span class=&quot;hljs-property&quot;&gt;vowelCount&lt;/span&gt; ? -&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; : &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;))
        .&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;object&lt;/span&gt; =&gt;&lt;/span&gt; object.&lt;span class=&quot;hljs-property&quot;&gt;word&lt;/span&gt;)
        .&lt;span class=&quot;hljs-title function_&quot;&gt;reverse&lt;/span&gt;();
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;putting-it-all-together&quot;&gt;Putting it all together&lt;/h2&gt;&lt;p&gt;Assuming we&#x27;ve imported the word list and the aforementioned functions, the final flow of the script looks like this:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; onlyIsograms = words.&lt;span class=&quot;hljs-title function_&quot;&gt;filter&lt;/span&gt;(isIsogram);
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; set = &lt;span class=&quot;hljs-title function_&quot;&gt;inclusiveMatches&lt;/span&gt;(&lt;span class=&quot;hljs-variable constant_&quot;&gt;MUST_HAVE_LETTERS&lt;/span&gt;, onlyIsograms);
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; subset = &lt;span class=&quot;hljs-title function_&quot;&gt;exclusiveMatches&lt;/span&gt;(&lt;span class=&quot;hljs-variable constant_&quot;&gt;MUST_NOT_HAVE_LETTERS&lt;/span&gt;, set);
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; sorted = &lt;span class=&quot;hljs-title function_&quot;&gt;orderByVowels&lt;/span&gt;(subset);

sorted.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;word&lt;/span&gt; =&gt;&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;log&lt;/span&gt;(word));
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The only missing ingredients are the &lt;code&gt;MUST_HAVE_LETTERS&lt;/code&gt; and &lt;code&gt;MUST_NOT_HAVE_LETTERS&lt;/code&gt; variables.&lt;/p&gt;&lt;p&gt;The script could probably be automated to loop through all possible sequences of words and populate these values dynamically, but that&#x27;s a bit more effort than I&#x27;m willing to expend. And besides, this is the stage that requires (in my mind, at least) some external judgement. I want to be able to pick Wordle guesses that &lt;em&gt;feel&lt;/em&gt; right (otherwise I&#x27;ll end up playing &quot;yokul&quot;, &quot;speug&quot;, or &quot;phpht&quot; - which &lt;em&gt;definitely&lt;/em&gt; feel like cheat words even though they are genuine words from the Wordle allowed-list!).&lt;/p&gt;&lt;p&gt;I can get the best of both worlds by adding support for arguments into my script. If I can run &lt;code&gt;node wordfinder include=abc exclude=xyz&lt;/code&gt;, for example, then I can quickly iterate over the options I like the look of manually. &quot;Job done&quot;, in my opinion!&lt;/p&gt;&lt;h2 id=&quot;adding-arguments-to-a-node-script&quot;&gt;Adding arguments to a node script&lt;/h2&gt;&lt;p&gt;Adding support for arguments in my script involves setting up a &lt;code&gt;config&lt;/code&gt; object with my default values, and then looping through the &lt;code&gt;process.argv&lt;/code&gt; array (&lt;code&gt;process&lt;/code&gt; is a variable that is built into Node and &lt;code&gt;argv&lt;/code&gt; is a handy property which makes all the arguments available). For each argument, I&#x27;ll split by &lt;code&gt;&quot;=&quot;&lt;/code&gt; to give me a key and value for each one. So running &lt;code&gt;node myscript foo=one bar=two&lt;/code&gt; will give me key/values of &lt;code&gt;foo/one&lt;/code&gt; and &lt;code&gt;bar/two&lt;/code&gt;. If I include arguments that match the keys of my config options (in this case, &lt;code&gt;inc&lt;/code&gt; and &lt;code&gt;exc&lt;/code&gt;) then I can overwrite those values, and for the rest of my script &lt;code&gt;config.inc&lt;/code&gt; will equal the value I passed into &lt;code&gt;inc=abc&lt;/code&gt;.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; config = {
    &lt;span class=&quot;hljs-attr&quot;&gt;inc&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;exc&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;max&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;10&lt;/span&gt;
};

process.&lt;span class=&quot;hljs-property&quot;&gt;argv&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;arg&lt;/span&gt; =&gt;&lt;/span&gt; {
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; argParts = arg.&lt;span class=&quot;hljs-title function_&quot;&gt;split&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;=&quot;&lt;/span&gt;);
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; key = argParts[&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;];
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; value = argParts[&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;];
    config[key] = value;
});
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;do-it&quot;&gt;Do it!&lt;/h2&gt;&lt;p&gt;Finally, after all this work, I can actually begin my search for a suitable sequence of opening guesses for Wordle!&lt;/p&gt;&lt;p&gt;The &lt;code&gt;node frequencies&lt;/code&gt; script told me that the most frequently occurring consonants in the Wordle dictionary were &lt;code&gt;S R L T N&lt;/code&gt;. To see if (by some miracle) there&#x27;s a valid five letter word comprised of those exact five letters, I can run my &lt;code&gt;wordfinder&lt;/code&gt; script.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;node wordfinder inc=srltn
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Unsurprisingly, there&#x27;s no word that matches that criterion 😢. But ditching the &lt;code&gt;n&lt;/code&gt; returns three words: &quot;rotls&quot;, &quot;slart&quot;, and &quot;tirls&quot;. Hmmm, not exactly the &quot;feels-right&quot; words I was hoping for. But given that I&#x27;ve already ruled out vowels from my must-have letters on the basis that they&#x27;re more useful later on, surely &lt;code&gt;s&lt;/code&gt; is just as handy a letter to have up my sleeve late-game. Knocking that off the list opens up the options further.&lt;/p&gt;&lt;p&gt;Here are the opening options I experimented with:&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Must-haves&lt;/th&gt;&lt;th&gt;Result count&lt;/th&gt;&lt;th&gt;Result words&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;srltn&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td/&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;srlt&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;rotls, slart, tirls&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;rltnd&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td/&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;rltn&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;larnt&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;rltd&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;trild&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;rlnd&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td/&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;rtnd&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;trend, drant, drent&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Of these, only &lt;code&gt;trend&lt;/code&gt; really feels right to me, so my next step is to run the script again to find my options for the &lt;em&gt;second&lt;/em&gt; guess. This time I&#x27;ll include the &lt;code&gt;exc&lt;/code&gt; argument to exclude the letters from my chosen first guess.&lt;/p&gt;&lt;pre&gt;&lt;code&gt;node wordfinder inc=lycph exc=trend
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img src=&quot;/images/articles/wordle-wordfinder-screenshot.png&quot; alt=&quot;A screenshot of my terminal showing the output of my wordfinder script&quot;/&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Must-haves&lt;/th&gt;&lt;th&gt;Result count&lt;/th&gt;&lt;th&gt;Result words&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;lycpm&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td/&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;lycph&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td/&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;lycp&lt;/td&gt;&lt;td&gt;0&lt;/td&gt;&lt;td/&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;lyc&lt;/td&gt;&lt;td&gt;13&lt;/td&gt;&lt;td&gt;xylic, hylic, cymol, cylix, colby, cloys, clays, calyx, calmy, acyls, scaly, lucky, coaly&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;lypm&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;lymph, plumy, palmy, lumpy, imply, amply&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;I can then repeat the process, picking new target letters for the &lt;code&gt;inc&lt;/code&gt; argument and adding the previous word to the &lt;code&gt;exc&lt;/code&gt; argument. This is, in itself, a fun little word game that I&#x27;ve now created for myself, and my little node scripts are what have made it possible.&lt;/p&gt;&lt;p&gt;I&#x27;ve uploaded the &lt;a href=&quot;https://github.com/tomhazledine/wordle-analysis&quot;&gt;complete version of these scripts to GitHub&lt;/a&gt;, so you can download them and play with them yourself (and tweak them, if you like). What words did you end up choosing as your opening Wordle guesses? Be sure to tell me about them on Twitter!&lt;/p&gt;&lt;h2 id=&quot;takeaways&quot;&gt;Takeaways&lt;/h2&gt;&lt;p&gt;If you&#x27;ve made it this far, then hopefully you&#x27;ll feel empowered to write some fun little scripts to help you out with day-to-day problems. Scripts like this one can save you loads of time (and can actually be used for useful things and not just silly word games). The idea of writing and running my own helper scripts used to feel daunting to me, but knowing they can be written in whichever language I fancy and that there are no stakes whatsoever makes it all seem more accessible.&lt;/p&gt;&lt;p&gt;So next time you&#x27;re faced with a repetitive task that might take you hours to complete by hand, why not burn a few days writing a script to automate it instead...&lt;/p&gt;&lt;div class=&quot;footnotes&quot;&gt;&lt;hr/&gt;&lt;ol&gt;&lt;li id=&quot;fn-1&quot;&gt;If you’re looking for the most mathematically optimal programatic solution, I’d strongly recommend Three Blue One Brown’s &lt;a href=&quot;https://www.youtube.com/watch?v=v68zYyaEmEA&quot;&gt;excellent video about solving Wordle using information theory&lt;/a&gt;.&lt;a href=&quot;#fnref-1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id=&quot;fn-2&quot;&gt;I&#x27;m not very good at Wordle, but have never &quot;failed&quot; yet. Fewer guesses would be great but my main aim is &lt;em&gt;coverage&lt;/em&gt;. I enjoy &quot;clearing&quot; the keyboard - that&#x27;s the part of Wordle that I find most therapeutic. Getting three or more correct letters in the opening guess is actually quite stressful - the pressure&#x27;s then on to get a good score!&lt;a href=&quot;#fnref-2&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id=&quot;fn-3&quot;&gt;Wordle is blissfully open source in the best tradition of the web. You can open a web inspector, and the all the code is right there for you to see. And for those of you wondering if anything changed when the NYT took over, the only difference to the word list was that they &lt;em&gt;removed&lt;/em&gt; a couple of tricky words.&lt;a href=&quot;#fnref-3&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id=&quot;fn-4&quot;&gt;Here I&#x27;ve used ESM syntax and exported and imported using &lt;code&gt;export&lt;/code&gt; and &lt;code&gt;import&lt;/code&gt;, but that required setting up a &lt;code&gt;package.json&lt;/code&gt; in my script&#x27;s directory and declaring the script to be a module with &lt;code&gt;&quot;type&quot;: &quot;module&quot;&lt;/code&gt;. You can save this hassle by using the CJS &lt;code&gt;module.exports = words;&lt;/code&gt; and &lt;code&gt;const { words } = require(&#x27;./dictionary.js&#x27;)&lt;/code&gt; pattern, but I think that&#x27;s ugly. &lt;a href=&quot;https://dev.to/iggredible/what-the-heck-are-cjs-amd-umd-and-esm-ikm&quot;&gt;Confused?&lt;/a&gt;&lt;a href=&quot;#fnref-4&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;</content></entry><entry><title>Humility in software development</title><link href="https://tomhazledine.com/humility-in-tech/"/><updated>2021-10-05T00:00:00Z</updated><id>https://tomhazledine.com/humility-in-tech/</id><content type="html">&lt;p&gt;I&#x27;m in the getting-to-know-you phase of a new job, and it&#x27;s got me thinking about the aspects of my work-personality that I&#x27;ve &lt;em&gt;deliberately&lt;/em&gt; chosen. I&#x27;m sure I&#x27;ve got plenty of inadvertent character traits that I&#x27;ve no idea of or control over (for good, I hope, but also inevitably for bad). But there are few I&#x27;ve consciously tried to foster, and the biggest of them is &lt;strong&gt;humility&lt;/strong&gt;&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;It&#x27;s maybe not the perfect word to describe the concept I&#x27;m grasping at, and there&#x27;s certainly no getting away from the &lt;em&gt;&quot;ever so humble&quot;&lt;/em&gt; Uriah Heep references or the image of the 45&lt;sup&gt;th&lt;/sup&gt; US president saying &lt;em&gt;&quot;I am humble. I think I&#x27;m much more humble than you would understand&quot;&lt;/em&gt;. But it is the best word I&#x27;ve been able to come up with to encapsulate an idea that has been specifically valuable to me in the context of my career in tech.&lt;/p&gt;
&lt;h2 id=&quot;what-do-i-mean-by-%22humility%22&quot; tabindex=&quot;-1&quot;&gt;What do I mean by &quot;humility&quot;&lt;/h2&gt;
&lt;p&gt;I guess the multi-word version of what I&#x27;m trying to express is a sentiment I&#x27;ve heard a few times: &lt;em&gt;never be the smartest person in the room.&lt;/em&gt; That is great advice for anyone who wants to get better at what they do, and sets up a brilliant atmosphere for &lt;em&gt;learning&lt;/em&gt;. And for it to work, there&#x27;s a prerequisite for possessing the humility to admit to the limits of your knowledge and expertise. It can be tough to admit when you don&#x27;t know something, but opening yourself up to that level of exposure is (in my experience) a sure-fire way to level-up your own skills.&lt;/p&gt;
&lt;p&gt;I also extend this principle to non-skills-specific aspects of my work life. I&#x27;ve never suffered when working with someone who downplays their ability or is not confident in their own skills. I have, however, absolutely hated working with people who think they know it all. When I say &quot;be humble&quot; I mostly mean &quot;don&#x27;t be a person that people don&#x27;t want to be around&quot;.&lt;/p&gt;
&lt;p&gt;I aspire to be a &gt;1✕ developer, and I want my work to be the best it can be. But the concept of a &quot;10✕ developer&quot; is toxic. I don&#x27;t want to do the work of ten developers; I want to enable the other devs in my team to do better work. I want to be a &quot;force multiplier&quot; to the rest of my team; my colleagues should be able to do better work because I&#x27;m around.&lt;/p&gt;
&lt;h2 id=&quot;when-has-humility-helped-my-career%3F&quot; tabindex=&quot;-1&quot;&gt;When has humility helped my career?&lt;/h2&gt;
&lt;p&gt;Everyone learns differently, but having someone directly explain a new concept or technique to me is my preferred way to learn. By exposing the gaps in my knowledge and actually asking for help, I get to move to the next level of understanding so much faster.&lt;/p&gt;
&lt;p&gt;In meetings, I always try to ask the &quot;dumb&quot; questions. I&#x27;m sure someone else in the room will also be wondering what that TLI&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn2&quot; id=&quot;fnref2&quot;&gt;[2]&lt;/a&gt;&lt;/sup&gt; means, or what the unspoken objectives are. No none has ever shouted at me for being an idiot, and in fact quite the opposite has happened. People &lt;em&gt;thank&lt;/em&gt; me for engaging and asking questions (both in public and in private).&lt;/p&gt;
&lt;p&gt;When reviewing PRs I try to never, ever, ever, be dismissive of the submission another developer has spent time on. Even if my gut instinct is to literally throw my laptop out of the window in the hope I never have to view that disgusting code again, I step back and take a breath and remind myself how often my gut has been wrong in the past. Plainly put, my gut has terrible instincts. A simple friendly interrogation can often expose the intention that I&#x27;ve missed, or the bug I didn&#x27;t realise needed fixing. No-one writes bad code on purpose, and even if I&#x27;ve got a lot to say and many changes to suggest, I always try to present my ideas as possibilities rather than edicts. A good PR should be a conversation, and the ultimate responsibility lies with the author.&lt;/p&gt;
&lt;p&gt;When digging through &quot;legacy&quot; code, it always pays to have humility. It&#x27;s &lt;em&gt;so&lt;/em&gt; easy to think my ideas are so much better than the garbage code that I&#x27;ve been forced to work with. The temptation to refactor everything into &lt;em&gt;my&lt;/em&gt; style and to flow the way &lt;em&gt;I&lt;/em&gt; think it should flow is real. Every now and then I&#x27;m right - my version &lt;em&gt;is&lt;/em&gt; better. But that is so rarely the case. If I start with the understanding that the people who came before me knew what they were doing, I&#x27;m more able to spot the subtle bugs they&#x27;ve avoided or the elegant performance improvements they&#x27;ve made by not doing things the way I would expect.&lt;/p&gt;
&lt;p&gt;I wish I&#x27;d learnt that last point so much sooner - it would have saved a lot of time and painful on-call refactoring!&lt;/p&gt;
&lt;h2 id=&quot;when-has-humility-hurt-my-career%3F&quot; tabindex=&quot;-1&quot;&gt;When has humility hurt my career?&lt;/h2&gt;
&lt;p&gt;Another mantra I live with is that &quot;a plan is not a strategy unless the &lt;em&gt;opposite&lt;/em&gt; approach is also valid&quot;. &quot;Eat food&quot; is not a strategy, because not eating is not a valid option. &quot;Don&#x27;t eat meat&quot; &lt;em&gt;is&lt;/em&gt; a strategy, because eating meat is perfectly normal. Each option has pros and cons, but both are valid: it&#x27;s a strategic choice. So what is the opposite approach to humility? &quot;Arrogance&quot;, I guess. And yes, sadly, in tech choosing to be arrogant can be a beneficial strategy. Act like an expert, and some people will treat you like an expert.&lt;/p&gt;
&lt;p&gt;Honestly, a lot of this tech-career malarkey is a perception game. If you make a good first impression and your superiors decide that you are &quot;a smart person with good ideas&quot; then you can go a long way without having to actually prove yourself to anyone. If, like me, your whole schtick is &quot;your ideas are better than mine; tell me more about them&quot;, then some people might take that to mean that you don&#x27;t have any ideas. And a bad impression sticks much more thoroughly than a good one. A CEO&#x27;s good opinion, once lost, is lost forever.&lt;/p&gt;
&lt;p&gt;I&#x27;ve had to fight this a couple of times. But even though I&#x27;m asking the &quot;stupid&quot; questions and deferring to others&#x27; expertise, &lt;strong&gt;I know exactly how good I am&lt;/strong&gt;. I also know how valuable this tactic has been to my long-term career advancement (and general mental wellbeing!), so I&#x27;ve made it my policy never to compromise. A healthy team instinctively knows the value of humility already. And an unhealthy team; well, that&#x27;s not a team I want to be a part of.&lt;/p&gt;
&lt;h2 id=&quot;the-elephant-in-the-room-caveat&quot; tabindex=&quot;-1&quot;&gt;The elephant-in-the-room caveat&lt;/h2&gt;
&lt;p&gt;I&#x27;m a white straight male with a private school education&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn3&quot; id=&quot;fnref3&quot;&gt;[3]&lt;/a&gt;&lt;/sup&gt;. That alone gives me more leeway to risk appearing &quot;lesser&quot; than the people I&#x27;m working with. Despite having done nothing to earn it, people are more likely to give me the benefit of the doubt and assume I&#x27;m &quot;playing devil&#x27;s advocate&quot; or just &quot;digging into the nitty gritty details&quot; rather than seeing me as &quot;slow&quot; or having &quot;not grasped the overall concept&quot;.&lt;/p&gt;
&lt;p&gt;People with different backgrounds may well find the suggestion to &quot;show more humility&quot; to be unhelpful and downright insulting. So I think my advice only applies to people who never find their abilities questioned. If you&#x27;ve had to fight tooth and nail just to get in the room, then you probably need (and deserve) to show confidence. It&#x27;s those of us who get all that respect for free that need to tone it down a bit. If more developers &lt;em&gt;in my position&lt;/em&gt; showed a bit more humility, it would open up a lot of doors for other people.&lt;/p&gt;
&lt;h2 id=&quot;is-it-a-useful-concept-for-guiding-my-actions%3F&quot; tabindex=&quot;-1&quot;&gt;Is it a useful concept for guiding my actions?&lt;/h2&gt;
&lt;p&gt;I&#x27;ve gone from self-taught and self-employed to junior-dev to mid- to senior- to whatever-you-want-to-call-what-I-am-now. I&#x27;ve not always been able to live up to my ideals of humility, and have learnt painfully from those experiences. But when I&#x27;ve been able to live up to (or at least near) my lofty ambitions - those are the times I&#x27;ve done my best work. Those are the times I&#x27;ve made the best friends, had the best experiences, and made the best advancements in my career.&lt;/p&gt;
&lt;p&gt;My new colleagues know very little about me beyond my CV, so if all I can do in these early stages is show that I&#x27;m open to conversations and happy to learn wherever possible, then I&#x27;ll call that a win.&lt;/p&gt;
&lt;hr class=&quot;footnotes-sep&quot;/&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn1&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;I know, I know! But trust me; keep reading. The idea is less gross than it sounds. I promise. &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn2&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;A TLI is a Three Letter Initialism. Har har. &lt;a href=&quot;#fnref2&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn3&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;&quot;Lord, grant me the confidence of an average white man.&quot; - I know this is a thing, and it sucks. &lt;a href=&quot;#fnref3&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;</content></entry><entry><title>Podcasting: what gear do you need?</title><link href="https://tomhazledine.com/podcasting-equipment/"/><updated>2021-09-27T00:00:00Z</updated><id>https://tomhazledine.com/podcasting-equipment/</id><content type="html">&lt;p&gt;We&#x27;re in the setup-and-planning phase of launching a new podcast at my new job, and once again I found myself sharing my &lt;em&gt;Podcast Equipment 101&lt;/em&gt; tips with a team who are interested in podcasting but have no prior experience of working with audio. This is not the first time I&#x27;ve written a guide like this, so I&#x27;m publishing this one here for posterity (mostly so I don&#x27;t have to type it all out again &lt;em&gt;next&lt;/em&gt; time).&lt;/p&gt;
&lt;p&gt;I&#x27;ve broken this guide into three sections: an overview of the &lt;a href=&quot;#essential-equipment&quot;&gt;essential equipment&lt;/a&gt; that you&#x27;ll need to record a podcast, my personal recommendation for &lt;a href=&quot;#so-what-should-i-use%3F&quot;&gt;what I think you should use&lt;/a&gt; &lt;em&gt;(if you&#x27;re looking for a &lt;strong&gt;TL;DR&lt;/strong&gt;, this is it)&lt;/em&gt;, and a few &lt;a href=&quot;#good-technique-is-more-important-than-good-equipment&quot;&gt;quick hacks for better recordings&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;essential-equipment&quot; tabindex=&quot;-1&quot;&gt;Essential equipment&lt;/h2&gt;
&lt;p&gt;To record a good podcast, there are three things that you will unequivocally[^1] need. Yes, this is just my opinion. Yes, you can make &quot;a&quot; podcast with less than this. No, I don&#x27;t think that podcast would be a &quot;good&quot; one. The quality bar is low, but there is a bar. Get these three things sorted and your quality is guaranteed to be &quot;good enough&quot;.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;#1%2E-microphones&quot;&gt;A &quot;good&quot; microphone&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#2%2E-connections&quot;&gt;A connection between your mic and your computer&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#3%2E-software&quot;&gt;Software to record the audio from your mic&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;1.-microphones&quot; tabindex=&quot;-1&quot;&gt;1. Microphones&lt;/h3&gt;
&lt;p&gt;It is possible to record a podcast with &lt;em&gt;anything&lt;/em&gt;; your phone&#x27;s earbuds, a dictaphone, your laptop&#x27;s built in speaker, anything you can think of. The content is of course more important than the equipment you use. &lt;strong&gt;However&lt;/strong&gt;, the biggest distinction between amateur and professional podcasts is the audio quality, and the single best investment you can make is to get a decent microphone. The difference between even a &quot;cheap&quot; dedicated microphone and the basic methods outlined above is &lt;em&gt;massive&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;There are three types of microphones that are good for podcasting:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Dynamic mics&lt;/strong&gt; Good examples of these are the basic &lt;a href=&quot;https://www.amazon.co.uk/SHURE-SM58-LC-SM58-Vocal-Microphone/dp/B000CZ0R42&quot;&gt;Shure SM58&lt;/a&gt; (~£85) and the fancy &lt;a href=&quot;https://www.amazon.co.uk/Shure-SM7B-Microphone/dp/B0002E4Z8M&quot;&gt;SM7B&lt;/a&gt; (~£350). Dynamic mics have a small diaphragms (the membrane that converts sound waves to electrical signals), and only pick up noise that is very close to them. Dynamic mics are good for stage performers, but also useful for people recording in noisy environments (although you&#x27;ll have to remember to keep your mouth very close to the mic).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Condenser mics&lt;/strong&gt; Good examples of these are the &lt;a href=&quot;https://www.amazon.co.uk/Rode-Microphones-R%C3%98DE-NT1-Vocal-gold/dp/B0002PSCQM&quot;&gt;Rode NT1-A&lt;/a&gt; (~£150) and the &lt;a href=&quot;https://www.andertons.co.uk/neumann-u87-ai-microphone-set-nickel-finish-w-ea87-shockmount-u87set&quot;&gt;Neumann U87&lt;/a&gt; (~£2,500) These are often &quot;studio grade&quot; microphones, and are great for recording musical instruments and crisp, clear voices. Most entry-level podcasting mics are condensers with large diaphragms, which means they pick up every sound in the room (be careful that you&#x27;re not recording in a noisy environment). These will require a shock mount to eliminate noise from vibrations in your desk and a pop shield to remove the &quot;bangs&quot; that plosive sounds (&quot;a&quot;,&quot;b&quot;, &quot;p&quot;, etc.) make when you speak directly into a sensitive microphone.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Lavalier mics&lt;/strong&gt; Good examples of these are the &lt;a href=&quot;https://www.thomann.de/gb/rode_lavalier_go.htm&quot;&gt;Rode Lavelier Go&lt;/a&gt; (~£50) and the &lt;a href=&quot;https://www.thomann.de/gb/sennheiser_mke404.htm&quot;&gt;Sennheiser MKE40-4&lt;/a&gt; (~£300). These are the tiny clip-on mics that people often use at conferences, and as a result are often part of a &quot;wireless&quot; setup. These are not common for &quot;normal&quot; podcasting, but can be useful for setups with multiple non-technical people in the same room. Mic technique is less of an issue with these, but the sound quality suffers a little compared to standard desk-mounted mics.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;2.-connections&quot; tabindex=&quot;-1&quot;&gt;2. Connections&lt;/h3&gt;
&lt;p&gt;Once you&#x27;ve got your mic, you need a way to connect it to your computer so you can record it. For most microphones, this will involve running an XLR cable from the mic into an &quot;audio interface&quot; that connects to your computer via USB. There are many, many types of audio interfaces that range in price and features, but you can&#x27;t go wrong with the &lt;a href=&quot;https://www.pmtonline.co.uk/focusrite-scarlett-solo-3rd-gen-usb-audio-interface&quot;&gt;Focusrite Scarlett Solo&lt;/a&gt; (~£100) which allows you to connect a single mic to your computer, or the &lt;a href=&quot;https://www.gear4music.com/Recording-and-Computers/Focusrite-Scarlett-2i2-3rd-Gen/2YSF&quot;&gt;Scarlett 2i2&lt;/a&gt; (~£150) that allows you to connect two mics at the same time.&lt;/p&gt;
&lt;p&gt;Some podcast-focused microphones don&#x27;t require an audio interface, and can be connected to the computer directly via USB. Good examples of these are the &lt;a href=&quot;https://www.amazon.co.uk/Rode-Microphones-NT-USB-Microphone/dp/B00KQPGRRE&quot;&gt;Rode NT-USB&lt;/a&gt; (~£140) and the &lt;a href=&quot;https://www.amazon.co.uk/Audio-Technica-AT2020USB-PLUS-USB-Microphone/dp/B00B5ZX9FM&quot;&gt;Audio-Technica AT2020USB+&lt;/a&gt; (~$130).&lt;/p&gt;
&lt;p&gt;You&#x27;ll also need a stand for your microphone. Boom arms give you the best flexibility for an at-the-desk setup (and also give you that drive-time radio DJ vibe), but small tripods that sit directly in front of you are fine. Remember, though, that for best results your mouth needs to be as close to the mic as possible, and this can be awkward if you&#x27;re trying to use a keyboard with a desk-mount between you and the keys. Boom arms offer the best UX.&lt;/p&gt;
&lt;p&gt;Depending on what mic you choose, you may need some extra peripherals. The Shure SM7B, for example, needs a pre-amp to boost the signal before it goes into the audio interface. These are uncommon, however, and most common setups don&#x27;t require anything beyond the items outlines in this doc.&lt;/p&gt;
&lt;h3 id=&quot;3.-software&quot; tabindex=&quot;-1&quot;&gt;3. Software&lt;/h3&gt;
&lt;p&gt;Audio software is an overwhelming mess of options, so I&#x27;ll do my best to be brief here. What software you use depends on your role in the podcast. If you&#x27;re going to be doing any editing, you&#x27;ll need a full Digital Audio Workstation. If you&#x27;re just a host or guest, then all you need to worry about is capturing the audio from your microphone and there are plenty of simple options for this.&lt;/p&gt;
&lt;p&gt;A Digital Audio Workstation (often referred to as a DAW, which can be said &lt;em&gt;&quot;dee, a, double-u&quot;&lt;/em&gt; or &lt;em&gt;&quot;door&quot;&lt;/em&gt; depending on how nerdy you&#x27;re feeling) is a full-featured audio editing suite. With a DAW you can do everything from trimming the ends of an audio file to pitch-shifting your guest&#x27;s voice so it sounds like they&#x27;re singing. Good examples are the Mac-native &lt;a href=&quot;https://www.apple.com/uk/logic-pro/&quot;&gt;Logic Pro&lt;/a&gt; (~£180), the cross-platform industry stalwart &lt;a href=&quot;https://www.avid.com/pro-tools&quot;&gt;Pro Tools&lt;/a&gt; (~$30 per month), and the open-source &lt;a href=&quot;https://www.audacityteam.org/&quot;&gt;Audacity&lt;/a&gt; (free). These are often expensive and can be intimidating to new users, but a good DAW will give you everything you need to record, edit, and export your podcast episodes.&lt;/p&gt;
&lt;p&gt;If you&#x27;re releasing a podcast, &lt;em&gt;someone&lt;/em&gt; on your team will need to have a DAW and know how to use it, but it&#x27;s definitely overkill to expect guests and non-editing hosts to buy one and learn it. While you can &quot;just record&quot; with a DAW (or even a halfway-house like Garage Band), any simple audio-capture software is fine. If you&#x27;re using a Mac, then Quicktime is perfect. I&#x27;m sure there are Windows/Linux equivalents to Quicktime, but they&#x27;ve never crossed my radar. The key features are being able to select which input device you&#x27;re recording from (a.k.a. the fancy mic you&#x27;ve just plugged in) and to make sure that you&#x27;re recording in high quality (without any of the compression that tools like Zoom and Skype introduce to save bandwidth).&lt;/p&gt;
&lt;h2 id=&quot;so-what-should-i-use%3F&quot; tabindex=&quot;-1&quot;&gt;So what should I use?&lt;/h2&gt;
&lt;p&gt;If you&#x27;re not the person doing the editing, then get a decent USB microphone (either of the two mentioned above would be fine). Get a cheap boom arm and record with Quicktime.&lt;/p&gt;
&lt;p&gt;If you want the &quot;best&quot; podcasting setup, then get an SM7B instead of the USB mic. You&#x27;ll then also need a &lt;a href=&quot;https://www.andertons.co.uk/cloud-microphones-cloudlifter-cl-1-single-channel-powered-preamp-for-ribbon-dynamic-microphones-cloudliftercl1&quot;&gt;Cloudlifter&lt;/a&gt; preamp, an XLR cable, and the Scarlett Solo audio interface. Okay, so maybe The Best&lt;sup&gt;TM&lt;/sup&gt; is subjective, but this setup is at least the Industry Standard&lt;sup&gt;TM&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;And if you&#x27;re the designated editor, then I&#x27;d recommend buying (and learning) Logic Pro. Logic is the DAW I use (after having tried a lot of the alternative options over the years) and you can see a list of some of the other bits of podcasting equipment that I use in the &lt;a href=&quot;https://tomhazledine.com/uses/#audio-gear&quot;&gt;Audio Gear section of my &lt;code&gt;/uses&lt;/code&gt; page&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;good-technique-is-more-important-than-good-equipment&quot; tabindex=&quot;-1&quot;&gt;Good technique is more important than good equipment&lt;/h2&gt;
&lt;p&gt;The most important caveat to all of this is that &lt;em&gt;if you don&#x27;t use the equipment properly there&#x27;s no point using it at all&lt;/em&gt;. Even if you spend thousands on mics and peripherals, if you&#x27;re pointing the mic in the wrong direction and recording in an echoey room then your audio will still sound terrible.&lt;/p&gt;
&lt;p&gt;Quick hacks for better recordings:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Always always &lt;strong&gt;always use headphones&lt;/strong&gt;. You&#x27;ll probably be talking to someone over Skype or Zoom, and you only want your microphone to pick up the noises that &lt;em&gt;you&lt;/em&gt; make.&lt;/li&gt;
&lt;li&gt;Keep your mouth as close to the mic as possible, and make sure you&#x27;re talking into the correct part (most dynamic mics record through their top, whereas condensers often record from the side).&lt;/li&gt;
&lt;li&gt;Don&#x27;t record somewhere noisy, and especially if you&#x27;re using a condenser mic be sure to turn off any humming computers or air-conditioners etc.&lt;/li&gt;
&lt;li&gt;Minimize the amount of flat, reflective surfaces near where you are recording. Sound reflections from large flat walls can cause feedback loops or just bad-sounding echoes. The worst place to record is in a perfectly square room with bare walls. Pull the curtains, and try to record in a room with lots of soft furnishings.&lt;/li&gt;
&lt;li&gt;The surface directly &lt;em&gt;behind&lt;/em&gt; the mic (from your perspective) can have a big impact on the sound: if your mic is on your desk in front of you, put a jumper or cushion between the mic and your computer to help minimize unwanted reflections.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There&#x27;s a lot more to podcasting than I&#x27;ve covered here (hosting, editing, marketing, actually making good content) but this guide feels appropriately focused on the equipment side of things. Perhaps I&#x27;ll come back to this well for more how-to articles in future. If that&#x27;s something you&#x27;d be interested in, &lt;a href=&quot;https://twitter.com/thomashazledine&quot;&gt;let me know on Twitter (I&#x27;m @thomashazledine)&lt;/a&gt;. Thanks for reading, and good luck with your podcasting adventure. Be sure to share your show with me when you&#x27;ve launched it, I can&#x27;t wait to hear it.&lt;/p&gt;</content></entry><entry><title>Line graphs with React and D3.js</title><link href="https://tomhazledine.com/line-graphs-with-react-svg-d3/"/><updated>2021-07-21T00:00:00Z</updated><id>https://tomhazledine.com/line-graphs-with-react-svg-d3/</id><content type="html">&lt;p&gt;A while ago I wrote &lt;a href=&quot;https://tomhazledine.com/web-audio-delay/&quot;&gt;an article about the Web Audio API&lt;/a&gt; with an interactive demo. The primary visualisation for that demo was a series of graphs that displayed the live frequency data of the sounds made by the demo. Since then, several people have asked about how the graphs were made and the answer is way too confusing when expressed at tweet-length, so this post is a full explanation.&lt;/p&gt;&lt;p&gt;The core principle is to use React to generate an SVG that updates (&quot;reacts&quot;?) when the data changes, and to use certain features of D3.js to make these calculations easier.&lt;/p&gt;&lt;figure&gt;&lt;div id=&quot;delay-block&quot;/&gt;&lt;figcaption&gt;Push the &quot;pulse&quot; button to make some bleepy-bloopy sounds. The frequency data will be shown in the graph in real-time.&lt;/figcaption&gt;&lt;/figure&gt;&lt;nav class=&quot;toc&quot;&gt;&lt;h2 id=&quot;in-this-article&quot;&gt;In this article&lt;/h2&gt;&lt;ol&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#what-are-the-tools-well-be-using&quot;&gt;What are the tools we&#x27;ll be using? &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#the-basics-converting-an-array-of-data-into-an-svg-path&quot;&gt;The basics: converting an array of data into an SVG path &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;ol class=&quot;stack--small&quot;&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#step-1-parsing-the-data&quot;&gt;Step 1. parsing the data &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#step-2-creating-a-react-component-with-an-svg-in-it&quot;&gt;Step 2. creating a React component with an SVG in it &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#step-3-mapping-our-data-to-the-visual-domain-using-d3js&quot;&gt;Step 3. mapping our data to the visual domain using D3.js &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#make-it-dynamic&quot;&gt;Make it dynamic &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#why-is-this-graph-so-different-from-the-original-demo&quot;&gt;Why is this graph so different from the original demo? &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;stack--small&quot;&gt;&lt;a href=&quot;#core-ideas-to-use-in-your-own-work&quot;&gt;Core ideas to use in your own work &lt;span class=&quot;toc__icon-wrapper&quot;&gt;&lt;span class=&quot;toc__icon icon icon--link&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/nav&gt;&lt;h2 id=&quot;what-are-the-tools-well-be-using&quot;&gt;What are the tools we&#x27;ll be using?&lt;/h2&gt;&lt;ol&gt;&lt;li&gt;&lt;strong&gt;SVG&lt;/strong&gt;&lt;sup id=&quot;fnref-1&quot;&gt;&lt;a href=&quot;#fn-1&quot; class=&quot;footnote-ref&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;: using an SVG &lt;code&gt;path&lt;/code&gt; feels (to me) like a really intuitive way to draw our graph lines. You can inspect the results in any web-inspector just like any other DOM node, and we can style the SVG with CSS in the same way we would style any other component.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;React&lt;/strong&gt;: the React &quot;virtual DOM&quot; makes this kind of graph really easy. When the data changes, React efficiently handles the re-rendering of the graph. Because we&#x27;re using a stream of real-time audio data that updates several times a second, we don&#x27;t need to worry about &quot;tweening&quot; or animating the graph line.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;D3.js&lt;/strong&gt;: D3 is a powerful tool that &lt;em&gt;could&lt;/em&gt; handle the creation of the whole graph. I find React more intuitive for this kind of component work, but D3 has some amazing data-wrangling tools that we can leverage to make our life easier. Specifically, the mapping of data into a layout-friendly domain and the creation of the actual &lt;code&gt;path&lt;/code&gt; values that will form the main part of the graph.&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;The aim is to optimize for an easy workflow that leans into the tools and techniques that I already use when creating websites. I already use React for anything that needs to be &quot;dynamic&quot;. SVG uses markup that looks familiar to anyone who knows HTML, and can be styled with the same (S)CSS workflow that I use for every web project. D3 is the only graph-specific tool I&#x27;m using, and that&#x27;s because it has some very specific utilities that make the rest of the process much easier.&lt;/p&gt;&lt;h2 id=&quot;the-basics-converting-an-array-of-data-into-an-svg-path&quot;&gt;The basics: converting an array of data into an SVG path&lt;/h2&gt;&lt;p&gt;So what&#x27;s happening in the example at the top of the page? At the most basic level, the Web Audio API code is giving us an array of numbers for each moment in time. These numbers are then converted to a format that can be used as line data in an SVG. That SVG is then rendered on the page. Here&#x27;s a simpler example, with all the &quot;decorative&quot; elements (axes, labels, etc.) removed, and using a simpler (and static) data set:&lt;/p&gt;&lt;figure&gt;&lt;div id=&quot;simple-line-graph&quot;/&gt;&lt;figcaption&gt;A simple static line graph drawn using SVG.&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3 id=&quot;step-1-parsing-the-data&quot;&gt;Step 1. parsing the data&lt;/h3&gt;&lt;p&gt;To build this reduced version of the graph, we&#x27;ll start off with some representative data. We&#x27;ll use fewer numbers than the real audio data, but the basic format is the same. The Web Audio API &quot;analyser&quot; gives us an array of frequency data for each moment in time&lt;sup id=&quot;fnref-2&quot;&gt;&lt;a href=&quot;#fn-2&quot; class=&quot;footnote-ref&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;, so what we&#x27;re using for this demo is functionally the same:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; exampleData = [&lt;span class=&quot;hljs-number&quot;&gt;34&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;44&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;32&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;78&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;184&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;221&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;171&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;26&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;62&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;];
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The obvious thing that we&#x27;re missing from this data is a second axis. Each &quot;node&quot; in the graph line represents an &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt; coordinate, and our data only contains a single dimension.&lt;/p&gt;&lt;p&gt;With the real audio data, the array of numbers represents the volume of the signal at a series (an array, even?) of specifc frequencies. This level (ranging between &lt;code&gt;0&lt;/code&gt; and &lt;code&gt;255&lt;/code&gt;) becomes what we plot on the y-axis. Because each value represents an evenly-spaced slice of the frequency data we can distribute our points evenly across our graph. We can use the index-value from the array to create the x-axis data we need.&lt;/p&gt;&lt;p&gt;To convert our raw array of numbers into a format that can be used to draw a graph, we want each item to be an object with an &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt; value. A quick &lt;code&gt;map()&lt;/code&gt; over our array creates this for us:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; exampleData = [&lt;span class=&quot;hljs-number&quot;&gt;34&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;44&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;32&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;78&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;184&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;221&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;171&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;26&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;62&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;];
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; cleanData = exampleData.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;item, i&lt;/span&gt;) =&gt;&lt;/span&gt; ({ &lt;span class=&quot;hljs-attr&quot;&gt;x&lt;/span&gt;: i, &lt;span class=&quot;hljs-attr&quot;&gt;y&lt;/span&gt;: item }));

&lt;span class=&quot;hljs-comment&quot;&gt;// cleanData = [&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;//     {x: 0, y: 34},&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;//     {x: 1, y: 44},&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;//     {x: 2, y: 32},&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;//     {x: 3, y: 78},&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;//     etc...&lt;/span&gt;
&lt;span class=&quot;hljs-comment&quot;&gt;// ];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;step-2-creating-a-react-component-with-an-svg-in-it&quot;&gt;Step 2. creating a React component with an SVG in it&lt;/h3&gt;&lt;p&gt;Now we&#x27;re armed with some useable data, we can create a React component to draw this data onto the page.&lt;/p&gt;&lt;p&gt;What we want is to draw an rectangular &lt;code&gt;&amp;lt;svg&gt;&lt;/code&gt; element with a single &lt;code&gt;&amp;lt;path&gt;&lt;/code&gt; within it. An SVG &lt;code&gt;&amp;lt;path&gt;&lt;/code&gt; gets it&#x27;s shape from a data prop called &lt;code&gt;d&lt;/code&gt;. We&#x27;ll create a &lt;code&gt;line&lt;/code&gt; state value that will populate this prop, and hard code this value for now (and add &lt;em&gt;our&lt;/em&gt; data in the next step).&lt;/p&gt;&lt;p&gt;Note that we&#x27;re doing something triksy with the SVG&#x27;s &lt;code&gt;viewBox&lt;/code&gt; property here. Because in future steps we&#x27;ll be mapping our data to coordinates within the SVG, we need a &lt;em&gt;fixed&lt;/em&gt; set of dimensions for our image. But we also want our graph to be responsive and fit whatever screen it&#x27;s being shown on (even in narrow contexts!) so we&#x27;re setting &lt;strong&gt;absolute&lt;/strong&gt; values for our &lt;code&gt;viewBox&lt;/code&gt; and a &lt;strong&gt;relative&lt;/strong&gt; value (a percentage) for our &lt;code&gt;width&lt;/code&gt;. Combined with the &lt;code&gt;preserveAspectRatio=&quot;none&quot;&lt;/code&gt; prop, this means that we only need to do our coordinate calculations once, and CSS will work it&#x27;s magic to ensure the graph responds to different widths correctly.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;React&lt;/span&gt;, { useState } &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;react&quot;&lt;/span&gt;;

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;ExampleLineGraph&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;{ data }&lt;/span&gt;) =&gt; {
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; [line, setLine] = &lt;span class=&quot;hljs-title function_&quot;&gt;useState&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;M0,200 L100,100 L400,100 L500,0&quot;&lt;/span&gt;);

    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (
        &lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;svg&lt;/span&gt;
            &lt;span class=&quot;hljs-attr&quot;&gt;className&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;graph--example&quot;&lt;/span&gt;
            &lt;span class=&quot;hljs-attr&quot;&gt;width&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;100%&quot;&lt;/span&gt;
            &lt;span class=&quot;hljs-attr&quot;&gt;height&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;200&quot;&lt;/span&gt;
            &lt;span class=&quot;hljs-attr&quot;&gt;viewBox&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;0 0 500 200&quot;&lt;/span&gt;
            &lt;span class=&quot;hljs-attr&quot;&gt;preserveAspectRatio&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;none&quot;&lt;/span&gt;
        &gt;&lt;/span&gt;
            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;className&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;graph__data&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;d&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{line}&lt;/span&gt; /&gt;&lt;/span&gt;
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;svg&lt;/span&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    );
};

&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ExampleLineGraph&lt;/span&gt;;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;We&#x27;ll also want to set some CSS rules so our SVG looks the way we want it to:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-css&quot;&gt;// Declare our colour custom properties (&lt;span class=&quot;hljs-selector-tag&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.k&lt;/span&gt;&lt;span class=&quot;hljs-selector-class&quot;&gt;.a&lt;/span&gt;. CSS variables)
&lt;span class=&quot;hljs-selector-pseudo&quot;&gt;:root&lt;/span&gt; {
    &lt;span class=&quot;hljs-attr&quot;&gt;--grey&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;#dad8d2&lt;/span&gt;;
    &lt;span class=&quot;hljs-attr&quot;&gt;--primary&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;#00b7c6&lt;/span&gt;;
}

// Set the &lt;span class=&quot;hljs-attribute&quot;&gt;border&lt;/span&gt; for the whole graph
&lt;span class=&quot;hljs-selector-class&quot;&gt;.graph--example&lt;/span&gt; {
    &lt;span class=&quot;hljs-attribute&quot;&gt;border&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;1px&lt;/span&gt; solid &lt;span class=&quot;hljs-built_in&quot;&gt;var&lt;/span&gt;(--grey);
}

// Set the colour of the line (and remove any defualt &quot;fill&quot; our line may have)
&lt;span class=&quot;hljs-selector-class&quot;&gt;.graph__data&lt;/span&gt; {
    fill: none;
    stroke: &lt;span class=&quot;hljs-built_in&quot;&gt;var&lt;/span&gt;(--primary);
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Then all that&#x27;s left is to mount our example graph on the page. Don&#x27;t forget that even though we&#x27;re passing in our &lt;code&gt;cleanData&lt;/code&gt; value here, we&#x27;re not actually using it yet (that will come in step #3):&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; exampleData = [&lt;span class=&quot;hljs-number&quot;&gt;34&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;44&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;32&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;78&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;184&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;221&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;171&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;26&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;62&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;];
&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; cleanData = exampleData.&lt;span class=&quot;hljs-title function_&quot;&gt;map&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;(&lt;span class=&quot;hljs-params&quot;&gt;item, i&lt;/span&gt;) =&gt;&lt;/span&gt; ({ &lt;span class=&quot;hljs-attr&quot;&gt;x&lt;/span&gt;: i, &lt;span class=&quot;hljs-attr&quot;&gt;y&lt;/span&gt;: item }));

&lt;span class=&quot;hljs-title class_&quot;&gt;ReactDOM&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;render&lt;/span&gt;(
    &lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;ExampleLineGraph&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;data&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{cleanData}&lt;/span&gt; /&gt;&lt;/span&gt;&lt;/span&gt;,
    &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;simple-line-graph&quot;&lt;/span&gt;)
);
&lt;/code&gt;&lt;/pre&gt;&lt;figure&gt;&lt;div id=&quot;super-simple-line-graph&quot;/&gt;&lt;figcaption&gt;A hard-coded SVG &lt;code&gt;&amp;lt;path&gt;&lt;/code&gt;.&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3 id=&quot;step-3-mapping-our-data-to-the-visual-domain-using-d3js&quot;&gt;Step 3. mapping our data to the visual domain using D3.js&lt;/h3&gt;&lt;p&gt;With our basic line being successfully drawn within the SVG, the next step is to hook in our &quot;real&quot; data. Currently we&#x27;re passing in an array of data via the &lt;code&gt;data&lt;/code&gt; prop, but we&#x27;re not using it yet. We need to convert the array of x/y objects into a format that can be understood by the &lt;code&gt;d&lt;/code&gt; property of an SVG &lt;code&gt;&amp;lt;path&gt;&lt;/code&gt; element.&lt;/p&gt;&lt;p&gt;This is where D3.js comes in handy. The D3 graphing library is often used to generate entire graphs, but all we need in this instance are a couple of helper functions to make our data-conversion a little easier:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; { line, scaleLinear } &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;d3&quot;&lt;/span&gt;;
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;&lt;li&gt;D3&#x27;s &lt;code&gt;line()&lt;/code&gt; function will handle the formatting of our data: turning it into a valid SVG &lt;code&gt;d&lt;/code&gt; value.&lt;/li&gt;&lt;li&gt;D3&#x27;s &lt;code&gt;scaleLinear()&lt;/code&gt; function will help us convert our raw data into spatially-aware values (a.k.a. mapping our &lt;strong&gt;frequency&lt;/strong&gt; values into &lt;strong&gt;pixel&lt;/strong&gt; values)&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;The key concept at work here is that of &lt;strong&gt;ranges&lt;/strong&gt; and &lt;strong&gt;domains&lt;/strong&gt;. Our raw data exists in a frequency &quot;domain&quot;, and the values are frequency values (i.e. &lt;code&gt;34 Hz&lt;/code&gt;, &lt;code&gt;44 Hz&lt;/code&gt;, &lt;code&gt;32 Hz&lt;/code&gt; etc. ). To draw this data with our graph, we&#x27;ll need to convert those frequencies into &lt;em&gt;pixel&lt;/em&gt; values; we need to transform them from the frequency domain to the spatial &quot;range&quot;. This is what we&#x27;ll use &lt;code&gt;scaleLinear&lt;/code&gt; for.&lt;/p&gt;&lt;p&gt;Defining the spatial range is relatively straightforward. In our first pass at the graph, we hardcoded the &lt;code&gt;viewBox&lt;/code&gt; values for our graph. To make life easier for ourselves (and to avoid accidentally changing an important value in one place but missing it in another) we&#x27;ll define our width and height values in a &lt;code&gt;layout&lt;/code&gt; object that we can reference every time we need to use a layout value. We&#x27;ll then update the &lt;code&gt;height&lt;/code&gt; and &lt;code&gt;viewBox&lt;/code&gt; props to use these values:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; layout = {
    &lt;span class=&quot;hljs-attr&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;500&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;200&lt;/span&gt;
};
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;height={layout.&lt;span class=&quot;hljs-property&quot;&gt;height&lt;/span&gt;}
viewBox={&lt;span class=&quot;hljs-string&quot;&gt;`0 0 &lt;span class=&quot;hljs-subst&quot;&gt;${layout.width}&lt;/span&gt; &lt;span class=&quot;hljs-subst&quot;&gt;${layout.height}&lt;/span&gt;`&lt;/span&gt;}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The next piece of the puzzle is to setup our D3 functions as values we can use in the rest of our code. As well as our line generator (using the D3 &lt;code&gt;line()&lt;/code&gt; function), we&#x27;ll need to &lt;em&gt;scales&lt;/em&gt;&lt;sup id=&quot;fnref-3&quot;&gt;&lt;a href=&quot;#fn-3&quot; class=&quot;footnote-ref&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;: one for &lt;code&gt;x&lt;/code&gt; and one for &lt;code&gt;y&lt;/code&gt;. For each scale we&#x27;ll set a range from &lt;code&gt;0&lt;/code&gt; to the corresponding layout value (width for &lt;code&gt;x&lt;/code&gt; and height for &lt;code&gt;y&lt;/code&gt;):&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; graphDetails = {
    &lt;span class=&quot;hljs-attr&quot;&gt;xScale&lt;/span&gt;: &lt;span class=&quot;hljs-title function_&quot;&gt;scaleLinear&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;range&lt;/span&gt;([&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, layout.&lt;span class=&quot;hljs-property&quot;&gt;width&lt;/span&gt;]),
    &lt;span class=&quot;hljs-attr&quot;&gt;yScale&lt;/span&gt;: &lt;span class=&quot;hljs-title function_&quot;&gt;scaleLinear&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;range&lt;/span&gt;([layout.&lt;span class=&quot;hljs-property&quot;&gt;height&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]),
    &lt;span class=&quot;hljs-attr&quot;&gt;lineGenerator&lt;/span&gt;: &lt;span class=&quot;hljs-title function_&quot;&gt;line&lt;/span&gt;()
};
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;There are two more things we need to setup for our line generator before we can use it. Firstly we need to define the domain of our data, and secondly we need to tell the generator which values to use for which axis.&lt;/p&gt;&lt;p&gt;Setting the data domain looks similar to how we set the range. We&#x27;re defining the minimum and maximum values our data might be. The &lt;code&gt;x&lt;/code&gt; domain is the simpler of the two, being as it&#x27;s the number of items in our array (more complicated datasets would need more complicated domains, of course). As for the &lt;code&gt;y&lt;/code&gt; domain, we know that our audio analyser provides a maximum frequency value of &lt;code&gt;255 Hz&lt;/code&gt;, so we can hardcode this value (I like to add a bit of &quot;headroom&quot; to the graph for purely visual reasons, so I&#x27;ve bumped the value from &lt;code&gt;255&lt;/code&gt; to &lt;code&gt;280&lt;/code&gt;).&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;graphDetails.&lt;span class=&quot;hljs-property&quot;&gt;xScale&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;domain&lt;/span&gt;([&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, data.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]);
graphDetails.&lt;span class=&quot;hljs-property&quot;&gt;yScale&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;domain&lt;/span&gt;([&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;280&lt;/span&gt;]);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Assigning the correct data values to the line generator is one of the more esoteric parts of D3 (it confused me for a long time!). Things made a lot more sense when I realised that we&#x27;re defining a function that will be run for each item in our dataset &lt;em&gt;when the line generator is actually used&lt;/em&gt;.&lt;/p&gt;&lt;p&gt;Our data (provided to this component via the &lt;code&gt;data&lt;/code&gt; prop) is in object format (e.g. &lt;code&gt;{x: 3, y: 78}&lt;/code&gt;). We&#x27;ve handily named our values &lt;code&gt;&quot;x&quot;&lt;/code&gt; and &lt;code&gt;&quot;y&quot;&lt;/code&gt; but they could be called &lt;em&gt;anything&lt;/em&gt;, so we need to tell our line generator which values to use. This is also the point where the values are run through our scale functions. So for each item (&lt;code&gt;d&lt;/code&gt;) in our dataset, we&#x27;re passing our &lt;code&gt;d[&quot;x&quot;]&lt;/code&gt; value into the &lt;code&gt;xScale&lt;/code&gt; function, and returning that computed value. (and ditto for &lt;code&gt;y&lt;/code&gt;).&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;graphDetails.&lt;span class=&quot;hljs-property&quot;&gt;lineGenerator&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;x&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;d&lt;/span&gt; =&gt;&lt;/span&gt; graphDetails.&lt;span class=&quot;hljs-title function_&quot;&gt;xScale&lt;/span&gt;(d[&lt;span class=&quot;hljs-string&quot;&gt;&quot;x&quot;&lt;/span&gt;]));
graphDetails.&lt;span class=&quot;hljs-property&quot;&gt;lineGenerator&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;y&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;d&lt;/span&gt; =&gt;&lt;/span&gt; graphDetails.&lt;span class=&quot;hljs-title function_&quot;&gt;yScale&lt;/span&gt;(d[&lt;span class=&quot;hljs-string&quot;&gt;&quot;y&quot;&lt;/span&gt;]));
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;And now that the line generator is all set up, we can finally use it when we intialise our &lt;code&gt;lineData&lt;/code&gt; state, and then we can plumb that into the &lt;code&gt;&amp;lt;path&gt;&lt;/code&gt; element within our SVG:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; [lineData, setLineData] = &lt;span class=&quot;hljs-title function_&quot;&gt;useState&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;() =&gt;&lt;/span&gt;
    graphDetails.&lt;span class=&quot;hljs-title function_&quot;&gt;lineGenerator&lt;/span&gt;(data)
);
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&amp;lt;path className=&lt;span class=&quot;hljs-string&quot;&gt;&quot;graph__data&quot;&lt;/span&gt; d={lineData} /&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;At this point, the full component looks like this:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;React&lt;/span&gt;, { useState } &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;react&quot;&lt;/span&gt;;
&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; { line, scaleLinear } &lt;span class=&quot;hljs-keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;d3&quot;&lt;/span&gt;;

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;ExampleLineGraph&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;{ data }&lt;/span&gt;) =&gt; {
    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; layout = {
        &lt;span class=&quot;hljs-attr&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;500&lt;/span&gt;,
        &lt;span class=&quot;hljs-attr&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;200&lt;/span&gt;
    };

    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; graphDetails = {
        &lt;span class=&quot;hljs-attr&quot;&gt;xScale&lt;/span&gt;: &lt;span class=&quot;hljs-title function_&quot;&gt;scaleLinear&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;range&lt;/span&gt;([&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, layout.&lt;span class=&quot;hljs-property&quot;&gt;width&lt;/span&gt;]),
        &lt;span class=&quot;hljs-attr&quot;&gt;yScale&lt;/span&gt;: &lt;span class=&quot;hljs-title function_&quot;&gt;scaleLinear&lt;/span&gt;().&lt;span class=&quot;hljs-title function_&quot;&gt;range&lt;/span&gt;([layout.&lt;span class=&quot;hljs-property&quot;&gt;height&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;]),
        &lt;span class=&quot;hljs-attr&quot;&gt;lineGenerator&lt;/span&gt;: &lt;span class=&quot;hljs-title function_&quot;&gt;line&lt;/span&gt;()
    };

    graphDetails.&lt;span class=&quot;hljs-property&quot;&gt;xScale&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;domain&lt;/span&gt;([&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, data.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;]);
    graphDetails.&lt;span class=&quot;hljs-property&quot;&gt;yScale&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;domain&lt;/span&gt;([&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;280&lt;/span&gt;]);

    graphDetails.&lt;span class=&quot;hljs-property&quot;&gt;lineGenerator&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;x&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;d&lt;/span&gt; =&gt;&lt;/span&gt; graphDetails.&lt;span class=&quot;hljs-title function_&quot;&gt;xScale&lt;/span&gt;(d[&lt;span class=&quot;hljs-string&quot;&gt;&quot;x&quot;&lt;/span&gt;]));
    graphDetails.&lt;span class=&quot;hljs-property&quot;&gt;lineGenerator&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;y&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-params&quot;&gt;d&lt;/span&gt; =&gt;&lt;/span&gt; graphDetails.&lt;span class=&quot;hljs-title function_&quot;&gt;yScale&lt;/span&gt;(d[&lt;span class=&quot;hljs-string&quot;&gt;&quot;y&quot;&lt;/span&gt;]));

    &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; [lineData, setLineData] = &lt;span class=&quot;hljs-title function_&quot;&gt;useState&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;() =&gt;&lt;/span&gt;
        graphDetails.&lt;span class=&quot;hljs-title function_&quot;&gt;lineGenerator&lt;/span&gt;(data)
    );

    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (
        &lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;svg&lt;/span&gt;
            &lt;span class=&quot;hljs-attr&quot;&gt;className&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;graph--example&quot;&lt;/span&gt;
            &lt;span class=&quot;hljs-attr&quot;&gt;width&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{&lt;/span&gt;&quot;&lt;span class=&quot;hljs-attr&quot;&gt;100&lt;/span&gt;%&quot;}
            &lt;span class=&quot;hljs-attr&quot;&gt;height&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{layout.height}&lt;/span&gt;
            &lt;span class=&quot;hljs-attr&quot;&gt;viewBox&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{&lt;/span&gt;`&lt;span class=&quot;hljs-attr&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;0&lt;/span&gt; ${&lt;span class=&quot;hljs-attr&quot;&gt;layout.width&lt;/span&gt;} ${&lt;span class=&quot;hljs-attr&quot;&gt;layout.height&lt;/span&gt;}`}
            &lt;span class=&quot;hljs-attr&quot;&gt;preserveAspectRatio&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;none&quot;&lt;/span&gt;
        &gt;&lt;/span&gt;
            &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;className&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;graph__data&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;d&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;{lineData}&lt;/span&gt; /&gt;&lt;/span&gt;
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;svg&lt;/span&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    );
};

&lt;span class=&quot;hljs-keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;hljs-title class_&quot;&gt;ExampleLineGraph&lt;/span&gt;;
&lt;/code&gt;&lt;/pre&gt;&lt;figure&gt;&lt;div id=&quot;final-simple-line-graph&quot;/&gt;&lt;figcaption&gt;The line renders the real data 🎉&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2 id=&quot;make-it-dynamic&quot;&gt;Make it dynamic&lt;/h2&gt;&lt;p&gt;The beauty of using React for a project like this is that there aren&#x27;t many more steps required to make the graph dynamically respond to changing data. Because we&#x27;ve already initialised our data with a &lt;code&gt;useState&lt;/code&gt; hook, we can make React watch for changes in the data with a standard &lt;code&gt;useEffect&lt;/code&gt; hook.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-title function_&quot;&gt;useEffect&lt;/span&gt;(&lt;span class=&quot;hljs-function&quot;&gt;() =&gt;&lt;/span&gt; {
    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (data) {
        &lt;span class=&quot;hljs-comment&quot;&gt;// Calculate the data line&lt;/span&gt;
        &lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; newLine = graphDetails.&lt;span class=&quot;hljs-title function_&quot;&gt;lineGenerator&lt;/span&gt;(data);
        &lt;span class=&quot;hljs-title function_&quot;&gt;setLineData&lt;/span&gt;(newLine);
    }
}, [data]);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;With this hook in place, whenever the &lt;code&gt;data&lt;/code&gt; prop changes the path &lt;code&gt;d&lt;/code&gt; will be recalculated and re-rendered. Note again that we&#x27;re not digging into the specifics of &lt;em&gt;how&lt;/em&gt; the data value is changed. That would require an entire article on Web Audio API analyser nodes. This example just covers the graphing component, not the actual data generation.&lt;/p&gt;&lt;figure&gt;&lt;div id=&quot;delay-block-simplified&quot;/&gt;&lt;figcaption&gt;Push the &quot;pulse&quot; button to make some bleepy-bloopy sounds.&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2 id=&quot;why-is-this-graph-so-different-from-the-original-demo&quot;&gt;Why is this graph so different from the original demo?&lt;/h2&gt;&lt;p&gt;There are a couple of obvious differences between this simplified demo and full-featured frequency graph at the top of this page.&lt;/p&gt;&lt;ol&gt;&lt;li&gt;The first graph uses a logarithmic scale for the x-axis (note how on the simple example, the peaks occur squished toward the left of the graph). Instead of using D3&#x27;s &lt;code&gt;scaleLinear()&lt;/code&gt; function, the original graph uses &lt;code&gt;scaleLog()&lt;/code&gt; combined with actual frequency values (rather than the evenly spaced indexes that we&#x27;ve used for the simpler demo). If you&#x27;re implementing this for yourself, you can apply the same concepts that we used on our y-axis: i.e. mapping between a visual range and a data domain.&lt;/li&gt;&lt;li&gt;The first graph has tick marks (the helpful guiding lines that make it clear where each frequency goes). These are implemented with &lt;code&gt;&amp;lt;line&gt;&lt;/code&gt; nodes in SVG, drawing simple lines from one x/y coordinate to another using the &lt;code&gt;x1&lt;/code&gt;, &lt;code&gt;y1&lt;/code&gt;, &lt;code&gt;x2&lt;/code&gt;, and &lt;code&gt;y2&lt;/code&gt; props.&lt;/li&gt;&lt;li&gt;The first graph has labels for the axes. Truth be told, I&#x27;ve dodged some complexity here by only marking the minimum and maximum frequency values. This allows me to add the labels with traditional markup and CSS. If you wanted to mark incremental values along either axis, you would need to use the &lt;code&gt;yScale&lt;/code&gt; or &lt;code&gt;xScale&lt;/code&gt; functions to find the visual positions of the exact values you wanted to mark.&lt;/li&gt;&lt;/ol&gt;&lt;h2 id=&quot;core-ideas-to-use-in-your-own-work&quot;&gt;Core ideas to use in your own work&lt;/h2&gt;&lt;p&gt;As I just mentioned, in this article we&#x27;ve made a much-simplified version of the original frequency graph. This is deliberate, because every graph will inevitably have it&#x27;s own quirks and idiosyncrasies that make it different from all other graphs (and thus hard to explain in a basic manner). I wish it wasn&#x27;t so, but you can only abstract so far before your all-singing-all-dancing reusable graphing component has so many options that it&#x27;s actually &lt;em&gt;harder&lt;/em&gt; to use that building every graph individually from scratch. This article is an attempt to show a few core concepts that can be reused in lots of different contexts. Those core concepts are:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;Use whatever tools that you are most comfortable with (but sometimes add in a &lt;em&gt;little&lt;/em&gt; bit of something new to make your life easier). I&#x27;m comfortable using React and SVG, so I&#x27;m mostly just using those. Graph-maths can get hard, though, so I&#x27;m using &lt;em&gt;as little D3 as possible&lt;/em&gt; to make my life easier.&lt;/li&gt;&lt;li&gt;SVG and React are great tools for creating visualisations. If visualising data is something that you want to do on a regular basis, these tools are great ones to learn. They&#x27;re versatile enough to handle all sorts of data-vis and the skills you learn will also be useful in the wider web ecosystem (so you&#x27;re not wasting too much time learning an esoteric system that&#x27;s only useful for one thing).&lt;/li&gt;&lt;li&gt;Speaking of esoteric systems, D3.js is really powerful but can be daunting too. It can do so much, but also has it&#x27;s own quirky ways of doing a lot of things. My response is to just use the parts that I actually need, which in this case is just the line generator and linear scale calculator. Then I&#x27;m free to let the more conventional tools (a.k.a. React and hand-coded vanilla SVG) to do the bulk of the work.&lt;/li&gt;&lt;/ol&gt;&lt;div class=&quot;footnotes&quot;&gt;&lt;hr/&gt;&lt;ol&gt;&lt;li id=&quot;fn-1&quot;&gt;If SVGs are new to you (or you just need a quick refresher on their syntax) I&#x27;ve written a &lt;a href=&quot;https://tomhazledine.com/svg-markup/&quot;&gt;primer on SVG markup&lt;/a&gt; that might be useful.&lt;a href=&quot;#fnref-1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id=&quot;fn-2&quot;&gt;&lt;em&gt;&lt;strong&gt;A quick note about getting audio data:&lt;/strong&gt; we&#x27;re skipping the details of getting raw frequency data from the Web Audio API. The important concept to Google is the &lt;code&gt;createAnalyser&lt;/code&gt; method. &lt;code&gt;createAnalyser()&lt;/code&gt; is available on any audio &quot;context&quot; (a concept we touched on in detail in the &lt;a href=&quot;https://tomhazledine.com/web-audio-delay/&quot;&gt;original Web Audio API post&lt;/a&gt;).&lt;/em&gt;&lt;a href=&quot;#fnref-2&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id=&quot;fn-3&quot;&gt;Note that for the yScale we&#x27;re setting the range in reverse (from &lt;code&gt;height&lt;/code&gt; to &lt;code&gt;0&lt;/code&gt;). This is so that our line starts at the &lt;em&gt;bottom&lt;/em&gt; of the graph.&lt;a href=&quot;#fnref-3&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;</content></entry><entry><title>Learning (and doing) in public</title><link href="https://tomhazledine.com/learning-and-doing-in-public/"/><updated>2021-04-30T00:00:00Z</updated><id>https://tomhazledine.com/learning-and-doing-in-public/</id><content type="html">&lt;p&gt;I&#x27;ve always struggled with &lt;em&gt;finishing&lt;/em&gt; things, but lately I&#x27;ve found that forcing myself to release projects early has had some amazing effects. Flushed with that success, I&#x27;m going one step further and making myself publicly accountable for things I&#x27;m &lt;em&gt;planning&lt;/em&gt; to do.&lt;/p&gt;
&lt;h2 id=&quot;what&#x27;s-been-working%3F&quot; tabindex=&quot;-1&quot;&gt;What&#x27;s been working?&lt;/h2&gt;
&lt;p&gt;As I mentioned in my last post, &lt;a href=&quot;https://tomhazledine.com/falling-back-in-love-with-music/&quot;&gt;I&#x27;ve been making music again&lt;/a&gt;. A big part of the enthusiasm I&#x27;ve maintained for music lately comes from the fast feedback loop that comes from learning in public.&lt;/p&gt;
&lt;p&gt;With my past musical endeavours I would ticker for ages in private, building up to a &quot;grand reveal&quot; that often simply never happened. This time around I&#x27;ve made the conscious decision to share early; I&#x27;m posting experiments and practices to my instagram account, and releasing pieces onto YouTube as soon as their &quot;done&quot;. This has taken two big leaps for me:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;I&#x27;ve never shared &quot;practice&quot; before. I&#x27;m objectively bad at the instrument I&#x27;m currently learning (my modular synth), and my practices could be seen by experts as embarrassing. I&#x27;m teaching myself not to care about this.&lt;/li&gt;
&lt;li&gt;I&#x27;ve had to change my definition of &quot;done&quot;. The pieces I&#x27;m releasing are not finely crafted opuses. I&#x27;m releasing as soon as I have ~4 minutes of sound with a beginning, middle, and end.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The results so far have been awesome. It&#x27;s great to get positive feedback; hearing that people like my work drives me to make more of it. Negative feedback would be useful, too, but I&#x27;ve (mercifully?) not had much of that yet. Although on social media a &lt;em&gt;lack&lt;/em&gt; of any feedback is a strong signal. The good stuff gets a reaction, and the bad stuff sinks into obscurity. Either way, I&#x27;m learning what works and what doesn&#x27;t work, and that guides my future experiments and practice sessions.&lt;/p&gt;
&lt;p&gt;And in the spirit of &lt;em&gt;&quot;doubling down on what seems to be working&quot;&lt;/em&gt;, I&#x27;m now expanding my &lt;em&gt;&quot;do all the things in public!&quot;&lt;/em&gt; policy to some other areas.&lt;/p&gt;
&lt;h2 id=&quot;what-am-i-committing-myself-to%3F&quot; tabindex=&quot;-1&quot;&gt;What am I committing myself to?&lt;/h2&gt;
&lt;p&gt;Firstly, some simple rolling objectives. I&#x27;ve had these goals in place since January as part of my &lt;a href=&quot;https://tomhazledine.com/year-of-writing/&quot;&gt;Year of Writing&lt;/a&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A written piece on this blog, once a month.&lt;/li&gt;
&lt;li&gt;Twelve videos about my modular synth on YouTube by the end of the year.&lt;/li&gt;
&lt;li&gt;Fifty-two modular-themed posts on Instagram by the end of the year.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;They sound modest, but just look back at &lt;a href=&quot;https://tomhazledine.com/archive/&quot;&gt;my blogging history&lt;/a&gt; to see how &lt;em&gt;consistent&lt;/em&gt; (or should I say &lt;em&gt;inconsistent&lt;/em&gt;) my track record is. I can be very productive in short bursts, but keeping up momentum for a full calendar year is not something I often manage.&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;Secondly, I&#x27;m setting myself some stretch goals. These are things I &lt;em&gt;want&lt;/em&gt; to get done Soon™️, and would love to get shipped before the end of the summer. But if I get to December and haven&#x27;t hit any of these goals but &lt;em&gt;have&lt;/em&gt; met my rolling objectives, I&#x27;ll still call the year a &quot;Win&quot;.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Sort out the newsletter.&lt;/strong&gt; Should this site (should &lt;em&gt;I&lt;/em&gt;) have a newsletter? I started a podcast-focused one last year, and it &lt;s&gt;flopped&lt;/s&gt; was less of a success than I&#x27;d hoped for. I&#x27;m currently on the fence about whether I should have a general newsletter for all the content published on this site, or whether it should focus solely on my Modular Synth activities. What I &lt;em&gt;do&lt;/em&gt; know, is that this site should have a proper &quot;call to action&quot; for people who enjoy the content.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Release &lt;a href=&quot;https://www.npmjs.com/package/picobel&quot;&gt;Picobel.js&lt;/a&gt; as a React component.&lt;/strong&gt; I (still!) really enjoy working in React, and Picobel feels like the perfect use-case for the &lt;code&gt;&amp;lt;Component /&gt;&lt;/code&gt; pattern. It also gives me more control over state changes (like &quot;playing&quot; or &quot;paused&quot; or &quot;loading&quot;) which lead to a nicer (and more reliable) experience for the end user.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Make an interactive JavaScript version &lt;em&gt;In C&lt;/em&gt;.&lt;/strong&gt; This one&#x27;s is just for me, and just for fun. I&#x27;d love to recreate Terry Riley&#x27;s seminal minimalist musical composition, &lt;em&gt;In C&lt;/em&gt;, on my modular. Alas, both my skills and sequencing equipment aren&#x27;t up to the task just yet. As a stopgap, I&#x27;m going to recreate it in the browser using the Web Audio API.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;what-are-the-consequences-of-failure%3F&quot; tabindex=&quot;-1&quot;&gt;What are the consequences of failure?&lt;/h2&gt;
&lt;p&gt;In all honesty, the consequences of missing my targets are mercifully slight. Given the amount of readers this blog gets (very few) and the number of people clamouring for my new projects (none), there are no tangible consequences for missing my &quot;deadlines&quot;.&lt;/p&gt;
&lt;p&gt;But failure stings, even if the bounds of success are arbitrary and imaginary. Fear of failing to meet my rolling goals has already pushed me to publish more frequently here and on IG and YouTube. Ask me in six months how this experiment has gone. I&#x27;ve reasonably confident that I&#x27;ll feel good about it by then.&lt;/p&gt;</content></entry><entry><title>Falling back in love with music</title><link href="https://tomhazledine.com/falling-back-in-love-with-music/"/><updated>2021-03-31T00:00:00Z</updated><id>https://tomhazledine.com/falling-back-in-love-with-music/</id><content type="html">&lt;p&gt;Over the last year I&#x27;ve fallen in love with making music again, and it&#x27;s all thanks to &lt;strong&gt;modular synthesisers&lt;/strong&gt;. But to understand why this is such a big step for me, you need to know just how surprising it is that I&#x27;m now &lt;em&gt;&quot;in to&quot;&lt;/em&gt; electronic music.&lt;/p&gt;
&lt;figure&gt;&lt;img src=&quot;/images/articles/modular_with_succulent.jpg&quot; alt=&quot;&quot;/&gt;&lt;figcaption&gt;My growing eurorack modular synthesiser (complete with obligatory succulent)&lt;/figcaption&gt;&lt;/figure&gt;
&lt;h3 id=&quot;falling-out-of-love-with-music&quot; tabindex=&quot;-1&quot;&gt;Falling out of love with music&lt;/h3&gt;
&lt;p&gt;I&#x27;ve always been &quot;into&quot; music, but I used to be &lt;em&gt;really&lt;/em&gt; into music. I played in lots of bands, tried my hand as a session musician, tried to start a record label, ran a music blog (for, like, years!). But in 2013 it all sort of fizzled out.&lt;/p&gt;
&lt;p&gt;In retrospect, I ran out of steam. On paper things were going in the right direction - I could legitimately call myself a session musician, I sold a couple of commercial compositions, and I even had a song of mine on the radio (that £6 royalty cheque was a Big Deal, let me tell you!), but I never really saw enough success in any area to persevere. Except, maybe, the blog - &lt;em&gt;that&lt;/em&gt; worked and was fun.&lt;/p&gt;
&lt;p&gt;Making that blog was so fun, in fact, that 12 years later I now have a pretty decent career as a frontend engineer making things for the web. But the &quot;music&quot; aspect soon fell by the wayside. I shuttered the blog in 2013 I never looked back, focusing instead on frontend engineering.&lt;/p&gt;
&lt;hr class=&quot;hr--bump&quot;/&gt;
&lt;h3 id=&quot;the-wilderness-years&quot; tabindex=&quot;-1&quot;&gt;The wilderness years&lt;/h3&gt;
&lt;p&gt;For a long time I was more interested in writing code than writing music. A couple of my projects touched on music but the focus was always on the technology, never on actually creating music. The Web Audio API featured heavily in my &lt;a href=&quot;https://codepen.io/tomhazledine/full/VKvNJg&quot;&gt;CodePen tinkering&lt;/a&gt; and I built a whole conference talk around my &lt;a href=&quot;https://tomhazledine.com/web-audio-delay/&quot;&gt;experiments recreating a guitarists&#x27; delay pedal in JavaScript&lt;/a&gt;. But at no point was I &lt;em&gt;making music&lt;/em&gt;. Not even in private or just for fun. If I remembered, I&#x27;d run a few drills on the guitar to maintain my muscle memory but I wasn&#x27;t ever composing or creating anything new.&lt;/p&gt;
&lt;h3 id=&quot;guitar-pedals%3A-the-ultimate-gateway-drug&quot; tabindex=&quot;-1&quot;&gt;Guitar pedals: the ultimate gateway drug&lt;/h3&gt;
&lt;p&gt;This story hinges on a single moment: I saw something and was instantly hooked. But the groundwork for that one incident was laid over a long, long time. How did I get into electronica? It&#x27;s a big leap for an ex-musician who always focused on &lt;em&gt;acoustic&lt;/em&gt; instruments (heck, I wrote my undergraduate dissertation on the evolution of English folk music, and my post-grad thesis was an extremely contrived deep-dive into the &quot;album&quot; as a medium).&lt;/p&gt;
&lt;p&gt;But there were two things that lit the spark of interest that would ignite into a full-blown obsession with modular synths: GAS and the Web Audio API.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;GAS - a.k.a. Gear Acquisition Syndrome. As in, &lt;em&gt;&quot;oh boy, those new Strymon guitar pedals have triggered my GAS. RIP my bank account&quot;&lt;/em&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Guitar pedals are a fantastic introduction into the world of modular synths: small units that do one thing to an audio signal. It already sounds very &quot;modular&quot;, am I right? And I&#x27;ve &lt;em&gt;always&lt;/em&gt; loved guitar pedals. In fact, my GAS covers all guitar-related gear. Microphones, audio interfaces, cables, pedals, the guitars themselves. I&#x27;m not going to lie; I get just as much (if not more!) pleasure from owning all these nice shiny things than I do from actually using them.&lt;/p&gt;
&lt;p&gt;The second factor that paved the way for an interest in modular was the Web Audio API. A side effect of playing around with using JavaScript to create and manipulate audio was that (almost by a process of osmosis) I was exposed to concepts and terms that originated in the world of hardware synthesisers. VCAs and VCOs became part of my lexicon, along with more familiar concepts like filtering and mixing. Bit by bit, without even being aware of it at the time, I was learning how to synthesise sound.&lt;/p&gt;
&lt;h3 id=&quot;enter-stage-right%3A-modular-synthesisers&quot; tabindex=&quot;-1&quot;&gt;Enter stage right: modular synthesisers&lt;/h3&gt;
&lt;p&gt;So what was that single moment that opened my eyes to the world of modular synths? Quite simply, it was a YouTube video. I&#x27;ve kept a weather eye on Andrew Huang&#x27;s musical adventures for a while, but I stumbled on his &lt;a href=&quot;https://youtu.be/cWslSTTkiFU&quot;&gt;Modular Synthesis Explained&lt;/a&gt; video while looking for something cool to include in my newsletter. Specifically, the shot of his mega system at work at &lt;a href=&quot;https://youtu.be/cWslSTTkiFU?t=930&quot;&gt;15:30 mins&lt;/a&gt; touched something deep inside me. I didn&#x27;t know what it was, or what it was doing, or how it worked, but I knew I wanted one for myself.&lt;/p&gt;
&lt;p&gt;Andrew has made &lt;a href=&quot;https://www.youtube.com/watch?v=oFadopWxKjw&quot;&gt;lots&lt;/a&gt; of &lt;a href=&quot;https://www.youtube.com/watch?v=UXEyEIo-WtA&quot;&gt;videos&lt;/a&gt; about his eurorack system over the years (it&#x27;s fascinating to see the system grow over time) and he&#x27;s made some fantastic &quot;explainer&quot; videos. YouTube, it turns out, is a great place to ramp up your GAS to extreme levels. there are so many great creators making so many great videos, both showing off their great modular music but also making fantastic tutorial content.&lt;/p&gt;
&lt;hr class=&quot;hr--bump&quot;/&gt;
&lt;h3 id=&quot;why-has-modular-made-me-fall-back-in-love-with-making-music%3F&quot; tabindex=&quot;-1&quot;&gt;Why has modular made me fall back in love with making music?&lt;/h3&gt;
&lt;p&gt;I&#x27;m about a year into my modular journey at this point. It was twelve-ish months ago that I first learned what a modular synth was, and another few months of research and obsessive YouTube bingeing before I bit the bullet and bought my first modules. Now my system is getting to the point where I can really make some fun pieces with it, and I&#x27;m excited about what the future holds.&lt;/p&gt;
&lt;p&gt;I&#x27;ve embraced the idea of &quot;learning in public&quot;, so I&#x27;m sharing all my experiments and clumsy, early attempts at music making on &lt;a href=&quot;https://www.instagram.com/tomhazledine/&quot;&gt;my Instagram feed&lt;/a&gt;. This is totally unlike anything I ever did with any other instrument, and goes against my instinct of getting things as close to perfect as possible before sharing them with anyone. And it feels great! There&#x27;s no pressure to be &quot;good&quot;, because everyone knows I&#x27;m making this stuff up as I go along. And the feedback I&#x27;ve already had is just amazing - there&#x27;s so much more validation in being &quot;okay&quot; at something in public than there is in being amazing at it in private. I should have adopted this approach a long time ago.&lt;/p&gt;
&lt;p&gt;And when (on the rare occasion) I make something I&#x27;m &lt;em&gt;really&lt;/em&gt; proud of, I&#x27;ll take the time to edit it and &lt;a href=&quot;https://youtu.be/ZVc8TzQ_z4U&quot;&gt;put it on YouTube&lt;/a&gt;. YouTube feels more &quot;permanent&quot; than the &#x27;gram, and already I&#x27;m seeing that the life of a YT video continues long (so far!) after the initial launch. Whereas on Instagram, once a post is off the front page it is gone forever (as far as engagement goes).&lt;/p&gt;
&lt;p&gt;As for &lt;em&gt;why&lt;/em&gt; I&#x27;m enjoying it so much, there are several reasons:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;I love the sounds I can make with this machine.&lt;/strong&gt; I&#x27;ve been listening to &lt;em&gt;a lot&lt;/em&gt; of ambient music made on modular systems, and I&#x27;m relishing the challenge of recreating that style all by myself (and I still have a lot of learning and practicing to do!).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;I love that making music on a modular doesn&#x27;t require a computer at all.&lt;/strong&gt; Manipulating sounds with real tactile controls and making connections with physical wires is exponentially more fun than using a software alternative. Sure, you might be able to create the same sounds &quot;in the box&quot; (maybe), but you can&#x27;t create the same experience. Modular synths are &lt;em&gt;playable&lt;/em&gt;. You can build muscle memory, you can manipulate two parameters &lt;em&gt;at the same time&lt;/em&gt; (try doing that with a mouse). You can &quot;ride&quot; a fader or pot with so much more precision than you can in a software GUI.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;I love that I get to build the instrument that I want to play.&lt;/strong&gt; There are so many modules out there that there&#x27;s a high chance that even my small system is unique. I get to choose the exact tools required to make the kinds of sounds I want to make.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;I love that I can make make sounds that are impossible (or at least highly impractical) to make on a computer.&lt;/strong&gt; There are some things that you can do on a modular synthesiser that you just cannot do in software.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;I love how the instrument looks.&lt;/strong&gt; I&#x27;m not going to lie, the aesthetic of modular is probably a good third of my motivation for getting into it. The arrays of potentiometers, the vast selection of I/O, the blinking LEDs (oh, the blinking LEDs!), and the general space-ship-control-panel vibe. I love it all.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;There are plenty more reasons, too. And looking at that list written down, I&#x27;m now thinking that each one of those points could be an article all by itself (so stay tuned for more modular nerdery here soon). But suffice it to say, I&#x27;ve fallen hard for modular synthesisers.&lt;/p&gt;
&lt;p&gt;If you&#x27;re interested in my modular journey, be sure to checkout &lt;a href=&quot;https://youtu.be/ZVc8TzQ_z4U&quot;&gt;my YouTube channel&lt;/a&gt; where I post &quot;completed works&quot; and &lt;a href=&quot;https://www.instagram.com/tomhazledine/&quot;&gt;my Instagram feed&lt;/a&gt; where I post my experiments and test things out.&lt;/p&gt;
&lt;iframe width=&quot;100%&quot; height=&quot;450&quot; src=&quot;https://www.youtube.com/embed/ZVc8TzQ_z4U&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;allowfullscreen&quot;/&gt;</content></entry><entry><title>The year of writing</title><link href="https://tomhazledine.com/year-of-writing/"/><updated>2021-02-07T00:00:00Z</updated><id>https://tomhazledine.com/year-of-writing/</id><content type="html">&lt;p&gt;For 2019 I experimented with an alternative to a traditional new year&#x27;s resolution: a &quot;Yearly Theme&quot;. It was such a success that I repeated the process in 2020, and now I&#x27;m laying the foundations for my &quot;theme&quot; for 2021.&lt;/p&gt;
&lt;h2 id=&quot;themes-are-not-resolutions&quot; tabindex=&quot;-1&quot;&gt;Themes are &lt;em&gt;not&lt;/em&gt; resolutions&lt;/h2&gt;
&lt;p&gt;To be blunt, I&#x27;ve come to view new year&#x27;s resolutions as a load of nonsense. They&#x27;re often small and frivolous goals set with little thought and even less expectation of success. But I am a big believer in occasionally taking-stock and assessing my progress. Progress in what, you may ask? Well, pretty much everything.&lt;/p&gt;
&lt;p&gt;And because everything takes a pause at the end of the year (by design, as Christmas is a big deal in my house), the January-December cadence works well as a natural period to look back on and plan ahead for. Although perfectly arbitrary, the incrementing of a number on the calendar is a useful boundary.&lt;/p&gt;
&lt;h2 id=&quot;what-are-yearly-themes%3F&quot; tabindex=&quot;-1&quot;&gt;What are Yearly Themes?&lt;/h2&gt;
&lt;p&gt;Inspired by &lt;a href=&quot;https://www.thethemesystem.com/&quot;&gt;CGP Grey and Myke Hurley from the Cortex podcast&lt;/a&gt;, a yearly theme is a guiding idea or principle that you apply to your life for the whole year. The &quot;theme&quot; concept is deliberately vague enough to mean different things to different people. So what does a yearly theme mean to me?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;It should be specific enough to provide guidance when faced with a decision.&lt;/strong&gt; You should be able to envisage a situation where your theme would be useful when faced with a &quot;should I do &lt;em&gt;x&lt;/em&gt; or &lt;em&gt;y&lt;/em&gt;&quot; decision.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;It should, by nature, be strategic, and therefore have a logical opposite.&lt;/strong&gt; The theme is all about choosing a specific path for yourself, so it would have no value if it was something that you would naturally do anyway. A theme like &quot;the year of getting older one day at a time&quot; is meaningless, because it&#x27;s something you&#x27;re inevitably going to do: there is no viable alternative. In a similar vein, I don&#x27;t think that &quot;the year of being successful&quot; is a good theme because no one sets out to &lt;em&gt;not&lt;/em&gt; be successful, and in many ways success is a measure, not a specific goal. You can&#x27;t plan to be successful; success is an outcome of your plans.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;It must be memorable, because you should have it at the front of your mind throughout the year.&lt;/strong&gt; It&#x27;s also helpful if other people in you life can remember it, too. That helps with accountability and also gives those around you an insight into why you choose to do the things you do.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;past-themes%3A&quot; tabindex=&quot;-1&quot;&gt;Past themes:&lt;/h2&gt;
&lt;p&gt;This is not my first rodeo, and I&#x27;ve had a theme for each of the last couple of years.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;2019: The year of shipping.&lt;/strong&gt; My plan here was to increase the amount of projects that I finished. By default I&#x27;m a tinkerer, and rarely see things through to completion, so setting this as an explicit goal meant that I shipped more things. In many ways it was a great success&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt; and heralded a change in mental attitude, but there&#x27;s still more work to be done. I &lt;em&gt;do&lt;/em&gt; ship more now that I used to, but I still err on the side of Infinite Tinkering.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;2020: The year of action.&lt;/strong&gt; I wasn&#x27;t happy with the name for this one, but &lt;a href=&quot;https://twitter.com/ed_the_coder&quot;&gt;@ed_the_coder&lt;/a&gt; convinced me to roll with &quot;action&quot;. In my mind it was more akin to the (less catchy) &quot;year of personal responsibility&quot;. In many, many ways this ended up being a great theme for 2020.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;2021%3A-the-year-of-%3F%3F%3F&quot; tabindex=&quot;-1&quot;&gt;2021: The year of ???&lt;/h2&gt;
&lt;p&gt;For 2021 I&#x27;m hedging my bets and choosing a dual-sided theme. Last year I got into modular synths in a big way, and as a result I&#x27;ve fallen back in love with music&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn2&quot; id=&quot;fnref2&quot;&gt;[2]&lt;/a&gt;&lt;/sup&gt;. So I&#x27;m determined to write and release some of my own music this year. I&#x27;m also doubling down on blogging as a concept that I think is important. Some of my favourite websites are blogs, and as someone who writes code for a living, have an outlet for my more &lt;em&gt;creative&lt;/em&gt; technological experiments is valuable both for my career and as a general learning tool.&lt;/p&gt;
&lt;p&gt;So this year I&#x27;ll be &lt;em&gt;writing&lt;/em&gt; music. And what is blogging if not &lt;em&gt;writing&lt;/em&gt;? 2021: the year of music? The year of blogging? Why not both? &lt;strong&gt;2021 is going to be my Year of Writing&lt;/strong&gt;. Ask me in 2022 how I got on...&lt;/p&gt;
&lt;hr class=&quot;footnotes-sep&quot;/&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn1&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;In 2019 I upped my workplace productivity, and consistently released weekly episodes of the &lt;em&gt;A Question of Code&lt;/em&gt; podcast (where we have &lt;a href=&quot;https://aquestionofcode.com/43-yearly-themes-2020/&quot;&gt;talked at length about Yearly Themes&lt;/a&gt; before). &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn2&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;How I fell &lt;strong&gt;out&lt;/strong&gt; of love with music is an interesting tale, but one for another time. &lt;a href=&quot;#fnref2&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;</content></entry><entry><title>RSS in 2021 (yes, it&#x27;s still a thing)</title><link href="https://tomhazledine.com/adding-rss/"/><updated>2021-01-17T00:00:00Z</updated><id>https://tomhazledine.com/adding-rss/</id><content type="html">&lt;p&gt;I&#x27;m trying out a &quot;recipe blogger&quot; style of writing&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt;. That is to say, I&#x27;m going to share a simple set of technical instructions but first I&#x27;ll tell you a rambling story about how this recipe reminds me of how butterflies sip dew from the golden whatever high atop the thing... Unlike food bloggers, however, I&#x27;m self-aware enough to include handy section links so you can choose your own adventure.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Rambling story: &lt;a href=&quot;#why-im-an-rss-fanboy&quot;&gt;Why I&#x27;m an RSS fanboy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Actually useful content: &lt;a href=&quot;#how-i-added-an-rss-feed-to-my-eleventy-blog&quot;&gt;How I added an RSS feed to my Eleventy blog&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;My finished feed: &lt;a href=&quot;https://tomhazledine.com/feed.xml&quot;&gt;tomhazledine.com/feed.xml&lt;/a&gt; (go ahead, follow me!)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;why-i&#x27;m-an-rss-fanboy&quot; tabindex=&quot;-1&quot;&gt;Why I&#x27;m an RSS fanboy&lt;/h2&gt;
&lt;p&gt;Strangely, RSS is one of my favourite parts of the web. I say &quot;strangely&quot; because I&#x27;m primarily a front end developer who loves having control over how a website &lt;em&gt;looks&lt;/em&gt;, and it&#x27;s hard to imagine a medium that gives you &lt;em&gt;less&lt;/em&gt; control over the display of your content than RSS does. It&#x27;s purely a content-based medium. As it says in the name; it&#x27;s &lt;em&gt;really simple&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;So why do I love it so?&lt;/em&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;It&#x27;s the underpinning tech that makes podcasts possible.&lt;/strong&gt; You might not have heard, but I&#x27;m &lt;a href=&quot;&quot;&gt;really&lt;/a&gt; &lt;a href=&quot;&quot;&gt;in to&lt;/a&gt; &lt;a href=&quot;&quot;&gt;podcasting&lt;/a&gt; and think it&#x27;s one of the single greatest innovations of my lifetime. And part of the power of the medium is that the distribution is 100% decentralised. Literally anyone (with access to the bare minimum tech requirements) can distribute their show on the same footing as giant media companies. Here at the start of 2021 it looks like that might be in danger of changing, but the core concept of &quot;what I think a podcast is&quot; still feels solid and robust and defensible. People will still be making the kind of podcasts I like decades from now, thanks in part to RSS.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;It&#x27;s a direct delivery to me from writers I want to read.&lt;/strong&gt; So much of modern content delivery is predicated on virallity and share-ability, but sometimes there are writers (dare we even say &lt;em&gt;bloggers&lt;/em&gt;) who I know in advance I want to read (or at least be made aware of) everything they publish. RSS makes that process (you guessed it) &lt;em&gt;Really Simple&lt;/em&gt;. There are no algorithms to filter what I&#x27;m shown, and no adverts and holding-pages injected into the flow to drive me crazy. It&#x27;s just the content. And while for lazy readers like me there &lt;em&gt;are&lt;/em&gt; timelines to wade through, provided your reader-app is a good one this process is straightforward and manageable.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;how-i-added-an-rss-feed-to-my-eleventy-blog&quot; tabindex=&quot;-1&quot;&gt;How I added an RSS feed to my Eleventy blog&lt;/h2&gt;
&lt;p&gt;So given that I love RSS so much, why don&#x27;t I have an RSS feed for my own blog? Well, you&#x27;ll be pleased to hear that now I do. Part of the fun of maintaining your own blog is that you tend not to get too much for free, especially if (like me) you&#x27;ve chosen to roll your own site with minimal help from pre-made themes or templates. Adding features like RSS feeds (or search, or favicons, or meta tags) is all in the journey. Thankfully I&#x27;m not mad enough to have rolled my own static site generator (yet), so with a little help from the folks at Eleventy I was able to add an RSS feed with ~very little fuss at all~ &lt;em&gt;some fuss after all&lt;/em&gt;.&lt;/p&gt;
&lt;h3 id=&quot;1.-create-a-feed.xml-page&quot; tabindex=&quot;-1&quot;&gt;1. Create a &lt;code&gt;feed.xml&lt;/code&gt; page&lt;/h3&gt;
&lt;p&gt;Add a &lt;code&gt;feed.md&lt;/code&gt; file in your content directory, and use the &lt;code&gt;permalink&lt;/code&gt; frontmatter to tell Eleventy that you want the page to be created as an XML file, and that you want the page to be &lt;a href=&quot;https://www.11ty.dev/docs/collections/#option-exclude-content-from-collections&quot;&gt;excluded from collections&lt;/a&gt; (note that I write my frontmatter in yaml).&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-yaml&quot;&gt;permalink: feed.xml
excludeFromCollections: true
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;2.-create-the-template-structure-for-your-feed&quot; tabindex=&quot;-1&quot;&gt;2. Create the template structure for your feed&lt;/h3&gt;
&lt;p&gt;The aim here is to build the XML document that will serve as your RSS feed. This is very similar to generating a regular archive or category page, except we want the output to be XML rather than HTML. The differences are subtle, but there are a few things to watch out for if we want our feed to be valid. Dates, for instance, need to be formatted in a very specific way.&lt;/p&gt;
&lt;p&gt;The Eleventy ecosystem is on hand to help us out with here with the &lt;a href=&quot;https://www.11ty.dev/docs/plugins/rss/&quot;&gt;RSS Plugin&lt;/a&gt;. It doesn&#x27;t do everything for us, but does give us access to some handy RSS/XML-related functions: &lt;code&gt;getNewestCollectionItemDate&lt;/code&gt; and &lt;code&gt;dateToRfc3339&lt;/code&gt; being particularly useful when it comes to correctly formatting date-info for our feed.&lt;/p&gt;
&lt;p&gt;The docs for the Eleventy RSS Plugin also provide a sample template file, but I&#x27;d advise treading with caution here. While helpful, converting the sample template to match my exact project was trickier than I&#x27;d first anticipated. Be sure to go through the sample template line-by-line and make sure you know what each line does. This is especially true if you&#x27;ve done anything beyond the basics when it comes to &quot;collections&quot; within your content&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn2&quot; id=&quot;fnref2&quot;&gt;[2]&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;h3 id=&quot;3.-account-for-any-weirdness-in-your-posts&quot; tabindex=&quot;-1&quot;&gt;3. Account for any weirdness in your posts&lt;/h3&gt;
&lt;p&gt;I think it&#x27;s important that the articles I publish on my site are accessible by RSS. But sometimes RSS &lt;em&gt;isn&#x27;t&lt;/em&gt; the best tool for the job. I have several posts that rely on interactive elements within the page (most recently, my &lt;a href=&quot;https://tomhazledine.com/web-audio-delay&quot;&gt;Web Audio API&lt;/a&gt; article includes plenty of illustrative web-audio-dependent examples), and these simply don&#x27;t translate to a text-and-image-only medium.&lt;/p&gt;
&lt;p&gt;I&#x27;ve sidestepped this problem by adding a &lt;code&gt;not_rss_friendly&lt;/code&gt; flag to the frontmatter of these articles. When that flag is &lt;code&gt;true&lt;/code&gt;, my RSS feed adds a caveat to the top of the content block. This allows me to explain that some of the content may not work on the reader&#x27;s tool of choice, and they might want to check out the original web version. And what&#x27;s more, this has no effect whatsoever on my main site; these caveats &lt;em&gt;only&lt;/em&gt; appear in the RSS version.&lt;/p&gt;
&lt;h3 id=&quot;4.-validate-and-publish&quot; tabindex=&quot;-1&quot;&gt;4. Validate and publish&lt;/h3&gt;
&lt;p&gt;The feed is easy enough to test locally. I have my Eleventy dev server pointing at &lt;code&gt;http://localhost:1337&lt;/code&gt;, so to view my new feed I can look at &lt;code&gt;http://localhost:1337/feed.xml&lt;/code&gt; to ensure everything has built as expected.&lt;/p&gt;
&lt;p&gt;With a format as pernickety as XML, it&#x27;s worth doing some proper validation, too. To test my local version I copy/pasted &lt;code&gt;view-source:http://localhost:1337/feed.xml&lt;/code&gt; into &lt;a href=&quot;https://validator.w3.org/feed/&quot;&gt;the W3C validator&lt;/a&gt;, which caught a few minor issues for me (it also flagged issues with non-matching URLs between local and live which I was happy to ignore at this stage).&lt;/p&gt;
&lt;p&gt;For added pre-deployment comfort I turned to one of my favourite features of Netlify (the service I use to build and host my website). Their &lt;a href=&quot;https://www.netlify.com/blog/2016/07/20/introducing-deploy-previews-in-netlify/&quot;&gt;Deploy Previews&lt;/a&gt; are a fantastic tool. Every time I create a PR on my GitHub repo, Netlify spools up a matching development server with a real URL. These previews are full, working versions of my site, and because the preview URL is a proper live domain on the actual internet I can submit that &lt;em&gt;preview&lt;/em&gt; version of my feed into any feed-reader app and see a real version of what my changes will look like.&lt;/p&gt;
&lt;p&gt;And because Netlify is just the best tool ever, all I need to do to deploy my new feed is to merge my PR. Boom. Nice and easy.&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn3&quot; id=&quot;fnref3&quot;&gt;[3]&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;p&gt;With that done, my new feed is live at &lt;a href=&quot;https://tomhazledine.com/feed.xml&quot;&gt;tomhazledine.com/feed.xml&lt;/a&gt;. If you like to consume your content using RSS, you can add that feed to your reader of choice and never miss a post from this site (lucky you!).&lt;/p&gt;
&lt;h2 id=&quot;my-full-feed.md-template-file%3A&quot; tabindex=&quot;-1&quot;&gt;My full &lt;code&gt;feed.md&lt;/code&gt; template file:&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&quot;language-xml&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&amp;lt;feed xmlns=&quot;http://www.w3.org/2005/Atom&quot;&gt;
  &amp;lt;title&gt;{{ site.title }}&amp;lt;/title&gt;
  &amp;lt;subtitle&gt;{{ site.summary }}&amp;lt;/subtitle&gt;
  &amp;lt;link href=&quot;{{ site.url }}/{{ permalink }}&quot; rel=&quot;self&quot;/&gt;
  &amp;lt;link href=&quot;{{ site.url }}&quot;/&gt;
  &amp;lt;updated&gt;{{ collections.articles | getNewestCollectionItemDate | dateToRfc3339 }}&amp;lt;/updated&gt;
  &amp;lt;id&gt;{{ site.url }}/&amp;lt;/id&gt;
  &amp;lt;author&gt;
    &amp;lt;name&gt;{{ site.author }}&amp;lt;/name&gt;
    &amp;lt;email&gt;{{ site.authorEmail }}&amp;lt;/email&gt;
  &amp;lt;/author&gt;
  {%- for post in collections.articles | reverse %}
  {% set absolutePostUrl %}{{ post.url | url | absoluteUrl(site.url) }}{% endset %}
  &amp;lt;entry&gt;
    &amp;lt;title&gt;{{ post.data.title }}&amp;lt;/title&gt;
    &amp;lt;link href=&quot;{{ absolutePostUrl }}&quot;/&gt;
    &amp;lt;updated&gt;{{ post.date | dateToRfc3339 }}&amp;lt;/updated&gt;
    &amp;lt;id&gt;{{ absolutePostUrl }}&amp;lt;/id&gt;
    &amp;lt;content type=&quot;html&quot;&gt;
        {%- if post.data.not_rss_friendly %}
            {{ site.rssCaveat | markdown }}&amp;lt;p&gt;View the original here: &amp;lt;a href=&quot;{{ absolutePostUrl }}&quot;&gt;{{ absolutePostUrl }}&amp;lt;/a&gt;&amp;lt;/p&gt;
        {%- endif %}
        {{ post.templateContent | markdown | htmlToAbsoluteUrls(absolutePostUrl) }}
    &amp;lt;/content&gt;
  &amp;lt;/entry&gt;
  {%- endfor %}
&amp;lt;/feed&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;hr class=&quot;footnotes-sep&quot;/&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn1&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;Before we start, let&#x27;s have a moment&#x27;s silence for the passing of Google Reader. I know at this point it&#x27;s been over seven years since it was so cruelly taken from us, but I&#x27;m still a bit cross about it. &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn2&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;I&#x27;ve got to be honest, even when using Eleventy&#x27;s &quot;debug&quot; mode this was a hard template to put together. Becasue there are various level of content-escaping going on, I became very familiar with the &lt;em&gt;&quot;Opening and ending tag mismatch&quot;&lt;/em&gt; error message. &lt;a href=&quot;#fnref2&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn3&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;Now all that&#x27;s left to do is decide where to put the feed-link icon... 🤔 &lt;a href=&quot;#fnref3&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;</content></entry><entry><title>Building a delay effect with the Web Audio API</title><link href="https://tomhazledine.com/web-audio-delay/"/><updated>2020-12-30T00:00:00Z</updated><id>https://tomhazledine.com/web-audio-delay/</id><content type="html">&lt;p&gt;In this post I&#x27;m going to show you how to use JavaScript to recreate a delay pedal. A delay pedal is something that you&#x27;d place between a guitar and an amplifier to add a delay effect to the signal from the guitar. They&#x27;re a relatively common piece of musical kit, and I&#x27;m going to recreate one in the browser.&lt;/p&gt;&lt;h2 id=&quot;the-audio-context&quot;&gt;The audio context&lt;/h2&gt;&lt;p&gt;To get started, we will need an &lt;em&gt;audio context&lt;/em&gt;. The audio context is our gateway into the audio power of a browser.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; context = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-title class_&quot;&gt;AudioContext&lt;/span&gt;();
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Having created a new &lt;code&gt;AudioContext&lt;/code&gt; object (which in this instance we&#x27;re naming &quot;context&quot;), we can then use that context object to do all sorts of things: we can create audio sources, connect audio-creating-things to audio-listening-things, all of that good stuff.&lt;/p&gt;&lt;p&gt;And of course because we live in the real world we need to fudge things a little to make sure that it works in as many different browsers as possible:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; context = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; (&lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;AudioContext&lt;/span&gt; || &lt;span class=&quot;hljs-variable language_&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;webkitAudioContext&lt;/span&gt;)();
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Once we&#x27;ve got that &lt;code&gt;AudioContext&lt;/code&gt; set up, we can then start using it. And the way that we&#x27;re going to use it is to recreate the idea of an analogue &lt;em&gt;signal path&lt;/em&gt;, but in code.&lt;/p&gt;&lt;h2 id=&quot;the-signal-path&quot;&gt;The signal path&lt;/h2&gt;&lt;p&gt;A good example of a &quot;signal path&quot; is a how a band sets up on stage. It&#x27;s the path that sound takes from an instrument to a mixing desk and then out to some speakers (so the audience can hear it).&lt;/p&gt;&lt;div class=&quot;signal-path&quot;&gt;&lt;div class=&quot;signal-path__labels&quot;&gt;&lt;div class=&quot;signal-path__label&quot;&gt;Instrument&lt;/div&gt;&lt;div class=&quot;signal-path__label&quot;&gt;Mixer&lt;/div&gt;&lt;div class=&quot;signal-path__label&quot;&gt;Speakers&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;And in audio-context terms, &lt;strong&gt;Instrument&lt;/strong&gt; &gt; &lt;strong&gt;Mixer&lt;/strong&gt; &gt; &lt;strong&gt;Speakers&lt;/strong&gt;
translates to &lt;code&gt;oscillator&lt;/code&gt; &gt; &lt;code&gt;gainNode&lt;/code&gt; &gt; &lt;code&gt;context.destination&lt;/code&gt;&lt;/p&gt;&lt;ol&gt;&lt;li&gt;The instrument becomes an &lt;code&gt;oscillator&lt;/code&gt; (we&#x27;ll be using an oscillator to create some sounds)&lt;/li&gt;&lt;li&gt;The mixer will become a &lt;code&gt;gainNode&lt;/code&gt; (which is a way for us to control the level of that signal - the &quot;volume&quot;, if you will)&lt;/li&gt;&lt;li&gt;The speakers will become our &lt;code&gt;context.destination&lt;/code&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;Now let&#x27;s work backwards through this path in more detail...&lt;/p&gt;&lt;h3 id=&quot;3-the-destination&quot;&gt;3. The destination&lt;/h3&gt;&lt;p&gt;The &lt;code&gt;context.destination&lt;/code&gt; is available on the &lt;code&gt;context&lt;/code&gt; object that we created, and the &quot;destination&quot; will be either the speakers in your laptop or your headphones or some kind of Bluetooth connection. In short: wherever your sound goes when it leaves your computer, that&#x27;ll be your context&#x27;s &quot;destination&quot;.&lt;/p&gt;&lt;h3 id=&quot;2-gain&quot;&gt;2. Gain&lt;/h3&gt;&lt;p&gt;The &lt;code&gt;gainNode&lt;/code&gt; is a little bit more complicated. This is a way of controlling the &quot;volume&quot; of our signal. We&#x27;ll use our &lt;code&gt;context&lt;/code&gt; object to create a &quot;gain node&quot;. We&#x27;ll call the new node &quot;master&quot; (because it will act as our master volume control), and we&#x27;ll need to set a value for it.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; master = context.&lt;span class=&quot;hljs-title function_&quot;&gt;createGain&lt;/span&gt;();
master.&lt;span class=&quot;hljs-property&quot;&gt;gain&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;0.8&lt;/span&gt;;
master.&lt;span class=&quot;hljs-title function_&quot;&gt;connect&lt;/span&gt;(context.&lt;span class=&quot;hljs-property&quot;&gt;destination&lt;/span&gt;);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The sound comes in at a raw level, essentially (if it comes from an oscillator it&#x27;s just coming in at the default level), but once it gets to a gain node we can set what level we want that signal to be. The range runs from &lt;code&gt;0&lt;/code&gt; to &lt;code&gt;1&lt;/code&gt;, and in our example we&#x27;re using &lt;code&gt;0.8&lt;/code&gt; (just slightly less than full volume). Then on the last line we&#x27;re connecting the &lt;code&gt;master&lt;/code&gt; gain node to our &lt;code&gt;destination&lt;/code&gt;, which will be the the &lt;em&gt;output&lt;/em&gt; of the sound.&lt;/p&gt;&lt;p&gt;So we&#x27;ve got the sound coming in, we&#x27;re setting that volume level with a &lt;code&gt;gain&lt;/code&gt; node, and then connecting it with &lt;code&gt;.connect&lt;/code&gt; (which is a method on all audio objects that we create from our &lt;code&gt;context&lt;/code&gt;).&lt;/p&gt;&lt;h3 id=&quot;1-oscillator&quot;&gt;1. Oscillator&lt;/h3&gt;&lt;p&gt;Moving to the very start of that signal path (where the sound actually comes from!), we&#x27;re going to simulate a &quot;voltage-controlled oscillator&quot; (a.k.a. a &quot;VCO&quot;). Of course it&#x27;s &lt;em&gt;not&lt;/em&gt; voltage controlled because we&#x27;re not in the analogue world and we&#x27;re not actually plugging electricity into things and wiring things up and soldering them. But we can &lt;em&gt;simulate&lt;/em&gt; a VCO with the context&#x27;s &lt;code&gt;createOscillator()&lt;/code&gt; method.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-variable constant_&quot;&gt;VCO&lt;/span&gt; = context.&lt;span class=&quot;hljs-title function_&quot;&gt;createOscillator&lt;/span&gt;();
&lt;span class=&quot;hljs-variable constant_&quot;&gt;VCO&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;frequency&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;440.0&lt;/span&gt;;
&lt;span class=&quot;hljs-variable constant_&quot;&gt;VCO&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;connect&lt;/span&gt;(master);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;That creates an oscillator object. The object has has a frequency value which represents the &lt;em&gt;pitch&lt;/em&gt; of the note that will be created. Here we&#x27;re setting a value of &lt;code&gt;440&lt;/code&gt;, which translates to 440 hertz (Hz). That is the frequency value of &quot;Middle A&quot;, which in an orchestral setup is the note that everyone tunes to.&lt;/p&gt;&lt;p&gt;We&#x27;re then connecting that to &lt;code&gt;master&lt;/code&gt; (the gain node that we&#x27;re treating as our &quot;master volume&quot;), which then sends our signal off to the to the destination.&lt;/p&gt;&lt;p&gt;Now that we&#x27;ve created an oscillator we can test that it&#x27;s working using two simple methods: &lt;code&gt;start&lt;/code&gt; and &lt;code&gt;stop&lt;/code&gt;.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Start the oscillator&lt;/span&gt;
&lt;span class=&quot;hljs-variable constant_&quot;&gt;VCO&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;start&lt;/span&gt;();

&lt;span class=&quot;hljs-comment&quot;&gt;// Stop the oscillator&lt;/span&gt;
&lt;span class=&quot;hljs-variable constant_&quot;&gt;VCO&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stop&lt;/span&gt;();
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Putting these methods into action might look a little like this:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;let&lt;/span&gt; buttonState = &lt;span class=&quot;hljs-string&quot;&gt;&quot;off&quot;&lt;/span&gt;;

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; button = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;querySelector&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;#our-button&quot;&lt;/span&gt;);

button.&lt;span class=&quot;hljs-title function_&quot;&gt;addEventListener&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;click&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-function&quot;&gt;() =&gt;&lt;/span&gt; {
    &lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; (buttonState === &lt;span class=&quot;hljs-string&quot;&gt;&quot;off&quot;&lt;/span&gt;) {
        &lt;span class=&quot;hljs-variable constant_&quot;&gt;VCO&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;start&lt;/span&gt;();
        buttonState = &lt;span class=&quot;hljs-string&quot;&gt;&quot;on&quot;&lt;/span&gt;;
    } &lt;span class=&quot;hljs-keyword&quot;&gt;else&lt;/span&gt; {
        &lt;span class=&quot;hljs-variable constant_&quot;&gt;VCO&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stop&lt;/span&gt;();
        buttonState = &lt;span class=&quot;hljs-string&quot;&gt;&quot;off&quot;&lt;/span&gt;;
    }
});
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;You can test this out using the button below. Clicking once will call &lt;code&gt;.start()&lt;/code&gt;, and you should hear a (probably quite horrible) noise. Then clicking a second time will call &lt;code&gt;.stop()&lt;/code&gt;, which will end the sound.&lt;/p&gt;&lt;div id=&quot;delay-block-one&quot;/&gt;&lt;p&gt;If we look at the frequency graph of what&#x27;s happening, you can see when we start the pitch we get a peak at 440Hz, which is the &quot;middle A&quot; that we are hoping for.&lt;/p&gt;&lt;p&gt;This code gives us a constant tone which is not massively useful for adding a delay to. The delays will start layering up and overlapping, so we&#x27;re not going to be able to hear what&#x27;s going clearly. What will be more useful for us is to have a &lt;em&gt;pulse&lt;/em&gt;, so let&#x27;s look at how to have the button trigger a pulse of sound:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Start the oscillator now&lt;/span&gt;
&lt;span class=&quot;hljs-variable constant_&quot;&gt;VCO&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;start&lt;/span&gt;(context.&lt;span class=&quot;hljs-property&quot;&gt;currentTime&lt;/span&gt;);

&lt;span class=&quot;hljs-comment&quot;&gt;// Stop the oscillator in .25 seconds time&lt;/span&gt;
&lt;span class=&quot;hljs-variable constant_&quot;&gt;VCO&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;stop&lt;/span&gt;(context.&lt;span class=&quot;hljs-property&quot;&gt;currentTime&lt;/span&gt; + &lt;span class=&quot;hljs-number&quot;&gt;0.25&lt;/span&gt;);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Now when we hit &quot;start&quot; we&#x27;re not just a calling &lt;code&gt;.start()&lt;/code&gt; with no parameters: we&#x27;re calling it with our current time and then straight away calling the &lt;code&gt;.stop()&lt;/code&gt; function with a different time. This means our code will know to start and stop at these given times.&lt;/p&gt;&lt;p&gt;We&#x27;re getting time from &lt;code&gt;context.currentTime&lt;/code&gt;, which is a more reliable way of getting a time-value than using a &lt;code&gt;setTimeout()&lt;/code&gt; like we would normally use in JavaScript. The audio context has its own internal clock which is much more precise.&lt;/p&gt;&lt;div id=&quot;delay-block-two&quot;/&gt;&lt;h2 id=&quot;controlling-a-vco-with-a-gain-node-aka-a-vca&quot;&gt;Controlling a VCO with a gain node (a.k.a. a VCA)&lt;/h2&gt;&lt;p&gt;So now we get a pulse of sound that lasts for 0.25 seconds, but it&#x27;s still kind of sudden. What we will probably ought to do now is &quot;soften&quot; this slightly so it&#x27;s not quite such a jarring sound. It just turns on and off. What we want is to have a way of ramping up the volume gradually and then ramping that down again.&lt;/p&gt;&lt;p&gt;We want it to fade in and fade out, and we can achieve that by using &lt;em&gt;another&lt;/em&gt; gain node.&lt;/p&gt;&lt;p&gt;We&#x27;ve already used a gain node for our master volume, and now we&#x27;re using a new gain node paired just to our oscillator.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; note = {
    &lt;span class=&quot;hljs-attr&quot;&gt;vco&lt;/span&gt;: context.&lt;span class=&quot;hljs-title function_&quot;&gt;createOscillator&lt;/span&gt;(),
    &lt;span class=&quot;hljs-attr&quot;&gt;vca&lt;/span&gt;: context.&lt;span class=&quot;hljs-title function_&quot;&gt;createGain&lt;/span&gt;()
};
note.&lt;span class=&quot;hljs-property&quot;&gt;vco&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;connect&lt;/span&gt;(note.&lt;span class=&quot;hljs-property&quot;&gt;vca&lt;/span&gt;);
note.&lt;span class=&quot;hljs-property&quot;&gt;vca&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;connect&lt;/span&gt;(master);

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; button = &lt;span class=&quot;hljs-variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;querySelector&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;#our-button&quot;&lt;/span&gt;);

button.&lt;span class=&quot;hljs-title function_&quot;&gt;addEventListener&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;click&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-function&quot;&gt;() =&gt;&lt;/span&gt; {
    &lt;span class=&quot;hljs-comment&quot;&gt;// Start the oscillator gradually&lt;/span&gt;
    note.&lt;span class=&quot;hljs-property&quot;&gt;vca&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;gain&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;exponentialRampToValueAtTime&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;, context.&lt;span class=&quot;hljs-property&quot;&gt;currentTime&lt;/span&gt; + &lt;span class=&quot;hljs-number&quot;&gt;0.2&lt;/span&gt;);

    &lt;span class=&quot;hljs-comment&quot;&gt;// Stop the oscillator gradually&lt;/span&gt;
    note.&lt;span class=&quot;hljs-property&quot;&gt;vca&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;gain&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;exponentialRampToValueAtTime&lt;/span&gt;(
        &lt;span class=&quot;hljs-number&quot;&gt;0.0001&lt;/span&gt;,
        context.&lt;span class=&quot;hljs-property&quot;&gt;currentTime&lt;/span&gt; + &lt;span class=&quot;hljs-number&quot;&gt;0.5&lt;/span&gt;
    );
});
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Here we&#x27;ve made a regular JavaScript object called &lt;code&gt;note&lt;/code&gt;, and we&#x27;ve given it a VCO and a VCA.&lt;/p&gt;&lt;p&gt;Whereas a VCO is a voltage controlled &lt;em&gt;oscillator&lt;/em&gt;, a VCA is a voltage controlled &lt;em&gt;amplitude&lt;/em&gt;. That&#x27;s analogue-synthesiser-speak for a node that controls &quot;volume&quot;. Here our VCA is going to be a gain node.&lt;/p&gt;&lt;p&gt;We connect those two together, then we set the values using a function called &lt;code&gt;exponentialRampToValueAtTime()&lt;/code&gt; which, surprise surprise, exponentially ramps to a value at a
given time.&lt;/p&gt;&lt;p&gt;We want to ramp up to the volume value of &lt;code&gt;1&lt;/code&gt; (a.k.a. maximum volume) and we want that to take &lt;code&gt;0.2&lt;/code&gt; seconds. To stop the pulse, we then ramp all the way down to a value of &lt;code&gt;0&lt;/code&gt; half a second later.&lt;/p&gt;&lt;div id=&quot;delay-block-three&quot;/&gt;&lt;p&gt;Now our pulse is starting to sound a little bit more sonorous. We&#x27;ve got a gentle pulse that more closely mimics sound that we&#x27;d hear in the real world (rather than the artificial on/off of the raw oscillator).&lt;/p&gt;&lt;h2 id=&quot;randomly-selecting-a-note&quot;&gt;Randomly selecting a &quot;note&quot;&lt;/h2&gt;&lt;p&gt;Now we can spice things up a little by randomly choosing the pitch of the note that is generated.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;getRandomInt&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;min, max&lt;/span&gt;) =&gt;
    &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;floor&lt;/span&gt;(&lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;random&lt;/span&gt;() * (max - min + &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;)) + min;

note.&lt;span class=&quot;hljs-property&quot;&gt;frequency&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt; = &lt;span class=&quot;hljs-title function_&quot;&gt;getRandomInt&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;220&lt;/span&gt;, &lt;span class=&quot;hljs-number&quot;&gt;880&lt;/span&gt;);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The &lt;code&gt;getRandomInt()&lt;/code&gt; function creates a random integer between &lt;code&gt;220&lt;/code&gt; and &lt;code&gt;880&lt;/code&gt; (which is the frequency range, in hertz, that we want to hear). Now every time we press the &quot;pulse&quot; button we will hear a random pitch.&lt;/p&gt;&lt;div id=&quot;delay-block-four&quot;/&gt;&lt;p&gt;We talked about it being a bit more sonorous earlier, but because these pitches are random there is no sense of &lt;em&gt;musicality&lt;/em&gt;. To enhance this a little bit we can make use of an array of note values that each have a &lt;code&gt;name&lt;/code&gt; (so that we know what note we&#x27;re dealing with) and a &lt;code&gt;value&lt;/code&gt; (which is the
important part).&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; C_Maj = [
    { &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;C4&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;261.63&lt;/span&gt; },
    { &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;D4&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;293.66&lt;/span&gt; },
    { &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;E4&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;329.63&lt;/span&gt; },
    { &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;F4&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;349.23&lt;/span&gt; },
    { &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;G4&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;392.0&lt;/span&gt; },
    { &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;A4&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;440.0&lt;/span&gt; },
    { &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;B4&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;493.88&lt;/span&gt; },
    { &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;C5&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;523.25&lt;/span&gt; },
    { &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;D5&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;587.33&lt;/span&gt; },
    { &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;E5&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;659.26&lt;/span&gt; },
    { &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;F5&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;698.46&lt;/span&gt; },
    { &lt;span class=&quot;hljs-attr&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;G5&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-attr&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;hljs-number&quot;&gt;783.99&lt;/span&gt; }
];
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Now that we have a list of all the notes in a &lt;strong&gt;C major&lt;/strong&gt; scale, we can use that same random number generator. This time, however, we&#x27;ll use it to generate a &lt;code&gt;key&lt;/code&gt; for the array of notes.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; noteNumber = &lt;span class=&quot;hljs-title function_&quot;&gt;getRandomInt&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;, C_Maj.&lt;span class=&quot;hljs-property&quot;&gt;length&lt;/span&gt; - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;);

note.&lt;span class=&quot;hljs-property&quot;&gt;frequency&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt; = C_Maj[noteNumber].&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt;;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Now we are still randomly creating notes, but they&#x27;re all within the bounds of a C major scale (which should in theory sound a little bit nicer). It&#x27;s still a bit random but it is within the bounds of a normal scale so it sounds like of how we&#x27;d expect &lt;em&gt;music&lt;/em&gt; to sound.&lt;/p&gt;&lt;div id=&quot;delay-block-five&quot;/&gt;&lt;h2 id=&quot;doubling-up-our-note&quot;&gt;Doubling-up our note&lt;/h2&gt;&lt;p&gt;Next, let&#x27;s get even more fancy and duplicate the notes for a &quot;fuller&quot; sound. We can create a &lt;em&gt;second&lt;/em&gt; VCO and VCA for our note:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; note = {
    ...note,
    &lt;span class=&quot;hljs-attr&quot;&gt;vco2&lt;/span&gt;: context.&lt;span class=&quot;hljs-title function_&quot;&gt;createOscillator&lt;/span&gt;(),
    &lt;span class=&quot;hljs-attr&quot;&gt;vca2&lt;/span&gt;: context.&lt;span class=&quot;hljs-title function_&quot;&gt;createGain&lt;/span&gt;()
};
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;And rather than manually choosing the note value we can &quot;transpose&quot; the value of our first VCO.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;hljs-title function_&quot;&gt;transpose&lt;/span&gt; = (&lt;span class=&quot;hljs-params&quot;&gt;freq, steps&lt;/span&gt;) =&gt; freq * &lt;span class=&quot;hljs-title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;pow&lt;/span&gt;(&lt;span class=&quot;hljs-number&quot;&gt;2&lt;/span&gt;, steps / &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;);

&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; startingPitch = note.&lt;span class=&quot;hljs-property&quot;&gt;vco1&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;frequency&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt;;

note.&lt;span class=&quot;hljs-property&quot;&gt;vco2&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;frequency&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt; = &lt;span class=&quot;hljs-title function_&quot;&gt;transpose&lt;/span&gt;(startingPitch, &lt;span class=&quot;hljs-number&quot;&gt;7&lt;/span&gt;);
note.&lt;span class=&quot;hljs-property&quot;&gt;vco2&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;connect&lt;/span&gt;(note.&lt;span class=&quot;hljs-property&quot;&gt;vca2&lt;/span&gt;);
note.&lt;span class=&quot;hljs-property&quot;&gt;vca2&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;connect&lt;/span&gt;(master);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;This &lt;code&gt;transpose()&lt;/code&gt; function takes in a frequency and the number of &quot;steps&quot; in either direction that we want to go. Say you want to transpose from a C to a D; that&#x27;s two semitones (musical steps) up.&lt;/p&gt;&lt;p&gt;What the transpose function does is work that out for us. It calculates how we should mathematically transform our starting pitch, and does this by multiplying the frequency by a power law.&lt;/p&gt;&lt;p&gt;By adding a second VCO, we are doubling up the notes that we hear when we hit the &quot;pulse&quot; button. But rather than simply duplicating the sound, we&#x27;re transposing the second VCO to be seven steps above the pitch of the first VCO. Seven steps up equates to a &quot;fifth&quot; in musical terminology (there are 12 &lt;em&gt;steps&lt;/em&gt; but eight &lt;em&gt;notes&lt;/em&gt;, so seven steps up is actually five notes up the scale).&lt;/p&gt;&lt;p&gt;You can see see the double peak on the frequency graph when we trigger a pulse:&lt;/p&gt;&lt;div id=&quot;delay-block-six&quot;/&gt;&lt;h2 id=&quot;the-fx-loop&quot;&gt;The FX loop&lt;/h2&gt;&lt;p&gt;Let&#x27;s get to the business at hand of actually adding in our effects unit.&lt;/p&gt;&lt;p&gt;This will be a unit that slots into our signal path and adds an effect to the signal.&lt;/p&gt;&lt;p&gt;The &quot;normal&quot; signal path (as we&#x27;ve already established) is &quot;instrument&quot; -&gt; &quot;mixer&quot; -&gt; &quot;speaker&quot;. The FX (&quot;effects&quot;, for non-nerds) loop sits into that path between the instrument and the mixer.&lt;/p&gt;&lt;p&gt;{% include &quot;delay/signalpath-fx.njk&quot; %}&lt;/p&gt;&lt;p&gt;This little module takes a bit of the signal, does something to it, and then sends that
signal back up to the mixer along with the original signal itself.&lt;/p&gt;&lt;p&gt;Creating a delay object in JavaScript is nice and easy to do because the audio &lt;code&gt;context&lt;/code&gt; has the concept of &quot;delay&quot; built into it.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; delay = context.&lt;span class=&quot;hljs-title function_&quot;&gt;createDelay&lt;/span&gt;();
delay.&lt;span class=&quot;hljs-property&quot;&gt;delayTime&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;0.4&lt;/span&gt;;
delay.&lt;span class=&quot;hljs-title function_&quot;&gt;connect&lt;/span&gt;(master);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The &lt;code&gt;delayTime&lt;/code&gt; value determines how much time the &lt;code&gt;delay&lt;/code&gt; node will delay the signal
before sending it on again.&lt;/p&gt;&lt;p&gt;Anything that we connect to that &lt;code&gt;delay&lt;/code&gt; will then be paused for whatever value we set (&lt;code&gt;0.4&lt;/code&gt; seconds, in this example) before then being sent on to the master output.&lt;/p&gt;&lt;p&gt;If we hook our notes&#x27; VCOs to the delay node, then our pulse will be heard twice (audio nodes can have multiple connections, so here our notes are connected directly to the &lt;code&gt;master&lt;/code&gt; output &lt;em&gt;and&lt;/em&gt; indirectly via the &lt;code&gt;delay&lt;/code&gt; node).&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;note.&lt;span class=&quot;hljs-property&quot;&gt;vca1&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;connect&lt;/span&gt;(master);
note.&lt;span class=&quot;hljs-property&quot;&gt;vca2&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;connect&lt;/span&gt;(master);

note.&lt;span class=&quot;hljs-property&quot;&gt;vca1&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;connect&lt;/span&gt;(delay);
note.&lt;span class=&quot;hljs-property&quot;&gt;vca2&lt;/span&gt;.&lt;span class=&quot;hljs-title function_&quot;&gt;connect&lt;/span&gt;(delay);

delay.&lt;span class=&quot;hljs-title function_&quot;&gt;connect&lt;/span&gt;(master);
&lt;/code&gt;&lt;/pre&gt;&lt;div id=&quot;delay-block-seven&quot;/&gt;&lt;p&gt;Success! We have now created a delay. But we don&#x27;t have the full picture yet; this is only applying the delay once. When we press the &quot;pulse&quot; button, we hear the original note and a single repetition of that note forty milliseconds (&lt;code&gt;0.4&lt;/code&gt; seconds) later.&lt;/p&gt;&lt;h2 id=&quot;fx-feedback&quot;&gt;FX Feedback&lt;/h2&gt;&lt;p&gt;What we&#x27;re missing is the idea of &quot;feedback&quot;. Feedback is the mechanism by which a small part of the delayed signal is &lt;em&gt;fed back&lt;/em&gt; into the delay module.&lt;/p&gt;&lt;p&gt;{% include &quot;delay/fx-loop.njk&quot; %}&lt;/p&gt;&lt;p&gt;We could connect the delay node to itself directly (&lt;code&gt;delay.connect(delay)&lt;/code&gt;), but this would send the &lt;em&gt;entire&lt;/em&gt; signal back into the delay. This would be an infinite loop, so let&#x27;s not do that because it would sound terrible.&lt;/p&gt;&lt;p&gt;What we&#x27;re going to do is create a new gain node. We&#x27;ve used a lot of game nodes so far, so we&#x27;re pretty familiar with them at this point.&lt;/p&gt;&lt;p&gt;We eliminate the problem of infinite feedback by giving the &lt;code&gt;feedback&lt;/code&gt; node a very small value: &lt;code&gt;0.3&lt;/code&gt; (which is equivalent to saying &quot;30% of the signal&quot;). Then we put this new &lt;code&gt;feedback&lt;/code&gt; node in between the delay output and the delay input&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;const&lt;/span&gt; feedback = context.&lt;span class=&quot;hljs-title function_&quot;&gt;createGain&lt;/span&gt;();
feedback.&lt;span class=&quot;hljs-property&quot;&gt;gain&lt;/span&gt;.&lt;span class=&quot;hljs-property&quot;&gt;value&lt;/span&gt; = &lt;span class=&quot;hljs-number&quot;&gt;0.3&lt;/span&gt;;

delay.&lt;span class=&quot;hljs-title function_&quot;&gt;connect&lt;/span&gt;(feedback);
feedback.&lt;span class=&quot;hljs-title function_&quot;&gt;connect&lt;/span&gt;(delay);
delay.&lt;span class=&quot;hljs-title function_&quot;&gt;connect&lt;/span&gt;(master);
&lt;/code&gt;&lt;/pre&gt;&lt;div id=&quot;delay-block-eight&quot;/&gt;&lt;p&gt;The amount of signal that we&#x27;re passing back in controls how many times we hear the pulse repeated; that&#x27;s the audible delay. The combination of the delay &lt;em&gt;duration&lt;/em&gt; (&lt;code&gt;delay.delayTime.value&lt;/code&gt;) and the level of the &lt;em&gt;feedback&lt;/em&gt; (&lt;code&gt;feedback.gain.value&lt;/code&gt;) combine to create the full effect.&lt;/p&gt;&lt;h2 id=&quot;making-it-interactive&quot;&gt;Making it interactive&lt;/h2&gt;&lt;p&gt;There&#x27;s one final step required to fully mimic the behaviour of a &quot;real&quot; delay pedal. To finish off, I&#x27;ll plug the two crucial factors (the duration and the feedback) into some HTML range elements. This allows us to tweak those values &quot;on the fly&quot;. The higher the feedback level, the longer the repetition of the pulse will continue for. The longer the delay duration, the larger the gaps between the repetitions will be.&lt;/p&gt;&lt;p&gt;Have a play yourself, and see what crazy sounds you can make. You can even set the feedback level to &lt;code&gt;100%&lt;/code&gt;, but be warned - weird things will happen!&lt;/p&gt;&lt;div id=&quot;delay-block-nine&quot;/&gt;&lt;hr/&gt;&lt;p&gt;This post has, hopefully, shown you some of the power of the audio context as it exists in the browser. We&#x27;ve just scratched the surface; creating a tone and manipulating it in small ways is pretty simple stuff, but there is no end to the amount of creativity that can be had from playing with these tools. I hope this has inspired you to do something of your own.&lt;/p&gt;&lt;p&gt;If you&#x27;ve enjoyed this or you have questions please do get in touch on Twitter and let me know if you&#x27;ve done something crazy with the audio context. I&#x27;d love to see what you&#x27;ve come up with.&lt;/p&gt;</content></entry><entry><title>Dark mode: hard mode</title><link href="https://tomhazledine.com/dark-mode/"/><updated>2020-11-19T00:00:00Z</updated><id>https://tomhazledine.com/dark-mode/</id><content type="html">&lt;p&gt;Dark mode has been around in operating systems and web browsers for a while now, but it wasn&#x27;t something I&#x27;d ever really cared about. But that all changed when my brother implemented a dark-mode stylesheet for &lt;a href=&quot;https://edthecoder.dev/&quot;&gt;his (seldom updated but excellent) blog, edthecoder.dev&lt;/a&gt;. In a true spirit of &lt;em&gt;&quot;anything you can do, I can do better&quot;&lt;/em&gt;, the sibling rivalry kicked in and I knew I had to implement dark mode on my own site. If a &quot;mere&quot; backend dev could implement a solid dark mode, surely a &quot;frontend expert&quot; such as myself should be able to do the same (but better).&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;#the-basics&quot;&gt;The basics&lt;/a&gt;: simple dark-mode with the &lt;code&gt;prefers-color-scheme&lt;/code&gt; media query.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#all-in-one-place&quot;&gt;All in one place&lt;/a&gt;: defining dynamic themes with CSS custom properties.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#live-switching&quot;&gt;Live switching&lt;/a&gt;: toggling dark-mode without having to change a system-wide preference.&lt;/li&gt;
&lt;/ol&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;the-basics&quot; tabindex=&quot;-1&quot;&gt;The basics&lt;/h2&gt;
&lt;p&gt;At its simplest, &lt;strong&gt;&quot;dark mode&quot;&lt;/strong&gt; can be applied to your stylesheet by using the &lt;code&gt;prefers-color-scheme&lt;/code&gt; media query. This behaves in much the same way as more familiar size-related queries (for example &lt;code&gt;@media (min-width: 960px) {}&lt;/code&gt;), and will only apply the styles within it if the browser detects that the system has the &lt;code&gt;prefers-color-scheme: dark&lt;/code&gt; flag set.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;.thing {
    /* &quot;normal&quot; colour rules */
    color: black;
    background: white;

    @media (prefers-color-scheme: dark) {
        /* These colour rules will only be
        applied if the site is loaded on a
        machine with dark-mode enabled */
        color: white;
        background: black;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;all-in-one-place&quot; tabindex=&quot;-1&quot;&gt;All in one place&lt;/h2&gt;
&lt;p&gt;I&#x27;ve previously been declaring the colours in my stylesheet using &lt;code&gt;scss&lt;/code&gt; variable (for example, &lt;code&gt;$black: #4d4d4d&lt;/code&gt;). This would be fine if I was happy adding &lt;code&gt;@media&lt;/code&gt; rules to handle dark-mode throughout my stylesheet, but that comes with a few issues:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The dark-mode specific rules would be spread all over the place, introducing unnecessary complexity and creating a maintenance headache.&lt;/li&gt;
&lt;li&gt;Sass variables are not dynamic (a.k.a. they are defined once, at compilation time), and therefore wouldn&#x27;t be able to adjust on-the-fly depending on the light/dark setting of the client.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;What I need are colour variables that can change value depending on their context. What I need are &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/CSS/--*&quot;&gt;CSS Custom Properties&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&quot;css-custom-properties&quot; tabindex=&quot;-1&quot;&gt;CSS Custom Properties&lt;/h3&gt;
&lt;p&gt;Custom Properties are native CSS variables, and they are &lt;a href=&quot;https://caniuse.com/?search=custom%20properties&quot;&gt;supported in all major browsers&lt;/a&gt; (RIP in peace, IE). Unlike Sass variables, they are evaluate by the client at runtime. This means that our stylesheet can adapt to whatever mode the client is using (light or dark), and we could even change that setting dynamically with JavaScript.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;Note:&lt;/strong&gt; Unlike variables in &lt;code&gt;scss&lt;/code&gt;, custom properties need to be declared inside a wrapper. Common practice is to use the &lt;code&gt;:root&lt;/code&gt; pseudo class to ensure the custom properties are accessible in the entire cascade (&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/CSS/:root&quot;&gt;&lt;code&gt;:root&lt;/code&gt; represents the &lt;html/&gt; element and is identical to the selector html, except that its specificity is higher&lt;/a&gt;).&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;/* a static Sass variable */
$primary: red;

/* a dynamic custom property */
:root {
    --primary: red;
}

.unchanging_thing {
    /* This value is fixed when the stylesheet is compiled */
    color: $primary;
}

.changing_thing {
    /* This value will change on-the-fly if --primary is changed */
    color: var(--primary);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;For a long time now, I&#x27;ve declared all colour variables in a single &lt;code&gt;scss&lt;/code&gt; file (&lt;code&gt;_settings.colours.scss&lt;/code&gt;, in case you were wondering) which makes the job of maintaining a unified &quot;theme&quot; across a complex site a relatively simple task. Having to spread &lt;code&gt;prefers-color-scheme&lt;/code&gt; queries throughout the various parts of the stylesheet messes this up big time.&lt;/p&gt;
&lt;p&gt;Using custom properties allows us to abstract the theme-specific parts of the stylesheet away from specific elements. Crucially, it allows us to add a single &lt;code&gt;prefers-color-scheme&lt;/code&gt; query into the existing &lt;code&gt;colours.scss&lt;/code&gt; partial. Nice and tidy!&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;/* Default colours */
:root {
    --primary: red;
    --secondary: blue;
    /* etc... */

    @media (prefers-color-scheme: dark) {
        /* Dark-theme colour alternatives */
        --primary: maroon;
        --secondary: navy;
        /* etc... */
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;gotchas-when-using-custom-properties-and-sass&quot; tabindex=&quot;-1&quot;&gt;Gotchas when using custom properties &lt;em&gt;and&lt;/em&gt; Sass&lt;/h3&gt;
&lt;p&gt;Something to watch out for when using custom properties inside Sass is that things get weird when you try to use them inside functions. Sass is evaluated when the file is complied, so things like &lt;code&gt;darken($colourVar, 10%)&lt;/code&gt; are set in stone as soon as you hit save (and therefore not dynamic when the file is loaded by a browser). Using a custom property in this instance will result in an error, and the &lt;code&gt;scss&lt;/code&gt; will not compile.&lt;/p&gt;
&lt;p&gt;If you&#x27;re locked-in to (pseudo-)dynamically adjusting colour values, then &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/CSS/filter&quot;&gt;CSS&#x27; native &lt;code&gt;filter&lt;/code&gt; rule&lt;/a&gt; might be an option for you. Because &lt;code&gt;filter&lt;/code&gt; adjusts the entire element, I find it much simpler to manually set the colour value I want. So rather than using &lt;code&gt;$red: #ff0000;&lt;/code&gt; and &lt;code&gt;$red--dark: darken(red, 20%);&lt;/code&gt;, we would need to write &lt;code&gt;--red: #ff0000;&lt;/code&gt; and &lt;code&gt;--red--dark: #990000;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Another thing to watch out for is how specific you need to be when formatting colours. With Sass variables, I&#x27;ve grown accustomed to being able to declare a colour as a hex value and have it &quot;just work&quot; wherever I want to use it. I could declare a variable as &lt;code&gt;#ff0000&lt;/code&gt; and use that variable inside an &lt;code&gt;rgba()&lt;/code&gt; function to apply opacity: &lt;code&gt;rgba($red, 0.3)&lt;/code&gt;. In that instance, rather than having to convert my hex colour into the RGB equivalent (&lt;code&gt;255, 0, 0&lt;/code&gt;), Sass would do the conversion work for me.&lt;/p&gt;
&lt;p&gt;With native CSS custom properties, we don&#x27;t have this convenience.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;/* Works in Sass */
$red: #ff0000;
$red--translucent: rgba($red, 0.3);

/* Does not work in Sass (or anywhere else) */
--red: #ff0000;
--red--translucent: rgba(--red, 0.3);

/* Works everywhere */
--red: #ff0000;
--red--translucent: rgba(255, 0, 0, 0.3);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This meant that I had to do a lot of hex-to-rgb conversion when converting my stylesheet to use custom properties. Turns out I was a heavy user of both RGBA colours &lt;em&gt;and&lt;/em&gt; declared all my colours as hex values. Oops.&lt;/p&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;live-switching&quot; tabindex=&quot;-1&quot;&gt;Live switching&lt;/h2&gt;
&lt;p&gt;By doing all that we&#x27;ve done so far, we&#x27;ve successfully implemented dark mode! After a &lt;s&gt;trivial&lt;/s&gt; &lt;em&gt;long and hard&lt;/em&gt; refactor I&#x27;ve now reached feature-parity with my brother&#x27;s site. But the goal here was to &lt;em&gt;surpass&lt;/em&gt; Ed&#x27;s efforts, and the best way I can think of to achieve that is really lean in to the dynamic aspect of the custom properties I&#x27;ve taken such pains to add.&lt;/p&gt;
&lt;p&gt;What we&#x27;ve done so far is to switch colour-theme based on the &lt;code&gt;prefers-color-scheme&lt;/code&gt; value, but that&#x27;s not the only thing we can use to toggle between themes. With our custom properties in place, I could add as many &quot;themes&quot; as I want. For now I&#x27;m happy with &quot;light mode&quot; and &quot;dark mode&quot;, but to prove the concept it would be great to be able to toggle between the modes on-the-fly. Currently, unless a visitor to the site already has dark-mode enabled on their system, there&#x27;s no way for them to know that the dark version of the site even exists.&lt;/p&gt;
&lt;p&gt;Allowing users to dynamically toggle between themes has a few requirements:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;We&#x27;ll need to detach the theme-switching logic from the &lt;code&gt;prefers-color-scheme&lt;/code&gt; state (but still respect that setting if it exists).&lt;/li&gt;
&lt;li&gt;We&#x27;ll need a UI element to activate the toggling, with display states for both themes.&lt;/li&gt;
&lt;li&gt;We&#x27;ll need to persist the user&#x27;s setting between page loads (requiring them to re-set the value on every page load would be really obnoxious).&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;here-comes-the-javascript!&quot; tabindex=&quot;-1&quot;&gt;Here comes the JavaScript!&lt;/h3&gt;
&lt;p&gt;The first step is easy. We can move the dark-mode custom properties out of the &lt;code&gt;@media&lt;/code&gt; query, and use a &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Learn/HTML/Howto/Use_data_attributes&quot;&gt;data attribute&lt;/a&gt; instead:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;:root {
    --primary: #00b7c6;
    /* Normal colours... */
}

:root[data-theme=&quot;dark&quot;] {
    --primary: #ff851b;
    /* Dark-mode colours... */
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The next step is to create a JavaScript function to handle changing that data attribute. This &lt;code&gt;setDarkMode()&lt;/code&gt; function will accept a boolean parameter that decides if we&#x27;re applying &lt;em&gt;light&lt;/em&gt; or &lt;em&gt;dark&lt;/em&gt; mode. We&#x27;ll also set a &lt;code&gt;localStorage&lt;/code&gt; value so that the page remembers which mode the user has chosen.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;const setDarkMode = (active = false) =&gt; {
    const wrapper = document.querySelector(&quot;:root&quot;);
    if (active) {
        wrapper.setAttribute(&quot;data-theme&quot;, &quot;dark&quot;);
        localStorage.setItem(&quot;theme&quot;, &quot;dark&quot;);
    } else {
        wrapper.setAttribute(&quot;data-theme&quot;, &quot;light&quot;);
        localStorage.setItem(&quot;theme&quot;, &quot;light&quot;);
    }
};
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;With that function in place, we then need to run it when the page loads. This is where we need to detect the system preference (the JS equivalent of the CSS &lt;code&gt;prefers-color-scheme&lt;/code&gt; value). We can do this with &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia&quot;&gt;the browser&#x27;s &lt;code&gt;matchMedia()&lt;/code&gt; method&lt;/a&gt; - which returns the value of a given media query. So if we retrieve this value when the page loads, we can call our &lt;code&gt;setDarkMode()&lt;/code&gt; function with the correct boolean. As an added bonus, we can attach an event listener to the query which will fire whenever the system setting changes (meaning that if someone switches dark mode on or off while the page is open, the change will be applied instantly).&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;const query = window.matchMedia(&quot;(prefers-color-scheme: dark)&quot;);
setDarkMode(query.matches);
query.addListener(e =&gt; setDarkMode(e.matches));
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This is made a little more complicated when we account for the setting from &lt;code&gt;localStorage&lt;/code&gt;, which we want to be able to override the system preference (this is the &lt;em&gt;user&#x27;s&lt;/em&gt; explicit choice, after all).&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;const query = window.matchMedia(&quot;(prefers-color-scheme: dark)&quot;);
const themePreference = localStorage.getItem(&quot;theme&quot;);

let active = query.matches;
if (themePreference === &quot;dark&quot;) {
    active = true;
}
if (themePreference === &quot;light&quot;) {
    active = false;
}

setDarkMode(active);
query.addListener(e =&gt; setDarkMode(e.matches));
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;But even with this plumbing set up and ready, we&#x27;re still missing a key part of the puzzle: the ability for user&#x27;s to actually set their preference on the page itself. For that, we&#x27;ll need a &lt;code&gt;&amp;lt;button&gt;&lt;/code&gt; in our HTML and an event listener to handle to toggling of the theme.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;const toggleDarkMode = () =&gt; {
    const theme = document.querySelector(&quot;:root&quot;).getAttribute(&quot;data-theme&quot;);
    // If the current theme is &quot;light&quot;, we want to activate the dark theme
    setDarkMode(theme === &quot;light&quot;);
};

// &quot;.js__dark-mode-toggle&quot; is the unique class we&#x27;ve added to the &amp;lt;button&gt;
const toggleButton = document.querySelector(&quot;.js__dark-mode-toggle&quot;);
toggleButton.addEventListener(&quot;click&quot;, toggleDarkMode);
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;putting-it-all-together&quot; tabindex=&quot;-1&quot;&gt;Putting it all together&lt;/h3&gt;
&lt;p&gt;The final piece of the puzzle is to add some CSS sparkle to the button element (I ended up settling for a cheesy single-div sun/moon combo), and then we&#x27;ve got all the pieces we need! You can see all this code in action live on this very site; click the icon in the top right of the screen to toggle the light/dark modes. You can also see the full code (and mess about with it to your heart&#x27;s content) in the &lt;a href=&quot;https://codepen.io/tomhazledine/pen/XWjJMPL&quot;&gt;CodePen demo&lt;/a&gt; embedded below:&lt;/p&gt;
&lt;p class=&quot;codepen&quot; data-height=&quot;265&quot; data-theme-id=&quot;dark&quot; data-default-tab=&quot;css,result&quot; data-user=&quot;tomhazledine&quot; data-slug-hash=&quot;XWjJMPL&quot; style=&quot;height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;&quot; data-pen-title=&quot;Dark Mode Toggle&quot;&gt;
  &lt;span&gt;See the Pen &lt;a href=&quot;https://codepen.io/tomhazledine/pen/XWjJMPL&quot;&gt;
  Dark Mode Toggle&lt;/a&gt; by Tom Hazledine (&lt;a href=&quot;https://codepen.io/tomhazledine&quot;&gt;@tomhazledine&lt;/a&gt;)
  on &lt;a href=&quot;https://codepen.io&quot;&gt;CodePen&lt;/a&gt;.&lt;/span&gt;
&lt;/p&gt;
&lt;script async=&quot;async&quot; src=&quot;https://static.codepen.io/assets/embed/ei.js&quot;/&gt;</content></entry><entry><title>Quirks mode</title><link href="https://tomhazledine.com/podcasts-for-nerds/15-quirks-mode/"/><updated>2020-08-12T00:00:00Z</updated><id>https://tomhazledine.com/podcasts-for-nerds/15-quirks-mode/</id><content type="html">&lt;p&gt;&lt;em&gt;Announcement: from this week onwards, Podcasts for Nerds is switching to a fortnightly format. I want to stress that this is because I&#x27;m lazy, and not because I think you&#x27;re lazy. A lot of the feedback I&#x27;m getting is that you folks don&#x27;t have enough time to listen to the recommendations - and that&#x27;s fine! The whole premise of this newsletter is that you can cherrypick the shows that appeal to you. Don&#x27;t feel bad about saying to me &quot;I don&#x27;t really listen to many of them, but that one that I did listen to was awesome!&quot;: that&#x27;s literally the whole point of this newsletter.&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&quot;three-great-episodes-to-listen-to-this-week%3A&quot; tabindex=&quot;-1&quot;&gt;Three great episodes to listen to this week:&lt;/h2&gt;
&lt;dl&gt;
&lt;dt&gt;&lt;a href=&quot;https://shoptalkshow.com/425/&quot;&gt;Tailwind, Where to Find Inspiration, SVG Corrections, and Web Workers&lt;/a&gt;, &lt;em&gt;ShopTalk Show&lt;/em&gt; (55mins, 2020-08-10)&lt;/dt&gt;
&lt;dd&gt;This is probably the podcast I&#x27;ve listened to for the longest. At first it was a great way to learn more about frontend development, but over time (as is often the way with podcasts) I&#x27;ve come to feel that I know the hosts. Now it feels like I&#x27;m just hanging out with friends. This feeling intensified this week when STS co-host Chris Coyier joined me and the li&#x27;l bro on a recording of the A Question of Code podcast. Now I know for sure that Chris &lt;em&gt;is&lt;/em&gt; as fun to hang out with as he sounds. We&#x27;ve included a &quot;special&quot; episode of STS on this list before, but this week&#x27;s episode (number 425!) is a better example of what STS is really all about: frontend web chat. &lt;a href=&quot;https://shoptalkshow.com/425/&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;http://thewestwingweekly.com/episodes/101&quot;&gt;1.01: PILOT&lt;/a&gt;, &lt;em&gt;The West Wing Weekly&lt;/em&gt; (46mins, 2016-03-22)&lt;/dt&gt;
&lt;dd&gt;I considered &lt;em&gt;not&lt;/em&gt; including TWWW in this newsletter because even though I&#x27;m a generic nerd, I&#x27;m aware this show is very much a particular quirk of mine. But it ended up being one of my all time favourite podcasts, and it was really successful so there must be plenty of other weirdos like me out there. The premise? Can you even say you&#x27;ve binge-watched an old series if you didn&#x27;t consume the watchalong podcast too? The West Wing Weekly is just that: a discussion about an episode of the West Wing TV show, one a week from start to finish. I suspect you probably &lt;em&gt;do&lt;/em&gt; have to be a fan of the West Wing to properly &quot;get&quot; the show, but I think this podcast is great and just gets better as it goes along. I binged all ~200 episodes in a couple of months (along with the obligatory WW re-watch, too). &lt;a href=&quot;http://thewestwingweekly.com/episodes/101&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;https://gimletmedia.com/shows/heavyweight/brholm&quot;&gt;Gregor&lt;/a&gt;, &lt;em&gt;Heavyweight&lt;/em&gt; (47mins, 2016-09-24)&lt;/dt&gt;
&lt;dd&gt;Heavyweight is a very highly reviewed and exquisitely produced show, and I&#x27;ve only ever listened to one episode. I thought it was brilliant, and great example of non-fiction storytelling in audio - but I&#x27;m pretty sure I mostly liked it because of the premise. &lt;em&gt;&quot;20 years ago, Gregor lent some CDs to a musician friend. The CDs helped make him a famous rockstar. Now, Gregor would like some recognition. But mostly, he wants his CDs back.&quot;&lt;/em&gt; See? And it&#x27;s better than it sounds, too. I doubt the other episodes are a strong as this, so I&#x27;ve avoided them. Reply to this email if you&#x27;ve heard the other episodes and think I&#x27;m wrong; I&#x27;d hate to be missing out on an awesome show. (Hang on, doesn&#x27;t that completely reverse the point of this newsletter?! Oops.) &lt;a href=&quot;https://gimletmedia.com/shows/heavyweight/brholm&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;/dl&gt;
&lt;h2 id=&quot;not-a-podcast%2C-but...&quot; tabindex=&quot;-1&quot;&gt;Not a podcast, but...&lt;/h2&gt;
&lt;p&gt;Uh oh - CGP Grey was wrong on the internet. He released a video with (in his opinion) a massive error. His video explaining and deconstructing how the mistake happened is actually more entertaining than the original video (which was quite interesting to start with). It&#x27;s very &quot;inside baseball&quot;, but you know by now that &quot;inside baseball&quot; is my favourite genre of content by far.* &lt;a href=&quot;https://www.youtube.com/watch?v=ua4QMFQATco&quot;&gt;Watch it here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;As always, feel free to forward this email to someone you think might like it. And if you&#x27;ve been forwarded this email (by someone awesome, no doubt), you can &lt;a href=&quot;https://podcastsfornerds.com/&quot;&gt;sign up for yourself at &lt;em&gt;podcastsfornerds.com&lt;/em&gt;&lt;/a&gt; to be sent all future issues.&lt;/p&gt;
&lt;p&gt;Thanks again,
Tom.&lt;/p&gt;
&lt;p&gt;* There is no &lt;em&gt;actual&lt;/em&gt; baseball content in any of these recommendations.&lt;/p&gt;</content></entry><entry><title>Riding the modular wave</title><link href="https://tomhazledine.com/podcasts-for-nerds/14-riding-the-modular-wave/"/><updated>2020-08-05T00:00:00Z</updated><id>https://tomhazledine.com/podcasts-for-nerds/14-riding-the-modular-wave/</id><content type="html">&lt;p&gt;&lt;em&gt;I&#x27;ve noticed I have to make a conscious effort to not have every recommendation be music-related. Thanks to discovering the world of modular synthesis I&#x27;ve fallen in love with music and music making all over again, and this is reflected in the podcasts I&#x27;m listening to. Is that a bad thing? My hobbies often come and go in waves, so we&#x27;ll probably swing back to another topic in a few weeks.&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&quot;three-great-episodes-to-listen-to-this-week%3A&quot; tabindex=&quot;-1&quot;&gt;Three great episodes to listen to this week:&lt;/h2&gt;
&lt;dl&gt;
&lt;dt&gt;&lt;a href=&quot;https://podcasts.apple.com/nz/podcast/mahler-symphony-no-6-part-1/id1215386938?i=1000481753362&quot;&gt;Mahler Symphony No. 6&lt;/a&gt;, &lt;em&gt;Sticky Notes: The Classical Music Podcast&lt;/em&gt; (42mins, 2020-07-02)&lt;/dt&gt;
&lt;dd&gt;In this three-part series of &lt;em&gt;Sticky Notes&lt;/em&gt;, we hear Mahler&#x27;s 6th dissected and examined. I&#x27;m of the school of thought that believes knowing more about how a piece was made &lt;em&gt;deepens&lt;/em&gt; the enjoyment of it, and that holds doubly true for the classical greats. Structure and technique are such fundamental parts of Mahler&#x27;s music, and nowhere is that more apparent than in his 6th Symphony. &lt;a href=&quot;https://podcasts.apple.com/nz/podcast/mahler-symphony-no-6-part-1/id1215386938?i=1000481753362&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;https://www.earwolf.com/episode/face-off-live/&quot;&gt;Face Off: LIVE!&lt;/a&gt;, &lt;em&gt;How Did This Get Made?&lt;/em&gt; (94mins, YYYY-MM-DD)&lt;/dt&gt;
&lt;dd&gt;There&#x27;s a manic energy to all &lt;em&gt;HDTGM&lt;/em&gt; episodes which can be &quot;too much&quot; way too easily. But when that mania is mirrored in the subject of the episode, the format really works and the energy becomes infectious. The tagline for this show is &quot;Have you ever seen a movie so bad that it’s amazing?&quot;, and 1990&#x27;s action blockbuster Face:Off absolutely fits that bill. &lt;a href=&quot;https://www.earwolf.com/episode/face-off-live/&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;https://www.stitcher.com/podcast/national-public-radio/how-i-built-this/e/50511717&quot;&gt;WeWork: Miguel McKelvey&lt;/a&gt;, &lt;em&gt;How I Built This&lt;/em&gt; (48mins, 2018-09-02)&lt;/dt&gt;
&lt;dd&gt;With all the madness and hype surrounding WeWork&#x27;s founder (and all-round bad-egg) Adam Neumann, it&#x27;s easy to overlook that he was actually the &lt;em&gt;co&lt;/em&gt;-founder. The actual seeds of the idea, and the domain expertise to make it happen, came from architect Miguel McKelvey. Whereas Neumann is more likely to appear in an episode of &lt;em&gt;Behind the Bastards&lt;/em&gt; (we&#x27;ll cover that show here soon, I&#x27;m sure), McKelvey&#x27;s story is far more wholesome: it&#x27;s a tale of a good idea executed well at the right time. WeWork has become, well, &quot;controversial&quot; of late, but the origin story is genuinely interesting. &lt;a href=&quot;https://www.stitcher.com/podcast/national-public-radio/how-i-built-this/e/50511717&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;/dl&gt;
&lt;h2 id=&quot;not-a-podcast%2C-but...&quot; tabindex=&quot;-1&quot;&gt;Not a podcast, but...&lt;/h2&gt;
&lt;p&gt;Those of you following along with my modular-synth adventure (which has it&#x27;s seeds in the early issues of this very newsletter) would be forgiven for thinking it&#x27;s all bleeps and bloops and GAS (Gear Acquisition Syndrome). But at its core is the fact that modular makes making music &lt;em&gt;fun&lt;/em&gt; again (for me, at least). Nowhere is that better articulated in this video from &lt;em&gt;Red Means Recording&lt;/em&gt;. There are bleeps, for sure, but the driving force behind this video is the music. It&#x27;s really well put together and I&#x27;ve watched it at least twenty times already. &lt;a href=&quot;https://www.youtube.com/watch?v=Vfd-ViehdA0&amp;amp;t=1138s&quot;&gt;Watch it here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;As always, feel free to forward this email to someone you think might like it. And if you&#x27;ve been forwarded this email (by someone awesome, no doubt), you can &lt;a href=&quot;https://podcastsfornerds.com/&quot;&gt;sign up for yourself at &lt;em&gt;podcastsfornerds.com&lt;/em&gt;&lt;/a&gt; to be sent all future issues.&lt;/p&gt;
&lt;p&gt;Thanks again,
Tom.&lt;/p&gt;</content></entry><entry><title>Lots of things. No theme.</title><link href="https://tomhazledine.com/podcasts-for-nerds/13-lots-of-things-no-theme/"/><updated>2020-07-29T00:00:00Z</updated><id>https://tomhazledine.com/podcasts-for-nerds/13-lots-of-things-no-theme/</id><content type="html">&lt;p&gt;&lt;em&gt;Bit of an eclectic mix this week, but I think that&#x27;s fine. Sometimes have a unifying theme can be interesting, but more often than not it&#x27;s just an arbitrary limitation. There&#x27;s also been more big-money acquisition news in the world of podcasting this week... but hey, sometimes it&#x27;s good to focus on enjoying the content rather than obsessing over the business model. (I will definitely return to obsessing over the business model next week 😛)&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&quot;three-great-episodes-to-listen-to-this-week%3A&quot; tabindex=&quot;-1&quot;&gt;Three great episodes to listen to this week:&lt;/h2&gt;
&lt;dl&gt;
&lt;dt&gt;&lt;a href=&quot;https://podcasts.apple.com/us/podcast/got-it/id1455935823&quot;&gt;Offbeat/Psychedelic&lt;/a&gt;, &lt;em&gt;Got it&lt;/em&gt; (3mins, 2020-01-17)&lt;/dt&gt;
&lt;dd&gt;Another example of stretching the idea of what a podcast can be, this one is simply a two-person parlour game that&#x27;s been recorded. Kind of fun to listen to, but mostly useful as inspiration to try it out myself next time I get a chance. Got it? &lt;a href=&quot;https://podcasts.apple.com/us/podcast/got-it/id1455935823&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;https://www.stitcher.com/podcast/welcome-to-geektown/e/56027664&quot;&gt;Wakandan Econ&lt;/a&gt;, &lt;em&gt;Welcome to Geektown&lt;/em&gt; (28mins, 2018-08-31)&lt;/dt&gt;
&lt;dd&gt;If you&#x27;ve seen any of the recent Marvel films, you might be wondering if Wakanda (home of the Black Panther) could ever really exist. Could a super-secret but highly-developed country become the most technologically advanced nation on the planet? The podcast looks at that question from an economic perspective. This one might cross the line from &quot;nerd&quot; to &quot;geek&quot;, but the inclusion of actual economic theory from an actual economics professor means it&#x27;s something I&#x27;m comfortable including here. &lt;a href=&quot;https://www.stitcher.com/podcast/welcome-to-geektown/e/56027664&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;https://talkpython.fm/episodes/show/270/python-in-supply-chains-oil-rigs-rockets-and-lettuce&quot;&gt;Python in supply chains: oil rigs, rockets, and lettuce&lt;/a&gt;, &lt;em&gt;Talk Python&lt;/em&gt; (122mins, 2020-06-25)&lt;/dt&gt;
&lt;dd&gt;This week my brother Ed and I had the pleasure of chatting to Michael Kennedy, host of the &lt;em&gt;Talk Python&lt;/em&gt; podcast (the chat was for an episode of our own show, &lt;em&gt;A Question of Code&lt;/em&gt; - you should check it out). He&#x27;s a charming and eloquent guy, and his show is well worth a listen. It highlights fascinating real-world applications of the Python programming language, lending a dash of context to a subject that can so often be presented in a clinical and abstract manner. &lt;a href=&quot;https://talkpython.fm/episodes/show/270/python-in-supply-chains-oil-rigs-rockets-and-lettuce&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;/dl&gt;
&lt;h2 id=&quot;not-a-podcast%2C-but...&quot; tabindex=&quot;-1&quot;&gt;Not a podcast, but...&lt;/h2&gt;
&lt;p&gt;I got properly nerd-sniped this week by a video about painting restoration. Because I spend so much of my time working in front of a computer screen I&#x27;m always attracted to tales of creative and skillful &quot;real world&quot; craftsmanship - especially when they happen in a cool-looking workshop. Even if art conservation isn&#x27;t your bag, stick with it until the presenter starts building a customised work table out of extruded aluminium. Hat-tip to my Dad for pointing me in the direction of this one. &lt;a href=&quot;https://www.youtube.com/watch?v=OLxDD1xsjHw&amp;amp;feature=youtu.be&quot;&gt;Watch it here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;As always, feel free to forward this email to someone you think might like it. And if you&#x27;ve been forwarded this email (by someone awesome, no doubt), you can &lt;a href=&quot;https://podcastsfornerds.com/&quot;&gt;sign up for yourself at &lt;em&gt;podcastsfornerds.com&lt;/em&gt;&lt;/a&gt; to be sent all future issues.&lt;/p&gt;
&lt;p&gt;Thanks again,
Tom.&lt;/p&gt;</content></entry><entry><title>Late of this parish</title><link href="https://tomhazledine.com/podcasts-for-nerds/12-late-of-this-parish/"/><updated>2020-07-22T00:00:00Z</updated><id>https://tomhazledine.com/podcasts-for-nerds/12-late-of-this-parish/</id><content type="html">&lt;p&gt;&lt;em&gt;This week I&#x27;ve been thinking a lot about podcasts that are no longer with us. With the current boom in podcasting (are we at &quot;peak podcast&quot; yet? Maybe...) I keep seeing lots of faux-stats about the survival rate of most shows. Proportionally, very few make it past more that a couple of episodes, and hardly any make it past ten. The long tail is long, but not very consistent. There have been plenty of shows, however, that had really good runs and made quite an impact on me, but which have now ended (either officially killed-off or on indefinite hiatus).&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&quot;three-great-episodes-to-listen-to-this-week%3A&quot; tabindex=&quot;-1&quot;&gt;Three great episodes to listen to this week:&lt;/h2&gt;
&lt;dl&gt;
&lt;dt&gt;&lt;a href=&quot;https://www.rocketjump.com/podcasts#tothefnfuture&quot;&gt;Rob Auten (Video Game Writer)&lt;/a&gt;, &lt;em&gt;To The F&#x27;ing Future&lt;/em&gt; (122mins, 2013-04-17)&lt;/dt&gt;
&lt;dd&gt;The epitome of American &quot;Bros&quot; talking nonsense, but &lt;em&gt;To The F&#x27;ing Future&lt;/em&gt; contained some interesting discussions (if you can get past the host&#x27;s personalities). They had a short run in 2013, talking about &quot;the future&quot; of a different topic each week. Episode #5 (with Rob Auten) is an interesting look at what the state-of-the-art in video-game plot and characterisation was like way back in 2013, and what they thought the future would hold. Which is even more interesting when viewed from 2020; we can see what played out and what sank without trace. If gaming isn&#x27;t your thing, episode #6 was about tattooing (hear me out) and perhaps a little more &quot;timeless&quot;. As with lots of podcasts I love, I have &lt;em&gt;no&lt;/em&gt; interest in tattooing, but hearing an expert talk in depth about their work is exactly the kind of content I like the best. &lt;a href=&quot;https://www.rocketjump.com/podcasts#tothefnfuture&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;https://www.earwolf.com/episode/renay-richardson-broccoli-content/&quot;&gt;Renay Richardson, Broccoli Content&lt;/a&gt;, &lt;em&gt;The Wolf Den&lt;/em&gt; (50mins, 2019-01-31)&lt;/dt&gt;
&lt;dd&gt;This podcast about the business of podcasting was very &quot;inside baseball&quot; but I loved it. Seemingly in the &quot;indefinite hiatus&quot; camp, this show interviewed some key figures in the behind-the-scenes world of podcasting, and always revealed new and interesting details about an industry that I find fascinating. &lt;a href=&quot;https://www.earwolf.com/episode/renay-richardson-broccoli-content/&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;http://www.unfinished.bz/124&quot;&gt;Art Directing the Web with Dan Mall&lt;/a&gt;, &lt;em&gt;Unfinished Business&lt;/em&gt; (65mins, 2018-04-18)&lt;/dt&gt;
&lt;dd&gt;When I &quot;pivoted&quot; into my tech career back in 2013, podcasts helped me feel like I was connected to the industry. Hearing talented and enthusiastic designers and developers talk at length about their work was massively helpful, and this played right into the hands of my podcast addiction. &lt;em&gt;Unfinished Business&lt;/em&gt; was a must-listen show for me, and taught be a lot about the web in general, and designing for the web specifically. This episode with returning-guest Dan Mall is from a later brief revival of the show (and therefore &lt;em&gt;slightly&lt;/em&gt; more current), but there are some gems in the show&#x27;s back catalogue. &lt;a href=&quot;http://www.unfinished.bz/124&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;/dl&gt;
&lt;h2 id=&quot;not-a-podcast%2C-but...&quot; tabindex=&quot;-1&quot;&gt;Not a podcast, but...&lt;/h2&gt;
&lt;p&gt;Sadly in keeping with this week&#x27;s theme of shows that are no longer running, I wanted to throw a shout-out to MPJ, the creator of the Fun Fun Function YouTube channel. He announced in an emotional video this month that the show is shutting down, and I&#x27;m really bummed out about it. MPJ&#x27;s enthusiasm for programming was infectious, and I got a lot from his mission to teach fundamental skills in an entertaining way. If you like JavaScript and are thinking about getting into &quot;functional&quot; programming, then his original 2015 video series is a great place to start. &lt;a href=&quot;https://www.youtube.com/watch?v=BMUiFMZr7vk&amp;amp;list=PL0zVEGEvSaeEd9hlmCXrk5yUyqUag-n84&quot;&gt;Watch it here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;As always, feel free to forward this email to someone you think might like it. And if you&#x27;ve been forwarded this email (by someone awesome, no doubt), you can &lt;a href=&quot;https://podcastsfornerds.com/&quot;&gt;sign up for yourself at &lt;em&gt;podcastsfornerds.com&lt;/em&gt;&lt;/a&gt; to be sent all future issues.&lt;/p&gt;
&lt;p&gt;Thanks again,
Tom.&lt;/p&gt;</content></entry><entry><title>Music. Music? Music!</title><link href="https://tomhazledine.com/podcasts-for-nerds/11-music-music-music/"/><updated>2020-07-15T00:00:00Z</updated><id>https://tomhazledine.com/podcasts-for-nerds/11-music-music-music/</id><content type="html">&lt;p&gt;&lt;em&gt;I&#x27;ve got another loosely-themed issue for you. This week&#x27;s podcast recommendations are all about music. That said, I&#x27;ve often received a pretty strong &quot;that&#x27;s not music&quot; response every time I&#x27;ve tried to play tracks by The Books to friends and family. And as for bleepy-bloopy modular-synth based stuff, the disgust and repulsion was even stronger. So your milage may vary but I think all this stuff is bona-fide music, and I love it.&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&quot;three-great-episodes-to-listen-to-this-week%3A&quot; tabindex=&quot;-1&quot;&gt;Three great episodes to listen to this week:&lt;/h2&gt;
&lt;dl&gt;
&lt;dt&gt;&lt;a href=&quot;https://songexploder.net/the-books&quot;&gt;The Books: Smells Like Content&lt;/a&gt;, &lt;em&gt;Song Exploder&lt;/em&gt; (16mins, 2014-11-12)&lt;/dt&gt;
&lt;dd&gt;If forced to compile a list of the Top Ten &quot;Best&quot; Podcasts, &lt;em&gt;Song Exploder&lt;/em&gt; would certainly be on it. The show ticks all my boxes: a deep dive into a niche topic? Check. Beautifully produced? Check. An array of guests that aligns with my tastes? Check. An obsessive interest in picking apart the minutiae of a musical track, piece by piece? Check. (Okay, I&#x27;ll admit there aren&#x27;t too many shows that tick that last box). The show&#x27;s creator, Hrishikesh Hirway, has proven on other shows to be a charming and sympathetic interviewer, but in &lt;em&gt;Song Exploder&lt;/em&gt; he&#x27;s worked hard to be invisible: he lets the musician and the music tell the story. This episode in particular is a great place to start because &lt;em&gt;Smells Like Content&lt;/em&gt; is song that was written at the mixing desk: a collage of found-sounds and unusual production tricks. &lt;a href=&quot;https://songexploder.net/the-books&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;https://www.whywebleep.com/whywebleep/2017/11/19/why-we-bleep-01-tom-whitwell-music-thing-modular&quot;&gt;Tom Whitwell: Music Thing Modular&lt;/a&gt;, &lt;em&gt;Why We Bleep&lt;/em&gt; (81mins, 2018-01-21)&lt;/dt&gt;
&lt;dd&gt;This newsletter is inadvertently charting my descent into an obsession with modular synthesis (kickstarted by the Not A Podcast from &lt;a href=&quot;https://tomhazledine.com/podcasts-for-nerds/06-wet-loud-better/&quot;&gt;issue #6&lt;/a&gt;). The latest manifestation of my new interest is a willingness to hoover up any modular-related content, and having thankfully some of this comes in podcast-form. But if you don&#x27;t share my interest in synth hardware, fear not: this discussion between performer and modular-YouTuber Mylar Melodies (real name: Alex) and module-creator/builder Tom Whitwel (real job: Digital Editor of The Times) covers wider and more interesting ground than just modular synthesis. Highlights include a section on &quot;generative&quot; music and some great anecdotes about encounters with the OG musical minimalist, La Monte Young. &lt;a href=&quot;https://www.whywebleep.com/whywebleep/2017/11/19/why-we-bleep-01-tom-whitwell-music-thing-modular&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;https://podcasts.apple.com/gb/podcast/s1-ep2-maisie-peters/id1515347515?i=1000479001793&quot;&gt;Maisie Peters&lt;/a&gt;, &lt;em&gt;Ditty In A Dash&lt;/em&gt; (22mins, 2020-06-22)&lt;/dt&gt;
&lt;dd&gt;Despite considering myself to be (on some level, at least) a musician, traditional song-writing and lyric-creation has always been a blind spot of mine (as evidenced by my interest in bleepy-bloopy instrumental nonsense). This new podcast, &lt;em&gt;Ditty in a Dash&lt;/em&gt; is a wholesome look behind the curtain at that very process. Host Frances challenges her music friends to create a song in fifteen minutes (or less) with just the barest bones of starting inspiration. The results are surprisingly effective, and the whole experience is thoroughly entertaining. Be warned, however: if the sound of young people being happy drives you crazy, this might not be a podcast for you. &lt;a href=&quot;https://podcasts.apple.com/gb/podcast/s1-ep2-maisie-peters/id1515347515?i=1000479001793&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;/dl&gt;
&lt;h2 id=&quot;not-a-podcast%2C-but...&quot; tabindex=&quot;-1&quot;&gt;Not a podcast, but...&lt;/h2&gt;
&lt;p&gt;If the beeps and bloops and talented young people are all getting too much for you, you&#x27;ll probably want to hit the wine. But what if you&#x27;re not a traditional &quot;wine snob&quot;, and find the lingo confusing? As always, YouTube&#x27;s got your back. Video creator Sabrina Cruz neatly explains the problem, and recruits her editor Melissa Fernandes to help dig into the topic properly. The whole video is great, but be sure not to miss the excellent &quot;flavour maps&quot;. This week&#x27;s Not A Podcast was recommended by loyal newsletter reader Adam (do we need a label for us? &quot;Nerds&quot; feels like it&#x27;s already taken. PFNers sounds a little too contrived. Suggestions on a postcard) &lt;a href=&quot;https://www.youtube.com/watch?v=ELo8dfmfXr4&amp;amp;feature=youtu.be&quot;&gt;Watch it here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;As always, feel free to forward this email to someone you think might like it. And if you&#x27;ve been forwarded this email (by someone awesome, no doubt), you can &lt;a href=&quot;https://podcastsfornerds.com/&quot;&gt;sign up for yourself at &lt;em&gt;podcastsfornerds.com&lt;/em&gt;&lt;/a&gt; to be sent all future issues.&lt;/p&gt;
&lt;p&gt;Thanks again,
Tom.&lt;/p&gt;</content></entry><entry><title>Way more writing than you signed up for</title><link href="https://tomhazledine.com/podcasts-for-nerds/10-way-more-writing-than-you-signed-up-for/"/><updated>2020-07-08T00:00:00Z</updated><id>https://tomhazledine.com/podcasts-for-nerds/10-way-more-writing-than-you-signed-up-for/</id><content type="html">&lt;p&gt;&lt;em&gt;This week heralds yet more evidence that podcasting is becoming a serious mainstream medium. Podcasting has been bubbling under the surface for years (decades?) as a niche nerdy pursuit, but following Spotify&#x27;s $230 million acquisition of Gimlet Media (a pioneering podcast studio who are responsible for quite a few shows that have featured in this newsletter) early last year, the stakes have felt a little bit higher. Then in May Spotify dropped $100 million to bring the execrable Joe Rogan podcast into their fold (arguably making him &lt;a href=&quot;https://www.theguardian.com/media/2020/may/24/spotify-podcast-deal-the-joe-rogan-experience&quot;&gt;the highest paid broadcaster in the world&lt;/a&gt;).&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;But now it&#x27;s not just Spotify who are flashing their cash in the world of podcasting. US digital radio station SiriusXM bought the Stitcher podcasting studio this week &lt;a href=&quot;https://www.wsj.com/articles/siriusxm-to-buy-stitcher-podcasting-unit-from-scripps-11594075192&quot;&gt;for $300 million&lt;/a&gt;. I don&#x27;t think we&#x27;ve featured any Stitcher shows here before. My money was on &quot;How did this get made?&quot; being the first Stitcher show to be included here, but &quot;Blowback&quot; has beaten them to it (see below).&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;We&#x27;re in a time where there&#x27;s clearly more interest in podcasting from companies with deep pockets, and it cuts both ways. There&#x27;s more funding and a bigger market for podcasters, but also the existential threat of platform lock-in (Spotify are big proponents of shows that only appear on their platform). As we&#x27;ve touched on before, is a podcast really a podcast if it doesn&#x27;t have an RSS feed? Maybe... I&#x27;m still undecided.&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&quot;three-great-episodes-to-listen-to-this-week%3A&quot; tabindex=&quot;-1&quot;&gt;Three great episodes to listen to this week:&lt;/h2&gt;
&lt;dl&gt;
&lt;dt&gt;&lt;a href=&quot;https://99percentinvisible.org/episode/their-dark-materials/&quot;&gt;Their dark materials&lt;/a&gt;, &lt;em&gt;99 Percent Invisible&lt;/em&gt; (40mins, 2020-01-21)&lt;/dt&gt;
&lt;dd&gt;Following on from last weeks&#x27; appearance of &lt;em&gt;Articles of Interest&lt;/em&gt;, this week I&#x27;m including a &quot;proper&quot; episode of 99PI. The &quot;feud&quot; between artists Anish Kapoor and Stuart Semple is both hilarious and nerdy. Vantablack is (or was?) the world&#x27;s &quot;blackest black&quot;, but the carbon nanotube technology was exclusively licensed by Kapoor, thus prompting an inevitable backlash. Hot drama with the lowest of stakes; I love it. &lt;a href=&quot;https://99percentinvisible.org/episode/their-dark-materials/&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;https://blowback.show/&quot;&gt;Rosebud&lt;/a&gt;, &lt;em&gt;Blowback&lt;/em&gt; (58mins 2020-06-14)&lt;/dt&gt;
&lt;dd&gt;I don&#x27;t know how to classify this show. Is it a &quot;two guys casually talking nonsense to themselves&quot; deal? Yes. Is it a tightly produced and well researched history show? Also yes. Curious tone aside, this show is a detailed look at the events that lead to the 2003 invasion of Iraq. But it&#x27;s also a little bit funny? As you can tell, I&#x27;m finding it all a bit confusing. But it&#x27;s strangely compelling story telling, and I&#x27;ll keep listening to the full series. &lt;a href=&quot;https://blowback.show/&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;https://www.fullstackradio.com/episodes/142&quot;&gt;Jason Cohen - Learning to Hire and Manage a Team&lt;/a&gt;, &lt;em&gt;Full Stack Radio&lt;/em&gt; (55mins 2020-07-01)&lt;/dt&gt;
&lt;dd&gt;&lt;em&gt;FSR&lt;/em&gt; host Adam Wathan&#x27;s 2-man business is doing okay. His book &lt;em&gt;Refactoring UI&lt;/em&gt; has earned $2.2m since December 2018 (I own the book; it&#x27;s great) and their &quot;new&quot; CSS UI library &lt;em&gt;Tailwind&lt;/em&gt; has earned $1.8m since February this year. Now they&#x27;re thinking about hiring someone, and Jason Cohen (the founder of massive hosting company WP Engine) is on hand to give him some much needed advice. &lt;a href=&quot;https://www.fullstackradio.com/episodes/142&quot;&gt;Find it here&lt;/a&gt;&lt;/dd&gt;
&lt;/dl&gt;
&lt;h2 id=&quot;not-a-podcast%2C-but...&quot; tabindex=&quot;-1&quot;&gt;Not a podcast, but...&lt;/h2&gt;
&lt;p&gt;Sometimes I want a deep dive into a densely technical topic, and other times all I want to do is watch ten years&#x27; worth of footage of the Sun spinning around. Thanks to NASA, I can do that now. &lt;a href=&quot;https://www.youtube.com/watch?v=l3QQQu7QLoM&quot;&gt;Watch it here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;As always, feel free to forward this email to someone you think might like it. And if you&#x27;ve been forwarded this email (by someone awesome, no doubt), you can &lt;a href=&quot;https://podcastsfornerds.com/&quot;&gt;sign up for yourself at &lt;em&gt;podcastsfornerds.com&lt;/em&gt;&lt;/a&gt; to be sent all future issues.&lt;/p&gt;
&lt;p&gt;Thanks again,
Tom.&lt;/p&gt;</content></entry><entry><title>Dress smart, hear the echo, and ask great questions</title><link href="https://tomhazledine.com/podcasts-for-nerds/09-smart-echo-questions/"/><updated>2020-07-01T00:00:00Z</updated><id>https://tomhazledine.com/podcasts-for-nerds/09-smart-echo-questions/</id><content type="html">&lt;p&gt;&lt;em&gt;Favour time! I would love to be able to include some testimonials on the Podcasts for Nerds homepage. If you&#x27;re enjoying these emails, it&#x27;d be great if you could tweet one thing you like about them; &quot;I like this newsletter because it summarises podcasts I&#x27;m too lazy to listen to&quot; - that sort of thing. Include the hashtag #podcastsForNerds, and I&#x27;ll embed them on the PFN site.&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&quot;three-great-episodes-to-listen-to-this-week%3A&quot; tabindex=&quot;-1&quot;&gt;Three great episodes to listen to this week:&lt;/h2&gt;
&lt;dl&gt;
&lt;dt&gt;&lt;a href=&quot;https://99percentinvisible.org/episode/suits-articles-of-interest-10/&quot;&gt;Suits&lt;/a&gt;, &lt;em&gt;Articles of Interest&lt;/em&gt; (33mins, 2020-05-26)&lt;/dt&gt;
&lt;dd&gt;Podcasting heavy-weight &lt;em&gt;99 Percent Invisible&lt;/em&gt; will no doubt feature a lot in this newsletter; their deep-dives into niche topics are prime fodder for us nerds. For now, treat yourself to an episode from their clothing-focused mini-series, &lt;em&gt;Articles of Interest&lt;/em&gt;. Avery Trufelman covers the history of the suit, from Beau Brummell through to the modern day. &lt;a href=&quot;https://www.bbc.co.uk/programmes/m0002rmj&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;https://www.theworldaccordingtosound.org/2020/04/09/114-HagiaSophia.html&quot;&gt;Sound Break: Hagia Sophia&lt;/a&gt;, &lt;em&gt;The World According to Sound&lt;/em&gt; (4mins, 2020-04-09)&lt;/dt&gt;
&lt;dd&gt;This one sent shivers down my spine. In this remarkable four-minute show you get to hear some normal-sounding chanting, but then you get to hear it again as it would have sounded in the Hagia Sophia - a building with an 11 second (!) reverb. &lt;a href=&quot;https://www.theworldaccordingtosound.org/2020/04/09/114-HagiaSophia.html&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;https://www.indiehackers.com/podcast/161-sam-parr-of-the-hustle&quot;&gt;How to make millions by writing online (Sam Parr of the Hustle)&lt;/a&gt;, &lt;em&gt;Indie Hackers&lt;/em&gt; (60mins 2020-05-08)&lt;/dt&gt;
&lt;dd&gt;People who have the self confidence to drag a profitable business out of literally nothing (like, the absolute tiniest shred of an idea) tend to &lt;em&gt;not&lt;/em&gt; be the kind of people I&#x27;d want to hang out with, and I&#x27;m pretty sure Sam Parr is one of those guys. All of this interview is interesting on an academic level, but I find Parr himself quite annoying. However (and here&#x27;s the real value-proposition of this newsletter) I&#x27;ve trawled through the whole thing to be able to tell you about the great section in the middle of this podcast where Parr outlines one of his key superpowers: asking questions. The kicker is that he then demonstrates it perfectly by grilling the host, Courtland Allen. &lt;a href=&quot;https://www.indiehackers.com/podcast/161-sam-parr-of-the-hustle&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;/dl&gt;
&lt;h2 id=&quot;not-a-podcast%2C-but...&quot; tabindex=&quot;-1&quot;&gt;Not a podcast, but...&lt;/h2&gt;
&lt;p&gt;Tom Scott&#x27;s &quot;Things you might not know&quot; series has been running for years, and all of them are great (if fact, his whole channel is consistently awesome in the most nerdy way possible). His latest, &lt;em&gt;Why You Can Spot Bad Green Screen&lt;/em&gt; is particularly relevant to those of us who&#x27;ve been messing about with Zoom&#x27;s &quot;virtual backgrounds&quot; lately (as well as simply highlighting why some bad TV looks so bad). &lt;a href=&quot;https://www.youtube.com/watch?v=E5HRvQNg4pQ&quot;&gt;Watch it here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;As always, feel free to forward this email to someone you think might like it. And if you&#x27;ve been forwarded this email (by someone awesome, no doubt), you can &lt;a href=&quot;https://podcastsfornerds.com/&quot;&gt;sign up for yourself at &lt;em&gt;podcastsfornerds.com&lt;/em&gt;&lt;/a&gt; to be sent all future issues. And I&#x27;m serious about the Twitter thing; it&#x27;d really help me out.&lt;/p&gt;
&lt;p&gt;Thanks again,
Tom.&lt;/p&gt;</content></entry><entry><title>Chaos, productivity, and more chaos</title><link href="https://tomhazledine.com/podcasts-for-nerds/08-chaos-productivity-more-chaos/"/><updated>2020-06-24T00:00:00Z</updated><id>https://tomhazledine.com/podcasts-for-nerds/08-chaos-productivity-more-chaos/</id><content type="html">&lt;p&gt;&lt;em&gt;We often hear that &quot;discovery&quot; is the biggest unsolved problem in podcasting. I&#x27;m trying to address that problem with this newsletter, and the very fact that you&#x27;ve subscribed means you&#x27;re actively seeking out new podcasts to listen to. But beyond knowing what &lt;em&gt;I&lt;/em&gt; do, I don&#x27;t really know how people find out about shows. So tell me. Reply to this email and let me know the most common way you hear about new shows. I&#x27;ll share the best tactics next week (spoiler alert: tactic #1 is &quot;subscribe to Podcasts for Nerds&quot;, so be sure to tell your friends).&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&quot;three-great-episodes-to-listen-to-this-week%3A&quot; tabindex=&quot;-1&quot;&gt;Three great episodes to listen to this week:&lt;/h2&gt;
&lt;dl&gt;
&lt;dt&gt;&lt;a href=&quot;http://weare.netflix.net/&quot;&gt;Chaos Engineering at Netflix&lt;/a&gt;, &lt;em&gt;WeAreNetflix&lt;/em&gt; (51mins, 2019-02-04)&lt;/dt&gt;
&lt;dd&gt;I find the idea of &quot;chaos monkeys&quot; captivating. A chaos monkey is an automated program that will turn off pieces of a company&#x27;s key infrastructure without warning; essentially the digital equivalent of running through a data centre and unplugging random cables. In theory it&#x27;s a great way to test the durability of an online system, and the idea has been championed by the engineering team at Netflix (one of the biggest instances of online infrastructure in the world). I&#x27;m not certain who this podcast is &lt;em&gt;for&lt;/em&gt; - I suspect it&#x27;s mostly a recruiting exercise aimed at attracting engineers - but it&#x27;s very interesting nonetheless. &lt;a href=&quot;http://weare.netflix.net/&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;https://www.relay.fm/cortex/101&quot;&gt;Productivity 101&lt;/a&gt;, &lt;em&gt;Cortex&lt;/em&gt; (110mins, 2020-05-11)&lt;/dt&gt;
&lt;dd&gt;There are a handful of shows where I &lt;em&gt;never&lt;/em&gt; miss an episode, but they&#x27;re hard to recommend to people because the appeal of the show comes from having gotten to &quot;know&quot; the hosts after listening for ages (years, in some cases). &lt;em&gt;Cortex&lt;/em&gt; is one of those; beyond &quot;start at the beginning and see if you like it&quot;, it&#x27;s tough to come up with definitive episodes for people to try out. Thankfully a recent instalment has (sort-of) addressed this by handily distilling all their productivity tips into a single episode. (And if you like this one, my best advice is to go back to their first episode and follow along from there.) &lt;a href=&quot;https://www.relay.fm/cortex/101&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;https://www.npr.org/podcasts/674580962/the-big-one-your-survival-guide&quot;&gt;The Earthquake&lt;/a&gt;, &lt;em&gt;The Big One&lt;/em&gt; (30mins, 2019-01-10)&lt;/dt&gt;
&lt;dd&gt;If you got a kick out of the real-time-disaster-reporting of &lt;em&gt;Floodlines&lt;/em&gt; (recommended in &lt;a href=&quot;https://tomhazledine.com/podcasts-for-nerds/06-wet-loud-better/&quot;&gt;issue #6&lt;/a&gt;), then you&#x27;ll love &lt;em&gt;The Big One&lt;/em&gt;. Thankfully the premise of this show is speculative (for now). The city of LA sits on a massive geological fault line, and &lt;em&gt;will&lt;/em&gt; be hit by a massive and potentially devastating earthquake. But no-one can say when, so preparations are maybe not as thorough as they should be. This excellently-produced show charts what would happen when the &lt;em&gt;The Big One&lt;/em&gt; finally hits.&lt;/dd&gt;
&lt;/dl&gt;
&lt;h2 id=&quot;not-a-podcast%2C-but...&quot; tabindex=&quot;-1&quot;&gt;Not a podcast, but...&lt;/h2&gt;
&lt;p&gt;I&#x27;m guessing you&#x27;ve all seen the videos of Spot; simultaneously the cutest and the creepiest robot around. Well now Spot&#x27;s creators, Boston Dynamics (odds-on favourites for instigating the inevitable robot uprising), are selling Spots to anyone with a &lt;a href=&quot;https://www.theverge.com/21292684/boston-dynamics-spot-robot-on-sale-price&quot;&gt;spare $74,500&lt;/a&gt; lying around. The most engaging &quot;comercial&quot; application so far is seeing Spot trialed as a sheep dog in New Zealand. &lt;a href=&quot;https://www.youtube.com/watch?v=gD7K6-q-o50&quot;&gt;Watch the madness here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;As always, feel free to forward this email to someone you think might like it. And if you&#x27;ve been forwarded this email (by someone awesome, no doubt), you can &lt;a href=&quot;https://podcastsfornerds.com/&quot;&gt;sign up for yourself at &lt;em&gt;podcastsfornerds.com&lt;/em&gt;&lt;/a&gt; to be sent all future issues.&lt;/p&gt;
&lt;p&gt;Thanks again,
Tom.&lt;/p&gt;</content></entry><entry><title>Maximal, minimal, optimal</title><link href="https://tomhazledine.com/podcasts-for-nerds/07-maximal-minimal-optimal/"/><updated>2020-06-17T00:00:00Z</updated><id>https://tomhazledine.com/podcasts-for-nerds/07-maximal-minimal-optimal/</id><content type="html">&lt;p&gt;&lt;em&gt;Most of the recommendations in this newsletter have been at or around the thirty-minutes-long mark. Many of you have commented that this is &quot;just right&quot; and probably &quot;the best length of podcast to be recommending&quot;. So naturally I&#x27;m mixing it up for this issue. There&#x27;s a long rambling chat about supply chains (my personal favourite podcast format!), and a short snappy tidbit that&#x27;s been really well produced. Plus a show at the &quot;optimal&quot; length. But you tell me: reply to this email and let me know what &lt;strong&gt;your&lt;/strong&gt; favourite length is for a podcast.&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&quot;three-great-episodes-to-listen-to-this-week%3A&quot; tabindex=&quot;-1&quot;&gt;Three great episodes to listen to this week:&lt;/h2&gt;
&lt;dl&gt;
&lt;dt&gt;&lt;a href=&quot;https://www.sourceresshq.com/tea&quot;&gt;In pursuit of tea&lt;/a&gt;, &lt;em&gt;Sourceress&lt;/em&gt; (52mins, 2019-09-04)&lt;/dt&gt;
&lt;dd&gt;&lt;em&gt;Sourceress&lt;/em&gt; is a podcast about supply chains, and this episode is an interview with a New York based tea importer. It&#x27;s a long chat conducted during a tea ceremony, but stick with it because there&#x27;s some fascinating stuff in here. Learn all about how the picking process determines the type of tea, and also why you can’t sell Americans tea that tastes “shrimpy”. &lt;a href=&quot;https://www.sourceresshq.com/tea&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;https://www.npr.org/podcasts/813012842/science-diction?t=1592370974422&quot;&gt;Dinosaur&lt;/a&gt;, &lt;em&gt;Science Diction&lt;/em&gt; (12mins, 2020-03-10)&lt;/dt&gt;
&lt;dd&gt;Richard Owen won acclaim as the world&#x27;s first palaeontologist and inventor of the word &quot;dinosaur&quot;. Trouble is, Owen himself was the one doing the acclaiming. With a talent for naturalism, and an even bigger talent for self promotion, Owen was a controversial figure who picked a fight with one of the world&#x27;s most revered scientists. &lt;a href=&quot;https://www.npr.org/podcasts/813012842/science-diction?t=1592370974422&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;https://headgum.com/dead-eyes/1-hes-having-second-thoughts&quot;&gt;He&#x27;s having second thoughts&lt;/a&gt;, &lt;em&gt;Dead Eyes&lt;/em&gt; (33mins, 2020-01-23)&lt;/dt&gt;
&lt;dd&gt;What do you do when you&#x27;ve been fired by the most likeable man in the world? Actor and comedian Connor Ratliff&#x27;s career was almost over before it had begun, and twenty years later he&#x27;s digging into what happened when Tom Hanks decided he had &quot;dead eyes&quot;. This is an odd story, hilariously told. &lt;a href=&quot;https://headgum.com/dead-eyes/1-hes-having-second-thoughts&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;/dl&gt;
&lt;h2 id=&quot;not-a-podcast%2C-but...&quot; tabindex=&quot;-1&quot;&gt;Not a podcast, but...&lt;/h2&gt;
&lt;p&gt;There aren&#x27;t many of my fellow nerds that are as interested in late-nineties BMWs as I am, but most nerds I know &lt;em&gt;are&lt;/em&gt; interested in cameras and the craft of filmmaking. This film is a quick look at the concept of the &quot;chase car&quot;: a fast but practical car that has a monstrous camera rig strapped to it and is used to get all the fantastic shots of supercars travelling at speed. Even if you&#x27;re not as excited by an E39 M5 as I am, you&#x27;ve got to admit the footage is stunning. &lt;a href=&quot;https://www.youtube.com/watch?v=wXr3d2-wAOM&quot;&gt;Find it here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;As always, feel free to forward this email to someone you think might like it. And if you&#x27;ve been forwarded this email (by someone awesome, no doubt), you can &lt;a href=&quot;https://podcastsfornerds.com/&quot;&gt;sign up for yourself at &lt;em&gt;podcastsfornerds.com&lt;/em&gt;&lt;/a&gt; to be sent all future issues.&lt;/p&gt;
&lt;p&gt;Thanks again,
Tom.&lt;/p&gt;</content></entry><entry><title>Getting wet, getting loud, getting better</title><link href="https://tomhazledine.com/podcasts-for-nerds/06-wet-loud-better/"/><updated>2020-06-10T00:00:00Z</updated><id>https://tomhazledine.com/podcasts-for-nerds/06-wet-loud-better/</id><content type="html">&lt;p&gt;&lt;em&gt;At the start of the lockdown I asked my Twitter followers how their podcast listening habits had changed. The majority of responders said they were listening to fewer podcasts during the &quot;new normal&quot;. A lot of people use their commute as podcast-time! Personally I&#x27;ve replaced the ~10 hours a week travel-time with ~10 hours a week staring-at-a-blank-wall-musing-on-the-futility-of-existence time, so I&#x27;m actually listing the same volume of podcasts as before. How have your listening habits changed over the past months? Reply to this email and tell me.&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&quot;three-great-episodes-to-listen-to-this-week%3A&quot; tabindex=&quot;-1&quot;&gt;Three great episodes to listen to this week:&lt;/h2&gt;
&lt;dl&gt;
&lt;dt&gt;&lt;a href=&quot;https://www.theatlantic.com/podcasts/floodlines/&quot;&gt;Antediluvian&lt;/a&gt;, &lt;em&gt;Floodlines&lt;/em&gt; (32mins, 2020-03-12)&lt;/dt&gt;
&lt;dd&gt;Vann R. Newkirk II is quite a name! &lt;em&gt;Floodlines&lt;/em&gt; is his beautifully told examination of the &quot;unnatural disaster&quot; that occurred when the coasts of Louisiana and Mississippi were hit by a Category 5 tropical cyclone in August, 2005. This is a story about Hurricane Katrina, but it&#x27;s not all about the meteorology... &lt;a href=&quot;https://www.theatlantic.com/podcasts/floodlines/&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;https://gimletmedia.com/shows/mogul/wbhjzr/part-1-that-beat-that-beat-right-there&quot;&gt;That beat, that beat right there&lt;/a&gt;, &lt;em&gt;Mogul&lt;/em&gt; (38mins, 2017-07-16)&lt;/dt&gt;
&lt;dd&gt;The story of music-manager Chris Lighty is tied to the story of hip-hop, and &lt;em&gt;Mogul&lt;/em&gt; tells that story. Lighty was a rough-and-tumble entrepreneur, and his sorry tale makes for strangely compelling listening. The series charts his rise and inevitable fall, so I&#x27;d recommend starting at episode one to get the full arc. &lt;a href=&quot;https://gimletmedia.com/shows/mogul/wbhjzr/part-1-that-beat-that-beat-right-there&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;https://www.aboutracepodcast.com/1-things-can-only-get-better&quot;&gt;Things can only get better&lt;/a&gt;, &lt;em&gt;About Race&lt;/em&gt; (25mins, 2018-03-22)&lt;/dt&gt;
&lt;dd&gt;Well produced and well thought out, this podcast was an instant hit when it was released in 2018 and has been hovering around the top of the charts again this week. In episode #1, Host Reni Eddo-Lodge (author of &lt;em&gt;Why I’m no longer talking to white people about race&lt;/em&gt;) looks at the golden era of multiculturalism in 90&#x27;s Britain, and asks what went wrong. &lt;a href=&quot;https://www.aboutracepodcast.com/1-things-can-only-get-better&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;/dl&gt;
&lt;h2 id=&quot;not-a-podcast%2C-but...&quot; tabindex=&quot;-1&quot;&gt;Not a podcast, but...&lt;/h2&gt;
&lt;p&gt;If you like memes, you&#x27;ve probably seen Andrew Huang&#x27;s work (if not, be sure to check out his &quot;99 red balloons played with red balloons&quot; video). But as well as making viral music clips he also shares his immense music production knowledge. His studio is epic, so if you&#x27;re interested in synths and music making in general, you&#x27;ll love his &lt;em&gt;Modular synthesis explained&lt;/em&gt; video. &lt;a href=&quot;https://youtu.be/cWslSTTkiFU&quot;&gt;Find it here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Thanks for reading. If you&#x27;ve enjoyed this week&#x27;s issue of Podcasts for Nerds, feel free to forward it to a friend or two. I&#x27;m in &quot;growth hacking&quot; mode now, so I&#x27;ll be extra grateful for any bonus promotion you can give me. And if you&#x27;ve been forwarded this email (by someone awesome, no doubt), you can &lt;a href=&quot;https://podcastsfornerds.com/&quot;&gt;sign up for yourself at &lt;em&gt;podcastsfornerds.com&lt;/em&gt;&lt;/a&gt; to be sent all future issues.&lt;/p&gt;
&lt;p&gt;Thanks again,
Tom.&lt;/p&gt;</content></entry><entry><title>Podcast or not? You decide</title><link href="https://tomhazledine.com/podcasts-for-nerds/05-podcast-or-not/"/><updated>2020-06-03T00:00:00Z</updated><id>https://tomhazledine.com/podcasts-for-nerds/05-podcast-or-not/</id><content type="html">&lt;p&gt;&lt;em&gt;The boundary between podcasts and radio shows is blurry. If the BBC release one of their shows online, does it become a podcast? Objectively, yes; if it has an RSS feed of audio files then it &lt;strong&gt;is&lt;/strong&gt; a podcast. But it&#x27;s not really what I think of when I think of &quot;podcasting&quot;. The constraints of Old Media are still there, whereas the main appeal of podcasts (in my view) is the lack of constraints. They can be as long as the creators feel they need to be (ideally letting the content dictate the length), and they can go deeper into topics than any show aimed at a &quot;general&quot; audience could ever dare to go. Conversely, they can be &lt;strong&gt;less&lt;/strong&gt; focused and more rambling and more amateurish than any show on the radio. If someone somewhere finds it interesting or entertaining, then it is a valid podcast.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;With that in mind, this week includes two BBC shows that &lt;strong&gt;do&lt;/strong&gt; pass my internal &quot;podcasting duck-test&quot; (If it looks like a podcast and quacks like a podcast, it&#x27;s probably safe to call it a podcast). And to even things out, the final recommendation is a show that could &lt;strong&gt;only&lt;/strong&gt; exist as a podcast.&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&quot;three-great-podcast-episodes-i&#x27;ve-listened-to-this-week%3A&quot; tabindex=&quot;-1&quot;&gt;Three great podcast episodes I&#x27;ve listened to this week:&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://www.bbc.co.uk/programmes/m000hw0b&quot;&gt;Jon Ronson&lt;/a&gt;, &lt;em&gt;Grounded with Louis Theroux&lt;/em&gt; (58mins, 2020-05-09)
Louis Theroux can&#x27;t make documentaries because of the lockdown, so he&#x27;s been having conversations with his famous friends instead. In this episode, Louis and fellow documentarian Jon Ronson compare notes on their surprisingly similar careers. Lighthearted and entertaining, this episode&#x27;s highlight is the surprisingly nuanced discussion of &quot;de-platforming&quot; controversial figures like Alex Jones and David Icke. &lt;a href=&quot;https://www.bbc.co.uk/programmes/m000hw0b&quot;&gt;Find it here&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://www.bbc.co.uk/programmes/w3csz4dn&quot;&gt;The fourth astronaut&lt;/a&gt;, &lt;em&gt;13 minutes to the moon&lt;/em&gt; (48mins, 2019-06-12)
The second season of 13MTTM has just finished. It told the story of Apollo 13, and is a highly-recommended listen. If you&#x27;ve not heard about this podcast before, however, you&#x27;ll be best-off starting with series 1, which is all about Apollo 11&#x27;s final 13-minute descent to the surface of the moon. The show focusses on the team behind the missions, and includes remarkable insights into the specifics of every tiny moment in the flight recordings of that historic descent. For nerds like me, this episode about the onboard computer is particularly interesting. 13MTTM has just about the highest production value of any podcast I&#x27;ve heard, no doubt mostly owing to the original score by Hans Zimmer. &lt;a href=&quot;https://www.bbc.co.uk/programmes/w3csz4dn&quot;&gt;Find it here&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://oxide.computer/podcast/on-the-metal-6-kenneth-finnegan/&quot;&gt;Kenneth Finnegan&lt;/a&gt;, &lt;em&gt;On the metal&lt;/em&gt; (65mins, 2020-01-06)
As the show&#x27;s name suggests, this podcast goes deep into the weeds of CoLo servers, ISPs, and computer networking. Kenneth&#x27;s tale has elements of Forrest Gump in the sheer good luck and fortuitousness of his decisions (but with none of FG&#x27;s sadness). Regardless of how much you know about the tech in question, hearing how all the pieces fell together makes for a great story. &lt;a href=&quot;https://oxide.computer/podcast/on-the-metal-6-kenneth-finnegan/&quot;&gt;Find it here&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;not-a-podcast%2C-but...&quot; tabindex=&quot;-1&quot;&gt;Not a podcast, but...&lt;/h2&gt;
&lt;p&gt;It feels a bit odd to continue writing about tech and podcasts when the world is on fire. I think it&#x27;s important to show our support for those in peril in the US, but also to not talk over the voices of people who actually know what they&#x27;re talking about. &lt;a href=&quot;https://blacklivesmatters.carrd.co&quot;&gt;Donate if you can #BLM&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Stay safe out there (or &lt;em&gt;in&lt;/em&gt; there, if you&#x27;re still locked down).
Tom.&lt;/p&gt;</content></entry><entry><title>Cracking, hacking, and phishing</title><link href="https://tomhazledine.com/podcasts-for-nerds/04-cracking-hacking-phishing/"/><updated>2020-05-27T00:00:00Z</updated><id>https://tomhazledine.com/podcasts-for-nerds/04-cracking-hacking-phishing/</id><content type="html">&lt;p&gt;&lt;em&gt;&quot;Hacker&quot; is a word with several meanings. In the vernacular, it&#x27;s taken to mean a tech-savvy bad-actor; &quot;a hacker broke into the bank&#x27;s database&quot;, &quot;the NSA mainframe was hacked&quot;, etc. But in the start-up sphere, it just means someone who is creative with technology; &quot;she hacked together her MVP in the garage&quot;, &quot;did you see that fantastic hack she made to fix that bug?&quot;. This week&#x27;s issue of &lt;a href=&quot;https://www.podcastsfornerds.com/&quot;&gt;Podcasts for Nerds&lt;/a&gt; contains both types.&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&quot;3-great-podcast-episodes-i&#x27;ve-listened-to-this-week%3A&quot; tabindex=&quot;-1&quot;&gt;3 great podcast episodes I&#x27;ve listened to this week:&lt;/h2&gt;
&lt;dl&gt;
&lt;dt&gt;&lt;a href=&quot;http://shoptalkshow.com/episodes/special-one-one-hacker/&quot;&gt;One on One with a Hacker&lt;/a&gt;, &lt;em&gt;Shoptalk Show&lt;/em&gt; (56mins, 2014-03-24)&lt;/dt&gt;
&lt;dd&gt;After having had his website &quot;hacked&quot;, Shoptalk host Chris Coyier was able to actually interview the person who hacked the site. Seriously, folks; be on your guard for Behavioural Engineering. &lt;a href=&quot;http://shoptalkshow.com/episodes/special-one-one-hacker/&quot;&gt;Find it here.&lt;/a&gt;&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;http://creativecodingpodcast.com/hacking-classic-nintendo-guns-and-going-viral/&quot;&gt;Hacking classic Nintendo guns and going viral&lt;/a&gt;, &lt;em&gt;The Creative Coding Podcast&lt;/em&gt; (46mins, 2016-09-07)&lt;/dt&gt;
&lt;dd&gt;Seb Lee-Delisle is a digital marker/artist/inventor who&#x27;s laser events are the stuff of legend. In this episode of Creative Coding (RIP), he does a deep-dive on how he reverse-engineered a Nintendo light-gun for his own creative ends. &lt;a href=&quot;http://creativecodingpodcast.com/hacking-classic-nintendo-guns-and-going-viral/&quot;&gt;Find it here&lt;/a&gt;&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;https://gimletmedia.com/shows/reply-all/rnhoww/97-what-kind-of-idiot-gets-phished&quot;&gt;What kind of idiot gets phished?&lt;/a&gt; &lt;em&gt;Reply All&lt;/em&gt; (30mins, 2017-05-18)&lt;/dt&gt;
&lt;dd&gt;In a break from the show&#x27;s usual format, one of Reply All&#x27;s producers takes over and attempts to &quot;phish&quot; her colleagues (and bosses!). A eye-opening look at how subtle some attackers can be; even if you&#x27;re already on the look out! &lt;a href=&quot;https://gimletmedia.com/shows/reply-all/rnhoww/97-what-kind-of-idiot-gets-phished&quot;&gt;Find it here&lt;/a&gt;&lt;/dd&gt;
&lt;/dl&gt;
&lt;h2 id=&quot;not-a-podcast%2C-but...&quot; tabindex=&quot;-1&quot;&gt;Not a podcast, but...&lt;/h2&gt;
&lt;p&gt;Jay Forman&#x27;s eccentric look at the history of London&#x27;s boroughs is full of great pub-quiz level trivia and also manages to be hilarious (if you like that sort of thing). The two-part series starts with the 11min YouTube video &quot;Why does London have 32 boroughs?&quot;, and I recommend you watch them both. &lt;a href=&quot;https://www.youtube.com/watch?v=daeB46Z4fjs&quot;&gt;Find them here&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Thanks again for reading. I&#x27;m investigating different ways to manage this list, which is why this issue looks a little more &quot;fancy&quot; than last week&#x27;s. What do you think? Do you like the new look, or did you prefer the plain-text version?&lt;/p&gt;
&lt;p&gt;Cheers,
Tom.&lt;/p&gt;</content></entry><entry><title>Soundscapes, a grounding, and a year in isolation</title><link href="https://tomhazledine.com/podcasts-for-nerds/03-soundscapes-grounding-isolation/"/><updated>2020-05-20T00:00:00Z</updated><id>https://tomhazledine.com/podcasts-for-nerds/03-soundscapes-grounding-isolation/</id><content type="html">&lt;p&gt;&lt;em&gt;Thanks for all the great feedback on the format of this newsletter! Keep it coming; it&#x27;s really helpful. I promised myself I&#x27;d only make a website for this site if we could reach certain number of readers in the first two weeks. Thanks to you we&#x27;ve passed that mark, so now this list has a name (&quot;Podcasts for Nerds&quot;) and a (placeholder) website: &lt;a href=&quot;https://www.podcastsfornerds.com/&quot;&gt;podcastsfornerds.com&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&quot;3-great-podcast-episodes-i&#x27;ve-listened-to-this-week%3A&quot; tabindex=&quot;-1&quot;&gt;3 great podcast episodes I&#x27;ve listened to this week:&lt;/h2&gt;
&lt;dl&gt;
&lt;dt&gt;&lt;a href=&quot;https://www.20k.org/episodes/pewpew&quot;&gt;Pew Pew&lt;/a&gt;, &lt;em&gt;Twenty Thousand Hertz&lt;/em&gt; (38mins, 2020-05-13)&lt;/dt&gt;
&lt;dd&gt;This sound-design podcast is full of gems, and we&#x27;ll no doubt be returning to it in future editions of Podcasts for Nerds. The most recent episode looks at the work of legnedary sound designer Ben Burtt, who created the soundscapes for Star Wars. A real highlight is when the 20kHtz team deconstruct and recreate some sounds that will be familiar to all of us. Who knew that elphant growls were so terrifying?! &lt;a href=&quot;https://www.20k.org/episodes/pewpew&quot;&gt;Find it here&lt;/a&gt;&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;http://timharford.com/2019/11/cautionary-tales-ep-1-danger-rocks-ahead/&quot;&gt;Danger: rocks ahead!&lt;/a&gt;, &lt;em&gt;Cautionary Tales&lt;/em&gt; (36mins, 2019-11-15)&lt;/dt&gt;
&lt;dd&gt;Plan Continuation Bias (also known by pilots as &quot;get-there-itis&quot;) can have catastrophic effects. Economist Tim Harford takes a look at what we can learn from disasters, starting with the sorry tale of the Torrey Canyon. &lt;a href=&quot;http://timharford.com/2019/11/cautionary-tales-ep-1-danger-rocks-ahead/&quot;&gt;Find it here&lt;/a&gt;&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;https://gimletmedia.com/shows/the-habitat/awhjjr/episode-1-this-is-the-way-up&quot;&gt;This is the way up&lt;/a&gt;, &lt;em&gt;The Habitat&lt;/em&gt; (25mins, 2018-04-18)&lt;/dt&gt;
&lt;dd&gt;There&#x27;s a lot of stuff that needs to be thoroughly tested before we can go to Mars, but the biggest unknown is not what equipment we&#x27;ll take or what propulsion system we&#x27;ll use. The most important thing to test is, well, us! The Habitat documentsone of NASA&#x27;s year-long HI-SEAS experiments to see how a team of humans cope with being isolated for a full year. For science! &lt;a href=&quot;https://gimletmedia.com/shows/the-habitat/awhjjr/episode-1-this-is-the-way-up&quot;&gt;Find it here&lt;/a&gt;&lt;/dd&gt;
&lt;/dl&gt;
&lt;h2 id=&quot;not-a-podcast%2C-but...&quot; tabindex=&quot;-1&quot;&gt;Not a podcast, but...&lt;/h2&gt;
&lt;p&gt;If &lt;em&gt;useful&lt;/em&gt; maths is something that appeals, then 3Blue1Brown is a YouTube channel for you. With the help of some elegant animation, the recent &quot;Simulating an epidemic&quot; video digs into the theories behind different lockdown strategies. Eye-opening and informative, but still remains fact-based and theoretical. &lt;a href=&quot;https://www.youtube.com/watch?v=gxAaO2rsdIs&quot;&gt;Find it here&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Thanks again for being on this list. Some of you are already recommending episodes to me (thanks, Mike!), and that is strongly encouraged! What episode do &lt;em&gt;you&lt;/em&gt; think should appear in a future edition of Podcasts for Nerds?
Cheers,
Tom.&lt;/p&gt;</content></entry><entry><title>Podcasts for Nerds</title><link href="https://tomhazledine.com/podcasts-for-nerds/"/><updated>2020-05-14T00:00:00Z</updated><id>https://tomhazledine.com/podcasts-for-nerds/</id><content type="html">&lt;script src=&quot;https://f.convertkit.com/ckjs/ck.5.js&quot;/&gt;&lt;div id=&quot;newsletter-signup&quot; class=&quot;intro-note stack--small&quot;&gt;&lt;h3&gt;Signup to my newsletter&lt;/h3&gt;&lt;p&gt;Join the dozens (dozens!) of people who get my writing delivered directly to their inbox. You&#x27;ll also hear news about my miscellaneous other projects, some of which never get mentioned on this site.&lt;/p&gt;&lt;form action=&quot;https://app.convertkit.com/forms/3039830/subscriptions&quot; class=&quot;seva-form formkit-form&quot; method=&quot;post&quot; data-sv-form=&quot;3039830&quot; data-uid=&quot;b7d64123d3&quot; data-format=&quot;inline&quot; data-version=&quot;5&quot; data-options=&quot;{&amp;quot;settings&amp;quot;:{&amp;quot;after_subscribe&amp;quot;:{&amp;quot;action&amp;quot;:&amp;quot;redirect&amp;quot;,&amp;quot;success_message&amp;quot;:&amp;quot;Success! Now check your email to confirm your subscription.&amp;quot;,&amp;quot;redirect_url&amp;quot;:&amp;quot;https://tomhazledine.com/newsletter/pending&amp;quot;},&amp;quot;analytics&amp;quot;:{&amp;quot;google&amp;quot;:null,&amp;quot;facebook&amp;quot;:null,&amp;quot;segment&amp;quot;:null,&amp;quot;pinterest&amp;quot;:null,&amp;quot;sparkloop&amp;quot;:null,&amp;quot;googletagmanager&amp;quot;:null},&amp;quot;modal&amp;quot;:{&amp;quot;trigger&amp;quot;:&amp;quot;timer&amp;quot;,&amp;quot;scroll_percentage&amp;quot;:null,&amp;quot;timer&amp;quot;:5,&amp;quot;devices&amp;quot;:&amp;quot;all&amp;quot;,&amp;quot;show_once_every&amp;quot;:15},&amp;quot;powered_by&amp;quot;:{&amp;quot;show&amp;quot;:true,&amp;quot;url&amp;quot;:&amp;quot;https://convertkit.com/features/forms?utm_campaign=poweredby&amp;amp;utm_content=form&amp;amp;utm_medium=referral&amp;amp;utm_source=dynamic&amp;quot;},&amp;quot;recaptcha&amp;quot;:{&amp;quot;enabled&amp;quot;:false},&amp;quot;return_visitor&amp;quot;:{&amp;quot;action&amp;quot;:&amp;quot;show&amp;quot;,&amp;quot;custom_content&amp;quot;:&amp;quot;&amp;quot;},&amp;quot;slide_in&amp;quot;:{&amp;quot;display_in&amp;quot;:&amp;quot;bottom_right&amp;quot;,&amp;quot;trigger&amp;quot;:&amp;quot;timer&amp;quot;,&amp;quot;scroll_percentage&amp;quot;:null,&amp;quot;timer&amp;quot;:5,&amp;quot;devices&amp;quot;:&amp;quot;all&amp;quot;,&amp;quot;show_once_every&amp;quot;:15},&amp;quot;sticky_bar&amp;quot;:{&amp;quot;display_in&amp;quot;:&amp;quot;top&amp;quot;,&amp;quot;trigger&amp;quot;:&amp;quot;timer&amp;quot;,&amp;quot;scroll_percentage&amp;quot;:null,&amp;quot;timer&amp;quot;:5,&amp;quot;devices&amp;quot;:&amp;quot;all&amp;quot;,&amp;quot;show_once_every&amp;quot;:15}},&amp;quot;version&amp;quot;:&amp;quot;5&amp;quot;}&quot; min-width=&quot;400 500 600 700 800&quot;&gt;&lt;div data-style=&quot;clean&quot;&gt;&lt;ul class=&quot;formkit-alert formkit-alert-error&quot; data-element=&quot;errors&quot; data-group=&quot;alert&quot;/&gt;&lt;div data-element=&quot;fields&quot; data-stacked=&quot;false&quot; class=&quot;intro-note__form seva-fields formkit-fields&quot;&gt;&lt;div class=&quot;intro-note__form-field formkit-field&quot;&gt;&lt;input class=&quot;formkit-input&quot; aria-label=&quot;What should I call you?&quot; name=&quot;fields[first_name]&quot; placeholder=&quot;What should I call you?&quot; type=&quot;text&quot;/&gt;&lt;/div&gt;&lt;div class=&quot;intro-note__form-field formkit-field&quot;&gt;&lt;input class=&quot;formkit-input&quot; name=&quot;email_address&quot; aria-label=&quot;What&#x27;s your email address?&quot; placeholder=&quot;What&#x27;s your email address?&quot; type=&quot;email&quot;/&gt;&lt;/div&gt;&lt;button data-element=&quot;submit&quot; class=&quot;button formkit-submit&quot;&gt;&lt;div class=&quot;formkit-spinner&quot;&gt;&lt;div/&gt;&lt;div/&gt;&lt;div/&gt;&lt;/div&gt;&lt;span class=&quot;&quot;&gt;Subscribe&lt;/span&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/form&gt;&lt;/div&gt;&lt;h3 id=&quot;what-is-podcast-for-nerds&quot;&gt;What is Podcast for Nerds?&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;💌One email with three recommended podcast episodes, sent every Wednesday.&lt;/li&gt;&lt;li&gt;🎙️Each recommendation has a short summary explaining why you might like it.&lt;/li&gt;&lt;li&gt;👀Read &lt;strong&gt;issue #12&lt;/strong&gt; right now: &lt;a href=&quot;https://tomhazledine.com/podcasts-for-nerds/11-late-of-this-parish/&quot;&gt;&lt;em&gt;Late of this parish&lt;/em&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;📮&lt;a href=&quot;#newsletter-signup&quot;&gt;Subscribe&lt;/a&gt; to read &lt;strong&gt;issue #15&lt;/strong&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote&gt;&lt;p&gt;Issues are archived online after a few weeks, but the only way to get them &quot;fresh&quot; is to sign up to the newsletter. If you subscribe you&#x27;ll get to read the most recent issue straight away, and all future issues will wing their way directly to your inbox.&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 id=&quot;why-am-i-writing-this-newsletter&quot;&gt;Why am I writing this newsletter?&lt;/h3&gt;&lt;p&gt;I&#x27;m probably overly obsessed by podcasts. I&#x27;m currently subscribed to way more shows than anyone else I know, with even more individual episodes queued-up for review. Every (sensible) person I know listens to a few, but I definitely listen to too many.&lt;/p&gt;&lt;p&gt;So now I&#x27;m trying to turn that bug into a feature.&lt;/p&gt;&lt;p&gt;I can save you time by summarising the best episodes I&#x27;ve listened to lately. There&#x27;s loads of fantastic stuff out there, but you have to listen to a lot of average episodes to be sure of hearing the good bits. Let me do that digging for you.&lt;/p&gt;&lt;h2 id=&quot;recent-issues&quot;&gt;Recent issues:&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;#15.&lt;/strong&gt; &lt;em&gt;Quirks mode&lt;/em&gt; (&lt;a href=&quot;#newsletter-signup&quot;&gt;sign up now to read this&lt;/a&gt;)&lt;/li&gt;&lt;li&gt;&lt;strong&gt;#14.&lt;/strong&gt; &lt;em&gt;Riding the modular wave&lt;/em&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;#13.&lt;/strong&gt; &lt;em&gt;Lots of things. No theme.&lt;/em&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;#12.&lt;/strong&gt; &lt;a href=&quot;https://tomhazledine.com/podcasts-for-nerds/12-late-of-this-parish/&quot;&gt;&lt;em&gt;Late of this parish&lt;/em&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;#11.&lt;/strong&gt; &lt;a href=&quot;https://tomhazledine.com/podcasts-for-nerds/11-music-music-music/&quot;&gt;&lt;em&gt;Music. Music? Music!&lt;/em&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;#10.&lt;/strong&gt; &lt;a href=&quot;https://tomhazledine.com/podcasts-for-nerds/10-way-more-writing-than-you-signed-up-for/&quot;&gt;&lt;em&gt;Way more writing than you signed up for&lt;/em&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;#9.&lt;/strong&gt; &lt;a href=&quot;https://tomhazledine.com/podcasts-for-nerds/09-smart-echo-questions/&quot;&gt;&lt;em&gt;Dress smart, hear the echo, and ask great questions&lt;/em&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;#8.&lt;/strong&gt; &lt;a href=&quot;https://tomhazledine.com/podcasts-for-nerds/08-chaos-productivity-more-chaos/&quot;&gt;&lt;em&gt;Chaos, productivity, and more chaos&lt;/em&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;#7.&lt;/strong&gt; &lt;a href=&quot;https://tomhazledine.com/podcasts-for-nerds/07-maximal-minimal-optimal/&quot;&gt;&lt;em&gt;Maximal, minimal, optimal&lt;/em&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;#6.&lt;/strong&gt; &lt;a href=&quot;https://tomhazledine.com/podcasts-for-nerds/06-wet-loud-better/&quot;&gt;&lt;em&gt;Getting wet, getting loud, getting better&lt;/em&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;#5.&lt;/strong&gt; &lt;a href=&quot;https://tomhazledine.com/podcasts-for-nerds/05-podcast-or-not/&quot;&gt;&lt;em&gt;Podcast or not? You decide&lt;/em&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;#4.&lt;/strong&gt; &lt;a href=&quot;https://tomhazledine.com/podcasts-for-nerds/04-cracking-hacking-phishing/&quot;&gt;&lt;em&gt;Cracking, hacking, and phishing&lt;/em&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;#3.&lt;/strong&gt; &lt;a href=&quot;https://tomhazledine.com/podcasts-for-nerds/03-soundscapes-grounding-isolation/&quot;&gt;&lt;em&gt;Soundscapes, a grounding, and a year in isolation&lt;/em&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;#2.&lt;/strong&gt; &lt;a href=&quot;https://tomhazledine.com/podcasts-for-nerds/02-tannoys-pitches-traction/&quot;&gt;&lt;em&gt;Tannoys, tragic pitches, and business traction&lt;/em&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;#1.&lt;/strong&gt; &lt;a href=&quot;https://tomhazledine.com/podcasts-for-nerds/01-prescience-beginnings-linguistics/&quot;&gt;&lt;em&gt;Prescience, new beginnings, and modern linguistics&lt;/em&gt;&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;a href=&quot;#newsletter-signup&quot;&gt;Sign up&lt;/a&gt; to read the latest issue (and get a new one straight into you inbox every Wednesday).&lt;/p&gt;</content></entry><entry><title>Tannoys, Tragic Pitches, and Business Traction</title><link href="https://tomhazledine.com/podcasts-for-nerds/02-tannoys-pitches-traction/"/><updated>2020-05-13T00:00:00Z</updated><id>https://tomhazledine.com/podcasts-for-nerds/02-tannoys-pitches-traction/</id><content type="html">&lt;dl&gt;
&lt;dt&gt;&lt;a href=&quot;https://overcast.fm/+ZsHO6amM8&quot;&gt;The Final Destination&lt;/a&gt;, &lt;em&gt;Tales from the Tannoy&lt;/em&gt; (32mins, 2020-04-21)&lt;/dt&gt;
&lt;dd&gt;We probably hear the work of voice-over artists every day, but don&#x27;t even notice them. &lt;em&gt;Tales from the Tannoy&lt;/em&gt; is presented by Elinor Hamilton, the voice of the London Underground. The show interviews people whose voices we probably know but whose lives we know nothing about. This episode features Jon Briggs, the original voice of Apple&#x27;s Siri and the voice inside many sat navs. He&#x27;s charming and (obviously) has a fantastic voice, and his story takes a rather unexpected turn. &lt;a href=&quot;https://overcast.fm/+ZsHO6amM8&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;https://gimletmedia.com/shows/startup/6nh3zg/gimlet-1-how-not-to-pitch-a-billionaire&quot;&gt;How not to pitch a billionaire&lt;/a&gt;, &lt;em&gt;Startup&lt;/em&gt; (25mins, 2014-04-05)&lt;/dt&gt;
&lt;dd&gt;Host Alex Blumberg had a vision for what a podcast company could be, and documented his journey to get there. The first episode, above all others, is podcasting at its best. The part where Alex messes up a pitch to infamous VC Chris Sacca is a must-listen. Even if you&#x27;re not into tech or business stories, this is an episode I think you should listen to: IMO this marked the point at which podcasting started to really take itself seriously. &lt;a href=&quot;https://gimletmedia.com/shows/startup/6nh3zg/gimlet-1-how-not-to-pitch-a-billionaire&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;https://overcast.fm/+Lr-kJYCUA&quot;&gt;A publishing platform built for independent writers&lt;/a&gt;, &lt;em&gt;The Business of Content&lt;/em&gt; (43mins, 2020-04-13)&lt;/dt&gt;
&lt;dd&gt;I&#x27;ve heard John O&#x27;Nolan tell the story of how he founded his publishing platform before. How he started Ghost is an object lesson in how to capitalise on a flash of viral popularity (step 1: be an expert in a field and come up with an idea for something everybody wants). In addition to the fantastic origin story, this interview addresses the problems many news organisations are having (still!) getting readers to pay for content online. &lt;a href=&quot;https://overcast.fm/+Lr-kJYCUA&quot;&gt;Find it here&lt;/a&gt;.&lt;/dd&gt;
&lt;/dl&gt;
&lt;h2 id=&quot;not-a-podcast%2C-but...&quot; tabindex=&quot;-1&quot;&gt;Not a podcast, but...&lt;/h2&gt;
&lt;p&gt;I didn&#x27;t even know people out there were adding salt to their coffee, but apparently it is &quot;a thing&quot;. James Hoffmann has done some testing in his video on The Magic of Salt in Coffee. Things get really entertaining when the Nescafé makes an appearance... James&#x27; YouTube channel is full of coffee-related nerdery, and is definitely worth exploring. &lt;a href=&quot;https://www.youtube.com/watch?v=9PUWQQ-joKE&quot;&gt;Find it here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Happy listening!&lt;/p&gt;
&lt;p&gt;Tom.&lt;/p&gt;</content></entry><entry><title>Spiraling out of control? Open up the Bullet Journal again</title><link href="https://tomhazledine.com/bullet-journal-redux/"/><updated>2020-05-06T00:00:00Z</updated><id>https://tomhazledine.com/bullet-journal-redux/</id><content type="html">&lt;p&gt;Believe it or not, I&#x27;ve thought of something new to say about Bullet Journalling. I won&#x27;t dive into the mechanics of &lt;em&gt;what&lt;/em&gt; and &lt;em&gt;how&lt;/em&gt;, because I&#x27;ve written about &lt;a href=&quot;https://tomhazledine.com/bullet-journal-revisited&quot;&gt;Bullet Journalling before&lt;/a&gt; (&lt;a href=&quot;https://tomhazledine.com/bullet-journal-workflow&quot;&gt;several times&lt;/a&gt;, in fact). If you&#x27;re unfamiliar with the concept of Bullet Journalling, those posts are better places to start.&lt;/p&gt;
&lt;p&gt;What I&#x27;ve noticed lately is the &lt;em&gt;pattern&lt;/em&gt; behind my Bullet Journal usage. I&#x27;ve picked up the journalling habit several times now, and dropped it just as many times too.&lt;/p&gt;
&lt;p&gt;My journal was a constant presence when I was freelancing, but it fell by the wayside when I became an employee at a company. I picked it up again when I needed to find a new job, and it was a massively useful tool in that process. But once gainfully employed again, the journal soon began to gather dust. And when a company I was working at shut down suddenly, out came the journal again and the same pattern repeated.&lt;/p&gt;
&lt;p&gt;I&#x27;ve started using my Bullet Journal again recently, too. But this time I&#x27;m not in need of a new job, and I&#x27;m not freelancing. This time the entire world is on fire and falling apart around us&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt;. And that&#x27;s the pattern; when things feel like they&#x27;re slipping beyond my control, Bullet Journalling helps me stay on course and stay (or get back to being) productive.&lt;/p&gt;
&lt;p&gt;What I didn&#x27;t realise before is that journalling is a transactional process for me. It&#x27;s not the life-long everyday habit that I first thought it would be. It&#x27;s a useful mechanism to help deal with times of crisis. Pick it up, reap the benefits for a few weeks, and then discard it again.&lt;/p&gt;
&lt;p&gt;When I &lt;em&gt;do&lt;/em&gt; maintain a Bullet Journal, I&#x27;m pretty thorough and update it every morning. But I&#x27;m still using the first notebook I bought for the job (from a pack of three I picked up in 2013!). Flicking through the pages, I can see a written record of all my periods of uncertainty, transition, and crisis&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn2&quot; id=&quot;fnref2&quot;&gt;[2]&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;I&#x27;m not saying that &lt;em&gt;everyone&lt;/em&gt; should take up journalling when their lives start slipping, but this is certainly an effective coping mechanism for &lt;em&gt;me&lt;/em&gt;. And being aware of journaling&#x27;s function in my life is only going to make the tool more useful. I&#x27;ll no longer feel guilty when I inevitably stop maintaining the journal - it&#x27;s not a chore that &quot;must be done&quot;, its a tool that has done its job. And maybe I&#x27;ll adopt the journaling habit sooner next time; maybe get things back on-track &lt;em&gt;before&lt;/em&gt; things bubble over into a productivity crisis.&lt;/p&gt;
&lt;hr class=&quot;footnotes-sep&quot;/&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn1&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;I&#x27;m hoping some of you are reading this from a time that&#x27;s not gripped by a global pandemic. &lt;em&gt;Sic transit gloria&lt;/em&gt; and all that. &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn2&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;Made much easier by the fact that I&#x27;m maintaining a detailed &quot;contents&quot; page, like the nerd that I am. &lt;a href=&quot;#fnref2&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;</content></entry><entry><title>Prescience, new beginnings, and modern linguistics</title><link href="https://tomhazledine.com/podcasts-for-nerds/01-prescience-beginnings-linguistics/"/><updated>2020-05-06T00:00:00Z</updated><id>https://tomhazledine.com/podcasts-for-nerds/01-prescience-beginnings-linguistics/</id><content type="html">&lt;!-- ## 3 great episodes I&#x27;ve listened to this week: --&gt;
&lt;dl&gt;
&lt;dt&gt;&lt;a href=&quot;https://www.numberphile.com/podcast/hannah-fry-coronavirus&quot;&gt;Crystal balls and Coronavirus&lt;/a&gt;, &lt;em&gt;The Numberphile Podcast&lt;/em&gt; (45mins, 2020-04-10)&lt;/dt&gt;
&lt;dd&gt;Numberphile is a YouTube channel for maths-nerds, and the spin-off podcast interviews leading mathematicians. In this episode TV-mathematician Hannah Fry looks back on the lessons learned (or not learned) from the 2018 BBC show &lt;em&gt;Contagion&lt;/em&gt; (which she presented). That show was a remarkably prescient look at what a modern pandemic would look like. &lt;a href=&quot;https://www.numberphile.com/podcast/hannah-fry-coronavirus&quot;&gt;Find it here&lt;/a&gt;&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;https://www.relay.fm/b-sides/41&quot;&gt;The idea&lt;/a&gt;, &lt;em&gt;Backstage&lt;/em&gt; (28mins, 2020-04-27)&lt;/dt&gt;
&lt;dd&gt;Myke and Stephen run Relay FM, a podcast network that produces loads of good shows I listen to all the time. They&#x27;re starting a new show that&#x27;s a &quot;behind the scenes&quot; look at creating a podcast (meta, I know!). The whole show will be behind a members-only paywall, but the first episode is free for all and really interesting. &lt;a href=&quot;https://www.relay.fm/b-sides/41&quot;&gt;Find it here&lt;/a&gt;&lt;/dd&gt;
&lt;dt&gt;&lt;a href=&quot;https://soundcloud.com/lingthusiasm/43-the-grammar-of-singular-they-interview-with-kirby-conrod&quot;&gt;The grammar of singular they&lt;/a&gt;, &lt;em&gt;Lingthusiasm&lt;/em&gt; (42mins, 2020-04-17)&lt;/dt&gt;
&lt;dd&gt;Everyone loves shows about linguistics, right? I&#x27;ll fight people about less vs fewer, oxford commas, etc., but this episode convinced me that I&#x27;m probably in the wrong about &quot;singular they&quot; (substituting &quot;him&quot; or &quot;her&quot; with &quot;they&quot; when referring to non-gendered people). It sounds odd, but we need to move with the times. Trigger warning: American voices, and liberal use of &quot;like&quot; - but they&#x27;re linguistics experts, so they get to decide what&#x27;s right and wrong.
&lt;a href=&quot;https://soundcloud.com/lingthusiasm/43-the-grammar-of-singular-they-interview-with-kirby-conrod&quot;&gt;Find it here&lt;/a&gt;&lt;/dd&gt;
&lt;/dl&gt;</content></entry><entry><title>Installing acoustic panels</title><link href="https://tomhazledine.com/installing-acoustic-panels/"/><updated>2020-04-28T00:00:00Z</updated><id>https://tomhazledine.com/installing-acoustic-panels/</id><content type="html">&lt;p&gt;In case it&#x27;s somehow escaped your attention, I&#x27;ve been having a lot of fun recording a podcast lately. It&#x27;s a weekly show that we have been running for nearly a year and half now (which is something I&#x27;m rather proud of).&lt;/p&gt;
&lt;p&gt;This week I installed some acoustic panels in my office to improve the sound quality of the podcast.&lt;/p&gt;
&lt;figure&gt;&lt;img src=&quot;/images/articles/acoustic-panels_unboxing.jpg&quot; alt=&quot;&quot;/&gt;&lt;figcaption&gt;Unboxing my new acoustic panels&lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;Running our show is very much a hobby, but we take it seriously and aim for the best quality we can achieve. We don&#x27;t run adverts or have any external funding, so the only budget we have is what we&#x27;re willing to spend (knowing it&#x27;s just for fun).&lt;/p&gt;
&lt;h2 id=&quot;marginal-gains-are-better-than-massive-single-investments&quot; tabindex=&quot;-1&quot;&gt;Marginal gains are better than massive single investments&lt;/h2&gt;
&lt;p&gt;With all that in mind, I &lt;em&gt;do&lt;/em&gt; sometimes splash out and &quot;invest&quot; in the &#x27;cast&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt;. I could blow hundreds of pounds on a microphone upgrade, but a more sensible approach is to aim for marginal gains. There are plenty of small changes that can improve audio quality, and most involve spending &lt;em&gt;effort&lt;/em&gt; rather than money.&lt;/p&gt;
&lt;p&gt;Improving your microphone technique is the biggest thing you can do to improve your audio quality, regardless of the gear you use. And all that takes is a little research and plenty of practice and discipline.&lt;/p&gt;
&lt;p&gt;After working on your mic technique, the next best thing you can do is to improve the acoustic qualities of the space you record in. It makes sense: the quality of the sound you capture in you mic is the single biggest factor in the quality of the overall sound. Sometimes you can &quot;fix it in post&quot;, but it&#x27;s far easier, quicker, and cheaper to fix it &lt;em&gt;before&lt;/em&gt; you record.&lt;/p&gt;
&lt;h2 id=&quot;dealing-with-room-noise&quot; tabindex=&quot;-1&quot;&gt;Dealing with room noise&lt;/h2&gt;
&lt;p&gt;So what is your microphone picking up? Two things: your voice, and the sounds of your environment. Hopefully you&#x27;re able to record in a quiet space with little or no background noise, so it&#x27;s very likely that the majority of the &quot;room noise&quot; you record will be reflections and reverberations of your own voice.&lt;/p&gt;
&lt;p&gt;Every hard, flat surface in your room will bounce you voice back at the microphone. In most cases this manifests as a &quot;boxy&quot; sounding end result. The cure to this problem? Soften the hard surfaces and break up the reflections.&lt;/p&gt;
&lt;p&gt;Soft furnishings will help a lot here (sofas, heavy curtains, bookshelves, etc.) but every now and then you find a large, flat surface that you can&#x27;t do anything else with. That was the case in my new home office - a big flat wall right behind my desk; perfectly poised to reflect the maximum amount of sound directly at my microphone. And that&#x27;s where acoustic panels come in.&lt;/p&gt;
&lt;h2 id=&quot;acoustic-panels&quot; tabindex=&quot;-1&quot;&gt;Acoustic panels&lt;/h2&gt;
&lt;p&gt;Acoustic panels are a fairly simple concept: pads of foam that you stick to your wall to reduce reflections. Compared to a lot of audio &quot;gear&quot;, they&#x27;re not too expensive. I picked up a pack of sixteen 30cm x 30cm squares for about £36. But all it is is cleverly shaped foam, so really it&#x27;s actually &lt;em&gt;quite&lt;/em&gt; expensive. But I&#x27;m not much of a DIY-er, and I&#x27;m generally happy to pay for convenience.&lt;/p&gt;
&lt;p&gt;In &quot;proper&quot; studios, you&#x27;ll find fancy panels with wooden frames, nice fabric covers, and dense rock-wool stuffing. They are obviously more effective than some simple foam glued to the wall, but like I said; my DIY skills are weak.&lt;/p&gt;
&lt;h2 id=&quot;installation-(maybe)&quot; tabindex=&quot;-1&quot;&gt;Installation (maybe)&lt;/h2&gt;
&lt;p&gt;My first attempt at attaching the foam panels to my wall did not go well. I had a set of double-sided sticky pads, recommended by the Amazon Q&amp;amp;A on the page that I got the panels from. After some careful positioning (with a tape measure and a spirit-level, you&#x27;ll be pleased to hear), I was pretty pleased with the results. I&#x27;d yet to do any recording, but I could test that in the morning...&lt;/p&gt;
&lt;p&gt;...jump-cut to the next morning, and many of the panels were strewn across the room or wedged between my computer and the wall. In short - not where I&#x27;d left them 🙁&lt;/p&gt;
&lt;figure&gt;&lt;img src=&quot;/images/articles/acoustic-panels_disaster.jpg&quot; alt=&quot;&quot; data-alt=&quot;Acoustic panels, but most have fallen off the wall&quot;/&gt;&lt;figcaption&gt;The sticky pads just weren&#x27;t sticky enough&lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;The sticky pads were not enough to hold the panels by themselves. The pads had stuck to the wall fine. In fact, if I ever want to take them off I&#x27;m sure it&#x27;ll be a devil of a job! The trouble was that the pads weren&#x27;t reliably adhering to the foam itself, so the panels would just drop off. Not at first (no! they were happy to lull me into a false sense of security), but gradually, over a period of hours or days, they would fall to the floor.&lt;/p&gt;
&lt;h2 id=&quot;installation---take-two&quot; tabindex=&quot;-1&quot;&gt;Installation - take two&lt;/h2&gt;
&lt;p&gt;For take-two, I took things up a notch with some serious spray mount. After doing some research, it emerged that the best course of action was to attach the panels to some kind of backing (plywood is best, but cardboard works fine). This time I was taking no chances and both the back of the panel and the cardboard backing got a liberal dousing in spray-fix. I even weighted them down and gave them plenty of time to dry.&lt;/p&gt;
&lt;figure&gt;&lt;img src=&quot;/images/articles/acoustic-panels_combo.jpg&quot; alt=&quot;&quot;/&gt;&lt;figcaption&gt;Cutting cardboard to act as backing for the panels. Glueing that cardboard in place. Weighing down the glued panels with a heavy box while the glue dries.&lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;Attaching the new cardboard-backed panels to the wall was even quicker and easier than the first attempt. The sticky pads were still attached (and still sticky) so the cardboard adhered very thoroughly. Job done. Or so I thought...&lt;/p&gt;
&lt;h2 id=&quot;installation---take-three%3F&quot; tabindex=&quot;-1&quot;&gt;Installation - take three?&lt;/h2&gt;
&lt;p&gt;Thankfully the cardboard is still stuck fast. That theory, at least, was sound. And this time &lt;em&gt;most&lt;/em&gt; of the panels have stayed in place. In general the glue fixing the foam to the cardboard is still pretty strong, but a couple of panels fell down overnight. Cue &lt;em&gt;day three&lt;/em&gt; of trying to get these darned things to stay up 😬&lt;/p&gt;
&lt;h2 id=&quot;useful-advice&quot; tabindex=&quot;-1&quot;&gt;Useful advice&lt;/h2&gt;
&lt;p&gt;If you&#x27;re planning on installing acoustic foam panels, the biggest tip I can give is this: apply a sturdy backing to the foam, and &lt;em&gt;make sure it&#x27;s stuck fast&lt;/em&gt; before attempting to attach it to the wall. It&#x27;s save you a lot of bother.&lt;/p&gt;
&lt;p&gt;But was it all worth it? Stay tuned to future episodes of the &lt;a href=&quot;&quot;&gt;A Question of Code&lt;/a&gt; podcast and see if &lt;em&gt;you&lt;/em&gt; can hear the difference...&lt;/p&gt;
&lt;figure&gt;&lt;img src=&quot;/images/articles/acoustic-panels_complete.jpg&quot; alt=&quot;&quot; data-alt=&quot;All the acoustic panels successfully attached to the wall&quot;/&gt;&lt;figcaption&gt;The end result&lt;/figcaption&gt;&lt;/figure&gt;
&lt;hr class=&quot;footnotes-sep&quot;/&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn1&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;One of the first signs you&#x27;ve become a &quot;podcast idiot&quot; is you start calling them &#x27;casts. &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;</content></entry><entry><title>CSS Naked Day</title><link href="https://tomhazledine.com/css-naked-day/"/><updated>2020-04-09T00:00:00Z</updated><id>https://tomhazledine.com/css-naked-day/</id><content type="html">&lt;p&gt;As a developer who came of age at the dawn of Web 2.0, supporting semantic markup is something that I&#x27;ve always been in favour of. I&#x27;ve written in the past about how &lt;a href=&quot;https://www.tomhazledine.com/html-doesnt-need-any-styling/&quot;&gt;HTML doesn&#x27;t need (much) styling&lt;/a&gt; to be perfectly functional. So I&#x27;m really enjoying the fact that today (April 9th) is &quot;officially&quot; &lt;em&gt;&lt;a href=&quot;https://css-naked-day.github.io/&quot;&gt;CSS Naked Day&lt;/a&gt;&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;If you&#x27;re reading this on the 9th, then my whole site will be untouched by CSS. If you&#x27;re reading on any other day, then it&#x27;s only &lt;em&gt;this&lt;/em&gt; page that&#x27;s unstyled.&lt;/p&gt;
&lt;p&gt;Apart from being a fun exercise, there is a serious point to be made here. A lot of people experience the web via nothing more than the markup (be that through assistive tech like screen readers, or just automated delivery mechanisms like web-scrappers and RSS feeds). The way we structure our documents &lt;em&gt;matters&lt;/em&gt;.&lt;/p&gt;</content></entry><entry><title>Twitter Cards with Nunjucks and 11ty</title><link href="https://tomhazledine.com/twitter-cards-with-nunjucks-and-eleventy/"/><updated>2020-02-17T00:00:00Z</updated><id>https://tomhazledine.com/twitter-cards-with-nunjucks-and-eleventy/</id><content type="html">&lt;p&gt;When sharing links on Twitter, there&#x27;s a handy feature to make those links look prettier. Twitter &quot;cards&quot; will turn your simple text link into a rich card complete with an image and structured title and description data. Here&#x27;s a recent tweet from my podcast&#x27;s&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt; account. When writing the tweet, we simply included the url &lt;code&gt;https://aquestionofcode.com/52-what-gear-do-you-use/&lt;/code&gt; in the text, and Twitter automatically added the card content.&lt;/p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot;&gt;&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;🎙️52: What gear do you use?&lt;br/&gt;&lt;br/&gt;This week we take a look at all the tech and tools that we use everyday. &lt;a href=&quot;https://twitter.com/hashtag/techgear?src=hash&amp;amp;ref_src=twsrc%5Etfw&quot;&gt;#techgear&lt;/a&gt; &lt;a href=&quot;https://twitter.com/hashtag/techpodcast?src=hash&amp;amp;ref_src=twsrc%5Etfw&quot;&gt;#techpodcast&lt;/a&gt; &lt;a href=&quot;https://twitter.com/hashtag/CodeNewbie?src=hash&amp;amp;ref_src=twsrc%5Etfw&quot;&gt;#CodeNewbie&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;Available on your podcatcher of choice!&lt;a href=&quot;https://t.co/xRyxuXAAW2&quot;&gt;https://t.co/xRyxuXAAW2&lt;/a&gt;&lt;/p&gt;&amp;amp;mdash; A Question Of Code (@aQoCode) &lt;a href=&quot;https://twitter.com/aQoCode/status/1234767283710517249?ref_src=twsrc%5Etfw&quot;&gt;March 3, 2020&lt;/a&gt;&lt;/blockquote&gt; &lt;script async=&quot;async&quot; src=&quot;https://platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;/&gt;
&lt;p&gt;There are several types of card, including &lt;strong&gt;summary&lt;/strong&gt;, &lt;strong&gt;player&lt;/strong&gt;, and &lt;strong&gt;summary with large image&lt;/strong&gt;. They all serve different purposes and are activated in different ways. You can find the full details on &lt;a href=&quot;https://developer.twitter.com/en/docs/tweets/optimize-with-cards/overview/summary&quot;&gt;Twitter&#x27;s developer overview&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;adding-support-for-twitter-cards-to-your-own-site&quot; tabindex=&quot;-1&quot;&gt;Adding support for Twitter Cards to your own site&lt;/h2&gt;
&lt;p&gt;Does this happen to all links? Sadly not. To activate this feature, the page you&#x27;re linking to needs to include some Twitter-specific metadata in it&#x27;s &lt;code&gt;&amp;lt;head&gt;&lt;/code&gt;. Here&#x27;s what that metadata for &lt;em&gt;this&lt;/em&gt; page looks like:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-html&quot;&gt;&amp;lt;meta name=&quot;twitter:card&quot; content=&quot;summary&quot; /&gt;
&amp;lt;meta name=&quot;twitter:creator&quot; content=&quot;{{site.authorTwitterUrl}}&quot; /&gt;
&amp;lt;meta property=&quot;og:url&quot; content=&quot;{{site.url}}{{page.url}}&quot; /&gt;
&amp;lt;meta property=&quot;og:title&quot; content=&quot;{{title}}&quot; /&gt;
&amp;lt;meta
    property=&quot;og:description&quot;
    content=&quot;{% if excerpt %}{{excerpt}}{% else %}{{site.summary}}{% endif %}&quot;
/&gt;
&amp;lt;meta name=&quot;twitter:image&quot; content=&quot;{{site.url}}/images/pages_stack_bg.jpg&quot; /&gt;
&amp;lt;meta property=&quot;og:image&quot; content=&quot;{{site.url}}/images/pages_stack_bg.jpg&quot; /&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;adding-the-metadata-in-11ty&quot; tabindex=&quot;-1&quot;&gt;Adding the metadata in 11ty&lt;/h2&gt;
&lt;p&gt;My site is built with &lt;a href=&quot;https://www.11ty.dev/&quot;&gt;Eleventy&lt;/a&gt; (a.k.a. &lt;em&gt;11ty&lt;/em&gt;), and I use the &lt;a href=&quot;https://mozilla.github.io/nunjucks/&quot;&gt;Nunjucks&lt;/a&gt; templating engine.&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn2&quot; id=&quot;fnref2&quot;&gt;[2]&lt;/a&gt;&lt;/sup&gt; I chose Nunjucks because it&#x27;s the de-facto standard in all the code example in the 11ty docs, and it&#x27;s about as lightweight and intuitive as any other templating language.&lt;/p&gt;
&lt;p&gt;That same block of metadata that I showed before looks like this in a Nunjucks file:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-html&quot;&gt;&amp;lt;meta name=&quot;twitter:card&quot; content=&quot;{{cardType}}&quot; /&gt;
&amp;lt;meta name=&quot;twitter:creator&quot; content=&quot;{{site.authorTwitterUrl}}&quot; /&gt;
&amp;lt;meta property=&quot;og:url&quot; content=&quot;{{site.url}}{{page.url}}&quot; /&gt;
&amp;lt;meta property=&quot;og:title&quot; content=&quot;{{cardTitle}}&quot; /&gt;
&amp;lt;meta
    property=&quot;og:description&quot;
    content=&quot;{% if excerpt %}{{excerpt}}{% else %}{{site.summary}}{% endif %}&quot;
/&gt;
&amp;lt;meta name=&quot;twitter:image&quot; content=&quot;{{cardImage}}&quot; /&gt;
&amp;lt;meta property=&quot;og:image&quot; content=&quot;{{cardImage}}&quot; /&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Because the way 11ty templates and layouts are put together, I had to add the metadata to my site&#x27;s master &lt;code&gt;main.njk&lt;/code&gt; layout file. This is the main layout that wraps all my pages, so I need to include some custom logic to account for a few scenaris:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Pages that don&#x27;t have an image of their own (most pages on my site, in fact) fall back to using a generic site-logo image.&lt;/li&gt;
&lt;li&gt;If we&#x27;re using the generic site-logo image, I switch the card&#x27;s &lt;code&gt;type&lt;/code&gt; from &lt;code&gt;summary_with_large_image&lt;/code&gt; to simply &lt;code&gt;summary&lt;/code&gt;, which creates a smaller card that is better suited to a icon or simple logo.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;gotchas&quot; tabindex=&quot;-1&quot;&gt;Gotchas&lt;/h2&gt;
&lt;p&gt;I have to confess that it took me several attempts to get the images loading correctly&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn3&quot; id=&quot;fnref3&quot;&gt;[3]&lt;/a&gt;&lt;/sup&gt;. Twitter provides a helpful &lt;a href=&quot;https://cards-dev.twitter.com/validator&quot;&gt;Card validator&lt;/a&gt;. Having access to that meant I could test and debug without having to spam my followers with tweets full of broken card links (which was a relief, I can say). It still needs a valid &lt;em&gt;real-world&lt;/em&gt; url to work, however, and that&#x27;s not something my current dev-setup can provide for this site (where I normally just rely on a &lt;code&gt;localhost&lt;/code&gt; url for testing and development). I just YOLO&#x27;d it by repeatedly deploying to my Netlify instance. Probably not &quot;best practice&quot;, but it got the job done.&lt;/p&gt;
&lt;hr class=&quot;footnotes-sep&quot;/&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn1&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;&lt;strong&gt;#shamelessPlug&lt;/strong&gt;&lt;br/&gt;A podcast, you say? Why yes! be sure to check out &lt;a href=&quot;https://aqoc.dev&quot;&gt;A Question of Code&lt;/a&gt; in your podcatcher of choice. &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn2&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;Convienently, the syntax is the same for Liquid (which is the &lt;em&gt;other&lt;/em&gt; popular templating language used with Eleventy) &lt;a href=&quot;#fnref2&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn3&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;Note to self, Twitter cards don&#x27;t like relative paths for images! &lt;a href=&quot;#fnref3&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;</content></entry><entry><title>The things I use</title><link href="https://tomhazledine.com/things-i-use/"/><updated>2020-01-17T00:00:00Z</updated><id>https://tomhazledine.com/things-i-use/</id><content type="html">&lt;p&gt;Every now and then I get &quot;nerd sniped&quot;. Something (a link, an idea, anything) comes out of left-field and instantly becomes an obsession. Take, for example, &lt;a href=&quot;https://www.decisionproblem.com/paperclips/&quot;&gt;Universal Paperclips&lt;/a&gt;. I stumbled on that link who-knows-where, and BAM! Three days&#x27; productivity lost, just like that.&lt;/p&gt;
&lt;p&gt;Thankfully the most recent example is more benign. Wes Bos&#x27; &lt;a href=&quot;https://uses.tech/&quot;&gt;uses.tech&lt;/a&gt; site is a catalogue of tech bloggers&#x27; &quot;uses&quot; pages. I saw that, and had to drop everything to make my own: &lt;a href=&quot;https://tomhazledine.com/uses/&quot;&gt;tomhazledine.com/uses&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;what-is-a-%22uses%22-page%3F&quot; tabindex=&quot;-1&quot;&gt;What is a &quot;uses&quot; page?&lt;/h2&gt;
&lt;p&gt;In short, a &quot;uses&quot; page is a list of the things you use. Beyond that, it&#x27;s really up to you. I&#x27;ve chosen to list the hardware I own and use on a regular basis. I covers the basics like computers and laptops, but also other useful things. I have a section for video- and audio-related tech (which I use for &lt;a href=&quot;https://aquestionofcode.com/&quot;&gt;podcasting&lt;/a&gt; and my occasional &lt;a href=&quot;https://www.youtube.com/channel/UCfi3VtksUcc0Xm9xq1-PSdg&quot;&gt;coding videos&lt;/a&gt;), and also a section that covers my art and design tools (ranging from fancy sketchbooks to The World&#x27;s Best Pencil&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt;).&lt;/p&gt;
&lt;h2 id=&quot;future-plans&quot; tabindex=&quot;-1&quot;&gt;Future plans&lt;/h2&gt;
&lt;p&gt;I think having (and maintaining) a &lt;em&gt;Uses&lt;/em&gt; page is a valuable thing. I love reading about the tools other professionals use, so hopefully someone else (maybe you!) will find value in my list.&lt;/p&gt;
&lt;p&gt;So far I&#x27;ve only scratched the surface (I really love &lt;em&gt;things&lt;/em&gt;, it turns out) and there are already plenty of omissions. The tools I use day-to-day fall in and out of favour periodically, so regular updates will be required. And I haven&#x27;t even started to list the &lt;em&gt;software&lt;/em&gt; I use!&lt;/p&gt;
&lt;p&gt;I will revisit &lt;a href=&quot;https://tomhazledine.com/uses/&quot;&gt;my &lt;em&gt;Uses&lt;/em&gt; page&lt;/a&gt; as often as I can, and will actively seek-out the Uses pages of others. You should make one of your own, and then Tweet the link to me. I&#x27;d love to see it!&lt;/p&gt;
&lt;hr class=&quot;footnotes-sep&quot;/&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn1&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;It&#x27;s almost embarrassing how much I love this pencil. The feature set, the weight of it, the finger-feel of the exquisite knurling. Everything about it is perfect. &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;</content></entry><entry><title>Static site generators: Hugo vs Jekyll vs Gatsby vs 11ty</title><link href="https://tomhazledine.com/eleventy-static-site-generator/"/><updated>2020-01-07T00:00:00Z</updated><id>https://tomhazledine.com/eleventy-static-site-generator/</id><content type="html">&lt;p&gt;I have an obsession with static site generators. They help turn simple markdown files into a lean, mean, super-fast website. They&#x27;re rendered at compile-time, so there&#x27;s no server-side activity to slow things down. And because all the browser ever sees is static files, there&#x27;s much less chance of your site being hacked. My favourite SSG is &lt;a href=&quot;https://www.11ty.dev/&quot;&gt;Eleventy&lt;/a&gt; (11ty), but I&#x27;ve been on a long journey to get here...&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;I tried &lt;a href=&quot;#i-tried-wordpress&quot;&gt;WordPress&lt;/a&gt;, &lt;a href=&quot;#i-tried-vanilla-html&quot;&gt;vanilla HTML&lt;/a&gt;, &lt;a href=&quot;#i-tried-jekyll&quot;&gt;Jekyll&lt;/a&gt;, &lt;a href=&quot;#i-tried-gatsby&quot;&gt;Gatsby&lt;/a&gt;, and &lt;a href=&quot;#i-tried-hugo&quot;&gt;Hugo&lt;/a&gt;, but &lt;a href=&quot;#11ty-is-my-favourite&quot;&gt;11ty is my favourite&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;i-tried-wordpress&quot; tabindex=&quot;-1&quot;&gt;I tried WordPress&lt;/h3&gt;
&lt;p&gt;Before I discovered SSGs, I was a WP ninja for years. People often complain about the speed of WordPress, but after running several massive-traffic, high-complexity, image-heavy sites for clients, I&#x27;m happy to report that WordPress is not the performance bottleneck that people think it is. (You just have to be very careful!)&lt;/p&gt;
&lt;p&gt;I also loved the versatility of &lt;a href=&quot;https://developer.wordpress.org/reference/functions/register_post_type/&quot;&gt;Custom Post Types&lt;/a&gt; and the magic UI that comes with &lt;a href=&quot;https://www.advancedcustomfields.com/pro/&quot;&gt;Advanced Custom Fields Pro&lt;/a&gt;, but never felt that WordPress as a whole aligned with &lt;em&gt;my&lt;/em&gt; preferred workflow. Despite the power of CPTs and ACF, the WP dashboard was always a point of friction. It could do &lt;em&gt;too much&lt;/em&gt;, while at the same time not being customisable enough 😬&lt;/p&gt;
&lt;h3 id=&quot;i-tried-vanilla-html&quot; tabindex=&quot;-1&quot;&gt;I tried vanilla HTML&lt;/h3&gt;
&lt;p&gt;Eugh! That was a fun intellectual challenge, and it&#x27;s something I believe that every frontender &lt;em&gt;should&lt;/em&gt; be able to do. But once you get beyond a couple of pages it was a massive pain! I missed Markdown and partials and data-management and, well, all the things people use frameworks and systems for!&lt;/p&gt;
&lt;h3 id=&quot;i-tried-jekyll&quot; tabindex=&quot;-1&quot;&gt;I tried Jekyll&lt;/h3&gt;
&lt;p&gt;After the over-engineering of WordPress, &lt;a href=&quot;https://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt; was a breath of fresh air. Comprehensible flat files! No database to slow things down! Markdown support that makes sense! (Good markdown support is hard to manage in WP even to this day).&lt;/p&gt;
&lt;p&gt;Even though I quickly fell out with Jekyll (too much Ruby, not enough flexibility for shared metadata and categorisation, and getting Jekyll to play nicely with my workflow automation was a major PITA), this was the moment that I fell in love with statically generated websites. The concept made perfect sense for the simple blogs I was creating at the time, &lt;em&gt;and&lt;/em&gt; meant I jumped straight to the top of the my-site-loads-faster-than-yours leaderboards.&lt;/p&gt;
&lt;h3 id=&quot;i-tried-gatsby&quot; tabindex=&quot;-1&quot;&gt;I tried Gatsby&lt;/h3&gt;
&lt;p&gt;After I finally mastered React (maybe; it&#x27;s a long journey, I suspect), it was inevitable that my React-all-the-things! instinct would carry over to my blogs. &lt;a href=&quot;https://www.gatsbyjs.org/&quot;&gt;Gatsby&lt;/a&gt; was an easy sell. All the power of a React SPA, with all the benefits of a statically generated site? Yes, please!&lt;/p&gt;
&lt;p&gt;The image-handling and page-prerendering still blow my mind, but in the end it was goddam GraphQL that drove me away.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The frontmatter&#x27;s right there! Why do I need to change three files to get it! I don&#x27;t want to add the data, &lt;em&gt;then&lt;/em&gt; add a schema too! Fuuuuuuuuu...&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Needless to say, I&#x27;ve retreated again to less over-engineered pastures.&lt;/p&gt;
&lt;h3 id=&quot;i-tried-hugo&quot; tabindex=&quot;-1&quot;&gt;I tried Hugo&lt;/h3&gt;
&lt;p&gt;Hugo is awesome, and being able to tell people I use GoLang is fun. But if I&#x27;m brutally honest with myself, the street-cred is the only real advantage over Jekyll 😋&lt;/p&gt;
&lt;p&gt;It has all Jekyll&#x27;s benefits, but also all of the same limitations (for me, at least). We use it for our documentation hub at my Jobby Job, and I really enjoy working with it (we might even roll out a Hugo build of our currently-WP brochure site, too). But most of the time I want more control over shortcodes and snippets and advanced features. This could all be improved if I was better at Go, I&#x27;m sure, but if there&#x27;s a JavaScript option out there, that&#x27;s the one I&#x27;ll inevitably gravitate towards.&lt;/p&gt;
&lt;h3 id=&quot;11ty-is-my-favourite&quot; tabindex=&quot;-1&quot;&gt;11ty is my favourite&lt;/h3&gt;
&lt;p&gt;And so we come to Eleventy (a.k.a. &lt;a href=&quot;https://www.11ty.dev/&quot;&gt;11ty&lt;/a&gt;). It has all the benefits of Hugo and Jekyll, but it&#x27;s written in JavaScript. Flat files? Check! No excess cruft? Check! Markdown is king? Check! I can customise to my heart&#x27;s content, and add all the shortcodes and layout tweaks I want. The real selling point for me is the intuitive folder structure - it&#x27;s so simple and elegant, and I grokked it almost instantly.&lt;/p&gt;
&lt;p&gt;As an added benefit, it integrates very nicely indeed into my existing workflow automation. I&#x27;m not penalised for using WebPack for assets, and relying on GitHub and Netlify for CI is a breeze. I&#x27;ve rebuilt my site many times use many different tools, but the 11ty rebuild was by far the fastest&lt;/p&gt;
&lt;p&gt;There are still friction points; pagination&#x27;s a real pain, as is any attempt to simulate different post types, and the documentation is still a work in process (although that almost makes me &lt;em&gt;more&lt;/em&gt; excited because there&#x27;s a genuine opportunity for me to contribute something meaningful to the project). So, all told, I &lt;em&gt;could&lt;/em&gt; still be lured away by a newer and shinier SSG.&lt;/p&gt;
&lt;p&gt;But after over a year of use I&#x27;m still happy with 11ty. It does the majority of things I&#x27;d want a site-generator to do, and gets out of the way when I want to add in my own crazy things. If anything, my travels through the land of SSGs have taught me that the later point is more important - a static site generator &lt;em&gt;cannot&lt;/em&gt; get in the way of my workflow. As soon as it does, I&#x27;ll most likely try another. And there are plenty out there still to try.&lt;/p&gt;</content></entry><entry><title>Rugby prediction: retrospective</title><link href="https://tomhazledine.com/rugby-prediction-retrospective/"/><updated>2019-12-30T00:00:00Z</updated><id>https://tomhazledine.com/rugby-prediction-retrospective/</id><content type="html">&lt;p&gt;Making predictions is a dangerous game, especially if you publicise them. Before this year&#x27;s (2019&#x27;s) Rugby World Cup, I was chewing the ear off anyone who&#x27;d sit still long enough: &quot;I know how the world cup will turn out. I&#x27;ve made an algorithm!&quot; Not only did I bore all my friends, exhaust my colleagues, and &lt;a href=&quot;https://www.tomhazledine.com/rugby-world-cup-predictions/&quot;&gt;write up my predictions here on my blog&lt;/a&gt;... Not only that, but I actually put my hard-earned money on the line. So confident was I in my predictions, I made a series of bets. &quot;Sure things&quot;, I thought them.&lt;/p&gt;
&lt;h2 id=&quot;pride-comes-before-a-fall&quot; tabindex=&quot;-1&quot;&gt;Pride comes before a fall&lt;/h2&gt;
&lt;p&gt;As anyone who saw my predictions will know already, my algorithm was no match for reality. After a perfect first weekend, things began to unravel from the second weekend of matches. I became very clear very quickly that my predictions were &lt;em&gt;way&lt;/em&gt; off.&lt;/p&gt;
&amp;lt;p %=&quot;&quot; include=&quot;&quot; rugbybad-pool.njk%=&quot;&quot;&gt;
&lt;h2 id=&quot;so-what-went-wrong%3F&quot; tabindex=&quot;-1&quot;&gt;So what went wrong?&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;I underestimated the specific impact of the players on the pitch and overestimated the record of the team as a whole. Some (but not all) teams are defined by one or two star players, and subsequently highly susceptible to the whims of injury and individual form.&lt;/li&gt;
&lt;li&gt;Japan surpassed all my expectations, proving that the tier system lacks nuance. A large part of my algorithm hinged on the idea of &quot;tiers&quot;: the gulf in budget and schedule and player-pool mean that &quot;tier one&quot; teams (like the 6 Nations and SANZAAR) are heavily favoured over &quot;tier two&quot; teams. If nothing else, 2019 was the year a new &quot;tier one&quot; team was born. But Japan&#x27;s ascendancy aside, the two-tier model has been shown time and time again to be a flawed indicator of performance. I can now see evidence of four tiers, at least. And the big question for my algorithm is this: should the model use tiers as part of the calculation, or are tiers the &lt;em&gt;output&lt;/em&gt; of the model?&lt;/li&gt;
&lt;li&gt;Past performance is not a reliable indicator of future performance.&lt;/li&gt;
&lt;li&gt;Much like the players themselves, training and strategy have a big impact on performance (this is maybe the &lt;em&gt;biggest&lt;/em&gt; failing of my algorithm - &lt;em&gt;of course&lt;/em&gt; a team&#x27;s strategy has an impact on their results #facepalm). As much as I may previously dismissed their influence, coaches have a big impact. They sometimes field &quot;experimental&quot; teams in the run up to a big tournament; it helps to blood inexperienced players, and provides a playground for experimentation in game-management and set-pieces. And on top of all this, certain teams will target certain games. England saved some tricks for their (in their eyes) inevitable showdown with New Zealand, South Africa held back some devastating weapons for the final (in a staggering display of self-belief), and Japan poured everything into their pool match against Ireland (who in turn fielded a second-string team of their own, naïvely writing the fixture off as a &quot;sure thing&quot;). If the 2019 world cup has taught me anything, it&#x27;s that there are no &quot;sure things&quot; on a rugby pitch.&lt;/li&gt;
&lt;li&gt;It&#x27;s easy to mock, but some teams do have a history of choking on big occasions. Not to pick on Ireland, but &quot;Ireland-crash-out-in-the-quarter-finals&quot; has become a potent meme. And how do you factor in the French? They always over-perform at world cups (and almost as inevitably do something mind bogglingly stupid, too).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You can&#x27;t build a reliable algorithm on past scores alone. There are so many other factors that impact how a team performs. You might be able to quantify most (if not all) of them, but that information is not hidden in the scores of past games.&lt;/p&gt;
&lt;h2 id=&quot;do-i-mind%3F&quot; tabindex=&quot;-1&quot;&gt;Do I mind?&lt;/h2&gt;
&lt;p&gt;Of course not. I might have put real money on the line, but it was (thankfully) money I could afford to lose. In fact, the added excitement of having something at stake in &lt;em&gt;every match&lt;/em&gt; makes me think I got my money&#x27;s worth, and then some. The 2019 world cup was the most surprising and entertaining world cup that I&#x27;ve ever followed. The upsets and close-calls that so confounded my algorithm were the very things that made the whole event such fun.&lt;/p&gt;
&lt;h2 id=&quot;will-i-continue-to-work-on-my-algorithm%3F&quot; tabindex=&quot;-1&quot;&gt;Will I continue to work on my algorithm?&lt;/h2&gt;
&lt;p&gt;You betcha, I will. Roll on the 2020 Six Nations!&lt;/p&gt;</content></entry><entry><title>Algorithmically predicting the results of the 2019 Rugby World Cup</title><link href="https://tomhazledine.com/rugby-world-cup-predictions/"/><updated>2019-09-07T00:00:00Z</updated><id>https://tomhazledine.com/rugby-world-cup-predictions/</id><content type="html">&lt;p&gt;I&#x27;ve been working on a rugby prediction algorithm for a while now. My basic premise is that the World Rugby rankings are a good indicator of past performance, but don&#x27;t give the full picture when predicting &lt;em&gt;future&lt;/em&gt; results. I&#x27;ve already &lt;a href=&quot;https://tomhazledine.com/rugby-world-cup-2019&quot;&gt;visualised my predictions based on form alone&lt;/a&gt;, and the results look reasonable - so is there room for improvement?&lt;/p&gt;
&lt;p&gt;My hypothesis is that a more accurate prediction can be made if we take into account short-term form and past performance against specific opponents.&lt;/p&gt;
&lt;p&gt;With this in mind, my new model combines four key metrics:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;All-time performance&lt;/strong&gt; - as shown by current world ranking&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Recent Form: tier 1&lt;/strong&gt; - how well have the team performed in their last 10 matches against tier 1 opposition.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Recent Form: tier 2&lt;/strong&gt; - how well have the team performed in their last 10 matches against tier 2 opposition.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;History against opponent&lt;/strong&gt; - how well have the team performed against the specific opponent we&#x27;re predicting the result for?&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;There&#x27;s obviously plenty more that I can add to this algorithm, but with the World Cup actually starting soon (tomorrow, at time of writing), I&#x27;ve got a hard deadline for &quot;just shipping&quot; whatever I&#x27;ve got.&lt;/p&gt;
&lt;h2 id=&quot;the-predictions&quot; tabindex=&quot;-1&quot;&gt;The predictions&lt;/h2&gt;
&amp;lt;p %=&quot;&quot; include=&quot;&quot; rugbyv2.pools.njk%=&quot;&quot;&gt;
&lt;!-- &lt;div id=&quot;rugby-pools&quot;&gt;&lt;/div&gt; --&gt;</content></entry><entry><title>Using world ranking to predict the results of the 2019 Rugby World Cup pool stages</title><link href="https://tomhazledine.com/rugby-world-cup-2019/"/><updated>2019-08-21T00:00:00Z</updated><id>https://tomhazledine.com/rugby-world-cup-2019/</id><content type="html">&lt;p&gt;This year (2019) is a rugby world cup year. I like data visualisation, and I like rugby. So here&#x27;s my primitive attempt to calculate the results of the pool stages of the 2019 World Cup. My simple heuristic is that &lt;strong&gt;world ranking&lt;/strong&gt; (as of Aug 22&lt;sup&gt;nd&lt;/sup&gt; 2019) is a predictor of a team&#x27;s success. In effect, my simple algorithm states that a team with a higher ranking will always beat a team with a lower ranking.&lt;/p&gt;
&lt;p&gt;Just here for the predictions? &lt;a href=&quot;#rugby-pools&quot;&gt;skip to the end&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: I&#x27;m not trying to predict who &lt;strong&gt;will&lt;/strong&gt; win a match, just who is &lt;strong&gt;expected&lt;/strong&gt; to win. When the inevitable &quot;upsets&quot; occur (like Japan vs. South Africa in 2015), I want to be able to say &quot;wow! They only had a &lt;code&gt;{N}%&lt;/code&gt; chance of winning, but they did it!&quot;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;So let&#x27;s translate that calculation into code:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;const chanceOfWinning = (teamRank, oppositionRank) =&gt; {
    const combinedRanks = teamRank + oppositionRank;
    const invertedRanking = combinedRanks - teamRank; // Becasue a rank of 1 is the best
    const percentage = (invertedRanking / combinedRanks) * 100;
    return percentage.toFixed(1); // Round to 1 decimal place
};

chanceOfWinning(2, 13); // 86.7
// NZL are ranked `2`, and ITA are ranked `13`
// Therefore NZL have an 86.7% chance of beating ITA
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;With this primitive algorithm, I can produce a &lt;em&gt;&quot;likelihood of winning&quot;&lt;/em&gt; percentage for any pairing of teams. And on first inspection it looks pretty good (based on my own &lt;em&gt;subjective&lt;/em&gt; opinion of who should win a given match). New Zealand are currently ranked #2 in the world, and should be expected to crush a #13 side like Italy. Samoa and Russia (#16 and #20 respectively) should be a much closer match, but you&#x27;d expect Samoa to emerge victorious.&lt;/p&gt;
&lt;div class=&quot;matches--solo&quot;&gt;
    &lt;div class=&quot;match match--solo&quot;&gt;
        &lt;span class=&quot;match__team&quot;&gt;
            &lt;span class=&quot;match__team-ranking&quot;&gt;2&lt;/span&gt;nzl
        &lt;/span&gt;
        &lt;div class=&quot;match__bar&quot;&gt;
            &lt;div class=&quot;bar__inner bar__inner--0 bar__inner--win&quot; style=&quot;width: 86.7%;&quot;&gt;
                &lt;span class=&quot;bar__value&quot;&gt;86.7%&lt;/span&gt;
            &lt;/div&gt;
            &lt;div class=&quot;bar__inner bar__inner--1 bar__inner--loss&quot; style=&quot;width: 13.3%;&quot;&gt;
                &lt;span class=&quot;bar__value&quot;&gt;13.3%&lt;/span&gt;
            &lt;/div&gt;
            &lt;span class=&quot;match__bar-divider&quot;/&gt;
        &lt;/div&gt;
        &lt;span class=&quot;match__team match__team--last&quot;&gt;
            ita&lt;span class=&quot;match__team-ranking&quot;&gt;13&lt;/span&gt;
        &lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;match match--solo&quot;&gt;
        &lt;span class=&quot;match__team&quot;&gt;
            &lt;span class=&quot;match__team-ranking&quot;&gt;16&lt;/span&gt;sam
        &lt;/span&gt;
        &lt;div class=&quot;match__bar&quot;&gt;
            &lt;div class=&quot;bar__inner bar__inner--0 bar__inner--win&quot; style=&quot;width: 55.6%;&quot;&gt;
                &lt;span class=&quot;bar__value&quot;&gt;55.6%&lt;/span&gt;
            &lt;/div&gt;
            &lt;div class=&quot;bar__inner bar__inner--1 bar__inner--loss&quot; style=&quot;width: 44.4%;&quot;&gt;
                &lt;span class=&quot;bar__value&quot;&gt;44.4%&lt;/span&gt;
            &lt;/div&gt;
            &lt;span class=&quot;match__bar-divider&quot;/&gt;
        &lt;/div&gt;
        &lt;span class=&quot;match__team match__team--last&quot;&gt;
            rus&lt;span class=&quot;match__team-ranking&quot;&gt;20&lt;/span&gt;
        &lt;/span&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;h2 id=&quot;there-are-problems-with-using-rank&quot; tabindex=&quot;-1&quot;&gt;There are problems with using rank&lt;/h2&gt;
&lt;p&gt;But this method starts to look a bit shaky when we include the #1 ranked team in the world (a crown recently claimed by Wales at the time of writing). Not because Wales are particularly special, but because this algorithm massively favours lower rankings. I&#x27;d expect Wales to crush Uraguay (#19 in the world), but would &lt;em&gt;not&lt;/em&gt; expect them to have such an easy time against Australia (ranked #6). The ranking-based algorithm predicts &lt;em&gt;both&lt;/em&gt; matches would be walkovers:&lt;/p&gt;
&lt;div class=&quot;matches--solo&quot;&gt;
    &lt;div class=&quot;match&quot;&gt;
        &lt;span class=&quot;match__team&quot;&gt;
            &lt;span class=&quot;match__team-ranking&quot;&gt;1&lt;/span&gt;wal
        &lt;/span&gt;
        &lt;div class=&quot;match__bar&quot;&gt;
            &lt;div class=&quot;bar__inner bar__inner--0 bar__inner--win&quot; style=&quot;width: 95%;&quot;&gt;
                &lt;span class=&quot;bar__value&quot;&gt;95%&lt;/span&gt;
            &lt;/div&gt;
            &lt;div class=&quot;bar__inner bar__inner--1 bar__inner--loss&quot; style=&quot;width: 5%;&quot;&gt;
                &lt;span class=&quot;bar__value&quot;&gt;5%&lt;/span&gt;
            &lt;/div&gt;
            &lt;span class=&quot;match__bar-divider&quot;/&gt;
        &lt;/div&gt;
        &lt;span class=&quot;match__team match__team--last&quot;&gt;
            ura&lt;span class=&quot;match__team-ranking&quot;&gt;19&lt;/span&gt;
        &lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;match&quot;&gt;
        &lt;span class=&quot;match__team&quot;&gt;
            &lt;span class=&quot;match__team-ranking&quot;&gt;1&lt;/span&gt;wal
        &lt;/span&gt;
        &lt;div class=&quot;match__bar&quot;&gt;
            &lt;div class=&quot;bar__inner bar__inner--0 bar__inner--win&quot; style=&quot;width: 85.7%;&quot;&gt;
                &lt;span class=&quot;bar__value&quot;&gt;85.7%&lt;/span&gt;
            &lt;/div&gt;
            &lt;div class=&quot;bar__inner bar__inner--1 bar__inner--loss&quot; style=&quot;width: 14.3%;&quot;&gt;
                &lt;span class=&quot;bar__value&quot;&gt;14.3%&lt;/span&gt;
            &lt;/div&gt;
            &lt;span class=&quot;match__bar-divider&quot;/&gt;
        &lt;/div&gt;
        &lt;span class=&quot;match__team match__team--last&quot;&gt;
            aus&lt;span class=&quot;match__team-ranking&quot;&gt;6&lt;/span&gt;
        &lt;/span&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;And there&#x27;s another problem with using world rankings. Rankings, by their very nature, are ordinal. By ranking alone, the difference between #1 and #2 is the same as the difference between #2 and #3, and so on... Whereas in reality, some teams are much closer than their mere ranking would suggest.&lt;/p&gt;
&lt;h2 id=&quot;using-points-rather-than-ranking&quot; tabindex=&quot;-1&quot;&gt;Using points rather than ranking&lt;/h2&gt;
&lt;p&gt;A better metric to use as the base for our calculation would be &lt;em&gt;points&lt;/em&gt;. Word Rugby, the sport&#x27;s governing body, uses a points system to determine the world rankings. These points are based on match performance, and range from zero to one hundred (the top side generally has a rating of somewhere near 90 points). In late August 2019, Wales have 89.43 points and New Zealand have 89.40 - it&#x27;s tight at the top! Australia are on 84.05 and Uraguay have 65.18 points.&lt;/p&gt;
&lt;p&gt;Using &lt;code&gt;points&lt;/code&gt; rather than &lt;code&gt;rank&lt;/code&gt; changes our algorithm slightly (we no longer need to invert the team&#x27;s value, as higher points are better).&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;const chanceOfWinning = (teamPoints, oppositionPoints) =&gt; {
    const combinedRanks = teamPoints + oppositionPoints;
    const percentage = (teamPoints / combinedRanks) * 100;
    return percentage.toFixed(1);
};
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Plumbing our examples into this calculation produces a much tighter set of matches. The end results are still the same (in this system, a team with higher points will always beat a team with lower points, in just the same way as the team with the better ranking always wins).&lt;/p&gt;
&lt;div class=&quot;matches--solo&quot;&gt;
    &lt;div class=&quot;match match--solo&quot;&gt;
        &lt;span class=&quot;match__team&quot;&gt;
            &lt;span class=&quot;match__team-ranking&quot;&gt;2&lt;/span&gt;nzl
        &lt;/span&gt;
        &lt;div class=&quot;match__bar&quot;&gt;
            &lt;div class=&quot;bar__inner bar__inner--0 bar__inner--win&quot; style=&quot;width: 55.4%;&quot;&gt;
                &lt;span class=&quot;bar__value&quot;&gt;55.4%&lt;/span&gt;
            &lt;/div&gt;
            &lt;div class=&quot;bar__inner bar__inner--1 bar__inner--loss&quot; style=&quot;width: 44.6%;&quot;&gt;
                &lt;span class=&quot;bar__value&quot;&gt;44.6%&lt;/span&gt;
            &lt;/div&gt;
            &lt;span class=&quot;match__bar-divider&quot;/&gt;
        &lt;/div&gt;
        &lt;span class=&quot;match__team match__team--last&quot;&gt;
            ita&lt;span class=&quot;match__team-ranking&quot;&gt;13&lt;/span&gt;
        &lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;match match--solo&quot;&gt;
        &lt;span class=&quot;match__team&quot;&gt;
            &lt;span class=&quot;match__team-ranking&quot;&gt;16&lt;/span&gt;sam
        &lt;/span&gt;
        &lt;div class=&quot;match__bar&quot;&gt;
            &lt;div class=&quot;bar__inner bar__inner--0 bar__inner--win&quot; style=&quot;width: 51.6%;&quot;&gt;
                &lt;span class=&quot;bar__value&quot;&gt;51.6%&lt;/span&gt;
            &lt;/div&gt;
            &lt;div class=&quot;bar__inner bar__inner--1 bar__inner--loss&quot; style=&quot;width: 48.4%;&quot;&gt;
                &lt;span class=&quot;bar__value&quot;&gt;48.4%&lt;/span&gt;
            &lt;/div&gt;
            &lt;span class=&quot;match__bar-divider&quot;/&gt;
        &lt;/div&gt;
        &lt;span class=&quot;match__team match__team--last&quot;&gt;
            rus&lt;span class=&quot;match__team-ranking&quot;&gt;20&lt;/span&gt;
        &lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;match&quot;&gt;
        &lt;span class=&quot;match__team&quot;&gt;
            &lt;span class=&quot;match__team-ranking&quot;&gt;1&lt;/span&gt;wal
        &lt;/span&gt;
        &lt;div class=&quot;match__bar&quot;&gt;
            &lt;div class=&quot;bar__inner bar__inner--0 bar__inner--win&quot; style=&quot;width: 57.8%;&quot;&gt;
                &lt;span class=&quot;bar__value&quot;&gt;57.8%&lt;/span&gt;
            &lt;/div&gt;
            &lt;div class=&quot;bar__inner bar__inner--1 bar__inner--loss&quot; style=&quot;width: 42.2%;&quot;&gt;
                &lt;span class=&quot;bar__value&quot;&gt;42.2%&lt;/span&gt;
            &lt;/div&gt;
            &lt;span class=&quot;match__bar-divider&quot;/&gt;
        &lt;/div&gt;
        &lt;span class=&quot;match__team match__team--last&quot;&gt;
            ura&lt;span class=&quot;match__team-ranking&quot;&gt;19&lt;/span&gt;
        &lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;match&quot;&gt;
        &lt;span class=&quot;match__team&quot;&gt;
            &lt;span class=&quot;match__team-ranking&quot;&gt;1&lt;/span&gt;wal
        &lt;/span&gt;
        &lt;div class=&quot;match__bar&quot;&gt;
            &lt;div class=&quot;bar__inner bar__inner--0 bar__inner--win&quot; style=&quot;width: 51.6%;&quot;&gt;
                &lt;span class=&quot;bar__value&quot;&gt;51.6%&lt;/span&gt;
            &lt;/div&gt;
            &lt;div class=&quot;bar__inner bar__inner--1 bar__inner--loss&quot; style=&quot;width: 48.4%;&quot;&gt;
                &lt;span class=&quot;bar__value&quot;&gt;48.4%&lt;/span&gt;
            &lt;/div&gt;
            &lt;span class=&quot;match__bar-divider&quot;/&gt;
        &lt;/div&gt;
        &lt;span class=&quot;match__team match__team--last&quot;&gt;
            aus&lt;span class=&quot;match__team-ranking&quot;&gt;6&lt;/span&gt;
        &lt;/span&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;These results look a little better than the ranking-only method. The delta between WAL/URA and WAL/AUS looks more realistic, and whoever is in the #1 spot has less of an unfair advantage. But now the &lt;em&gt;amounts&lt;/em&gt; look wrong. Any theory that gives Italy a 44.6% of beating New Zealand &lt;strong&gt;must&lt;/strong&gt; be inaccurate.&lt;/p&gt;
&lt;h2 id=&quot;increasing-the-weighting&quot; tabindex=&quot;-1&quot;&gt;Increasing the weighting&lt;/h2&gt;
&lt;p&gt;The points-based system is a better reflection of the team&#x27;s relative chance of winning, but to my eyes the results aren&#x27;t extreme enough. It gives too much credit to the lower-tier teams, and not enough to the top-tier ones. For the calculation to better match my expectations, it needs to favour the teams at the top of the rankings. Not only that, but it needs to do it &lt;em&gt;progressively&lt;/em&gt; - so a team in the middle gets a bit of a boost, but not as much as those at the top get.&lt;/p&gt;
&lt;p&gt;I need to write a function that will adjust the points value of each team. The easiest way to get the result I&#x27;m after is to multiply each team&#x27;s points by a power.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;const adjustment = num =&gt; Math.pow(num, 5);
&lt;/code&gt;&lt;/pre&gt;
&amp;lt;p %=&quot;&quot; include=&quot;&quot; rugbyrank-graph.njk%=&quot;&quot;&gt;
&lt;!-- &lt;div id=&quot;rugby-rank-graph&quot;&gt;&lt;/div&gt; --&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;const chanceOfWinning = (teamPoints, oppositionPoints) =&gt; {
    const combinedRanks = adjustment(teamPoints) + adjustment(oppositionPoints);
    const percentage = (adjustment(teamPoints) / combinedRanks) * 100;
    return percentage.toFixed(1);
};
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I started with &lt;code&gt;2&lt;/code&gt; as the exponent, and that was better than nothing, but still not enough. &lt;code&gt;10&lt;/code&gt; was too extreme, and in the end I settled on &lt;code&gt;5&lt;/code&gt;. Increasing each team&#x27;s points by a power of &lt;code&gt;5&lt;/code&gt; gave me a set of probabilities that looked about right. That formula added just enough of a notch in the middle of the graph - and thereby increasing the likelihood of a top-tier team beating a lower-tier one.&lt;/p&gt;
&lt;div class=&quot;matches--solo&quot;&gt;
    &lt;div class=&quot;match&quot;&gt;
        &lt;span class=&quot;match__team&quot;&gt;
            &lt;span class=&quot;match__team-ranking&quot;&gt;2&lt;/span&gt;nzl
        &lt;/span&gt;
        &lt;div class=&quot;match__bar&quot;&gt;
            &lt;div class=&quot;bar__inner bar__inner--0 bar__inner--win&quot; style=&quot;width: 74.6%;&quot;&gt;
                &lt;span class=&quot;bar__value&quot;&gt;74.6%&lt;/span&gt;
            &lt;/div&gt;
            &lt;div class=&quot;bar__inner bar__inner--1 bar__inner--loss&quot; style=&quot;width: 25.4%;&quot;&gt;
                &lt;span class=&quot;bar__value&quot;&gt;25.4%&lt;/span&gt;
            &lt;/div&gt;
            &lt;span class=&quot;match__bar-divider&quot;/&gt;
        &lt;/div&gt;
        &lt;span class=&quot;match__team match__team--last&quot;&gt;
            ita&lt;span class=&quot;match__team-ranking&quot;&gt;13&lt;/span&gt;
        &lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;match match--solo&quot;&gt;
        &lt;span class=&quot;match__team&quot;&gt;
            &lt;span class=&quot;match__team-ranking&quot;&gt;16&lt;/span&gt;sam
        &lt;/span&gt;
        &lt;div class=&quot;match__bar&quot;&gt;
            &lt;div class=&quot;bar__inner bar__inner--0 bar__inner--win&quot; style=&quot;width: 57.9%;&quot;&gt;
                &lt;span class=&quot;bar__value&quot;&gt;57.9%&lt;/span&gt;
            &lt;/div&gt;
            &lt;div class=&quot;bar__inner bar__inner--1 bar__inner--loss&quot; style=&quot;width: 42.1%;&quot;&gt;
                &lt;span class=&quot;bar__value&quot;&gt;42.1%&lt;/span&gt;
            &lt;/div&gt;
            &lt;span class=&quot;match__bar-divider&quot;/&gt;
        &lt;/div&gt;
        &lt;span class=&quot;match__team match__team--last&quot;&gt;
            rus&lt;span class=&quot;match__team-ranking&quot;&gt;20&lt;/span&gt;
        &lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;match&quot;&gt;
        &lt;span class=&quot;match__team&quot;&gt;
            &lt;span class=&quot;match__team-ranking&quot;&gt;1&lt;/span&gt;wal
        &lt;/span&gt;
        &lt;div class=&quot;match__bar&quot;&gt;
            &lt;div class=&quot;bar__inner bar__inner--0 bar__inner--win&quot; style=&quot;width: 82.9%;&quot;&gt;
                &lt;span class=&quot;bar__value&quot;&gt;82.9%&lt;/span&gt;
            &lt;/div&gt;
            &lt;div class=&quot;bar__inner bar__inner--1 bar__inner--loss&quot; style=&quot;width: 17.1%;&quot;&gt;
                &lt;span class=&quot;bar__value&quot;&gt;17.1%&lt;/span&gt;
            &lt;/div&gt;
            &lt;span class=&quot;match__bar-divider&quot;/&gt;
        &lt;/div&gt;
        &lt;span class=&quot;match__team match__team--last&quot;&gt;
            ura&lt;span class=&quot;match__team-ranking&quot;&gt;19&lt;/span&gt;
        &lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;match&quot;&gt;
        &lt;span class=&quot;match__team&quot;&gt;
            &lt;span class=&quot;match__team-ranking&quot;&gt;1&lt;/span&gt;wal
        &lt;/span&gt;
        &lt;div class=&quot;match__bar&quot;&gt;
            &lt;div class=&quot;bar__inner bar__inner--0 bar__inner--win&quot; style=&quot;width: 57.7%;&quot;&gt;
                &lt;span class=&quot;bar__value&quot;&gt;57.7%&lt;/span&gt;
            &lt;/div&gt;
            &lt;div class=&quot;bar__inner bar__inner--1 bar__inner--loss&quot; style=&quot;width: 42.3%;&quot;&gt;
                &lt;span class=&quot;bar__value&quot;&gt;42.3%&lt;/span&gt;
            &lt;/div&gt;
            &lt;span class=&quot;match__bar-divider&quot;/&gt;
        &lt;/div&gt;
        &lt;span class=&quot;match__team match__team--last&quot;&gt;
            aus&lt;span class=&quot;match__team-ranking&quot;&gt;6&lt;/span&gt;
        &lt;/span&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;results-for-all-the-pools&quot; tabindex=&quot;-1&quot;&gt;Results for all the pools&lt;/h2&gt;
&lt;p&gt;This is of course only based on my experience of rugby and my own highly subjective opinions. But it is still anchored in reality because I&#x27;m using the points as a starting point, and treating each team equally (as much as I &lt;em&gt;want&lt;/em&gt; to give England a boost, the algorithm doesn&#x27;t support it).&lt;/p&gt;
&lt;p&gt;Ironically, this calculation shows that the draw for this world cup &lt;em&gt;does&lt;/em&gt; give England a slight boost. The top 8 teams make it through to the quarter finals as you would expect. But when it comes to the semis, 4&lt;sup&gt;th&lt;/sup&gt; ranked South Africa miss out, while 5&lt;sup&gt;th&lt;/sup&gt; ranked England manage to sneak in. A side-effect of the pools being drawn years before the event. On the other hand, it probably shows that the draw-process works fairly well if, given all the top 8 make it into the quarters (or at least shows that the rankings have been comparatively static).&lt;/p&gt;
&lt;p&gt;I&#x27;m not expecting these predictions to come true - there&#x27;s a lot more to success in rugby than simple rankings. But I do find this kind of objective analysis useful for setting expectations. Looking at these predictions, I&#x27;ll make more of an effort to see matches I might otherwise have passed on. Tonga vs. USA, for instance, looks like it&#x27;ll be a close one. As do Scotland vs. Japan and New Zealand vs. South Africa (although after this year&#x27;s Championship you don&#x27;t need an algorithm to tell you that&#x27;ll be a real grudge match!).&lt;/p&gt;
&lt;div class=&quot;wrapper--rugby&quot;&gt;
&lt;div class=&quot;pool&quot;&gt;
&lt;h3 id=&quot;pool-a-matches&quot; tabindex=&quot;-1&quot;&gt;Pool A matches&lt;/h3&gt;
&amp;lt;p %=&quot;&quot; include=&quot;&quot; rugbypool-a.njk%=&quot;&quot;&gt;
&lt;h3 id=&quot;pool-a-results&quot; tabindex=&quot;-1&quot;&gt;Pool A results&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Pos.&lt;/th&gt;
&lt;th&gt;Team&lt;/th&gt;
&lt;th&gt;Wins&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1st&lt;/td&gt;
&lt;td&gt;Ireland&lt;/td&gt;
&lt;td&gt;4 wins&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2nd&lt;/td&gt;
&lt;td&gt;Scotland&lt;/td&gt;
&lt;td&gt;3 wins&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3rd&lt;/td&gt;
&lt;td&gt;Japan&lt;/td&gt;
&lt;td&gt;2 wins&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4th&lt;/td&gt;
&lt;td&gt;Samoa&lt;/td&gt;
&lt;td&gt;1 win&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5th&lt;/td&gt;
&lt;td&gt;Russia&lt;/td&gt;
&lt;td&gt;0 wins&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div class=&quot;pool&quot;&gt;
&lt;h3 id=&quot;pool-b-matches&quot; tabindex=&quot;-1&quot;&gt;Pool B matches&lt;/h3&gt;
&amp;lt;p %=&quot;&quot; include=&quot;&quot; rugbypool-b.njk%=&quot;&quot;&gt;
&lt;h3 id=&quot;pool-b-results&quot; tabindex=&quot;-1&quot;&gt;Pool B results&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Pos.&lt;/th&gt;
&lt;th&gt;Team&lt;/th&gt;
&lt;th&gt;Wins&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1st&lt;/td&gt;
&lt;td&gt;New Zealand&lt;/td&gt;
&lt;td&gt;4 wins&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2nd&lt;/td&gt;
&lt;td&gt;South Africa&lt;/td&gt;
&lt;td&gt;3 wins&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3rd&lt;/td&gt;
&lt;td&gt;Italy&lt;/td&gt;
&lt;td&gt;2 wins&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4th&lt;/td&gt;
&lt;td&gt;Canada&lt;/td&gt;
&lt;td&gt;1 win&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5th&lt;/td&gt;
&lt;td&gt;Namibia&lt;/td&gt;
&lt;td&gt;0 wins&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;wrapper--rugby&quot;&gt;
&lt;div class=&quot;pool&quot;&gt;
&lt;h3 id=&quot;pool-c-matches&quot; tabindex=&quot;-1&quot;&gt;Pool C matches&lt;/h3&gt;
&amp;lt;p %=&quot;&quot; include=&quot;&quot; rugbypool-c.njk%=&quot;&quot;&gt;
&lt;h3 id=&quot;pool-c-results&quot; tabindex=&quot;-1&quot;&gt;Pool C results&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Pos.&lt;/th&gt;
&lt;th&gt;Team&lt;/th&gt;
&lt;th&gt;Wins&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1st&lt;/td&gt;
&lt;td&gt;England&lt;/td&gt;
&lt;td&gt;4 wins&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2nd&lt;/td&gt;
&lt;td&gt;France&lt;/td&gt;
&lt;td&gt;3 wins&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3rd&lt;/td&gt;
&lt;td&gt;Argentina&lt;/td&gt;
&lt;td&gt;2 wins&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4th&lt;/td&gt;
&lt;td&gt;United States&lt;/td&gt;
&lt;td&gt;1 win&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5th&lt;/td&gt;
&lt;td&gt;Tonga&lt;/td&gt;
&lt;td&gt;0 wins&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div class=&quot;pool&quot;&gt;
&lt;h3 id=&quot;pool-d-matches&quot; tabindex=&quot;-1&quot;&gt;Pool D matches&lt;/h3&gt;
&amp;lt;p %=&quot;&quot; include=&quot;&quot; rugbypool-d.njk%=&quot;&quot;&gt;
&lt;h3 id=&quot;pool-d-results&quot; tabindex=&quot;-1&quot;&gt;Pool D results&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Pos.&lt;/th&gt;
&lt;th&gt;Team&lt;/th&gt;
&lt;th&gt;Wins&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1st&lt;/td&gt;
&lt;td&gt;Wales&lt;/td&gt;
&lt;td&gt;4 wins&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2nd&lt;/td&gt;
&lt;td&gt;Australia&lt;/td&gt;
&lt;td&gt;3 wins&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3rd&lt;/td&gt;
&lt;td&gt;Fiji&lt;/td&gt;
&lt;td&gt;3 wins&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4th&lt;/td&gt;
&lt;td&gt;Georgia&lt;/td&gt;
&lt;td&gt;1 win&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5th&lt;/td&gt;
&lt;td&gt;Uraguay&lt;/td&gt;
&lt;td&gt;0 wins&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;!-- &lt;div id=&quot;rugby-pools&quot;&gt;&lt;/div&gt; --&gt;</content></entry><entry><title>Writing well is essential. Try your best to get good at it</title><link href="https://tomhazledine.com/writing-well/"/><updated>2018-07-01T00:00:00Z</updated><id>https://tomhazledine.com/writing-well/</id><content type="html">&lt;p&gt;I’ve worked hard on my writing style, and continually reap the benefits of having done so. Email and instant messages take &lt;em&gt;more&lt;/em&gt; work than face-to-face communication, and being able to convey a point clearly and concisely is an essential skill. Writing documentation is even harder, but just as important. I’ve had to navigate poorly documented code in the past, and try my best to ensure no-one has the same experience when trying to decipher code I’ve written.&lt;/p&gt;
&lt;p&gt;I’m not saying that I’m a good writer - I’ve got a long long way to go on that front. But over the last few years I’ve definitely improved, and I can quantify that improvement by looking at the decrease in communication-based foul-ups at work.&lt;/p&gt;
&lt;p&gt;In the past my communications with clients would often be misinterpreted. I can attribute some of the blame to fact that clients are often fundamentally uninterested in the minutiae of the product they’ve commissioned. Busy CEOs probably don’t need to understand the nuances of browser caching&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt;, but they do need to know how to be sure they’re looking at the correct version of their website. Explaining technical details to people untrained in the technology is a fundamentally hard problem.&lt;/p&gt;
&lt;p&gt;There’s no escaping email. The people I need to talk to are busy, and I’m a socially awkward developer who’ll do anything to dodge actually picking up a phone. But I do need to teach the client to use the new features we’ve built for them, and they need to make me understand the problem they’re really having (rather than just the symptom they’re able to see and describe).&lt;/p&gt;
&lt;p&gt;Professional communication is a non-trivial problem, but over the years I’ve developed a couple of coping strategies. I’ve had to master two main skills that appear to be mutually exclusive: &lt;em&gt;brevity&lt;/em&gt;, and &lt;em&gt;tactical repetition&lt;/em&gt;.&lt;/p&gt;
&lt;h2 id=&quot;keep-your-writing-short&quot; tabindex=&quot;-1&quot;&gt;Keep your writing short&lt;/h2&gt;
&lt;p&gt;Everyone’s heart sinks when they open an email and are presented with an essay. The dreaded “wall of text” will put off even the most keen communicator. Particularly when explaining a fix for a particularly tricky bug, my instinct is to go deep and detailed&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn2&quot; id=&quot;fnref2&quot;&gt;[2]&lt;/a&gt;&lt;/sup&gt;. Learning to cut out the unnecessary details and get straight to the point took me a long time. The people I’m writing to aren’t as interested in the nuances as I am. They want to know what they need to do, and how they can do it quickly.&lt;/p&gt;
&lt;h2 id=&quot;tactically-repeat-the-important-points&quot; tabindex=&quot;-1&quot;&gt;Tactically repeat the important points&lt;/h2&gt;
&lt;p&gt;Alongside this newfound concision, I’ve also got great mileage from learning when to tactically repeat myself. If there’s a particularly complex point to get across, the key is to say the same thing in two different ways. The scope of clients to misinterpret a set of instructions is seemingly limitless, but I’ve found they’re less likely to misinterpret two different sentences &lt;em&gt;in the same way&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Tell them something once, and they’ll just live with whatever garbled interpretation hits their brain first. Tell them the same thing in two different ways, and they’ll either get it straight away (the happy path!) or at the very least notice that their interpretation is confusing. Then they’ll actually tell you they don’t understand, rather than just muddling along.&lt;/p&gt;
&lt;p&gt;If they don’t understand but also let you &lt;em&gt;know&lt;/em&gt; they don’t understand, that’s fine. Sometimes things need repeating or unpicking (and sometimes my explanations are simply too confusing, and I need to work harder to find the real issue at hand). If these confusions are picked up early, everyone ends up better off.&lt;/p&gt;
&lt;p&gt;As a bonus tip, I picked up a useful phrase from the world of solicitors: “For the avoidance of doubt…”. That one comes in handy when you need to repeat something back to someone, but want them to know why you’re doing it. Soften it if you need to, but never hesitate to say “so just to make sure I’ve got this straight…” or something similar.&lt;/p&gt;
&lt;p&gt;Using these two strategies has vastly improved my work life; the return on investment from improving my writing is far greater than from learning a new programming language. Being good at your job is, of course, essential. But a marginal gain in writing ability will give better results than a marginal gain in coding ability.&lt;/p&gt;
&lt;p&gt;And it doesn’t just help with clients. Most work-place communication (for me) happens over Slack now (other messaging platforms are available). And let’s not forget every developer’s favourite task; creating the docs. Writing good documentation for your code saves hours and hours of developer-time in the long run. It’s not enough to ensure every method has it’s parameters written down: you have to explain how the whole system fits together. Explaining hard things is hard, but we need to do it.&lt;/p&gt;
&lt;p&gt;People misunderstand each other all the time, and if it goes unnoticed the consequences can be time consuming, frustrating, and expensive. If I can give one piece of advice to anyone starting out in a technical field, it’s this: work on your communication skills as much as you can. Write, write, write.&lt;/p&gt;
&lt;hr class=&quot;footnotes-sep&quot;/&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn1&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;Good luck if you ever have to hear a CEO pronounce “cache”. &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn2&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;As &lt;a href=&quot;https://www.youtube.com/watch?v=zSgiXGELjbc&quot;&gt;Carl Sagan said&lt;/a&gt;, “if you wish to make an apple pie from scratch, you must first invent the universe.” &lt;a href=&quot;#fnref2&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;</content></entry><entry><title>You can now install Picobel using NPM</title><link href="https://tomhazledine.com/you-can-now-install-picobel-using-npm/"/><updated>2017-06-28T00:00:00Z</updated><id>https://tomhazledine.com/you-can-now-install-picobel-using-npm/</id><content type="html">&lt;p&gt;I’ve finally published Picobel as a node package. Picobel is my open source JavaScript tool for turning HTML &lt;code&gt;&amp;lt;audio&gt;&lt;/code&gt; tags into styleable markup (a.k.a. regular divs and spans that you can target with your CSS).&lt;/p&gt;
&lt;p&gt;For a while now it’s been possible to use Picobel by directly including the script in your project (just like all those old-school jQuery plugins). But it’s been a long time since I included a script or lib like that. My &lt;code&gt;package.json&lt;/code&gt; rules the roost now, and almost everything I use gets installed with &lt;code&gt;npm install PACKAGE_NAME&lt;/code&gt;. No doubt your workflow has advanced in a similar manner. With that in mind, it seemed foolish not to update Picobel to fit in with a more modern development workflow.&lt;/p&gt;
&lt;h2 id=&quot;what%E2%80%99s-changed%3F&quot; tabindex=&quot;-1&quot;&gt;What’s changed?&lt;/h2&gt;
&lt;p&gt;For the time being, there are no breaking changes to Picobel’s core functionality. If you have any &lt;code&gt;&amp;lt;audio&gt;&lt;/code&gt; tags on a web page, call &lt;code&gt;Picobel();&lt;/code&gt; in your script and Picobel will replace those audio elements with markup that you can style directly. The only difference is how you get access to that &lt;code&gt;Picobel&lt;/code&gt; function.&lt;/p&gt;
&lt;p&gt;You can still include the script directly if you like, but now you’ll need to reference the &lt;code&gt;picobel.legacy.js&lt;/code&gt; file instead. But for all you cool cats on the NPM bandwagon, things are much nicer...&lt;/p&gt;
&lt;p&gt;Install Picobel in your project with &lt;code&gt;npm install picobel —save&lt;/code&gt; and then import it into your JS file with &lt;code&gt;import Picobel from ‘picobel’;&lt;/code&gt;. Then you’re free to call the &lt;code&gt;Picobel()&lt;/code&gt; function just like before.&lt;/p&gt;
&lt;p&gt;For more information about using options and themes with Picobel, take a look at the README.md on the project’s GitHub page.&lt;/p&gt;
&lt;h2 id=&quot;what%E2%80%99s-on-the-horizon%3F&quot; tabindex=&quot;-1&quot;&gt;What’s on the horizon?&lt;/h2&gt;
&lt;p&gt;This update to Picobel is the precursor to quite a few changes. It’s part one of an ongoing project to convert Picobel to ES6, expand the test coverage to all Picobel’s internal methods, and get around to adding some requested new features and themes.&lt;/p&gt;</content></entry><entry><title>Recommended Listening: my favourite podcasts</title><link href="https://tomhazledine.com/podcasts-recommended-listening/"/><updated>2017-05-29T00:00:00Z</updated><id>https://tomhazledine.com/podcasts-recommended-listening/</id><content type="html">&lt;p&gt;I have a long commute, so blast through at least a couple of hours of podcasts every day. I enjoy polished efforts like those from Gimlet Media and NPR, but for me the real gold lies in the more unstructured efforts. Without any constraints of format or time, the best podcasts get to dive deep into topics that wouldn&#x27;t otherwise get covered.&lt;/p&gt;
&lt;p&gt;The recent &quot;podcast renaissance&quot; has felt like a vindication. I&#x27;ve been trying to get my peers to listen to podcasts for years (I even made my own podcast back in &#x27;06, but the less said about that the better...). Following the mainstream breakthrough of Serial and the prevalence of shows with high production values (like those from Gimlet), the format is finally getting the attention it deserves.&lt;/p&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;tech-podcasts&quot; tabindex=&quot;-1&quot;&gt;Tech Podcasts&lt;/h2&gt;
&lt;p&gt;As a developer, I&#x27;m naturally drawn to the more technical end of the spectrum. I&#x27;m happiest when listening to an hour-long discussion about the intricacies of a new file format...&lt;/p&gt;
&lt;h3 id=&quot;shoptalk-show&quot; tabindex=&quot;-1&quot;&gt;&lt;a href=&quot;http://shoptalkshow.com/&quot;&gt;ShopTalk Show&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Answering listener questions about front-end web development - alternate topic-based interviews and &quot;rapid fire&quot; Q&amp;amp;A shows.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Listen first:&lt;/em&gt; &lt;a href=&quot;http://shoptalkshow.com/episodes/254-webvr-josh-carpenter-kevin-ngo/&quot;&gt;The Web-VR episode&lt;/a&gt; is a good example of the general tone of ShopTalk, but the best-ever episode was when host Chris &lt;a href=&quot;http://shoptalkshow.com/episodes/special-one-one-hacker/&quot;&gt;interviewed the guy who hacked his site&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&quot;atp&quot; tabindex=&quot;-1&quot;&gt;&lt;a href=&quot;http://atp.fm/&quot;&gt;ATP&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Discussion show about all things Apple. If you like geeking-out about file systems and enjoy endless debate about the next Mac Pro, this is the show for you.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Listen first:&lt;/em&gt; Best to just jump in at the &lt;a href=&quot;http://atp.fm/&quot;&gt;latest episode&lt;/a&gt;, but I they go &quot;big&quot; on WWDC (Apple&#x27;s developer conference), so don&#x27;t start with one of those as they&#x27;re not representative of the rest of the episodes.&lt;/p&gt;
&lt;h3 id=&quot;codepen-radio&quot; tabindex=&quot;-1&quot;&gt;&lt;a href=&quot;https://blog.codepen.io/radio/&quot;&gt;CodePen Radio&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;The team behind the CodePen web app give a behind the scenes look at what it&#x27;s like to run a tech startup.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Listen first:&lt;/em&gt; The &lt;a href=&quot;https://blog.codepen.io/2016/07/13/098-animation/&quot;&gt;episode about animation&lt;/a&gt; makes a good jumping-off point, but they cover a wide range of topics from server-setups to getting VC-funding to hiring to managing an online &quot;community&quot;, etc...&lt;/p&gt;
&lt;h3 id=&quot;a16z&quot; tabindex=&quot;-1&quot;&gt;&lt;a href=&quot;http://a16z.com/podcasts/&quot;&gt;a16z&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Archetypal Silicon Valley VC firm Andreessen Horowitz (a16z) present discussions on the hot tech topics of the day.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Listen first:&lt;/em&gt; A recent episode about &lt;a href=&quot;http://a16z.com/2017/04/08/culture-open-source-community/&quot;&gt;Open Source&lt;/a&gt; was pretty good, but the episodes that feature the company founders, Marc Andreessen and Ben Horowitz are worth digging for.&lt;/p&gt;
&lt;h3 id=&quot;the-creative-coding-podcast&quot; tabindex=&quot;-1&quot;&gt;&lt;a href=&quot;http://creativecodingpodcast.com/&quot;&gt;The Creative Coding Podcast&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;A mix of game-dev tips&#x27;n&#x27;tricks and insights into the world of hardware hacking with Rpi-zeros, Arduinos, etc. (the clue is in the name!).&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Listen first:&lt;/em&gt; I learnt a lot about how old-school Nintendo light-guns (Duck Hunt FTW!) worked from &lt;a href=&quot;http://creativecodingpodcast.com/hacking-classic-nintendo-guns-and-going-viral/&quot;&gt;this episode&lt;/a&gt;.&lt;/p&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;startups-%26-business-podcasts&quot; tabindex=&quot;-1&quot;&gt;Startups &amp;amp; Business Podcasts&lt;/h2&gt;
&lt;p&gt;I&#x27;ve long since discarded any genuine plans of entrepreneurship in favour of the life of a happy drone. But somewhere deep down the itch is still there, and I keep it in check by living vicariously through the exploits of others.&lt;/p&gt;
&lt;h3 id=&quot;startup&quot; tabindex=&quot;-1&quot;&gt;&lt;a href=&quot;https://gimletmedia.com/startup/&quot;&gt;Startup&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;This is the big daddy. Not only a good series about what it&#x27;s like to start a business, but also a look into the inner machinations of podcasting itself. Meta. The more recent seasons look at other businesses, but season one was all about the founding of Gimlet Media. Host Alex Blumberg had a vision for what a podcast company could be, and documented his journey to get there.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;First listen:&lt;/em&gt; This is a show that requires &lt;a href=&quot;https://gimletmedia.com/episode/1-how-not-to-pitch-a-billionaire/&quot;&gt;starting at the very beginning&lt;/a&gt;. Listening to Alex mess up a pitch to infamous VC Chris Sacca is radio gold, and the whole story is expertly told.&lt;/p&gt;
&lt;h3 id=&quot;the-tim-ferriss-show&quot; tabindex=&quot;-1&quot;&gt;&lt;a href=&quot;http://tim.blog/podcast/&quot;&gt;The Tim Ferriss Show&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Tim&#x27;s approach to life is &lt;a href=&quot;https://twitter.com/unsuiii/status/845393423188275200&quot;&gt;very easy to mock&lt;/a&gt;, and in many ways I find him a frustrating person to listen to. Yet he obliquely manages to get more out of his guests than most interviewers. He asks the questions I&#x27;d like to ask, and always pushes for more detail when I want to hear more detail.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;First listen:&lt;/em&gt; The show works best when Tim gets total buy-in from his guest. The Seth Godin episodes are always good listens, but Seth is all about inspiring great work in others. I prefer to be inspired by stories straight from the horses mouth, so my favourite episode so far is probably the first &lt;a href=&quot;http://tim.blog/2015/02/09/matt-mullenweg/&quot;&gt;Matt Mullenweg interview&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&quot;planet-money&quot; tabindex=&quot;-1&quot;&gt;&lt;a href=&quot;http://www.npr.org/podcasts/510289/planet-money&quot;&gt;Planet Money&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;This one straddles the line between &quot;business&quot; and &quot;general interest&quot;. The stories are always interesting, and always have an economics angle to them. Much less &quot;actionable&quot; that the insights you get from the Tim Ferriss Show, for instance, but learning more about how the world around us works never did me any harm.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;First listen:&lt;/em&gt; Episode #762 &quot;The Fine Print&quot; tells three short stories about what happens when you actually read the fine print. All the episodes are short, but generally tell one story. This trio serves as a nice potted introduction to the show&#x27;s style.&lt;/p&gt;
&lt;h3 id=&quot;boagworld&quot; tabindex=&quot;-1&quot;&gt;&lt;a href=&quot;https://boagworld.com/show/&quot;&gt;Boagworld&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;I used to class this show as a tech podcast, but in reality it&#x27;s much more focused on the mechanics of running a web business. Regular hosts Paul and Marcus are joined by a revolving door of guests, and each season has an over-arching theme that guides the conversations.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;First listen:&lt;/em&gt; The &lt;a href=&quot;https://boagworld.com/season/15/&quot;&gt;15&lt;sup&gt;th&lt;/sup&gt; season&lt;/a&gt; was all about digital project management. When the season-wide topic was announced I groaned - could they have found a more boring subject to drag out over thirteen episodes?! To my surprise, however, it lead to a whole series of fascinating discussions.&lt;/p&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;general-interest-podcasts&quot; tabindex=&quot;-1&quot;&gt;General Interest Podcasts&lt;/h2&gt;
&lt;p&gt;I&#x27;m not a 100%-mission-focused robot, so I do occasionally listen to podcasts for nothing more than the sheer enjoyment of it.&lt;/p&gt;
&lt;h3 id=&quot;reply-all&quot; tabindex=&quot;-1&quot;&gt;&lt;a href=&quot;https://gimletmedia.com/reply-all&quot;&gt;Reply All&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;New episodes of Reply All jump straight to the top of my &quot;must listen&quot; playlist. The subject matter is&lt;/p&gt;
&lt;p&gt;&lt;em&gt;First listen:&lt;/em&gt; The episode on phishing (appropriately called &lt;a href=&quot;https://gimletmedia.com/episode/97-what-kind-of-idiot-gets-phished/&quot;&gt;&quot;What Kind of Idiot Get&#x27;s Phished?&quot;&lt;/a&gt;) was a real eye-opener, but was presented by one of the show&#x27;s producers. The long-term charm of the show comes down to the interactions between regular hosts Alex &amp;amp; PJ, so listen to a few episodes to get a true flavour.&lt;/p&gt;
&lt;h3 id=&quot;more-or-less&quot; tabindex=&quot;-1&quot;&gt;&lt;a href=&quot;http://www.bbc.co.uk/programmes/b006qshd&quot;&gt;More or Less&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;In a similar vein to Planet Money, but a little more irreverent and more interested in unpicking topical issues. A look at the numbers and statistics in the news and in life.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;First listen:&lt;/em&gt; A recent episode on the &lt;a href=&quot;http://www.bbc.co.uk/programmes/p0500yjw&quot;&gt;Economics of Overbooking&lt;/a&gt; provided an interesting perspective on the United scandal (where a poor passenger was assaulted by staff on an overbooked flight).&lt;/p&gt;
&lt;h3 id=&quot;to-the-f&#x27;ing-future&quot; tabindex=&quot;-1&quot;&gt;&lt;a href=&quot;https://www.rocketjump.com/podcasts#tothefnfuture&quot;&gt;To The F&#x27;ing Future&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Epitome of American &quot;Bros&quot; talking nonsense, but some interesting discussions if you can get past the personalities. The basic idea is that they talk about &quot;the future&quot; of a different topic each week. Had a short run in 2013 and then stopped, which was a shame.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Listen first:&lt;/em&gt; &lt;a href=&quot;https://www.rocketjump.com/listen/episode-5-rob-auten-video-game-writer&quot;&gt;Episode #5 (with Rob Auten)&lt;/a&gt; is an interesting look at what the state-of-the-art in video-game plot and characterisation was like in 2013, and what they thought the future would hold. Even more interesting when viewed from 2017; we can see what played out and what sank without trace. Episode #6 about tattooing was also fascinating.&lt;/p&gt;
&lt;h3 id=&quot;song-exploder&quot; tabindex=&quot;-1&quot;&gt;&lt;a href=&quot;http://www.maximumfun.org/song-exploder&quot;&gt;Song Exploder&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;A geeky behind-the-scenes look at specific songs. Uses the original mixer-tracks to dig into how a song was constructed (often looking at early demos etc., too). If any of you remember the TV show Classic Albums, this is a lot like that but just for a single song.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Listen first:&lt;/em&gt; &lt;a href=&quot;http://www.maximumfun.org/song-exploder/song-exploder-no-22-books&quot;&gt;Episode #22: &quot;Smells Like Content&quot; by The Books&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;in-our-time&quot; tabindex=&quot;-1&quot;&gt;&lt;a href=&quot;http://www.bbc.co.uk/programmes/articles/598SVYJ2smP8qJlpH29y7Vj/podcasts&quot;&gt;In Our Time&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;The BBC at its best: three experts around a table explaining a topic to Melvin Bragg. A normal Radio 4 programme, but having the archive available as podcasts is a fantastic resource. I tend to find the maths ones the most interesting, but part of the appeal is being introduced to a topic I&#x27;d never have learnt about otherwise.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Listen first:&lt;/em&gt; Take your pick - the topics are so varied it&#x27;s hard to mark any individual episode as &quot;representative&quot;. The &lt;a href=&quot;http://www.bbc.co.uk/programmes/articles/598SVYJ2smP8qJlpH29y7Vj/podcasts&quot;&gt;IOT archive&lt;/a&gt; is a great place to start browsing.&lt;/p&gt;</content></entry><entry><title>Introducing Picobel.js - an audio player you can style with css</title><link href="https://tomhazledine.com/picobel-js-css-audio-player/"/><updated>2017-04-30T00:00:00Z</updated><id>https://tomhazledine.com/picobel-js-css-audio-player/</id><content type="html">&lt;p&gt;I&#x27;ve launched &lt;a href=&quot;https://audio.tomhazledine.com&quot;&gt;my first open source project&lt;/a&gt;. Well, okay, so it&#x27;s not my first and it&#x27;s also not 100% launched yet. Maybe I should explain...&lt;/p&gt;
&lt;h2 id=&quot;what-is-picobel.js%3F&quot; tabindex=&quot;-1&quot;&gt;What is Picobel.js?&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://audio.tomhazledine.com/&quot;&gt;Picobel.js&lt;/a&gt; (pronounced &lt;em&gt;peek-o-bell&lt;/em&gt;, as in &lt;em&gt;decibel&lt;/em&gt;) is a lightweight dependency-free Javascript tool that converts html &lt;code&gt;&amp;lt;audio&gt;&lt;/code&gt; tags into styleable markup.&lt;/p&gt;
&lt;h2 id=&quot;why-i-built-it&quot; tabindex=&quot;-1&quot;&gt;Why I built it&lt;/h2&gt;
&lt;p&gt;Back in the day, I ran a music-review blog&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt; that made heavy use of on-page audio players. At the time I was also diving deep into css. If you could style it, I would style it. Few things were more satisfying than getting a raw html element to look exactly how I wanted it to look. Before long most elements were bending to my will. Checkboxes and select inputs presented no problems. Range selectors were tricky, but eventually looked exactly how I wanted them. But the &lt;code&gt;&amp;lt;audio&gt;&lt;/code&gt; element always eluded me.&lt;/p&gt;
&lt;p&gt;Picobel is my attempt to get around the restrictions of the native html5 audio player. In it&#x27;s simplest form, Picobel finds any audio elements on a page and replaces them with &quot;regular&quot; markup (&lt;code&gt;div&lt;/code&gt;s and &lt;code&gt;spans&lt;/code&gt; etc.). I can then apply my own styles, and avoid the cross-browser inconsistencies of the &quot;shadow DOM&quot;.&lt;/p&gt;
&lt;p&gt;For good measure I&#x27;ve also included a selection of optional &quot;themes&quot;. If css trickery isn&#x27;t something that excites you, then you can pick a pre-made style and use that.&lt;/p&gt;
&lt;h2 id=&quot;my-open-source-debut&quot; tabindex=&quot;-1&quot;&gt;My open source debut&lt;/h2&gt;
&lt;p&gt;Ever since I first joined GitHub I&#x27;ve been storing the code for my personal projects &quot;in the open&quot;. But there is a big difference between technically public and actually &lt;em&gt;launching&lt;/em&gt; something. This is the first time I&#x27;ve moved beyond &quot;something that works for me&quot; towards &quot;something others can use&quot;.&lt;/p&gt;
&lt;p&gt;With Picobel.js I&#x27;ve thought a lot about &lt;em&gt;ease of use&lt;/em&gt;. Rather than being tightly coupled to my esoteric workflow, it works in any situation. I&#x27;ve also made a conscious effort to document my process. Rather than needing to examine the inside of my head, potential users can now simply &lt;a href=&quot;https://github.com/tomhazledine/picobel&quot;&gt;read the docs&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Picobel has a demo page complete with detailed installation instructions. There&#x27;s also a CodePen collection that serves as a gallery for all the pre-made themes&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn2&quot; id=&quot;fnref2&quot;&gt;[2]&lt;/a&gt;&lt;/sup&gt;. The GitHub project includes an official open source license (the MIT one, for now). And there is a widget built into the README that shows the current build-status. That&#x27;s right; this project even has tests!&lt;/p&gt;
&lt;h2 id=&quot;how-far-off-is-version-1.0%3F&quot; tabindex=&quot;-1&quot;&gt;How far off is version 1.0?&lt;/h2&gt;
&lt;p&gt;In my mind Picobel is &lt;em&gt;almost&lt;/em&gt; feature-complete. The only gaps I can think of involve edge-cases and failure states. The &quot;buffering&quot; state is currently rather primitive. There&#x27;s also no catch for when a file fails to load completely. But I&#x27;m happy to save these enhancements for Version 2.0. As it stands, Picobel &lt;em&gt;works&lt;/em&gt;. It&#x27;s much better to get it published and in the hands of users.&lt;/p&gt;
&lt;p&gt;So Picobel is on the cusp of hitting the 1.0 milestone. I &quot;soft launched&quot; it on Reddit a couple of weeks ago and gained a few early users. With another week or so of beta testing I&#x27;ll be ready to call version one of Picobel &lt;em&gt;finished&lt;/em&gt;. Now I need your help. If you could &lt;a href=&quot;https://audio.tomhazledine.com/&quot;&gt;try out Picobel&lt;/a&gt; and let me know what you think (good or bad), I&#x27;ll be eternally grateful.&lt;/p&gt;
&lt;hr class=&quot;footnotes-sep&quot;/&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn1&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;&lt;a href=&quot;http://eatenbymonsters.com&quot;&gt;Eaten by Monsters&lt;/a&gt; ran for about five years. Slowly customising every aspect of that site is what drew me into web-development. So it&#x27;s got a lot to answer for... &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn2&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;Picobel lets developers create &lt;em&gt;their own&lt;/em&gt; css styles for audio players. But by providing a range of pre-made themes the utility of this project is much increased. Having a &quot;plug and play&quot; option allows people to get results without mucking around with any css first. &lt;a href=&quot;#fnref2&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;</content></entry><entry><title>I changed my site&#x27;s font to Comic Sans as an April Fool. It was a disaster.</title><link href="https://tomhazledine.com/comic-sans-april-fool-disaster/"/><updated>2017-04-19T00:00:00Z</updated><id>https://tomhazledine.com/comic-sans-april-fool-disaster/</id><content type="html">&lt;p&gt;I like to think of myself as a mature typographer&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt;. I&#x27;ve spent years obsessing of the minutia of line-lengths and leading and kerning-pairs. &lt;a href=&quot;http://amzn.to/2o3zgne&quot;&gt;Bringhurst&#x27;s &lt;em&gt;Elements&lt;/em&gt;&lt;/a&gt; is always within arm&#x27;s reach of my desk, but of course it doesn&#x27;t need to be because I&#x27;ve got it memorized. I&#x27;ve even reached &lt;em&gt;acceptance&lt;/em&gt; in the &lt;a href=&quot;https://en.wikipedia.org/wiki/K%C3%BCbler-Ross_model&quot;&gt;Kübler-Ross &lt;em&gt;5-stages&lt;/em&gt;&lt;/a&gt; when it comes to Comic Sans.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Denial&lt;/strong&gt; - &quot;Nobody will use Comic Sans now that there are so many good alternatives to choose from.&quot;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Anger&lt;/strong&gt; - &quot;Why are all these idiots still using Comic Sans?!&quot;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Bargaining&lt;/strong&gt; - &quot;Let&#x27;s popularise tools that erase Comic Sans from people&#x27;s computers. If it&#x27;s not available as a default, they won&#x27;t use it.&quot;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Depression&lt;/strong&gt; - &quot;Why do we even bother designing things? Most people will choose Comic Sans. I don&#x27;t want to live on this planet anymore.&quot;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Acceptance&lt;/strong&gt; - &quot;Comic Sans is actually a well-constructed typeface, and is appropriate in certain situations.&quot;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;making-the-change&quot; tabindex=&quot;-1&quot;&gt;Making the change&lt;/h2&gt;
&lt;p&gt;For this year&#x27;s April Fools&#x27; Day I thought I&#x27;d take that acceptance one step further. Throwing caution to the wind, I set all the text on my website in Comic Sans. Thanks to my fancy front-end workflow, it was a simple task. My styles are all pre-compiled with SASS, so things like colours and font-families are all declared as &lt;code&gt;$variables&lt;/code&gt;&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn2&quot; id=&quot;fnref2&quot;&gt;[2]&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;// Fonts
$text: &quot;ff-tisa-web-pro&quot;, georgia, serif;
$code: Menlo, Monaco, &quot;Andale Mono&quot;, &quot;Lucida Console&quot;, &quot;Courier New&quot;, monospace;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Changing to Comic Sans (or more specifically &lt;code&gt;Comic Sans MS&lt;/code&gt;) meant swapping a couple of lines of code.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;// Fonts
$text: &quot;Comic Sans MS&quot;, cursive, sans-serif;
$code: &quot;Comic Sans MS&quot;, cursive, sans-serif;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;My front-end tooling makes pushing these changes to my live site a quick process, too. I committed my &quot;hilarious&quot; update into GIT and pushed that to the remote repository. Then I connected to my server by &lt;code&gt;ssh&lt;/code&gt;, ran &lt;code&gt;git pull&lt;/code&gt; to get the changes from the repo. The final step was to run &lt;code&gt;gulp sass&lt;/code&gt; to compile the production-ready CSS. Writing it all down like that makes it look more complicated than it is. Once you&#x27;ve run through the process a couple of times, deploying an update takes &amp;lt;5 minutes. Overkill for a quick two-liner like this, perhaps, but it works for updates of any size.&lt;/p&gt;
&lt;figure class=&quot;post-content__image-wrapper&quot;&gt;
    &lt;img class=&quot;post-content__image&quot; src=&quot;/images/articles/comic-sans-screenshot.png&quot; alt=&quot;My site, but set in Comic Sans.&quot;/&gt;
    &lt;figcaption class=&quot;post-content__caption&quot;&gt;My site, but set in Comic Sans.&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;h2 id=&quot;a-bit-of-background&quot; tabindex=&quot;-1&quot;&gt;A bit of background&lt;/h2&gt;
&lt;p&gt;I&#x27;m by no means the first person to have a little fun at the expense of Comic Sans&#x27; terrible reputation. In 2012 CERN spokesperson Fabiola Gianotti released some results from the ATLAS project. There was an &lt;a href=&quot;http://www.theverge.com/2012/7/4/3136652/cern-scientists-comic-sans-higgs-boson&quot;&gt;outcry from type-nerds&lt;/a&gt; because the slide-deck for the announcement was set entirely in Comic Sans. Yes, you heard right: the discovery of the Higgs Boson was announced in Comic Sans.&lt;/p&gt;
&lt;p&gt;CERN had the last laugh a couple of years later. In 2014 they announced they had rebranded - and the new official typeface of the European Organization for Nuclear Research was Comic Sans. They made the announcement &lt;a href=&quot;https://home.cern/about/updates/2014/04/cern-switch-comic-sans&quot;&gt;on their website&lt;/a&gt; - and of course the entire site was set in Comic Sans. The date of that announcement, you ask? April the 1&lt;sup&gt;st&lt;/sup&gt;.&lt;/p&gt;
&lt;h2 id=&quot;what-i-learned-from-this&quot; tabindex=&quot;-1&quot;&gt;What I learned from this&lt;/h2&gt;
&lt;p&gt;My little prank was &lt;em&gt;not&lt;/em&gt; a resounding success. I got a couple of &quot;tears-of-joy&quot; emoji when I released the update - which is all I was hoping for, in fairness. But it soon became clear that it only worked when visitors to my site already had Comic Sans MS installed on their machines. Visit from an iOS device, and all you&#x27;d see were the fallback fonts.&lt;/p&gt;
&lt;p&gt;If I&#x27;m honest this came a quite a shock, but wasn&#x27;t all that surprising once I thought about it. I&#x27;d been working on the assumption that all the classic &quot;web safe&quot; system fonts from my youth would still &lt;em&gt;be&lt;/em&gt; web safe. I hadn&#x27;t taken into account how much the web ecosystem has changed since Apple became one of the dominant hardware providers. Inevitably Apple were too &quot;design sensitive&quot; to bundle the much-maligned Comic Sans with their mobile operating system.&lt;/p&gt;
&lt;p&gt;The practical upshot of this is slightly ironic; if I wanted my prank to be truly cross-browser I&#x27;d have to use a Comic Sans MS web font.&lt;/p&gt;
&lt;h2 id=&quot;a-good-design-should-work-with-any-typeface&quot; tabindex=&quot;-1&quot;&gt;A good design should work with any typeface&lt;/h2&gt;
&lt;p&gt;I&#x27;m pleased to report that even when clad in Comic Sans this site remained lean and functional. I even tried switching to Comic Sans on a couple of our more visual projects, and they too looked, well... okay. It certainly made for a humourous minute or two in the office. And the designs &lt;em&gt;did&lt;/em&gt; still hold up.&lt;/p&gt;
&lt;p&gt;I often hear that &quot;good design&quot; works in all situations, no matter what typeface you wrap it in. The reality, I think, is a little more nuanced. The typeface always sets the tone for the content. And on a site like mine the typeface has a massive impact because most of the content is &lt;em&gt;words&lt;/em&gt;.&lt;/p&gt;
&lt;hr class=&quot;footnotes-sep&quot;/&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn1&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;Although I&#x27;m now a full time developer and haven&#x27;t been an &quot;official&quot; designer for years. Typography is a crucial part of my job, but makes up a much smaller percentage of my time than it used to: 30% &gt; ~5% &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn2&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;To keep down requests and page-size I only use one custom web-font, &lt;a href=&quot;https://typekit.com/fonts/ff-tisa&quot;&gt;FF Tisa&lt;/a&gt;. All the fallbacks in my font-stack are system-fonts. I&#x27;m not too fussy about &lt;em&gt;which&lt;/em&gt; monospace gets used in &lt;code&gt;&amp;lt;code&gt;&lt;/code&gt; blocks, so I&#x27;ve stuffed that with &quot;nice to haves&quot;. &lt;a href=&quot;#fnref2&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;</content></entry><entry><title>Living with Alexa: the problems with &quot;voice&quot; as an interface</title><link href="https://tomhazledine.com/echo-alexa-voice-interface-problems/"/><updated>2017-03-31T00:00:00Z</updated><id>https://tomhazledine.com/echo-alexa-voice-interface-problems/</id><content type="html">&lt;p&gt;Alexa represents a growing trend. The big tech players are investing heavily in voice-control (in order of current competence: Amazon, Google, Microsoft, Apple). They see voice as the next step logical interface for technology. Gone are they days, they argue, when we had to do anything quite so quaint as type on a keyboard. And in many ways, they&#x27;re right: being able to say what you want and get an immediate answer can be fantastically useful. But it doesn&#x27;t always beat a good-old-fashioned keyboard.&lt;/p&gt;
&lt;p&gt;I&#x27;ve lived with Alexa (the virtual assistant held within the Amazon Echo) for six months now. The experience has changed how I feel about voice-as-an-interface. Here are a few of my observations:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Failure states need a lot of work, and Alexa hasn&#x27;t got it right yet. The &quot;I&#x27;m sorry, I&#x27;m having trouble understanding right now&quot; message gets more annoying than a 404 or 500 error page ever does. Also, defaulting to a web-search is not the best option for most queries. Precisely when you didn&#x27;t want to have to mess about, the interaction becomes &lt;em&gt;longer&lt;/em&gt; and &lt;em&gt;more&lt;/em&gt; complicated.&lt;/li&gt;
&lt;li&gt;Text input is often more precise (and certainly more concise). Natural Language Processing has its limits, and sometimes you don&#x27;t want the hassle of converting your abstract thought into prose.&lt;/li&gt;
&lt;li&gt;You can&#x27;t browse as easily - it&#x27;s quicker to read than to listen, and easier to bounce-between and assess options. You can&#x27;t &quot;skim-listen&quot;.&lt;/li&gt;
&lt;li&gt;Half the time you feel like an idiot talking aloud to your devices.&lt;/li&gt;
&lt;li&gt;It&#x27;s not discreet: I often want to multi-task, particularly in boring meetings. (This is more of a future-worry, as I currently only have voice-enabled stuff in my house.)&lt;/li&gt;
&lt;li&gt;Alexa isn&#x27;t able to distinguish between individual voices. We want (and expect) her to work in all scenarios: whether we&#x27;ve got a cold, or are whispering, or shouting, or in the next room. As a result, natural-language interpretation is very good, but it responds to &lt;em&gt;any&lt;/em&gt; voice. I think Alexa needs to know who her &quot;boss&quot; is...&lt;/li&gt;
&lt;li&gt;Following on from that, security is non-existent. My friends can hijack the party playlist. Adverts can inadvertently purchase things from Amazon (this has not happened to us yet, but Alexa has woken up because of wake-words being spoken on the telly).&lt;/li&gt;
&lt;li&gt;These is a palpable shortage of &quot;skills&quot; (the Alexa-speak term for what other platforms would call apps), and the ones that are available are either very clunky or too US-centric. A16Z analyst &lt;a href=&quot;http://ben-evans.com/newsletter&quot;&gt;Benedict Evans&lt;/a&gt; thinks it&#x27;s not surprising that most &#x27;skills&#x27; go unused. “It&#x27;s hard enough to remember what apps you have when you can see them on a screen - having to remember to ask for them by name is the new command line”.&lt;/li&gt;
&lt;li&gt;Amazon are doing their best to kick-start a &quot;skills&quot; ecosystem. They have an enthusiastic developer-outreach programme with a big marketing budget (based on the targeted adds I can&#x27;t seem to escape from...). They&#x27;ve also opened up the technology, so developers can run the (Java-based) Alexa code on their own machines.&lt;/li&gt;
&lt;li&gt;Music has been the killer app for us. Being able to select a song, pause, and skip without having to open any apps or type anything is great. It&#x27;s eliminated a friction I didn&#x27;t even know was there. Selecting music manually now feels archaic. Porting my (large) music library into Amazon Music was a pain (and I&#x27;m still not finished syncing everything). It also cost £25 to get enough storage, but being able to select specific artists and songs was totally worth it. The default music library you get with Prime is fairly comprehensive, but Amazon definitely wants us all to sign-up for their music streaming service (not my bag at all).&lt;/li&gt;
&lt;li&gt;I was surprised how often I&#x27;d simply say “Alexa, play some music”. After a little training period (“Alexa, I don&#x27;t like this!”) the resulting playlists were actually pretty good.&lt;/li&gt;
&lt;li&gt;The &quot;always on&quot; nature of the Echo, while creepy, is one the most game-changing aspects. It&#x27;s the factor that tips Alexa from a novelty to a utility. I just speak into the air, and she responds. No boot-up time, no log-in required. She just works.&lt;/li&gt;
&lt;li&gt;The speech detection is excellent. We have the Echo in the living room (tucked behind the telly) and it can still hear me when I&#x27;m in the kitchen, even when there are other people in both rooms. Alexa gets easily confused when multiple people try to talk at once (or talk over each other, which happens a lot when the family are visiting). But I get easily confused when that happens too, so I can&#x27;t judge the Echo too harshly on this score.&lt;/li&gt;
&lt;li&gt;Getting answers to trivia &amp;amp; general-knowledge questions might be the most useful feature, but the music features are still more impressive when showing off to friends.&lt;/li&gt;
&lt;/ul&gt;</content></entry><entry><title>What is a decibel, anyway?</title><link href="https://tomhazledine.com/what-is-a-decibel-anyway/"/><updated>2017-03-22T00:00:00Z</updated><id>https://tomhazledine.com/what-is-a-decibel-anyway/</id><content type="html">&lt;p&gt;The decibel has always confused me. Sometimes people use decibels as an absolute value where &quot;0&quot; is silence and anything over &quot;120&quot; is very loud. Journalists do this when describing how loud a band is&lt;sup id=&quot;fnref-1&quot;&gt;&lt;a href=&quot;#fn-1&quot; class=&quot;footnote-ref&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;. Sound engineers do it too, when boasting about the power of their speaker-setup. &quot;It&#x27;s louder than a jet engine at 50 paces, man&quot;. But when I look at the volume meter on a mixing desk, things are different. The desk shows the loudest value as zero, all the way down to silence at &quot;-96&quot; (or sometimes even &quot;∞&quot;). See what I mean? Confusing.&lt;/p&gt;&lt;figure class=&quot;post-content__image-wrapper&quot;&gt;&lt;img class=&quot;post-content__image&quot; src=&quot;/images/articles/logic-mixer.jpg&quot; alt=&quot;The mixer section of Logic X&quot;/&gt;&lt;figcaption class=&quot;post-content__caption&quot;&gt;The mixer section of Logic X (a typical DAW - Digital Audio Workstation)&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;For a long time I&#x27;ve been at least tangentially connected to the world of &quot;pro&quot; audio. As such, I&#x27;d feel uneasy when I overheard a lay-person talking about volume. I would often catch myself thinking &quot;I know they are getting it wrong, but I don&#x27;t know why&quot;. So after years of pretty much taking the decibel for granted, I finally had enough. I did some research, and it turns out the decibel is actually pretty interesting.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;A decibel is a relative unit. That means it expresses a ratio, and not an explicit value.&lt;/li&gt;&lt;li&gt;Decibels are measured using a logarithmic scale&lt;sup id=&quot;fnref-2&quot;&gt;&lt;a href=&quot;#fn-2&quot; class=&quot;footnote-ref&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;.&lt;/li&gt;&lt;li&gt;They are a good unit for expressing very small &lt;em&gt;and&lt;/em&gt; very large differences, and can do both on the same scale. This works because they are relative and logarithmic.&lt;/li&gt;&lt;li&gt;Decibels are a technical measure of intensity and/or pressure. Humans don&#x27;t hear all frequencies equally, so &quot;loudness&quot; is a subjective concept.&lt;/li&gt;&lt;li&gt;When decibels &lt;em&gt;are&lt;/em&gt; used to express &quot;loudness&quot;, (for instance, by journalists) they are used with a fixed point of reference. In this context, the unit we&#x27;re using is dBSPL (decibels relative to sound pressure level).&lt;/li&gt;&lt;li&gt;dBSPL represent an absolute value of sound pressure. Just like 20 metres is the same length wherever you go, 20 dBSPL always represents the same level of sound pressure. To use a decibel this way, we need a fixed point of reference. The reference point for dBSPL is 20μPa (micropascals) - roughly the limit of sensitivity of the human ear.&lt;/li&gt;&lt;li&gt;Levels of &gt;120 dBSPL will damage our ears, but our pain threshold is somewhere around 150 dBSPL. So be careful, you could do lasting damage without realizing.&lt;/li&gt;&lt;li&gt;If you want to reference &quot;loudness&quot; using decibels, then you need to apply a filter of some kind. This more accurately describes the idea of &quot;volume&quot; as humans understand it.&lt;/li&gt;&lt;li&gt;The most common filter is the &quot;A scale&quot; (dBA). This is a &quot;band-pass&quot; filter, which is less sensitive to very high and very low frequencies. It&#x27;s simplistic, but &quot;close-enough&quot; to have become a standard.&lt;/li&gt;&lt;li&gt;A less-simplistic approximation of what our ears hear would be a &quot;hearing response curve&quot;. These are much more complex than the &quot;A&quot; scale, with peaks and troughs at different frequencies.&lt;/li&gt;&lt;/ul&gt;&lt;figure class=&quot;post-content__image-wrapper&quot;&gt;&lt;figcaption class=&quot;post-content__caption&quot;&gt;The graph on the left shows an &quot;A&quot; scale frequency response curve, while the graph on the right shows one that more closely matches the response of an average human ear.&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;Now that I&#x27;ve done my research, the dB markings on a mixing desk look far more logical. I can see now that using a simple low-to-high dB meter wouldn&#x27;t make any sense. Any dB scale &lt;em&gt;requires&lt;/em&gt; a defined reference point, which doesn&#x27;t exist in this context. A mixer-channel &lt;em&gt;cannot&lt;/em&gt; have a fixed frame of reference because it gets mixed. A mixer routes all channels to the &quot;master bus&quot; output channel, which has its own volume control. Knowing the value of a signal at the channel-level tells us nothing about the final output value.&lt;/p&gt;&lt;p&gt;But if we flip things around, a channel strip &lt;em&gt;can&lt;/em&gt; have a fixed reference point. That fixed point is the maximum level that it can output. Because decibels are &lt;em&gt;relative&lt;/em&gt; units, we can use them to express how far below the max-level a signal is. By putting 0dB at the top of the meter (and negative values on the downward scale) we can gain useful information about the level of the signal.&lt;/p&gt;&lt;p&gt;There is a technical term for this kind of decibel-usage - dBFS (decibel full scale). The highest possible level of sound produced by audio equipment is 0 dBFS. All other levels are then expressed in negative numbers. Absolute silence in dBFS is -∞ (minus infinity), but in practical terms -96 makes for a useable bottom point.&lt;/p&gt;&lt;h2 id=&quot;putting-dbfs-to-use-on-the-web&quot;&gt;Putting dBFS to use on the web.&lt;/h2&gt;&lt;p&gt;Much like a mixing desk, the Web Audio API does not use dBSPL. The final volume depends on both the level set by your operating system and the level of your speakers. Your computer has no way of knowing what your audio-out connects to (in an analogue setting, at least). It could be going to a set of tiny tinny earbuds, or a 500w amplifier and massive speaker stack. Providing a dBSPL reading of the level would be both meaningless and impossible. For this reason the Web Audio API uses dBFS.&lt;/p&gt;&lt;p&gt;In this scenario the dBFS value &lt;em&gt;is&lt;/em&gt; useful information. It lets us know if a channel is &quot;clipping&quot;, and gives us the information we need to keep on top of our gain-staging. It also gives us a value to compare against other channels on the same system. We may not know the volume of the final destination, but we can compare the individual channels. If we look at a drum track and a guitar track, for instance, we can use the dBFS values to guide how we mix the levels of the two.&lt;/p&gt;&lt;h2 id=&quot;update-29th-march-2017&quot;&gt;&lt;em&gt;Update, 29&lt;sup&gt;th&lt;/sup&gt; March 2017:&lt;/em&gt;&lt;/h2&gt;&lt;p&gt;After it was first published this post made it onto the homepage of Hacker News, where it generated an interesting comment thread. I&#x27;m grateful to the HN community for pointing out a couple of typos and omissions, as well as raising some interesting points of their own.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;By nature of my specialties and interests, this post is very web-centric, which means it deals almost exclusively with &lt;em&gt;digital&lt;/em&gt; audio. Once we make the transition into the analogue world, we start to see positive values for dBFS. This is known as &quot;headroom&quot;, and accounts for the fact that analogue signals are commonly specified in dBV or dBu (0 references of 1 volt and ~0.775 volts, respectively). “So 0dBFS signal going into your USB audio interface might come out as a +16dBu analog signal, while the same digital signal going into a professional mixing console might come out as a +24dBu analog signal.” &lt;a href=&quot;https://news.ycombinator.com/user?id=korethr&quot;&gt;korethr&lt;/a&gt;&lt;/li&gt;&lt;li&gt;The medium through which sound (pressure) travels has an effect on how we define decibels. “In air, dB SPL is referenced to 20 micropascals. In water, it&#x27;s 1 micropascal, so the medium matters.” &lt;a href=&quot;https://news.ycombinator.com/user?id=hprotagonist&quot;&gt;hprotagonist&lt;/a&gt;&lt;/li&gt;&lt;li&gt;Decibels are not just used in an audio context. I&#x27;ve now heard tales of them being used in spectrum analysis and anywhere that &quot;pressure&quot; needs to be measured. “Decibels are just a way to easily express ratios on a logarithmic scale. It&#x27;s handy for all sorts of things.” &lt;a href=&quot;https://news.ycombinator.com/user?id=pitaj&quot;&gt;pitaj&lt;/a&gt;&lt;/li&gt;&lt;li&gt;Bonus points go to &lt;a href=&quot;https://news.ycombinator.com/user?id=AndrewKemendo&quot;&gt;AndrewKemendo&lt;/a&gt; for opening my eyes to the bonkers world of &quot;Car Audio SPL Drag Racing&quot;. Apparently some car owners compete to see which car-stereo can reach the highest dBSPL level when playing a single frequency. “It was instructive to compare frequency and spl because some cars resonant frequencies (fs) were better suited to different fs values of drivers (speakers) and then further down the line certain amplifiers optimized certain frequencies”. Just bananas!&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;If you want to learn more about these interesting decibel side-stories, &lt;a href=&quot;https://news.ycombinator.com/item?id=13931512&quot;&gt;the comment thread for this post on HN&lt;/a&gt; makes a good jumping-off point.&lt;/p&gt;&lt;div class=&quot;footnotes&quot;&gt;&lt;hr/&gt;&lt;ol&gt;&lt;li id=&quot;fn-1&quot;&gt;For instance, this &lt;a href=&quot;https://en.wikipedia.org/wiki/Loudest_band_in_the_world&quot;&gt;from Wikipedia&lt;/a&gt;: The heavy metal band Manowar is one claimant of the title of &quot;loudest band in the world&quot;, citing a measurement of 129.5 dB in 1994 in Hanover.&lt;a href=&quot;#fnref-1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id=&quot;fn-2&quot;&gt;For a deeper dive into the science, check out &lt;a href=&quot;http://www.animations.physics.unsw.edu.au/jw/dB.htm&quot;&gt;this fantastically thorough explanation&lt;/a&gt; from Australia&#x27;s UNSW.&lt;a href=&quot;#fnref-2&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;</content></entry><entry><title>Inline SVG icon sprites are (still) not scary.</title><link href="https://tomhazledine.com/inline-svg-icon-sprites/"/><updated>2017-02-26T00:00:00Z</updated><id>https://tomhazledine.com/inline-svg-icon-sprites/</id><content type="html">&lt;p&gt;You can see SVG icon sprites in use across the high-performance web. &lt;a href=&quot;http://www.lonelyplanet.com/&quot;&gt;Lonely Planet&lt;/a&gt;&lt;sup id=&quot;fnref-1&quot;&gt;&lt;a href=&quot;#fn-1&quot; class=&quot;footnote-ref&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;, &lt;a href=&quot;https://github.com&quot;&gt;GitHub&lt;/a&gt;, &amp;amp; &lt;a href=&quot;http://codepen.io&quot;&gt;CodePen&lt;/a&gt; all use an SVG icon sprite, and there are &lt;a href=&quot;https://sarasoueidan.com/blog/icon-fonts-to-svg/&quot;&gt;plenty&lt;/a&gt; &lt;a href=&quot;https://cloudfour.com/thinks/seriously-dont-use-icon-fonts/&quot;&gt;of&lt;/a&gt; &lt;a href=&quot;https://css-tricks.com/svg-sprites-use-better-icon-fonts/&quot;&gt;advocates&lt;/a&gt; for SVG icons across the development community. These examples come from the cutting-edge of front-end development, but SVG icons are not &quot;hard&quot; or &quot;complicated&quot;. In fact, using an SVG sprite is one of the easiest ways to maintain an icon system.&lt;/p&gt;&lt;p&gt;Vector-based images are much better than raster formats (JPG &amp;amp; PNG) for creating icon systems for websites. They&#x27;re easy to style with CSS, and have small file-sizes. The old way of dealing with this was to use &lt;em&gt;icon fonts&lt;/em&gt; (where the icons were glyphs in a typeface), but a couple of years ago &lt;a href=&quot;https://css-tricks.com/icon-fonts-vs-svg/&quot;&gt;a better method emerged&lt;/a&gt;: SVG icon sprites.&lt;/p&gt;&lt;h2 id=&quot;using-an-svg-sprite&quot;&gt;Using an SVG sprite&lt;/h2&gt;&lt;p&gt;We &lt;em&gt;could&lt;/em&gt; add SVG icons to our sites using standard image-tag syntax – &lt;code&gt;&amp;lt;img src=&quot;our_icon.svg&quot;&gt;&lt;/code&gt; – but that&#x27;s not the best option. Every new &lt;code&gt;&amp;lt;img&gt;&lt;/code&gt; we add to the page creates a new HTTP request, which is bad for performance. The more requests you make, the longer the site takes to load&lt;sup id=&quot;fnref-2&quot;&gt;&lt;a href=&quot;#fn-2&quot; class=&quot;footnote-ref&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;. As in the bad-old-days of image-sprites, it makes sense to group all our icons into a single request. Or even better: no extra requests at all. We can do this with SVG icon sprites.&lt;/p&gt;&lt;p&gt;We call them &quot;sprites&quot;, but &lt;em&gt;SVG&lt;/em&gt; sprites are much more elegant and programmatic than their rasterized forebears. The SVG language allows us to group blocks of icon-code in a single file for individual use later. All our disparate icon files get smushed into one big SVG, which we load like an asset. Then whenever we want to display a particular icon, we reference the relevant part of the master SVG file. No matter how many icons we use, or how often we use them, we&#x27;re only ever including the complex SVG code once.&lt;/p&gt;&lt;p&gt;The reason we can do this is because SVG is a XML-like language. We can mark out different elements using tags in much the same manner as we&#x27;d mark-up our HTML. Instead of using &lt;code&gt;&amp;lt;h1&gt;&lt;/code&gt; tags for headings and &lt;code&gt;&amp;lt;a&gt;&lt;/code&gt; tags for links, we use tags for lines and shapes. We can also use tags to group our shapes together. The &lt;code&gt;&amp;lt;g&gt;&lt;/code&gt; tag (&quot;g&quot; == &quot;group&quot;) is the obvious choice, but the &lt;code&gt;&amp;lt;symbol&gt;&lt;/code&gt; tag work best for our purposes&lt;sup id=&quot;fnref-3&quot;&gt;&lt;a href=&quot;#fn-3&quot; class=&quot;footnote-ref&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;. The following code-snippet shows two separate icons within one SVG file:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;svg&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;xmlns&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://www.w3.org/2000/svg&quot;&lt;/span&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;symbol&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;viewBox&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;0 0 100 100&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;square_icon&quot;&lt;/span&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;d&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;M10 10H90V90H10Z&quot;&lt;/span&gt;/&gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;symbol&lt;/span&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;symbol&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;viewBox&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;0 0 100 100&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;circle_icon&quot;&lt;/span&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;circle&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;cx&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;50&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;cy&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;50&quot;&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;r&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;40&quot;&lt;/span&gt;/&gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;symbol&lt;/span&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;svg&lt;/span&gt;&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Notice how we&#x27;ve added a standard HTML &lt;code&gt;id&lt;/code&gt; attribute to each &lt;code&gt;&amp;lt;symbol&gt;&lt;/code&gt;. This is the &quot;secret sauce&quot; that makes SVG sprites useful. We can now load our entire SVG at the top of our page and extract the symbols whenever we need them.&lt;/p&gt;&lt;p&gt;With the sprite-code in place, using individual icons becomes much simpler. We can include them whenever and wherever we need them by taking advantage of SVG&#x27;s &lt;code&gt;&amp;lt;use&gt;&lt;/code&gt; tag.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;svg&lt;/span&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;xlink:href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;#square_icon&quot;&lt;/span&gt;/&gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;svg&lt;/span&gt;&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;And of course we can still add classes to the &lt;code&gt;&amp;lt;svg&gt;&lt;/code&gt; tags, allowing us to style an icon in as many different ways as we like.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-html&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;ul&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;example_svg_list&quot;&lt;/span&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;svg&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;example_svg_1&quot;&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;xlink:href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;#example_svg&quot;&lt;/span&gt; /&gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;svg&lt;/span&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;svg&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;example_svg_2&quot;&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;xlink:href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;#example_svg&quot;&lt;/span&gt; /&gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;svg&lt;/span&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;svg&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;example_svg_3&quot;&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;xlink:href&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;#example_svg&quot;&lt;/span&gt; /&gt;&lt;/span&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;svg&lt;/span&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;li&lt;/span&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;ul&lt;/span&gt;&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;ul class=&quot;example_svg_list cluster--center&quot;&gt;&lt;li/&gt;&lt;li/&gt;&lt;li/&gt;&lt;/ul&gt;&lt;h2 id=&quot;building-an-svg-sprite-with-gulp&quot;&gt;Building an SVG sprite with Gulp&lt;/h2&gt;&lt;p&gt;Hand-coding SVG icon sprites can be a real chore. It gives your site&#x27;s &lt;em&gt;users&lt;/em&gt; the best experience possible, but it&#x27;s not fun for developers. Even combining &lt;em&gt;simple&lt;/em&gt; SVGs into &lt;code&gt;&amp;lt;symbol&gt;&lt;/code&gt; elements inside a single &lt;code&gt;&amp;lt;svg&gt;&lt;/code&gt; is not a fun way to spend your time. And real-world SVGs are never as easy to read as the examples show here. What we need is a way to automate the sprite-creation process.&lt;/p&gt;&lt;p&gt;I automate other front-end tasks using a &lt;em&gt;task runner&lt;/em&gt;. If you&#x27;ve made it this far into an article about creating SVG icon sprites, then I&#x27;m going to assume you use one too. Gulp is my task-runner of choice, but you might be using something like Grunt&lt;sup id=&quot;fnref-4&quot;&gt;&lt;a href=&quot;#fn-4&quot; class=&quot;footnote-ref&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;. Gulp already handles my javascript and css, so adding my icons into the mix is a natural progression.&lt;/p&gt;&lt;p&gt;Adding an SVG icon sprite to my Gulp setup was quick &amp;amp; painless, and the same task has been serving me well for over two years now. The &lt;a href=&quot;https://github.com/jkphl/gulp-svg-sprite&quot;&gt;&lt;code&gt;gulp-svg-sprite&lt;/code&gt; module&lt;/a&gt; runs error-free without much need for configuration. If you&#x27;ve already got a &lt;code&gt;gulpfile.js&lt;/code&gt; in your project, you can install the module like this:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;npm install gulp-svg-sprite --save
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;That module takes individual SVG files and combines them into a single &lt;code&gt;&amp;lt;svg&gt;&lt;/code&gt;. Each file becomes a &lt;code&gt;&amp;lt;symbol&gt;&lt;/code&gt; with an ID matching the original filename.&lt;/p&gt;&lt;p&gt;So a folder structure like this:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-bash&quot;&gt;SVG_folder
- icon_one.svg
- second_icon.svg
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Becomes a sprite like this:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;svg&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;xmlns&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://www.w3.org/2000/svg&quot;&lt;/span&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;symbol&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;icon_one&quot;&lt;/span&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;d&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;/* path data */&quot;&lt;/span&gt;/&gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;symbol&lt;/span&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;symbol&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;icon_two&quot;&lt;/span&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;hljs-attr&quot;&gt;d&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;/* path data */&quot;&lt;/span&gt;/&gt;&lt;/span&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;symbol&lt;/span&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;/&lt;span class=&quot;hljs-name&quot;&gt;svg&lt;/span&gt;&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Once we&#x27;ve installed the module, we need to build our task. The important things to set are the source folder and destination folder. I.e. where the task will &lt;em&gt;find&lt;/em&gt; the raw SVGs, and where it will &lt;em&gt;put&lt;/em&gt; the sprite.&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;// Load the module.&lt;/span&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;var&lt;/span&gt; svgSprite = &lt;span class=&quot;hljs-built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;gulp-svg-sprite&quot;&lt;/span&gt;);

&lt;span class=&quot;hljs-comment&quot;&gt;// Set our desired configuration values.&lt;/span&gt;
svgConfig = {
    &lt;span class=&quot;hljs-attr&quot;&gt;mode&lt;/span&gt;: {
        &lt;span class=&quot;hljs-comment&quot;&gt;// Make sure we&#x27;re combining icons&lt;/span&gt;
        &lt;span class=&quot;hljs-comment&quot;&gt;// using the &amp;lt;symbol&gt; method.&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;symbol&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;true&lt;/span&gt;
    },
    &lt;span class=&quot;hljs-comment&quot;&gt;// Some more settings to keep&lt;/span&gt;
    &lt;span class=&quot;hljs-comment&quot;&gt;// the SVG&#x27;s code clean:&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;svg&lt;/span&gt;: {
        &lt;span class=&quot;hljs-attr&quot;&gt;xmlDeclaration&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;,
        &lt;span class=&quot;hljs-attr&quot;&gt;doctypeDeclaration&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;,
        &lt;span class=&quot;hljs-comment&quot;&gt;// By default the module wants to namespace&lt;/span&gt;
        &lt;span class=&quot;hljs-comment&quot;&gt;// all our IDs and classes. We&#x27;re grownups&lt;/span&gt;
        &lt;span class=&quot;hljs-comment&quot;&gt;// so we want to preserve our settings.&lt;/span&gt;
        &lt;span class=&quot;hljs-attr&quot;&gt;namespaceIDs&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;,
        &lt;span class=&quot;hljs-attr&quot;&gt;namespaceClassnames&lt;/span&gt;: &lt;span class=&quot;hljs-literal&quot;&gt;false&lt;/span&gt;
    }
};

&lt;span class=&quot;hljs-comment&quot;&gt;// Define our task.&lt;/span&gt;
gulp.&lt;span class=&quot;hljs-title function_&quot;&gt;task&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;svg&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;/&gt;) {
    &lt;span class=&quot;hljs-comment&quot;&gt;// Set the source folder.&lt;/span&gt;
    gulp.&lt;span class=&quot;hljs-title function_&quot;&gt;src&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;uncompressed/icons/**/*.svg&quot;&lt;/span&gt;)
        &lt;span class=&quot;hljs-comment&quot;&gt;// Include our options.&lt;/span&gt;
        .&lt;span class=&quot;hljs-title function_&quot;&gt;pipe&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;svgSprite&lt;/span&gt;(svgConfig))
        &lt;span class=&quot;hljs-comment&quot;&gt;// Set the destination folder.&lt;/span&gt;
        .&lt;span class=&quot;hljs-title function_&quot;&gt;pipe&lt;/span&gt;(gulp.&lt;span class=&quot;hljs-title function_&quot;&gt;dest&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;assets/icons&quot;&lt;/span&gt;));
});
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;With this task in place, maintaining an SVG icon sprite is easy. Whenever we add a new icon to our source folder we just need to run &lt;code&gt;gulp svg&lt;/code&gt;. That takes our raw files, cleans them up, and combines them into a single file.&lt;/p&gt;&lt;h2 id=&quot;keeping-the-intermediate-files&quot;&gt;Keeping the intermediate files.&lt;/h2&gt;&lt;p&gt;When creating our sprite, the module first cleans-up our SVGs. It removes empty tags, strips out any unnecessary attributes, and minifies the files. This can come in handy if you need easy access to nice, neat SVG code for an individual icon.&lt;/p&gt;&lt;p&gt;If you want to target discrete elements &lt;em&gt;within&lt;/em&gt; an icon, you may need to include the raw markup in your page. This can be necessary when you want to build complex animations or transitions. Being able to copy/paste the nicely-configured code is useful in these situations.&lt;/p&gt;&lt;p&gt;You can configure the module to create a folder with the individual SVGs in after they&#x27;ve been optimized and cleaned-up by the module. You can do this by adding the following rule to the &lt;code&gt;svgConfig&lt;/code&gt; object:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;&lt;span class=&quot;hljs-attr&quot;&gt;shape&lt;/span&gt;: {
    &lt;span class=&quot;hljs-comment&quot;&gt;// Choose a folder to store the&lt;/span&gt;
    &lt;span class=&quot;hljs-comment&quot;&gt;// intermediate SVG files in.&lt;/span&gt;
    &lt;span class=&quot;hljs-attr&quot;&gt;dest&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;intermediate&quot;&lt;/span&gt;;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;including-the-sprite-in-a-site&quot;&gt;Including the sprite in a site&lt;/h2&gt;&lt;p&gt;Once Gulp has created the sprite file for us, we need to add that to our page below your opening &lt;code&gt;&amp;lt;body&gt;&lt;/code&gt; tag. Copy-pasting the contents of &lt;code&gt;sprite.symbol.svg&lt;/code&gt; would do the trick. But we can automate this process by including a reference to our sprite file.&lt;/p&gt;&lt;dl&gt;&lt;dt&gt;Including an SVG icon sprite in a Jekyll site&lt;/dt&gt;&lt;dd&gt;In the past I&#x27;ve worked a lot with Jekyll - a static-site generator. When it comes to performance and security it&#x27;s hard to beat static HTML files. Jekyll compiles a site &lt;em&gt;before&lt;/em&gt; it gets put on a server. There are no databases to hack, and no server-side build-steps to slow the site down. Because Jekyll is already combining lots of files together, adding a sprite into the mix is easy.&lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;We can get Gulp to output the sprite into Jekyll&#x27;s &lt;code&gt;_includes&lt;/code&gt; directory by changing the path in &lt;code&gt;gulp.dest()&lt;/code&gt;. So &lt;code&gt;.pipe( gulp.dest( &#x27;assets/icons&#x27; ) );&lt;/code&gt; becomes &lt;code&gt;.pipe( gulp.dest( &#x27;_includes&#x27; ) );&lt;/code&gt;. Then you can pull in your sprite with a simple &quot;include&quot; statement:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-liquid&quot;&gt;{% include /symbol/svg/sprite.symbol.svg %}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Remember to use Liquid&#x27;s &lt;code&gt;{% raw %}&lt;/code&gt; tag to ensure the SVG code doesn&#x27;t get escaped.&lt;/p&gt;&lt;dl&gt;&lt;dt&gt;Including an SVG icon sprite in a WordPress site&lt;/dt&gt;&lt;dd&gt;I built this site in WordPress, which has its own conventions for including files. When I want to inject code into the markup, `get_template_part()` is the preferred method. The only downside is that `get_template_part()` only works for PHP files.&lt;/dd&gt;&lt;/dl&gt;&lt;p&gt;I get around this obstacle with the following Gulp task:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-js&quot;&gt;gulp.&lt;span class=&quot;hljs-title function_&quot;&gt;task&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;svg_rename&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;hljs-params&quot;/&gt;) {
    &lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; gulp
        .&lt;span class=&quot;hljs-title function_&quot;&gt;src&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;assets/icons/symbol/svg/*.svg&quot;&lt;/span&gt;)
        .&lt;span class=&quot;hljs-title function_&quot;&gt;pipe&lt;/span&gt;(&lt;span class=&quot;hljs-title function_&quot;&gt;rename&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;iconsprite.svg.php&quot;&lt;/span&gt;))
        .&lt;span class=&quot;hljs-title function_&quot;&gt;pipe&lt;/span&gt;(gulp.&lt;span class=&quot;hljs-title function_&quot;&gt;dest&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;assets/icons&quot;&lt;/span&gt;));
});
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;That task renames the sprite and saves the renamed file in the &lt;code&gt;assets/icons&lt;/code&gt; directory. Note that we&#x27;re adding &lt;em&gt;two&lt;/em&gt; file extensions: &lt;code&gt;.svg&lt;/code&gt; and &lt;code&gt;.php&lt;/code&gt;. Once we&#x27;ve generated this file we include it in our code like this:&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;hljs language-php&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;&amp;lt;?php&lt;/span&gt; &lt;span class=&quot;hljs-title function_ invoke__&quot;&gt;get_template_part&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&#x27;assets/icons/iconsprite.svg&#x27;&lt;/span&gt;); &lt;span class=&quot;hljs-meta&quot;&gt;?&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;dl&gt;&lt;dt&gt;Hiding the sprite&lt;/dt&gt;&lt;dd&gt;When we load a page with an SVG icon sprite in it, the browser will try to render the sprite code. This can create a large empty space at the top of our page. The only time we want our SVG code to appear is when we reference it with a &lt;code&gt;&lt;use/&gt;&lt;/code&gt; tag, so we want to hide the raw sprite. Remember to add a style of `display:none;` to the sprite or it&#x27;s container.&lt;/dd&gt;&lt;/dl&gt;&lt;hr/&gt;&lt;p&gt;Building and using SVG icon sprites sounds complicated, and it is. But maintaining a performant and scalable icon system is a non-trivial task. That complexity has to live &lt;em&gt;somewhere&lt;/em&gt;, and icon sprites are by far the best of the options&lt;sup id=&quot;fnref-5&quot;&gt;&lt;a href=&quot;#fn-5&quot; class=&quot;footnote-ref&quot;&gt;5&lt;/a&gt;&lt;/sup&gt;. Couple the sprite with a sensible workflow and the whole process becomes second-nature.&lt;/p&gt;&lt;p&gt;I&#x27;ve been using &lt;a href=&quot;http://caniuse.com/#search=SVG&quot;&gt;SVG icon sprites in production&lt;/a&gt; for over two years now. I have yet to see a simpler solution. Now that I&#x27;ve got by Gulp setup how I like it, I can be confident that all the tools I need are at my fingertips. Whenever I need to add a new icon to a site, it&#x27;s a two-step process. I save an SVG to my &lt;code&gt;uncompressed/icons&lt;/code&gt; folder and drop a corresponding &lt;code&gt;&amp;lt;use&gt;&lt;/code&gt; element in my markup.&lt;/p&gt;&lt;p&gt;Like many good ideas before them, SVG icon sprites are spreading across the web. And like Tyler Sticka said: &lt;a href=&quot;https://cloudfour.com/thinks/seriously-dont-use-icon-fonts/&quot;&gt;Don&#x27;t be Table Guy&lt;/a&gt;.&lt;/p&gt;&lt;div class=&quot;footnotes&quot;&gt;&lt;hr/&gt;&lt;ol&gt;&lt;li id=&quot;fn-1&quot;&gt;Ian Feather wrote a great article about when &lt;a href=&quot;http://ianfeather.co.uk/ten-reasons-we-switched-from-an-icon-font-to-svg/&quot;&gt;Lonely Planet switched from using an icon-font to SVG icon sprites&lt;/a&gt;.&lt;a href=&quot;#fnref-1&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id=&quot;fn-2&quot;&gt;The number of requests is a big deal with regular HTTP connection. HTTP-2, however, changes things; but you&#x27;ll have to find out more about that elsewhere.&lt;a href=&quot;#fnref-2&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id=&quot;fn-3&quot;&gt;We could just use a &lt;code&gt;&amp;lt;g&gt;&lt;/code&gt; tag – or even reference individual paths and shapes directly – but &lt;code&gt;&amp;lt;symbol&gt;&lt;/code&gt; allows us to add a &lt;code&gt;viewBox&lt;/code&gt; attribute. This means we only have to declare the view-box once for each icon, rather than repeating ourselves every time we use the icon in our page.&lt;a href=&quot;#fnref-3&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id=&quot;fn-4&quot;&gt;Note that the raw &lt;a href=&quot;https://github.com/jkphl/svg-sprite&quot;&gt;&lt;code&gt;svg-sprite&lt;/code&gt; Node module&lt;/a&gt; doesn&#x27;t read or write to the file system, so you&#x27;ll need to use &lt;em&gt;something&lt;/em&gt; to help you out.&lt;a href=&quot;#fnref-4&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;li id=&quot;fn-5&quot;&gt;It is worth looking at the counter argument in favour of icon fonts, because SVG sprites may not be appropriate for everybody. Ben Frain probably &lt;a href=&quot;https://benfrain.com/seriously-use-icon-fonts/&quot;&gt;makes the best case against SVG sprites&lt;/a&gt;, but his argument is about &lt;em&gt;changing&lt;/em&gt; from fonts to sprites. Kind of a &quot;if it ain&#x27;t broke&quot; thesis.&lt;a href=&quot;#fnref-5&quot; class=&quot;footnote-backref&quot;&gt;↩&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;</content></entry><entry><title>Getting to grips with SVG markup</title><link href="https://tomhazledine.com/svg-markup/"/><updated>2017-02-15T00:00:00Z</updated><id>https://tomhazledine.com/svg-markup/</id><content type="html">&lt;p&gt;Here is a side-by-side comparison of an icon. The image on the left is an SVG, the one on the right is a raster PNG. They are both roughly the same file size (~1Kb), and at 64px x 64px they look pretty similar. But see how those same files look at double-scale:&lt;/p&gt;
&lt;div class=&quot;svg-vs-png&quot;&gt;
    &lt;span class=&quot;hidden--visually&quot;&gt;*If you&#x27;re reading this post through some kind of syndication feed (RSS, etc.) you may need to visit &lt;a href=&quot;https://tomhazledine.com/svg-markup/&quot;&gt;the original post&lt;/a&gt; to view this image-demo correctly.*&lt;/span&gt;&lt;div class=&quot;one-x clearfix&quot;&gt;
        &lt;div class=&quot;item-label&quot;&gt;
            &lt;p&gt;An .SVG and .PNG icon, side-by-side&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class=&quot;item-wrapper&quot;&gt;
            &lt;div class=&quot;item-mask&quot;&gt;
                
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;item-wrapper&quot;&gt;
            &lt;div class=&quot;item-mask&quot;&gt;
                &lt;img class=&quot;masked-image&quot; src=&quot;/images/articles/code_128.png&quot;/&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;&lt;div class=&quot;two-x clearfix&quot;&gt;
        &lt;div class=&quot;item-label&quot;&gt;
            &lt;p&gt;The same files, increased to double-size&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class=&quot;item-wrapper&quot;&gt;
            &lt;div class=&quot;item-mask&quot;&gt;
                
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;item-wrapper&quot;&gt;
            &lt;div class=&quot;item-mask&quot;&gt;
                &lt;img class=&quot;masked-image&quot; src=&quot;/images/articles/code_128.png&quot;/&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;&lt;div class=&quot;ten-x clearfix&quot;&gt;
        &lt;div class=&quot;item-label&quot;&gt;
            &lt;p&gt;...and to 10x the original size&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class=&quot;item-wrapper&quot;&gt;
            &lt;div class=&quot;item-mask&quot;&gt;
                
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;item-wrapper&quot;&gt;
            &lt;div class=&quot;item-mask&quot;&gt;
                &lt;img class=&quot;masked-image&quot; src=&quot;/images/articles/code_128.png&quot;/&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;We can use the same SVG file for all sizes, and produce consistently clear and crisp results. To get the same effect with rasterized images, we&#x27;d need to create separate files for each size. Each increase in visible size would result in an increase of file size, too. We&#x27;d not only be pushing up the number of HTTP requests but also the total page-weight as well.&lt;/p&gt;
&lt;h2 id=&quot;the-basics-of-the-svg-markup-language&quot; tabindex=&quot;-1&quot;&gt;The basics of the SVG markup language&lt;/h2&gt;
&lt;p&gt;SVG as a format needn&#x27;t be scary or intimidating. SVG stands for Scalable Vector Graphic, and the language of SVGs is an XML-derived language like RSS feeds and XHTML&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt;. Once you know what tags to look out for, the whole thing gets a lot simpler. Take this simplified SVG markup, for example:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-xml&quot;&gt;&amp;lt;svg viewBox=&quot;0 0 100 100&quot;&gt;
    &amp;lt;path d=&quot;M10 10H90V90H10Z&quot;/&gt;
    &amp;lt;circle cx=&quot;50&quot; cy=&quot;50&quot; r=&quot;40&quot;/&gt;
&amp;lt;/svg&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Even without being able to read the more technical aspects, there are clues to pick up on. It&#x27;s clear that the SVG above contains a &lt;em&gt;path&lt;/em&gt; (a.k.a. a &lt;em&gt;line&lt;/em&gt;) and a &lt;em&gt;circle&lt;/em&gt;. Dive a little deeper and you&#x27;ll see that it&#x27;s a circle inside a square. The circle has a diameter of 80 (&quot;r&quot; == &quot;radius&quot;), and sits inside a 90 x 90 square (the line joins up with itself to form a &lt;em&gt;shape&lt;/em&gt;). Both of these lie in the centre of a 100 x 100 artboard (a.k.a &quot;view box&quot;).&lt;/p&gt;
&lt;svg class=&quot;inline-image-block&quot; style=&quot;enable-background:new 0 0 100 100;&quot; width=&quot;200px&quot; height=&quot;200px&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; version=&quot;1.1&quot; id=&quot;Layer_1&quot; x=&quot;0px&quot; y=&quot;0px&quot; viewBox=&quot;0 0 100 100&quot; xml:space=&quot;preserve&quot;&gt;
&lt;style type=&quot;text/css&quot;&gt;
	.svg_demo_1_a{fill:#E3E1E1;}
	.svg_demo_1_b{fill:none;stroke:#000000;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:0,4;}
&lt;/style&gt;
&lt;rect class=&quot;svg_demo_1_a&quot; width=&quot;100&quot; height=&quot;100&quot;/&gt;
&lt;g&gt;
	&lt;g&gt;
		&lt;polyline class=&quot;svg_demo_1_b&quot; points=&quot;95,94.5 95,95 94.5,95   &quot;/&gt;
		&lt;line class=&quot;svg_demo_1_b&quot; x1=&quot;93.5&quot; y1=&quot;95&quot; x2=&quot;6&quot; y2=&quot;95&quot;/&gt;
		&lt;polyline class=&quot;svg_demo_1_b&quot; points=&quot;5.5,95 5,95 5,94.5   &quot;/&gt;
		&lt;line class=&quot;svg_demo_1_b&quot; x1=&quot;5&quot; y1=&quot;93.5&quot; x2=&quot;5&quot; y2=&quot;6&quot;/&gt;
		&lt;polyline class=&quot;svg_demo_1_b&quot; points=&quot;5,5.5 5,5 5.5,5   &quot;/&gt;
		&lt;line class=&quot;svg_demo_1_b&quot; x1=&quot;6.5&quot; y1=&quot;5&quot; x2=&quot;94&quot; y2=&quot;5&quot;/&gt;
		&lt;polyline class=&quot;svg_demo_1_b&quot; points=&quot;94.5,5 95,5 95,5.5   &quot;/&gt;
		&lt;line class=&quot;svg_demo_1_b&quot; x1=&quot;95&quot; y1=&quot;6.5&quot; x2=&quot;95&quot; y2=&quot;94&quot;/&gt;
	&lt;/g&gt;
&lt;/g&gt;
&lt;g&gt;
	&lt;circle class=&quot;svg_demo_1_b&quot; cx=&quot;50&quot; cy=&quot;50&quot; r=&quot;45&quot;/&gt;
&lt;/g&gt;
&lt;/svg&gt;
&lt;p&gt;Real-world SVGs are more complex, of course. There are plenty of attributes and DOCTYPE declarations to worry about. But the general principle is the same. There is an opening tag (&lt;code&gt;&amp;lt;svg&gt;&lt;/code&gt;) and closing tag (&lt;code&gt;&amp;lt;/svg&gt;&lt;/code&gt;) just like &lt;code&gt;&amp;lt;html&gt;&lt;/code&gt;. And we build shapes within the SVG using tags like &lt;code&gt;&amp;lt;path/&gt;&lt;/code&gt; and &lt;code&gt;&amp;lt;circle/&gt;&lt;/code&gt; and &lt;code&gt;&amp;lt;rect/&gt;&lt;/code&gt; (rectangle)&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn2&quot; id=&quot;fnref2&quot;&gt;[2]&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;h2 id=&quot;styling-svgs-with-css&quot; tabindex=&quot;-1&quot;&gt;Styling SVGs with CSS&lt;/h2&gt;
&lt;p&gt;SVGs are complex, for sure, but that very complexity gives them their power. And we don&#x27;t need to know the intricacies of the co-ordinate system to harness that power. All we need to do is recognize the different elements. This is a language much like HTML, after all, so once we can find the different shapes in an icon we can add classes to them.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-xml&quot;&gt;&amp;lt;svg viewBox=&quot;0 0 100 100&quot;&gt;
    &amp;lt;path class=&quot;outer_square&quot; d=&quot;M10 10H90V90H10Z&quot;/&gt;
    &amp;lt;circle class=&quot;inner_circle&quot; cx=&quot;50&quot; cy=&quot;50&quot; r=&quot;40&quot;/&gt;
&amp;lt;/svg&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;...which we can then style with CSS:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;svg {
    background: yellow;
}
.outer_square {
    stroke: red;
    stroke-width: 1px;
}
.inner_circle {
    fill: blue;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;svg class=&quot;inline-image-block&quot; style=&quot;enable-background:new 0 0 100 100;&quot; width=&quot;200px&quot; height=&quot;200px&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; version=&quot;1.1&quot; id=&quot;Layer_1&quot; x=&quot;0px&quot; y=&quot;0px&quot; viewBox=&quot;0 0 100 100&quot; xml:space=&quot;preserve&quot;&gt;
&lt;style type=&quot;text/css&quot;&gt;
	.svg_demo_2_a{fill:#FCEE21;}
	.svg_demo_2_b{fill:none;stroke:#FF0000;stroke-miterlimit:10;}
	.svg_demo_2_c{fill:#0000FF;}
&lt;/style&gt;
&lt;rect class=&quot;svg_demo_2_a&quot; width=&quot;100&quot; height=&quot;100&quot;/&gt;
&lt;rect x=&quot;5&quot; y=&quot;5&quot; class=&quot;svg_demo_2_b&quot; width=&quot;90&quot; height=&quot;90&quot;/&gt;
&lt;circle class=&quot;svg_demo_2_c&quot; cx=&quot;50&quot; cy=&quot;50&quot; r=&quot;45&quot;/&gt;
&lt;/svg&gt;
&lt;p&gt;This gives us a more fine-grained level of control than a single character in an icon font would. We can manipulate the styles of each discrete part of an icon with CSS. Transitions and animations provide an extra level of detail. Our positioning can be much more precise. We have a defined and predictable co-ordinate system to work with. No more fiddling about with baseline alignment of invisible-hitboxed font characters!&lt;/p&gt;
&lt;p&gt;There are some fantastically clever and artistic examples of SVG in the wild. The only limits appear to be the creativity and imagination of the developers who build them. A browse through CodePen reveals stunning work, but I&#x27;ll end with a more simple demonstration of my work.&lt;/p&gt;
&lt;p&gt;I&#x27;ve always had a soft-spot for loading graphics, and love to build them myself. I built this one with a two-path SVG and a dash of CSS animation:&lt;/p&gt;
&lt;p data-height=&quot;265&quot; data-theme-id=&quot;0&quot; data-slug-hash=&quot;BKrXwJ&quot; data-default-tab=&quot;result&quot; data-user=&quot;tomhazledine&quot; data-embed-version=&quot;2&quot; data-pen-title=&quot;Hourglass Loader&quot; class=&quot;codepen&quot;&gt;See the Pen &lt;a href=&quot;http://codepen.io/tomhazledine/pen/BKrXwJ/&quot;&gt;Hourglass Loader&lt;/a&gt; by Tom Hazledine (&lt;a href=&quot;http://codepen.io/tomhazledine&quot;&gt;@tomhazledine&lt;/a&gt;) on &lt;a href=&quot;http://codepen.io&quot;&gt;CodePen&lt;/a&gt;.&lt;/p&gt;
&lt;script async=&quot;async&quot; src=&quot;https://production-assets.codepen.io/assets/embed/ei.js&quot;/&gt;
&lt;hr class=&quot;footnotes-sep&quot;/&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn1&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;This is not the place for a debate about the nuances of XHTML vs HTML vs SGML. If that kind of language-geekery is for you, you can &lt;a href=&quot;https://www.youtube.com/watch?v=RH0o-QjnwDg&quot;&gt;learn more about the *ML &quot;family&quot; from Computerphile&lt;/a&gt;. &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn2&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;You can read more about the inner-workings of SVGs - including a detailed look at how to construct paths using co-ordinates – on the &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths&quot;&gt;MDN SVG tutorial pages&lt;/a&gt;. &lt;a href=&quot;#fnref2&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;</content></entry><entry><title>Bullet Journal Revisited</title><link href="https://tomhazledine.com/bullet-journal-revisited/"/><updated>2017-01-20T00:00:00Z</updated><id>https://tomhazledine.com/bullet-journal-revisited/</id><content type="html">&lt;figure class=&quot;post-content__image-wrapper post-content__image-wrapper--has-sidebar&quot;&gt;
    &lt;img class=&quot;post-content__image&quot; src=&quot;/images/articles/journal.jpg&quot; alt=&quot;&quot;/&gt;
    &lt;figcaption class=&quot;sidenote&quot;&gt;My original analogue attempt at maintaining a Bullet Journal&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;The &quot;Bullet Journal&quot;&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt; is a system for &lt;em&gt;Getting Things Done&lt;/em&gt;. One nested pen-and-paper list that gets rewritten every morning. My first post on this site was about &lt;a href=&quot;https://tomhazledine.com/bullet-journal-workflow&quot;&gt;the success I was having with the Bullet Journal&lt;/a&gt;. Over the last few weeks I&#x27;ve begun to use the journal system again, so I figured it was time for an update.&lt;/p&gt;
&lt;p&gt;I used the Bullet Journal daily for about ten months (covering most of my time as a freelance developer). When an agency recruited me, I stopped using it. They had their own task-management tools, and I no longer had such an urgent need to organize my own time.&lt;/p&gt;
&lt;p&gt;Fast-forward several years and I was beginning to feel the lack of a personal organization system. I was getting stuff done in work hours, for sure, but momentum was slipping on all my &quot;side projects&quot;. I don&#x27;t get people who struggle to come up with ideas for projects: I&#x27;m overwhelmed by ideas. What I find hard is &lt;em&gt;execution&lt;/em&gt;. Getting Things Done is my Achilles heel. It was time to revisit the Bullet Journal.&lt;/p&gt;
&lt;h2 id=&quot;going-digital.&quot; tabindex=&quot;-1&quot;&gt;Going digital.&lt;/h2&gt;
&lt;p&gt;When I kept the daily task-list, I had a dedicated paper notebook. Keeping things analogue (as per the &quot;pure&quot; Bullet Journal method) was a way of maintaining focus. But now I&#x27;m much more comfortable keeping everything in the &quot;cloud&quot;. I keep all my notes in a private Dropbox folder so I can access them wherever I am, regardless of what device I&#x27;m using. It also allows me to use my favourite writing apps&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn2&quot; id=&quot;fnref2&quot;&gt;[2]&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;Constant access to my files has removed the downsides of keeping a digital list. In 2013 I was more comfortable carrying a physical notebook around with me. Now, I find it more convenient to keep a folder full of markdown files in the cloud.&lt;/p&gt;
&lt;p&gt;Because I spend so much time working with markdown documents, and because markdown has such an elegant way of handling bulleted lists (with checkboxes!), adapting the Bullet Journal method was a natural choice.&lt;/p&gt;
&lt;h2 id=&quot;my-evolved-bullet-journal-system.&quot; tabindex=&quot;-1&quot;&gt;My evolved Bullet Journal system.&lt;/h2&gt;
&lt;p&gt;The central tenets of my journal are the same as the &quot;official&quot; system. I have one task list, and that gets refreshed every morning. I remove completed items, and anything still outstanding gets re-evaluated&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn3&quot; id=&quot;fnref3&quot;&gt;[3]&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;Because the list is digital, I don&#x27;t need to worry about adding a &quot;migrated&quot; marker when a task rolls-over into the next day. If it&#x27;s done, it gets deleted. If I want it to &quot;migrate&quot; to the next day&#x27;s list, it stays where it is. I&#x27;ve also moved away from the other markers used in the original setup. Sticking to the nested list works nicely for me, and I found the extra markers for events etc. made my lists over-complicated and overwhelming.&lt;/p&gt;
&lt;p&gt;I nest my list by topic. By way of example, here&#x27;s a snippet of a list I made for &lt;a href=&quot;https://tomhazledine.com/calculating-reading-speed&quot;&gt;adding a new feature&lt;/a&gt; to this very site:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-markdown&quot;&gt;-   [ ] My personal website // This is the &quot;master&quot; list item
    -   [ ] readtime calculation
            _ [x] calculate seconds based on words-per-minute // I have completed this item.
            _ [ ] parse time into human-readable string \* [ ] write a blog post about the process + [ ] another feature
            // ...
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;When I kept my analogue journal, I would create &quot;super objectives&quot; for every month. The idea was that I could refer to those pages and make sure I was keeping up with my &quot;big picture&quot; goals. This was always a cumbersome process, and these super-objectives were often overlooked.&lt;/p&gt;
&lt;p&gt;Space is not a factor for my digital journal, so I can afford to add as many items as I like. I even break those items into groups if the mood takes me. Right now I have &quot;Big goals&quot;, &quot;Technologies to learn (and master?)&quot;, &quot;Dream goals&quot;, and &quot;Short-term tasks&quot;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Big goals&lt;/em&gt; is at top of the page and has all my serious objectives for the year ahead (this is a new addition for 2017 - it&#x27;s early days yet, so we&#x27;ll see how this pans out...). My hope is that by keeping these items front-and-center means I can&#x27;t ignore them. I&#x27;ve discovered there are few things more disheartening than finding a year-old task list and not being able to tick-off a single item.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Technologies to learn (and master?)&lt;/em&gt; helps me keep on top of the things I&#x27;m trying to learn. Sample entries at the moment include &lt;code&gt;vue.js&lt;/code&gt; &amp;amp; &lt;code&gt;web audio API&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Dream goals&lt;/em&gt; is more whimsical. These are things I&#x27;d like to do, but am unlikely to find time for. But by writing them down I can justify a major change in tack if a great opportunity comes along. (“Sure I can blow some money on a &lt;a href=&quot;http://shop.premium-coppers.com/product-category/premium-copper-riveted-union-alembic-stills/&quot;&gt;fancy copper alembic-still&lt;/a&gt;; &lt;code&gt;make some whisky&lt;/code&gt; is on my task list!”). It also helps to keep my procrastination in-check. If I find myself wasting time on some shiny new idea, I can&#x27;t use the old &quot;well, I&#x27;ve always dreamt of doing this&quot; excuse. If I cared enough about it, I&#x27;d have put it on the list!&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Short-term tasks&lt;/em&gt; is the most mundane section, but also the most used and the most useful section. Lately I&#x27;ve been focusing on improving this website. As a result, my list is full of items like &lt;code&gt;setup LetsEncrypt on server&lt;/code&gt; and &lt;code&gt;filter out lang-spam in G. Analytics&lt;/code&gt;. Most of the items in this section are getting checked off, which is a signal that I&#x27;m close to my goal&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn4&quot; id=&quot;fnref4&quot;&gt;[4]&lt;/a&gt;&lt;/sup&gt;. Time to start thinking about the next short-term goal...&lt;/p&gt;
&lt;p&gt;In the past, it has always been the time in-between projects when my focus has dipped. And once I lose my focus, I find it very hard to get back into the groove again. Predicting an imminent &quot;danger zone&quot; helps me sustain a higher level of productivity.&lt;/p&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;update%3A&quot; tabindex=&quot;-1&quot;&gt;Update:&lt;/h2&gt;
&lt;p&gt;Coincidentally, it appears I&#x27;m not the only one who&#x27;s been investigating the Bullet Journal lately:&lt;/p&gt;
&lt;div&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;https://ssl.gstatic.com/trends_nrtr/884_RC03/embed_loader.js&quot;/&gt;
&lt;script type=&quot;text/javascript&quot;&gt;trends.embed.renderExploreWidget(&quot;TIMESERIES&quot;, {&quot;comparisonItem&quot;:[{&quot;keyword&quot;:&quot;bullet journal&quot;,&quot;geo&quot;:&quot;&quot;,&quot;time&quot;:&quot;today 5-y&quot;}],&quot;category&quot;:0,&quot;property&quot;:&quot;&quot;}, {&quot;exploreQuery&quot;:&quot;q=bullet%20journal&quot;,&quot;guestPath&quot;:&quot;https://www.google.co.uk:443/trends/embed/&quot;});&lt;/script&gt;
&lt;/div&gt;
&lt;p&gt;After this post was written, I checked Google&#x27;s Search Trends tool and saw a surprising spike. My original 2013 article always sees a uplift in traffic around the new year, but the last twelve months have seen consistent growth that correlates with the general Google trend. My hope is that everyone who&#x27;s trying out the Bullet Journal (myself included) can turn that interest into a genuine boost for productivity.&lt;/p&gt;
&lt;hr class=&quot;footnotes-sep&quot;/&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn1&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;Credit for the &lt;a href=&quot;http://www.bulletjournal.com/&quot;&gt;Bullet Journal&lt;/a&gt; concept goes to digital product designer &lt;a href=&quot;http://www.rydercarroll.com/&quot;&gt;Ryder Carrol&lt;/a&gt;. &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn2&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;My favourite writing apps are &lt;a href=&quot;https://www.sublimetext.com&quot;&gt;Sublime Text&lt;/a&gt; on my laptops and desktop, and &lt;a href=&quot;https://bywordapp.com/&quot;&gt;Byword&lt;/a&gt; on phone and tablet. I do all my writing in Markdown (be it drafts for complicated emails, notes on work projects, or aide-mémoire). &lt;a href=&quot;#fnref2&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn3&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;The daily re-evaluation of all uncompleted tasks keeps the list fresh. &lt;a href=&quot;#fnref3&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn4&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;The &quot;new year refresh&quot; has passed the 80% complete mark. That&#x27;s farther than I&#x27;ve ever got before. Time to move on to the next project! &lt;a href=&quot;#fnref4&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;</content></entry><entry><title>Well-written HTML doesn&#x27;t need any styling. Except that it does.</title><link href="https://tomhazledine.com/html-doesnt-need-any-styling/"/><updated>2017-01-15T00:00:00Z</updated><id>https://tomhazledine.com/html-doesnt-need-any-styling/</id><content type="html">&lt;p&gt;One of the best things about HTML is that it just works. As with much of the web, things only get weird when designers and developers start adding things. By default, a raw HTML file will render quite nicely in every browser on every device. Hierarchy is clear, lists look like lists, tables look like tables, we have &lt;em&gt;bold&lt;/em&gt; text and &lt;em&gt;italics&lt;/em&gt;, and &lt;a href=&quot;#&quot;&gt;links&lt;/a&gt; (the ‘hyper’ in HTML) are obvious.&lt;/p&gt;
&lt;p&gt;Lately I&#x27;ve discovered a few bloggers who have embraced this quality. &lt;a href=&quot;http://danluu.com/&quot;&gt;Dan Luu&lt;/a&gt;, for instance, is such a developers&#x27;-developer that he doesn&#x27;t even have a stylesheet on his blog. All that matters is the content, free from artifice or sneaky designer-tricks. His writing stands or falls on its own merits. HTML has everything he needs, so why include anything else?&lt;/p&gt;
&lt;p&gt;Myself, I disagree. Reading his articles is &lt;em&gt;hard&lt;/em&gt;, even though they are expertly written. The aesthetic works well for him - it suits the style of his writing, and emphasises his credentials - but there&#x27;s one aspect that makes his pages nigh-on unreadable on all but a few devices: the lines are simply too long.&lt;/p&gt;
&lt;p&gt;My monitor at home is bigger than most, but not huge by modern standards. At this size, most paragraphs appear as just a couple of lines stretching the width of the screen. There&#x27;s a reason books are the size and proportions that they are: there is an upper limit to the line-length that a person can comfortably read.&lt;/p&gt;
&lt;p&gt;Counter to what you might expect, our eyes don&#x27;t smoothly follow the lines on the page. When we read our eyes are actually jumping back and forth in very small movements&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt;. If the lines get too long, our brain struggles to tell which line is which and the movements become unaligned: everything scrambles, and we have to work hard to find our place again. Below a certain length (usually somewhere between 55 and 75 characters) our eyes can easily discern where the next line begins.&lt;/p&gt;
&lt;p&gt;The spacing between the lines also plays a part here (known as &quot;leading&quot; after the strips of lead placed between the lines of text in letterpress printing). Too wide or too tight a space, and our eyes struggle to get their bearings. The best books have just the right balance of leading and line-length. Raw HTML, however, is not at all bothered by the lengths of its lines. Super widescreen display? HTML will keep those lines running from edge to edge, readability be damned.&lt;/p&gt;
&lt;p&gt;There is, of course, an easy fix. All we need to do is add three lines of CSS to our HTML page, and everything looks much better.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;body {
    max-width: 50em;
    padding: 2em 0.5em;
    margin: 0 auto;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Here we&#x27;re setting a &lt;code&gt;max-width&lt;/code&gt;: if we used a simple &lt;code&gt;width&lt;/code&gt;, we&#x27;d force the page to be that wide even on small screens (so we&#x27;d have to scroll sideways to see all our content). This runs counter to the spirit of HTML, which fits to any available space, so using &lt;code&gt;max-width&lt;/code&gt; is better (if the screen is larger than 50em, it will cap the line-length, otherwise it lets HTML do its thing).&lt;/p&gt;
&lt;p&gt;Notice, too, that we&#x27;re using &lt;code&gt;em&lt;/code&gt; units. These are linked to the size of the type (literally the width of a letter &quot;m&quot;), so we can be sure the width will be proportional to the text.&lt;/p&gt;
&lt;p&gt;As for the rest of the rules, the &lt;code&gt;padding&lt;/code&gt; is making sure the text is never jammed uncomfortably close to the edges of the screen, and the &lt;code&gt;margin: 0 auto;&lt;/code&gt; rule then centres the block in the middle of the screen.&lt;/p&gt;
&lt;p&gt;That&#x27;s not a lot of styling, but it has a tremendous impact on the readability of a web page.&lt;/p&gt;
&lt;p&gt;One of the benefits of presenting your content in nothing but HTML is that the browser only has to make a single file request to the server. Traditional CSS lives in its own file, and is therefore another request. Normally that&#x27;s no problem at all, but in this context it&#x27;s literally doubling the amount of load the page places on the server. The simple get-out for this is to in-line the CSS rules within the HTML file. It&#x27;s not stylistically &quot;pure&quot; or &quot;best practice&quot;, but does actually work.&lt;/p&gt;
&lt;p&gt;So next time you&#x27;re swept up in the machismo of &lt;a href=&quot;http://motherfuckingwebsite.com/&quot;&gt;a HTML-purist rallying cry&lt;/a&gt;, spare a thought for your readers and think about your line-length.&lt;/p&gt;
&lt;hr class=&quot;footnotes-sep&quot;/&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn1&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;The tiny eye movements are called &lt;em&gt;saccades&lt;/em&gt;. Our brain is taking-in the whole block of text at once, not just the specific word we&#x27;ve got to. It&#x27;s similar to how we perceive paintings: our eyes can only focus on one tiny part at any one time, but we &quot;see&quot; the picture as a whole. As an interesting aside, the size of the in-focus area you can see at any one time is easy to demonstrate. Hold your arm out in front of you with your thumb pointing up: the in-focus area is roughly the size of your thumbnail. Our brains fill in the rest while our eyes dart around faster than we can perceive. &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;</content></entry><entry><title>n-minute read: calculating an average reading speed</title><link href="https://tomhazledine.com/calculating-reading-speed/"/><updated>2017-01-05T00:00:00Z</updated><id>https://tomhazledine.com/calculating-reading-speed/</id><content type="html">&lt;p&gt;I&#x27;m interested in measuring what effect, if any, displaying an approximate reading-time for articles will have on readers of my site&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt;. Will people be put off by knowing in advance that an article will take a long time to read? Will they gravitate to shorter pieces, or avoid them because they&#x27;re looking for more in-depth content? Will it have no effect at all?&lt;/p&gt;
&lt;p&gt;My hypothesis is this: adding a read-time to post summaries will increase click-throughs from the archive page to full-post views. It reduces the &quot;mystery meat&quot; problem by providing users with objective data about their options, meaning they are better prepared to make a decision about which post to read.&lt;/p&gt;
&lt;p&gt;Because this is an increasingly common idea&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn2&quot; id=&quot;fnref2&quot;&gt;[2]&lt;/a&gt;&lt;/sup&gt;, there are &lt;a href=&quot;http://zurb.com/forrst/posts/Medium_like_estimated_reading_time_in_PHP-G6j&quot;&gt;many&lt;/a&gt; &lt;a href=&quot;https://gist.github.com/mynameispj/3170442&quot;&gt;examples&lt;/a&gt; of reading-time-calculation functions out there. I&#x27;ve borrowed and adapted concepts from all over the place, but diverged from most I saw in two main ways.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Firstly, where others have focused on concision, I have opted for a more verbose style. One of my goals in writing pieces like this is to fully understand the code I&#x27;m working with. Breaking down each discrete operation into its own line (and compulsively commenting everything) ensures I know what every part of the code is doing (and hopefully makes it easier for readers to understand, too).&lt;/li&gt;
&lt;li&gt;Secondly, I&#x27;ve chosen to separate the calculation-logic from display-logic. The working-out of the length of time the content will take to read just needs to output a number. Turning that number into human-readable text is another process, and thus another function in my solution.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &quot;Separation of Concerns&quot; is a fundamental programming concept, and ties in nicely with the WordPress rubric: content-manipulation is for plugins, display-stuff is for themes. If I were planning to release this code, I could make a plugin to handle the calculation and let theme creators outputting the result any which way they choose.&lt;/p&gt;
&lt;h2 id=&quot;calculating-the-time&quot; tabindex=&quot;-1&quot;&gt;Calculating the time&lt;/h2&gt;
&lt;p&gt;Here&#x27;s my final function for calculating the read-time in seconds. This example is written in JavaScript, but only because that&#x27;s what I like to write in. The general gist &lt;em&gt;(count the words, divide by the reading-speed)&lt;/em&gt; can be applied to any language.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;const readingTime = content =&gt; {
    // Predefined words-per-minute rate.
    const wordsPerMinute = 225;
    const wordsPerSecond = wordsPerMinute / 60;

    // Count the words in the content.
    const wordCount = content.split(&quot; &quot;).length;

    // How many seconds (total)?
    seconds = Math.floor(wordCount / wordsPerSecond);

    return seconds;
};
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;displaying-the-time&quot; tabindex=&quot;-1&quot;&gt;Displaying the time&lt;/h2&gt;
&lt;p&gt;When it comes to outputting this calculation to the screen, there are a few steps we need to take. Firstly, my guess is that very few people have an innate understanding of time when it&#x27;s expressed as seconds. Thirty-seconds is a chunk of time I can comprehend, but when we go much above sixty, my instant-comprehension drops dramatically. Without thinking, do you know how long 438 seconds is? I certainly don&#x27;t.&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn3&quot; id=&quot;fnref3&quot;&gt;[3]&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;p&gt;The simplest option would be to convert our time-in-seconds into mm:ss format. And &quot;Minutes and seconds&quot; is a pretty standard way to show short periods of time, so it would solve the intuitive-comprehension problem. In essence, this boils down to converting a decimal number (in &lt;em&gt;base ten&lt;/em&gt;) to a sexagesimal number (&lt;em&gt;base sixty&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;Getting the number of minutes is easy: we just divide the number of seconds by 60 (the number of seconds in a minute), and round down to the nearest whole number:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;const minuteCount = Math.floor(seconds / 60);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Getting the number of seconds is a little tricker, but here modular arithmetic is our friend. What we want is the &lt;em&gt;remainder&lt;/em&gt; (a.k.a. the &lt;em&gt;modulus&lt;/em&gt;) from the minute-calculation, which we get by using the modulo operator:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;const minuteRemainder = seconds % 60;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;getting-fancy-with-our-output&quot; tabindex=&quot;-1&quot;&gt;Getting fancy with our output&lt;/h2&gt;
&lt;p&gt;Simply showing users the minutes-and-seconds that our calculation spits out doesn&#x27;t feel right to me. This is, after all, a very &lt;em&gt;rough&lt;/em&gt; approximation of reading-time, as no two people read at exactly the same speed. I&#x27;d far rather show a more &lt;em&gt;human&lt;/em&gt; result.&lt;/p&gt;
&lt;p&gt;The simplest (but most verbose) way to get the effect I was after was to simply set a custom message if the number of seconds fell within a certain range:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;let message;
if ( seconds &amp;lt; 30 ) {

    message = &#x27;hardly any time at all.&#x27;;

} elseif  ( seconds &amp;lt; 50 ) {

    message = &#x27;less than a minute.&#x27;;

} elseif  ( seconds &amp;lt; 55 ) {

    message = &#x27;nearly a minute.&#x27;;

// ...
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;But this could get tiresome pretty quickly, and I much prefer a more dynamic approach. After a bit of tinkering I finally settled on a system that created a message based around how close the total-length was to a round minute. If the result is within two seconds of a minute (e.g. 122 seconds, or 239 seconds), then the result reads &quot;&lt;code&gt;minuteCount&lt;/code&gt; minutes, on the nose&quot;, and so on and so forth.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;// ...
} else if ( minuteRemainder &amp;amp;lt; 2 || minuteRemainder &gt; 58 ) {

    // If we&#x27;re within +/- 2 seconds of a minute:
    message = `${minuteCount} minutes, on the nose.`;

} elseif ( minuteRemainder &gt; 50 ) {

    // If we&#x27;re within less than 10 seconds short of any minute:
    message = `just shy of ${minuteCount} minutes.`;

// ...
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The last challenge was to convert the raw integers (&lt;code&gt;1&lt;/code&gt;, &lt;code&gt;2&lt;/code&gt;, &lt;code&gt;3&lt;/code&gt;...) into strings (&lt;code&gt;&quot;one&quot;&lt;/code&gt;, &lt;code&gt;&quot;two&quot;&lt;/code&gt;, &lt;code&gt;&quot;three&quot;&lt;/code&gt;...). To do this I&#x27;ve simplified &lt;a href=&quot;http://www.karlrixon.co.uk/writing/convert-numbers-to-words-with-php&quot;&gt;Karl Rixon&#x27;s much more comprehensive solution&lt;/a&gt;. His function handles virtually &lt;em&gt;every&lt;/em&gt; number conceivable, with support for positives, negatives, decimal-points - the works! All we need to do for our current goal is convert the basic integers into strings, and we don&#x27;t even need to go up very far up the number-line, either. It&#x27;s unlikely I&#x27;ll be writing anything that takes more than ten or fifteen minutes to read.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;const dictionary  = {}
    0: &#x27;zero&#x27;,
    1: &#x27;one&#x27;,
    2: &#x27;two&#x27;,
    3: &#x27;three&#x27;,
    4: &#x27;four&#x27;,
    // ... etc.
);

const string = dictionary[number];
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;em&gt;View the full &lt;code&gt;convertNumberToWords()&lt;/code&gt; function I used &lt;a href=&quot;https://gist.github.com/tomhazledine/2964e71499c4fd28e469997933982d52&quot;&gt;in this Gist&lt;/a&gt;. This version uses PHP because it was written for a WordPress site.&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&quot;putting-it-all-together&quot; tabindex=&quot;-1&quot;&gt;Putting it all together&lt;/h2&gt;
&lt;p&gt;With all our functions created, all that&#x27;s left is to &lt;a href=&quot;https://gist.github.com/tomhazledine/a5255b16a29ecb9f2ffb515158402f63&quot;&gt;put it all together&lt;/a&gt; and hook the whole thing up to the content we want to measure (in this instance the WordPress post content):&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;// Get reading time.
const readingTime = readingTime(content);
const readingTimeString = parseReadTime(readingTime);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Whether or not this will actually achieve anything remains to be seen. Will people click-through more when they know how much time they&#x27;ll need to commit up-front? Maybe, maybe not. Either way, I&#x27;ve enjoyed diving into the problem (probably &lt;em&gt;too&lt;/em&gt; deep).&lt;/p&gt;
&lt;hr class=&quot;footnotes-sep&quot;/&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn1&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;&lt;a href=&quot;https://medium.com/remys-blog/first-impressions-of-react-ef780fb33a60#.95xzhexqq&quot;&gt;Medium&lt;/a&gt; is the obvious example, but I&#x27;ve seen it used effectively on other sites, too. The most recent example I saw was on the &lt;a href=&quot;https://boagworld.com/design/do-you-make-users-go-ooh&quot;&gt;Boagworld&lt;/a&gt; site. &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn2&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;This is, of course, on a very trivial scale. But the idea that displaying more information (provided it&#x27;s easily digestible) leads to more decisive action by users has wider implications. Most of my day-to-day work is focused around &quot;moving the needle&quot; on conversion rates. A percentage-point increase in click-throughs to a checkout represents a Job Well Done. &lt;a href=&quot;#fnref2&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn3&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;A big assumption in this project is that there is a uniform reading rate, which there really isn&#x27;t. Most code examples I looked at stuck to a standard words-per-minute rate of 200, but I (very unscientifically) tested my own reading-speed and found it to be closer to 300wpm. The real task at hand here is to give people a rough-estimate, so erring on the side of caution (going at the pace of the slowest) is probably the best option. I eventually settled on 225wpm as a usable middle-ground. &lt;a href=&quot;#fnref3&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;</content></entry><entry><title>You are only as good as your README</title><link href="https://tomhazledine.com/a-good-readme/"/><updated>2016-09-28T00:00:00Z</updated><id>https://tomhazledine.com/a-good-readme/</id><content type="html">&lt;p&gt;Our programming languages substitute the complex logical underpinnings with easy-to-remember words. Typing &lt;code&gt;for&lt;/code&gt; or &lt;code&gt;while&lt;/code&gt; is an abstraction that suits our brains better than a string of ones and zeros. We program using languages &lt;em&gt;we&lt;/em&gt; understand. Code is not for computers, it&#x27;s for us.&lt;/p&gt;
&lt;p&gt;And our code is not just written for ourselves. Other developers will need to read our code and understand it. If we are writing something useful, other people will want to incorporate it in their own work. If we are writing code for a client, somewhere down the line someone else will have to support that code. If you want your code to have a life beyond your own computer, other people will need to be able to read and understand it.&lt;/p&gt;
&lt;h2 id=&quot;we-write-code-for-other-developers.&quot; tabindex=&quot;-1&quot;&gt;We write code for other developers.&lt;/h2&gt;
&lt;p&gt;This is why we comment our code. This is why we use human-readable names for our variables (and let our compilation scripts reduce them to memory-efficient abstractions for us). This is why we respect coding standards and make damned-sure all our indentation is consistent and accurate.&lt;/p&gt;
&lt;p&gt;This is also why the most important file in any project is not your &lt;code&gt;index.html&lt;/code&gt; or your &lt;code&gt;package.json&lt;/code&gt; or your &lt;code&gt;composer.lock&lt;/code&gt;. The most important file in your project is your &lt;code&gt;README.md&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The README file is the simplest file in your project. It doesn&#x27;t control your routing or manage dependencies or run any code at all. It&#x27;s nothing more than a simple text file. Your README is where you tell people what you were doing, what tools you used for what you were doing, and how you did what you were doing. And if you&#x27;re feeling really generous you can tell people how they can add to what you were doing.&lt;/p&gt;
&lt;p&gt;For a new set of eyes looking at your project, the README is their orientation. It&#x27;s the first place they look, and it tells them where they should look next. When we write code we are writing for other developers, and if our READMEs aren&#x27;t useful we may as well not be writing at all.&lt;/p&gt;</content></entry><entry><title>Don&#x27;t turn your problem into your users&#x27; problem</title><link href="https://tomhazledine.com/your-problem-is-not-your-users-problem/"/><updated>2016-08-23T00:00:00Z</updated><id>https://tomhazledine.com/your-problem-is-not-your-users-problem/</id><content type="html">&lt;p&gt;I&#x27;m noticing a tendency for organisations to pass their problems along to their customers, and I wish it didn&#x27;t happen. At its simplest, this issue can be demonstrated by a basic form asking a user to input their name. It&#x27;s common to see two separate fields for first-name and surname, as opposed to one box. As a developer it&#x27;s easier to parse and save structured data when it&#x27;s more precise, so I can see why I&#x27;d want to receive a user&#x27;s name in two parts&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt;. But all I&#x27;m doing is passing that task to the user and saving myself the tricky task of deciphering their potentially-vague input.&lt;/p&gt;
&lt;p&gt;Generally speaking, anything worthwhile has complexity. The complexity has to live &lt;em&gt;somewhere&lt;/em&gt;, and most of the time it&#x27;s up to developers to decide where it goes. Any user-facing interface should strive to make the task as simple as possible for the user, above all other things. This is particularly relevant for e-commerce, where the simplicity of the users&#x27; experience correlates directly to money-made. Every obstacle you put in the users&#x27; path (an extra form-field to fill out, another button to press, an extra decision for them to make) can have a percentage-point impact on the conversion rate. The simpler your process, the fewer people will give up partway through.&lt;/p&gt;
&lt;p&gt;Holiday letting companies are particular offenders in this area. Tied to systems that rely on fixed changeover-days but eager to maximise their availability, they resort to complex short-break rules. You can book on a Friday for three nights, provided that the preceding Monday is already booked and the booking doesn&#x27;t cross a price-band boundary in the company&#x27;s admin system... ouch! Making these clear to the user is a non-trivial task, and slap-dash implementations often leave the user stabbing in the dark and praying they aren&#x27;t presented with yet another incomprehensible &quot;your requested booking does not comply with short-break rules, please try again&quot; message.&lt;/p&gt;
&lt;hr class=&quot;footnotes-sep&quot;/&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn1&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;Conversely, sometimes breaking the input into two-parts can &lt;em&gt;help&lt;/em&gt;&gt; the user. There&#x27;s an argument to made for directing our users to the desired input: when presented with an ambiguous box, the user might not know whether you want their full name or just their first or last name, or their title, or maybe just their initials? Giving them a set of discrete input-fields can make their task clearer to them. This issue can also be addressed by adding sensible placeholder text to the one-box approach. This might all sound overly simplistic, but the same principles apply at all levels of complexity. &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;</content></entry><entry><title>Which do you choose: native app or web app?</title><link href="https://tomhazledine.com/web-apps/"/><updated>2016-01-20T00:00:00Z</updated><id>https://tomhazledine.com/web-apps/</id><content type="html">&lt;p&gt;Native apps are the ones you download to a device and run as a discrete application (hence the name). So-called web-apps perform similar tasks, but run in your browser. But whether we can even consider a website to be an “app” is an altogether more contentious issue.&lt;/p&gt;
&lt;p&gt;Despite what some people might say, I do think a “web-app” is a real thing. Not only that, I think web apps are one of the best things a startup (or anyone, for that matter) can invest their time in.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;There&#x27;s no denying that the boundaries between web-apps and web-sites are blurry. But so are most things we try to define. Arguing about it is nothing more than a distraction.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;why-is-the-existence-of-web-apps-contentious%3F&quot; tabindex=&quot;-1&quot;&gt;Why is the existence of web apps contentious?&lt;/h2&gt;
&lt;p&gt;It&#x27;s easy to understand why people see websites and native apps as separate entities. They have different underlying technologies and usage patterns, after all. And it is the &lt;em&gt;usage&lt;/em&gt; that I think sways the argument in favour of web apps. They &lt;em&gt;are&lt;/em&gt; websites, but we use them as if they are apps.&lt;/p&gt;
&lt;p&gt;Of course, the difference only matters when you&#x27;re arguing about it. Everyone else just gets on with making things. Whether you call it an ‘app’ or a ‘site’ has no impact at all on what your creation actually &lt;em&gt;does&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;I find I just &lt;em&gt;know&lt;/em&gt; which is which. Most websites don&#x27;t have that instinctive &quot;app feel&quot;. E-commerce sites often have complex user-login areas that feel app-like. But I would class those as web-&lt;em&gt;sites&lt;/em&gt;. Post some new content using WordPress and you&#x27;ll encounter many full-blown app characteristics. You need to login; you&#x27;re accomplishing user-centric tasks; you have your own personalised dashboard. Despite all this, I&#x27;d still call the vast majority of WordPress installs web-&lt;em&gt;sites&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;I pleased to report that the web-apps I concern myself with don&#x27;t lie in this grey-area. I&#x27;m not saying there isn&#x27;t an issue here, I&#x27;m just kicking it down the path. The fuzziness is someone-else&#x27;s problem; I&#x27;ve got work to do.&lt;/p&gt;
&lt;h2 id=&quot;why-choose-one-over-the-other%3F&quot; tabindex=&quot;-1&quot;&gt;Why choose one over the other?&lt;/h2&gt;
&lt;p&gt;One main reason native apps are so popular on iPads and iPhones is the iOS browsing experience. It sucks, big-time. Want to switch back to a tab you were on seconds ago? Sorry, you&#x27;re going to have to load the page again! Looked away for a nanosecond? Load the page again! Native apps don&#x27;t have this problem. Build a native app and you have full control over your users&#x27; experience.&lt;/p&gt;
&lt;p&gt;Native apps can also tap into device features with more ease than something running in a browser can. Want to access files, sync with the cloud, or authenticate using an external service? All much more straightforward (for the end user) in an app.&lt;/p&gt;
&lt;p&gt;It&#x27;s easy to see the appeal of a native app. But there are pitfalls and gotchas for a tech startup building their first product. When using a real browser on a real computer, the web wins hands-down every time.&lt;/p&gt;
&lt;h2 id=&quot;why-not-have-both%3F&quot; tabindex=&quot;-1&quot;&gt;Why not have both?&lt;/h2&gt;
&lt;p&gt;In most cases, an app will have a browser version and a native app version. This is a sign of a mature product: the users can do what they need to do wherever they feel most comfortable. Where the distinction comes into play is in the early stages of a new venture.&lt;/p&gt;
&lt;p&gt;Resources are scarce early on. Budgets and deadlines will be tight. Your (small) team&#x27;s technical skills will generally fall into a few key competencies. In these cases, you need to make hard decisions, if only for the sake of expediency.&lt;/p&gt;
&lt;p&gt;Don&#x27;t develop your minimum viable product for every platform available. That would be a staggering waste of resources. Maintaining two (or more) separate codebases will slow you down at the best of times. When you&#x27;re still working on product/market fit, that slowness can be debilitating.&lt;/p&gt;
&lt;h2 id=&quot;this-is-where-web-apps-come-into-their-own.&quot; tabindex=&quot;-1&quot;&gt;This is where web apps come into their own.&lt;/h2&gt;
&lt;p&gt;The web just works. Sure, there may be some technical challenges. Keeping a consistent user experience across platforms is hard, especially when using cutting-edge features. But get it right and your app will run anywhere that can open a website. And that&#x27;s pretty much every device out there.&lt;/p&gt;
&lt;p&gt;As soon as you choose a native platform you&#x27;re closing off your app to a whole swathe of the market. Develop an iOS app, and now no-one on an Android device can use your product. Or anyone on a desktop, or anyone on Windows or Linux or whatever else they might be using.&lt;/p&gt;
&lt;p&gt;Make your app as a website and it will run everywhere (if you&#x27;ve done it right).&lt;/p&gt;
&lt;h2 id=&quot;how-easy-is-it-to-publish-updates%3F&quot; tabindex=&quot;-1&quot;&gt;How easy is it to publish updates?&lt;/h2&gt;
&lt;p&gt;It&#x27;s all well and good releasing Version One of your app, but you&#x27;ll always need to make updates. And if you&#x27;re still working towards product/market fit, regular updates are essential. The ability to stay nimble is crucial if you&#x27;re working in a Lean or Agile environment.&lt;/p&gt;
&lt;p&gt;If you&#x27;ve made a native app, pushing updates is tedious at best. Every time you want to make a change you need to go through the rigmarole of submitting your new code to the App Store. And even once you&#x27;ve passed the App Store code review and approval, that&#x27;s not the end of the story. You still need your users to download the update (and it&#x27;s far from certain they&#x27;ll actually do that at all).&lt;/p&gt;
&lt;p&gt;If you&#x27;re publishing your own web-app, deploying a new update or bugfix is much simpler. Just push your code repository live (and maybe wait for your caches to clear). No outside approval needed. You don&#x27;t even need your users&#x27; permission. With a web-app, the power lies in your own hands.&lt;/p&gt;
&lt;h2 id=&quot;planning-for-the-future-and-dealing-with-growth&quot; tabindex=&quot;-1&quot;&gt;Planning for the future and dealing with growth&lt;/h2&gt;
&lt;p&gt;At some point you &lt;em&gt;will&lt;/em&gt; need to choose one path over another. When you do, you should think about the time when you&#x27;ll be able to branch out again. If you only have the resources to build a web-app &lt;em&gt;or&lt;/em&gt; a native app, don&#x27;t forget to look ahead to when you can have both.&lt;/p&gt;
&lt;p&gt;If your app is a success, you&#x27;ll want to spread to as many platforms as possible. The ultimate aim is, of course, to give your customers as much flexibility and convenience as you can. Alas, bouncing from one platform to another is not a straightforward process. You can&#x27;t just take code written for iOS and run it on an Android device, for instance.&lt;/p&gt;
&lt;p&gt;One of the steps in the creation of any decent app is the creation of a decent API. The API will power the bulk of your app&#x27;s functionality, and you can plug any front-end you like into it. When you expand to other platforms, having a good API means you need not rebuild the entire app from scratch. All you need to do is build a new endpoint.&lt;/p&gt;
&lt;p&gt;The API approach helps whether your going native or web-based first. But it&#x27;s not a silver bullet: building the endpoint will still take time and effort. But developing an API is always easier if your endpoint prototype is web-based. So when prototyping is over, why not reuse the code you&#x27;ve already written for Version One of your app?&lt;/p&gt;
&lt;h2 id=&quot;hiring&quot; tabindex=&quot;-1&quot;&gt;Hiring&lt;/h2&gt;
&lt;p&gt;When it comes to hiring developers to work on your project, the ubiquity of the web is your friend. Talent and experience in web apps are far more common traits than native app skills. Sticking to the fundamental technologies of the web gives you more hiring options.&lt;/p&gt;
&lt;h2 id=&quot;web-apps-are-the-best-option-for-getting-stuff-done%E2%84%A2.&quot; tabindex=&quot;-1&quot;&gt;Web Apps are the best option for Getting Stuff Done™.&lt;/h2&gt;
&lt;p&gt;If you have validated your great idea and are ready to build your MVP, take a serious look at building a web app. It may well save you a lot of time and effort, and will be a strong step in your journey to greatness.&lt;/p&gt;</content></entry><entry><title>Notes from ThingMonk: Day Two</title><link href="https://tomhazledine.com/thingmonk-day-two/"/><updated>2015-12-04T00:00:00Z</updated><id>https://tomhazledine.com/thingmonk-day-two/</id><content type="html">&lt;p&gt;&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt;ThingMonk is a conference “for developers, designers, data wranglers and decision-makers that want to turn ideas and concepts into industrial scale systems&quot;.&lt;/p&gt;
&lt;p&gt;If day one of ThingMonk was mostly about the internet of things at near-scale - IoT for our daily routine, in our houses and in our offices – day two had a more “big picture” focus to it. The headline talks were about large thorny environmental problems, and how big-industry is using IoT to make enormous efficiency savings.&lt;/p&gt;
&lt;hr/&gt;
&lt;h1 id=&quot;day-two&quot; tabindex=&quot;-1&quot;&gt;Day Two&lt;/h1&gt;
&lt;h2 id=&quot;the-ambient-kettle-project&quot; tabindex=&quot;-1&quot;&gt;The Ambient Kettle Project&lt;/h2&gt;
&lt;p&gt;Andy Stanford-Clark, from IBM, kicked-off day two by introducing us to the &lt;em&gt;Hy Pi Zero&lt;/em&gt;. The original &lt;em&gt;Hy Pi&lt;/em&gt; had debuted at ThingMonk 2014 and was a Raspberry Pi powered by a hydrogen fuel cell. The &lt;em&gt;Hy Pi Zero&lt;/em&gt; was the same concept, only this time using the newly-released &lt;em&gt;Raspberry Pi Zero&lt;/em&gt;. It had taken the team at Arcola all the preceding day to get it up-and-running, and was now powering the slide-deck for the presentation.&lt;/p&gt;
&lt;p&gt;He then handed us over to his colleague, Laura Cowen, who talked us through the &quot;Ambient Kettle&quot; she and Andy had been working on.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;It had started when Laura made her kettle post to a custom twitter account every time she made a cup of tea.&lt;/li&gt;
&lt;li&gt;Her mum then started following the kettle&#x27;s account, and Laura tried to think of ways to streamline the &quot;ambient intimacy&quot; her and her mum were experiencing.&lt;/li&gt;
&lt;li&gt;By abstracting the fundamental characteristics of the experience, Laura and Andy then experimented putting those elements together independently of the act of making a cup of tea itself.&lt;/li&gt;
&lt;li&gt;They identified many UX facets: the sound of the water boiling and the click of the kettle, the shape and feel of the physical object, the colour of the kettle&#x27;s indicator lights as it boiled, the fact that the experience needed no configuration at all.&lt;/li&gt;
&lt;li&gt;Iterating over various prototypes, they built a pseudo-kettle that severed as a remote indicator that someone (presumably someone you care about) has just made a cup of tea.&lt;/li&gt;
&lt;li&gt;The end result was a tiny dolls-house scale 3D-printed kettle with an LED and speaker.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;the-convergence-of-iot-and-energy&quot; tabindex=&quot;-1&quot;&gt;The Convergence of IoT and Energy&lt;/h2&gt;
&lt;p&gt;The real show-stopper talk of the conference was given by Tom Raftery, an analyst at GreenMonk (the environment-focused arm of RedMonk; the event organisers).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Energy networks are built around spikes and &quot;peak load&quot; (&lt;em&gt;Bake Off&lt;/em&gt; finishes, and everyone up and down the country puts the kettle on and flushes the loo).&lt;/li&gt;
&lt;li&gt;&lt;em&gt;2°C&lt;/em&gt; = cap for global warming set by 2009 Copenhagen Climate Accord.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;565GtCO&lt;sub&gt;2&lt;/sub&gt;&lt;/em&gt; = Gigatons of CO&lt;sub&gt;2&lt;/sub&gt; needed to reach a 2°C increase (a carbon budget that leaves us with 20-30 years at current emissions rates).&lt;/li&gt;
&lt;li&gt;&lt;em&gt;2795GtCO&lt;sub&gt;2&lt;/sub&gt;&lt;/em&gt; = Proven reserves.&lt;/li&gt;
&lt;li&gt;We&#x27;ve now passed the 400 parts-per-million CO&lt;sub&gt;2&lt;/sub&gt; threshold in the atmosphere, and will never cross it again. The &lt;a href=&quot;https://scripps.ucsd.edu/programs/keelingcurve/&quot;&gt;stats from the Scripps Institution of Oceanography&lt;/a&gt; make for scary reading.&lt;/li&gt;
&lt;li&gt;Electricity Grids are dumb. They only learn about outages when customers phone up to complain. They then need a truck-roll (apparently the biz-speak for “sending a truck”) to diagnose the problem, and then a second truck-roll with the specialist equipment to deal with the issue.&lt;/li&gt;
&lt;li&gt;The grid is provisioned for &#x27;hits&#x27; – the two weeks of the year with peak-demand dictate the infrastructure for the whole system.&lt;/li&gt;
&lt;li&gt;Wind and solar are unpredictable – you can&#x27;t just order-up more capacity to match demand. However, Denmark already meets 140% of its energy demand with wind-power, allowing them to sell-on excess supply.&lt;/li&gt;
&lt;li&gt;Nuclear doesn&#x27;t scale easily: there&#x27;s a 10-20 year runway for new projects.&lt;/li&gt;
&lt;li&gt;1GW is roughly the output of one nuclear power station. China are building 700GW worth of solar production.&lt;/li&gt;
&lt;li&gt;Industrial IoT is often divided into two concerns: &lt;em&gt;Predictive Maintenance&lt;/em&gt; and &lt;em&gt;Demand Management&lt;/em&gt;. Dynamic management of energy demand could be the silver-bullet to deal with the problem of un-environmental energy production.&lt;/li&gt;
&lt;li&gt;Connected devices can look at energy prices, and when the price drops suck up all the energy they can store. Increased storage capacity helps even out the miss-match between supply and demand.&lt;/li&gt;
&lt;li&gt;Energy from renewables is always cheaper: fixed costs mean &#x27;old&#x27; providers drop out of the market when the price drops below a certain point. Renewables can sell at any price.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;becoming-a-digital-industrial-company&quot; tabindex=&quot;-1&quot;&gt;Becoming a Digital Industrial Company&lt;/h2&gt;
&lt;p&gt;Jeremiah Stone from GE spoke about how his company is transitioning from a traditional heavy-industry &amp;amp; manufacturing company into one that fully realises the potential of &#x27;digital&#x27;. His colleague Stephan King then gave a demo of their new IoT cloud platform (all buzz-words, little substance, very boring).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GE are adding analytics infrastructure to their &lt;em&gt;massive&lt;/em&gt; fleet of trains * Data fuels insight: using their new analytics, they discovered they needed to wash jet engines that operate in dusty environments, saving themselves expensive replacements (and avoiding potential fleet-grounding from the FAA) and saving $7m p.a. in fuel costs.&lt;/li&gt;
&lt;li&gt;Every extra 1mph in capacity generated on the US rail network equates to $200k in savings.&lt;/li&gt;
&lt;li&gt;In windfarms, turbines create a cone of turbulence behind them. Using &#x27;smart&#x27; blades that can adjust their angle based on live data means they can reduce turbulence and increase efficiency across the whole farm.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;log%2C-i-am-your-father&quot; tabindex=&quot;-1&quot;&gt;Log, I Am Your Father&lt;/h2&gt;
&lt;p&gt;James Hodge &amp;amp; Matt Davies came from Splunk (one of the event sponsors). Splunk deal with data analytics.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A lot of data already exists, unused, in log files: we just don&#x27;t know we have it.&lt;/li&gt;
&lt;li&gt;Data like this can fuel the “Build-&gt;Measure-&gt;Learn” cycle: Have an idea, build a product, measure the data that product creates, and learn from that data to generate new ideas.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;we-need-to-talk-about-telco&quot; tabindex=&quot;-1&quot;&gt;We Need to Talk About Telco&lt;/h2&gt;
&lt;p&gt;Keith O&#x27;Byrne works at Asavie, a large-scale telecommunications infrastructure company.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Connectivity is a big issue for IoT projects.&lt;/li&gt;
&lt;li&gt;No-one will run a copper cable into a power station. In that scenario, connectivity &lt;em&gt;must&lt;/em&gt; be wireless.&lt;/li&gt;
&lt;li&gt;All IoT plans start like this: “step one: assume internet”.&lt;/li&gt;
&lt;li&gt;Tesla (the electric car people) addressed this problem badly - they routed the in-car WiFi hotspot through Spain. It seemed an economical solution, but had side-effects: Google was in Spanish, and location-based services (such as BBC iPlayer in the UK) would not work.&lt;/li&gt;
&lt;li&gt;If you need to use a SIM in your project, use a Global Sim. They have better connectivity because they can use any network, the support and API is much better, and there&#x27;s safety in numbers - most big systems use them. The only downside is they don&#x27;t have a phone number, so take a bit more tech-savvy to get them working.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;industry-things-at-scale&quot; tabindex=&quot;-1&quot;&gt;Industry Things at Scale&lt;/h2&gt;
&lt;p&gt;Redmonk analyst Tomas Grassl spoke about the difference between consumer and business IoT. Consumer IoT has many areas (health, household appliances, toys, etc.) but the business space is where the revolutionary work is being done.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Big ports cannot simply build new roads into big cities. They need to leverage efficiencies in order to grow. E.g. routing trucks to overflow carparks based on live data.&lt;/li&gt;
&lt;li&gt;Smart bathrooms in sports-stadia allow for efficient management of supply (water, soap, loo-roll etc.) to deal with massive demand in short time-windows.&lt;/li&gt;
&lt;li&gt;$447bn is spent annually on maintenance.&lt;/li&gt;
&lt;li&gt;Pirelli tires for trucks now measure speed, heat, pressure, etc. They can be replaced &lt;em&gt;before&lt;/em&gt; they fail, and the company has changed to a new business model: leasing the tires rather than selling them.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=O1Rzyn2OIkI&quot;&gt;James Gosling&#x27;s IoT talk&lt;/a&gt; is well worth a watch, apparently.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;brought-to-you-by-the-number-ten&quot; tabindex=&quot;-1&quot;&gt;Brought to You by the Number Ten&lt;/h2&gt;
&lt;p&gt;Recent AWS aqui-hiree Kyle Roche recreates the &lt;a href=&quot;https://www.youtube.com/watch?v=0fKBhvDjuy0&quot;&gt;Eames&#x27; famous Powers of Ten video&lt;/a&gt;, but talking about IoT tech at the different scales, with various insights along the way.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;When automatic gunshot detectors were installed in New Jersey, authorities discovers that only 38% of gunshots were reported by humans.&lt;/li&gt;
&lt;li&gt;The F-35 jet&#x27;s HUD allows the pilot to see 360° &#x27;through&#x27; the plane. It also orders its own replacement parts.&lt;/li&gt;
&lt;li&gt;From source to house, the US mains loses 16% of its water.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;from-killer-robot-to-killer-product&quot; tabindex=&quot;-1&quot;&gt;From Killer Robot to Killer Product&lt;/h2&gt;
&lt;p&gt;Pat Patterson is a “Developer Evangelist Architect” for event-sponsor SalesForce. His job sounds amazing: traveling from event to event showcasing interesting techy things.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A snazzy demo can be very useful and powerful as a tool to drive engagement (his main example was an industrial robotic arm, normally used for manufacturing, that he&#x27;d taught to do a dance).&lt;/li&gt;
&lt;li&gt;We&#x27;re living in an age of cheap components - creating a working prototype for an IoT project can be very quick and very affordable.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr/&gt;
&lt;p&gt;&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn2&quot; id=&quot;fnref2&quot;&gt;[2]&lt;/a&gt;&lt;/sup&gt;On the whole, ThingMonk 2015 was amazing. I met loads of people working on all sorts of interesting projects, and it hammered home to me that the IoT revolution has already started. I&#x27;ve come away inspired to get even more stuck-in to my IoT side-projects, and with a feeling that it is now essential to start bringing IoT concepts into my day-to-day work too.&lt;/p&gt;
&lt;hr class=&quot;footnotes-sep&quot;/&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn1&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;These are my notes from day two of the conference. If you want to catch-up, read &lt;a href=&quot;https://tomhazledine.com/thingmonk-day-one&quot;&gt;my notes from the first day of ThingMonk&lt;/a&gt;. &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn2&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;If you missed them, don&#x27;t forget to check out &lt;a href=&quot;https://tomhazledine.com/thingmonk-day-one&quot;&gt;my notes from day one of ThingMonk&lt;/a&gt;. &lt;a href=&quot;#fnref2&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;</content></entry><entry><title>Notes from ThingMonk: Day One</title><link href="https://tomhazledine.com/thingmonk-day-one/"/><updated>2015-12-03T00:00:00Z</updated><id>https://tomhazledine.com/thingmonk-day-one/</id><content type="html">&lt;p&gt;&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt;ThingMonk was wall-to-wall interesting and inspiring. I took lots of notes, but naturally focused on the areas that interested me most, and was often too busy trying to take it all in to write anything down...&lt;/p&gt;
&lt;p&gt;ThingMonk styles itself as a conference “for developers, designers, data wranglers and decision-makers that want to turn ideas and concepts into industrial scale systems”.&lt;/p&gt;
&lt;p&gt;I was there with my web-developer hat on, but was keeping my eyes peeled for hints at the future of business-tech in general. I&#x27;m already deeply embedded in data-visualisation and dynamic analytics, but eager to connect my digital skills to a hardware framework.&lt;/p&gt;
&lt;h1 id=&quot;day-one&quot; tabindex=&quot;-1&quot;&gt;Day One&lt;/h1&gt;
&lt;h2 id=&quot;bullet-proof-%26-profitable-things&quot; tabindex=&quot;-1&quot;&gt;Bullet-Proof &amp;amp; Profitable Things&lt;/h2&gt;
&lt;p&gt;Ubuntu guru and part-time space tourist &lt;a href=&quot;http://canonical.com/&quot;&gt;Mark Shuttleworth&lt;/a&gt; made for a high-profile, big-picture opening speaker. It was interesting to hear that his idea of &quot;scale&quot; was not massive super-computers costing exorbitant amounts of money, but rather lots and lots of cheap, tiny micro-computers all working in unison over a network.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;It takes five to ten years to make an overnight success, and &lt;em&gt;now&lt;/em&gt; is the time to be getting deep into IoT. Wait 12 months and the train will have left the station.&lt;/li&gt;
&lt;li&gt;Real disruption comes from riding a wave of change, and the disaggregation and componentisation we&#x27;re seeing in the IoT sphere at the moment will inevitably lead to the &quot;hockey stick&quot; graph of innovation.&lt;/li&gt;
&lt;li&gt;Data can be a liability - you must have a responsible security strategy when handling lots of data. One mistake or hack can cripple a big-data company.&lt;/li&gt;
&lt;li&gt;The next version of Ubuntu will be highly modular. Apps will be isolated and contained, and will each have a predefined area they can write to. This allows for robust version control across the system, and no more fear when updating the OS.&lt;/li&gt;
&lt;li&gt;The “Internet of Toys” is going to be more influential than people realise. It&#x27;s easier to innovate with things that won&#x27;t kill people. Long-term projects will have to use standards already set by short-term projects.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;coherent-ux-for-distributed-systems&quot; tabindex=&quot;-1&quot;&gt;Coherent UX for Distributed Systems&lt;/h2&gt;
&lt;p&gt;User-experience expert &lt;a href=&quot;http://www.designingconnectedproducts.com/&quot;&gt;Claire Rowland&lt;/a&gt; had some fascinating insights into the challenges of managing UX in a world of connected &quot;things&quot;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;We don&#x27;t expect &quot;things&quot; to behave like the internet. Light bulbs shouldn&#x27;t &quot;buffer&quot;.&lt;/li&gt;
&lt;li&gt;Interfaces (if they are honest) should introduce the concept of failure to users. Don&#x27;t fake success when a user clicks a button in a low-connectivity area: show in interstitial &quot;loading&quot; state wherever possible.&lt;/li&gt;
&lt;li&gt;You often have to choose between fuzzy-and-current or accurate-but-old. A cat-tracker can either say &quot;Mrs. Tibbles was at this exact location 3 hours ago&quot; or &quot;Mrs. Tibbles is somewhere within this range right now&quot;.&lt;/li&gt;
&lt;li&gt;Linking physical and digital interfaces takes special thought. A traditional dimmer-switch always knows it&#x27;s ‘state’, where as a remotely-controlled version has to account for the fact that the ‘state’ of the bulb might have changed since it last checked.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;from-2-to-2-billion%3A-how-to-design-for-scale.&quot; tabindex=&quot;-1&quot;&gt;From 2 to 2 billion: How to Design for Scale.&lt;/h2&gt;
&lt;p&gt;Sam Winslet &amp;amp; Sophie Riches from IBM presented us with the &quot;Seven Deadly Sins for Design of IoT&quot;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Greed: designing for yourself.&lt;/li&gt;
&lt;li&gt;Envy: being a copycat.&lt;/li&gt;
&lt;li&gt;Gluttony: focusing on features &amp;amp; functions.&lt;/li&gt;
&lt;li&gt;Wrath: assuming your users know what IoT is.&lt;/li&gt;
&lt;li&gt;Lust: IoT for the sake of it, without any real ideas.&lt;/li&gt;
&lt;li&gt;Pride: don&#x27;t over-complicate and don&#x27;t over-simplify. IBM use a strategy they call “Progressive Disclosure”: where an interface reveals deeper levels of detail as a user interacts with it.&lt;/li&gt;
&lt;li&gt;Sloth: assuming users have ∞ patience or care about you/your product.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;hacking-nfc&quot; tabindex=&quot;-1&quot;&gt;Hacking NFC&lt;/h2&gt;
&lt;p&gt;Nick Ludlum from &lt;a href=&quot;%5BMoo%5D(http://moo.com/)&quot;&gt;Moo&lt;/a&gt; gave (with a little help from colleague Kai Turner) one of the more engaging and tech-focused presentations of the event. The team at Moo have (after considerable time spent in R&amp;amp;D) figured out how to print NFC chips into business cards.&lt;/p&gt;
&lt;p&gt;Every attendee at the conference was given a Moo business card on arrival, which was embedded with an NFC chip with tokens for free coffee and beer.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;For NFC to work, you need a chip and an antenna. The chip is tiny – literally mm across – and the antenna gets printed between to laminated sheets of paper using conductive silver ink. This means the finished business card looks and feels just like a regular card - after all, it&#x27;s still mostly just card and ink.&lt;/li&gt;
&lt;li&gt;To build a reader, all you need is a &quot;smarter&quot; chip, an antenna, and a power source. Android phones have the ability to be NFC readers, but IOS ones do not.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;nfcpy&lt;/code&gt; is the Python library for NFC.&lt;/li&gt;
&lt;li&gt;The cards can store a variety of MIME-type information (webpages, lat. &amp;amp; lng. data, etc) but URLs are the most versatile (and can be re-purposed without reprogramming the card itself).&lt;/li&gt;
&lt;li&gt;Security is still ongoing project, and the Moo team would welcome any insights or help in that area that the developer community can provide.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;the-things-network%3A-london&quot; tabindex=&quot;-1&quot;&gt;The Things Network: London&lt;/h2&gt;
&lt;p&gt;Mark Hill, from &lt;a href=&quot;http://opentrv.org.uk/&quot;&gt;Open TRV&lt;/a&gt; (a company that makes smart Thermostatic Radiator Valves) got the short-straw: his talk was right before lunch, and therefore had to be shortened because the conf. was running over time.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://thethingsnetwork.org&quot;&gt;The Things Network&lt;/a&gt; is a low-power, wide-area network.&lt;/li&gt;
&lt;li&gt;Crowdsourced a complete city-wide IoT data network in Amsterdam.&lt;/li&gt;
&lt;li&gt;Launching the network in cities across the world. London had its network launched this month.&lt;/li&gt;
&lt;li&gt;Powered by gateways installed on roofs of businesses, accessible to all. ($1000 - $1500 per gateway).&lt;/li&gt;
&lt;/ul&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;data-gravity-%26-time-series&quot; tabindex=&quot;-1&quot;&gt;Data Gravity &amp;amp; Time-series&lt;/h2&gt;
&lt;p&gt;Dave McCrory, allegedly famous for for coining the term “data gravity”, delivered an engaging talk with a charming hand-drawn slide-deck. He touched briefly on how data != information, but his main point was that dealing with time (in an IoT setting) is important but very, very hard.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Data Gravity: data has a &#x27;weight&#x27; and can be hard to deal with. Some datasets might take 40 years to even upload, let alone process.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;0&lt;/code&gt; is just data. &lt;code&gt;0°C&lt;/code&gt; is data with context. &lt;code&gt;0°C in London today&lt;/code&gt; is information.&lt;/li&gt;
&lt;li&gt;When you are working with real-time analytics, how do you deal with that data? System clocks become important - do you trust your machine, your cloud server, or the machine in the field?&lt;/li&gt;
&lt;li&gt;Do you deliver a constant stream of data? Sometimes it might be better to time-stamp it and package it up, then send packets of data at regular intervals. That leads to less chance of drops in connection causing data loss.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;the-secret-life-of-buildings&quot; tabindex=&quot;-1&quot;&gt;The Secret Life of Buildings&lt;/h2&gt;
&lt;p&gt;It was interesting to head Yodit Stanton&#x27;s insights into working with “connected“ buildings, particularly some of the pitfalls and unexpected issues.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Her company &lt;a href=&quot;https://www.opensensors.io/&quot;&gt;opensensors.io&lt;/a&gt; deals with commercial spaces with pre-existing Building Management Systems (BMSs).&lt;/li&gt;
&lt;li&gt;Automation in a machine-to-machine sense (M2M) has been around for years: office lights that turn on when you enter the room, automatic doors, etc.&lt;/li&gt;
&lt;li&gt;Learning about a building&#x27;s &#x27;health&#x27; in the form of lighting-levels, environmental factors, footfall, etc. can give you insight into employee absenteeism, efficiency of your workforce, and on and on...&lt;/li&gt;
&lt;li&gt;Average cost of one desk in London is £12k p.a. Small percentage increases in efficiency can reap big rewards.&lt;/li&gt;
&lt;li&gt;Legacy protocols (&lt;code&gt;bacnet&lt;/code&gt;, &lt;code&gt;dali&lt;/code&gt;, &lt;code&gt;modbus&lt;/code&gt;, &lt;code&gt;knx&lt;/code&gt;) are building-data standards and will be around for a while. Contracts are typically 15-20 years long, and cost between £50k and £200k. They won&#x27;t be thrown out anytime soon.&lt;/li&gt;
&lt;li&gt;They lock down their data too much. None of those services have an API.&lt;/li&gt;
&lt;li&gt;Open Source integrations are more sustainable and easier to manage.&lt;/li&gt;
&lt;li&gt;Don&#x27;t use WiFi - there are “edge dependencies” on people (in one example, an office manager unplugged the wi-fi router every night!).&lt;/li&gt;
&lt;/ul&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;it&#x27;s-none-of-your-effing-business&quot; tabindex=&quot;-1&quot;&gt;It&#x27;s none of your effing business&lt;/h2&gt;
&lt;p&gt;The award for most curmudgeonly speaker at the event goes to Boris Adryan (according to ThingMonk host James Governor). Boris devoted a large portion of his talk to dissecting an article depicting a &lt;a href=&quot;http://knowledge.openboxsoftware.com/blog/the-evolution-of-business-intelligence&quot;&gt;near-future IoT-fueled wakeup routine&lt;/a&gt;. The post is well-worth a read.&lt;/p&gt;
&lt;p&gt;He also touched on machine learning, and I started craving a cup of tea and took fewer notes... In short, we need our systems to be smart because people instinctively lack an understanding of statistical p-values.&lt;/p&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;things%2C-people%2C-and-beer&quot; tabindex=&quot;-1&quot;&gt;Things, People, and Beer&lt;/h2&gt;
&lt;p&gt;Craig Cmehil, from &lt;a href=&quot;http://go.sap.com/uk/index.html&quot;&gt;SAP&lt;/a&gt;, subtitled his talk “voice as an alternative user interface for analytics”. He gave a demonstration of the voice-activated Amazon Echo, essentially a programmable Siri in a large box.&lt;/p&gt;
&lt;p&gt;He ran a mini competition, too, where he gave away an Echo (not yet available in Europe) which involved some live-coding: always a brave mood in a live presentation...&lt;/p&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;iot-device-management&quot; tabindex=&quot;-1&quot;&gt;IoT Device Management&lt;/h2&gt;
&lt;p&gt;Juan Perez (from Microsoft) said some stuff about Azure (a new MS Cloud platform or something-or-other). I may have slept through this one...&lt;/p&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;welcome-to-the-conversation&quot; tabindex=&quot;-1&quot;&gt;Welcome to the Conversation&lt;/h2&gt;
&lt;p&gt;The official father of the term “Silicon Roundabout”, Matt Biddulph, closed day one with a talk about how &#x27;conversation&#x27; can help solve some of the main issues with many IoT devices. He was very coy about his new venture, &lt;a href=&quot;http://thington.com/&quot;&gt;Thington&lt;/a&gt;, but hinted that it will be using this concept of conversation in conjunction with the “social graph” when it launches in early 2016.&lt;/p&gt;
&lt;p&gt;Traditional light-bulbs are an interface an messaging bus. A light-switch is a state messaging transport. Adding connectivity to a bulb (&lt;em&gt;a la&lt;/em&gt; Philips Hue) adds issues:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;latency&lt;/li&gt;
&lt;li&gt;state&lt;/li&gt;
&lt;li&gt;consensus&lt;/li&gt;
&lt;li&gt;trust&lt;/li&gt;
&lt;li&gt;location&lt;/li&gt;
&lt;li&gt;power&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There&#x27;s an &#x27;old&#x27; scholarly article that outlines the 8 fallacies of distributed computing:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The network is reliable.&lt;/li&gt;
&lt;li&gt;Latency is zero.&lt;/li&gt;
&lt;li&gt;Bandwidth is infinite.&lt;/li&gt;
&lt;li&gt;The network is secure.&lt;/li&gt;
&lt;li&gt;Topology doesn&#x27;t change.&lt;/li&gt;
&lt;li&gt;There is one administrator.&lt;/li&gt;
&lt;li&gt;Transport cost is zero.&lt;/li&gt;
&lt;li&gt;The network is homogeneous.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Matt&#x27;s “New fallacies of Distributes &lt;em&gt;Services&lt;/em&gt;”:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Devices are powered.&lt;/li&gt;
&lt;li&gt;Devices are reachable.&lt;/li&gt;
&lt;li&gt;Devices stay in one place.&lt;/li&gt;
&lt;li&gt;Messages can be trusted.&lt;/li&gt;
&lt;li&gt;Causality is unambiguous.&lt;/li&gt;
&lt;li&gt;All device state is known.&lt;/li&gt;
&lt;li&gt;There is one clock.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;How do we solve these issues? Simple: a conversation. If the devices can &#x27;talk&#x27; to one-another, they can iron out inconsistencies and neutralize many of the problems.&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;&lt;s&gt;At some point in the next week or so (mid-late Dec 2015) I&#x27;ll post my notes from day 2 of ThingMonk. I&#x27;ll add the link here, but if you&#x27;re really desperate not to miss out, drop me a line (tom@tomhazledine.com) and I&#x27;ll add you to the slowly-growing list of people who I&#x27;ll email when I&#x27;ve published the notes.&lt;/s&gt; &lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn2&quot; id=&quot;fnref2&quot;&gt;[2]&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;hr class=&quot;footnotes-sep&quot;/&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn1&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;These are my notes from day one of the conference. You can read my &lt;a href=&quot;https://tomhazledine.com/thingmonk-day-two&quot;&gt;notes from the second day here&lt;/a&gt;. &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&quot;fn2&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;You can read my &lt;a href=&quot;https://tomhazledine.com/thingmonk-day-two&quot;&gt;notes from the second day here&lt;/a&gt;. &lt;a href=&quot;#fnref2&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;</content></entry><entry><title>Why doesn’t everyone have an Internet Fridge?</title><link href="https://tomhazledine.com/internet-fridge/"/><updated>2015-08-05T00:00:00Z</updated><id>https://tomhazledine.com/internet-fridge/</id><content type="html">&lt;img class=&quot;post-content__image&quot; src=&quot;/images/articles/fridge.png&quot; alt=&quot;Heath Robinson internet fridge&quot;/&gt;
&lt;p&gt;The great white hope of the Internet Of Things is the internet-connected fridge. It&#x27;s the go-to example when trying to explain IOT to lay people. &quot;Imagine what you could do if your fridge was connected to the web!&quot; So why don&#x27;t we have them yet? And do we really want them? Or even need them?&lt;/p&gt;
&lt;p&gt;The &quot;Internet of Things&quot; is not about adding the internet to devices. Being able to access the internet through a fridge gives us nothing. There&#x27;s no earthly benefit to having your social-network connections &quot;like&quot; your fridge, and there are few scenarios where you&#x27;d want to &quot;share&quot; your #fridge.&lt;/p&gt;
&lt;p&gt;More accurately, there are few occasions when I&#x27;d want you to share your fridge with me. In person, it&#x27;s different. I definitely want you to share: I&#x27;ll have a cold beer, please, and maybe a sandwich? Digitally, however? No way.&lt;/p&gt;
&lt;p&gt;The noughties idea of an internet-connected device was simple. We can access the internet wherever we want: access email through the TV, get the news from your microwave, do your shopping through the fridge! Simple, but pointless once smartphones achieved ubiquity. Why wait for the fridge to boot-up when my phone&#x27;s already in my pocket?&lt;/p&gt;
&lt;p&gt;There&#x27;s no aspect of the old, clichéd example of an &quot;internet-fridge&quot; that you couldn&#x27;t better achieve by glue-gunning an iPad onto the front of a regular fridge. And that would be more effective and cheaper than a monstrous over-priced, internet-enabled fridge.&lt;/p&gt;
&lt;h2 id=&quot;where&#x27;s-the-win%3F&quot; tabindex=&quot;-1&quot;&gt;Where&#x27;s the win?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Where things get really interesting, and where IOT really comes into its own, is when we switch from accessing the internet through our devices to accessing our devices through the internet.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;If a component moves, it will heat up. If it heats up, it will distort and eventually wear-out. Tiny sensors are now cheap and easily available, and connecting them to the internet is also cheap and easy. It&#x27;s the perfect-storm to herald the age of IOT. Put a sensor on something that moves and connect it to the internet, and suddenly you can make efficiency savings.&lt;/p&gt;
&lt;p&gt;At scale, this is for wheels and gears on industrial machinery. If you know when a component will break, you can replace or fix it before it breaks. This knowledge will save you time and money. In the consumer marketplace, the wins are less tangible, but more relateable.&lt;/p&gt;
&lt;h2 id=&quot;how-would-this-manifest-itself-in-a-fridge%3F&quot; tabindex=&quot;-1&quot;&gt;How would this manifest itself in a fridge?&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;The cooling mechanism inside the fridge has broken: sound the alarm!&lt;/li&gt;
&lt;li&gt;The freezer door has been left open for more than 10 minutes: text alert!&lt;/li&gt;
&lt;li&gt;You&#x27;re shopping, but can&#x27;t remember what you have already: a webcam snapshot of the inside of your fridge gets sent straight to your phone.&lt;/li&gt;
&lt;li&gt;You live in the future, where every consumer good has a sensor inside the packaging. Your fridge acts as a hub that sends useful data out to you. The milk carton is 32% full. The quiche is 2-days 7-hours away from its Best Before date. The veg drawer is giving off a high proportion of noxious gases: I guess the peppers have gone off; here&#x27;s a photo so you can decide for yourself.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;why-hasn&#x27;t-it-happened-yet%3F&quot; tabindex=&quot;-1&quot;&gt;Why hasn&#x27;t it happened yet?&lt;/h2&gt;
&lt;dl&gt;
&lt;dt&gt;1: The runway for white-goods is too long.&lt;/dt&gt;
&lt;dd&gt;Iteration takes decades. Traditional IOT needs a much much shorter iteration cycle. By the time a traditional incumbent gets a product to market it has become so overwhelmed by extra features and catches for obscure edge-cases that the primary objectives have been lost. Simplicity is just not an option for these companies, and that it why they will always fail.&lt;/dd&gt;
&lt;dt&gt;2: People buy fridges very infrequently.&lt;/dt&gt;
&lt;dd&gt;If an incumbent manufacturer get their product in your home, it’s going to be there for ten years or more. Give that product the ability to cross-sell other products, and that incumbent has a marketing beachhead in your kitchen. That’s not something they’ll be able to resist. If you get an Internet Fridge from an established white-goods manufacturer, your fridge will spam you.&lt;/dd&gt;
&lt;dt&gt;3: White-goods manufacturers are not software companies.&lt;/dt&gt;
&lt;dd&gt;“Smart” thermostats, for example, have been around for years but have always been ugly and nigh-on unusable. Nest are not doing anything particularly new, but they have an eye for details and user experience, and are confident in their own value. It’s the Apple effect all over again. Only one company in every thousand is actually any good. Getting “normal” people to interact seamlessly with technology is a tough sell — can your mum use the video recorder yet?&lt;/dd&gt;
&lt;/dl&gt;
&lt;blockquote&gt;
&lt;p&gt;Making user-friendly software is hard. Making user-friendly hardware is hard. Doing both together is even harder, by many orders of magnitude.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;post-content__image-wrapper&quot;&gt;
    &lt;img class=&quot;post-content__image&quot; src=&quot;/images/articles/fridge2.png&quot; alt=&quot;&quot;/&gt;
    &lt;figcaption class=&quot;post-content__caption&quot;&gt;The unintuitive interface from the depths of hell that I have to decipher every time I want to bump up the heat, and a Nest thermostat that makes me wish my life was more like the fancy people I see in magazines.&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;dl&gt;
&lt;dt&gt;4: White-goods manufacturers do not sell to consumers: they sell to retailers.&lt;/dt&gt;
&lt;dd&gt;They don’t understand their end-users in the way that a regular customer-facing company does. Without that understanding, they’ll never make an innovative product that can truly excite us.&lt;/dd&gt;
&lt;/dl&gt;
&lt;img class=&quot;post-content__image&quot; src=&quot;/images/articles/fridge3.png&quot; alt=&quot;&quot;/&gt;
&lt;dl&gt;
&lt;dt&gt;5: It increases the cost across the board.&lt;/dt&gt;
&lt;dd&gt;Adding IOT capability makes the products more expensive, and only a fraction of the current market would see any real value from them. I know from personal experience that only a small percentage of people can see the potential of the internet , let alone the Internet of Things. Commercial success in this field is going to take a revolution in consumer-mindset.&lt;/dd&gt;
&lt;dt&gt;6: The business model doesn’t suit the incumbents.&lt;/dt&gt;
&lt;dd&gt;Another often-overlooked aspect of “The Internet” is that it’s not free and it does exist in a physical world. It needs infrastructure and servers, and what that means in business terms is recurring costs.
Suddenly your white-goods manufacturer has to deal with support and maintenance. That’s not what they signed up for, that’s not where their expertise lies. They’ve spent decades implementing “planned obsolescence”.
To justify implementing IOT into their products, these companies will have to be sure of generating the recurring revenue to match the recurring costs. Which brings us back to the fridge that sends you spam…&lt;/dd&gt;
&lt;/dl&gt;
&lt;h2 id=&quot;so-we-need-a-start-up-to-make-the-internet-fridge%3F&quot; tabindex=&quot;-1&quot;&gt;So we need a start-up to make the Internet Fridge?&lt;/h2&gt;
&lt;p&gt;To create the Internet Fridge we all want needs serious innovation, and all the evidence suggests the big incumbent white-goods manufacturers just aren’t up to the task. This is where the mythical Start Up™ can help. Those guys live for innovation and disruption, right? Well, maybe…&lt;/p&gt;
&lt;p&gt;To bootstrap an idea into existence you need a short iteration cycle. Try something, watch it fail, learn from the failure, improve the next version. Try something, fail, learn, improve. Try, fail, learn, improve. And so on. It’s a pattern that has worked for almost every successful start-up out there.&lt;/p&gt;
&lt;p&gt;This approach works really well in the software and internet spheres where you can ship updates and bug-fixes as often as you like. With hardware, things get much messier. There’s no continuous deployment or integration for fridges. If your first version doesn’t work, you need a product recall.&lt;/p&gt;
&lt;p&gt;And just getting to that first version in the first place is hard, for all the reasons we outlined above. The lead-times are long and manufacturing is only cost-effective at scale, so rapid-prototyping is both hard and expensive.&lt;/p&gt;
&lt;h2 id=&quot;what-we-need-is-an-apple-for-white-goods.&quot; tabindex=&quot;-1&quot;&gt;What we need is an Apple for white-goods.&lt;/h2&gt;
&lt;p&gt;We need a large established company that values good design, leads the field in innovation, and isn’t afraid of changing a premium for quality. They need to have experience in manufacturing, and also be at the top of their game with software too. They need deep pockets and a long-term vision.&lt;/p&gt;
&lt;p&gt;There are companies out there that could do it. Occulus are working at the intersection of hardware and software: investing in their headsets and the digital systems that power them. Nest are pushing the boundaries of what we expect from a home appliance: beautiful and functional.&lt;/p&gt;
&lt;p&gt;Traditional white-goods — fridges, freezers, dishwashers, washing-machines — they all suffer from being both hard to build and not very sexy. Whoever creates the perfect Internet Fridge will no doubt make a pretty penny, but with such imposing obstacles in the way, I can’t see anyone getting there any time soon.&lt;/p&gt;</content></entry><entry><title>Getting started with inline SVG icons</title><link href="https://tomhazledine.com/inline-svg-icons/"/><updated>2015-05-31T00:00:00Z</updated><id>https://tomhazledine.com/inline-svg-icons/</id><content type="html">&lt;p&gt;I&#x27;ve long been an advocate of using icon fonts. They&#x27;re resolution-independent, light-weight, and stylable with CSS. It turns out they&#x27;re not the best option: inline SVG icons are better in almost every way.&lt;/p&gt;
&lt;p&gt;We should all know by now that using raster images for icons is a bad idea. Limiting ourselves to one set resolution is not how we work in a multi-device ecosystem. It&#x27;s not responsive, it&#x27;s not performant, it&#x27;s not nice.&lt;/p&gt;
&lt;p&gt;For a while it seemed that Icon Fonts were the answer. They&#x27;re vector based and therefore resolution-independent. You can style them with CSS. They have smaller file sizes than .JPGs or .PNGs, so they improve a site&#x27;s performance. A font file is one asset to download (more http requests = poorer site performance), so we don&#x27;t need to mess around with image sprites any more. And on top of all that, icon font creation can be easily automated with your task-runner of choice: simply drop your icon .SVGs into a folder and you&#x27;re good to go.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;/* Calling an icon font icon as a pseudo element within CSS. */
.elementName:before {
    font-family: &quot;iconfont&quot;;
    content: &quot;\e001&quot;; // The unicode value of the font character you want.
    color: #000; // The icon is text, so you can style it using regular CSS
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;if-it-ain&#x27;t-broke%2C-why-fix-it%3F&quot; tabindex=&quot;-1&quot;&gt;If it ain&#x27;t broke, why fix it?&lt;/h2&gt;
&lt;p&gt;Lately the winds of change have been blowing. Fewer and fewer big-name sites are using icon fonts, and more and more are publicly coming out in favour of inline SVGs. At first I was sceptical: &quot;that problem&#x27;s already been solved&quot;, I thought. Actually inlining raw SVG code into a site seemed overly complicated, and harder to maintain and automate than an icon font setup. But was it? And were icon fonts as great as they first appeared?&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;When icon fonts fail, things get weird.&lt;/dt&gt;
&lt;dd&gt;Sometimes there&#x27;s no telling what crazy character a browser will display in place of an icon that hasn&#x27;t loaded.&lt;/dd&gt;
&lt;dt&gt;There are inexplicable rendering inconsistencies.&lt;/dt&gt;
&lt;dd&gt;Firefox in particular seemed, like an overly generous grandparent, determined to fatten my icons up. Faux-bold on regular fonts is ugly and annoying, but when it happens to brand assets like icons it&#x27;s excruciating (and something clients &lt;em&gt;always&lt;/em&gt; pick up on).&lt;/dd&gt;
&lt;dt&gt;Automation isn&#x27;t so seamless after all.&lt;/dt&gt;
&lt;dd&gt;Oh hey, my &lt;code&gt;npm install&lt;/code&gt; keeps failing. I wonder what the problem is: oh yeah, my &lt;code&gt;gulp-icon font&lt;/code&gt; is throwing errors all up in my grill. Again. #facepalm&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;By contrast, pure SVG is a much more consistent format. I&#x27;ve been using SVGs within &lt;code&gt;&amp;lt;img /&gt;&lt;/code&gt; tags since 2006, and I&#x27;ve never had any trouble with setting SVGs as CSS background images.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;/* SVG CSS background-image. */
.elementName {
    height: 1em;
    width: 1em;
    background-image: url(path/to/icon.png); // Fallback for browsers that don&#x27;t like SVG.
    background-image: url(path/to/icon.svg);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The obvious &lt;em&gt;simple&lt;/em&gt; solution is to just use SVGs like that: set them with CSS or use &lt;code&gt;&amp;lt;img&gt;&lt;/code&gt; elements. That gives you scaleable vector graphics that work well in most environments. The trouble is, you&#x27;re loading in a new file for every icon. Every icon would represent another HTTP request to the server, and would be a performance nightmare. No matter how &quot;squishy&quot; your design, if your site is slow to load it is &lt;em&gt;not&lt;/em&gt; &quot;Responsive&quot;.&lt;/p&gt;
&lt;p&gt;So we&#x27;re back to the same multiple-requests problem we had in the bad old days of raster iconography. The answer back then was to use image sprites. Concatenate all the icons into one file, load them all with just one HTTP request, and use CSS to crop the image when you want to display a particular icon. It turns out we can do that with SVG too, except now we can do it better!&lt;/p&gt;
&lt;h2 id=&quot;inline-svg-sprites&quot; tabindex=&quot;-1&quot;&gt;Inline SVG Sprites&lt;/h2&gt;
&lt;p&gt;SVGs are made of paths – collections of co-ordinates that describe the individual vectors of the image. Open an SVG in your favourite text editor and you can see those paths. What&#x27;s more, you can add classes and IDs to them. Even more mindblowing: if you wrap the individual paths in a &lt;code&gt;symbol&lt;/code&gt; tag you can combine multiple images into a single SVG file, and selectively pull them out using their IDs.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-html&quot;&gt;&amp;lt;!-- Load the SVG file into your document... --&gt;
&amp;lt;svg
    xmlns=&quot;http://www.w3.org/2000/svg&quot;
    xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot;
&gt;
    &amp;lt;symbol viewBox=&quot;0 0 10 10&quot; id=&quot;iconID&quot;&gt;
        &amp;lt;path d=&quot;{ vector data }&quot; /&gt;
    &amp;lt;/symbol&gt;
&amp;lt;/svg&gt;

&amp;lt;!-- ...and then &#x27;use&#x27; a specific icon --&gt;
&amp;lt;svg class=&quot;icon&quot;&gt;
    &amp;lt;use xlink:href=&quot;#iconID&quot; /&gt;
&amp;lt;/svg&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now you might be thinking that this all looks like a whole lot of work, and you&#x27;d be right. Making sprites by hand sucks. Thankfully the arrow of progress is on our side. We may not have jetpacks and flying cars yet, but we &lt;em&gt;do&lt;/em&gt; have task runners. I used to use Grunt, but now I use Gulp (being a JS nerd, I find the syntax easier to follow) and there are SVG spriting plugins for both of them. I use &lt;code&gt;gulp-svg-sprite&lt;/code&gt;, and so far it&#x27;s worked like a charm (so far I&#x27;ve put it to work on a half-dozen private projects and a couple of client sites). In fact, it&#x27;s proving to be much more reliable than any of the Gulp plugins for icon fonts ever were.&lt;/p&gt;
&lt;p&gt;It takes a bit of configuring to get the drop-an-icon-into-a-folder-and-let-Gulp-do-the-rest workflow I&#x27;d maintained with icon fonts, but as long as you remember to specify that you want a &lt;code&gt;symbol&lt;/code&gt; based sprite, you can&#x27;t go too wrong.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;// My Gulp config
var svgConfig = {
    shape: {
        dimension: {
            // Set maximum dimensions
            maxWidth: 32,
            maxHeight: 32
        }
    },
    mode: {
        symbol: true // Activate the «symbol» mode
    }
};

// The task itself
gulp.task(&quot;svg&quot;, function () {
    return gulp
        .src(&quot;_uncompressed/icons/**/*.svg&quot;)
        .pipe(svgSprite(svgConfig))
        .pipe(gulp.dest(&quot;_includes&quot;));
});
&lt;/code&gt;&lt;/pre&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;inline-svg-in-jekyll&quot; tabindex=&quot;-1&quot;&gt;Inline SVG in Jekyll&lt;/h2&gt;
&lt;p&gt;This site is built using the static-site generator Jekyll. Transferring this site&#x27;s (admittedly meagre) icon set from an icon font to an inline SVG sprite couldn&#x27;t have been easier. Make sure your task-runner outputs your sprite into Jekyll&#x27;s &lt;code&gt;_includes&lt;/code&gt; directory and you can pull in your sprite with a &lt;code&gt;{% include /symbol/svg/sprite.symbol.svg %}&lt;/code&gt;. And because Jekyll compiles &lt;em&gt;before&lt;/em&gt; deployment, you don&#x27;t even have to make a single HTTP request to get your icons: it&#x27;s all truly inline.&lt;/p&gt;
&lt;h2 id=&quot;inline-svg-in-wordpress&quot; tabindex=&quot;-1&quot;&gt;Inline SVG in Wordpress&lt;/h2&gt;
&lt;p&gt;Jekyll&#x27;s all well and good if your clients are happy with working in code and using the command line to update their site. Sadly the world hardly ever makes things &lt;em&gt;that&lt;/em&gt; easy for us. Wordpress sites don&#x27;t have the advantage of being compiled before deployment, which means we need to use PHP to include the sprite.&lt;/p&gt;
&lt;p&gt;Including an automatically generated SVG sprite using PHP is a little trickier than it first appears. &lt;code&gt;&amp;lt;?php include_once(&quot;path/to/svg/sprite.svg&quot;); ?&gt;&lt;/code&gt; would seem like the obvious solution, but all that will give you is a face full of errors (if you&#x27;ve got &lt;code&gt;WP_DEBUG&lt;/code&gt; set to &lt;code&gt;true&lt;/code&gt;). It turns out the issue is with the XML and &lt;code&gt;DOCTYPE&lt;/code&gt; added to the sprite by the gulp task, and the trick is to use &lt;code&gt;file_get_contents()&lt;/code&gt; instead of &lt;code&gt;include_once()&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id=&quot;svg-%26-css&quot; tabindex=&quot;-1&quot;&gt;SVG &amp;amp; CSS&lt;/h2&gt;
&lt;p&gt;Styling the icons had a couple of little hurdles that I wasn&#x27;t expecting. One of the joys of icon fonts was how easy they were to manipulate with CSS, and that&#x27;s a feature that SVG sprites were promising too. Instead of &lt;code&gt;color: #000;&lt;/code&gt; we use &lt;code&gt;fill: #000;&lt;/code&gt; but, as with all CSS, watch out for specificity! If the paths themselves have explicit fills and strokes defined, then you won&#x27;t be able to override them with external CSS.&lt;/p&gt;
&lt;p&gt;Some of my legacy icons have in-built colours, and going through and stripping them out would be a real pain. Thankfully my buddy &lt;a href=&quot;http://twitter.com/enshrined&quot;&gt;Daryll&lt;/a&gt; was on hand to build me a tidy RegEx to programatically strip out any rogue fills:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-php&quot;&gt;&amp;lt;?php
// Save the SVG file in a variable...
$rawSVG = file_get_contents(get_template_directory_uri() . &quot;/path/to/svg/sprite.svg&quot;);
// ...then filter out any fills.
echo preg_replace( &#x27;/fill=(&quot;|\&#x27;)(#)?([a-fA-F0-9]*)(&quot;|\&#x27;)/i&#x27;, &#x27;&#x27;, $rawSVG );
?&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;When I&#x27;m using Jekyll I still have to manually manage explicit in-file styling, but Jekyll projects tend to require a more fine-grained approach anyway. Another Big Win for CSS styling and SVGs comes from being able to add classes and IDs to specific paths &lt;em&gt;within&lt;/em&gt; individual icons. This provides us with the hooks we need to style (and animate and manipulate) almost every aspect of an icon discretely. Icon fonts were limited to one flat colour, but with SVG sprites we can colour every shape in an icon differently (should we need to).&lt;/p&gt;
&lt;p&gt;For a long time I was very skeptical of using inline SVG for icon sets, primarily because of the perceived effort it would take to set up such a system. I&#x27;m happy to report that SVG sprites are considerably easier to get started with than I&#x27;d ever thought. I can&#x27;t imagine ever using an icon font again.&lt;/p&gt;</content></entry><entry><title>Inspirational Web People</title><link href="https://tomhazledine.com/inspirational-web-people/"/><updated>2014-09-09T00:00:00Z</updated><id>https://tomhazledine.com/inspirational-web-people/</id><content type="html">&lt;p&gt;There&#x27;s an &lt;a href=&quot;http://boagworld.com/season/10/episode/1007/&quot;&gt;episode of the Boagworld podcast&lt;/a&gt; where Marcus and Paul list the ten ‘web people’ they&#x27;ve found most &lt;em&gt;inspiring&lt;/em&gt;. This has in turn inspired &lt;em&gt;me&lt;/em&gt; to publish my own list.&lt;/p&gt;
&lt;p&gt;The web-creators community is packed with generous people willing to share their insights and experiences. Through blog posts and podcasts, conference talks and tutorials, these people have had a direct impact on my outlook and my career choices.&lt;/p&gt;
&lt;h2 id=&quot;01%3A-steve-lovegrove&quot; tabindex=&quot;-1&quot;&gt;01: &lt;a href=&quot;http://stevenlovegrove.com/&quot;&gt;Steve Lovegrove&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;In my experience everyone has that one person that inspired them when they were just starting out. For some it&#x27;s a teacher, or someone who gave them their first break, or a professional who mentored them. For me, it was my friend Steve.&lt;/p&gt;
&lt;p&gt;Steve&#x27;s always been miles ahead of me in intellect and ability, and most of what he tried to teach me went straight over my head. But even so, he was willing to let me spend hours peering over his shoulder while he coded. And because we would also talk through what he was working on, some of it rubbed off.&lt;/p&gt;
&lt;p&gt;Steve taught me just enough to be dangerous; just enough to get something on the web and see how good it felt. He&#x27;s long since left the web behind to do ‘real’ science, but having a patient and generous friend like Steve was probably the single biggest factor in shaping the direction my career has taken.&lt;/p&gt;
&lt;h2 id=&quot;02%3A-chris-coyier-and-dave-rupert&quot; tabindex=&quot;-1&quot;&gt;02: &lt;a href=&quot;http://twitter.com/chriscoyier&quot;&gt;Chris Coyier&lt;/a&gt; and &lt;a href=&quot;http://twitter.com/davatron5000&quot;&gt;Dave Rupert&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Anyone who&#x27;s ever Googled a CCS question has probably benefited from Chris&#x27; sterling work on his website &lt;em&gt;&lt;a href=&quot;http://css-tricks.com/&quot;&gt;CSS Tricks&lt;/a&gt;&lt;/em&gt;, but it&#x27;s his video tutorials (on Lynda.com and the “Lodge” section of his own website) that have impacted my world the most.&lt;/p&gt;
&lt;p&gt;His approach of &lt;em&gt;getting-it-wrong-on-camera-and-then-fixing-it-(probably)&lt;/em&gt; was a welcome break from other more sanitised tutorials. Not everything installs perfectly the first time, and &lt;em&gt;no one&lt;/em&gt; is immune from typos. Seeing how professionals deal with these problems is almost as useful as the main focus of the lessons.&lt;/p&gt;
&lt;p&gt;Chris also does sterling work in the podcast field with his partner in crime Dave Rupert. If you&#x27;re not entertained by the combination of in-depth Q-and-A, stupid sound effects, and friendly banter that they put out in the &lt;em&gt;&lt;a href=&quot;http://shoptalkshow.com/&quot;&gt;Shop Talk Show&lt;/a&gt;&lt;/em&gt;, then you&#x27;re probably not interested in front-end development.&lt;/p&gt;
&lt;p&gt;As an added bonus, their mantra is probably the single most useful bit of advice any web professional can give:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Just. Build. Websites.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;03%3A-brad-frost&quot; tabindex=&quot;-1&quot;&gt;03: &lt;a href=&quot;http://twitter.com/brad_frost&quot;&gt;Brad Frost&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;I&#x27;m never more aware of (or excited by) the unique nature of designing for the web than when I listen to Brad Frost. If every colleague and every client could take the time to &lt;a href=&quot;http://bradfrostweb.com/blog/&quot;&gt;read his blog&lt;/a&gt; and &lt;a href=&quot;https://www.youtube.com/watch?v=nE0CRMm59BY&quot;&gt;watch his talks&lt;/a&gt;, the standard of our work and the quality of our work-lives would raise ten-fold across the board.&lt;/p&gt;
&lt;p&gt;The idea of designing ‘paintings of websites’ (a.k.a. PSD mockups) is completely outdated; we can&#x27;t just design for one ideal viewport size, or two, or ten, or a hundred. “Atomic Design” might sound like a buzz word, but the principles are applicable to all web work. The basic concept of designing components first and pages last is quite simply How It Should Be Done Now.&lt;/p&gt;
&lt;h2 id=&quot;04%3A-mark-brickey%2C-james-flames%2C-billy-bauman&quot; tabindex=&quot;-1&quot;&gt;04: &lt;a href=&quot;http://twitter.com/markbrickey&quot;&gt;Mark Brickey&lt;/a&gt;, &lt;a href=&quot;http://twitter.com/thejamesflames&quot;&gt;James Flames&lt;/a&gt;, &lt;a href=&quot;http://twitter.com/DeliciousDL&quot;&gt;Billy Bauman&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;I love to hear people talking candidly and in-depth about fields they are experts in. It almost doesn&#x27;t matter what the topic is (which is one of the reasons I love Radio 4&#x27;s &lt;em&gt;In Our Time&lt;/em&gt; so much), but when the topic is illustration I love it even more. The &lt;em&gt;&lt;a href=&quot;http://www.aidpodcast.com/&quot;&gt;Adventures In Design&lt;/a&gt;&lt;/em&gt; podcast is irreverent and unhinged, but always honest and informative.&lt;/p&gt;
&lt;p&gt;They always have good guests, but more importantly Mark, Billy and James know what to do with them. They trigger interesting and inspirational discussion, no matter who the guest is. The resulting interviews are often challenging, often controversial, and always riveting listening.&lt;/p&gt;
&lt;p&gt;Another reason I like AID so much is that team aren&#x27;t ashamed of making a living: this is a podcast about the &lt;em&gt;business&lt;/em&gt; of design. It just so happens that the design field they work in is the super-cool one of gig posters and illustration.&lt;/p&gt;
&lt;h2 id=&quot;05%3A-mike-monteiro&quot; tabindex=&quot;-1&quot;&gt;05: &lt;a href=&quot;http://twitter.com/monteiro&quot;&gt;Mike Monteiro&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Anyone working in the world of design who deals with clients should watch Mike&#x27;s *&lt;a href=&quot;http://vimeo.com/22053820&quot;&gt;F*ck You. Pay Me.&lt;/a&gt;* talk. He explains why it&#x27;s important to take yourself and your business seriously, and even brings his lawyer on stage.&lt;/p&gt;
&lt;p&gt;His book, &lt;em&gt;&lt;a href=&quot;http://www.abookapart.com/products/design-is-a-job&quot;&gt;Design Is a Job&lt;/a&gt;&lt;/em&gt;, is less caustic, but just as inspiring. His book, Design Is a Job, is less caustic, but just as inspiring. Neither the book nor the talk are rants against stupid clients (well, maybe a little...). They focus instead on building &lt;em&gt;productive&lt;/em&gt; client relationships where no-one is taken advantage of.&lt;/p&gt;
&lt;p&gt;It&#x27;s hard to admit that sometimes a problem doesn&#x27;t stem from the client but from yourself. Even so, having that in the back of my mind has often saved my freelancing-bacon. Following Mike&#x27;s advice has often turned tricky clients into excellent ones. For all his acetic bluster, Mike&#x27;s core message is simple; be friendly and use common sense.&lt;/p&gt;
&lt;h2 id=&quot;06%3A-jessica-hische&quot; tabindex=&quot;-1&quot;&gt;06: &lt;a href=&quot;http://twitter.com/jessicahische&quot;&gt;Jessica Hische&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Jessica is a letterer, and all her work is stunning. Before I was aware of her, I didn&#x27;t even know ‘lettering’ was an actual job that you could do. Back in the day, Jessica was a jack-of-all-trades (like many of us), but she realised that You Get The Work You Show. She filled her portfolio with self-initiated lettering work, and was soon able to specialise professionally.&lt;/p&gt;
&lt;p&gt;Art directors (and all clients, in fact) aren&#x27;t blinkered and lacking in imagination. With so much talent out there, they can find someone with &lt;em&gt;exactly&lt;/em&gt; the right experience and demonstrable expertise. If you think lettering is your strongest skill but stack your portfolio with e-commerce websites, guess what kind of work you&#x27;re more likely to be hired for?&lt;/p&gt;
&lt;p&gt;If you want to specialise in something, you have to get off the mat and &lt;em&gt;do&lt;/em&gt; it. Don&#x27;t wait for the “dream commission” to come walking through the door; get out there and chase it down. Jessica makes her own luck, and makes me think I might be able to make my own, too.&lt;/p&gt;
&lt;h2 id=&quot;07%3A-trent-walton&quot; tabindex=&quot;-1&quot;&gt;07: &lt;a href=&quot;http://twitter.com/TrentWalton&quot;&gt;Trent Walton&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;There are only so many ways to present seriffed text on a light background, but somehow Trent manages to make &lt;a href=&quot;http://trentwalton.com/&quot;&gt;his blog&lt;/a&gt; look nicer than everyone else&#x27;s. His art-directed posts (each with their own custom styling) are a benchmark for bloggers everywhere.&lt;/p&gt;
&lt;p&gt;Somewhat annoyingly, what he writes about is &lt;em&gt;also&lt;/em&gt; several orders of magnitude better than anything I could manage. I don&#x27;t know if he became so respected by writing well about “big picture” subjects or whether he writes well &lt;em&gt;because&lt;/em&gt; he&#x27;s so respected, but either way, respected he is.&lt;/p&gt;
&lt;p&gt;His posts come fairly infrequently, but when they do they&#x27;re invariably beautiful &lt;em&gt;and&lt;/em&gt; interesting.&lt;/p&gt;
&lt;h2 id=&quot;08%3A-ben-schwarz&quot; tabindex=&quot;-1&quot;&gt;08: &lt;a href=&quot;http://twitter.com/benschwarz&quot;&gt;Ben Schwarz&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Task runners (like Grunt and Gulp) have revolutionised my workflow over the past year. Grunt trickled into my sphere of awareness over a period of months, much like SASS. SASS I adopted more by osmosis than through any deliberate choice, but I can pin-point my adoption of Grunt to one specific incident.&lt;/p&gt;
&lt;p&gt;Ben has made a &lt;a href=&quot;http://benschwarz.github.io/gallery-css/&quot;&gt;fantastic CSS-only Slider&lt;/a&gt;, and I bought his accompanying screencast tutorial. It might be the best £10 I’ve ever spent. The video explains his intricate SASS, but also walks through a Grunt installation and shows how useful it is.&lt;/p&gt;
&lt;p&gt;Up to that point, I was aware of Grunt but didn’t understand it or see the point of it. To see someone as consummately professional as Ben using it and extolling its virtues sealed the deal. I’ve since switched from Grunt to Gulp, but using &lt;em&gt;any&lt;/em&gt; task runner at all has been the real quantum leap for my workflow.&lt;/p&gt;
&lt;h2 id=&quot;09%3A-sean-johnson-%26-liz-elcoate&quot; tabindex=&quot;-1&quot;&gt;09: &lt;a href=&quot;http://twitter.com/seanuk&quot;&gt;Sean Johnson&lt;/a&gt; &amp;amp; &lt;a href=&quot;http://twitter.com/liz_e&quot;&gt;Liz Elcoate&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Quitting a job to go freelance is a daunting proposition. Making the leap myself, I found comfort in the curious trend for freelance-web-folk-focused podcasts. There are plenty of great offerings out there, but by far the most relevant to my past situation was &lt;em&gt;&lt;a href=&quot;http://www.thefreelanceweb.com/&quot;&gt;The Freelance Web&lt;/a&gt;&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Liz and Sean aren&#x27;t afraid to deep-dive into the details of running a web business; both the good parts and the bad. Their advice is useful &lt;em&gt;and&lt;/em&gt; reassuring, and the fact that they talk about specifics makes it all the more valuable.&lt;/p&gt;
&lt;p&gt;I&#x27;ve since moved from freelancing to an agency position, but I still enjoy &lt;em&gt;The Freelance Web&lt;/em&gt;. The willingness to share experiences and knowledge is one of the best characteristics of the web community. It&#x27;s one I find it hard to believe any other industry could match, and Liz and Sean are true embodiments of that generous spirit.&lt;/p&gt;
&lt;h2 id=&quot;10%3A-daryll-doyle&quot; tabindex=&quot;-1&quot;&gt;10: &lt;a href=&quot;http://twitter.com/enshrined&quot;&gt;Daryll Doyle&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;On a day-to-day basis, by far my biggest inspiration is my team mate, Daryll. He&#x27;s very much from the school of thought that says “if you&#x27;re not moving forwards, you&#x27;re moving backwards”.&lt;/p&gt;
&lt;p&gt;Pretty much constantly, Daryll is showing me some new tool he&#x27;s discovered, technique he&#x27;s mastered, or framework he&#x27;s learnt. His dedication to self-improvement is nothing short of inspiring.&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;I know a couple of the people on this list IRL, and a couple more I&#x27;d class as ‘digital acquaintances’, but most are just web personalities who&#x27;s work, public speaking, or blogging has taught me something new, steered me when my course has wandered, opened my eyes to new ways of thinking, or just been inspiring in some more ineffable manner.&lt;/p&gt;
&lt;p&gt;People like this are what makes the web such a fantastic industry to be a part of, and I owe them all a debt of gratitude.&lt;/p&gt;</content></entry><entry><title>Fullpage screenshots in Firefox</title><link href="https://tomhazledine.com/fullpage-screenshots-in-firefox/"/><updated>2014-02-07T00:00:00Z</updated><id>https://tomhazledine.com/fullpage-screenshots-in-firefox/</id><content type="html">&lt;p&gt;Every now and then I need to take a screenshot of an entire webpage, generally to use in my &lt;a href=&quot;https://tomhazledine.com/portfolio&quot;&gt;portfolio&lt;/a&gt;. Manually positioning the cursor for a &lt;code&gt;cmd shift 4&lt;/code&gt; screenshot (on a Mac) feels a little imprecise for my tastes, and I want to capture the &lt;em&gt;whole&lt;/em&gt; of a site, not just the area visible in the viewport.&lt;/p&gt;
&lt;p&gt;All the browser extensions I tried turned out a little buggy. Areas of the page would be repeated, like a visual interpretation of a CD skipping, or fonts would render strangely, as if they&#x27;d been run through an IE8 simulator or something.&lt;/p&gt;
&lt;p&gt;Finally I stumbled upon this neat little trick. Sadly it doesn&#x27;t help me get girls or lose weight like all the “one weird trick” pop-up ads keep promising me, but it does mean I can take a screenshot of an entire webpage using one line of code.&lt;/p&gt;
&lt;h2 id=&quot;the-answer!&quot; tabindex=&quot;-1&quot;&gt;The answer!&lt;/h2&gt;
&lt;p&gt;Navigate to the page you want to shoot and open up Firefox&#x27;s Developer Tools command line using &lt;code&gt;shift f2&lt;/code&gt; (Mac users might need to remember to press &lt;code&gt;fn&lt;/code&gt; as well, if their keyboard rebinds &lt;code&gt;f2&lt;/code&gt; to increase the monitor&#x27;s brightness). Then all you need to do is type the following line:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;screenshot --fullpage YourFileNameHere
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And voilà! A screenshot has been taken of the current page in its entirety – not just the visible area! If you&#x27;re super lazy, you can even leave off the file name; Firefox will just use the current date and time to save the image under.&lt;/p&gt;
&lt;p&gt;I found I needed to crop off a sliver of transparency on the right hand side when I opened the shots up in Photoshop, but that&#x27;s a small price to pay for the time saved not having to stitch together various peepshow-views of a page.&lt;/p&gt;
&lt;h2 id=&quot;see-it-in-action&quot; tabindex=&quot;-1&quot;&gt;See it in action&lt;/h2&gt;
&lt;p&gt;You can see some of the screenshots I took using this method over on my portfolio page. ~The ‘phone’ view of the Atlantic Brewery page is particularly long and thin – an image I&#x27;d have struggled to create using any other method.~&lt;/p&gt;</content></entry><entry><title>Futura for the win</title><link href="https://tomhazledine.com/futura-for-the-win/"/><updated>2014-02-01T00:00:00Z</updated><id>https://tomhazledine.com/futura-for-the-win/</id><content type="html">&lt;p&gt;Picking the right typeface for this site took a long time, and my final choice wasn’t one I was expecting. Ask 3-months-ago-me if I&#x27;d set a website entirely in Futura and I&#x27;d have laughed at you.&lt;sup class=&quot;footnote-ref&quot;&gt;&lt;a href=&quot;#fn1&quot; id=&quot;fnref1&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;figure class=&quot;figure--left&quot;&gt;&lt;img src=&quot;/images/articles/futuraDropcap.png&quot; alt=&quot;&quot; class=&quot;figure--left&quot;/&gt;&lt;figcaption&gt;How the dropcap looked when this post was written&lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;My initial ‘Contemporary Drop Cap’ concept was much more florid and overtly ornamental than what you see today (as of April 2014). I burnt through many drafts experimenting with ornate serif fonts before I finally remembered that what I was trying to build was a &lt;em&gt;portfolio&lt;/em&gt;; a neutral backdrop for my designs, not something that would distract from the work on show. In short, I needed a sans.&lt;/p&gt;
&lt;h2 id=&quot;neutral-doesn&#x27;t-mean-flavourless.&quot; tabindex=&quot;-1&quot;&gt;Neutral doesn&#x27;t mean flavourless.&lt;/h2&gt;
&lt;p&gt;Even the most generic-seeming typefaces have their own distinct flavour, as my Helvetica-fuelled “Hey look! I just discovered Swiss Design” phase will attest (now commonly known as my “God-awful Superdry Period”).&lt;/p&gt;
&lt;p&gt;I&#x27;ve developed a deep and abiding love for a perfectly circular “o”, so when choosing a sans I normally start with the geometrics. I&#x27;m particularly fond of the classically-British ‘modern’ fonts of &lt;a href=&quot;http://en.wikipedia.org/wiki/Edward_Johnston&quot;&gt;Edward Johnston&lt;/a&gt; and the saucy &lt;a href=&quot;http://en.wikipedia.org/wiki/Eric_Gill&quot;&gt;Eric Gill&lt;/a&gt;, but I&#x27;ve used them far too often already. If I used them in my portfolio site as well, I&#x27;d start to look like a one-trick pony.&lt;/p&gt;
&lt;p&gt;H&amp;amp;FJ&lt;a href=&quot;http://qz.com/167993/frere-jones-is-suing-hoefler-for-his-half-of-the-worlds-preeminent-digital-type-foundry/&quot;&gt;(RIP)&lt;/a&gt;&#x27;s Gotham looked lovely, but I can’t help but feel it’s on fashion&#x27;s downward slope now. Far too many people are using it without thinking, and of course it carries a certain politicised air with it now, too (thanks, Obama!). So keeping with the geometric “o” theme, the next obvious choice was Futura.&lt;/p&gt;
&lt;h2 id=&quot;retro-futurism&quot; tabindex=&quot;-1&quot;&gt;Retro futurism&lt;/h2&gt;
&lt;p&gt;I&#x27;d like to say there is some elaborate over-arching theoretical underpinning to my choice of Futura, but the reality is more prosaic. Sure I could waffle on about the retro-futurist stylings of the “W”s and “M”s, and how they fit into the dialectics of 20th Century design praxis, but in truth it was simply next on the list of “things to try”.&lt;/p&gt;
&lt;p&gt;Once I saw my generously-margined headings set in Futura Bold I was smitten. Couple that with the not-too-shouty elegance of the all-caps italic, and I&#x27;d found the lynchpin for my design.&lt;/p&gt;
&lt;h2 id=&quot;flawed-futura&quot; tabindex=&quot;-1&quot;&gt;Flawed Futura&lt;/h2&gt;
&lt;p&gt;Unlike many others, I actually quite like Futura&#x27;s much-maligned question mark, for all it&#x27;s eccentric meanderings. There are, though, some very visible problems with the ParaType cut of the font (the one I use via &lt;a href=&quot;https://typekit.com/fonts/futura-pt&quot;&gt;Typekit&lt;/a&gt;), and quite possibly with the typeface as a whole, too.&lt;/p&gt;
&lt;p&gt;The lowercase “J” looks stylish and bizarre in equal measure, and the semicolon is oddly top-heavy. In body copy the x-height is a tad lower than I find comfortable and the letter spacing after an apostrophe is massive. Not an issue in a programme that lets you kern, but an ugly cross to bear on the web.&lt;/p&gt;
&lt;p&gt;In fact, all the apostrophes and quotation marks look the same. It’s all well and good training yourself to press &lt;code&gt;alt shift ]&lt;/code&gt; every time you want an apostrophe, but Futura renders such efforts irrelevant. How many different characters can you count in the following sentence?&lt;/p&gt;
&lt;figure&gt;&lt;img src=&quot;/images/articles/futuraGlyphsSmall.png&quot; alt=&quot;&quot;/&gt;&lt;figcaption&gt;Futura quotes etc. - small&lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;Tough, eh?! It&#x27;s a little easier at larger sizes:&lt;/p&gt;
&lt;figure&gt;&lt;img src=&quot;/images/articles/futuraGlyphsLarge.png&quot; alt=&quot;&quot;/&gt;&lt;figcaption&gt;Futura quotes etc. - large&lt;/figcaption&gt;&lt;/figure&gt;
&lt;p&gt;There are actually &lt;em&gt;seven&lt;/em&gt; discrete glyphs there. There &lt;em&gt;are&lt;/em&gt; differences, which at large sizes are delightfully subtle and nuanced, but at anything less than 72pt they all blur into one...&lt;/p&gt;
&lt;h2 id=&quot;a-designer&#x27;s-website-is-like-a-builder&#x27;s-house%3B-always-the-last-to-be-finished.&quot; tabindex=&quot;-1&quot;&gt;A designer&#x27;s website is like a builder&#x27;s house; always the last to be finished.&lt;/h2&gt;
&lt;p&gt;This blog-cum-portfolio site of mine has been through a seemingly infinite number of variations. What you see in April 2014 is only the third full ‘theme’ to make it all the way into code and deployment, but if you count Illustrator mockups then the number of iterations trebles. Count paper sketches – even limiting yourself just to fully drawn out and wire-framed designs – and the total skyrockets.&lt;/p&gt;
&lt;p&gt;Only time will tell how long this current designs sticks around for, but it already feels like this version is a more substantial website than any of my previous attempts. Picking Futura and sticking with it, despite the issues and imperfections, has meant I&#x27;ve been able to turn my attention to the finer details: the little moments of interaction design, the negative space, and above all the &lt;em&gt;content&lt;/em&gt;.&lt;/p&gt;
&lt;hr class=&quot;footnotes-sep&quot;/&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn1&quot; class=&quot;footnote-item&quot;&gt;&lt;p&gt;This post was written in 2014. As you&#x27;ve no doubt already noticed, I&#x27;ve moved on from Futura as the typeface for this site. &lt;a href=&quot;#fnref1&quot; class=&quot;footnote-backref&quot;&gt;↩︎&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;</content></entry><entry><title>Simple is hard</title><link href="https://tomhazledine.com/simple-is-hard/"/><updated>2013-09-26T00:00:00Z</updated><id>https://tomhazledine.com/simple-is-hard/</id><content type="html">&lt;p&gt;“Simplify, simplfy!” we&#x27;re often told. Your service isn&#x27;t appealing to your customers? The answer&#x27;s simple: simplify! Your song isn’t connecting with your fanbase? Simplify! You aren’t shifting as many units as Apple? Simplify! It’s an easy mantra to mock, and even easier to swallow hook, line, and sinker.&lt;/p&gt;
&lt;p&gt;What we need to do is distinguish between ‘simple’ and ‘simplistic’. It&#x27;s fairly obvious that content suffers when overrun by crowded, cluttered, un-navigable interfaces. If what you’re saying has value, you don’t need the kitchen sink to help you say it. But what do you need? And how much can you afford to throw out?&lt;/p&gt;
&lt;h2 id=&quot;only-keep-what-you-need.&quot; tabindex=&quot;-1&quot;&gt;Only keep what you need.&lt;/h2&gt;
&lt;p&gt;Deleting everything that you &lt;em&gt;don&#x27;t&lt;/em&gt; need only works when you know for sure what you &lt;em&gt;do&lt;/em&gt; need. It&#x27;s tempting to think of simplifying a design as merely stripping away layers of visual ornamentation, but true simplicity comes more from the &lt;em&gt;user experience&lt;/em&gt; than the look of the thing. Hiding an unsightly menu behind a &lt;a href=&quot;http://mobile.smashingmagazine.com/2012/10/08/the-semantic-responsive-design-navicon/&quot;&gt;hamburger icon&lt;/a&gt; is an easy way to de-clutter an app’s interface, for example, but does that count as simplification? All that achieves is forcing the user to make an extra click when they want to navigate somewhere. Even the &lt;a href=&quot;http://100archive.com/now/doing-the-hard-work-to-make-it-simple&quot;&gt;Government&#x27;s Digital team agree&lt;/a&gt; that this is both important &lt;em&gt;and&lt;/em&gt; hard (and the new &lt;a href=&quot;http://www.gov.uk&quot;&gt;gov.uk&lt;/a&gt; design is really impressive from a usability perspective).&lt;/p&gt;
&lt;p&gt;Clearing away useless clutter is generally a good tactic, but there&#x27;s a distinct difference between &lt;em&gt;simplifying&lt;/em&gt; a product and merely making it&#x27;s function more obtuse. Is one button with five functions really better than five buttons that each do one task? Is an aesthetically-pure minimalist interface really ideal if you then need to teach every new user how it works?&lt;/p&gt;
&lt;p&gt;As with any task worth doing, there are many levels of nuance to simplification. It takes judgement; an assessment of what functions are important to your product, your app, your idea. Strip away anything extraneous and put anything the user needs front-and-centre, but don’t confuse the two or you’ll live to regret it.&lt;/p&gt;
&lt;h2 id=&quot;this-website-is-all-about-words.&quot; tabindex=&quot;-1&quot;&gt;This website is all about words.&lt;/h2&gt;
&lt;p&gt;The page you’re reading now went through many iterations before settling on the look you see today. Early drafts were swamped with full-page background images and clever CSS3 animation effects, but no matter how fancy I got with the coding these early designs never felt quite right. Then I stumbled upon &lt;a href=&quot;http://justinjackson.ca/words.html&quot;&gt;Justin Jackson&#x27;s inspired ‘This Is A Web Page’ article&lt;/a&gt; and was reminded that what was important for this site was the words themselves. It goes deeper than that, even: what&#x27;s important to this site is the &lt;em&gt;content&lt;/em&gt;. It could be read aloud by a screen-reader, translated into sign-language, even transmitted telepathically for all I care. As long as the message can be absorbed, this page will have done its job.&lt;/p&gt;
&lt;p&gt;What I was doing with my early designs was trying to build a ‘great website’, when what I should really have been focusing on was building a great content delivery system. It seems video is the &lt;em&gt;de rigueur&lt;/em&gt; medium for getting messages across quickly, and for a while I did toy with the idea of making this page into a vlog, but ultimately words are purer. Video is harder to create than written content, and would skew the message with all the baggage brought along by seeing my face (beautiful) or hearing my accent (perfectly inflected Queen&#x27;s English). With the written word I have more chance of capturing the ‘white heat of inspiration’ and of being able to communicate my thoughts clearly.&lt;/p&gt;
&lt;h2 id=&quot;why-use-any-styling-at-all%3F&quot; tabindex=&quot;-1&quot;&gt;Why use any styling at all?&lt;/h2&gt;
&lt;p&gt;So why not go all-out and strip out all the styling from this page completely? Properly written semantic HTML is nothing &lt;em&gt;but&lt;/em&gt; content, so surely stripping away everything else would be the most efficient way to get the message across? Well, quite frankly, the default styling applied by web browsers is &lt;em&gt;ugly&lt;/em&gt;, and that&#x27;s not as shallow a complaint as you might think. Concepts like line-height, line-length, leading &amp;amp; kerning each have a huge impact on the readability of text. To trust all those to the random whims of a browser is madness.&lt;/p&gt;
&lt;p&gt;It’s often said that &lt;a href=&quot;http://alistapart.com/article/on-web-typography#section3&quot;&gt;we read best what we read most&lt;/a&gt;, and my what my friends and I read most are &lt;em&gt;books&lt;/em&gt;. Books are fantastically efficient, and the best ones are things of beauty that wrap their content in a nourishing blanket of aesthetic proportions and finely-wrought typefaces. Given how many books I own solely on the topic of type design and typography, I can’t stand idly by and leave my content at the mercy of the ‘web-safe’ default fonts. I have to believe that good typography and good design makes the reading experience better.&lt;/p&gt;
&lt;h2 id=&quot;simple-doesn%E2%80%99t-have-to-be-ugly.&quot; tabindex=&quot;-1&quot;&gt;Simple doesn’t have to be ugly.&lt;/h2&gt;
&lt;p&gt;It seems obvious, but websites &lt;em&gt;still&lt;/em&gt; have a lot to learn from books. Just because we &lt;em&gt;can&lt;/em&gt; swamp everything in technical wizardry doesn’t mean we &lt;em&gt;should&lt;/em&gt;, but it equally doesn’t mean we should abandon design altogether. ‘Simple’ doesn’t (and &lt;em&gt;shouldn’t&lt;/em&gt;) mean ‘ugly’, and the simple act of thinking about line-lengths and visual hierarchies can turn an indigestible splurge of HTML into something readable, and in the right hands even something beautiful.&lt;/p&gt;
&lt;p&gt;Finding the right balance between visual simplicity, simplicity of interaction and a pleasing aesthetic is a real challenge, and I’ll be the first to admit I’ve still a long way to go. But at least now I’m pointing in the right direction; simple is important, simple is necessary, and simple is really h&lt;/p&gt;</content></entry><entry><title>A bullet-journal workflow</title><link href="https://tomhazledine.com/bullet-journal-workflow/"/><updated>2013-09-24T00:00:00Z</updated><id>https://tomhazledine.com/bullet-journal-workflow/</id><content type="html">&lt;p&gt;Making task lists can be fantastically useful, but it&#x27;s all too easy to lose them. My paper lists get buried under reams of doodles and random notes, or lost in the depths of a full notebook that simply has &lt;em&gt;too much in it&lt;/em&gt;. Even digital lists get lost, and I find I lack the discipline to open a mammoth text file every morning. Paper is much better for immediate reference, even if it is easy to miss-place.&lt;/p&gt;
&lt;h2 id=&quot;productivity-hacking&quot; tabindex=&quot;-1&quot;&gt;Productivity Hacking&lt;/h2&gt;
&lt;p&gt;The quest for elegant ‘productivity hacks’ is both fantastically useful and fantastically counter-productive. You can waste days reading about how not to waste your time. Finally, however, it seems that all the hours I&#x27;ve spent reading about productivity-hacks weren&#x27;t wasted after all; my current system finds me being &lt;em&gt;more&lt;/em&gt; efficient and productive than I&#x27;ve ever been before. And at the hub of my new-found momentum lies my Bullet Journal.&lt;/p&gt;
&lt;h2 id=&quot;the-bullet-journal-concept&quot; tabindex=&quot;-1&quot;&gt;The Bullet Journal Concept&lt;/h2&gt;
&lt;p&gt;Devised by inspired Brooklynite &lt;a href=&quot;http://www.rydercarroll.com/&quot;&gt;Ryder Carrol&lt;/a&gt;, the &lt;a href=&quot;http://www.bulletjournal.com/&quot;&gt;Bullet Journal&lt;/a&gt; is little more than a seemingly-simple method of writing out a ‘to-do’ list using a pen and a notebook. I&#x27;ve experimented with similar list-hierarchies in the past, with mixed results, and while this new one is elegant, it&#x27;s not exactly revolutionary. But there&#x27;s one aspect of the Bullet Journal system that I&#x27;ve found to be a real revelation: the way the list rolls-over from day-to-day and month-to-month.&lt;/p&gt;
&lt;h2 id=&quot;what-first-drew-me-to-the-bullet-journal-was-the-systematized-nature-of-its-bullet-point-organization%2C-but-what&#x27;s-kept-me-using-it-is-the-way-it-stays-relevant.&quot; tabindex=&quot;-1&quot;&gt;What first drew me to the Bullet Journal was the systematized nature of its bullet-point organization, but what&#x27;s &lt;em&gt;kept&lt;/em&gt; me using it is the way it stays relevant.&lt;/h2&gt;
&lt;dl&gt;
&lt;dt&gt;Simplicity.&lt;/dt&gt;
&lt;dd&gt;I love simplicity, and the system itself is fairly straightforward – each list item is marked with either a square, circle or mid-dot. The square boxes denote tasks, circles events, and dots are standard notes (things to remember, but not explicitly actionable). At the start of every month I draw up a list of long-term goals, and then each morning I set out my daily tasks. I number the pages as I go, and keep an index at the front of the notebook. This makes assessing progress on long-term goals a piece of cake.&lt;/dd&gt;
&lt;dt&gt;There&#x27;s only ever one active list.&lt;/dt&gt;
&lt;dd&gt;At the start of every day I write out a new daily list. Any items unchecked from the day before are either struck-through (which denotes they&#x27;ve become irrelevant) or marked with an arrow and copied into the new daily list. This way you never have to refer back to old lists hidden in the depths of the notebook, and it&#x27;s painfully obvious when a task is being continually put-off (which forces you to act: either do it or mark it as irrelevant).&lt;/dd&gt;
&lt;dt&gt;There&#x27;s still long-term structure.&lt;/dt&gt;
&lt;dd&gt;While there&#x27;s only the one active list for you to deal with at any one time, the monthly lists are useful for reference, making it harder for day-to-day tasks to swamp your ‘big picture’ aims.&lt;/dd&gt;
&lt;dt&gt;It&#x27;s flexible.&lt;/dt&gt;
&lt;dd&gt;The Bullet Journal system is loose enough that it never gets in the way of my day-to-day workflow. If i need a date-agnostic list on a specific topic, I just make it and add the page number to the index. Little additions like this make the whole process expandable and fairly all-encompassing, and the day-to-day running of the list is never disturbed by all these additions.&lt;/dd&gt;
&lt;dt&gt;It&#x27;s really easy.&lt;/dt&gt;
&lt;dd&gt;Keeping the journal up to date sounds like rather an onerous task, what with all the indexing, page-numbering, and three-tiered bullet system. In reality, keeping on top of all my lists is no hassle at all. Updating the list takes about 10 minutes every morning, and up to half-an-hour on the first day of every month (as I update my calendar, and re-set my long-term goals).&lt;/dd&gt;
&lt;/dl&gt;
&lt;figure&gt;&lt;img src=&quot;/images/articles/journal.jpg&quot; alt=&quot;&quot;/&gt;&lt;figcaption&gt;My Bullet Journal&lt;/figcaption&gt;&lt;/figure&gt;
&lt;h2 id=&quot;the-journal-isn&#x27;t-solely-responsible-for-my-productivity-upswing%2C-but-it&#x27;s-definitely-helped.&quot; tabindex=&quot;-1&quot;&gt;The journal isn&#x27;t &lt;em&gt;solely&lt;/em&gt; responsible for my productivity upswing, but it&#x27;s definitely helped.&lt;/h2&gt;
&lt;p&gt;By way of a disclaimer, making the switch to a Bullet Journal workflow wasn&#x27;t the only change I&#x27;ve made recently. A few months ago I quit my day-job and struck out on my own; an intrepid freelancer &lt;em&gt;cum&lt;/em&gt; entrepreneur bound for riches and glory! So now that any-and-all money that I make is directly proportional to how much work I do, it&#x27;ll come as no surprise that I&#x27;m working harder and longer than ever before (and would be with or without the Bullet Journal).&lt;/p&gt;
&lt;p&gt;But using the &lt;a href=&quot;http://www.bulletjournal.com/&quot;&gt;Bullet Journal&lt;/a&gt; &lt;em&gt;has&lt;/em&gt; undeniably helped my workflow. My days now have structure, and (most importantly) I&#x27;m now much less likely to overlook an important task.&lt;/p&gt;</content></entry></feed>