<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>dkg's blog</title><link href="https://dkg.fifthhorseman.net/blog/" rel="alternate"/><link href="https://dkg.fifthhorseman.net/blog/feeds/all.atom.xml" rel="self"/><id>https://dkg.fifthhorseman.net/blog/</id><updated>2026-01-12T00:00:00-05:00</updated><entry><title>AI as a Compression Problem</title><link href="https://dkg.fifthhorseman.net/blog/2025-ai-and-compression.html" rel="alternate"/><published>2026-01-12T00:00:00-05:00</published><updated>2026-01-12T00:00:00-05:00</updated><author><name>Daniel Kahn Gillmor</name></author><id>tag:dkg.fifthhorseman.net,2026-01-12:/blog/2025-ai-and-compression.html</id><summary type="html">&lt;p&gt;A recent article in &lt;em&gt;The Atlantic&lt;/em&gt; makes the case that
&lt;a href="https://www.theatlantic.com/technology/2026/01/ai-memorization-research/685552/"&gt;very large language models effectively contain much of the works they're trained on&lt;/a&gt;.
This article is an attempt to popularize the insights in the recent academic paper
&lt;a href="https://arxiv.org/abs/2601.02671"&gt;&lt;em&gt;Extracting books from production language models&lt;/em&gt;&lt;/a&gt; from Ahmed et al.
The authors of …&lt;/p&gt;</summary><content type="html">&lt;p&gt;A recent article in &lt;em&gt;The Atlantic&lt;/em&gt; makes the case that
&lt;a href="https://www.theatlantic.com/technology/2026/01/ai-memorization-research/685552/"&gt;very large language models effectively contain much of the works they're trained on&lt;/a&gt;.
This article is an attempt to popularize the insights in the recent academic paper
&lt;a href="https://arxiv.org/abs/2601.02671"&gt;&lt;em&gt;Extracting books from production language models&lt;/em&gt;&lt;/a&gt; from Ahmed et al.
The authors of the paper demonstrate convincingly that
well-known copyrighted textual material can be extracted from
the chatbot interfaces of popular commercial LLM services.&lt;/p&gt;
&lt;p&gt;The Atlantic article cites &lt;a href="https://youtu.be/Snn4Pq5DBIo?si=osHBLblTwMk_wQ43&amp;amp;t=191"&gt;a podcast quote about the Stable Diffusion AI image-generator model&lt;/a&gt;, saying "We took 100,000 gigabytes of images and compressed it to a two-gigabyte file that can re-create any of those and iterations of those".
By analogy, this suggests we might think of LLMs (which work on text, not the images handled by Stable Diffusion) as a form of lossy textual compression.&lt;/p&gt;
&lt;p&gt;The &lt;a href="https://www.gutenberg.org/files/2701/2701-0.txt"&gt;entire text of &lt;em&gt;Moby Dick&lt;/em&gt;, the canonical Big American Novel&lt;/a&gt; is merely 1.2MiB uncompressed (and less than 0.4MiB losslessly compressed with &lt;code&gt;bzip2 -9&lt;/code&gt;).
It's not surprising to imagine that a model
with hundreds of billions of parameters might contain copies of these works.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Warning: The next paragraph contains fuzzy math with no real concrete engineering practice behind it!&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Consider a hypothetical model with 100 billion parameters,
where each parameter is stored as a 16-bit floating point value.
The model weights would take 200 GB of storage.
If you were to fill the parameter space only with losslessly compressed copies of books like &lt;em&gt;Moby Dick&lt;/em&gt;,
you could still fit half a million books, more than anyone can read in a lifetime.
And lossy compression is typically orders of magnitude less in size than lossless compression,
so we're talking about millions of works effectively encoded, with the acceptance of some
artifacts being injected in the output.&lt;/p&gt;
&lt;p&gt;I first encountered this "compression" view of AI nearly three years ago, in Ted Chiang's insightful
&lt;a href="https://www.newyorker.com/tech/annals-of-technology/chatgpt-is-a-blurry-jpeg-of-the-web"&gt;&lt;em&gt;ChatGPT is a Blurry JPEG of the Web&lt;/em&gt;&lt;/a&gt;.
I was suprised that &lt;em&gt;The Atlantic&lt;/em&gt; article didn't cite Chiang's piece.
If you haven't read Ted Chiang, i strongly recommend his work,
and this piece is a great place to start.&lt;/p&gt;
&lt;p&gt;Chiang aside, the more recent writing that focuses on the idea of
compressed works being "contained" in the model weights
seems to be used by people interested in wielding
some sort of copyright claims against the AI companies that maintain or provide access to these models.
There are many many problems with AI today, but attacking AI companies based on copyright concerns
seems similar to going after &lt;a href="https://en.wikipedia.org/wiki/Al_Capone"&gt;Al Capone&lt;/a&gt; for tax evasion.&lt;/p&gt;
&lt;p&gt;We should be much more concerned with the effect these projects have on
&lt;a href="https://www.englishexpert.de/wp/2026/01/03/ai-language-diversity-threat/"&gt;cultural homogeneity&lt;/a&gt;,
&lt;a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC11020077/"&gt;mental&lt;/a&gt; &lt;a href="https://psychiatryonline.org/doi/full/10.1176/appi.pn.2025.10.10.5"&gt;health&lt;/a&gt;, 
&lt;a href="https://www.sciencedirect.com/science/article/pii/S2444569X25002239"&gt;labor&lt;/a&gt; &lt;a href="https://budgetlab.yale.edu/research/evaluating-impact-ai-labor-market-current-state-affairs"&gt;rights&lt;/a&gt;, 
&lt;a href="https://www.aclu.org/news/privacy-technology/secure-messaging-and-ai-dont-mix"&gt;privacy&lt;/a&gt;, and
&lt;a href="https://theconversation.com/beyond-a-technical-bug-biased-algorithms-and-moderation-are-censoring-activists-on-social-media-160669"&gt;social&lt;/a&gt; &lt;a href="https://ojs.aaai.org/index.php/AIES/article/view/31744"&gt;control&lt;/a&gt;
than whether they're violating copyright in some specific instance.&lt;/p&gt;</content><category term="misc"/><category term="ai"/><category term="compression"/><category term="copyright"/></entry><entry><title>AI and Secure Messaging Don't Mix</title><link href="https://dkg.fifthhorseman.net/blog/2025-ai-and-secure-messaging.html" rel="alternate"/><published>2025-12-23T00:00:00-05:00</published><updated>2025-12-23T00:00:00-05:00</updated><author><name>Daniel Kahn Gillmor</name></author><id>tag:dkg.fifthhorseman.net,2025-12-23:/blog/2025-ai-and-secure-messaging.html</id><summary type="html">&lt;h1 id="ai-and-secure-messaging-dont-mix"&gt;AI and Secure Messaging Don't Mix&lt;/h1&gt;
&lt;p&gt;Over on the &lt;a href="https://www.aclu.org/freefuture"&gt;ACLU's Free Future blog&lt;/a&gt;,
I just published an article titled &lt;a href="https://www.aclu.org/news/privacy-technology/secure-messaging-and-ai-dont-mix"&gt;AI and Secure Messaging Don't Mix&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The blogpost assumes for the sake of the argument that people might actually want to have an AI involved in their personal conversations,
and explores …&lt;/p&gt;</summary><content type="html">&lt;h1 id="ai-and-secure-messaging-dont-mix"&gt;AI and Secure Messaging Don't Mix&lt;/h1&gt;
&lt;p&gt;Over on the &lt;a href="https://www.aclu.org/freefuture"&gt;ACLU's Free Future blog&lt;/a&gt;,
I just published an article titled &lt;a href="https://www.aclu.org/news/privacy-technology/secure-messaging-and-ai-dont-mix"&gt;AI and Secure Messaging Don't Mix&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The blogpost assumes for the sake of the argument that people might actually want to have an AI involved in their personal conversations,
and explores why Meta's &lt;a href="https://engineering.fb.com/2025/04/29/security/whatsapp-private-processing-ai-tools"&gt;Private Processing&lt;/a&gt;
doesn't offer the level of assurance that they want it to offer.&lt;/p&gt;
&lt;p&gt;In short, the promises of "confidential cloud computing" are built on shaky foundations, especially against adversaries as powerful as Meta themselves.&lt;/p&gt;
&lt;p&gt;If you really want AI in your chat, the baseline step for privacy preservation is to include it in your local compute base, not to use a network service!
But these operators clearly don't value private communication as much as they value binding you to their services.&lt;/p&gt;
&lt;p&gt;But let's imagine some secure messenger that actually does put message confidentiality first --
and imagine they had integrated some sort of AI capability into the messenger.
That at least bypasses the privacy questions around AI use.&lt;/p&gt;
&lt;p&gt;Would you really want to talk with your friends, as augmented by their local AI, though?
Would you want an AI, even one running locally with perfect privacy, intervening in your social connections?&lt;/p&gt;
&lt;p&gt;What if it summarized your friend's messages to you in a way that led you to misunderstand (or ignore) an important point your friend had made?
What if it encouraged you to make an edgy joke that comes across wrong?
Or to say something that seriously upsets a friend?
How would you respond?
How would you even know that it had happened?&lt;/p&gt;
&lt;p&gt;My handle is &lt;code&gt;dkg&lt;/code&gt;.
More times than i can count, i've had someone address me in a chat as "dog" and then cringe and apologize and blame their spellchecker/autocorrect.
I can laugh these off because the failure mode is so obvious and transparent -- and repeatable.
(also, dogs are awesome, so i don't really mind!)&lt;/p&gt;
&lt;p&gt;But when our attention (and our responses!) are being shaped and molded by these plausibility engines, how will we even know that mistakes are being made?
What if the plausibility engine you've hooked into your messenger embeds &lt;a href="https://msmagazine.com/2024/08/01/chatgpt-thinks-doctors-are-male-sexism-women-artificial-intelligence/"&gt;subtle&lt;/a&gt; (or &lt;a href="https://www.rollingstone.com/culture/culture-news/elon-musk-grok-chatbot-antisemitic-posts-1235381165/"&gt;unsubtle&lt;/a&gt;!) bias?&lt;/p&gt;
&lt;p&gt;Don't we owe it to each other to engage with actual human attention?&lt;/p&gt;</content><category term="misc"/><category term="secure messaging"/><category term="ai"/><category term="confidentiality"/></entry><entry><title>Transferring Signal on Android</title><link href="https://dkg.fifthhorseman.net/blog/transferring-signal-on-android.html" rel="alternate"/><published>2025-11-21T00:00:00-05:00</published><updated>2025-11-21T00:00:00-05:00</updated><author><name>Daniel Kahn Gillmor</name></author><id>tag:dkg.fifthhorseman.net,2025-11-21:/blog/transferring-signal-on-android.html</id><summary type="html">&lt;h1 id="transferring-a-signal-account-between-two-android-devices"&gt;Transferring a Signal account between two Android devices&lt;/h1&gt;
&lt;p&gt;I spent far too much time recently trying to get a &lt;a href="https://signal.org"&gt;Signal Private Messenger&lt;/a&gt; account to transfer from one device to another.&lt;/p&gt;
&lt;p&gt;What I eventually found worked was a very finicky path to enable functioning "Wi-Fi Direct", which I go into below …&lt;/p&gt;</summary><content type="html">&lt;h1 id="transferring-a-signal-account-between-two-android-devices"&gt;Transferring a Signal account between two Android devices&lt;/h1&gt;
&lt;p&gt;I spent far too much time recently trying to get a &lt;a href="https://signal.org"&gt;Signal Private Messenger&lt;/a&gt; account to transfer from one device to another.&lt;/p&gt;
&lt;p&gt;What I eventually found worked was a very finicky path to enable functioning "Wi-Fi Direct", which I go into below.&lt;/p&gt;
&lt;p&gt;I also offer some troubleshooting and recovery-from-failure guidance.&lt;/p&gt;
&lt;p&gt;All of this blogpost uses "original device" to refer to the Android pocket supercomputer that already has Signal installed and set up, and "new device" to mean the Android device that doesn't yet have Signal on it.&lt;/p&gt;
&lt;h2 id="why-transfer"&gt;Why Transfer?&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://signal.org"&gt;Signal Private Messenger&lt;/a&gt; is designed
with the expectation that the user has a "primary device",
which is either an iPhone or an Android pocket supercomputer.&lt;/p&gt;
&lt;p&gt;If you have an existing Signal account,
and try to change your primary device
by backing up and restoring from backup,
~it looks to me like Signal will cause your
long-term identity keys to be changed.
This in turn causes your peers to see
a message like "Your safety number with Alice has changed."~&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Edit to add, 2025-12-26: I've now heard from more than one person that
backing up on the old primary device and restoring to a new
primary device actually does &lt;/em&gt;&lt;em&gt;not&lt;/em&gt;&lt;em&gt; change the safety number.
If you have a straightforward, well-tested way to transfer a backup file from
one Android device to another, this is almost certainly the easiest way to do it!
But i've seen so many users (including technically sophisticated ones)
who deliberately moved between devices and still had a safety number change
that I assumed that's what would happen.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;And, because Signal is tied to a phone number, it was not straightforward
to set up a one-off account to test such a migration.
The whole migration operation itself was done under fairly high stakes.
I leave the rest of this blogpost as a record of challenging usability choices
in an otherwise fairly high-quality software project.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;These warning messages are the same messages that they would get if an adversary were to &lt;a href="https://www.vice.com/en/article/how-a-third-party-sms-service-was-used-to-take-over-signal-accounts/"&gt;take over your account&lt;/a&gt;.
So it's a good idea to minimize them when there isn't an account takeover — false alarms train people to ignore real alarms.&lt;/p&gt;
&lt;p&gt;You can avoid "safety number changed" warnings by using signal's "account transfer" process during setup,
at least if you're transferring between two Android devices.&lt;/p&gt;
&lt;p&gt;However, my experience was that the transfer between two Android devices was very difficult to get to happen at all.
I ran into many errors trying to do this, until I finally found a path that worked.&lt;/p&gt;
&lt;h2 id="dealing-with-failure"&gt;Dealing with Failure&lt;/h2&gt;
&lt;p&gt;After each failed attempt at a transfer, my original device's Signal installation would need to be re-registered.
Having set a PIN meant that i could re-register the device without needing to receive a text message or phone call.&lt;/p&gt;
&lt;p&gt;Set a PIN before you transfer!&lt;/p&gt;
&lt;p&gt;Also, after a failure, you need to re-link any "linked device" (i.e. any Signal Desktop or iPad installation).
If any message came in during the aborted transfer, the linked device won't get a copy of that message.&lt;/p&gt;
&lt;p&gt;Finally, after a failed transfer, i recommend completely uninstalling Signal from the new device, and starting over with a fresh install on the new device.&lt;/p&gt;
&lt;h2 id="permissions"&gt;Permissions&lt;/h2&gt;
&lt;p&gt;My understanding is that Signal on Android uses Wi-Fi Direct to accomplish the transfer.
But to use Wi-Fi Direct, Signal needs to have the right permissions.&lt;/p&gt;
&lt;p&gt;On each device:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Entirely stop the Signal app&lt;/li&gt;
&lt;li&gt;Go to &lt;code&gt;Settings » Apps » Signal » Permissions&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Ensure that the following permissions are all enabled whenever the app is running:&lt;/li&gt;
&lt;li&gt;Location&lt;/li&gt;
&lt;li&gt;Nearby Devices&lt;/li&gt;
&lt;li&gt;Network&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="preparing-for-wi-fi-direct"&gt;Preparing for Wi-Fi Direct&lt;/h2&gt;
&lt;p&gt;The transfer process depends on "Wi-Fi Direct", which is a bit of a disaster on its own.&lt;/p&gt;
&lt;p&gt;I found that if i couldn't get Wi-Fi Direct to work between the two devices, then the Signal transfer was guaranteed to fail.&lt;/p&gt;
&lt;p&gt;So, for clearer debugging, i first tried to establish a Wi-Fi Direct link on Android, without Signal being involved at all.&lt;/p&gt;
&lt;p&gt;Setting up a Wi-Fi Direct connection directly failed, multiple times, until i found the following combination of steps, to be done on each device:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Turn off Bluetooth&lt;/li&gt;
&lt;li&gt;Ensure Wi-Fi is enabled&lt;/li&gt;
&lt;li&gt;Disconnect from any Wi-Fi network you are connected to (go to the "Internet" or "Wi-Fi" settings page, long-press on the currently connected network, and choose "Disconnect").  If your device knows how to connect to multiple local Wi-Fi networks, disconnct from each of them in turn until you are in a stable state where Wi-Fi is enabled, but no network is connected.&lt;/li&gt;
&lt;li&gt;Close to the bottom of the "Inteernet" or "Wi-Fi" settings page, choose "Network Preferences" and then "Wi-Fi Direct"&lt;/li&gt;
&lt;li&gt;if there are any entries listed under "Remembered groups", tap them and choose to "Forget this group"&lt;/li&gt;
&lt;li&gt;If there are Peer devices that say "Invited", tap them and choose to "Cancel invitation"&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I found that this configuration is the most likely to enable a successful Wi-Fi Direct connection, where clicking "invite" on one device would pop up an alert on the other asking to accept the connection, and result in a "Connected" state between the two devices.&lt;/p&gt;
&lt;h2 id="actually-transferring"&gt;Actually Transferring&lt;/h2&gt;
&lt;p&gt;Start with both devices fully powered up and physically close to one another (on the same desk should be fine).&lt;/p&gt;
&lt;p&gt;On the new device:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Reboot the device, and log into the profile you want to use&lt;/li&gt;
&lt;li&gt;Enable Internet access via Wi-Fi. &lt;/li&gt;
&lt;li&gt;Remove any old version of Signal.&lt;/li&gt;
&lt;li&gt;Install Signal, but DO NOT OPEN IT!&lt;/li&gt;
&lt;li&gt;Set up the permissions for the Signal app as described above&lt;/li&gt;
&lt;li&gt;Open Signal, and choose "restore or transfer" -- you still need to be connected to the network at this point.&lt;/li&gt;
&lt;li&gt;The new device should display a QR code.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;On the original device:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Reboot the device, and log into the profile that has the Signal account you're looking to transfer&lt;/li&gt;
&lt;li&gt;Enable Internet access via Wi-Fi, using the same network that the old device is using.&lt;/li&gt;
&lt;li&gt;Make sure the permissions for Signal are set up as described above&lt;/li&gt;
&lt;li&gt;Open Signal, and tap the camera button&lt;/li&gt;
&lt;li&gt;Point the camera at the new device's QR code&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now tap the "continue" choices on both devices until they both display a message that they are searching for each other.
You might see the location indicator (a green dot) turn on during this process.&lt;/p&gt;
&lt;p&gt;If you see an immediate warning of failure on either device, you probably don't have the permissions set up right.&lt;/p&gt;
&lt;p&gt;You might see an alert (a "toast") on one of the devices that the other one is trying to connect.
You should click OK on that alert.&lt;/p&gt;
&lt;p&gt;In my experience, both devices are likely to get stuck "searching" for each other.
Wait for both devices to show Signal's warning that the search has timed out.&lt;/p&gt;
&lt;p&gt;At this point, leave Signal open on both devices, and go through all the steps described above to prepare for Wi-Fi Direct.
Your Internet access will be disabled.&lt;/p&gt;
&lt;p&gt;Now, tap "Try again" in Signal on both devices, pressing the buttons within a few seconds of each other.
You should see another alert that one device is trying to connect to the other.
Press OK there.&lt;/p&gt;
&lt;p&gt;At this point, the transfer should start happening!
The old device will indicate what percentag has been transferred, and the new device will indicate how many messages hav been transferred.&lt;/p&gt;
&lt;p&gt;When this is all done, re-connect to Wi-Fi on the new device.&lt;/p&gt;
&lt;h2 id="temporal-gap-for-linked-devices"&gt;Temporal gap for Linked Devices&lt;/h2&gt;
&lt;p&gt;Note that during this process, if new messages are arriving, they will be queuing up for you.&lt;/p&gt;
&lt;p&gt;When you reconnect to wi-fi, the queued messages will flow to your new device.
But the process of transferring automatically unlinks any linked devices.
So if you want to keep your instance of Signal Desktop with as short a gap as possible, you should re-link that installation promptly after the transfer completes.&lt;/p&gt;
&lt;h2 id="clean-up"&gt;Clean-up&lt;/h2&gt;
&lt;p&gt;After all this is done successfully, you probably want to go into the Permissions settings and turn off the Location and Nearby Devices permissions for Signal on both devices.&lt;/p&gt;
&lt;p&gt;I recommend also going into Wi-Fi Direct and removing any connected devices and forgetting any existing connections.&lt;/p&gt;
&lt;h2 id="conclusion"&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;This is an abysmally clunky user experience, and I'm glad I don't have to do it often.
It would have been much simpler to make a backup and restore from it, but I didn't want to freak out my contacts with a safety number change.&lt;/p&gt;
&lt;p&gt;By contrast, when i wanted extend a &lt;a href="https://delta.chat"&gt;DeltaChat&lt;/a&gt; account across two devices, the transfer was prompt and entirely painless -- i just had to make sure the devices were on the same network, and then scanned a QR code from one to the other.
And there was no temporal gap for any other deviees.
And i could use Delta on both devices simultaneously until i was convinced that it would work on the new device -- Delta doesn't have the concept of a primary account.&lt;/p&gt;
&lt;p&gt;I wish Signal made it that easy!
Until it's that easy, i hope the processes described here are useful to someone.&lt;/p&gt;</content><category term="misc"/><category term="signal"/><category term="android"/><category term="transfer"/></entry><entry><title>App Store Oligopoly</title><link href="https://dkg.fifthhorseman.net/blog/2025-app-store-oligopoly.html" rel="alternate"/><published>2025-11-18T00:00:00-05:00</published><updated>2025-11-18T00:00:00-05:00</updated><author><name>Daniel Kahn Gillmor</name></author><id>tag:dkg.fifthhorseman.net,2025-11-18:/blog/2025-app-store-oligopoly.html</id><summary type="html">&lt;h1 id="a-call-for-public-discussion-about-app-store-oligopoly"&gt;A Call for Public Discussion about App Store Oligopoly&lt;/h1&gt;
&lt;p&gt;Over on the &lt;a href="https://www.aclu.org/freefuture"&gt;ACLU's Free Future blog&lt;/a&gt;,
I just published an article titled &lt;a href="https://www.aclu.org/news/free-speech/app-store-oligopoly"&gt;Your Smartphone, Their Rules: How App Stores Enable Corporate-Government Censorship&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Free Software users and developers likely already understand
the reasons why it matters who controls what tools you …&lt;/p&gt;</summary><content type="html">&lt;h1 id="a-call-for-public-discussion-about-app-store-oligopoly"&gt;A Call for Public Discussion about App Store Oligopoly&lt;/h1&gt;
&lt;p&gt;Over on the &lt;a href="https://www.aclu.org/freefuture"&gt;ACLU's Free Future blog&lt;/a&gt;,
I just published an article titled &lt;a href="https://www.aclu.org/news/free-speech/app-store-oligopoly"&gt;Your Smartphone, Their Rules: How App Stores Enable Corporate-Government Censorship&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Free Software users and developers likely already understand
the reasons why it matters who controls what tools you have access to.
Hopefully this post can help clarify,
even to people typically used to common non-free tooling,
that there are real world risks to consolidated, proprietary control over
computing and communication tools.&lt;/p&gt;
&lt;p&gt;Big shout out to the projects out there doing good work in the "pocket supercomputer" space,
providing an escape valve for many users and a counter-example to centralized corporate control,
including &lt;a href="https://f-droid.org/"&gt;F-Droid&lt;/a&gt;, &lt;a href="https://grapheneos.org"&gt;GrapheneOS&lt;/a&gt;, and &lt;a href="https://phosh.mobi"&gt;&lt;code&gt;phosh&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The screws are tightening on user freedom,
in the very place where most computing is happening today.
The smartphone is already far too similar to an ankle monitor than it should be.&lt;/p&gt;
&lt;p&gt;Please, publish your own suggestions on creative forms of mutual technical liberation.
These are communications tools, so no person can fix the problems alone.&lt;/p&gt;
&lt;p&gt;I would love to see a flourishing of non-Android, non-iOS systems in people's pockets,
but i also know with the market the way it is, that is a long haul.
Until that happens, we should also try to keep Android open,
check out &lt;a href="https://keepandroidopen.org/"&gt;keepandroidopen.org&lt;/a&gt; for more suggestions.&lt;/p&gt;</content><category term="misc"/><category term="free software"/><category term="consolidation"/><category term="censorship"/><category term="surveillance"/><category term="pocket supercomputer"/></entry><entry><title>New OpenPGP certificate for dkg, December 2023</title><link href="https://dkg.fifthhorseman.net/blog/2023-dkg-openpgp-transition.html" rel="alternate"/><published>2023-12-07T00:00:00-05:00</published><updated>2023-12-07T00:00:00-05:00</updated><author><name>Daniel Kahn Gillmor</name></author><id>tag:dkg.fifthhorseman.net,2023-12-07:/blog/2023-dkg-openpgp-transition.html</id><summary type="html">&lt;h1 id="dkgs-new-openpgp-certificate-in-december-2023"&gt;dkg's New OpenPGP certificate in December 2023&lt;/h1&gt;
&lt;p&gt;In December of 2023, I'm moving to a new OpenPGP certificate.&lt;/p&gt;
&lt;p&gt;You might know my old OpenPGP certificate, which had an fingerprint of
C29F8A0C01F35E34D816AA5CE092EB3A5CA10DBA.&lt;/p&gt;
&lt;p&gt;My new OpenPGP certificate has a fingerprint of:
D477040C70C2156A5C298549BB7E9101495E6BF7.&lt;/p&gt;
&lt;p&gt;Both certificates have the same set of User IDs:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Daniel …&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;h1 id="dkgs-new-openpgp-certificate-in-december-2023"&gt;dkg's New OpenPGP certificate in December 2023&lt;/h1&gt;
&lt;p&gt;In December of 2023, I'm moving to a new OpenPGP certificate.&lt;/p&gt;
&lt;p&gt;You might know my old OpenPGP certificate, which had an fingerprint of
C29F8A0C01F35E34D816AA5CE092EB3A5CA10DBA.&lt;/p&gt;
&lt;p&gt;My new OpenPGP certificate has a fingerprint of:
D477040C70C2156A5C298549BB7E9101495E6BF7.&lt;/p&gt;
&lt;p&gt;Both certificates have the same set of User IDs:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Daniel Kahn Gillmor&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;dkg@debian.org&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;dkg@fifthhorseman.net&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You can find a version of this transition statement signed by both the
old and new certificates at:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://dkg.fifthhorseman.net/2023-dkg-openpgp-transition.txt"&gt;https://dkg.fifthhorseman.net/2023-dkg-openpgp-transition.txt&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The new OpenPGP certificate is:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="gh"&gt;-----BEGIN PGP PUBLIC KEY BLOCK-----&lt;/span&gt;

&lt;span class="s"&gt;xjMEZXEJyxYJKwYBBAHaRw8BAQdA5BpbW0bpl5qCng/RiqwhQINrplDMSS5JsO/Y&lt;/span&gt;
&lt;span class="s"&gt;O+5Zi7HCwAsEHxYKAH0FgmVxCcsDCwkHCRC7fpEBSV5r90cUAAAAAAAeACBzYWx0&lt;/span&gt;
&lt;span class="s"&gt;QG5vdGF0aW9ucy5zZXF1b2lhLXBncC5vcmfUAgfN9tyTSxpxhmHA1r63GiI4v6NQ&lt;/span&gt;
&lt;span class="s"&gt;mrrWVLOBRJYuhQMVCggCmwECHgEWIQTUdwQMcMIValwphUm7fpEBSV5r9wAAmaEA&lt;/span&gt;
&lt;span class="s"&gt;/3MvYJMxQdLhIG4UDNMVd2bsovwdcTrReJhLYyFulBrwAQD/j/RS+AXQIVtkcO9b&lt;/span&gt;
&lt;span class="s"&gt;l6zZTAO9x6yfkOZbv0g3eNyrAs0QPGRrZ0BkZWJpYW4ub3JnPsLACwQTFgoAfQWC&lt;/span&gt;
&lt;span class="s"&gt;ZXEJywMLCQcJELt+kQFJXmv3RxQAAAAAAB4AIHNhbHRAbm90YXRpb25zLnNlcXVv&lt;/span&gt;
&lt;span class="s"&gt;aWEtcGdwLm9yZ4l+Z3i19Uwjw3CfTNFCDjRsoufMoPOM7vM8HoOEdn/vAxUKCAKb&lt;/span&gt;
&lt;span class="s"&gt;AQIeARYhBNR3BAxwwhVqXCmFSbt+kQFJXmv3AAALZQEAhJsgouepQVV98BHUH6Sv&lt;/span&gt;
&lt;span class="s"&gt;WvcKrb8dQEZOvHFbZQQPNWgA/A/DHkjYKnUkCg8Zc+FonqOS/35sHhNA8CwqSQFr&lt;/span&gt;
&lt;span class="s"&gt;tN4KzRc8ZGtnQGZpZnRoaG9yc2VtYW4ubmV0PsLACgQTFgoAfQWCZXEJywMLCQcJ&lt;/span&gt;
&lt;span class="s"&gt;ELt+kQFJXmv3RxQAAAAAAB4AIHNhbHRAbm90YXRpb25zLnNlcXVvaWEtcGdwLm9y&lt;/span&gt;
&lt;span class="s"&gt;ZxLvwkgnslsAuo+IoSa9rv8+nXpbBdab2Ft7n4H9S+d/AxUKCAKbAQIeARYhBNR3&lt;/span&gt;
&lt;span class="s"&gt;BAxwwhVqXCmFSbt+kQFJXmv3AAAtFgD4wqcUfQl7nGLQOcAEHhx8V0Bg8v9ov8Gs&lt;/span&gt;
&lt;span class="s"&gt;Y1ei1BEFwAD/cxmxmDSO0/tA+x4pd5yIvzgfGYHSTxKS0Ww3hzjuZA7NE0Rhbmll&lt;/span&gt;
&lt;span class="s"&gt;bCBLYWhuIEdpbGxtb3LCwA4EExYKAIAFgmVxCcsDCwkHCRC7fpEBSV5r90cUAAAA&lt;/span&gt;
&lt;span class="s"&gt;AAAeACBzYWx0QG5vdGF0aW9ucy5zZXF1b2lhLXBncC5vcmd7X4TgiINwnzh4jar0&lt;/span&gt;
&lt;span class="s"&gt;Pf/b5hgxFPngCFxJSmtr/f0YiQMVCggCmQECmwECHgEWIQTUdwQMcMIValwphUm7&lt;/span&gt;
&lt;span class="s"&gt;fpEBSV5r9wAAMuwBAPtMonKbhGOhOy+8miAb/knJ1cIPBjLupJbjM+NUE1WyAQD1&lt;/span&gt;
&lt;span class="s"&gt;nyGW+XwwMrprMwc320mdJH9B0jdokJZBiN7++0NoBM4zBGVxCcsWCSsGAQQB2kcP&lt;/span&gt;
&lt;span class="s"&gt;AQEHQI19uRatkPSFBXh8usgciEDwZxTnnRZYrhIgiFMybBDQwsC/BBgWCgExBYJl&lt;/span&gt;
&lt;span class="s"&gt;cQnLCRC7fpEBSV5r90cUAAAAAAAeACBzYWx0QG5vdGF0aW9ucy5zZXF1b2lhLXBn&lt;/span&gt;
&lt;span class="s"&gt;cC5vcmfCopazDnq6hZUsgVyztl5wmDCmxI169YLNu+IpDzJEtQKbAr6gBBkWCgBv&lt;/span&gt;
&lt;span class="s"&gt;BYJlcQnLCRB3LRYeNc1LgUcUAAAAAAAeACBzYWx0QG5vdGF0aW9ucy5zZXF1b2lh&lt;/span&gt;
&lt;span class="s"&gt;LXBncC5vcmcQglI7G7DbL9QmaDkzcEuk3QliM4NmleIRUW7VvIBHMxYhBHS8BMQ9&lt;/span&gt;
&lt;span class="s"&gt;hghL6GcsBnctFh41zUuBAACwfwEAqDULksr8PulKRcIP6N9NI/4KoznyIcuOHi8q&lt;/span&gt;
&lt;span class="s"&gt;Gk4qxMkBAIeV20SPEnWSw9MWAb0eKEcfupzr/C+8vDvsRMynCWsDFiEE1HcEDHDC&lt;/span&gt;
&lt;span class="s"&gt;FWpcKYVJu36RAUlea/cAAFD1AP0YsE3Eeig1tkWaeyrvvMf5Kl1tt2LekTNWDnB+&lt;/span&gt;
&lt;span class="s"&gt;FUG9SgD+Ka8vfPR8wuV8D3y5Y9Qq9xGO+QkEBCW0U1qNypg65QHOOARlcQnLEgor&lt;/span&gt;
&lt;span class="s"&gt;BgEEAZdVAQUBAQdAWTLEa0WmnhUmDBdWXX0ZlYAa4g1CK/fXg0NPOQSteA4DAQgH&lt;/span&gt;
&lt;span class="s"&gt;wsAABBgWCgByBYJlcQnLCRC7fpEBSV5r90cUAAAAAAAeACBzYWx0QG5vdGF0aW9u&lt;/span&gt;
&lt;span class="s"&gt;cy5zZXF1b2lhLXBncC5vcmexrMBZe0QdQ+ZJOZxFkAiwCw2I7yTSF2Ox9GVFWKmA&lt;/span&gt;
&lt;span class="s"&gt;mAKbDBYhBNR3BAxwwhVqXCmFSbt+kQFJXmv3AABcJQD/f4ltpSvLBOBEh/C2dIYa&lt;/span&gt;
&lt;span class="s"&gt;dgSuqkCqq0B4WOhFRkWJZlcA/AxqLWG4o8UrrmwrmM42FhgxKtEXwCSHE00u8wR4&lt;/span&gt;
&lt;span class="s"&gt;Up8G&lt;/span&gt;
&lt;span class="s"&gt;=9Yc8&lt;/span&gt;
&lt;span class="gh"&gt;-----END PGP PUBLIC KEY BLOCK-----&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;When I have some reasonable number of certifications, i'll update the
certificate associated with my e-mail addresses on
https://keys.openpgp.org, in DANE, and in WKD.  Until then, those
lookups should continue to provide the old certificate.&lt;/p&gt;</content><category term="misc"/><category term="openpgp"/></entry><entry><title>2022 Digital Rights Job Fair</title><link href="https://dkg.fifthhorseman.net/blog/2022-digital-rights-job-fair.html" rel="alternate"/><published>2022-05-10T20:39:00+00:00</published><updated>2022-05-10T20:39:00+00:00</updated><author><name>Daniel Kahn Gillmor</name></author><id>tag:dkg.fifthhorseman.net,2022-05-10:/blog/2022-digital-rights-job-fair.html</id><summary type="html">&lt;p&gt;I'm lucky enough to &lt;a href="https://www.aclu.org/bio/daniel-kahn-gillmor"&gt;work&lt;/a&gt; at the intersection between information communications technology and civil rights/civil liberties.
I get to combine technical interests and social/political interests.&lt;/p&gt;
&lt;p&gt;I've talked with many folks over the years who are interested in doing similar work.
Some come from a technical background, and some …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I'm lucky enough to &lt;a href="https://www.aclu.org/bio/daniel-kahn-gillmor"&gt;work&lt;/a&gt; at the intersection between information communications technology and civil rights/civil liberties.
I get to combine technical interests and social/political interests.&lt;/p&gt;
&lt;p&gt;I've talked with many folks over the years who are interested in doing similar work.
Some come from a technical background, and some from an activist background (and some from both).
Are you one of them?
Are you someone who works as an activist or in a technical field who wants to look into different ways of meging these interests?&lt;/p&gt;
&lt;p&gt;Some great organizers maintain a &lt;a href="https://www.digitalrights.community/job-board"&gt;job board for Digital Rights&lt;/a&gt;.
Next month they'll host a Digital Rights Job Fair, which offers an opportunity to talk with good people at organizations that fight in different ways for a better world.
You need to &lt;a href="https://digitalrights.formstack.com/forms/jobfair"&gt;RSVP to attend&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Digital Rights Job Fair" src="images/DigitalRightsJobFair.png"&gt;&lt;/p&gt;</content><category term="misc"/><category term="jobs"/><category term="human rights"/><category term="digital rights"/><category term="activism"/></entry><entry><title>Bitstream Vera Must Die</title><link href="https://dkg.fifthhorseman.net/blog/bitstream-vera-must-die.html" rel="alternate"/><published>2022-04-14T00:00:00-04:00</published><updated>2022-04-14T00:00:00-04:00</updated><author><name>Daniel Kahn Gillmor</name></author><id>tag:dkg.fifthhorseman.net,2022-04-14:/blog/bitstream-vera-must-die.html</id><content type="html">&lt;p&gt;&lt;a href="https://dkg.fifthhorseman.net/bitstream-vera-must-die.html"&gt;Bitstream Vera must die&lt;/a&gt;.&lt;/p&gt;</content><category term="misc"/><category term="fonts unicode browsers rendering"/></entry><entry><title>New OpenPGP certificate for dkg, 2021</title><link href="https://dkg.fifthhorseman.net/blog/2021-dkg-openpgp-transition.html" rel="alternate"/><published>2020-12-31T00:00:00-05:00</published><updated>2020-12-31T00:00:00-05:00</updated><author><name>Daniel Kahn Gillmor</name></author><id>tag:dkg.fifthhorseman.net,2020-12-31:/blog/2021-dkg-openpgp-transition.html</id><summary type="html">&lt;h1 id="dkgs-2021-openpgp-transition"&gt;dkg's 2021 OpenPGP transition&lt;/h1&gt;
&lt;p&gt;As 2021 begins, I'm changing to a new OpenPGP certificate.&lt;/p&gt;
&lt;p&gt;I did a similar transition &lt;a href="2019-dkg-openpgp-transition.html"&gt;two years ago&lt;/a&gt;, and a fair amount has changed since then.&lt;/p&gt;
&lt;p&gt;You might know my old OpenPGP certificate as:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;pub&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;ed25519&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2019&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;01&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;19&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;expires: 2021-01-18&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="n"&gt;C4BC2DDB38CCE96485EBE9C2F20691179038E5C6&lt;/span&gt;
&lt;span class="n"&gt;uid&lt;/span&gt;&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="n"&gt;Daniel&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Kahn …&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;h1 id="dkgs-2021-openpgp-transition"&gt;dkg's 2021 OpenPGP transition&lt;/h1&gt;
&lt;p&gt;As 2021 begins, I'm changing to a new OpenPGP certificate.&lt;/p&gt;
&lt;p&gt;I did a similar transition &lt;a href="2019-dkg-openpgp-transition.html"&gt;two years ago&lt;/a&gt;, and a fair amount has changed since then.&lt;/p&gt;
&lt;p&gt;You might know my old OpenPGP certificate as:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;pub&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;ed25519&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2019&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;01&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;19&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;expires: 2021-01-18&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="n"&gt;C4BC2DDB38CCE96485EBE9C2F20691179038E5C6&lt;/span&gt;
&lt;span class="n"&gt;uid&lt;/span&gt;&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="n"&gt;Daniel&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Kahn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Gillmor&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="nv"&gt;@fifthhorseman&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="n"&gt;uid&lt;/span&gt;&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="n"&gt;Daniel&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Kahn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Gillmor&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="nv"&gt;@debian&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;My new OpenPGP certificate is:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;pub&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;ed25519&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2020&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;27&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;expires: 2023-12-24&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="n"&gt;C29F8A0C01F35E34D816AA5CE092EB3A5CA10DBA&lt;/span&gt;
&lt;span class="n"&gt;uid&lt;/span&gt;&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt; unknown&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Daniel&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Kahn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Gillmor&lt;/span&gt;
&lt;span class="n"&gt;uid&lt;/span&gt;&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt; unknown&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="nv"&gt;@debian&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="n"&gt;uid&lt;/span&gt;&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt; unknown&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="nv"&gt;@fifthhorseman&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;You can find a &lt;a href="https://dkg.fifthhorseman.net/2021-dkg-openpgp-transition.txt"&gt;signed transition statement&lt;/a&gt; if you're into that sort of thing.&lt;/p&gt;
&lt;p&gt;If you're interested in the rationale for why I'm making this transition, read on.&lt;/p&gt;
&lt;h2 id="dangers-of-offline-primary-secret-keys"&gt;Dangers of Offline Primary Secret Keys&lt;/h2&gt;
&lt;p&gt;There are several reasons for transitioning, but one i simply couldn't argue with was my own technical failure.
I put the primary secret key into offline storage some time ago for "safety", and used &lt;a href="https://manpages.debian.org/buster/e2fsprogs/e4crypt.8.en.html"&gt;ext4's filesystem-level encryption&lt;/a&gt; layered on top of &lt;a href="https://gitlab.com/cryptsetup/cryptsetup/"&gt;dm-crypt&lt;/a&gt; for additional security.&lt;/p&gt;
&lt;p&gt;But either the tools changed out from under me, or there were failures on the storage medium, or I've failed to remember my passphrase correctly, because I am unable to regain access to the cleartext of the secret key.
In particular, I find myself unable to use &lt;code&gt;e4crypt add_key&lt;/code&gt; with the passphrase I know to get a usable working directory.&lt;/p&gt;
&lt;p&gt;I confess I still find &lt;code&gt;e4crypt&lt;/code&gt; pretty difficult to use and I don't use it often, so the problem may entirely be user error (either now, or two years ago when I did the initial setup).&lt;/p&gt;
&lt;p&gt;Anyway, lesson learned: don't use cryptosystems that you're not comfortable with to encrypt data that you care about recovering.
This is a lesson I'm pretty sure I've learned before, sigh, but it's a good reminder.&lt;/p&gt;
&lt;h2 id="split-user-ids"&gt;Split User IDs&lt;/h2&gt;
&lt;p&gt;I'm trying to split out my User IDs again -- this way if you know me by e-mail address, you don't have to think/worry about certifying my name, and if you know me by name, you don't have to think/worry about certifying my e-mail address.
I think that's simpler and more sensible.&lt;/p&gt;
&lt;p&gt;It's also nice because e-mail address-only User IDs can be used effectively in contexts like &lt;a href="https://autocrypt.org"&gt;Autocrypt&lt;/a&gt;, which I think are increasingly important if we want to have usable encrypted e-mail.&lt;/p&gt;
&lt;p&gt;Last time around I initially tried &lt;a href="2019-dkg-openpgp-transition.html"&gt;split User IDs but rolled them back&lt;/a&gt; and I think most of the bugs I discovered then have been fixed.&lt;/p&gt;
&lt;h2 id="certificate-flooding"&gt;Certificate Flooding&lt;/h2&gt;
&lt;p&gt;Another reason for making a transition to a new certificate is that my older certificate is one of the ones that was "&lt;a href="openpgp-certificate-flooding.html"&gt;flooded&lt;/a&gt;" on the &lt;a href="https://sks-keyservers.net"&gt;SKS keyserver network&lt;/a&gt; last year, which was one of the final straws for that teetering project.
Transitioning to a new certificate lets that old flooded cert expire and people can just simply move on from it, ideally deleting it from their local keyrings.&lt;/p&gt;
&lt;p&gt;Hopefully as a community we can move on from SKS to key distribution mechanisms like &lt;a href="https://datatracker.ietf.org/doc/draft-koch-openpgp-webkey-service/"&gt;WKD&lt;/a&gt;, &lt;a href="https://autocrypt.org"&gt;Autocrypt&lt;/a&gt;, &lt;a href="https://tools.ietf.org/html/rfc7929"&gt;DANE&lt;/a&gt;, and &lt;a href="https://keys.openpgp.org"&gt;keys.openpgp.org&lt;/a&gt;, all of which address some of the &lt;a href="https://datatracker.ietf.org/doc/draft-dkg-openpgp-abuse-resistant-keystore/"&gt;known problems with keyserver abuse&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="trying-new-tools"&gt;Trying New Tools&lt;/h2&gt;
&lt;p&gt;Finally, I'm also interested in thinking about how key and certificate management might be handled in different ways.
While I'm reasonably competent in handling &lt;a href="https://www.gnupg.org"&gt;GnuPG&lt;/a&gt;, the larger OpenPGP community (which I'm a part of) has done a lot of thinking and a lot of work about how people can use OpenPGP.&lt;/p&gt;
&lt;p&gt;I'm particularly happy with the collaborative work that has gone into the &lt;a href="https://gitlab.com/dkg/openpgp-stateless-cli"&gt;Stateless OpenPGP CLI&lt;/a&gt; (aka &lt;code&gt;sop&lt;/code&gt;), which helps to generate a powerful &lt;a href="https://tests.sequoia-pgp.org/"&gt;interoperability test suite&lt;/a&gt;.
While &lt;code&gt;sop&lt;/code&gt; doesn't offer the level of certificate management I'd need to use it to manage this new certificate in full, I wish something like it would!
Starting from a fresh certificate and actually using it helps me to think through what I might actually need from a tool that is roughly as straightforward and opinionated as &lt;code&gt;sop&lt;/code&gt; is.&lt;/p&gt;
&lt;p&gt;If you're a software developer who might use or implement OpenPGP, or a protocol designer, and you haven't played around with &lt;a href="https://git.savannah.nongnu.org/cgit/dkgpg.git/tree/tools/dkg-sop.cc"&gt;any&lt;/a&gt; &lt;a href="https://gitlab.com/sequoia-pgp/sop-openpgp-js"&gt;of&lt;/a&gt; &lt;a href="https://salsa.debian.org/clint/hopenpgp-tools/-/blob/master/hop.hs"&gt;the&lt;/a&gt; &lt;a href="https://pypi.org/project/sop/"&gt;various&lt;/a&gt; &lt;a href="https://crates.io/crates/sequoia-sop"&gt;implementations&lt;/a&gt; &lt;a href="https://github.com/ProtonMail/gosop"&gt;of&lt;/a&gt; &lt;code&gt;sop&lt;/code&gt; yet, I recommend taking a look.
And feedback on the specification is always welcome, too, including ideas for new functionality (maybe even like certificate management).&lt;/p&gt;
&lt;h2 id="next-steps"&gt;Next Steps&lt;/h2&gt;
&lt;p&gt;If you're the kind of person who's into making OpenPGP certifications, feel free to check in with me via whatever channels you're used to using to verify that this transition is legit.
If you think it is, and you're comfortable, please send me (e-mail is probably best) your certifications over the new certficate.&lt;/p&gt;
&lt;p&gt;I'll keep on working to make OpenPGP more usable and acceptable.
Hopefully, 2021 will be a better year ahead for all of us.&lt;/p&gt;</content><category term="misc"/><category term="openpgp"/></entry><entry><title>Tech-assisted Contact-Tracing against the COVID-19 pandemic</title><link href="https://dkg.fifthhorseman.net/blog/tech-assisted-contact-tracing-against-the-covid-19-pandemic.html" rel="alternate"/><published>2020-04-16T20:51:00-04:00</published><updated>2020-04-16T20:51:00-04:00</updated><author><name>Daniel Kahn Gillmor</name></author><id>tag:dkg.fifthhorseman.net,2020-04-16:/blog/tech-assisted-contact-tracing-against-the-covid-19-pandemic.html</id><summary type="html">&lt;p&gt;What are the risks and potential benefits of contact-tracing?&lt;/p&gt;</summary><content type="html">&lt;p&gt;Today at the ACLU, we &lt;a href="https://www.aclu.org/report/aclu-white-paper-principles-technology-assisted-contact-tracing"&gt;released a
whitepaper&lt;/a&gt;
discussing how to evaluate some novel cryptographic schemes that are
being considered to provide technology-assisted contact-tracing in the
face of the COVID-19 pandemic.&lt;/p&gt;
&lt;p&gt;The document offers guidelines for thinking about potential schemes
like this, and what kinds of safeguards we need to expect and demand
from these systems so that we might try to address the (hopefully
temporary) crisis of the pandemic without also creating a permanent
crisis for civil liberties.&lt;/p&gt;
&lt;p&gt;The proposals that we're seeing (including &lt;a href="https://pact.mit.edu"&gt;PACT&lt;/a&gt;,
&lt;a href="https://github.com/DP-3T"&gt;DP^3T&lt;/a&gt;, &lt;a href="https://tcn-coalition.org"&gt;TCN&lt;/a&gt;,
and the &lt;a href="https://www.apple.com/covid19/contacttracing"&gt;Apple/Google
proposal&lt;/a&gt;) work in pretty
similar ways, and the challenges and tradeoffs there are remarkably
similar to &lt;a href="https://ietf.org"&gt;Internet protocol&lt;/a&gt; design decisions.
Only now in addition to bytes and packets and questions of efficiency,
privacy, and control, we're also dealing directly with risk of
physical harm (who gets sick?), society-wide allocation of scarce and
critical resources (who gets tested? who gets treatment?), and
potentially serious means of exercising powerful social control (who
gets forced into quarantine?).&lt;/p&gt;
&lt;p&gt;My ACLU colleague &lt;a href="https://twitter.com/joncallas"&gt;Jon Callas&lt;/a&gt; and i
will be doing a Reddit
&lt;a href="https://dkg.fifthhorseman.net/reddit-ama-2020-04-17.jpg"&gt;AMA&lt;/a&gt; in
&lt;a href="https://reddit.com/r/Coronavirus"&gt;r/Coronavirus&lt;/a&gt; tomorrow starting at
2020-04-17T19:00:00Z (that's 3pm Friday in &lt;code&gt;TZ=America/New_York&lt;/code&gt;)
about this very topic, if that's the kind of thing you're into.&lt;/p&gt;</content><category term="misc"/><category term="covid-19"/></entry><entry><title>DANE OPENPGPKEY for debian.org</title><link href="https://dkg.fifthhorseman.net/blog/dane-openpgpkey-for-debian.org.html" rel="alternate"/><published>2019-07-09T00:00:00-04:00</published><updated>2019-07-09T00:00:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2019-07-09:/blog/dane-openpgpkey-for-debian.org.html</id><summary type="html">&lt;h1 id="dane-openpgpkey-for-debianorg"&gt;DANE OPENPGPKEY for debian.org&lt;/h1&gt;
&lt;p&gt;I recently announced &lt;a href="wkd-for-debian.org.html"&gt;the publication of Web Key Directory for
&lt;code&gt;@debian.org&lt;/code&gt; e-mail addresses&lt;/a&gt;.  This blog post
announces another way to fetch OpenPGP certificates for &lt;code&gt;@debian.org&lt;/code&gt;
e-mail addresses, this time using only the DNS.  These two mechanisms
are complementary, not in competition.  We want …&lt;/p&gt;</summary><content type="html">&lt;h1 id="dane-openpgpkey-for-debianorg"&gt;DANE OPENPGPKEY for debian.org&lt;/h1&gt;
&lt;p&gt;I recently announced &lt;a href="wkd-for-debian.org.html"&gt;the publication of Web Key Directory for
&lt;code&gt;@debian.org&lt;/code&gt; e-mail addresses&lt;/a&gt;.  This blog post
announces another way to fetch OpenPGP certificates for &lt;code&gt;@debian.org&lt;/code&gt;
e-mail addresses, this time using only the DNS.  These two mechanisms
are complementary, not in competition.  We want to make sure that
whatever certificate lookup scheme your OpenPGP client supports, you
will be able to find the appropriate certificate.&lt;/p&gt;
&lt;p&gt;The additional mechanism we're now supporting (since a few days ago)
is DANE OPENPGPKEY, specified in &lt;a href="https://tools.ietf.org/html/rfc7929"&gt;RFC
7929&lt;/a&gt;.&lt;/p&gt;
&lt;h1 id="how-does-it-work"&gt;How does it work?&lt;/h1&gt;
&lt;p&gt;DANE OPENPGPKEY works by storing a minimized OpenPGP certificate in
the DNS, ideally in a subdomain at label based on a hashed version of
the local part of the e-mail address.&lt;/p&gt;
&lt;p&gt;With modern GnuPG, if you're interested in retrieving the OpenPGP
certificate for &lt;code&gt;dkg&lt;/code&gt; as served by the DNS, you can do:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;gpg&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;--auto-key-locate clear,nodefault,dane --locate-keys dkg@debian.org&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;If you're interested in how this DNS zone is populated, take a look
&lt;a href="https://salsa.debian.org/debian-keyring/keyring/commits/publish-dane"&gt;at can the code that handles
it&lt;/a&gt;.
Please &lt;a href="https://salsa.debian.org/debian-keyring/keyring/merge_requests"&gt;request
improvements&lt;/a&gt;
if you see ways that this could be improved.&lt;/p&gt;
&lt;p&gt;Unfortunately, &lt;a href="https://dev.gnupg.org/T4618"&gt;GnuPG does not currently do DNSSEC validation on these
records&lt;/a&gt;, so the cryptographic
protections offered by this client are not as strong as those provided
by WKD (which at least checks the X.509 certificate for a given domain
name against the list of trusted root CAs).&lt;/p&gt;
&lt;h1 id="why-offer-both-dane-openpgpkey-and-wkd"&gt;Why offer both DANE OPENPGPKEY and WKD?&lt;/h1&gt;
&lt;p&gt;I'm hoping that the Debian project can ensure that no matter whatever
sensible mechanism any OpenPGP client implements for certificate
lookup, it will be able to find the appropriate OpenPGP certificate
for contacting someone within the &lt;code&gt;@debian.org&lt;/code&gt; domain.&lt;/p&gt;
&lt;p&gt;A clever OpenPGP client might even consider these two mechanisms --
DANE OPENPGPKEY and WKD -- as corroborative mechanisms, since an
attacker who happens to compromise one of them may find it more
difficult to compromise both simultaneously.&lt;/p&gt;
&lt;h1 id="how-to-update"&gt;How to update?&lt;/h1&gt;
&lt;p&gt;If you are a Debian developer and you want your OpenPGP certificate
updated in the DNS, please follow &lt;a href="https://keyring.debian.org/"&gt;the normal procedures for Debian
keyring maintenance&lt;/a&gt; like you always
have.  When a new debian-keyring package is released, we will update
these DNS records at the same time.&lt;/p&gt;
&lt;h1 id="thanks"&gt;Thanks&lt;/h1&gt;
&lt;p&gt;Setting this up would not have been possible without help from
&lt;code&gt;weasel&lt;/code&gt; on the Debian System Administration team, and &lt;code&gt;Noodles&lt;/code&gt; from
the keyring-maint team providing guidance.&lt;/p&gt;
&lt;p&gt;DANE OPENPGPKEY was documented and shepherded through the IETF by Paul
Wouters.&lt;/p&gt;
&lt;p&gt;Thanks to all of these people for making it possible.&lt;/p&gt;</content><category term="misc"/></entry><entry><title>WKD for debian.org</title><link href="https://dkg.fifthhorseman.net/blog/wkd-for-debian.org.html" rel="alternate"/><published>2019-07-04T00:00:00-04:00</published><updated>2019-07-04T00:00:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2019-07-04:/blog/wkd-for-debian.org.html</id><summary type="html">&lt;h2 id="wkd-for-debianorg"&gt;WKD for debian.org&lt;/h2&gt;
&lt;p&gt;You can now fetch the OpenPGP certificate for any Debian developer who
uses an &lt;code&gt;@debian.org&lt;/code&gt; e-mail address using &lt;a href="https://tools.ietf.org/html/draft-koch-openpgp-webkey-service"&gt;Web Key
Directory&lt;/a&gt;
(WKD).&lt;/p&gt;
&lt;h1 id="how"&gt;How?&lt;/h1&gt;
&lt;p&gt;With modern GnuPG, if you're interested in the OpenPGP certificate for
&lt;code&gt;dkg&lt;/code&gt; just do:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;gpg&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;--locate-keys dkg@debian.org&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;By default, this …&lt;/p&gt;</summary><content type="html">&lt;h2 id="wkd-for-debianorg"&gt;WKD for debian.org&lt;/h2&gt;
&lt;p&gt;You can now fetch the OpenPGP certificate for any Debian developer who
uses an &lt;code&gt;@debian.org&lt;/code&gt; e-mail address using &lt;a href="https://tools.ietf.org/html/draft-koch-openpgp-webkey-service"&gt;Web Key
Directory&lt;/a&gt;
(WKD).&lt;/p&gt;
&lt;h1 id="how"&gt;How?&lt;/h1&gt;
&lt;p&gt;With modern GnuPG, if you're interested in the OpenPGP certificate for
&lt;code&gt;dkg&lt;/code&gt; just do:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;gpg&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;--locate-keys dkg@debian.org&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;By default, this will show you any matching certificate that you
already have in your GnuPG local keyring.  But if you don't have a
matching certificate already, it will fall back to using WKD.&lt;/p&gt;
&lt;p&gt;These certificates are extracted from the debian keyring and published
at &lt;code&gt;https://openpgpkey.debian.org/.well-known/openpgpkey/debian.org/&lt;/code&gt;, as defined
in &lt;a href="https://tools.ietf.org/html/draft-koch-openpgp-webkey-service"&gt;the
WKD spec&lt;/a&gt;.  We intend to keep them up-to-date when ever the
keyring-maint team publishes a new batch of certificates.  Our tooling
uses &lt;a href="https://salsa.debian.org/debian-keyring/keyring/merge_requests/2"&gt;some repeated invocations of
&lt;code&gt;gpg&lt;/code&gt;&lt;/a&gt;
to extract and build the published tree of files.&lt;/p&gt;
&lt;p&gt;Debian is current &lt;em&gt;not&lt;/em&gt; implementing the &lt;a href="https://tools.ietf.org/html/draft-koch-openpgp-webkey-service-08#section-4"&gt;Web Key Directory Update
Protocol&lt;/a&gt;
(and we have no plans to do so).  If you are a Debian developer and
you want your OpenPGP certificate updated in WKD, please follow &lt;a href="https://keyring.debian.org/"&gt;the
normal procedures for Debian keyring
maintenance&lt;/a&gt; like you always have.&lt;/p&gt;
&lt;h1 id="what-about-other-domains"&gt;What about other domains?&lt;/h1&gt;
&lt;p&gt;Our update here works great for e-mail addresses in the &lt;code&gt;@debian.org&lt;/code&gt;
domain, but it has no direct effect for other e-mail addresses.&lt;/p&gt;
&lt;p&gt;However, if you have an e-mail address in a domain you control, you
can publish your own WKD.  If you would rather use an e-mail service
in a domain managed by other people, you might also be interested in
GnuPG's list of &lt;a href="https://wiki.gnupg.org/WKD#Mail_Service_Providers_offering_WKD"&gt;e-mail service providers that offer
WKD&lt;/a&gt;.&lt;/p&gt;
&lt;h1 id="why"&gt;Why?&lt;/h1&gt;
&lt;p&gt;The SKS keyserver network has been &lt;a href="https://tools.ietf.org/html/draft-dkg-openpgp-abuse-resistant-keystore"&gt;vulnerable to
abuse&lt;/a&gt;
for years.  The &lt;a href="community-impact-openpgp-cert-flooding.html"&gt;recent certificate flooding
attacks&lt;/a&gt; make fetching an
OpenPGP certificate from that pool a risky operation: potentially
causing a &lt;a href="https://dev.gnupg.org/T4592"&gt;denial of service against
GnuPG&lt;/a&gt;.  In particular, &lt;a href="https://access.redhat.com/articles/4264021"&gt;&lt;em&gt;anyone&lt;/em&gt; can
flood any certificate in
SKS&lt;/a&gt; (or other common
keyservers that are not resistant to abuse).&lt;/p&gt;
&lt;p&gt;WKD avoids the problem of certificate flooding by arbitrary third
parties.  It's not a guaranteed defense against flooding though: the
domain controller (and whoever they authorize to update the WKD) is
still capable of offering a flooded certificate via WKD.  On the plus
side, at least some WKD clients do &lt;a href="https://dev.gnupg.org/T4607#127792"&gt;aggressive filtering on
certificates found via WKD&lt;/a&gt;, which
should limit the ability of an adversary to flood a certificate in
your local keyring.&lt;/p&gt;
&lt;h1 id="thanks"&gt;Thanks&lt;/h1&gt;
&lt;p&gt;Setting this up would not have been possible without help from
&lt;code&gt;weasel&lt;/code&gt; and &lt;code&gt;jcristau&lt;/code&gt; from the Debian System Administration team,
and &lt;code&gt;Noodles&lt;/code&gt; from the keyring-maint team.&lt;/p&gt;
&lt;p&gt;WKD was designed and implemented by Werner Koch and the GnuPG team, in
anticipation of this specific need.&lt;/p&gt;
&lt;p&gt;Thanks to all of these people for making it possible.&lt;/p&gt;
&lt;h1 id="what-next"&gt;What next?&lt;/h1&gt;
&lt;p&gt;There's some talk about publishing similar OpenPGP certificates in the
DNS as well, using &lt;a href="https://tools.ietf.org/html/rfc7929"&gt;RFC 7929
(OPENPGPKEY) records&lt;/a&gt;, but we haven't set that up yet.&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Community Impact of OpenPGP Certificate Flooding</title><link href="https://dkg.fifthhorseman.net/blog/community-impact-openpgp-cert-flooding.html" rel="alternate"/><published>2019-06-28T15:00:00-04:00</published><updated>2019-06-28T15:00:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2019-06-28:/blog/community-impact-openpgp-cert-flooding.html</id><summary type="html">&lt;h2 id="community-impact-of-openpgp-certificate-flooding"&gt;Community Impact of OpenPGP Certificate Flooding&lt;/h2&gt;
&lt;p&gt;I wrote yesterday about &lt;a href="openpgp-certificate-flooding.html"&gt;a recent OpenPGP certificate flooding
attack&lt;/a&gt;, what I think it means for
the ecosystem, and how it impacted me.  This is a brief followup,
trying to zoom out a bit and think about why it affected me
emotionally the way …&lt;/p&gt;</summary><content type="html">&lt;h2 id="community-impact-of-openpgp-certificate-flooding"&gt;Community Impact of OpenPGP Certificate Flooding&lt;/h2&gt;
&lt;p&gt;I wrote yesterday about &lt;a href="openpgp-certificate-flooding.html"&gt;a recent OpenPGP certificate flooding
attack&lt;/a&gt;, what I think it means for
the ecosystem, and how it impacted me.  This is a brief followup,
trying to zoom out a bit and think about why it affected me
emotionally the way that it did.&lt;/p&gt;
&lt;p&gt;One of the reasons this situation makes me sad is not just that it's
more breakage that needs cleaning up, or even that my personal
identity certificate was on the receiving end.  It's that it has
impacted (and will continue impacting at least in the short term) many
different people -- friends and colleagues -- who I know and care
about.  It's not just that they may be the next targets of such a
flooding attack if we don't fix things, although that's certainly
possible.  What gets me is that they were affected &lt;em&gt;because&lt;/em&gt; they know
me and communicate with me.  They had my certificate in their keyring,
or in some mutually-maintained system, and as a result of what we know
to be good practice -- regular keyring refresh -- they got burned.&lt;/p&gt;
&lt;p&gt;Of course, they didn't get actually, physically burned.  But from
several conversations i've had over the last 24 hours, i know
personally at least a half-dozen different people who i personally
know have lost hours of work, being stymied by the failing tools, some
of that time spent confused and anxious and frustrated.  Some of them
thought they might have lost access to their encrypted e-mail messages
entirely.  Others were struggling to wrestle a suddenly non-responsive
machine back into order.  These are all good people doing other
interesting work that I want to succeed, and I can't give them those
hours back, or relieve them of that stress retroactively.&lt;/p&gt;
&lt;p&gt;One of the points I've been driving at for years is that the goals of
much of the work I care about (confidentiality; privacy; information
security and data sovereignty; healthy communications systems) are not
individual goods.  They are interdependent, communally-constructed and
communally-defended social properties.&lt;/p&gt;
&lt;p&gt;As an engineering community, we failed -- and as an engineer, I
contributed to that failure -- at protecting these folks in this
instance about because we left things sloppy and broken and supposedly
"good enough".&lt;/p&gt;
&lt;p&gt;Fortunately, this failure isn't the worst situation.  There's no
arbitrary code execution, no permanent data loss (unless people get
panicked and delete everything), no accidental broadcast of secrets
that shouldn't be leaked.&lt;/p&gt;
&lt;p&gt;And as much as this is a community failure, there are also communities
of people who have recognized these problems and have been working to
solve them.  So I'm pretty happy that good people have been working on
infrastructure that saw this coming, and were preparing for it, even
if their tools haven't been as fully implemented (or as widely
adopted) as they should be yet.  Those projects include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://autocrypt.org"&gt;Autocrypt&lt;/a&gt; -- which avoids any interaction
   with the keyserver network in favor of in-band key discovery.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://tools.ietf.org/html/draft-koch-openpgp-webkey-service"&gt;Web Key
   Directory&lt;/a&gt;
   or WKD, which maps e-mail addresses to a user-controlled
   publication space for their OpenPGP Keys.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://tools.ietf.org/html/rfc7929"&gt;DANE OPENPGPKEY&lt;/a&gt; which lets a
   domain owner publish their user's minimal OpenPGP certificates in
   the DNS directly.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://gitlab.com/hagrid-keyserver/"&gt;Hagrid&lt;/a&gt;, the implementation
   behind the &lt;a href="https://keys.openpgp.org"&gt;keys.openpgp.org&lt;/a&gt; keyserver,
   which presents the opportunity for a &lt;a href="https://lists.nongnu.org/archive/html/sks-devel/2019-02/msg00041.html"&gt;updates-only
   interface&lt;/a&gt;
   as well as a place for people to publish their certificates if
   their domain controller doesn't support WKD or DANE OPENPGPKEY.
   Hagrid is also an excellent first public showing for the &lt;a href="https://sequoia-pgp.org/"&gt;Sequoia
   project&lt;/a&gt;, a Rust-based implementation of
   the OpenPGP standards that hopefully we can build more tooling on
   top of in the years to come.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Let's keep pushing these community-driven approaches forward and get
the ecosystem to a healthier place.&lt;/p&gt;</content><category term="misc"/></entry><entry><title>OpenPGP Certificate Flooding</title><link href="https://dkg.fifthhorseman.net/blog/openpgp-certificate-flooding.html" rel="alternate"/><published>2019-06-28T00:00:00-04:00</published><updated>2019-06-28T00:00:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2019-06-28:/blog/openpgp-certificate-flooding.html</id><summary type="html">&lt;h2 id="openpgp-certificate-flooding"&gt;OpenPGP Certificate Flooding&lt;/h2&gt;
&lt;p&gt;My public cryptographic identity has been spammed to the point where
it is unusable in standard workflows.  This blogpost talks about what
happened, what I'm doing about it, and what it means for the broader
ecosystem.&lt;/p&gt;
&lt;p&gt;If you work with me and you use OpenPGP certificates to …&lt;/p&gt;</summary><content type="html">&lt;h2 id="openpgp-certificate-flooding"&gt;OpenPGP Certificate Flooding&lt;/h2&gt;
&lt;p&gt;My public cryptographic identity has been spammed to the point where
it is unusable in standard workflows.  This blogpost talks about what
happened, what I'm doing about it, and what it means for the broader
ecosystem.&lt;/p&gt;
&lt;p&gt;If you work with me and you use OpenPGP certificates to do so, the
crucial things you should know are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Do not refresh my OpenPGP certificate from the SKS keyserver
   network.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Use a constrained keyserver like
   &lt;a href="https://keys.openpgp.org"&gt;keys.openpgp.org&lt;/a&gt; if you want to check
   my certificate for updates like revocation, expiration, or subkey
   rollover.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Use an &lt;a href="https://autocrypt.org"&gt;Autocrypt&lt;/a&gt;-capable e-mail client,
   &lt;a href="https://tools.ietf.org/html/draft-koch-openpgp-webkey-service-08"&gt;WKD&lt;/a&gt;,
   or &lt;a href="https://dkg.fifthhorseman.net/dkg-openpgp.key"&gt;direct download from my
   server&lt;/a&gt; to find my
   certificate in the first place.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;If you have already fetched my certificate in the last week, and it
   is bloated, or your GnuPG instance is horribly slow as a result,
   you probably want to delete it and then recover it via one of the
   channels described above.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="what-happened"&gt;What Happened?&lt;/h2&gt;
&lt;p&gt;Some time in the last few weeks, &lt;a href="https://dkg.fifthhorseman.net/dkg-openpgp.key"&gt;my OpenPGP certificate,
0xC4BC2DDB38CCE96485EBE9C2F20691179038E5C6&lt;/a&gt;
was flooded with bogus certifications which were uploaded to the &lt;a href="https://sks-keyservers.net/"&gt;SKS
keyserver network&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;SKS is known to be vulnerable to this kind of &lt;a href="https://tools.ietf.org/html/draft-dkg-openpgp-abuse-resistant-keystore-03#section-2.1"&gt;Certificate
Flooding&lt;/a&gt;,
and is difficult to address due to the synchronization mechanism of
the SKS pool.  (SKS's synchronization assumes that all keyservers have
the same set of filters). You can see &lt;a href="https://bitbucket.org/skskeyserver/sks-keyserver/issues/57/anyone-can-make-any-pgp-key-unimportable"&gt;discussion about this
problem&lt;/a&gt;
from a year ago along with earlier proposals for how to &lt;a href="https://lists.gnupg.org/pipermail/gnupg-users/2018-January/059799.html"&gt;mitigate
it&lt;/a&gt;.
But none of those proposals have quite come to fruition, and people
are still reliant on the SKS network.&lt;/p&gt;
&lt;h2 id="previous-instances-of-certificate-flooding"&gt;Previous Instances of Certificate Flooding&lt;/h2&gt;
&lt;p&gt;We've seen various forms of certificate flooding before, including
&lt;a href="https://lists.gnupg.org/pipermail/gnupg-users/2018-January/059753.html"&gt;spam on Werner Koch's
key&lt;/a&gt;
over a year ago, and abuse tools made available years ago under the
name &lt;a href="https://github.com/micahflee/trollwot"&gt;"trollwot"&lt;/a&gt;.  There's a
&lt;a href="https://github.com/yakamok/keyserver-fs"&gt;keyserver-backed filesystem&lt;/a&gt;
proposed as a proof of concept to point out the abuse.&lt;/p&gt;
&lt;p&gt;There was even a discussion a few months ago about how &lt;a href="https://lists.riseup.net/www/arc/monkeysphere/2019-04/msg00000.html"&gt;the SKS
keyserver network is
dying&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;So none of this is a novel or surprising problem.  However, the scale
of spam attached to certificates recently appears to be unprecedented.
It's not just mine: &lt;a href="https://dev.gnupg.org/T3972#127338"&gt;Robert J, Hansen's certificate has also been
spammed into oblivion&lt;/a&gt; as
well. The older certification spam on Werner's certificate, for
example is "only" about 5K certifications (a total of &amp;lt; 1MiB), whereas the
certification spam attached to mine is more like 55K certifications for a
total of 17MiB, and rjh's is more than double that.&lt;/p&gt;
&lt;h2 id="what-problems-does-certificate-flooding-cause"&gt;What Problems does Certificate Flooding Cause?&lt;/h2&gt;
&lt;p&gt;The fact that my certificate is flooded quite this badly provides an
opportunity to see what breaks.  I've been filing bug reports and
profiling problems over the last day.&lt;/p&gt;
&lt;p&gt;GnuPG &lt;a href="https://dev.gnupg.org/T4591"&gt;can't even import my certificate&lt;/a&gt;
from the keyservers any more in the common case.  This also has
implications for ensuring that revocations are discovered, or new
subkeys rotated, as described in that ticket.&lt;/p&gt;
&lt;p&gt;In the situations where it's possible to have imported the large
certificate, gpg exhibits &lt;a href="https://dev.gnupg.org/T4592"&gt;severe performance problems for even basic
operations over the keyring&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This causes &lt;a href="https://dev.gnupg.org/T3972"&gt;Enigmail to become unusable&lt;/a&gt;
if it encounters a flooded certificate.&lt;/p&gt;
&lt;p&gt;It also causes problems for &lt;a href="https://bugs.debian.org/931204"&gt;monkeysphere-authentication if it
encounters a flooded certificate&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If this spammed certificate is in the GnuPG keyring, just verifying an
OpenPGP-signed tag in the &lt;a href="https://git-scm.com"&gt;git&lt;/a&gt; revision control
system made by this certificate is now extremely expensive.  &lt;code&gt;git tag
-v $tagname&lt;/code&gt;, for a tag that is signed with the signing-capable subkey
of this certificate consumes 145 seconds of CPU time (tag signature
verification often happens as part of an automated process, and
typically takes much less than 1 second of CPU time).&lt;/p&gt;
&lt;p&gt;There are probably more!  If you find other problems for tools that
deal with these sort of flooded certs, please report bugs
appropriately.&lt;/p&gt;
&lt;h2 id="dealing-with-certificate-flooding"&gt;Dealing with Certificate Flooding&lt;/h2&gt;
&lt;p&gt;What can we do about this?  Months ago, i wrote &lt;a href="https://tools.ietf.org/html/draft-dkg-openpgp-abuse-resistant-keystore-03"&gt;a draft about
abuse-resistant
keystores&lt;/a&gt;
that outlined these problems and what we need from a keyserver.&lt;/p&gt;
&lt;h3 id="use-abuse-resistant-keystores-to-refresh-certificates"&gt;Use Abuse-Resistant Keystores to Refresh Certificates&lt;/h3&gt;
&lt;p&gt;If the purpose of refreshing your certificate is to find key material
updates and revocations, we need to use an abuse-resistant keyserver
or network of keyservers for that.&lt;/p&gt;
&lt;p&gt;Fortunately, &lt;a href="https://keys.openpgp.org"&gt;keys.openpgp.org&lt;/a&gt; is just such
a service, and it was recently launched.  It seems to work!  It can
distribute revocations and subkey rollovers automatically, even if you
don't have a user ID for the certificate.  You can do this by putting
the following line in &lt;code&gt;~/.gnupg/dirmngr.conf&lt;/code&gt; &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;keyserver hkps://keys.openpgp.org
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;and ensure that there is no &lt;code&gt;keyserver&lt;/code&gt; entry at all in
&lt;code&gt;~/.gnupg/gpg.conf&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;This keyserver doesn't distribute third-party certifications at all,
though.  And if the owner of the e-mail address hasn't confirmed with
the operators of &lt;code&gt;keys.openpgp.org&lt;/code&gt; that they want that keyserver to
distribute their certificate, it &lt;a href="https://keys.openpgp.org/about"&gt;won't even distribute the
certificate's user IDs&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This keyserver also doesn't have the same keys as the SKS pool. It was
seeded with the keys on the pool on setup, but is &lt;a href="https://gitlab.com/hagrid-keyserver/hagrid/issues/113"&gt;not pulling new
updates in nor sending updates back&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id="fix-gnupg-to-import-certificate-updates-even-without-user-ids"&gt;Fix GnuPG to Import certificate updates even without User IDs&lt;/h3&gt;
&lt;p&gt;Unfortunately, &lt;a href="https://dev.gnupg.org/T4393"&gt;GnuPG doesn't cope well with importing minimalist
certificates&lt;/a&gt;.  I've applied patches for
this in debian experimental (and they're documented in debian as
&lt;a href="https://bugs.debian.org/930665"&gt;#930665&lt;/a&gt;), but those fixes are not yet
adopted upstream, or widely deployed elsewhere.&lt;/p&gt;
&lt;h3 id="in-band-certificate-discovery"&gt;In-band Certificate Discovery&lt;/h3&gt;
&lt;p&gt;Refreshing certificates is only part of the role that keyserver
networks play.  Another is just finding OpenPGP certificates in the
first place.&lt;/p&gt;
&lt;p&gt;The best way to find a certificate is if someone just gives it to you
in the context that it makes sense.&lt;/p&gt;
&lt;p&gt;The &lt;a href="https://autocrypt.org"&gt;Autocrypt project&lt;/a&gt; is an example of this
pattern for e-mail messages.  If you can adopt an Autocrypt-capable
e-mail client, you should, since that will avoid needing to search for
keys at all when dealing with e-mail.  Unfortunately, those
implementations are also not widely available yet.&lt;/p&gt;
&lt;h3 id="certificate-lookup-via-wkd-or-dane"&gt;Certificate Lookup via WKD or DANE&lt;/h3&gt;
&lt;p&gt;If you're looking up an OpenPGP certificate by e-mail address, you
should try looking it up via some mechanism where the address owner
(or at least the domain owner) can publish the record.  The current
best examples of this are
&lt;a href="https://tools.ietf.org/html/draft-koch-openpgp-webkey-service-08"&gt;WKD&lt;/a&gt;
and &lt;a href="https://tools.ietf.org/html/rfc7929"&gt;DANE's OPENPGPKEY DNS
records&lt;/a&gt;.  Modern versions of
GnuPG support both of these methods.  See the &lt;code&gt;auto-key-locate&lt;/code&gt;
documentation in &lt;code&gt;gpg(1)&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id="conclusion"&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;This is a mess, and it's a mess a long time coming.  The parts of the
OpenPGP ecosystem that rely on the naive assumptions of the SKS
keyserver can no longer be relied on, because people are deliberately
abusing those keyservers.  We need significantly more defensive
programming, and a better set of protocols for thinking about how and
when to retrieve OpenPGP certificates.&lt;/p&gt;
&lt;h2 id="a-personal-postscript"&gt;A Personal Postscript&lt;/h2&gt;
&lt;p&gt;I've spent a significant amount of time over the years trying to push
the ecosystem into a more responsible posture with respect to OpenPGP
certificates, and have clearly not been as successful at it or as fast
as I wanted to be.  Complex ecosystems can take time to move.&lt;/p&gt;
&lt;p&gt;To have my own certificate directly spammed in this way felt
surprisingly personal, as though someone was trying to attack or
punish me, specifically.  I can't know whether that's actually the
case, of course, nor do I really want to.  And the fact that Robert
J. Hansen's certificate was also spammed makes me feel a little less
like a singular or unique target, but I also don't feel particularly
proud of feeling relieved that someone else is also being "punished"
in addition to me.&lt;/p&gt;
&lt;p&gt;But this report wouldn't be complete if I didn't mention that I've
felt disheartened and demotivated by this situation.  I'm a stubborn
person, and I'm trying to make the best of the situation by being
constructive about at least documenting the places that are most
severely broken by this.  But I've also found myself tempted to walk
away from this ecosystem entirely because of this incident.  I don't
want to be too dramatic about this, but whoever did this basically
experimented on me (and Robert) directly, and it's a pretty shitty
thing to do.&lt;/p&gt;
&lt;p&gt;If you're reading this, and you set this off, and you selected me
specifically because of my role in the OpenPGP ecosystem, or because I
wrote &lt;a href="https://tools.ietf.org/html/draft-dkg-openpgp-abuse-resistant-keystore"&gt;the abuse-resistant-keystore
draft&lt;/a&gt;,
or because I'm part of the Autocrypt project, then you should know
that I care about making this stuff work for people.  If you'd reached
out to me to describe what you were planning to do, we could have done
all of the above bug reporting and triage using demonstration
certificates, and worked on it together.  I would have happily helped.
I still might!  But because of the way this was done, I'm not feeling
particularly happy right now.  I hope that someone is, somewhere.&lt;/p&gt;</content><category term="misc"/></entry><entry><title>New OpenPGP certificate for dkg, 2019</title><link href="https://dkg.fifthhorseman.net/blog/2019-dkg-openpgp-transition.html" rel="alternate"/><published>2019-01-19T02:49:53-05:00</published><updated>2019-01-19T02:49:53-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2019-01-19:/blog/2019-dkg-openpgp-transition.html</id><summary type="html">&lt;h2 id="update"&gt;Update&lt;/h2&gt;
&lt;p&gt;I've scrapped my first try at a new OpenPGP certificate for 2019 (the
one I published yesterday).  See the history discussion at the bottom
of this post for details.  This blogpost has been updated to reflect
my revised attempt.&lt;/p&gt;
&lt;h2 id="2019-openpgp-transition-try-2"&gt;2019 OpenPGP transition (try 2)&lt;/h2&gt;
&lt;p&gt;My old OpenPGP certificate will …&lt;/p&gt;</summary><content type="html">&lt;h2 id="update"&gt;Update&lt;/h2&gt;
&lt;p&gt;I've scrapped my first try at a new OpenPGP certificate for 2019 (the
one I published yesterday).  See the history discussion at the bottom
of this post for details.  This blogpost has been updated to reflect
my revised attempt.&lt;/p&gt;
&lt;h2 id="2019-openpgp-transition-try-2"&gt;2019 OpenPGP transition (try 2)&lt;/h2&gt;
&lt;p&gt;My old OpenPGP certificate will be 12 years old later this year.  I'm
transitioning to a new OpenPGP certificate.&lt;/p&gt;
&lt;p&gt;You might know my old OpenPGP certificate as:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;pub&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;rsa4096&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2007&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;06&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;02&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;SC&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;expires: 2019-06-29&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;EE5BE979282D80B9F7540F1CCD2ED94D21739E9&lt;/span&gt;
&lt;span class="n"&gt;uid&lt;/span&gt;&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="n"&gt;Daniel&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Kahn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Gillmor&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="nv"&gt;@fifthhorseman&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="n"&gt;uid&lt;/span&gt;&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="n"&gt;Daniel&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Kahn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Gillmor&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="nv"&gt;@debian&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;My new OpenPGP certificate is:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;pub&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;ed25519&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2019&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;01&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;19&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;expires: 2021-01-18&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="n"&gt;C4BC2DDB38CCE96485EBE9C2F20691179038E5C6&lt;/span&gt;
&lt;span class="n"&gt;uid&lt;/span&gt;&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="n"&gt;Daniel&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Kahn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Gillmor&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="nv"&gt;@fifthhorseman&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="n"&gt;uid&lt;/span&gt;&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="n"&gt;Daniel&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Kahn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Gillmor&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="nv"&gt;@debian&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;If you've certified my old certificate, I'd appreciate your certifying
my new one.  Please do confirm by contacting me via whatever channels
you think are most appropriate (including in-person if you want to
share food or drink with me!) before you re-certify, of course.&lt;/p&gt;
&lt;p&gt;I've published the new certificate to the SKS keyserver network, as
well as to &lt;a href="https://dkg.fifthhorseman.net/dkg-openpgp.key"&gt;my personal
website&lt;/a&gt; -- you can
fetch it like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;wget -O- https://dkg.fifthhorseman.net/dkg-openpgp.key | gpg --import
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;A copy of this transition statement signed by both the old and new
certificates is available &lt;a href="https://dkg.fifthhorseman.net/2019-dkg-openpgp-transition.txt"&gt;on my
website&lt;/a&gt;,
and you can also find &lt;a href="https://dkg.fifthhorseman.net/blog/2019-dkg-openpgp-transition.html"&gt;further explanation about technical details,
choices, and rationale on my
blog&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="technical-details"&gt;Technical details&lt;/h2&gt;
&lt;p&gt;I've made a few decisions differently about this certificate:&lt;/p&gt;
&lt;h3 id="ed25519-and-curve25519-for-public-key-material"&gt;Ed25519 and Curve25519 for Public Key Material&lt;/h3&gt;
&lt;p&gt;I've moved from 4096-bit RSA public keys to the &lt;a href="https://cr.yp.to/ecdh.html"&gt;Bernstein elliptic
curve 25519&lt;/a&gt; for all my public key
material (&lt;a href="https://en.wikipedia.org/wiki/EdDSA"&gt;EdDSA&lt;/a&gt; for signing,
certification, and authentication, and
&lt;a href="https://en.wikipedia.org/wiki/Curve25519"&gt;Curve25519&lt;/a&gt; for
encryption).  25519 appears to be significantly stronger than any
cryptanalytic attack known to the public.  (4096-bit RSA may be
marginally stronger cryptographically than curve 25519, but both of
them are well beyond the threshhold of what we know how to break with
today's machinery)&lt;/p&gt;
&lt;p&gt;Additionally, elliptic curve keys and the signatures associated with
them are tiny compared to 4096-bit RSA.  I certified my new cert with
my old one, and well over half of the new certificate is just
certifications from the old key because they are so large.&lt;/p&gt;
&lt;p&gt;This size advantage makes it easier for me ship the public key
material (and signatures from it) in places that would be more awkward
otherwise.  See the discussion about Autocrypt below.&lt;/p&gt;
&lt;h3 id="split-out-aclu-identity"&gt;Split out ACLU identity&lt;/h3&gt;
&lt;p&gt;Note that my old certificate included some additional identities,
including job-specific e-mail addresses.  I've split out my
job-specific cryptographic credentials to a different OpenPGP
certificate entirely.  If you want to mail me at &lt;a href="&amp;#109;&amp;#97;&amp;#105;&amp;#108;&amp;#116;&amp;#111;&amp;#58;&amp;#100;&amp;#107;&amp;#103;&amp;#64;&amp;#97;&amp;#99;&amp;#108;&amp;#117;&amp;#46;&amp;#111;&amp;#114;&amp;#103;"&gt;&amp;#100;&amp;#107;&amp;#103;&amp;#64;&amp;#97;&amp;#99;&amp;#108;&amp;#117;&amp;#46;&amp;#111;&amp;#114;&amp;#103;&lt;/a&gt;, you
can use the certificate with fingerprint
&lt;code&gt;888E6BEAC41959269EAA177F138F5AB68615C560&lt;/code&gt; (which is also published on
&lt;a href="https://www.aclu.org/bio/daniel-kahn-gillmor"&gt;my work bio page&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;This is in part because the folks who communicate with me at my ACLU
address are more likely to have old or poorly-maintained e-mail
systems than other people I communicate with, and they might not be
able to handle curve 25519.  So the ACLU keys use 3072-bit RSA, which
is universally supported by any plausible OpenPGP implementation.&lt;/p&gt;
&lt;p&gt;This way I can experiment with being more forward-looking in my free
software and engineering community work, and shake out any bugs that I
might find there, before cutting over the e-mails that come in from
more legal- and policy-focused colleagues.&lt;/p&gt;
&lt;h3 id="isolated-subkey-capabilities"&gt;Isolated Subkey Capabilities&lt;/h3&gt;
&lt;p&gt;In my new certificate, the primary key is designated
certification-only.  There are three subkeys, one each for
authentication, encryption, and signing.  The primary key also has a
longer expiration time (2 years as of this writing), while the subkeys
have 1 year expiration dates.&lt;/p&gt;
&lt;p&gt;Isolating this functionality helps a little bit with security (I can
take the certification key entirely offline while still being able to
sign non-identity data), and it also offers a pathway toward having a
more robust subkey rotation schedule.  As I build out my tooling for
subkey rotation, i'll probably make a few more blog posts about that.&lt;/p&gt;
&lt;h3 id="autocrypt-friendly"&gt;Autocrypt-friendly&lt;/h3&gt;
&lt;p&gt;Finally, several of these changes are related to &lt;a href="https://www.autocrypt.org/"&gt;the Autocrypt
project&lt;/a&gt;, a really great collaboration of
a group of mail user agent developers, designers, UX experts,
trainers, and users, who are providing guidance to make encrypted
e-mail something that normal humans can use without having to think
too much about it.&lt;/p&gt;
&lt;p&gt;Autocrypt treats the OpenPGP certificate User IDs as merely
decorative, but its &lt;a href="https://autocrypt.org/level1.html#openpgp-based-key-data"&gt;recommended form of the User
ID&lt;/a&gt; for an
OpenPGP certificate is just the e-mail address wrapped in angle
brackets.  Unfortunately, I didn't manage to get that particular form
of User ID into this certificate at this time (see discussion of split
User IDs below).&lt;/p&gt;
&lt;p&gt;Autocrypt is also &lt;a href="https://github.com/autocrypt/autocrypt/pull/393"&gt;moving toward 25519 elliptic curve
keys&lt;/a&gt;, so this gives
me a chance to exercise that choice.&lt;/p&gt;
&lt;p&gt;I'm proud to be associated with the Autocrypt project, and have been
helping to shepherd some of the Autocrypt functionality into different
clients (my work on my own MUA of choice,
&lt;a href="https://notmuchmail.org"&gt;notmuch&lt;/a&gt; is currently stalled, but I hope to
pick it back up again soon).  Having an OpenPGP certificate that works
well with Autocrypt, and that I can stuff into messages even from
clients that aren't fully-Autocrypt compliant yet is useful to me for
getting things tested.&lt;/p&gt;
&lt;h3 id="documenting-workflow-vs-tooling"&gt;Documenting workflow vs. tooling&lt;/h3&gt;
&lt;p&gt;Some people may want to know "how did you make your OpenPGP cert like
this?" For those folks, i'm sorry but this is not a step-by-step
technical howto.  I've read far too many "One True Way To Set Up Your
OpenPGP Certificate" blog posts that haven't aged well, and i'm not
confident enough to tell people to run the weird arbitrary commands
that I ran to get things working this way.&lt;/p&gt;
&lt;p&gt;Furthermore, I don't &lt;em&gt;want&lt;/em&gt; people to have to run those commands.&lt;/p&gt;
&lt;p&gt;If I think there are sensible ways to set up OpenPGP certificates, I
want those patterns built into standard tooling for normal people to
use, without a lot of command-line hackery.&lt;/p&gt;
&lt;p&gt;So if i'm going to publish a "how to", it would be in the form of
software that I think can be sensibly maintained and provides a sane
user interface for normal humans.  I haven't written that tooling yet,
but I need to change certs first, so for now you just get this blog
post in English.  But feel free to tell me what you think I could do
better!&lt;/p&gt;
&lt;h2 id="history"&gt;History&lt;/h2&gt;
&lt;p&gt;This is my second attempt at an OpenPGP certificate transition in
2019.  My earlier attempt uncovered a bunch of tooling issues with
split-out User IDs.  The original rationale for trying the split, and
the problems I found are detailed below.&lt;/p&gt;
&lt;h3 id="what-were-separated-user-ids"&gt;What were Separated User IDs?&lt;/h3&gt;
&lt;p&gt;My earlier attempt at a new OpenPGP certificate for 2019 tried to do
an unusual thing with the certificate User IDs. Rather than two User
IDs:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Daniel Kahn Gillmor &amp;lt;dkg@fifthhorseman.net&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Daniel Kahn Gillmor &amp;lt;dkg@debian.org&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;the (now revoked) earlier certificate had the name separate from the
e-mail addresses, making three User IDs:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Daniel Kahn Gillmor&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;dkg@fifthhorseman.net&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;dkg@debian.org&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There are a couple reasons I tried this.&lt;/p&gt;
&lt;p&gt;One reason is to simplify the certification process.  Traditional
OpenPGP User ID certification is an all-or-nothing process: the
certifier is asserting that both the name and e-mail address belong to
the identified party.  But this can be tough to reason about.  Maybe
you know my name, but not my e-mail address.  Or maybe you know my
over e-mail, but aren't really sure what my "real" name is (i'll leave
questions about what counts as a real name to a more philosophical
blog post).  You ought to be able to certify them independently.  Now
you can, since it's possible to certify one User ID independently of
another.&lt;/p&gt;
&lt;p&gt;Another reason is because I planned to use this certificate for
e-mail, among other purposes.  In e-mail systems, the human name is a
confusing distraction, as the real underlying correspondent is the
e-mail address.  E-mail programs should definitely allow their users
to couple a memorable name with an e-mail address, but it should be
more like a &lt;a href="https://en.wikipedia.org/wiki/Petname"&gt;petname&lt;/a&gt;.  The
bundling of a human "real" name with the e-mail address by the User ID
itself just provides more points of confusion for the mail client.&lt;/p&gt;
&lt;p&gt;If the user communicates with a certain person by e-mail address, the
certificate should be bound to the e-mail protocol address on its own.
Then the user themselves can decide what other monikers they want to
use for the person; the User ID shouldn't force them to look at a
"real" name just because it's been bundled together.&lt;/p&gt;
&lt;p&gt;Alas, putting this attempt into public practice uncovered several gaps
in the OpenPGP ecosystem.&lt;/p&gt;
&lt;p&gt;User IDs without an e-mail address are often ignored, mishandled, or
induce crashes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://www.gnu.org/software/emacs/"&gt;emacs&lt;/a&gt; &lt;a href="https://debbugs.gnu.org/cgi/bugreport.cgi?bug=34121"&gt;chokes when
   contemplating a User ID without an e-mail
   address&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://www.phildev.net/pius/"&gt;pius&lt;/a&gt; &lt;a href="https://github.com/jaymzh/pius/issues/109"&gt;fails to certify User IDs
   without an e-mail
   address&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://0xacab.org/monkeysphere/monkeysign"&gt;monkeysign&lt;/a&gt; &lt;a href="https://0xacab.org/monkeysphere/monkeysign/issues/65"&gt;certifies
   User IDs without an e-mail address, but sends them into the
   void&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://wiki.gnome.org/Apps/Keysign"&gt;gnome-keysign-sign-key&lt;/a&gt;
   &lt;a href="https://github.com/gnome-keysign/gnome-keysign/issues/71"&gt;discards certifications over User IDs that have no e-mail
   address&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://schleuder.org/"&gt;schleuder&lt;/a&gt; &lt;a href="https://0xacab.org/schleuder/schleuder/issues/396"&gt;dis-associates a certificate
   from all e-mail addresses if the primary User ID lacks an e-mail
   adddress&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And User IDs that are a raw e-mail address (without enclosing
angle-brackets) tickle additional problems.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://www.phildev.net/pius/"&gt;pius&lt;/a&gt; &lt;a href="https://github.com/jaymzh/pius/issues/111"&gt;fails to certify User IDs
   that are just a raw e-mail
   address&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://schleuder.org/"&gt;schleuder&lt;/a&gt; &lt;a href="https://0xacab.org/schleuder/schleuder/issues/395"&gt;fails to process User IDs
   which are bare e-mail
   addresses&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Finally, &lt;a href="https://web.monkeysphere.info"&gt;Monkeysphere&lt;/a&gt;'s ssh user
authentication mechanism typically works on a single User ID at a
time.  There's no way in Monkeysphere to say "authorize access to
account foo by any OpenPGP certificate that has a valid User ID &lt;code&gt;Alice
Jones&lt;/code&gt; &lt;em&gt;and&lt;/em&gt; a valid User ID &lt;code&gt;&amp;lt;alice@example.org&amp;gt;&lt;/code&gt;.  I'd like to keep
the &lt;code&gt;~/.monkeysphere/authorized_user_ids&lt;/code&gt; that I already have in place
working OK.  I have enough technical debt to deal with for
Monkeysphere (including that it only handles RSA currently) that I
don't need the additional headache of reasoning about split/joint User
IDs too.&lt;/p&gt;
&lt;p&gt;Because of all of these issues, in particular the schleuder bugs, i'm
not ready to use a split User ID OpenPGP certificate on today's
Internet, alas. I have revoked the OpenPGP certificate that had split
User IDs and started over with a new certificate with a more standard
User ID layout, as described above.  Better to rip off the band-aid
quickly!&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Protecting Software Updates</title><link href="https://dkg.fifthhorseman.net/blog/protecting-software-updates.html" rel="alternate"/><published>2018-06-28T11:57:00-04:00</published><updated>2018-06-28T11:57:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2018-06-28:/blog/protecting-software-updates.html</id><summary type="html">&lt;p&gt;In my work at the &lt;a href="https://www.aclu.org"&gt;ACLU&lt;/a&gt;, we fight for civil
rights and civil liberties.  This includes the ability to communicate
privately, free from surveillance or censorship, and to control your
own information.  These are principles that I think most free software
developers would agree with.  In that vein, we &lt;a href="https://www.aclu.org/blog/privacy-technology/surveillance-technologies/big-brother-getting-more-tech-savvy-heres-how"&gt;just …&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;In my work at the &lt;a href="https://www.aclu.org"&gt;ACLU&lt;/a&gt;, we fight for civil
rights and civil liberties.  This includes the ability to communicate
privately, free from surveillance or censorship, and to control your
own information.  These are principles that I think most free software
developers would agree with.  In that vein, we &lt;a href="https://www.aclu.org/blog/privacy-technology/surveillance-technologies/big-brother-getting-more-tech-savvy-heres-how"&gt;just released a guide
to securing software update
channels&lt;/a&gt;
in collaboration with students from &lt;a href="http://www.law.nyu.edu/academics/clinics/semester/technologylawandpolicy"&gt;NYU Law
School&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The guide focuses specifically on what people and organizations that
distribute software can do to ensure that their software update
processes and mechanisms are actually things that their users can
reliably trust.  The goal is to make these channels trustworthy, even
in the face of attempts by government agencies to force software
vendors to ship malware to their users.&lt;/p&gt;
&lt;p&gt;Why software updates specifically? Every well-engineered system on
today's Internet will have a software update mechanism, since there
are inevitably bugs that need fixing, or new features added to improve
the system for the users. But update channels also represent a risk:
they are an unclosable hole that enables installation of arbitrary
software, often at the deepest, most-privileged level of the machine.
This makes them a tempting target for anyone who wants to force the
user to run malware, whether that's a criminal organization, a
corporate or political rival, or a government surveillance agency.&lt;/p&gt;
&lt;p&gt;I'm pleased to say that Debian has already implemented many of the
technical recommendations we describe, including leading the way on
&lt;a href="https://reproducible-builds.org"&gt;reproducible builds&lt;/a&gt;.  But as
individual developers we might also be targeted, as &lt;a href="https://media.libreplanet.org/u/libreplanet/m/you-think-you-re-not-a-target-a-tale-of-three-developers/"&gt;lamby points
out&lt;/a&gt;,
and it's worth thinking about how you'd defend your users from such a
situation.&lt;/p&gt;
&lt;p&gt;As an organization, it would be great to see Debian continue to expand
its protections for its users by holding ourselves even more
accountable in our software update mechanisms than we already do.  In
particular, I'd love to see work on binary transparency, similar to
&lt;a href="https://wiki.mozilla.org/Security/Binary_Transparency"&gt;what Mozilla has been
doing&lt;/a&gt;, but
that ensures that the archive signing keys (which our users trust)
can't be abused/misused/compromised without public exposure, and that
allows for easy monitoring and investigation of what binaries we are
actually publishing.&lt;/p&gt;
&lt;p&gt;In addition to technical measures, if you think you might ever get a
government request to compromise your users, please make sure you are
in touch with a lawyer who has your back, who knows how to challenge
requests in court, and who understands why software update channels
should not be used for deliberately shipping malware.  If you're
facing such a situation, and you're in the USA and you don't have a
lawyer yet yourself, you can &lt;a href="mailto:SPTIntake@aclu.org?subject=Software+updates"&gt;reach out to the lawyers my workplace,
the ACLU's Speech, Privacy, and Technology Project for
help&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Protecting software update channels is the right thing for our users,
and for free software -- Debian's priorities.  So please take a look
at &lt;a href="https://www.aclu.org/issues/privacy-technology/consumer-privacy/how-malicious-software-updates-endanger-everyone"&gt;the
guidance&lt;/a&gt;,
think about how it might affect you or the people that you work with,
and start a conversation about what you can do to defend these systems
that everyone is obliged to trust on today's communications.&lt;/p&gt;</content><category term="misc"/></entry><entry><title>E-mail Cryptography</title><link href="https://dkg.fifthhorseman.net/blog/e-mail-cryptography.html" rel="alternate"/><published>2018-05-11T12:04:00-04:00</published><updated>2018-05-11T12:04:00-04:00</updated><author><name>Daniel Kahn Gillmor</name></author><id>tag:dkg.fifthhorseman.net,2018-05-11:/blog/e-mail-cryptography.html</id><summary type="html">&lt;p&gt;Analysis of usability and mechanics of cryptographic protection in e-mail&lt;/p&gt;</summary><content type="html">&lt;p&gt;I've been working on cryptographic e-mail software for many years now,
and i want to set down some of my observations of what i think some of
the challenges are.  I'm involved in
&lt;a href="https://autocrypt.org"&gt;Autocrypt&lt;/a&gt;, which is making great strides in
sensible key management (see the last section below, which is short
not because i think it's easy, but because i think Autocrypt has
covered this area quite well), but there are additional nuances to the
mechanics and user experience of e-mail encryption that i need to get
off my chest.&lt;/p&gt;
&lt;p&gt;Feedback welcome!&lt;/p&gt;
&lt;div class="toc"&gt;&lt;span class="toctitle"&gt;Table of contents:&lt;/span&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#cryptography-and-e-mail-messages"&gt;Cryptography and E-mail Messages&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#why-expose-cryptographic-protections-to-the-user-at-all"&gt;Why expose cryptographic protections to the user at all?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#simplicity"&gt;Simplicity&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#combinations"&gt;Combinations&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#partial-protections"&gt;Partial protections&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#cryptographic-mechanism"&gt;Cryptographic Mechanism&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#inline-pgp"&gt;Inline PGP&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#pgpmime-and-smime"&gt;PGP/MIME and S/MIME&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#cryptographic-envelope"&gt;Cryptographic Envelope&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#cryptographic-payload"&gt;Cryptographic Payload&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#layering-within-the-envelope"&gt;Layering within the Envelope&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#signedencrypted-vs-encryptedsigned"&gt;signed+encrypted vs encrypted+signed&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#multiple-layers-of-signatures-or-encryption"&gt;Multiple layers of signatures or encryption&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#signed-messages-should-indicate-the-intended-recipient"&gt;Signed messages should indicate the intended recipient&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#protected-headers"&gt;Protected Headers&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#message-id-and-threading-headers"&gt;Message-ID and threading headers&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#protecting-headers-during-e-mail-generation"&gt;Protecting Headers during e-mail generation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#key-management"&gt;Key management&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#key-changes-over-time"&gt;Key changes over time&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h1 id="cryptography-and-e-mail-messages"&gt;Cryptography and E-mail Messages&lt;/h1&gt;
&lt;p&gt;Cryptographic protection (i.e., digital signatures, encryption) of
e-mail messages has a complex history.  There are several different
ways that various parts of an e-mail message can be protected (or
not), and those mechanisms can be combined in a huge number of ways.&lt;/p&gt;
&lt;p&gt;In contrast to the technical complexity, users of e-mail tend to
expect a fairly straightforward experience.  They also have little to
no expectation of explicit cryptographic protections for their
messages, whether for authenticity, for confidentiality, or for
integrity.&lt;/p&gt;
&lt;p&gt;If we want to change this -- if we want users to be able to rely on
cryptographic protections for some e-mail messages in their existing
e-mail accounts -- we need to be able to explain those protections
without getting in the user's way.&lt;/p&gt;
&lt;h2 id="why-expose-cryptographic-protections-to-the-user-at-all"&gt;Why expose cryptographic protections to the user at all?&lt;/h2&gt;
&lt;p&gt;For a new messaging service, the service itself can simply enumerate
the set of properties that all messages exchanged through the service
must have, design the system to bundle those properties with message
deliverability, and then users don't need to see any of the details
for any given message.  The presence of the message in that messaging
service is enough to communicate its security properties to the extent
that the users care about those properties.&lt;/p&gt;
&lt;p&gt;However, e-mail is a widely deployed, heterogenous, legacy system, and
even the most sophisticated users will always interact with some
messages that lack cryptographic protections.&lt;/p&gt;
&lt;p&gt;So if we think those protections are meaningful, and we want users to
be able to respond to a protected message at all differently from how
they respond to an unprotected message (or if they want to know
whether the message they're sending will be protected, so they can
decide how much to reveal in it), we're faced with the challenge of
explaining those protections to users at some level.&lt;/p&gt;
&lt;h2 id="simplicity"&gt;Simplicity&lt;/h2&gt;
&lt;p&gt;The best level to display cryptographic protects for a typical e-mail
user is on a per-message basis.&lt;/p&gt;
&lt;p&gt;Wider than per-message (e.g., describing protections on a
per-correspondent or a per-thread basis) is likely to stumble on mixed
statuses, particularly when other users switch e-mail clients that
don't provide the same cryptographic protections, or when people are
added to or removed from a thread.&lt;/p&gt;
&lt;p&gt;Narrower than per-message (e.g., describing protections on a
per-MIME-part basis, or even within a MIME part) is too confusing:
most users do not understand the structure of an e-mail message at a
technical level, and are unlikely to be able to (or want to) spend any
time learning about it.  And a message with some cryptographic
protection and other tamperable user-facing parts is a tempting vector
for attack.&lt;/p&gt;
&lt;p&gt;So at most, an e-mail should have one cryptographic state that covers
the entire message.&lt;/p&gt;
&lt;p&gt;At most, the user probably wants to know:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Is the content of this message known only to me and the sender (and
   the other people in Cc)?  (Confidentiality)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Did this message come from the person I think it came from, as they
   wrote it? (Integrity and Authenticity)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Any more detail than this is potentially confusing or distracting.&lt;/p&gt;
&lt;h2 id="combinations"&gt;Combinations&lt;/h2&gt;
&lt;p&gt;Is it possible to combine the two aspects described above into
something even simpler?  That would be nice, because it would allow us
to categorize a message as either "protected" or "not protected".  But
there are four possible combinations:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;unsigned cleartext messages: these are clearly "not protected"&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;signed encrypted messages: these are clearly "protected" (though
   see further sections below for more troubling caveats)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;signed cleartext messages: these are useful in cases where
   confidentiality is irrelevant -- posts to a publicly-archived
   mailing list, for example, or announcement e-mails about a new
   version of some piece of software.  It's hard to see how we can get
   away with ignoring this category.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;unsigned encrypted messages: There are people who send encrypted
   messages who don't want to sign those messages, for a number of
   reasons (e.g., concern over the reuse/misuse of their signing key,
   and wanting to be able to send anonymous messages).  Whether you
   think those reasons are valid or not, some signed messages cannot
   be validated.  For example:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the signature was made improperly,&lt;/li&gt;
&lt;li&gt;the signature was made with an unknown key,&lt;/li&gt;
&lt;li&gt;the signature was made using an algorithm the message recipient doesn't know how to interpret&lt;/li&gt;
&lt;li&gt;the signature was made with a key that the recipient believes is broken/bad&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We have to handle receipt of signed+encrypted messages with any of
these signature failures, so we should probably deal with unsigned
encrypted messages in the same way.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;My conclusion is that we need to be able to represent these states
separately to the user (or at least to the MUA, so it can plan
sensible actions), even though i would prefer a simpler
representation.&lt;/p&gt;
&lt;p&gt;Note that some other message encryption schemes (such as those based
on shared symmetric keying material, where message signatures are not
used for authenticity) may not actually need these distinctions, and
can therefore get away with the simpler "protected/not protected"
message state.  I am unaware of any such scheme being used for e-mail
today.&lt;/p&gt;
&lt;h2 id="partial-protections"&gt;Partial protections&lt;/h2&gt;
&lt;p&gt;Sadly, the current encrypted e-mail mechanisms are likely to make even
these proposed two indicators blurry if we try to represent them in
detail.  To avoid adding to user confusion, we need to draw some
bright lines.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;For integrity and authenticity, either the entire message is signed
   and integrity-checked, or it isn't.  We must not report messages as
   being signed when only a part of the message is signed, or when the
   signature comes from someone not in the From: field.  We should
   probably also not present "broken signature" status any differently
   that we present unsigned mail.  See &lt;a href="https://admin.hostpoint.ch/pipermail/enigmail-users_enigmail.net/2017-November/004683.html"&gt;discussion on the enigmail
   mailing
   list&lt;/a&gt;
   about some of these tradeoffs.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;For confidentiality, the user likely cares that the entire message
   was confidential.  But there are some circumstances (e.g., when
   replying to an e-mail, and deciding whether to encrypt or not) when
   they likely care if &lt;em&gt;any part&lt;/em&gt; of the message was confidential
   (e.g. if an encrypted part is placed next to a cleartext part).&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It's interesting (and frustrating!) to note that these are scoped
slightly differently -- that we might care about partial
confidentiality but not about partial integrity and authenticity.&lt;/p&gt;
&lt;p&gt;Note that while we might care about partial confidentiality, actually
representing &lt;em&gt;which parts&lt;/em&gt; of a message were confidential represents a
signficant UI challenge in most MUAs.&lt;/p&gt;
&lt;p&gt;To the extent that a MUA decides it wants to display details of a
partially-protected message, i recommend that MUA strip/remove &lt;em&gt;all&lt;/em&gt;
non-protected parts of the message, and just show the user the
(remaining) protected parts.  In the event that a message has partial
protections like this, the MUA may need to offer the user a choice of
seeing the entire partially-protected message, or the stripped down
message that has complete protections.&lt;/p&gt;
&lt;p&gt;To the extent that we expect to see partially-protected messages in
the real world, further UI/UX exploration would be welcome.  It would
be great to imagine a world where those messages simply don't exist
though :)&lt;/p&gt;
&lt;h1 id="cryptographic-mechanism"&gt;Cryptographic Mechanism&lt;/h1&gt;
&lt;p&gt;There are three major categories of cryptographic protection for
e-mail in use today: Inline PGP, PGP/MIME, and S/MIME.&lt;/p&gt;
&lt;h2 id="inline-pgp"&gt;Inline PGP&lt;/h2&gt;
&lt;p&gt;I've argued elsewhere (and it remains true) that &lt;a href="https://debian-administration.org/users/dkg/weblog/108"&gt;Inline PGP
signatures are
terrible&lt;/a&gt;.
Inline PGP encryption is also terrible, but in different ways:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;it doesn't protect the structure of the message (e.g., the number
   and size of attachments is visible)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;it has no way of protecting confidential message headers (see the
   Protected Headers section below)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;it is very difficult to safely represent to the user what has been
   encrypted and what has not, particularly if the message body
   extends beyond the encrypted block.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;No MUA should ever emit messages using inline PGP, either for
signatures or for encryption.  And no MUA should ever display an
inline-PGP-signed block as though it was signed.  Don't even bother to
validate such a signature.&lt;/p&gt;
&lt;p&gt;However, some e-mails will arrive using inline PGP encryption, and
responsible MUAs probably need to figure out what to show to the user
in that case, because the user wants to know what's there. :/&lt;/p&gt;
&lt;h2 id="pgpmime-and-smime"&gt;PGP/MIME and S/MIME&lt;/h2&gt;
&lt;p&gt;PGP/MIME and S/MIME are roughly equivalent to one another, with the
largest difference being their certificate format.  PGP/MIME messages
are signed/encrypted with certificates that follow the OpenPGP
specification, while S/MIME messages rely on certificates that follow
the X.509 specification.&lt;/p&gt;
&lt;p&gt;The cryptographic protections of both PGP/MIME and S/MIME work at the
MIME layer, providing particular forms of cryptographic protection
around a subtree of other MIME parts.&lt;/p&gt;
&lt;p&gt;Both standards have very similar existing flaws that must be remedied
or worked around in order to have sensible user experience for
encrypted mail.&lt;/p&gt;
&lt;p&gt;This document has no preference of one message format over the other,
but acknowledges that it's likely that both will continue to exist for
quite some time.  To the extent possible, a sensible MUA that wants to
provide the largest coverage will be able to support both message
formats and both certificate formats, hopefully with the same fixes to
the underlying problems.&lt;/p&gt;
&lt;h2 id="cryptographic-envelope"&gt;Cryptographic Envelope&lt;/h2&gt;
&lt;p&gt;Given that the plausible standards (PGP/MIME and S/MIME) both work at
the MIME layer, it's worth thinking about the MIME structure of a
cryptographically-protected e-mail messages.  I introduce here two
terms related to an e-mail message: the "Cryptographic Envelope" and
the "Cryptographic Payload".&lt;/p&gt;
&lt;p&gt;Consider the MIME structure of a simple cleartext PGP/MIME signed
message:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;└┬╴&lt;/span&gt;&lt;span class="n"&gt;multipart&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;signed&lt;/span&gt;
&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="err"&gt;├─╴&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;plain&lt;/span&gt;
&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="err"&gt;└─╴&lt;/span&gt;&lt;span class="n"&gt;application&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pgp&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;signature&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Consider also the simplest PGP/MIME encrypted message:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;└┬╴&lt;/span&gt;&lt;span class="n"&gt;multipart&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;encrypted&lt;/span&gt;
&lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="err"&gt;├─╴&lt;/span&gt;&lt;span class="n"&gt;application&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pgp&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;encrypted&lt;/span&gt;
&lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="err"&gt;└─╴&lt;/span&gt;&lt;span class="n"&gt;application&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;octet&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;stream&lt;/span&gt;
&lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="n"&gt;D&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="err"&gt;╤&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;decryption&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="n"&gt;E&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="err"&gt;└─╴&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;plain&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Or, an S/MIME encrypted message:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mf"&gt;2&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;└─╴&lt;/span&gt;&lt;span class="n"&gt;application&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pkcs7&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;mime&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;smime&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;enveloped&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="kd"&gt;data&lt;/span&gt;
&lt;span class="mf"&gt;2&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="err"&gt;╤&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;decryption&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;span class="mf"&gt;2&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="err"&gt;└─╴&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;plain&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Note that the PGP/MIME decryption step (denoted "1D" above) may also
include a cryptographic signature that can be verified, as a part of
that decryption.  This is not the case with S/MIME, where the signing
layer is always separated from the encryption layer.&lt;/p&gt;
&lt;p&gt;Also note that any of these layers of protection may be nested, like
so:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mf"&gt;3&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;└┬╴&lt;/span&gt;&lt;span class="n"&gt;multipart&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;encrypted&lt;/span&gt;
&lt;span class="mf"&gt;3&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="err"&gt;├─╴&lt;/span&gt;&lt;span class="n"&gt;application&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pgp&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;encrypted&lt;/span&gt;
&lt;span class="mf"&gt;3&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="err"&gt;└─╴&lt;/span&gt;&lt;span class="n"&gt;application&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;octet&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;stream&lt;/span&gt;
&lt;span class="mf"&gt;3&lt;/span&gt;&lt;span class="n"&gt;D&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="err"&gt;╤&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;decryption&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;span class="mf"&gt;3&lt;/span&gt;&lt;span class="n"&gt;E&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="err"&gt;└┬╴&lt;/span&gt;&lt;span class="n"&gt;multipart&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;signed&lt;/span&gt;
&lt;span class="mf"&gt;3&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="err"&gt;├─╴&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;plain&lt;/span&gt;
&lt;span class="mf"&gt;3&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="err"&gt;└─╴&lt;/span&gt;&lt;span class="n"&gt;application&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pgp&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;signature&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;For an e-mail message that has some set of these layers, we define the
"Cryptographic Envelope" as the layers of cryptographic protection
that start at the root of the message and extend until the first
non-cryptographic MIME part is encountered.&lt;/p&gt;
&lt;h2 id="cryptographic-payload"&gt;Cryptographic Payload&lt;/h2&gt;
&lt;p&gt;We can call the first non-cryptographic MIME part we encounter (via
depth-first search) the "Cryptographic Payload".  In the examples
above, the Cryptographic Payload parts are labeled 0B, 1E, 2C, and 3F.
Note that the Cryptographic Payload itself could be a multipart MIME
object, like 4E below:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mf"&gt;4&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;└┬╴&lt;/span&gt;&lt;span class="n"&gt;multipart&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;encrypted&lt;/span&gt;
&lt;span class="mf"&gt;4&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="err"&gt;├─╴&lt;/span&gt;&lt;span class="n"&gt;application&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pgp&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;encrypted&lt;/span&gt;
&lt;span class="mf"&gt;4&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="err"&gt;└─╴&lt;/span&gt;&lt;span class="n"&gt;application&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;octet&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;stream&lt;/span&gt;
&lt;span class="mf"&gt;4&lt;/span&gt;&lt;span class="n"&gt;D&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="err"&gt;╤&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;decryption&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;span class="mf"&gt;4&lt;/span&gt;&lt;span class="n"&gt;E&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="err"&gt;└┬╴&lt;/span&gt;&lt;span class="n"&gt;multipart&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;alternative&lt;/span&gt;
&lt;span class="mf"&gt;4&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="err"&gt;├─╴&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;plain&lt;/span&gt;
&lt;span class="mf"&gt;4&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="err"&gt;└─╴&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;In this case, the full subtree rooted at 4E is the "Cryptographic
Payload".&lt;/p&gt;
&lt;p&gt;The cryptographic properties of the message should be derived from the
layers in the Cryptographic Envelope, and nothing else, in particular:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the cryptographic signature associated with the message, and&lt;/li&gt;
&lt;li&gt;whether the message is "fully" encrypted or not.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Note that if some subpart of the message is protected, but the
cryptographic protections don't start at the root of the MIME
structure, there is &lt;em&gt;no&lt;/em&gt; message-wide cryptographic envelope, and
therefore there either is no Cryptographic Payload, or (equivalently)
the whole message (5A here) is the Cryptographic Payload, but with a
null Cryptographic Envelope:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mf"&gt;5&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;└┬╴&lt;/span&gt;&lt;span class="n"&gt;multipart&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;mixed&lt;/span&gt;
&lt;span class="mf"&gt;5&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="err"&gt;├┬╴&lt;/span&gt;&lt;span class="n"&gt;multipart&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;signed&lt;/span&gt;
&lt;span class="mf"&gt;5&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="err"&gt;│├─╴&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;plain&lt;/span&gt;
&lt;span class="mf"&gt;5&lt;/span&gt;&lt;span class="n"&gt;D&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="err"&gt;│└─╴&lt;/span&gt;&lt;span class="n"&gt;application&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pgp&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;signature&lt;/span&gt;
&lt;span class="mf"&gt;5&lt;/span&gt;&lt;span class="n"&gt;E&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="err"&gt;└─╴&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;plain&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Note also that if there are any nested encrypted parts, they do not
count toward the Cryptographic Envelope, but may mean that the message
is "partially encrypted", albeit with a null Cryptographic Envelope:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mf"&gt;6&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;└┬╴&lt;/span&gt;&lt;span class="n"&gt;multipart&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;mixed&lt;/span&gt;
&lt;span class="mf"&gt;6&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="err"&gt;├┬╴&lt;/span&gt;&lt;span class="n"&gt;multipart&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;encrypted&lt;/span&gt;
&lt;span class="mf"&gt;6&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="err"&gt;│├─╴&lt;/span&gt;&lt;span class="n"&gt;application&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pgp&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;encrypted&lt;/span&gt;
&lt;span class="mf"&gt;6&lt;/span&gt;&lt;span class="n"&gt;D&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="err"&gt;│└─╴&lt;/span&gt;&lt;span class="n"&gt;application&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;octet&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;stream&lt;/span&gt;
&lt;span class="mf"&gt;6&lt;/span&gt;&lt;span class="n"&gt;E&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="err"&gt;│&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="err"&gt;╤&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;decryption&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;span class="mf"&gt;6&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="err"&gt;│&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="err"&gt;└─╴&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;plain&lt;/span&gt;
&lt;span class="mf"&gt;6&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="err"&gt;└─╴&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;plain&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id="layering-within-the-envelope"&gt;Layering within the Envelope&lt;/h2&gt;
&lt;p&gt;The order and number of the layers in the Cryptographic Envelope might
make a difference in how the message's cryptographic properties should
be considered.&lt;/p&gt;
&lt;h3 id="signedencrypted-vs-encryptedsigned"&gt;signed+encrypted vs encrypted+signed&lt;/h3&gt;
&lt;p&gt;One difference is whether the signature is made over the encrypted
data, or whether the encryption is done over the signature.
Encryption around a signature means that the signature was hidden from
an adversary.  And a signature around the encryption indicates that
sender may not know the actual contents of what was signed.&lt;/p&gt;
&lt;p&gt;The common expectation is that the signature will be inside the
encryption.  This means that the signer likely had access to the
cleartext, and it is likely that the existence of the signature is
hidden from an adversary, both of which are sensible properties to
want.&lt;/p&gt;
&lt;h3 id="multiple-layers-of-signatures-or-encryption"&gt;Multiple layers of signatures or encryption&lt;/h3&gt;
&lt;p&gt;Some specifications define
&lt;a href="https://tools.ietf.org/html/rfc2634#section-1.1"&gt;triple-layering&lt;/a&gt;:
signatures around encryption around signatures.  It's not clear that
this is in wide use, or how any particular MUA should present such a
message to the user.&lt;/p&gt;
&lt;p&gt;In the event that there are multiple layers of protection of a given
kind in the Cryptographic Envelope, the message should be marked based
on the properties of the inner-most layer of encryption, and the
inner-most layer of signing.  The main reason for this is simplicity
-- it is unclear how to indicate arbitrary (and
potentially-interleaved) layers of signatures and encryption.&lt;/p&gt;
&lt;p&gt;(FIXME: what should be done if the inner-most layer of signing can't
be validated for some reason, but one of the outer layers of signing
&lt;em&gt;does&lt;/em&gt; validate?  ugh MIME is too complex…)&lt;/p&gt;
&lt;h2 id="signed-messages-should-indicate-the-intended-recipient"&gt;Signed messages should indicate the intended recipient&lt;/h2&gt;
&lt;p&gt;Ideally, all signed messages would indicate their intended recipient
as a way of defending against some forms of replay attack.  For
example, Alice signs a signed message to Bob that says "please perform
task X"; Bob reformats and forwards the message to Charlie as though
it was directly from Alice.  Charlie might now believes that Alice is
asking him to do task X, instead of Bob.&lt;/p&gt;
&lt;p&gt;Of course, this concern also includes encrypted messages that are also
signed.  However, there is no clear standard for how to include this
information in either an encrypted message or a signed message.&lt;/p&gt;
&lt;p&gt;An e-mail specific mechanism is to ensure that the To: and Cc: headers
are signed appropriately (see the "Protected Headers") below.&lt;/p&gt;
&lt;p&gt;See also Vincent Breitmoser's &lt;a href="https://mailarchive.ietf.org/arch/msg/openpgp/urog4K_2FG6_mcvoqQmjO6pZvKY"&gt;proposal of Intended Recipient
Fingerprint&lt;/a&gt;
for OpenPGP as a possible OpenPGP-specific implementation.&lt;/p&gt;
&lt;p&gt;However: what should the MUA do if a message is encrypted but no
intended recipients are listed?  Or what if a signature clearly
indicates the intended recipients, but does not include the current
reader?  Should the MUA render the message differently somehow?&lt;/p&gt;
&lt;h2 id="protected-headers"&gt;Protected Headers&lt;/h2&gt;
&lt;p&gt;Sadly, e-mail cryptographic protections have traditionally only
covered the body of the e-mail, and not the headers.  Most users do
not (and should not have to) understand the difference.  There are two
not-quite-standards for protecting the headers:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://tools.ietf.org/html/draft-melnikov-smime-header-signing"&gt;message
   wrapping&lt;/a&gt;,
   which puts an entire e-mail message (&lt;code&gt;message/rfc822&lt;/code&gt; MIME part)
   "inside" the cryptographic protections.  This is also discussed in
   &lt;a href="https://tools.ietf.org/html/rfc5751#section-3.1"&gt;RFC 5751 §3.1&lt;/a&gt;.
   I don't know of any MUAs that implement this.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://github.com/autocrypt/memoryhole"&gt;memory hole&lt;/a&gt;, which puts
   headers on the top-level MIME part directly.  This is implemented
   in Enigmail and K-9 mail.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;These two different mechanisms are roughly equivalent, with slight
differences in how they behave for clients who can handle
cryptographic mail but have not implemented them.  If a MUA is capable
of interpreting one form successfully, it probably is also capable of
interpreting the other.&lt;/p&gt;
&lt;p&gt;Note that in particular, the cryptographic headers for a given message
ought to be derived directly from the headers present (in one of the
above two ways) in the root element of the Cryptographic Payload MIME
subtree itself.  If headers are stored anywhere else (e.g. in one of
the leaf nodes of a complex Payload), they should not propagate to the
outside of the message.&lt;/p&gt;
&lt;p&gt;If the headers the user sees are not protected, that lack of
protection may need to be clearly explained and visible to the user.
This is unfortunate because it is potentially extremely complex for
the UI.&lt;/p&gt;
&lt;p&gt;The types of cryptographic protections can differ per header.  For
example, it's relatively straightforward to pack all of the headers
inside the Cryptographic Payload.  For a signed message, this would
mean that all headers are signed.  This is the recommended approach
when generating an encrypted message.  In this case, the "outside"
headers simply match the protected headers.  And in the case that the
outsider headers differ, they can simply be replaced with their
protected versions when displayed to the user.  This defeats the
replay attack described above.&lt;/p&gt;
&lt;p&gt;But for an encrypted message, some of those protected headers will be
stripped from the outside of the message, and others will be placed in
the outer header in cleartext for the sake of deliverability.  In
particular, From: and To: and Date: are placed in the clear on the
outside of the message.&lt;/p&gt;
&lt;p&gt;So, consider a MUA that receives an encrypted, signed message, with
all headers present in the Cryptographic Payload (so all headers are
signed), but From: and To: and Date: in the clear on the outside.
Assume that the external Subject: reads simply "Encrypted Message",
but the internal (protected) Subject: is actually "Thursday's
Meeting".&lt;/p&gt;
&lt;p&gt;When displaying this message, how should the MUA distinguish between
the Subject: and the From: and To: and Date: headers?  All headers are
signed, but only Subject: has been hidden.  Should the MUA assume that
the user understands that e-mail metadata like this leaks to the MTA?
This is unfortuately true today, but not something we want in the long
term.&lt;/p&gt;
&lt;h3 id="message-id-and-threading-headers"&gt;Message-ID and threading headers&lt;/h3&gt;
&lt;p&gt;Messages that are part of an e-mail thread should ensure that
Message-Id: and References: and In-Reply-To: are signed, because those
markers provide contextual considerations for the signed content.
(e.g., a signed message saying "I like this plan!" means something
different depending on which plan is under discussion).&lt;/p&gt;
&lt;p&gt;That said, given the state of the e-mail system, it's not clear what a
MUA should do if it receives a cryptographically-signed e-mail message
where these threading headers are &lt;em&gt;not&lt;/em&gt; signed.  That is the default
today, and we do not want to incur warning fatigue for the user.
Furthermore, unlike Date: and Subject: and From: and To: and Cc:, the
threading headers are not usually shown directly to the user, but
instead affect the location and display of messages.&lt;/p&gt;
&lt;p&gt;Perhaps there is room here for some indicator at the thread level,
that all messages in a given thread are contextually well-bound?  Ugh,
more UI complexity.&lt;/p&gt;
&lt;h3 id="protecting-headers-during-e-mail-generation"&gt;Protecting Headers during e-mail generation&lt;/h3&gt;
&lt;p&gt;When generating a cryptographically-protected e-mail (either signed or
encrypted or both), the sending MUA should copy all of the headers it
knows about into the Cryptographic Payload using one of the two
techniques referenced above.  For signed-only messages, that is all
that needs doing.&lt;/p&gt;
&lt;p&gt;The challenging question is for encrypted messages: what headers on
the outside of the message (outside the Cryptographic Envelope) can be
to be stripped (removed completely) or stubbed (replaced with a
generic or randomized value)?&lt;/p&gt;
&lt;p&gt;Subject: should obviously be stubbed -- for most users, the subject is
directly associated with the body of the message (it is not thought of
as metadata), and the Subject is not needed for deliverability.  Since
some MTAs might treat a message without a Subject: poorly, and
arbitrary Subject lines are a nuisance, it is recommended to use the
exact string below for all external Subjects:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Subject&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Encrypted&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Message&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;However, stripping or stubbing other headers is more complex.&lt;/p&gt;
&lt;p&gt;The date header can likely be stripped from the outside of an
encrypted message, or can have it its temporal resolution made much
more coarse.  However, this doesn't protect much information from the
MTAs that touch the message, since they are likely to see the message
when it is in transit.  It may protect the message from some metadata
analysis as it sits on disk, though.&lt;/p&gt;
&lt;p&gt;The To: and Cc: headers could be stripped entirely in some cases,
though that may make the e-mail more prone to being flagged as spam.
However, some e-mail messages sent to Bcc groups are still
deliverable, with a header of&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;To&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;undisclosed&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;recipients&lt;/span&gt;&lt;span class="o"&gt;:;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Note that the Cryptographic Envelope itself may leak metadata about
the recipient (or recipients), so stripping this information from the
external header may not be useful unless the Cryptographic Envelope is
also stripped of metadata appropriately.&lt;/p&gt;
&lt;p&gt;The From: header could also be stripped or stubbed.  It's not clear
whether such a message would be deliverable, particularly given DKIM
and DMARC rules for incoming domains.  Note that the MTA will still
see the SMTP MAIL FROM: verb before the message body is sent, and will
use the address there to route bounces or DSNs.  However, once the
message is delivered, a stripped From: header is an improvement in the
metadata available on-disk.  Perhaps this is something that a
friendly/cooperative MTA could do for the user?&lt;/p&gt;
&lt;p&gt;Even worse is the Message-Id: header and the associated In-Reply-To:
and References: headers.  Some MUAs (like
&lt;a href="https://notmuchmail.org"&gt;notmuch&lt;/a&gt;) rely heavily on the Message-Id:.
A message with a stubbed-out Message-Id would effectively change its
Message-Id: when it is decrypted.  This may not be a straightforward
or safe process for MUAs that are Message-ID-centric.  That said, a
randomized external Message-ID: header could help to avoid leaking the
fact that the same message was sent to multiple people, so long as the
message encryption to each person was also made distinct.&lt;/p&gt;
&lt;p&gt;Stripped In-Reply-To: and References: headers are also a clear
metadata win -- the MTA can no longer tell which messages are
associated with each other.  However, this means that an incoming
message cannot be associated with a relevant thread without decrypting
it, something that some MUAs may not be in a position to do.&lt;/p&gt;
&lt;p&gt;Recommendation for encrypted message generation in 2018: copy all
headers during message generation; stub out only the Subject for now.&lt;/p&gt;
&lt;p&gt;Bold MUAs may choose to experiment with stripping or stubbing other
fields beyond Subject:, possibly in response to some sort of signal
from the recipient that they believe that stripping or stubbing some
headers is acceptable.  Where should such a signal live?  Perhaps a
notation in the recipient's certificate would be useful.&lt;/p&gt;
&lt;h1 id="key-management"&gt;Key management&lt;/h1&gt;
&lt;p&gt;Key management bedevils every cryptographic scheme, e-mail or
otherwise.  The simplest solution for users is to automate key
management as much as possible, making reasonable decisions for them.
The &lt;a href="https://autocrypt.org/"&gt;Autocrypt project&lt;/a&gt; outlines a sensible
approach here, so i'll leave most of this section short and hope that
it's covered by Autocrypt.  While fully-automated key management is
likely to be susceptible either to MITM attacks or trusted third
parties (depending on the design), as a community we need to
experiment with ways to provide straightforward (possibly gamified?)
user experience that enables and encourages people to do key
verification in a fun and simple way.  This should probably be done
without ever mentioning the word "key", if possible.  Serious UI/UX
work is needed.  I'm hoping future versions of Autocrypt will cover
that territory.&lt;/p&gt;
&lt;p&gt;But however key management is done, the result for the e-mail user
experience is that that the MUA will have some sense of the "validity"
of a key being used for any particular correspondent.  If it is
expressed at all, it should be done as simply as possible by default.
In particular, MUAs should avoid confusing the user with distinct
(nearly orthogonal) notions of "trust" and "validity" while reading
messages, and should not necessarily associate the validity of a
correspondent's key with the validity of a message cryptographically
associated with that correspondent's key.  Identity not the same thing
as message integrity, and trustworthiness is not the same thing as
identity either.&lt;/p&gt;
&lt;h2 id="key-changes-over-time"&gt;Key changes over time&lt;/h2&gt;
&lt;p&gt;Key management is hard enough in the moment.  With a store-and-forward
system like e-mail, evaluating the validity of a signed message a year
after it was received is tough.  Your concept of the correspondent's
correct key may have changed, for example.  I think our understanding
of what to do in this context is not currently clear.&lt;/p&gt;</content><category term="misc"/><category term="e-mail"/><category term="crypto"/></entry><entry><title>Changes for GnuPG in Debian</title><link href="https://dkg.fifthhorseman.net/blog/changes-for-gnupg-in-debian.html" rel="alternate"/><published>2016-08-03T21:55:00-04:00</published><updated>2016-08-03T21:55:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2016-08-03:/blog/changes-for-gnupg-in-debian.html</id><summary type="html">&lt;p&gt;The &lt;a href="https://www.gnupg.org/"&gt;GNU Privacy Guard (GnuPG)&lt;/a&gt; upstream team
maintains three branches of development: 1.4 ("classic"), 2.0
("stable"), and 2.1 ("modern").&lt;/p&gt;
&lt;p&gt;They differ in various ways: software architecture, supported
algorithms, network transport mechanisms, protocol versions, development
activity, co-installability, etc.&lt;/p&gt;
&lt;p&gt;Debian currently ships two versions of GnuPG in every maintained …&lt;/p&gt;</summary><content type="html">&lt;p&gt;The &lt;a href="https://www.gnupg.org/"&gt;GNU Privacy Guard (GnuPG)&lt;/a&gt; upstream team
maintains three branches of development: 1.4 ("classic"), 2.0
("stable"), and 2.1 ("modern").&lt;/p&gt;
&lt;p&gt;They differ in various ways: software architecture, supported
algorithms, network transport mechanisms, protocol versions, development
activity, co-installability, etc.&lt;/p&gt;
&lt;p&gt;Debian currently ships two versions of GnuPG in every maintained suite
-- in particular, &lt;code&gt;/usr/bin/gpg&lt;/code&gt; has historically always been provided
by the "classic" branch.&lt;/p&gt;
&lt;p&gt;That's going to change!&lt;/p&gt;
&lt;p&gt;Debian unstable will soon be moving to the "modern" branch for providing
&lt;code&gt;/usr/bin/gpg&lt;/code&gt;. This will give several advantages for Debian and its
users in the future, but it will require a transition. Hopefully we can
make it a smooth one.&lt;/p&gt;
&lt;h2 id="what-are-the-benefits"&gt;What are the benefits?&lt;/h2&gt;
&lt;p&gt;Compared to "classic", The "modern" branch has:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;updated crypto (including elliptic curves)&lt;/li&gt;
&lt;li&gt;componentized architecture (e.g. libraries, some daemonized
    processes)&lt;/li&gt;
&lt;li&gt;improved key storage&lt;/li&gt;
&lt;li&gt;better network access (including talking to keyservers over
    &lt;a href="https://www.torproject.org"&gt;tor&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;stronger defaults&lt;/li&gt;
&lt;li&gt;more active upstream development&lt;/li&gt;
&lt;li&gt;safer info representation (e.g. no more key IDs, fingerprints easier
    to copy-and-paste)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If you want to try this out, the changes are already made in
experimental. Please experiment!&lt;/p&gt;
&lt;h2 id="what-does-this-mean-for-end-users"&gt;What does this mean for end users?&lt;/h2&gt;
&lt;p&gt;If you're an end user and you don't use GnuPG directly, you shouldn't
notice much of a change once the packages start to move through the rest
of the archive.&lt;/p&gt;
&lt;p&gt;Even if you do use GnuPG regularly, you shouldn't notice too much of a
difference. One of the main differences is that all access to your
secret key will be handled through gpg-agent, which should be
automatically launched as needed. This means that operations like
signing and decryption will cause gpg-agent to prompt the the user to
unlock any locked keys directly, rather than gpg itself prompting the
user.&lt;/p&gt;
&lt;p&gt;If you have an existing keyring, you may also notice a difference based
on a change of how your public keys are managed, though again this
transition should ideally be smooth enough that you won't notice unless
you care to investigate more deeply.&lt;/p&gt;
&lt;p&gt;If you use GnuPG regularly, you might want to read the NEWS file that
ships with GnuPG and related packages for updates that should help you
through the transition.&lt;/p&gt;
&lt;p&gt;If you use GnuPG in a language other than English, please install the
&lt;code&gt;gnupg-l10n&lt;/code&gt; package, which contains the localization/translation files.
For versions where those files are split out of the main package,
&lt;code&gt;gnupg&lt;/code&gt; explicitly &lt;code&gt;Recommends: gnupg-l10n&lt;/code&gt; already, so it should be
brought in for new installations by default.&lt;/p&gt;
&lt;p&gt;If you have an archive of old data that depends on known-broken
algorithms, PGP3 keys, or other deprecated material, you'll need to have
"classic" GnuPG around to access it. That will be provided in the
&lt;code&gt;gnupg1&lt;/code&gt; package&lt;/p&gt;
&lt;h2 id="what-does-this-mean-for-package-maintainers"&gt;What does this mean for package maintainers?&lt;/h2&gt;
&lt;p&gt;If you maintain a package that depends on &lt;code&gt;gnupg&lt;/code&gt;: be aware that the
&lt;code&gt;gnupg&lt;/code&gt; package in debian is going through this transition.&lt;/p&gt;
&lt;p&gt;A few general thoughts:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;
    If your package &lt;code&gt;Depends: gnupg&lt;/code&gt; for signature verification only,
    you might prefer to have it &lt;code&gt;Depends: gpgv&lt;/code&gt; instead. &lt;code&gt;gpgv&lt;/code&gt; is a
    much simpler tool that the full-blown GnuPG suite, and should be
    easier to manage. I'm happy to help with such a transition (we've
    made it recently with &lt;code&gt;apt&lt;/code&gt; already)&lt;/li&gt;
&lt;li&gt;&lt;p&gt;
    If your package &lt;code&gt;Depends: gnupg&lt;/code&gt; and expects &lt;code&gt;~/.gnupg/&lt;/code&gt; to be laid
    out in a certain way, that's almost certainly going to break at some
    point. &lt;code&gt;~/.gnupg/&lt;/code&gt; is GnuPG's internal storage, and it's not
    recommended to rely on any specific data structures there, as they
    may change. &lt;code&gt;gpg&lt;/code&gt; offers commands like &lt;code&gt;--export&lt;/code&gt;, &lt;code&gt;--import&lt;/code&gt;, and
    &lt;code&gt;--delete&lt;/code&gt; for manipulating its persistent storage. please use them
    instead!&lt;/li&gt;
&lt;li&gt;&lt;p&gt;
    If your package depends on parsing or displaying &lt;code&gt;gpg&lt;/code&gt;'s output for
    the user, please make sure you use its special machine-readable form
    (&lt;code&gt;--with-colons&lt;/code&gt;). Parsing the human-readable text is not advised
    and may change from version to version.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If you maintain a package that depends on &lt;code&gt;gnupg2&lt;/code&gt; and tries to use
&lt;code&gt;gpg2&lt;/code&gt; instead of &lt;code&gt;gpg&lt;/code&gt;, that should stay ok. However, at some point
it'd be nice to get rid of &lt;code&gt;/usr/bin/gpg2&lt;/code&gt; and just have one expected
binary (&lt;code&gt;gpg&lt;/code&gt;). So you can help with that:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;
    Look for places where your package expects &lt;code&gt;gpg2&lt;/code&gt; and make it try
    &lt;code&gt;gpg&lt;/code&gt; instead. If you can make your code fall back cleanly&lt;/li&gt;
&lt;li&gt;&lt;p&gt;
    Change your dependencies to indicate &lt;code&gt;gnupg (&amp;gt;= 2)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;
    Patch &lt;code&gt;lintian&lt;/code&gt; to encourage other people to make this switch ;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="what-specifically-needs-to-happen"&gt;What specifically needs to happen?&lt;/h2&gt;
&lt;p&gt;The last major step for this transition was renaming the source package
for "classic" GnuPG to be &lt;code&gt;gnupg1&lt;/code&gt;. This transition is currently in the
ftp-master's NEW queue. Once it makes it through that queue, and both
&lt;code&gt;gnupg1&lt;/code&gt; and &lt;code&gt;gnupg2&lt;/code&gt; have been in experimental for a few days without
reports of dangerous breakage, we'll upload both &lt;code&gt;gnupg1&lt;/code&gt; and &lt;code&gt;gnupg2&lt;/code&gt;
to unstable.&lt;/p&gt;
&lt;p&gt;We'll also need to do some triage on the BTS, reassigning some reports
which are really only relevant for the "classic" branch.&lt;/p&gt;
&lt;p&gt;Please report bugs via the BTS as usual! You're also welcome to ask
questions and make suggestions on #debian-gnupg on irc.oftc.net, or to
mail the Debian GnuPG packaging team at
&lt;a href="https://lists.alioth.debian.org/cgi-bin/mailman/listinfo/pkg-gnupg-maint"&gt;pkg-gnupg-maint@lists.alioth.debian.org&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Happy hacking!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/gnupg"&gt;gnupg&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Challenge: one reproducible package a week</title><link href="https://dkg.fifthhorseman.net/blog/challenge-one-reproducible-package-a-week.html" rel="alternate"/><published>2015-06-04T02:31:00-04:00</published><updated>2015-06-04T02:31:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2015-06-04:/blog/challenge-one-reproducible-package-a-week.html</id><summary type="html">&lt;p&gt;I encourage anyone interested in debian development to get involved with
&lt;a href="https://wiki.debian.org/ReproducibleBuilds"&gt;the Reproducible Builds
project&lt;/a&gt;. My own project is
to try to diagnose (and hopefully provide patches for) two
unreproducible packages a week. Maybe you can do one package a week?&lt;/p&gt;
&lt;p&gt;Reproducible Builds is another example of the kind of …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I encourage anyone interested in debian development to get involved with
&lt;a href="https://wiki.debian.org/ReproducibleBuilds"&gt;the Reproducible Builds
project&lt;/a&gt;. My own project is
to try to diagnose (and hopefully provide patches for) two
unreproducible packages a week. Maybe you can do one package a week?&lt;/p&gt;
&lt;p&gt;Reproducible Builds is another example of the kind of audacious project
that I celebrated in &lt;a href="https://www.debian-administration.org/users/dkg/weblog/114"&gt;my last blog
post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;It's a fun way to learn a little bit about different parts of the
archive, and to help on an incrementally-improving process. My workflow
below is meant to encourage folks to join in. The documentation &lt;a href="https://wiki.debian.org/ReproducibleBuilds"&gt;on the
wiki&lt;/a&gt; is certainly more
authoritative (and will be more up-to-date in the future).&lt;/p&gt;
&lt;p&gt;My usual workflow is this:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Visit &lt;a href="https://reproducible.debian.net/unstable/amd64/index_no_notes.html"&gt;the list of unreproducible packages "with no
    notes"&lt;/a&gt;
    -- these are packages that are known to not build reproducibly, but
    no one else has diagnosed.&lt;/li&gt;
&lt;li&gt;Click on a package basically at random (but if you notice one that
    you are familiar with in that list, go ahead and pick it!)&lt;/li&gt;
&lt;li&gt;That will take you to a page showing the &lt;a href="https://tracker.debian.org/pkg/debbindiff"&gt;debbindiff (difference
    between binary packages)&lt;/a&gt;
    of the two builds. Sometimes, this shows an obvious difference, like
    &lt;a href="https://reproducible.debian.net/dbd/unstable/amd64/cloc_1.60-1.debbindiff.html"&gt;the difference for cloc, which shows that the man page embeds the
    build
    time&lt;/a&gt;.&lt;ul&gt;
&lt;li&gt;If you have a guess about what's wrong, but don't feel sure, pop
    over to the &lt;code&gt;#debian-reproducible&lt;/code&gt; IRC channel on &lt;code&gt;irc.oftc.net&lt;/code&gt;
    -- usually there are friendly people there who will discuss it
    with you.&lt;/li&gt;
&lt;li&gt;If you find a debbindiff that is completely indecipherable, go
    back and pick another package&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Fetch the package source. I like to use &lt;code&gt;debcheckout&lt;/code&gt; from the
    &lt;a href="https://tracker.debian.org/pkg/devscript"&gt;devscripts&lt;/a&gt; package, so
    that i can work with the maintainer's revision control system of
    choice. With &lt;code&gt;cloc&lt;/code&gt; above, i'd do:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;debcheckout cloc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;If that failed for some reason, I would use:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;apt-get source cloc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Change into the source directory you just unpacked and use your
    preferred tools (i like good old &lt;code&gt;grep&lt;/code&gt; and &lt;code&gt;find&lt;/code&gt;) to figure out
    where the affected file is created, and how it derives its variance.
    You might want to look through &lt;a href="https://reproducible.debian.net/index_issues.html"&gt;the list of known causes of
    unreproducibility&lt;/a&gt;
    to see if there are any similar suggestions there.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;If you can fix the variance, make a patch!&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;File a bug report with your diagnosis (and with your patch if you
    have one). I write my bug reports as a simple e-mail, with the
    subject line describing what i found, and with a header referring it
    to the r-b project, like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Source&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;packagenameVersion&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;packageversionTags&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;patchSeverity&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wishlistUser&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;reproducible&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;builds&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;lists&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;alioth&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;orgUsertags&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;closest&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;usertagX&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Debbugs&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;CC&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;reproducible&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;builds&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;lists&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;alioth&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;org&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;When choosing the “closest usertag”, i look at the &lt;a href="https://reproducible.debian.net/reproducible.html#usertagged-bugs"&gt;"Usertagged
bugs" block on the R-B continuous integration
dashboard&lt;/a&gt;
or &lt;a href="https://wiki.debian.org/ReproducibleBuilds/Contribute#How_to_report_bugs"&gt;the wiki
documentation&lt;/a&gt;
to see what makes sense.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;If you find that this is an example of one of the &lt;a href="https://reproducible.debian.net/index_issues.html"&gt;known
    issues&lt;/a&gt;, you can
    also note it in &lt;a href="https://anonscm.debian.org/cgit/reproducible/notes.git"&gt;the notes.git
    repository&lt;/a&gt;,
    or just mailing a description of what you found to &lt;a href="https://lists.alioth.debian.org/cgi-bin/mailman/listinfo/reproducible-builds"&gt;the
    reproducible-builds mailing
    list&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The information at &lt;a href="https://wiki.debian.org/ReproducibleBuilds"&gt;the R-B wiki
page&lt;/a&gt; is quite detailed if
you want more info.&lt;/p&gt;
&lt;p&gt;Finally, many many thanks to all of the people involved in the project,
and particularly to &lt;code&gt;h01ger&lt;/code&gt; and &lt;code&gt;Lunar^&lt;/code&gt;, who have both contributed a
ton of work, and have also made it easy to plug in and help as a
less-involved contributor. The nice automatically-updated statistics
provided by &lt;a href="https://reproducible.debian.net/"&gt;the team's continuous integration
work&lt;/a&gt; makes it a fun game to help out.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/challenge"&gt;challenge&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/reproducible%20builds"&gt;reproducible
builds&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Cheers to audacity!</title><link href="https://dkg.fifthhorseman.net/blog/cheers-to-audacity.html" rel="alternate"/><published>2015-05-08T18:43:00-04:00</published><updated>2015-05-08T18:43:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2015-05-08:/blog/cheers-to-audacity.html</id><summary type="html">&lt;p&gt;When &lt;a href="https://lists.debian.org/debian-devel-announce/2015/04/msg00005.html"&gt;paultag recently announced a project to try to move debian
infrastructure to
python3&lt;/a&gt;,
my first thought was how large that undertaking would likely be. It
seems like a classic engineering task, full of work and nit-picky
details to get right, useful/necessary in the long-term, painful in the
short-term …&lt;/p&gt;</summary><content type="html">&lt;p&gt;When &lt;a href="https://lists.debian.org/debian-devel-announce/2015/04/msg00005.html"&gt;paultag recently announced a project to try to move debian
infrastructure to
python3&lt;/a&gt;,
my first thought was how large that undertaking would likely be. It
seems like a classic engineering task, full of work and nit-picky
details to get right, useful/necessary in the long-term, painful in the
short-term, and if you manage to pull it off successfully, the best you
can usually hope for is that no one will notice that it was done at all.&lt;/p&gt;
&lt;p&gt;I always find that kind of task a little off-putting and difficult to
tackle, but I was happy to see someone driving the project, since it
does need to get done. Debian is potentially also in a position to help
the upstream python community, because we have a pretty good view of
what things are being used, at least within our own ecosystem.&lt;/p&gt;
&lt;p&gt;I'm happy to say that i also missed one of the other great benefits of
paultag's audacious proposal, which is how it has engaged people who
already knew about debian but who aren't yet involved. Evidence of this
engagement is already visible on &lt;a href="https://lists.alioth.debian.org/mailman/listinfo/py3porters-devel"&gt;the py3porters-devel mailing
list&lt;/a&gt;.
But if that wasn't enough, I ran into a friend recently who told me,
"Hey, I found a way to contribute to debian finally!" and pointed me to
the py3-porters project. People want to contribute to the project, and
are looking for ways in.&lt;/p&gt;
&lt;p&gt;So cheers to the people who propose audacious projects and make them
inviting to everyone, newcomers included. And cheers to the people who
step up to potentially daunting work, stake out a task, roll up their
sleeves, and pitch in. Even if the py3porters project doesn't move all
of debian's python infrastructure to pyt3 as fast as paultag wants it
to, i think it's already a win for the project as a whole. I am looking
forward to seeing what comes out of it (and it's reminding me i need to
port some of my own python work, too!)&lt;/p&gt;
&lt;p&gt;The next time you stumble over something big that needs doing in debian,
even something that might seem impossible, please make it inviting, and
dive in. The rest of the project will grow and improve from the attempt.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;:
&lt;a href="https://debian-administration.org/tag/py3-porters"&gt;py3-porters&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Preferred Packaging Practices</title><link href="https://dkg.fifthhorseman.net/blog/preferred-packaging-practices.html" rel="alternate"/><published>2015-05-01T19:41:00-04:00</published><updated>2015-05-01T19:41:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2015-05-01:/blog/preferred-packaging-practices.html</id><summary type="html">&lt;p&gt;I just took a few minutes to write up &lt;a href="https://wiki.debian.org/DanielKahnGillmor/preferred_packaging"&gt;my preferred Debian packaging
practices&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The basic gist is that i like to use &lt;code&gt;git-buildpackage&lt;/code&gt; (&lt;code&gt;gbp&lt;/code&gt;) with the
upstream source included in the repo, both as tarballs (with
&lt;code&gt;pristine-tar&lt;/code&gt; branches) and including upstream's native VCS history
(&lt;a href="http://joeyh.name/blog/entry/upstream_git_repositories/"&gt;Joey's arguments about syncing with …&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;I just took a few minutes to write up &lt;a href="https://wiki.debian.org/DanielKahnGillmor/preferred_packaging"&gt;my preferred Debian packaging
practices&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The basic gist is that i like to use &lt;code&gt;git-buildpackage&lt;/code&gt; (&lt;code&gt;gbp&lt;/code&gt;) with the
upstream source included in the repo, both as tarballs (with
&lt;code&gt;pristine-tar&lt;/code&gt; branches) and including upstream's native VCS history
(&lt;a href="http://joeyh.name/blog/entry/upstream_git_repositories/"&gt;Joey's arguments about syncing with upstream
git&lt;/a&gt; are worth
reading if you're not already convinced this is a good idea).&lt;/p&gt;
&lt;p&gt;I also started using &lt;code&gt;gbp-pq&lt;/code&gt; recently -- the &lt;code&gt;patch-queue&lt;/code&gt; feature is
really useful for at least three things:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;rebasing your &lt;code&gt;debian/patches/&lt;/code&gt; files when a new version comes out
    upstream -- you can use all your normal git rebase habits! and&lt;/li&gt;
&lt;li&gt;facilitating sending patches upstream, hopefully reducing the
    divergence, and&lt;/li&gt;
&lt;li&gt;cherry-picking new as-yet-unreleased upstream bugfix patches into a
    debian release.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;My preferred packaging practices document is a work in progress. I'd
love to improve it. If you have suggestions, please let me know.&lt;/p&gt;
&lt;p&gt;Also, if you've written up your own preferred packaging practices, send
me a link! I'm hoping to share and learn tips and tricks around this
kind of workflow &lt;a href="https://summit.debconf.org/debconf15/meeting/194/git-buildpackage-skillshare/"&gt;at debconf 15 this
year&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/git"&gt;git&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/git-buildpackage"&gt;git-buildpackage&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/packaging"&gt;packaging&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Bootable grub USB stick (EFI and BIOS for Intel)</title><link href="https://dkg.fifthhorseman.net/blog/bootable-grub-usb-stick-efi-and-bios-for-intel.html" rel="alternate"/><published>2015-03-16T23:12:00-04:00</published><updated>2015-03-16T23:12:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2015-03-16:/blog/bootable-grub-usb-stick-efi-and-bios-for-intel.html</id><summary type="html">&lt;p&gt;I'm using &lt;a href="https://www.gnu.org/software/grub/"&gt;grub&lt;/a&gt; version
2.02\~beta2-2.&lt;/p&gt;
&lt;p&gt;I want to make a USB stick that's capable of booting Intel architecture
EFI machines, both 64-bit (x86_64) and 32-bit (ia32). I'm starting from
a USB stick which is attached to a running debian system as &lt;code&gt;/dev/sdX&lt;/code&gt;.
I have nothing that i …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I'm using &lt;a href="https://www.gnu.org/software/grub/"&gt;grub&lt;/a&gt; version
2.02\~beta2-2.&lt;/p&gt;
&lt;p&gt;I want to make a USB stick that's capable of booting Intel architecture
EFI machines, both 64-bit (x86_64) and 32-bit (ia32). I'm starting from
a USB stick which is attached to a running debian system as &lt;code&gt;/dev/sdX&lt;/code&gt;.
I have nothing that i care about on that USB stick, and &lt;strong&gt;all data on it
will be destroyed by this process&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;I'm also going to try to make it bootable for traditional Intel BIOS
machines, since that seems handy.&lt;/p&gt;
&lt;p&gt;I'm documenting what I did here, in case it's useful to other people.&lt;/p&gt;
&lt;p&gt;Set up the USB stick's partition table:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;parted /dev/sdX -- mktable gpt
parted /dev/sdX -- mkpart biosgrub fat32 1MiB 4MiB
parted /dev/sdX -- mkpart efi fat32 4MiB -1
parted /dev/sdX -- set 1 bios_grub on
parted /dev/sdX -- set 2 esp on
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;After this, my 1GiB USB stick looks like:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;foo&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;parted&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sdX&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kr"&gt;print&lt;/span&gt;
&lt;span class="n"&gt;Model&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;USB&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;FLASH&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DRIVE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;scsi&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Disk&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sdX&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;1032&lt;/span&gt;&lt;span class="n"&gt;MB&lt;/span&gt;
&lt;span class="n"&gt;Sector&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;log&lt;/span&gt;&lt;span class="n"&gt;ical&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;physical&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;512&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;512&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;
&lt;span class="n"&gt;Partition&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Tab&lt;/span&gt;&lt;span class="n"&gt;le&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;gpt&lt;/span&gt;
&lt;span class="n"&gt;Disk&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Flags&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="n"&gt;Number&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;Start&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="kr"&gt;End&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="n"&gt;Size&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;File&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kr"&gt;sys&lt;/span&gt;&lt;span class="n"&gt;tem&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;Name&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="n"&gt;Flags&lt;/span&gt;
&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="mf"&gt;1049&lt;/span&gt;&lt;span class="n"&gt;kB&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;4194&lt;/span&gt;&lt;span class="n"&gt;kB&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;3146&lt;/span&gt;&lt;span class="n"&gt;kB&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;fat32&lt;/span&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;biosgrub&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;bios_grub&lt;/span&gt;
&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;2&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="mf"&gt;4194&lt;/span&gt;&lt;span class="n"&gt;kB&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;1031&lt;/span&gt;&lt;span class="n"&gt;MB&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;1027&lt;/span&gt;&lt;span class="n"&gt;MB&lt;/span&gt;&lt;span class="w"&gt;               &lt;/span&gt;&lt;span class="n"&gt;efi&lt;/span&gt;&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;boot&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;esp&lt;/span&gt;
&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;foo&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;make a filesystem and mount it temporarily at &lt;code&gt;/mnt&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;mkfs -t vfat -n GRUB /dev/sdX2
mount /dev/sdX2 /mnt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ensure we have the binaries needed, and add three grub targets for the
different platforms:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;apt install grub-efi-ia32-bin grub-efi-amd64-bin grub-pc-bin grub2-common
grub-install --removable --no-nvram --no-uefi-secure-boot \
    --efi-directory=/mnt --boot-directory=/mnt \
    --target=i386-efi
grub-install --removable --no-nvram --no-uefi-secure-boot \
    --efi-directory=/mnt --boot-directory=/mnt \
    --target=x86_64-efi
grub-install --removable --boot-directory=/mnt \
    --target=i386-pc /dev/sdX
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;At this point, you should add anything else you want to &lt;code&gt;/mnt&lt;/code&gt; here! For
example:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;a kernel and initramfs from your own computer&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.debian.org/devel/debian-installer/"&gt;debian-installer ISOs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;firmware blobs for that annoying proprietary device&lt;/li&gt;
&lt;li&gt;BIOS updates&lt;/li&gt;
&lt;li&gt;&lt;a href="http://debirf.cmrg.net/autobuilds/"&gt;debirf images&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://tracker.debian.org/pkg/invaders"&gt;grub-invaders&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And don't forget to cleanup:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;umount /mnt
sync
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/bios"&gt;bios&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/efi"&gt;efi&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/grub"&gt;grub&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/tip"&gt;tip&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>a10n for l10n</title><link href="https://dkg.fifthhorseman.net/blog/a10n-for-l10n.html" rel="alternate"/><published>2014-12-12T23:00:00-05:00</published><updated>2014-12-12T23:00:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2014-12-12:/blog/a10n-for-l10n.html</id><summary type="html">&lt;p&gt;The abbreviated title above means "Appreciation for Localization" :)&lt;/p&gt;
&lt;p&gt;I wanted to say a word of thanks for the awesome work done by &lt;a href="https://wiki.debian.org/L10n"&gt;debian
localization teams&lt;/a&gt;. I speak English, and
my other language skills are weak. I'm lucky: most software I use is
written by default in a language that I …&lt;/p&gt;</summary><content type="html">&lt;p&gt;The abbreviated title above means "Appreciation for Localization" :)&lt;/p&gt;
&lt;p&gt;I wanted to say a word of thanks for the awesome work done by &lt;a href="https://wiki.debian.org/L10n"&gt;debian
localization teams&lt;/a&gt;. I speak English, and
my other language skills are weak. I'm lucky: most software I use is
written by default in a language that I can already understand.&lt;/p&gt;
&lt;p&gt;The debian localization teams do great work in making sure that packages
in debian gets translated into many other languages, so that many more
people around the world can take advantage of free software.&lt;/p&gt;
&lt;p&gt;I was reminded of this work recently (again) with the great patches
submitted to &lt;a href="https://wiki.debian.org/Teams/GnuPG"&gt;GnuPG and related
packages&lt;/a&gt;. The changes were made by
many different people, and coordinated with the debian GnuPG packaging
team by David Prévot.&lt;/p&gt;
&lt;p&gt;This work doesn't just help debian and its users. These localizations
make their way back upstream to the original projects, which in turn are
available to many other people.&lt;/p&gt;
&lt;p&gt;If you use debian, and you speak a language other than english, and you
want to give back to the community, please consider &lt;a href="https://wiki.debian.org/L10n"&gt;joining one of the
localization teams&lt;/a&gt;. They are a great way
to help out our project's top &lt;a href="https://www.debian.org/social_contract"&gt;priorities: our users and free
software&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Thank you to all the localizers!&lt;/p&gt;
&lt;p&gt;(this post was inspired by &lt;a href="http://info.comodo.priv.at/blog/archive/2014/12/"&gt;gregoa's debian advent
calendar&lt;/a&gt;. i won't be
posting public words of thanks as frequently or as diligently as he
does, any more than i'll be fixing the number of RC bugs that he fixes.
This are just two of the ways that gregoa consistently leads the
community by example. He's an inspiration, even if living up to his
example is a daunting challenge.)&lt;/p&gt;</content><category term="misc"/></entry><entry><title>GnuPG 2.1.0 in debian experimental</title><link href="https://dkg.fifthhorseman.net/blog/gnupg-210-in-debian-experimental.html" rel="alternate"/><published>2014-11-06T23:27:00-05:00</published><updated>2014-11-06T23:27:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2014-11-06:/blog/gnupg-210-in-debian-experimental.html</id><summary type="html">&lt;p&gt;Today, i uploaded GnuPG 2.1.0 into debian's experimental suite. It's
built for &lt;code&gt;amd64&lt;/code&gt; and &lt;code&gt;i386&lt;/code&gt; and &lt;code&gt;powerpc&lt;/code&gt; already. You can &lt;a href="https://buildd.debian.org/status/package.php?p=gnupg2&amp;amp;suite=experimental"&gt;monitor its
progress on the
buildds&lt;/a&gt;
to see when it's available for your architecture.&lt;/p&gt;
&lt;h3 id="changes"&gt;Changes&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://gnupg.org/faq/whats-new-in-2.1.html"&gt;GnuPG 2.1 offers many new and interesting
features&lt;/a&gt;, but one of the …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Today, i uploaded GnuPG 2.1.0 into debian's experimental suite. It's
built for &lt;code&gt;amd64&lt;/code&gt; and &lt;code&gt;i386&lt;/code&gt; and &lt;code&gt;powerpc&lt;/code&gt; already. You can &lt;a href="https://buildd.debian.org/status/package.php?p=gnupg2&amp;amp;suite=experimental"&gt;monitor its
progress on the
buildds&lt;/a&gt;
to see when it's available for your architecture.&lt;/p&gt;
&lt;h3 id="changes"&gt;Changes&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://gnupg.org/faq/whats-new-in-2.1.html"&gt;GnuPG 2.1 offers many new and interesting
features&lt;/a&gt;, but one of the
most important changes is the introduction of elliptic curve crypto
(ECC). While GnuPG 2.1 discourages the creation of ECC keys by default,
it's important that we have the ability to verify ECC signatures and to
encrypt to ECC keys if other people are using this tech. It seems
likely, for example, that &lt;a href="https://code.google.com/p/end-to-end/"&gt;Google's End-To-End Chrome OpenPGP
extension&lt;/a&gt; will use ECC. GnuPG
users who don't have this capability available won't be able to
communicate with End-To-End users.&lt;/p&gt;
&lt;p&gt;There are many other architectural changes, including a move to more
daemonized interactions with the outside world, including using
&lt;code&gt;dirmngr&lt;/code&gt; to talk to the keyservers, and relying more heavily on
&lt;code&gt;gpg-agent&lt;/code&gt; for secret key access. The &lt;code&gt;gpg-agent&lt;/code&gt; change is a welcome
one -- the agent now holds the secret key material entirely and never
releases it -- as of 2.1 &lt;code&gt;gpg2&lt;/code&gt; never has any asymmetric secret key
material in its process space at all.&lt;/p&gt;
&lt;p&gt;One other nice change for those of us with large keyrings is the new
keybox format for public key material. This provides much faster indexed
access to the public keyring.&lt;/p&gt;
&lt;p&gt;I've been using GnuPG 2.1.0 betas regularly for the last month, and i
think that for the most part, they're ready for regular use.&lt;/p&gt;
&lt;h3 id="timing-for-debian"&gt;Timing for debian&lt;/h3&gt;
&lt;p&gt;The timing between the debian freeze and the GnuPG upstream is
unfortunate, but i don't think i'm prepared to push for this as a jessie
transition yet, without more backup. I'm talking to other members of the
GnuPG packaging team to see if they think this is worth even bringing to
the attention of the release team, but i'm not pursuing it at the
moment.&lt;/p&gt;
&lt;p&gt;If you really want to see this in debian jessie, please install the
experimental package and let me know how it works for you.&lt;/p&gt;
&lt;h3 id="long-term-migration-concerns"&gt;Long term migration concerns&lt;/h3&gt;
&lt;p&gt;GnuPG upstream is now maintaining three branches concurrently: modern
(2.1.x), stable (2.0.x), and classic (1.4.x). I think this is stretches
the GnuPG upstream development team too thin, and we should do what we
can to help them transition to supporting fewer releases concurrently.&lt;/p&gt;
&lt;p&gt;In the long-term, I'd ultimately like to see gnupg 2.1.x to replace all
use of gpg 1.4.x and gpg 2.0.x in debian, but unlikely to to happen
right now.&lt;/p&gt;
&lt;p&gt;In particular, the following two bugs make it impossible to use my
current, common monkeysphere workflow:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://bugs.g10code.com/gnupg/issue1753"&gt;&lt;code&gt;export-reset-subkey-passwd&lt;/code&gt; doesn't
    work&lt;/a&gt;, which breaks
    &lt;code&gt;monkeysphere subkey-to-ssh-agent&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://bugs.g10code.com/gnupg/issue1754"&gt;pluggable keyserver transports no longer
    work&lt;/a&gt;, which means that i
    can't use &lt;code&gt;hkpms://&lt;/code&gt; access to keyservers.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And GnuPG 2.1.0 drops support for the older, known-weak OpenPGPv3 key
formats. This is an important step for simplification, but there are a
few people who probably &lt;a href="http://lists.gnupg.org/pipermail/gnupg-devel/2014-November/029054.html"&gt;still need to use v3 keys for obscure/janky
reasons&lt;/a&gt;,
or have data encrypted to a v3 key that they need to be able to decrypt.
Those people will want to have GnuPG 1.4 around.&lt;/p&gt;
&lt;h3 id="call-for-testing"&gt;Call for testing&lt;/h3&gt;
&lt;p&gt;Anyway, if you use debian testing or unstable, and you are interested in
these features, i invite you to install `gnupg2` and its friends from
&lt;code&gt;experimental&lt;/code&gt;. If you want to be sensibly conservative, i recommend
backing up `\~/.gnupg` before trying to use it:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;cp -aT .gnupg .gnupg.baksudo apt install -t experimental gnupg2 gnupg-agent dirmngr gpgsm gpgv2 scdaemon
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;If you find issues, please file them via the debian BTS as usual. I (or
other members of the pkg-gnupg team) will help you triage them to
upstream as needed.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/ecc"&gt;ecc&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/experimental"&gt;experimental&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/gnupg"&gt;gnupg&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>OTR key replacement (heartbleed)</title><link href="https://dkg.fifthhorseman.net/blog/otr-key-replacement-heartbleed.html" rel="alternate"/><published>2014-04-14T18:43:00-04:00</published><updated>2014-04-14T18:43:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2014-04-14:/blog/otr-key-replacement-heartbleed.html</id><summary type="html">&lt;p&gt;I'm replacing my OTR key for XMPP because of heartbleed (see below).&lt;/p&gt;
&lt;p&gt;If the plain ASCII text below is mangled beyond verification, you can
retrieve a copy of it &lt;a href="https://dkg.fifthhorseman.net/dkg-xmpp-otr-key-2014.txt"&gt;from my web
site&lt;/a&gt; that
should be able to be verified.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;-----BEGIN PGP SIGNED MESSAGE-----Hash: SHA512OTR Key Replacement for XMPP dkg …&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;I'm replacing my OTR key for XMPP because of heartbleed (see below).&lt;/p&gt;
&lt;p&gt;If the plain ASCII text below is mangled beyond verification, you can
retrieve a copy of it &lt;a href="https://dkg.fifthhorseman.net/dkg-xmpp-otr-key-2014.txt"&gt;from my web
site&lt;/a&gt; that
should be able to be verified.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;-----BEGIN PGP SIGNED MESSAGE-----Hash: SHA512OTR Key Replacement for XMPP dkg@jabber.org===========================================Date: 2014-04-14My main XMPP account is dkg@jabber.org.I prefer OTR [0] conversations when using XMPP for privatediscussions.I was using irssi to connect to XMPP servers, and irssi relies onOpenSSL for the TLS connections.  I was using it with versions ofOpenSSL that were vulnerable to the &amp;quot;Heartbleed&amp;quot; attack [1].  It&amp;#39;spossible that my OTR long-term secret key was leaked via this attack.As a result, I&amp;#39;m changing my OTR key for this account.The new, correct OTR fingerprint for the XMPP account at dkg@jabber.org is:  F8953C5D 48ABABA2 F48EE99C D6550A78 A91EF63DThanks for taking the time to verify your peers&amp;#39; fingerprints.  Securecommunication is important not only to protect yourself, but also toprotect your friends, their friends and so on.Happy Hacking,  --dkg  (Daniel Kahn Gillmor)Notes:[0] OTR: https://otr.cypherpunks.ca/[1] Heartbleed: http://heartbleed.com/-----BEGIN PGP SIGNATURE-----Version: GnuPG v1iQJ8BAEBCgBmBQJTTBF+XxSAAAAAAC4AKGlzc3Vlci1mcHJAbm90YXRpb25zLm9wZW5wZ3AuZmlmdGhob3JzZW1hbi5uZXRFQjk2OTEyODdBN0FEREUzNzU3RDkxMUVBNTI0MDFCMTFCRkRGQTVDAAoJEKUkAbEb/fpcYwkQAKLzEnTV1lrK6YrhdvRnuYnhBh9Ad2ZY44RQmN+STMEnCJ4OWbn5qx/NrziNVUZN6JddrEvYUOxME6K0mGHdY2KRyjLYudsBuSMZQ+5crZkE8rjBL8vDj8Dbn3mHyT8bAbB9cmASESeQMu96vni15ePd2sB7iBofee9YAoiewI+xRvjo2aRX8nbFSykoIusgnYG2qwo2qPaBVOjmoBPB5YRIPkN0/hAh11Ky0qQ/GUROytp/BMJXZx2rea2xHs0mplZLqJrX400u1Bawllgz3gfVqQKKNc3st6iHf3F6p6Z0db9NRq+AJ24fTJNcQ+t07vMZHCWM+hTelofvDyBhqG/rl8e4gdSh/zWTR/7TR3ZYLCiZzU0uYNd0rE3CcxDbnGTUS1ZxooykWBNIPJMl1DUEzzcrQleLS5tna1b9la3rJWtFIATyO4dvUXXa9wU3c3+Wr60cSXbsK5OCct2KmiWYfJme0bpM5m1j7B8QwLzKqy/+YgOOJ05QDVbBZwJn1B7rvUYmb968yLQUqO5Q87L4GvPB1yY+2bLLF2oFMJJzFmhKuAflslRXyKcAhTmtKZY+hUpxoWuVa1qLU3bQCUSEMlC4Hv6vaq14BEYLeopoSb7THsIcUdRjho+WEKPkryj6aVZM5WnIGIS/4QtYvWpk3UsXFdVZGfE9rfCOLf0F=BGa1-----END PGP SIGNATURE-----&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Inline-PGP considered harmful</title><link href="https://dkg.fifthhorseman.net/blog/inline-pgp-considered-harmful.html" rel="alternate"/><published>2014-02-24T02:09:00-05:00</published><updated>2014-02-24T02:09:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2014-02-24:/blog/inline-pgp-considered-harmful.html</id><summary type="html">&lt;p&gt;We changed the default PGP signatures generated by enigmail in debian
from Inline PGP to PGP/MIME &lt;a href="http://packages.qa.debian.org/e/enigmail/news/20130125T183232Z.html"&gt;last
year&lt;/a&gt;,
and the experiment has gone well enough that we're now using it in
jessie and wheezy (where it arrived as part of a security update to make
the extension work with …&lt;/p&gt;</summary><content type="html">&lt;p&gt;We changed the default PGP signatures generated by enigmail in debian
from Inline PGP to PGP/MIME &lt;a href="http://packages.qa.debian.org/e/enigmail/news/20130125T183232Z.html"&gt;last
year&lt;/a&gt;,
and the experiment has gone well enough that we're now using it in
jessie and wheezy (where it arrived as part of a security update to make
the extension work with the security-updated icedove package).&lt;/p&gt;
&lt;p&gt;After having several people poke me in different contexts about why
inline cleartext PGP signatures are a bad idea, i got sufficiently tired
of repeating myself, and finally &lt;a href="https://dkg.fifthhorseman.net/notes/inline-pgp-harmful/"&gt;documented some of the problems
explicitly&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The report includes a demonstration of a content-tampering attack that
changes the meaning of a signed inline-PGP message without breaking the
signature, which i first worked out &lt;a href="http://thread.gmane.org/gmane.mail.notmuch.general/15643/focus=15744"&gt;on the notmuch mailing
list&lt;/a&gt;,
but hadn't gotten around to demonstrating until recently.&lt;/p&gt;
&lt;p&gt;The attack is demonstrated against clearsigned messages, but also works
against inline encrypted messages (but is harder to demonstrate since a
demonstration would require sharing secret key material for the
decryption step).&lt;/p&gt;
&lt;p&gt;Please don't generate Inline-PGP messages. And if you must parse and
accept them, please consider carefully the risks you expose your users
to and think about ways to mitigate the problems.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/charset"&gt;charset&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/inline-pgp"&gt;inline-pgp&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/openpgp"&gt;openpgp&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/security"&gt;security&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Kevin M. Igoe should step down from CFRG Co-chair</title><link href="https://dkg.fifthhorseman.net/blog/kevin-m-igoe-should-step-down-from-cfrg-co-chair.html" rel="alternate"/><published>2013-12-21T22:55:00-05:00</published><updated>2013-12-21T22:55:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2013-12-21:/blog/kevin-m-igoe-should-step-down-from-cfrg-co-chair.html</id><summary type="html">&lt;p&gt;I've &lt;a href="https://www.debian-administration.org/users/dkg/weblog/102"&gt;said
recently&lt;/a&gt;
that pervasive surveillance is wrong. I don't think anyone from the NSA
should have a leadership position in the development or deployment of
Internet communications, because their interests are at odds with the
interest of the rest of the Internet. But someone at the NSA is in …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I've &lt;a href="https://www.debian-administration.org/users/dkg/weblog/102"&gt;said
recently&lt;/a&gt;
that pervasive surveillance is wrong. I don't think anyone from the NSA
should have a leadership position in the development or deployment of
Internet communications, because their interests are at odds with the
interest of the rest of the Internet. But someone at the NSA is in
exactly such a position. They ought to step down.&lt;/p&gt;
&lt;p&gt;Here's the background:&lt;/p&gt;
&lt;p&gt;The &lt;a href="https://www.irtf.org"&gt;Internet Research Task Force (IRTF)&lt;/a&gt; is a
body tasked with research into underlying concepts, themes, and
technologies related to the Internet as a whole. They act as a research
organization that cooperates and complements the engineering and
standards-setting activities of the &lt;a href="https://www.ietf.org"&gt;Internet Engineering Task Force
(IETF)&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The IRTF is divided into issue-specific research groups, each of which
has a Chair or Co-Chairs who have "&lt;a href="http://wiki.tools.ietf.org/html/rfc2014#section-5.3"&gt;wide discretion in the conduct of
Research Group
business&lt;/a&gt;", and are
tasked with organizing the research and discussion, ensuring that the
group makes progress on the relevant issues, and communicating the
general sense of the results back to the rest of the IRTF and the IETF.&lt;/p&gt;
&lt;p&gt;One of the IRTF's research groups specializes in cryptography: the
&lt;a href="https://www.irtf.org/cfrg"&gt;Crypto Forum Research Group (CFRG)&lt;/a&gt;. There
are two current chairs of the CFRG: David McGrew &lt;code&gt;&amp;lt;mcgrew@cisco.com&amp;gt;&lt;/code&gt;
and Kevin M. Igoe &lt;code&gt;&amp;lt;kmigoe@nsa.gov&amp;gt;&lt;/code&gt;. As you can see from his e-mail
address, Kevin M. Igoe is affiliated with the &lt;a href="https://en.wikipedia.org/wiki/National_Security_Agency"&gt;National Security Agency
(NSA)&lt;/a&gt;. The NSA
itself actively tries to weaken cryptography on the Internet so that
they can improve their surveillance, and one of the ways they try to do
so is to "&lt;a href="http://www.nytimes.com/interactive/2013/09/05/us/documents-reveal-nsa-campaign-against-encryption.html?_r=0"&gt;influence policies, standards, and
specifications&lt;/a&gt;".&lt;/p&gt;
&lt;p&gt;On the CFRG list yesterday, &lt;a href="http://trevp.net/"&gt;Trevor Perrin&lt;/a&gt;
&lt;a href="https://www.ietf.org/mail-archive/web/cfrg/current/msg03554.html"&gt;requested the removal of Kevin M. Igoe from his position as Co-chair of
the
CFRG&lt;/a&gt;.
Trevor's specific arguments rest heavily on the technical merits of a
proposed cryptographic mechanism called &lt;a href="https://tools.ietf.org/html/draft-irtf-cfrg-dragonfly"&gt;Dragonfly key
exchange&lt;/a&gt;, but I
think the focus on Dragonfly itself is the least of the concerns for the
IRTF.&lt;/p&gt;
&lt;p&gt;I've &lt;a href="https://www.ietf.org/mail-archive/web/cfrg/current/msg03570.html"&gt;seconded Trevor's
proposal&lt;/a&gt;,
and asked
&lt;a href="https://debian-administration.org/weblog/feeds/kmigoe@nsa.gov"&gt;Kevin&lt;/a&gt;
directly to step down and to provide us with information about any
attempts by the NSA to interfere with or subvert recommendations coming
from these standards bodies.&lt;/p&gt;
&lt;p&gt;Below is my letter in full:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;From&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Daniel&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Kahn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Gillmor&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="nv"&gt;@fifthhorseman&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="k"&gt;To&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cfrg&lt;/span&gt;&lt;span class="nv"&gt;@ietf&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Kevin&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Igoe&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;kmigoe&lt;/span&gt;&lt;span class="nv"&gt;@nsa&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gov&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nc"&gt;Date&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Sat&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;Dec&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2013&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;29&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;0500&lt;/span&gt;
&lt;span class="nl"&gt;Subject&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;Re&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;Cfrg&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Requesting&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;removal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CFRG&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;co&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;chair&lt;/span&gt;

&lt;span class="k"&gt;On&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2013&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;01&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;AM&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Trevor&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Perrin&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;wrote&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;I&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;d like to request the removal of Kevin Igoe from CFRG co-chair.&lt;/span&gt;

&lt;span class="s1"&gt;Regardless of the conclusions that anyone comes to about Dragonfly&lt;/span&gt;
&lt;span class="s1"&gt;itself, I agree with Trevor that Kevin M. Igoe, as an employee of the&lt;/span&gt;
&lt;span class="s1"&gt;NSA, should not remain in the role of CFRG co-chair.&lt;/span&gt;

&lt;span class="s1"&gt;While the NSA clearly has a wealth of cryptographic knowledge and&lt;/span&gt;
&lt;span class="s1"&gt;experience that would be useful for the CFRG, the NSA is apparently&lt;/span&gt;
&lt;span class="s1"&gt;engaged in a series of attempts to weaken cryptographic standards and&lt;/span&gt;
&lt;span class="s1"&gt;tools in ways that would facilitate pervasive surveillance of&lt;/span&gt;
&lt;span class="s1"&gt;communication on the Internet.&lt;/span&gt;

&lt;span class="s1"&gt;The IETF&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;position&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;favor&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;privacy&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;security&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;rightly&lt;/span&gt;
&lt;span class="n"&gt;identifies&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pervasive&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;surveillance&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;on&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Internet&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;serious&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;problem&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

&lt;span class="nl"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;www&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ietf&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;media&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2013&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;07&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;internet&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;privacy&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="ow"&gt;and&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;security&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;

&lt;span class="n"&gt;The&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;documents&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Trevor&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;points&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ow"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;others&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;similar&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;stories&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;indicate&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;that&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NSA&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;an&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;organization&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;at&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;odds&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;with&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;goals&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;IETF&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;

&lt;span class="k"&gt;While&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;I&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;want&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;IETF&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;continue&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;welcoming&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;technical&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;insight&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;and&lt;/span&gt;
&lt;span class="n"&gt;discussion&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;everyone&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;I&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;do&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;not&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;think&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;it&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;appropriate&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;anyone&lt;/span&gt;
&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NSA&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;be&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;position&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;coordination&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;or&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;leadership&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;

&lt;span class="c1"&gt;----&lt;/span&gt;

&lt;span class="n"&gt;Kevin&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;responsible&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;action&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;anyone&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;your&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;position&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;
&lt;span class="n"&gt;acknowledge&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;conflict&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;interest&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;step&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;down&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;promptly&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;
&lt;span class="k"&gt;position&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Co&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Chair&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CFRG&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;

&lt;span class="k"&gt;If&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;you&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;happen&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;also&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;subscribe&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;broad&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;consensus&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;described&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;
&lt;span class="n"&gt;IETF&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;recent&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;announcement&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;-- that is, if you care about privacy ands&lt;/span&gt;
&lt;span class="n"&gt;ecurity&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;on&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Internet&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;-- then you should also reveal any NSA activity&lt;/span&gt;
&lt;span class="n"&gt;you&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;know&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;about&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;that&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;attempts&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;subvert&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;or&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;weaken&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cryptographic&lt;/span&gt;
&lt;span class="n"&gt;underpinnings&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;IETF&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;protocols&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;

&lt;span class="n"&gt;Regards&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;

&lt;span class="w"&gt;         &lt;/span&gt;&lt;span class="c1"&gt;--dkg&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;I'm aware that an abdication by Kevin (or his removal by the IETF chair)
would probably not end the NSA's attempts to subvert standards bodies or
weaken encryption. They could continue to do so by subterfuge, for
example, or by private influence on other public members. We may not be
able to stop them from doing this in secret, and the knowledge that they
may do so seems likely to cast a pall of suspicion over any IETF and
IRTF proceedings in the future. This social damage is serious and
troubling, and it marks yet another cost to the NSA's reckless
institutional disregard for civil liberties and free communication.&lt;/p&gt;
&lt;p&gt;But even if we cannot rule out private NSA influence over standards
bodies and discussion, we can certainly explicitly reject any public
influence over these critical communications standards by members of an
institution so at odds with the core principles of a free society.&lt;/p&gt;
&lt;p&gt;Kevin M. Igoe, please step down from the CFRG Co-chair position.&lt;/p&gt;
&lt;p&gt;And to anyone (including Kevin) who knows about specific attempts by the
NSA to undermine the communications standards we all rely on: please
blow the whistle on this kind of activity. Alert a friend, a colleague,
or a journalist. Pervasive surveillance is an attack on all of us, and
those who resist it are heroes.&lt;/p&gt;</content><category term="misc"/></entry><entry><title>automatically have uscan check signatures</title><link href="https://dkg.fifthhorseman.net/blog/automatically-have-uscan-check-signatures.html" rel="alternate"/><published>2013-12-18T03:15:00-05:00</published><updated>2013-12-18T03:15:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2013-12-18:/blog/automatically-have-uscan-check-signatures.html</id><summary type="html">&lt;p&gt;If you maintain software in debian, one of your regular maintenance
tasks is checking for new upstream versions, reviewing them, and
preparing them for debian if appropriate. One of those steps is often to
verify the cryptographic signature on the upstream source archive.&lt;/p&gt;
&lt;p&gt;At the moment, most maintainers do the …&lt;/p&gt;</summary><content type="html">&lt;p&gt;If you maintain software in debian, one of your regular maintenance
tasks is checking for new upstream versions, reviewing them, and
preparing them for debian if appropriate. One of those steps is often to
verify the cryptographic signature on the upstream source archive.&lt;/p&gt;
&lt;p&gt;At the moment, most maintainers do the cryptographic check manually, or
maybe even don't bother to do it at all. For the common case of detached
OpenPGP signatures, though,
&lt;a href="http://manpages.debian.org/cgi-bin/man.cgi?query=uscan"&gt;uscan&lt;/a&gt; can now
do it for you automatically (as of
&lt;a href="http://packages.debian.org/devscripts"&gt;devscripts&lt;/a&gt; version 2.13.3). You
just need to tell uscan what keys you expect upstream to be signing
with, and how to find the detached signature.&lt;/p&gt;
&lt;p&gt;So, for example, &lt;a href="https://lists.mindrot.org/pipermail/openssh-unix-dev/2013-December/031897.html"&gt;Damien Miller recently announced his new key that he
will be using to sign OpenSSH
releases&lt;/a&gt;
(his new key has OpenPGP fingerprint
&lt;code&gt;59C2 118E D206 D927 E667 EBE3 D3E5 F56B 6D92 0D30&lt;/code&gt; -- you can verify it
has been cross-signed by his older key, and his older key has been
revoked with the indication that it was superceded by this one). Having
done a reasonable verification of Damien's key, if i was the &lt;code&gt;openssh&lt;/code&gt;
package maintainer, i'd do the following:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;cd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;~/&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;openssh&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;mkdir&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;upstreamgpg&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="k"&gt;export&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;options&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;export&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;minimal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;armor&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="k"&gt;export&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;59C2 118E D206 D927 E667  EBE3 D3E5 F56B 6D92 0D30&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;debian&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;upstream&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;signing&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;asc&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;And then upon noticing that the signature files are named with a simple
&lt;code&gt;.asc&lt;/code&gt; suffix on &lt;a href="ftp://ftp.openbsd.org/pub/OpenBSD/OpenSSH/portable/"&gt;the upstream distribution
site&lt;/a&gt;, we can use
the following &lt;code&gt;pgpsigurlmangle&lt;/code&gt; option in &lt;code&gt;debian/watch&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;version=3opts=pgpsigurlmangle=s/$/.asc/ ftp://ftp.openbsd.org/pub/OpenBSD/OpenSSH/portable/openssh-(.*)\.tar\.gz
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;I've filed this specific example as &lt;a href="http://bugs.debian.org/732441"&gt;debian bug
#732441&lt;/a&gt;. If you notice a package with
upstream signatures that aren't currently being checked by uscan (or if
you are upstream, you sign your packages, and you want your debian
maintainer to verify them), you can file similar bugs. Or, if you
maintain a package for debian, you can just fix up your package so that
this check is there on the next upload.&lt;/p&gt;
&lt;p&gt;If you maintain a package whose upstream doesn't sign their releases,
ask them why not -- wouldn't upstream prefer that their downstream users
can verify that each release wasn't tampered with?&lt;/p&gt;
&lt;p&gt;Of course, none of these checks take the the place of the real work of a
debian package maintainer: reviewing the code and the changelogs,
thinking about what changes have happened, and how they fit into the
broader distribution. But it helps to automate one of the basic
safeguards we should all be using. Let's eliminate the possibility that
the file was tampered with at the upstream distribution mirror or while
in transit over the network. That way, the maintainer's time and energy
can be spent where they're more needed.&lt;/p&gt;
&lt;p&gt;UPDATED 2015-05-03: use the currently-preferred location for the signing
key.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/crypto"&gt;crypto&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/devscripts"&gt;devscripts&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/openpgp"&gt;openpgp&lt;/a&gt;, &lt;a href="https://debian-administration.org/tag/package%20maintenance"&gt;package
maintenance&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/signatures"&gt;signatures&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/uscan"&gt;uscan&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>OpenPGP Key IDs are not useful</title><link href="https://dkg.fifthhorseman.net/blog/openpgp-key-ids-are-not-useful.html" rel="alternate"/><published>2013-12-13T20:04:00-05:00</published><updated>2013-12-13T20:04:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2013-12-13:/blog/openpgp-key-ids-are-not-useful.html</id><summary type="html">&lt;h3 id="fingerprints-and-key-ids"&gt;Fingerprints and Key IDs&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://tools.ietf.org/html/rfc4880#section-12.2"&gt;OpenPGPv4
fingerprints&lt;/a&gt; are made
from an SHA-1 digest over the key's public key material, creation date,
and some boilerplate. SHA-1 digests are 160 bits in length. The "long
key ID" of a key is the last 64 bits of the key's fingerprint. The
"short key ID …&lt;/p&gt;</summary><content type="html">&lt;h3 id="fingerprints-and-key-ids"&gt;Fingerprints and Key IDs&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://tools.ietf.org/html/rfc4880#section-12.2"&gt;OpenPGPv4
fingerprints&lt;/a&gt; are made
from an SHA-1 digest over the key's public key material, creation date,
and some boilerplate. SHA-1 digests are 160 bits in length. The "long
key ID" of a key is the last 64 bits of the key's fingerprint. The
"short key ID" of a key is the last 32 bits of the key's fingerprint.
You can see both of the key IDs as a hash in and of themselves, as
"32-bit truncated SHA-1" is a sort of hash (albeit not a
cryptographically secure one).&lt;/p&gt;
&lt;p&gt;I'm arguing here that short Key IDs and long Key IDs are actually
useless, and we should stop using them entirely where we can do so. We
certainly should not be exposing normal human users to them.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;(Note that I am not arguing that OpenPGP v4 fingerprints themselves are
cryptographically insecure. I do not believe that there are any serious
cryptographic risks currently associated with OpenPGP v4 fingerprints.
This post is about Key IDs specifically, not fingerprints.)&lt;/em&gt;&lt;/p&gt;
&lt;h3 id="key-ids-have-serious-problems"&gt;Key IDs have serious problems&lt;/h3&gt;
&lt;p&gt;&lt;a href="http://www.asheesh.org/note/debian/short-key-ids-are-bad-news.html"&gt;Asheesh pointed out two years
ago&lt;/a&gt;
that OpenPGP short key IDs are bad because they are trivial to
replicate. This is called a &lt;a href="https://en.wikipedia.org/wiki/Preimage_attack"&gt;preimage
attack&lt;/a&gt; against the short
key ID (which is just a truncated fingerprint).&lt;/p&gt;
&lt;p&gt;Today, &lt;a href="https://www.ietf.org/mail-archive/web/openpgp/current/msg07195.html"&gt;David Leon Gil demonstrated that a collision attack against the
long key ID is also
trivial&lt;/a&gt;.
A &lt;a href="https://en.wikipedia.org/wiki/Collision_resistance"&gt;collision attack&lt;/a&gt;
differs from a preimage attack in that the attacker gets to generate two
different things that both have the same digest. Collision attacks are
easier than preimage attacks because of &lt;a href="https://en.wikipedia.org/wiki/Birthday_problem"&gt;the birthday
paradox&lt;/a&gt;. dlg's
colliding keys are not a surprise, but hopefully the explicit
demonstration can serve as a wakeup call to help us improve our
infrastructure.&lt;/p&gt;
&lt;p&gt;So this is &lt;em&gt;not&lt;/em&gt; a way to spoof a specific target's long key ID on its
own. But it indicates that it's more of a worry than most people tend to
think about or plan for. And remember that for a search space as small
as 64-bits (the long key ID), if you want to find a pre-image against
&lt;em&gt;any one of&lt;/em&gt; &lt;code&gt;2k&lt;/code&gt; keys, your search is actually only in a &lt;code&gt;(64-k)&lt;/code&gt;-bit
space to find a single pre-image.&lt;/p&gt;
&lt;p&gt;The particularly bad news: gpg doesn't cope well with the two keys that
have the same long key ID:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="nd"&gt;@alice&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;gpg&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;xgpg&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt; &lt;span class="n"&gt;B8EBE1AF&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;9E669861368BCA0BE42DAF7DDDA252EBB8EBE1AF&amp;quot;&lt;/span&gt; &lt;span class="n"&gt;importedgpg&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Total&lt;/span&gt; &lt;span class="n"&gt;number&lt;/span&gt; &lt;span class="n"&gt;processed&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;gpg&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;               &lt;span class="n"&gt;imported&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;  &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RSA&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="nd"&gt;@alice&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;gpg&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nn"&gt;ygpg&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt; &lt;span class="n"&gt;B8EBE1AF&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;doesn&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;t match our copygpg: Total number processed: 12 dkg@alice:~$ &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;This probably also means that &lt;code&gt;caff&lt;/code&gt; (from the &lt;a href="http://packages.qa.debian.org/signing-party"&gt;&lt;code&gt;signing-party&lt;/code&gt;
package&lt;/a&gt;) will also choke
when trying to deal with these two keys.&lt;/p&gt;
&lt;p&gt;I'm sure there are other OpenPGP-related tools that will fail in the
face of two keys with matching 64-bit key IDs.&lt;/p&gt;
&lt;h3 id="we-should-not-use-key-ids"&gt;We should not use Key IDs&lt;/h3&gt;
&lt;p&gt;I am more convinced than ever that key IDs (both short and long) are
actively problematic to real-world use of OpenPGP. We want two things
from a key management framework: unforgability, and human-intelligible
handles. Key IDs fail at both.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Fingerprints are unforgable (as much as SHA-1's preimage resistance,
    anyway -- that's a separate discussion), but they aren't
    human-intelligible.&lt;/li&gt;
&lt;li&gt;User IDs are human-intelligible, and they are unforgable if we can
    rely on a robust keysigning network.&lt;/li&gt;
&lt;li&gt;Key IDs (both short and long) are neither human-intelligible nor
    unforgable (regardless of existence of a keysigning network), so
    they are the worst of all possible worlds.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So reasonable tools should not expose either short or long key IDs to
users, or use them internally if they can avoid them. They do not have
any properties we want, and in the worst case, they actively mislead
people or lead them into harm. What reasonable tool should do that?&lt;/p&gt;
&lt;h3 id="how-to-replace-key-ids"&gt;How to replace Key IDs&lt;/h3&gt;
&lt;p&gt;If we're not going to use Key IDs, what should we do instead?&lt;/p&gt;
&lt;p&gt;For anything human-facing, we should be using human-intelligible things
like user IDs and creation dates. These are trivial to forge, but people
can relate to them. This is better than offering the user something that
is &lt;em&gt;also&lt;/em&gt; trivial to forge, but that people cannot relate to. The job of
any key management UI should be to interpret the cryptographic
assurances provided by the certifications and present that to the user
in a comprehensible way.&lt;/p&gt;
&lt;p&gt;For anything not human-facing (e.g. key management data storage, etc),
we should be using the full key itself. We'll also want to store the
full fingerprint as an index, since that is used for communication and
key exchange (e.g. on calling cards).&lt;/p&gt;
&lt;p&gt;There remain parts of the spec (e.g.
&lt;a href="https://tools.ietf.org/html/rfc4880#section-5.1"&gt;PK-ESK&lt;/a&gt;, &lt;a href="https://tools.ietf.org/html/rfc4880#section-5.2.3.5"&gt;Issuer
subpackets&lt;/a&gt;) that
make some use of the long key ID in ways that provide some measure of
convenience but no real cryptographic security. We should fix the spec
to stop using those, and either remove them entirely, or replace them
with the full fingerprints. These fixes are not as urgent as the
user-facing changes or the critical internal indexing fixes, though.&lt;/p&gt;
&lt;p&gt;Key IDs are not useful. We should stop using them.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/collision"&gt;collision&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/crypto"&gt;crypto&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/gpg"&gt;gpg&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/openpgp"&gt;openpgp&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/pgp"&gt;pgp&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/security"&gt;security&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>The legal utility of deniability in secure chat</title><link href="https://dkg.fifthhorseman.net/blog/the-legal-utility-of-deniability-in-secure-chat.html" rel="alternate"/><published>2013-12-05T23:14:00-05:00</published><updated>2013-12-05T23:14:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2013-12-05:/blog/the-legal-utility-of-deniability-in-secure-chat.html</id><summary type="html">&lt;p&gt;This Monday, I attended &lt;a href="https://www.calyxinstitute.org/events/multiparty-otr-and-deniability"&gt;a workshop on Multi-party Off the Record
Messaging and
Deniability&lt;/a&gt;
hosted by the Calyx Institute. The discussion was a combination of legal
and technical people, looking at how the characteristics of this
particular technology affect (or do not affect) the law.&lt;/p&gt;
&lt;p&gt;This is a report-back, since …&lt;/p&gt;</summary><content type="html">&lt;p&gt;This Monday, I attended &lt;a href="https://www.calyxinstitute.org/events/multiparty-otr-and-deniability"&gt;a workshop on Multi-party Off the Record
Messaging and
Deniability&lt;/a&gt;
hosted by the Calyx Institute. The discussion was a combination of legal
and technical people, looking at how the characteristics of this
particular technology affect (or do not affect) the law.&lt;/p&gt;
&lt;p&gt;This is a report-back, since I know other people wanted to attend. I'm
not a lawyer, but I develop software to improve communications security,
I care about these questions, and I want other people to be aware of the
discussion. I hope I did not misrepresent anything below. I'd be happy
if anyone wants to offer corrections.&lt;/p&gt;
&lt;h2 id="background"&gt;Background&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://otr.cypherpunks.ca/"&gt;Off the Record Messaging (OTR)&lt;/a&gt; is a way
to secure instant messaging (e.g. jabber/XMPP, gChat, AIM).&lt;/p&gt;
&lt;p&gt;The two most common characteristics people want from a secure instant
messaging program are:&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;Authentication&lt;/dt&gt;
&lt;dd&gt;Each participant should be able to know specifically who the other
parties are on the chat.&lt;/dd&gt;
&lt;dt&gt;Confidentiality&lt;/dt&gt;
&lt;dd&gt;The content of the messages should only be intelligible to the
parties involved with the chat; it should appear opaque or encrypted
to anyone else listening in. Note that confidentiality effectively
depends on authentication -- if you don't know who you're talking
to, you can't make sensible assertions about confidentiality.&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;As with many other modern networked encryption schemes, OTR relies on
each user maintaining a long-lived "secret key", and publishing a
corresponding "public key" for their peers to examine. These keys are
critical for providing authentication (and by extension, for
confidentiality).&lt;/p&gt;
&lt;p&gt;But OTR offers several interesting characteristics beyond the common
two. Its most commonly cited characteristics are "forward secrecy" and
"deniability".&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;Forward secrecy&lt;/dt&gt;
&lt;dd&gt;Assuming the parties communicating are operating in good faith,
forward secrecy offers protection against a special kind of
adversary: one who logs the encrypted chat, and subsequently steals
either party's long-term secret key. Without forward secrecy, such
an adversary would be able to discover the content of the messages,
violating the confidentiality characteristic. With forward secrecy,
this adversary is be stymied and the messages remain confidential.&lt;/dd&gt;
&lt;dt&gt;Deniability&lt;/dt&gt;
&lt;dd&gt;Deniability only comes into play when one of the parties is no
longer operating in good faith (e.g. their computer is compromised,
or they are collaborating with an adversary). In this context, if
Alice is chatting with Bob, she does not want Bob to be able to
cryptographically prove to anyone else that she made any of the
specific statements in the conversation. This is the focus of
Monday's discussion.
&lt;p&gt;
To be clear, this kind of deniability means Alice can correctly say
"you have no cryptographic proof I said &lt;em&gt;X&lt;/em&gt;", but it does not let
her assert "here is cryptographic proof that I &lt;em&gt;did not&lt;/em&gt; say &lt;em&gt;X&lt;/em&gt;" (I
can't think of any protocol that offers the latter assertion). The
opposite of deniability is a cryptographic proof of origin, which
usually runs something like "only someone with access to Alice's
secret key could have said &lt;em&gt;X&lt;/em&gt;."&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;The traditional two-party OTR protocol has offered both forward secrecy
and deniability for years. But deniability in particular is a
challenging characteristic to provide for group chat which is the domain
of Multi-Party OTR (mpOTR). You can read &lt;a href="http://thread.gmane.org/gmane.comp.security.otr.user/1453"&gt;some past discussion about the
challenges of deniability in mpOTR (and why it's harder when there are
more than two people
chatting)&lt;/a&gt;
from &lt;a href="http://lists.cypherpunks.ca/mailman/listinfo/otr-users"&gt;the otr-users mailing
list&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="if-youre-not-doing-anything-wrong"&gt;If you're not doing anything wrong...&lt;/h2&gt;
&lt;p&gt;The discussion was well-anchored by a comment from another participant
who cheekily asked "If you're not doing anything wrong, why do you need
to hide your chat at all, let alone be able to deny it?"&lt;/p&gt;
&lt;p&gt;The general sense of the room was that we'd all heard this question many
times, from many people. There are lots of problems with the ideas
behind the question from many perspectives. But just from a legal
perspective, there are at least two problems with the way this question
is posed:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;laws themselves are not always just (e.g. consider chat
    communications between an interracial couple in the USA &lt;a href="https://en.wikipedia.org/wiki/Loving_v._Virginia"&gt;before
    1967&lt;/a&gt;, if instant
    messaging had existed at the time), and&lt;/li&gt;
&lt;li&gt;law enforcement (or a legal adversary in civil litigation) may have
    a different understanding or interpretation of the law than you do
    (e.g. consider chat communications between a corporate or government
    whistleblower and a journalist).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In these situations, people confront real risk from the law. If we care
about these people, we need to figure out if we can build systems to
help them reduce that legal risk (of course we also need to fix broken
laws, and the legal environment in general, but those approaches were
out of scope for this discussion).&lt;/p&gt;
&lt;h2 id="the-legal-utility-of-deniability"&gt;The Legal Utility of Deniability&lt;/h2&gt;
&lt;p&gt;Monday's meeting was called specifically because it wasn't clear how
much real-world usefulness there is in the "deniability" characteristic,
and whether this feature is worth the development effort and
implementation tradeoffs required. In particular, the group was
interested in deniability's utility in legal contexts; many (most?)
people in the room were lawyers, and it's also not clear that
deniability has much utility outside of a formal legal setting. If your
adversary isn't constrained by some rule of law, they probably won't
care at all whether there is a cryptographic proof or not that you wrote
a particular message (In retrospect, one possible exception is exposure
in the media, but we did not discuss that scenario).&lt;/p&gt;
&lt;h3 id="places-of-possible-usefulness"&gt;Places of possible usefulness&lt;/h3&gt;
&lt;p&gt;So where might deniability come in handy during civil litigation or a
criminal trial? Presumably the circumstance is that a piece of a chat
log is offered as incriminating evidence, and the defendant is trying to
deny something that they appear to have said in the log.&lt;/p&gt;
&lt;p&gt;This denial could take place in two rather different contexts: during
rules over admissibility of evidence, or (once admitted) in front of a
jury.&lt;/p&gt;
&lt;p&gt;In legal wrangling over admissibility, apparently a lot of horse-trading
can go on -- each side concedes some things in exchange for the other
side conceding other things. It appears that cryptographic proof of
origin (that is, a &lt;em&gt;lack&lt;/em&gt; of deniability) on the chat logs themselves
might reduce the amount of leverage a defense lawyer can get from
conceding or arguing strongly over that piece of evidence. For example,
if the chain of custody of a chat transcript is fuzzy (i.e. the
transcript could have been mishandled or modified somehow before
reaching trial), then a cryptographic proof of origin would make it much
harder for the defense to contest the chat transcript on the grounds of
tampering. Deniability would give the defense more bargaining power.&lt;/p&gt;
&lt;p&gt;In arguing about already-admitted evidence before a jury, deniability in
this sense seems like a job for expert witnesses, who would need to
convince the jury of their interpretation of the data. There was a lot
of skepticism in the room over this, both around the possibility of most
jurors really understanding what OTR's claim of deniability actually
means, and on jurors' ability to distinguish this argument from a bogus
argument presented by an opposing expert witness who is willing to lie
about the nature of the protocol (or who misunderstands it and passes on
their misunderstanding to the jury).&lt;/p&gt;
&lt;p&gt;The complexity of the tech systems involved in a data-heavy prosecution
or civil litigation are themselves opportunities for lawyers to argue
(and experts to weigh in) on the general reliability of these systems.
Sifting through the quantities of data available and ensuring that the
appropriate evidence is actually findable, relevant, and suitably
preserved for the jury's inspection is a hard and complicated job, with
room for error. OTR's deniability might be one more element in a
multi-pronged attack on these data systems.&lt;/p&gt;
&lt;p&gt;These are the most compelling arguments for the legal utility of
deniability that I took away from the discussion. I confess that they
don't seem particularly strong to me, though some level of "avoiding a
weaker position when horse-trading" resonates with me.&lt;/p&gt;
&lt;p&gt;What about the arguments against its utility?&lt;/p&gt;
&lt;h3 id="limitations"&gt;Limitations&lt;/h3&gt;
&lt;p&gt;The most basic argument against OTR's deniability is that courts don't
care about cryptographic proof for digital evidence. People are
convicted or lose civil cases based on unsigned electronic
communications (e.g. normal e-mail, plain chat logs) all the time. OTR's
deniability doesn't provide any legal cover stronger than trying to
claim you didn't write a given e-mail that appears to have originated
from your account. As someone who understands the forgeability of
e-mail, i find this overall situation troubling, but it seems to be
where we are.&lt;/p&gt;
&lt;p&gt;Worse, OTR's deniability doesn't cover &lt;em&gt;whether&lt;/em&gt; you had a conversation,
just &lt;em&gt;what you said&lt;/em&gt; in that conversation. That is, Bob can still
cryptographically prove to an adversary (or before a judge or jury) that
he had a communication with someone controlling Alice's secret key
(which is probably Alice); he just can't prove that Alice herself said
any particular part of the conversation he produces.&lt;/p&gt;
&lt;p&gt;Additionally, there are runtime tradeoffs depending on how the protocol
manages to achieve these features. For example, forward secrecy itself
requires an additional round trip or two when compared to authenticated,
encrypted communications without forward secrecy (a "round trip" is a
message from Alice to Bob followed by a message back from Bob to Alice).&lt;/p&gt;
&lt;p&gt;Getting proper deniability into the mpOTR spec might incur extra latency
(imagine having to wait 60 seconds after everyone joins before starting
a group chat, or a pause in the chat of 15 seconds when a new member
joins) or extra computational power (meaning that they might not work
well on slower/older devices) or an order of magnitude more bandwidth
(meaning that chat might not work at all on a weak connection). There
could also simply be complexity that makes it harder to correctly
implement a protocol with deniability than an alternate protocol without
deniability. Incorrectly-implemented software can put its users at risk.&lt;/p&gt;
&lt;p&gt;I don't know enough about the current state of mpOTR to know what the
specific tradeoffs are for the deniability feature, but it's clear there
will be some. Who decides whether the tradeoffs are worth the feature?&lt;/p&gt;
&lt;h3 id="other-kinds-of-deniability"&gt;Other kinds of deniability&lt;/h3&gt;
&lt;p&gt;Further weakening the case for the legal utility of OTR's deniability,
there seem to be other ways to get deniability in a legal context over a
chat transcript.&lt;/p&gt;
&lt;p&gt;There are deniability arguments that can be made from outside the
protocol. For example, you can always claim someone else took control of
your computer while you were asleep or using the bathroom or eating
dinner, or you can claim that your computer had a virus that exported
your secret key and it must have been used by someone else.&lt;/p&gt;
&lt;p&gt;If you're desperate enough to sacrifice your digital identity, you could
arrange to have your secret key published, at which point anyone can
make signed statements with it. Having forward secrecy makes it possible
to expose your secret key without exposing the content of your past
communications to any listener who happened to log them.&lt;/p&gt;
&lt;h3 id="conclusion"&gt;Conclusion&lt;/h3&gt;
&lt;p&gt;My takeaway from the discussion is that the legal utility of OTR's
deniability is non-zero, but quite low; and that development energy
focused on deniability is probably only justified if there are very few
costs associated with it.&lt;/p&gt;
&lt;p&gt;Several folks pointed out that most communications-security tools are
too complicated or inconvenient to use for normal people. If we have
limited development energy to spend on securing instant messaging,
usability and ubiquity would be a better focus than this form of
deniability.&lt;/p&gt;
&lt;p&gt;Secure chat systems that take too long to make, that are too complex, or
that are too cumbersome are not going to be adopted. But this doesn't
mean people won't chat at all -- they'll just use cleartext chat, or
maybe they'll use supposedly "secure" protocols with even worse
properties: for example, without proper end-to-end authentication
(permitting spoofing or impersonation by the server operator or
potentially by anyone else); with encryption that is reversible by the
chatroom operator or flawed enough to be reversed by any listener with a
powerful computer; without forward secrecy; or so on.&lt;/p&gt;
&lt;p&gt;As a demonstration of this, we heard some lawyers in the room admit to
using Skype to talk with their clients &lt;em&gt;even though they know it's not a
safe communications channel because their clients' adversaries might
have access to the skype messaging system itself&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;My conclusion from the meeting is that there are a few particular
situations where deniability could be useful legally, but that overall,
it is not where we as a community should be spending our development
energy. Perhaps in some future world where all communications are
already authenticated, encrypted, and forward-secret by default, we can
look into improving our protocols to provide this characteristic, but
for now, we really need to work on usability, popularization, and wide
deployment.&lt;/p&gt;
&lt;h3 id="thanks"&gt;Thanks&lt;/h3&gt;
&lt;p&gt;Many thanks to &lt;a href="https://www.calyxinstitute.org/about/board/nicholas-merrill"&gt;Nick
Merrill&lt;/a&gt;
for organizing the discussion, to &lt;a href="http://ccrjustice.org/about-us/staff-board/kadidal,-shayana"&gt;Shayana
Kadidal&lt;/a&gt;
and &lt;a href="http://istanleycohen.org/"&gt;Stanley Cohen&lt;/a&gt; for providing a wealth of
legal insight and legal experience, to &lt;a href="http://ritter.vg/"&gt;Tom Ritter&lt;/a&gt;
for an excellent presentation of the technical details, and to everyone
in the group who participated in the interesting and lively discussion.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/chat"&gt;chat&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/deniability"&gt;deniability&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/otr"&gt;otr&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/security"&gt;security&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>getting to TLS (STARTTLS HOWTO)</title><link href="https://dkg.fifthhorseman.net/blog/getting-to-tls-starttls-howto.html" rel="alternate"/><published>2013-10-30T17:00:00-04:00</published><updated>2013-10-30T17:00:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2013-10-30:/blog/getting-to-tls-starttls-howto.html</id><summary type="html">&lt;p&gt;Many protocols today allow you to upgrade to TLS from within a cleartext
version of the protocol. This often falls under the rubric of
"STARTTLS", though different protocols have different ways of doing it.&lt;/p&gt;
&lt;p&gt;I often forget the exact steps, and when i'm debugging a TLS connection
(e.g. with …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Many protocols today allow you to upgrade to TLS from within a cleartext
version of the protocol. This often falls under the rubric of
"STARTTLS", though different protocols have different ways of doing it.&lt;/p&gt;
&lt;p&gt;I often forget the exact steps, and when i'm debugging a TLS connection
(e.g. with tools like &lt;code&gt;gnutls-cli&lt;/code&gt;) i need to poke a remote peer into
being ready for a TLS handshake. So i'm noting the different mechanisms
here. lines starting with &lt;code&gt;C:&lt;/code&gt; are from the client, lines starting with
&lt;code&gt;S:&lt;/code&gt; are from the server.&lt;/p&gt;
&lt;p&gt;many of these are (roughly) built into &lt;code&gt;openssl s_client&lt;/code&gt;, using the
&lt;code&gt;-starttls&lt;/code&gt; option. Sometimes this doesn't work because the handshake
needs tuning for a given server; other times you want to do this with a
different TLS library. To use the techniques below with &lt;code&gt;gnutls-cli&lt;/code&gt;
from the &lt;code&gt;gnutls-bin&lt;/code&gt; package, just provide the &lt;code&gt;--starttls&lt;/code&gt; argument
(and the appropriate &lt;code&gt;--port XXX&lt;/code&gt; argument), and then hit Ctrl+D when
you think it's ok to start the TLS negotiation.&lt;/p&gt;
&lt;h3 id="smtp"&gt;SMTP&lt;/h3&gt;
&lt;p&gt;The polite SMTP handshake (on port 25 or port 587) that negotiates a TLS
upgrade looks like:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nl"&gt;C&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;EHLO&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;myhostname&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nl"&gt;exampleS&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;...&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="nl"&gt;S&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;250&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nl"&gt;STARTTLSS&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;...&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="nl"&gt;S&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;250&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;somefeature&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="nl"&gt;C&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;STARTTLSS&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;220&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;2.0.0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Ready&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;start&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TLS&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Client&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;can&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;begin&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TLS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;handshake&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id="imap"&gt;IMAP&lt;/h3&gt;
&lt;p&gt;The polite IMAP handshake (on port 143) that negotiates a TLS upgrade
looks like:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;S&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;OK&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;CAPABILITY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;IMAP4rev1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[...]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;STARTTLS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[...]]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[...]&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;STARTTLSS&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;OK&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Begin&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TLS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;negotiation&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Client&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;can&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;begin&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TLS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;handshake&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id="pop"&gt;POP&lt;/h3&gt;
&lt;p&gt;The polite POP handshake (on port 110) that negotiates a TLS upgrade
looks like:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;S: +OK POP3 readyC: STLSS: +OK Begin TLS &amp;lt;Client can begin TLS handshake&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id="xmpp"&gt;XMPP&lt;/h3&gt;
&lt;p&gt;The polite XMPP handshake (on port 5222 for client-to-server, or port
5269 for server-to-server) that negiotiates a TLS upgrade looks
something like (note that the domain requested needs to be the right
one):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;C:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot;?&amp;gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;stream:stream&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;to=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;example.net&amp;quot;&lt;/span&gt;&lt;span class="err"&gt;C:&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="na"&gt;xmlns=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;jabber:client&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;xmlns:stream=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://etherx.jabber.org/streams&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;version=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;1.0&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;S:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;?xml version=&amp;#39;1.0&amp;#39;?&amp;gt;&lt;/span&gt;S:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;stream:streamS:&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="na"&gt;xmlns:db=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;jabber:server:dialback&amp;#39;&lt;/span&gt;&lt;span class="err"&gt;S:&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="na"&gt;xmlns:stream=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;http://etherx.jabber.org/streams&amp;#39;&lt;/span&gt;&lt;span class="err"&gt;S:&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="na"&gt;version=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;1.0&amp;#39;&lt;/span&gt;&lt;span class="err"&gt;S:&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="na"&gt;from=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;example.net&amp;#39;&lt;/span&gt;&lt;span class="err"&gt;S:&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;d34edc7c-22bd-44b3-9dba-8162da5b5e72&amp;#39;&lt;/span&gt;&lt;span class="err"&gt;S:&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="na"&gt;xml:lang=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;en&amp;#39;&lt;/span&gt;&lt;span class="err"&gt;S:&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="na"&gt;xmlns=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;jabber:server&amp;#39;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;S:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;stream:features&amp;gt;&lt;/span&gt;S:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;dialback&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;xmlns=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;urn:xmpp:features:dialback&amp;#39;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;S:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;starttls&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;xmlns=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;urn:ietf:params:xml:ns:xmpp-tls&amp;#39;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;S:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/stream:features&amp;gt;&lt;/span&gt;C:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;starttls&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;xmlns=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;urn:ietf:params:xml:ns:xmpp-tls&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;S:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;proceed&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;xmlns=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;urn:ietf:params:xml:ns:xmpp-tls&amp;#39;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&amp;lt;Client&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;can&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;begin&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;TLS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;handshake&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id="nntp"&gt;NNTP&lt;/h3&gt;
&lt;p&gt;RogerBW (in the comments below) points out that &lt;a href="https://tools.ietf.org/html/rfc4642"&gt;NNTP has TLS
support&lt;/a&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CAPABILITIESS&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[...]&lt;/span&gt;&lt;span class="n"&gt;S&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;STARTTLSS&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[...]&lt;/span&gt;&lt;span class="n"&gt;S&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;C&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;STARTTLSS&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;382&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Continue&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;with&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TLS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;negotiation&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Client&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;can&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;begin&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;TLS&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;handshake&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id="postgresql"&gt;PostgreSQL&lt;/h3&gt;
&lt;p&gt;I got mail from James Cloos suggesting how to negotiate an upgrade to
TLS over &lt;a href="http://www.postgresql.org/"&gt;the PostgreSQL RDBMS&lt;/a&gt;. He points
to &lt;a href="http://www.postgresql.org/docs/9.3/static/protocol.html"&gt;the protocol
docs&lt;/a&gt;, and in
particular, to
&lt;a href="http://www.postgresql.org/docs/9.3/static/protocol-flow.html#AEN98759"&gt;multiple&lt;/a&gt;
&lt;a href="http://www.postgresql.org/docs/9.3/static/protocol-flow.html#AEN99048"&gt;protocol&lt;/a&gt;
&lt;a href="http://www.postgresql.org/docs/9.3/static/protocol-message-types.html"&gt;flow&lt;/a&gt;
documents, and &lt;a href="http://www.postgresql.org/docs/9.3/static/protocol-message-formats.html"&gt;SSLRequest and StartupMessage chunks of the protocol
spec&lt;/a&gt;
(and clarification that &lt;a href="http://www.postgresql.org/docs/9.3/static/protocol-overview.html#PROTOCOL-FORMAT-CODES"&gt;data is sent in network byte
order&lt;/a&gt;).
It won't work in a text-mode communication, but it's worth noting here
anyway:&lt;/p&gt;
&lt;p&gt;The client starts by sending these eight octets:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="n"&gt;x00&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="n"&gt;x00&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="n"&gt;x00&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="n"&gt;x08&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="n"&gt;x04&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="n"&gt;xD2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="n"&gt;x16&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="n"&gt;x2F&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;and the server replies with '&lt;code&gt;S&lt;/code&gt;' for secure or '&lt;code&gt;N&lt;/code&gt;' for not. If the
reply is &lt;code&gt;S&lt;/code&gt;, TLS negotiation follows.&lt;/p&gt;
&lt;p&gt;The message represents &lt;code&gt;int32(8)&lt;/code&gt; specifying that there are 8 octets and
&lt;code&gt;int16(1234)&lt;/code&gt;,&lt;code&gt;int16(5678)&lt;/code&gt;. All sent in network order.&lt;/p&gt;
&lt;p&gt;(The non-TLS case starts with a similar message with
&lt;code&gt;int16(3)&lt;/code&gt;,&lt;code&gt;int16(0)&lt;/code&gt; for protocol version 3.0. Starttls is essentially
pg protocol version 1234.5678.)&lt;/p&gt;
&lt;h3 id="what-else"&gt;what else?&lt;/h3&gt;
&lt;p&gt;I don't know (but would like to) how to do:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;mysql&lt;/code&gt; TLS negotiation&lt;/li&gt;
&lt;li&gt;STARTTLS for LDAP&lt;/li&gt;
&lt;li&gt;other reasonable network protocols capable of upgrade&lt;/li&gt;
&lt;li&gt;other free TLS wrapping tools like &lt;code&gt;openssl s_client&lt;/code&gt; or
    &lt;code&gt;gnutls-cli&lt;/code&gt; that can start off in the clear and negotiate to TLS. I
    am trying &lt;a href="http://bugs.debian.org/701141"&gt;to get libNSS's &lt;code&gt;tstclnt&lt;/code&gt; into the &lt;code&gt;libnss3-tools&lt;/code&gt;
    package&lt;/a&gt;, but that hasn't happened
    yet.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If you know other mechanisms, or see bugs with the simple handshakes
i've posted above, please let me know either by e-mail or on the
comments here.&lt;/p&gt;
&lt;p&gt;Other interesting notes: &lt;a href="https://tools.ietf.org/html/rfc2817"&gt;RFC
2817&lt;/a&gt;, a not-widely-supported
mechanism for upgrading to TLS in the middle of a normal HTTP session.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/gnutls"&gt;gnutls&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/imap"&gt;imap&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/pop"&gt;pop&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/postgresql"&gt;postgresql&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/smtp"&gt;smtp&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/starttls"&gt;starttls&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/tls"&gt;tls&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/xmpp"&gt;xmpp&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Unaccountable surveillance is wrong</title><link href="https://dkg.fifthhorseman.net/blog/unaccountable-surveillance-is-wrong.html" rel="alternate"/><published>2013-10-08T20:12:00-04:00</published><updated>2013-10-08T20:12:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2013-10-08:/blog/unaccountable-surveillance-is-wrong.html</id><summary type="html">&lt;p&gt;As &lt;a href="https://debian-administration.org/users/dkg/weblog/99"&gt;I mentioned
earlier&lt;/a&gt;, the
information in the documents released by Edward Snowden show a clear
pattern of corporate and government abuse of the information networks
that are now deeply intertwined with the lives of many people all over
the world.&lt;/p&gt;
&lt;p&gt;Surveillance is a power dynamic where the party doing …&lt;/p&gt;</summary><content type="html">&lt;p&gt;As &lt;a href="https://debian-administration.org/users/dkg/weblog/99"&gt;I mentioned
earlier&lt;/a&gt;, the
information in the documents released by Edward Snowden show a clear
pattern of corporate and government abuse of the information networks
that are now deeply intertwined with the lives of many people all over
the world.&lt;/p&gt;
&lt;p&gt;Surveillance is a power dynamic where the party doing the spying has
power over the party being surveilled. The surveillance state that
results when one party has "&lt;a href="http://www.nsa.gov/about/values/index.shtml"&gt;Global Cryptologic
Dominance&lt;/a&gt;" is a seriously
bad outcome. The old saw goes "power corrupts, and absolute power
corrupts absolutely". In this case, the stated goal of my government
appears to be absolute power in this domain, with no constraint on the
inevitable corruption. If you are a supporter of any sort of a just
social contract (e.g. &lt;a href="https://necessaryandproportionate.org/"&gt;International Principles on the Application of
Human Rights to Communications
Surveillance&lt;/a&gt;), the situation
should be deeply disturbing.&lt;/p&gt;
&lt;p&gt;One of the major sub-threads in this discussion is how the NSA and their
allies have actively tampered with and weakened the cryptographic
infrastructure that everyone relies on for authenticated and
confidential communications on the 'net. This kind of malicious work
puts everyone's communication at risk, not only those people who the NSA
counts among their "targets" (and the NSA's "target" selection methods
are themselves fraught with serious problems).&lt;/p&gt;
&lt;p&gt;The US government is supposed to take pride in the checks and balances
that keep absolute power out of any one particular branch. One of the
latest attempts to simulate "checks and balances" was &lt;a href="http://www.whitehouse.gov/the-press-office/2013/08/12/presidential-memorandum-reviewing-our-global-signals-intelligence-collec"&gt;the President's
creation&lt;/a&gt;
of &lt;a href="http://www.whitehouse.gov/the-press-office/2013/08/27/statement-press-secretary-review-group-intelligence-and-communications-t"&gt;a "Review
Group"&lt;/a&gt;
to oversee the current malefactors. &lt;a href="http://icontherecord.tumblr.com/post/60323228143/review-group-on-global-signals-intelligence"&gt;The review group then asked for
public
comment&lt;/a&gt;.
A group of technologists (including myself) &lt;a href="https://www.cdt.org/files/pdfs/nsa-review-panel-tech-comment.pdf"&gt;submitted a
comment&lt;/a&gt;
demanding that the review group provide concrete technical details to
independent technologists.&lt;/p&gt;
&lt;p&gt;Without knowing the specifics of how the various surveillance mechanisms
operate, the public in general can't make informed assessments about
what they should consider to be personally safe. And lack of detailed
technical knowledge also makes it much harder to mount an effective
political or legal opposition to the global surveillance state (e.g.
consider the terrible &lt;a href="http://www.supremecourt.gov/opinions/12pdf/11-1025_ihdj.pdf"&gt;Clapper v. Amnesty
International&lt;/a&gt;
decision, where plaintiffs were denied standing to sue the Director of
National Intelligence because they could not demonstrate that they were
being surveilled).&lt;/p&gt;
&lt;p&gt;It's also worth noting that the advocates for global surveillance do not
themselves want to be surveilled, and that (for example) the NSA has
tried to obscure as much of their operations as possible, by
over-classifying documents, and making spurious claims of "national
security". This is where the surveillance power dynamic is most baldly
in play, and many parts of the US government intelligence and military
apparatus has &lt;a href="https://en.wikipedia.org/wiki/Pentagon_Papers"&gt;a long
history&lt;/a&gt; &lt;a href="https://en.wikipedia.org/wiki/COINTELPRO"&gt;of
acting&lt;/a&gt; &lt;a href="https://en.wikipedia.org/wiki/NSA_warrantless_surveillance_%282001%E2%80%9307%29"&gt;in bad
faith&lt;/a&gt;
to obscure its activities.&lt;/p&gt;
&lt;p&gt;The people who have been operating these surveillance systems should be
ashamed of their work, and those who have been overseeing the operation
of these systems should be ashamed of themselves. We need to better
understand the scope of the damage done to our global infrastructure so
we can repair it if we have any hope of avoiding a complete surveillance
state in the future. Getting the technical details of these compromises
in the hands of the public is one step on the path toward a healthier
society.&lt;/p&gt;
&lt;h3 id="postscript"&gt;Postscript&lt;/h3&gt;
&lt;p&gt;Lest I be accused of optimism, let me make clear that fixing the
technical harms is necessary, but not sufficient; even if our technical
infrastructure had not been deliberately damaged, or if we manage to
repair it and stop people from damaging it again, far too many people
still regularly accept ubiquitous private (corporate) surveillance.
Private surveillance organizations (like Facebook and Google) are too
often in a position where their business interests are at odds with
their users' interests, and powerful adversaries can use a surveillance
organization as a lever against weaker parties.&lt;/p&gt;
&lt;p&gt;But helping people to improve their own data sovereignty and to avoid
subjecting their friends and allies to private surveillance is a
discussion for a separate post, i think.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;:
&lt;a href="https://debian-administration.org/tag/cryptography"&gt;cryptography&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/nsa"&gt;nsa&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>RIP Cookiepuss</title><link href="https://dkg.fifthhorseman.net/blog/rip-cookiepuss.html" rel="alternate"/><published>2013-09-28T04:28:00-04:00</published><updated>2013-09-28T04:28:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2013-09-28:/blog/rip-cookiepuss.html</id><summary type="html">&lt;p&gt;Yesterday, i said a sad goodbye to an old friend at &lt;a href="http://abcnorio.org"&gt;ABC No
Rio&lt;/a&gt;. Cookiepuss was a steadfast companion in my
volunteer shifts at the No Rio computer center, a cranky yet gregarious
presence. I met her soon after moving to New York, and have hung out
with her nearly …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Yesterday, i said a sad goodbye to an old friend at &lt;a href="http://abcnorio.org"&gt;ABC No
Rio&lt;/a&gt;. Cookiepuss was a steadfast companion in my
volunteer shifts at the No Rio computer center, a cranky yet gregarious
presence. I met her soon after moving to New York, and have hung out
with her nearly every week for years.&lt;/p&gt;
&lt;p&gt;&lt;img alt="[Cookiepuss -- No Dogs No
Masters]" src="https://dkg.fifthhorseman.net/personal/cookie.jpg"&gt;&lt;/p&gt;
&lt;p&gt;She had the run of the building at ABC No Rio, and was friends with all
sorts of people. She was known and loved by punks and fine artists, by
experimental musicians and bike mechanics, computer geeks and
librarians, travelers and homebodies, photographers, screenprinters,
anarchists, community organizers, zinesters, activists, performers, and
weirdos of all stripes.&lt;/p&gt;
&lt;p&gt;For years, she received postcards from all over the world, including
several from people who had never even met her in person. In her younger
days, she was a ferocious mouser, and even as she shrank with age and
lost some of her teeth she remained excited about food.&lt;/p&gt;
&lt;p&gt;She was an inveterate complainer; a pants-shredder; a cat remarkably
comfortable with dirt; a welcoming presence to newcomers and a friendly
old curmudgeon who never seemed to really hold a grudge even when i had
to do horrible things like help her trim her nails.&lt;/p&gt;
&lt;p&gt;After a long life, she died having said her goodbyes, and surrounded by
people who loved her. I couldn't have asked for better, but I miss her
fiercely.&lt;/p&gt;</content><category term="misc"/></entry><entry><title>half a minute for science!</title><link href="https://dkg.fifthhorseman.net/blog/half-a-minute-for-science.html" rel="alternate"/><published>2013-09-25T21:41:00-04:00</published><updated>2013-09-25T21:41:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2013-09-25:/blog/half-a-minute-for-science.html</id><summary type="html">&lt;p&gt;A friend is teaching a class on data analysis. She is building a simple
and rough data set for the class to examine, and to spur discussion. You
can contribute in half a minute! Here's how:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;get a stopwatch or other sort of timer (whatever device you're
    reading this on …&lt;/li&gt;&lt;/ol&gt;</summary><content type="html">&lt;p&gt;A friend is teaching a class on data analysis. She is building a simple
and rough data set for the class to examine, and to spur discussion. You
can contribute in half a minute! Here's how:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;get a stopwatch or other sort of timer (whatever device you're
    reading this on probably has such a thing).&lt;/li&gt;
&lt;li&gt;start the timer, but don't look at it.&lt;/li&gt;
&lt;li&gt;wait for what you think is 30 seconds, and then look at the timer&lt;/li&gt;
&lt;li&gt;how many actual seconds elapsed?&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The data doesn't need to be particularly high-precision (whole second
values are fine). The other data points my friend is looking for are age
(in years, again, whole numbers are fine) and gender.&lt;/p&gt;
&lt;p&gt;You can send me your results by e-mail, (i suspect you can find my
address if you're reading this blog). Please put "half a minute for
science" in the subject line, and make sure you include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;actual seconds elapsed&lt;/li&gt;
&lt;li&gt;age in years&lt;/li&gt;
&lt;li&gt;gender&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Science thanks you!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/science"&gt;science&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Support privacy-respecting network services!</title><link href="https://dkg.fifthhorseman.net/blog/support-privacy-respecting-network-services.html" rel="alternate"/><published>2013-09-10T06:07:00-04:00</published><updated>2013-09-10T06:07:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2013-09-10:/blog/support-privacy-respecting-network-services.html</id><summary type="html">&lt;p&gt;&lt;a href="http://www.indiegogo.com/projects/fight-the-nsa-save-privacy-help-riseup/x/4408849"&gt;Support privacy-respecting network services! Donate to
Riseup.net!&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;There's a
&lt;a href="http://www.theguardian.com/world/2013/sep/05/nsa-gchq-encryption-codes-security"&gt;lot&lt;/a&gt;
of
&lt;a href="https://www.nytimes.com/2013/09/10/business/the-border-is-a-back-door-for-us-device-searches.html?hp&amp;amp;_r=0&amp;amp;pagewanted=all"&gt;news&lt;/a&gt;
recently about some downright &lt;a href="https://www.propublica.org/special/no-warrant-no-problem-how-the-government-can-still-get-your-digital-data"&gt;orwellian
surveillance&lt;/a&gt;
executed
&lt;a href="http://www.theguardian.com/world/2013/sep/09/nsa-spying-brazil-oil-petrobras"&gt;across&lt;/a&gt;
the
&lt;a href="http://www.spiegel.de/international/world/privacy-scandal-nsa-can-spy-on-smart-phone-data-a-920971.html"&gt;globe&lt;/a&gt;
by &lt;a href="http://www.nsa.gov/"&gt;my own government&lt;/a&gt; with the &lt;a href="http://www.masslive.com/politics/index.ssf/2013/06/codename_prism_secret_program_data_mining.html"&gt;assistance of
major American
corporations&lt;/a&gt;.
The scope is huge, and the implications are depressing. It's scary and
frustrating for anyone who …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://www.indiegogo.com/projects/fight-the-nsa-save-privacy-help-riseup/x/4408849"&gt;Support privacy-respecting network services! Donate to
Riseup.net!&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;There's a
&lt;a href="http://www.theguardian.com/world/2013/sep/05/nsa-gchq-encryption-codes-security"&gt;lot&lt;/a&gt;
of
&lt;a href="https://www.nytimes.com/2013/09/10/business/the-border-is-a-back-door-for-us-device-searches.html?hp&amp;amp;_r=0&amp;amp;pagewanted=all"&gt;news&lt;/a&gt;
recently about some downright &lt;a href="https://www.propublica.org/special/no-warrant-no-problem-how-the-government-can-still-get-your-digital-data"&gt;orwellian
surveillance&lt;/a&gt;
executed
&lt;a href="http://www.theguardian.com/world/2013/sep/09/nsa-spying-brazil-oil-petrobras"&gt;across&lt;/a&gt;
the
&lt;a href="http://www.spiegel.de/international/world/privacy-scandal-nsa-can-spy-on-smart-phone-data-a-920971.html"&gt;globe&lt;/a&gt;
by &lt;a href="http://www.nsa.gov/"&gt;my own government&lt;/a&gt; with the &lt;a href="http://www.masslive.com/politics/index.ssf/2013/06/codename_prism_secret_program_data_mining.html"&gt;assistance of
major American
corporations&lt;/a&gt;.
The scope is huge, and the implications are depressing. It's scary and
frustrating for anyone who cares about civil society, freedom of speech,
cultural autonomy, or data sovereignty.&lt;/p&gt;
&lt;p&gt;As bad as the situation is, though, there are groups like
&lt;a href="https://riseup.net"&gt;Riseup&lt;/a&gt; and &lt;a href="https://mayfirst.org"&gt;May First/People
Link&lt;/a&gt; who actively resist the data dragnet.&lt;/p&gt;
&lt;p&gt;The good birds at &lt;a href="https://riseup.net/"&gt;Riseup&lt;/a&gt; have been tireless
advocates for information autonomy for people and groups working for
liberatory social change for years. They have provided (and continue to
provide) impressive, well-administered infrastructure using free
software to help further these goals, and they have a &lt;a href="https://www.riseup.net/riseup-and-government-faq"&gt;strong political
committment&lt;/a&gt; to making
a better world for all of us and to resisting strongarm attempts to turn
over sensitive data. And they provide all this expertise and
infrastructure and support on a crazy shoestring of a budget.&lt;/p&gt;
&lt;p&gt;So if the news has got you down, or frustrated, or upset, and you want
to do something to help improve the situation, you could do a lot worse
than &lt;a href="http://www.indiegogo.com/projects/fight-the-nsa-save-privacy-help-riseup/x/4408849"&gt;sending some much-needed funds to help Riseup maintain an
expanding
infrastructure&lt;/a&gt;.
This fundraising campaign will only last a few more days, so give now if
you can!&lt;/p&gt;
&lt;p&gt;(note: i have worked with some of the riseup birds in the past, and hope
to continue to do so in the future. I consider it critically important
to have them as active allies in our collective work toward a better
world, which is why i'm doing the unusual thing of asking for donations
for them on my blog.)&lt;/p&gt;</content><category term="misc"/></entry><entry><title>gpg --ask-cert-level considered harmful</title><link href="https://dkg.fifthhorseman.net/blog/gpg-ask-cert-level-considered-harmful.html" rel="alternate"/><published>2013-05-20T07:21:00-04:00</published><updated>2013-05-20T07:21:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2013-05-20:/blog/gpg-ask-cert-level-considered-harmful.html</id><summary type="html">&lt;p&gt;Occasionally, someone asks me whether we should encourage use of the
&lt;code&gt;--ask-cert-level&lt;/code&gt; option when certifying OpenPGP keys with &lt;code&gt;gpg&lt;/code&gt;. I see
no good reason to use this option, and i think we should discourage
people from trying to use it. I don't think there is a satisfactory
answer to the …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Occasionally, someone asks me whether we should encourage use of the
&lt;code&gt;--ask-cert-level&lt;/code&gt; option when certifying OpenPGP keys with &lt;code&gt;gpg&lt;/code&gt;. I see
no good reason to use this option, and i think we should discourage
people from trying to use it. I don't think there is a satisfactory
answer to the question "how will specifying the level of identity
certification concretely benefit anyone involved?", and i don't see why
we should want one.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;gpg&lt;/code&gt; gets it absolutely right by not asking users this question by
default. People should not be enabling this option.&lt;/p&gt;
&lt;p&gt;Some background: &lt;code&gt;gpg&lt;/code&gt;'s &lt;code&gt;--ask-cert-level&lt;/code&gt; option allows the user who
is making an OpenPGP identity certification to indicate just how sure
they are of the identity they are certifying. The user's choice is then
mapped into four levels of OpenPGP certification of a User ID and
Public-Key packet, which i'll refer to by &lt;a href="https://tools.ietf.org/html/rfc4880#page-20"&gt;their signature type
identifiers in the OpenPGP
spec&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;dl&gt;
&lt;dt&gt;0x10: Generic certification&lt;/dt&gt;
&lt;dd&gt;The issuer of this certification does not make any particular
assertion as to how well the certifier has checked that the owner
of the key is in fact the person described by the User ID.&lt;/dd&gt;
&lt;dt&gt;0x11: Persona certification&lt;/dt&gt;
&lt;dd&gt;The issuer of this certification has not done any verification of
the claim that the owner of this key is the User ID specified.&lt;/dd&gt;
&lt;dt&gt;0x12: Casual certification&lt;/dt&gt;
&lt;dd&gt;The issuer of this certification has done some casual verification
of the claim of identity.&lt;/dd&gt;
&lt;dt&gt;0x13: Positive certification&lt;/dt&gt;
&lt;dd&gt;The issuer of this certification has done substantial verification
of the claim of identity.&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;&lt;p&gt;
Most OpenPGP implementations make their "key signatures" as 0x10
certifications. Some implementations can issue 0x11-0x13
certifications, but &lt;em&gt;few differentiate between the types&lt;/em&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;By default (if &lt;code&gt;--ask-cert-level&lt;/code&gt; is not supplied), &lt;code&gt;gpg&lt;/code&gt; issues
certificates ("signs keys") using 0x10 (generic) certifications, with
the exception of self-sigs, which are made as type 0x13 (positive).&lt;/p&gt;
&lt;p&gt;When interpreting certifications, &lt;code&gt;gpg&lt;/code&gt; does distinguish between
different certifications in one particular way: 0x11 (persona)
certifications are ignored; other certifications are not. (users can
change this cutoff with the &lt;code&gt;--min-cert-level&lt;/code&gt; option, but it's not
clear why they would want to do so).&lt;/p&gt;
&lt;p&gt;So there is no functional gain in declaring the difference between a
"normal" certification and a "positive" one, even if there were a
well-defined standard by which to assess the difference between the
"generic" and "casual" or "positive" levels; and if you're going to make
a "persona" certification, you might as well not make one at all.&lt;/p&gt;
&lt;p&gt;And it gets worse: the problem is not just that such an indication is
functionally useless; encouraging people to make these kind of
assertions actively encourages leaks of a more-detailed social graph
than just encouraging everyone to use the default blanket
0x13-for-self-sigs, 0x10-for-everyone-else policy.&lt;/p&gt;
&lt;p&gt;A richer public social graph means more data that can feed the ravenous
and growing appetite of the advertising-and-surveillance regimes. i find
these regimes troubling. I admit that people often leak much more
information than this indication of "how well do you know X" via tools
like Facebook, but that's no excuse to encourage them to leak still more
or to acclimatize people to the idea that the details of their personal
relationships should by default be public knowledge.&lt;/p&gt;
&lt;p&gt;Lastly, the more we keep the OpenPGP network of identity certifications
(a.k.a. the "web of trust") simple, the easier it is to make sensible
and comprehensible and predictable inferences from the network about
whether a key really does belong to a given user. Minimizing the
complexity and difficulty of deciding to make a certification helps
people streamline their signing processes and reduces the amount of
cognitive overhead people spend just building the network in the first
place.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/openpgp"&gt;openpgp&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>OpenPGP User ID Comments considered harmful</title><link href="https://dkg.fifthhorseman.net/blog/openpgp-user-id-comments-considered-harmful.html" rel="alternate"/><published>2013-05-15T02:40:00-04:00</published><updated>2013-05-15T02:40:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2013-05-15:/blog/openpgp-user-id-comments-considered-harmful.html</id><summary type="html">&lt;p&gt;Most OpenPGP User IDs look like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Jane&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Q&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;Public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;jane&lt;/span&gt;&lt;span class="nv"&gt;@example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;This is clean, clear, and unambiguous.&lt;/p&gt;
&lt;p&gt;However, some tools (&lt;code&gt;gpg&lt;/code&gt;, &lt;code&gt;enigmail&lt;/code&gt; among others) ask the user to
provide a "Comment:" field when they are choosing a new User ID (e.g.
when making a new key). &lt;strong&gt;&lt;em&gt;These …&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;Most OpenPGP User IDs look like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Jane&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Q&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;Public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;jane&lt;/span&gt;&lt;span class="nv"&gt;@example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;This is clean, clear, and unambiguous.&lt;/p&gt;
&lt;p&gt;However, some tools (&lt;code&gt;gpg&lt;/code&gt;, &lt;code&gt;enigmail&lt;/code&gt; among others) ask the user to
provide a "Comment:" field when they are choosing a new User ID (e.g.
when making a new key). &lt;strong&gt;&lt;em&gt;These UI prompts are evil&lt;/em&gt;&lt;/strong&gt;. The savvy user
knows to avoid entering anything in this field, so that they can end up
with a User ID like the one above. The user who provides something here
(perhaps even something inconsequential like "I like strawberries", due
to not being sure what should go in this little box) will instead end up
with a User ID like:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Jane&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Q&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;Public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;I&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;like&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;strawberries&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;jane&lt;/span&gt;&lt;span class="nv"&gt;@example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;This is bad. This means that Jane is asking the people who certify her
key+userid to certify whether she actually likes strawberries (how could
they know? what if she changes her mind? should they revoke their
certifications?) and anywhere that she is referred to by name will
include this mention of strawberries. This is not Jane's identity, and
it doesn't belong in &lt;a href="https://tools.ietf.org/html/rfc4880#section-5.11"&gt;an OpenPGP User ID
packet&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Furthermore, since User IDs are atomic, if Jane wants to change the
comment field (but leave her name and e-mail address the same), she will
instead need to create a new User ID, publish it, get everyone who has
certified her old key+userid to certify the key+newuserid, and then
revoke the old one.&lt;/p&gt;
&lt;p&gt;It is difficult already to help people understand and participate in the
certification network that forms that backbone of OpenPGP's so-called
"web of trust". These bogus comment fields make an already-difficult
task harder. And all because of strawberries!&lt;/p&gt;
&lt;p&gt;Tools like &lt;code&gt;enigmail&lt;/code&gt; and &lt;code&gt;gpg&lt;/code&gt; &lt;strong&gt;&lt;em&gt;should not expose the "Comment:"
field to users who are generating keys or choosing new User IDs&lt;/em&gt;&lt;/strong&gt;. If
they feel it absolutely must be present for some weird corner case that
0.1% of their users will have, they could require that the user enters
some sort of "expert mode" before prompting the user to do something
that is likely to be a mistake.&lt;/p&gt;
&lt;p&gt;There is almost no legitimate reason for anyone to use this field. Let's
go through some examples of this people use, taken from some examples i
have lying around (identifying marks have been changed to protect the
innocent who were duped by this bad UI choice, but you can probably find
them on &lt;a href="http://pool.sks-keyservers.net/"&gt;the public keyserver network&lt;/a&gt;
if you want to hunt around):&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;domain repetition&lt;/dt&gt;
&lt;dd&gt;
&lt;p&gt;&lt;code&gt;John Q. Public (Debian) &amp;lt;johnqpublic@debian.org&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;We know you're with debian already from the &lt;code&gt;@debian.org&lt;/code&gt; address.
If this is in contrast to your other address
(&lt;code&gt;johnqpublic@example.org&lt;/code&gt;) so that people know where to send you
debian-related e-mail, this is still not necessary.&lt;/p&gt;
&lt;p&gt;&lt;p&gt;
Lest you think i'm just calling out debian developers, people with
&lt;code&gt;@ubuntu.com&lt;/code&gt; addresses and &lt;code&gt;(Ubuntu)&lt;/code&gt; comments (as well as
&lt;code&gt;@example.edu&lt;/code&gt; addresses and &lt;code&gt;(Example University)&lt;/code&gt; comments and
&lt;code&gt;@example.com&lt;/code&gt; addresses and &lt;code&gt;(Example Corp)&lt;/code&gt; comments) are out
there too.&lt;/p&gt;
&lt;/dd&gt;
&lt;dt&gt;nicknames already evident&lt;/dt&gt;
&lt;dd&gt;
&lt;p&gt;&lt;code&gt;John Q. Public (Johnny) &amp;lt;johnqpublic@example.net&amp;gt;&lt;/code&gt;&lt;br&gt;
&lt;code&gt;John Q. Public (wackydude) &amp;lt;wackydude@example.net&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Again, the information these comments are providing offers no clear
disambiguation from the info already contained in the name and
e-mail address, and just muddies the water about what the people who
certify this identity should actually be trying to verify before
they make their certification.&lt;/p&gt;
&lt;/dd&gt;
&lt;dt&gt;"Work"&lt;/dt&gt;
&lt;dd&gt;
&lt;p&gt;&lt;code&gt;John Q. Public (Work) &amp;lt;johnqpublic@example.com&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;if John's correspondents know that he works for Example Corp, then
"Work" isn't helpful to them, because they already know this as the
address that they're writing to him with. If they don't know that,
then they probably aren't writing to him at work, so they don't need
this comment either. The same problem appears (for example) with
literal comments of &lt;code&gt;(School)&lt;/code&gt; next to their &lt;code&gt;@example.edu&lt;/code&gt; address.&lt;/p&gt;
&lt;/dd&gt;
&lt;dt&gt;This is my nth try at this crazy system!&lt;/dt&gt;
&lt;dd&gt;
&lt;p&gt;&lt;code&gt;John Q. Public (This is my second key) &amp;lt;johnqpublic@example.com&amp;gt;&lt;/code&gt;&lt;br&gt;
&lt;code&gt;John Q. Public (This is my primary key) &amp;lt;johnqpublic@example.com&amp;gt;&lt;/code&gt;&lt;br&gt;
&lt;code&gt;John Q. Public (No wait really use this one) &amp;lt;johnqpublic@example.com&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;OpenPGP is confusing, and it can be tricky to get it right. We all
know :) This is still not part of John's identity. If you want to
designate a key as your preferred key, keep it up-to-date, get
people to certify it, and revoke or expire your old keys. People who
care can look at the timestamps on your keys and tell which ones are
the most recent ones. You do have a revocation certificate for your
key handy just in case you lose it, right?&lt;/p&gt;
&lt;/dd&gt;
&lt;dt&gt;Don't use this key&lt;/dt&gt;
&lt;dd&gt;
&lt;p&gt;&lt;code&gt;John Q. Public (Old key, do not use) &amp;lt;johnqpublic@example.com&amp;gt;&lt;/code&gt;&lt;br&gt;
&lt;code&gt;John Q. Public (Please only use this through September 2004) &amp;lt;johnqpublic@example.com&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;This kind of sentiment is better expressed by &lt;a href="https://tools.ietf.org/html/rfc4880#page-21"&gt;revoking the key in
question&lt;/a&gt; or setting an
expiration time &lt;a href="https://tools.ietf.org/html/rfc4880#section-5.2.3.6"&gt;on the
key&lt;/a&gt; or &lt;a href="https://tools.ietf.org/html/rfc4880#section-5.2.3.10"&gt;User
ID self-sig&lt;/a&gt;
directly. This sentiment is not part of John's identity, and
shouldn't be included as though it were.&lt;/p&gt;
&lt;/dd&gt;
&lt;dt&gt;"none"&lt;/dt&gt;
&lt;dd&gt;
&lt;p&gt;&lt;code&gt;John Q. Public (none) &amp;lt;johnqpublic@example.com&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;sigh. This is clearly someone getting mixed up by the UI.&lt;/p&gt;
&lt;/dd&gt;
&lt;dt&gt;I use strong crypto!&lt;/dt&gt;
&lt;dd&gt;
&lt;p&gt;&lt;code&gt;John Q. Public (3092 bits of RSA) &amp;lt;johnqpublic@example.com&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;This comment refers to the strength of the key material, or the
algorithms preferred by the user. Since the User ID is associated
with the key material already, people who care about this
information can get it from the key directly. This is also not part
of the user's actual identity.&lt;/p&gt;
&lt;/dd&gt;
&lt;dt&gt;"no comment"&lt;/dt&gt;
&lt;dd&gt;
&lt;p&gt;&lt;code&gt;John Q. Public (no comment) &amp;lt;johnqpublic@example.com&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;This is actually not uncommon (some keyservers reply "too many
matches!"). It shows that the user is witty and can think on their
feet (at least once), but it is still not part of the user's
identity.&lt;/p&gt;
&lt;/dd&gt;
&lt;dt&gt;"offline long-term identity key"&lt;/dt&gt;
&lt;dd&gt;
&lt;p&gt;This particular comment shows up in alarming numbers on the
keyservers:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;John&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Q&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;Public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;offline&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;long&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;term&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;identity&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;johnqpublic&lt;/span&gt;&lt;span class="nv"&gt;@example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Again, this is not a part of the user's identity -- it's a statement
about how the user manages their key. If a third party wants to
certify this, presumably they need to verify it. How would they
decide whether this is true or not? It seems like it would make it
more difficult to get certifications from people who are intent on
actually verifying the User ID.&lt;/p&gt;
&lt;p&gt;It's also (potentially) wrong: An OpenPGP User ID is bound directly
to the primary key, but it is implicitly also bound to any subkeys
that are associated with the primary key. if the subkeys are online,
but the primary key is offline, is this comment correct? What if the
primary key later adds a subkey that is &lt;em&gt;not&lt;/em&gt; offline or long-term
(e.g. they want to do frequent key rollover for an online subkey)?
Do they need to revoke their User ID for this?&lt;/p&gt;
&lt;p&gt;And where it's not wrong, it's redundant. An OpenPGP certificate is
by definition a statement about long-term identity that is bound to
a key in the first place. Why include any of this extra verbiage,
which is only likely to add to the confusion?&lt;/p&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;But wait (i hear you say)! I have a special case that actually is a
legitimate use of the comment field that cannot be expressed in OpenPGP
in any other way!&lt;/p&gt;
&lt;p&gt;I'm sure that such cases exist. I've even seen one or two of them. The
fact that one or two cases exist does not excuse the fact that that
overwhelming majority of these comments in OpenPGP User IDs are a
mistake, caused only by bad UI design that prompts people to put
something (anything!) in the empty box (or on the command prompt,
depending on your preference).&lt;/p&gt;
&lt;p&gt;And this mistake is one of the thousand papercuts that inhibits the
robust growth of the OpenPGP certification network that some people call
the "web of trust". Let's avoid them so we can focus on the other 999
papercuts.&lt;/p&gt;
&lt;p&gt;Please don't use comments in your OpenPGP User ID. And if you make a
user interface for OpenPGP that prompts the user to decide on a new User
ID, please &lt;em&gt;don't&lt;/em&gt; include a prompt for "Comment" unless the user has
already certified that they are really and truly a special special
snowflake.&lt;/p&gt;
&lt;p&gt;Thanks!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;UPDATED 2015-02-11:&lt;/strong&gt; added "descriptions of key use" example, since
that appears to be more common.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/openpgp"&gt;openpgp&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/ui"&gt;ui&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>It's Advertising all the way down</title><link href="https://dkg.fifthhorseman.net/blog/its-advertising-all-the-way-down.html" rel="alternate"/><published>2013-05-03T17:21:00-04:00</published><updated>2013-05-03T17:21:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2013-05-03:/blog/its-advertising-all-the-way-down.html</id><summary type="html">&lt;p&gt;Today i saw a billboard on the side of a bus. It was from a cable TV
channel, bragging about how well-connected their viewers are (presumably
on the internet, social media, blogs, etc).&lt;/p&gt;
&lt;p&gt;It shows a smiling, attractive man, with text next to him saying
something like "I told 9000 …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Today i saw a billboard on the side of a bus. It was from a cable TV
channel, bragging about how well-connected their viewers are (presumably
on the internet, social media, blogs, etc).&lt;/p&gt;
&lt;p&gt;It shows a smiling, attractive man, with text next to him saying
something like "I told 9000 people what smartphone to buy".&lt;/p&gt;
&lt;p&gt;What happened here?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A TV channel bought an ad on the side of a bus&lt;/li&gt;
&lt;li&gt;trying to demonstrate to other advertisers&lt;/li&gt;
&lt;li&gt;about how good their viewers are at providing advertising-by-proxy&lt;/li&gt;
&lt;li&gt;on services that themselves are mostly advertising platforms&lt;/li&gt;
&lt;li&gt;to sell devices that are themselves often used for advertising
    delivery.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And almost all of these steps count as positive economic activity when
we try to measure whether the US economy is healthy.&lt;/p&gt;
&lt;p&gt;I am depressed by this tremendous waste of time and effort.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;:
&lt;a href="https://debian-administration.org/tag/advertising"&gt;advertising&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Make a Woolly Mammoth (thanks, inkscape!)</title><link href="https://dkg.fifthhorseman.net/blog/make-a-woolly-mammoth-thanks-inkscape.html" rel="alternate"/><published>2013-02-28T00:15:00-05:00</published><updated>2013-02-28T00:15:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2013-02-28:/blog/make-a-woolly-mammoth-thanks-inkscape.html</id><summary type="html">&lt;p&gt;I feel like i've done a lot of blogging recently about failing to do
things with proprietary software. That's annoying.&lt;/p&gt;
&lt;p&gt;This post is about something i made successfully with free software (and
some non-software crafting): I made a Woolly Mammoth for my
nephew!&lt;img&gt;&lt;/img&gt;&lt;/p&gt;
&lt;p&gt;I documented &lt;a href="https://dkg.fifthhorseman.net/woolly/"&gt;the pattern (with pictures!) that …&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;I feel like i've done a lot of blogging recently about failing to do
things with proprietary software. That's annoying.&lt;/p&gt;
&lt;p&gt;This post is about something i made successfully with free software (and
some non-software crafting): I made a Woolly Mammoth for my
nephew!&lt;img&gt;&lt;/img&gt;&lt;/p&gt;
&lt;p&gt;I documented &lt;a href="https://dkg.fifthhorseman.net/woolly/"&gt;the pattern (with pictures!) that i came up
with&lt;/a&gt; using
&lt;a href="http://inkscape.org/"&gt;Inkscape&lt;/a&gt; (and used markdown, pandoc, emacs,
pdftk, and other free software in the process). i've also published the
source for the pattern via git if you want to modify it:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;git clone git://lair.fifthhorseman.net/~dkg/woolly
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Writing up the documentation makes me realize that i don't know of any
software tools designed specifically for facilitating fabric/craft
construction. Some interesting software ideas:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Make 3-D models showing the partly assembled pieces, derived from
    the flat pattern. Maybe something like
    &lt;a href="http://blender.org/"&gt;blender&lt;/a&gt; would be good for this?&lt;/li&gt;
&lt;li&gt;Take a 3D-modeled form and produce some candidate patterns for
    cutting and sewing? This seems like it is an interesting theoretical
    problem: given a set of (marked?) 3D surfaces and a set of
    approximation constraints, have the tool come up with a reasonable
    set of 2D patterns that could be cut and assembled using a set of
    standard operations into something close to the 3D shape.&lt;/li&gt;
&lt;li&gt;a "pattern lint checker" (maybe an inkscape extension?) that would
    let you mark certain segments of an SVG as related to other segments
    (i.e. the two sides of a seam), and could give you warnings when one
    side was longer than the other (within some level of tolerance)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Anyone have any ideas?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;:
&lt;a href="https://debian-administration.org/tag/brainstorming"&gt;brainstorming&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/crafting"&gt;crafting&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/inkscape"&gt;inkscape&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>proprietary software activation fail</title><link href="https://dkg.fifthhorseman.net/blog/proprietary-software-activation-fail.html" rel="alternate"/><published>2013-02-01T16:25:00-05:00</published><updated>2013-02-01T16:25:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2013-02-01:/blog/proprietary-software-activation-fail.html</id><summary type="html">&lt;p&gt;i have a colleague who is forced by work situations to use Windows.
Somehow, I'm the idiot\^W\^W\^W\^W\^Wfriendly guy who gets tapped to fix
it when things break.&lt;/p&gt;
&lt;p&gt;Well, this time, the power supply broke. As in, dead, no lights, no fan,
no nothing. No problem …&lt;/p&gt;</summary><content type="html">&lt;p&gt;i have a colleague who is forced by work situations to use Windows.
Somehow, I'm the idiot\^W\^W\^W\^W\^Wfriendly guy who gets tapped to fix
it when things break.&lt;/p&gt;
&lt;p&gt;Well, this time, the power supply broke. As in, dead, no lights, no fan,
no nothing. No problem, though, the disk is still good, and i've got a
spare machine lying around; and the spare is actually superior hardware
to the old machine so it'll be an upgrade in addition to a fix. Nice! So
i transplant the disk and fire up the new chassis.&lt;/p&gt;
&lt;p&gt;But WinXP fails to boot with a lovely "0x0000007b" BSOD. The &lt;a href="http://support.microsoft.com/kb/324103"&gt;internet
tells me&lt;/a&gt; that this might mean
it can't find its own disk. OK, pop into the new chassis' BIOS, tell it
to run the SATA ports in "legacy IDE" mode, and try again.&lt;/p&gt;
&lt;p&gt;Now we get a "0x0000007e" BSOD. Some &lt;a href="http://support.microsoft.com/kb/330182"&gt;digging on the
'net&lt;/a&gt; makes me think it's now
complaining now about the graphics driver. Hmm. Well, i figure i can
probably work around that by installing new drivers from Safe Mode. So i
reboot into Safe Mode.&lt;/p&gt;
&lt;p&gt;Success! It boots to the login screen in Safe Mode. And, mirabile dictu,
i happen to know the Administrator password. I put it in, and get a
message that this Windows installation isn't "activated" yet --
presumably because the hardware has changed out from under it. And by
the way, i'm not allowed to log in via safe mode until it's activated.
So please reboot to "normal" Windows and activate it first.&lt;/p&gt;
&lt;p&gt;Except, of course, the whole reason i'm booting into safe mode was
because normal Windows gives a BSOD. Grrrr. Who thought up this
particular lovely catch-22?&lt;/p&gt;
&lt;p&gt;OK, change tactics. Scavenging the scrap bin turns up a machine with a
failed mainboard, but a power supply with all the right leads. It's
rated for about 80W less than the old machine's failed supply, but i
figure if i rip out the DVD-burner and the floppy drive maybe it will
hold. Oh, and the replacement power supply doesn't physically fit the
old chassis, but it hangs halfway out the back and sort of rattles
around a bit. I sacrifice the rest of the scrap machine, rip out its
power supply, stuff the power supply into the old chassis, swap the
original disk back in, and ... it boots successfully, finally.&lt;/p&gt;
&lt;p&gt;That was the shorter version of the story :P&lt;/p&gt;
&lt;p&gt;So now my colleague has a horrible mess of a frankencomputer which is
more likely to fail again in the future, instead of a nice shiny
upgrade. Why? Because Microsoft's need to control the flow of software
takes priority over the needs of their users.&lt;/p&gt;
&lt;p&gt;This is what you get when you let Marketing and BizDev drive your
technical decisions.&lt;/p&gt;
&lt;p&gt;Do i still need to explain why i prefer free software?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/griping"&gt;griping&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/windows"&gt;windows&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>visualizing MIME structure</title><link href="https://dkg.fifthhorseman.net/blog/visualizing-mime-structure.html" rel="alternate"/><published>2013-01-29T16:16:00-05:00</published><updated>2013-01-29T16:16:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2013-01-29:/blog/visualizing-mime-structure.html</id><summary type="html">&lt;p&gt;Better debugging tools can help us understand what's going on with MIME
messages. A python scrap i wrote a couple years ago named
&lt;code&gt;printmimestructure&lt;/code&gt; has been very useful to me, so i thought i'd share
it.&lt;/p&gt;
&lt;p&gt;It reads a message from stdin, and prints a visualisation of its
structure, like …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Better debugging tools can help us understand what's going on with MIME
messages. A python scrap i wrote a couple years ago named
&lt;code&gt;printmimestructure&lt;/code&gt; has been very useful to me, so i thought i'd share
it.&lt;/p&gt;
&lt;p&gt;It reads a message from stdin, and prints a visualisation of its
structure, like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;alice&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kr"&gt;print&lt;/span&gt;&lt;span class="n"&gt;mimestructure&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;Maildir&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;1269025522.&lt;/span&gt;&lt;span class="n"&gt;M338697P12023&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;monkey&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;S&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;6459&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;W&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;6963&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Sa&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;└┬╴&lt;/span&gt;&lt;span class="n"&gt;multipart&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;signed&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;6546&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bytes&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;├─╴&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;plain&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;inline&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;895&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bytes&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;└─╴&lt;/span&gt;&lt;span class="n"&gt;application&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pgp&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;signature&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;inline&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;[&lt;/span&gt;&lt;span class="n"&gt;signature&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="nb"&gt;asc&lt;/span&gt;&lt;span class="err"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;836&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bytes0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;alice&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;It is being published in the &lt;a href="http://notmuchmail.org/"&gt;notmuch&lt;/a&gt;
repository, under &lt;code&gt;devel/&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;git clone git://notmuchmail.org/git/notmuchls -l notmuch/devel/printmimestructure
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;It feels silly to treat this \~30 line script as its own project, but i
don't know of another simple tool that does this. If you know of one, or
of something similar, i'd love to hear about it in the comments (or by
sending me e-mail if you prefer).&lt;/p&gt;
&lt;p&gt;If it's useful for others, I'd be happy to contribute
&lt;code&gt;printmimestructure&lt;/code&gt; to a project of like-minded tools. Does such a
project exist? Or if people think it would be handy to have in debian, i
can also package it up, though that feels like it might be overkill.&lt;/p&gt;
&lt;p&gt;and oh yeah, as always: bug reports, suggestions, complaints, and
patches are welcome :)&lt;/p&gt;
&lt;p&gt;(2013-10-09: updated to note change of location of the script, thanks to
the notmuch team for adopting it)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/debugging"&gt;debugging&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/mime"&gt;mime&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/python"&gt;python&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>in memory of Aaron Swartz</title><link href="https://dkg.fifthhorseman.net/blog/in-memory-of-aaron-swartz.html" rel="alternate"/><published>2013-01-15T08:35:00-05:00</published><updated>2013-01-15T08:35:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2013-01-15:/blog/in-memory-of-aaron-swartz.html</id><summary type="html">&lt;p&gt;I was upset to learn about &lt;a href="http://aaronsw.com/"&gt;Aaron Swartz&lt;/a&gt;'s &lt;a href="http://lessig.tumblr.com/post/40347463044/prosecutor-as-bully"&gt;death
last
week&lt;/a&gt;. I
continue to be upset about his loss, and about our loss. He didn't just
show promise of great things to come in the future -- he had already
done more work for the public good than many of …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I was upset to learn about &lt;a href="http://aaronsw.com/"&gt;Aaron Swartz&lt;/a&gt;'s &lt;a href="http://lessig.tumblr.com/post/40347463044/prosecutor-as-bully"&gt;death
last
week&lt;/a&gt;. I
continue to be upset about his loss, and about our loss. He didn't just
show promise of great things to come in the future -- he had already
done more work for the public good than many of us will ever do. I'd
only met him IRL a couple times, but (like many others) i had
encountered him on the 'net in many places. He was a good person,
someone i didn't need to always agree with to respect.&lt;/p&gt;
&lt;p&gt;I read Russ Allbery's &lt;a href="http://www.eyrie.org/~eagle/journal/2013-01/013.html"&gt;posts
about&lt;/a&gt; &lt;a href="http://www.eyrie.org/~eagle/journal/2013-01/014.html"&gt;Aaron and
"slacktivism"&lt;/a&gt;
with much appreciation. I had been ambivalent about signing &lt;a href="https://petitions.whitehouse.gov/petition/remove-united-states-district-attorney-carmen-ortiz-office-overreach-case-aaron-swartz/RQNrG1Ck"&gt;the
whitehouse.gov petition asking for the removal of the prosecutor for
overreach&lt;/a&gt;,
because I generally distrust the effectiveness of online petitions (and
offline petitions, for that matter). But Russ's analysis convinced me to
go ahead and sign it. The petition is concrete, clear (despite wanting a
grammatical proofread), and actionable.&lt;/p&gt;
&lt;p&gt;For people willing to go beyond petition signing to civil disobedience,
&lt;a href="http://aaronsw.archiveteam.org/"&gt;The Aaron Swartz Memorial JSTOR
Liberator&lt;/a&gt; is an option. It makes it
straightforward to potentially violate the onerous JSTOR terms of
service by re-publishing a public-domain article from
&lt;a href="http://jstor.org"&gt;JSTOR&lt;/a&gt; to &lt;a href="http://archive.org/"&gt;archive.org&lt;/a&gt;, where
it will be accessible to anyone directly.&lt;/p&gt;
&lt;p&gt;As someone who builds and maintains information/communications
infrastructure, i have very mixed feelings about most online civil
disobedience, since it often takes the form of a Distributed Denial of
Service (DDoS) attack of some sort. DDoS attacks of public services are
notoriously difficult to defend against without having huge resources to
throw at the problem, so encouraging participation in a DDoS often feels
a little bit like handing out cans of gasoline when you know that
&lt;em&gt;everyone&lt;/em&gt; is living in a house of straw.&lt;/p&gt;
&lt;p&gt;However, the JSTOR Liberator is not a DDoS at all -- it's simply a
facilitation of people breaking the JSTOR Terms of Service (ToS), some
of the same terms that Aaron was facing charges for violating. So it is
a well-targeted way to demonstrate that the prosecutions were
overreaching.&lt;/p&gt;
&lt;p&gt;I wanted to take issue with one of Russ' statements, though. In &lt;a href="http://www.eyrie.org/~eagle/journal/2013-01/014.html"&gt;his
second post about the
situation&lt;/a&gt;, Russ
wrote:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Social activism and political disobedience are important and often
valuable things, but performing your social activism using other
people's stuff is just rude. I think it can be a forgivable rudeness;
people can get caught up in the moment and not realize what they're
doing. But it's still rude, and it's still not the way to go about
civil disobedience.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;While i generally agree with Russ' thoughtful consideration of consent,
I have to take issue with this elevation of some sort of hyper-extended
property right over the moral agency that drives civil disobedience.&lt;/p&gt;
&lt;p&gt;To use someone else's property for the sake of a just cause without
damaging the property or depriving the owner of its use is not
"forgivable rudeness" -- it's forgivable, laudable even, because it is
just. And the person using the property doesn't need to be "caught up in
the moment and not realize what they're doing" for it to be acceptable.&lt;/p&gt;
&lt;p&gt;Civil disobedience often involves putting some level of inconvenience or
discomfort on other people, including innocent people. It might be the
friends and family of the activist who have to deal with the jail time;
it might be the drivers stuck in a traffic jam caused by a
demonstration; it might be the people forced to shop elsewhere because
the store's doors are barricaded by protestors.&lt;/p&gt;
&lt;p&gt;All of these people could be troubled by the civil disobedience more
than MIT's network users and admins were troubled by Aaron's protest,
and that doesn't make the protests described worse or "not the way to go
about civil disobedience." The trouble highlights a more significant
injustice, and in its troubling way does what it can to help right it.&lt;/p&gt;
&lt;p&gt;Aaron was a troublemaker, and a good one. He will be missed.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/aaronsw"&gt;aaronsw&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>universally accessible storage for the wary user</title><link href="https://dkg.fifthhorseman.net/blog/universally-accessible-storage-for-the-wary-user.html" rel="alternate"/><published>2013-01-09T01:12:00-05:00</published><updated>2013-01-09T01:12:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2013-01-09:/blog/universally-accessible-storage-for-the-wary-user.html</id><summary type="html">&lt;p&gt;A friend wrote me a simple question today. My response turned out to be
longer than i expected, but i hope it's useful (and maybe other people
will have better suggestions) so i thought i'd share it here too:&lt;/p&gt;
&lt;p&gt;Angela Starita wrote:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I'd like to save my work in a …&lt;/p&gt;&lt;/blockquote&gt;</summary><content type="html">&lt;p&gt;A friend wrote me a simple question today. My response turned out to be
longer than i expected, but i hope it's useful (and maybe other people
will have better suggestions) so i thought i'd share it here too:&lt;/p&gt;
&lt;p&gt;Angela Starita wrote:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I'd like to save my work in a location where I can access it from any
computer. I'm wary of using the mechanisms provided by Google and
Apple. Can you suggest another service?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Here's my reply:&lt;/p&gt;
&lt;p&gt;I think you're right to be wary of the big cloud providers, who have a
tendency to inspect your data to profile you, to participate in
arbitrary surveillance regimes, and to try to sell your eyeballs to
advertisers.&lt;/p&gt;
&lt;h3 id="caveat-you-have-to-trust-the-client-machine-too"&gt;Caveat: You have to trust the client machine too&lt;/h3&gt;
&lt;p&gt;But it's also worth remembering that the network service provider is not
the only source of risk. If you really mean "accessing your data from
any computer", that means the computer you're using to access the data
can do whatever it wants with it. That is, you need to trust both the
operator of these "cloud" services, *and* the administrator/operating
system of the client computer you're using to access your data. For
example, if you log into any "secure" account from a terminal in a web
café, that leaves you vulnerable to the admins of the web café (and, in
the rather-common case of sloppily-administered web terminals,
vulnerable to the previous user(s) of the terminal as well).&lt;/p&gt;
&lt;h3 id="option-0-portable-physical-storage"&gt;Option 0: Portable physical storage&lt;/h3&gt;
&lt;p&gt;One way to have your data so that you can access it from "any computer"
is to not rely on the network at all, but rather to carry a
high-capacity MicroSD card (and USB adapter) around with you (you'll
probably want to format the card with a widely-understood filesystem
like FAT32 instead of NTFS or HFS+ or ext4, which are only understood by
some of the major operating systems, but not all).&lt;/p&gt;
&lt;p&gt;Here is some example hardware:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.adafruit.com/products/939"&gt;MicroSD USB adapter (\$5)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.jr.com/pny/pe/PNY_PSDU16G10/"&gt;16GB class 10 MicroSD card
    (\$20)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Almost every computer these days has either a microSD slot or a USB
port, while some computers are not connected to the network. This also
means that you don't have to rely on someone else to manage servers that
keep your data available all the time.&lt;/p&gt;
&lt;p&gt;Note that going the microSD route doesn't remove the caveat about
needing to trust the client workstation you're using, and it has another
consideration:&lt;/p&gt;
&lt;p&gt;You'd be responsible for your own backup in the case of hardware
failure. You're responsible for your own backup in the case of online
storage too, of course -- but the better online companies are probably
better equipped than most of us to deal with hardware failure. OTOH,
they're also susceptible to some data loss scenarios that we aren't as
individual humans (e.g. the company might go bankrupt, or get bought by
a competitor who wants to terminate the service, or have a malicious
employee who decides to take revenge). Backup of a MicroSD card isn't
particularly hard, though: just get a USB stick that's the same size,
and regularly duplicate the contents of the MicroSD card to the USB
stick.&lt;/p&gt;
&lt;p&gt;One last consideration is storage size -- MicroSD cards are currently
limited to 32GB or 64GB. If you have significantly more data than that,
this approach might not be possible, or you might need to switch to a
USB hard disk, which would limit your ability to use the data on
computers that don't have a USB port (such as some smartphones).&lt;/p&gt;
&lt;h3 id="option-1-proprietary-service-providers"&gt;Option 1: Proprietary service providers&lt;/h3&gt;
&lt;p&gt;If you don't think this portable physical storage option is the right
choice for you, here are a couple proprietary service providers who
offer some flavor of "cloud" storage while claiming to not look at the
contents of your data:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wuala.com/"&gt;wuala&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://spideroak.com/"&gt;spideroak&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I'm not particularly happy with either of those, though, in part because
the local client software they want you to run is proprietary, so
there's no way to verify that they are actually unable to access the
contents of your data. But i'd be a lot happier with either wuala or
spideroak than i would be with google drive, dropbox, or iCloud.&lt;/p&gt;
&lt;h3 id="option-2-what-i-really-want"&gt;Option 2: What i really want&lt;/h3&gt;
&lt;p&gt;I'm much more excited about the network-accessible, free-software,
privacy-sensitive network-based storage tool known as &lt;a href="http://git-annex.branchable.com/assistant/"&gt;git-annex
assistant&lt;/a&gt;. The project is
spearheaded by Joey Hess, who is one of the most skilled and thoughtful
software developers i know of.&lt;/p&gt;
&lt;p&gt;"assistant" (and git-annex, from which it derives) has the advantage of
being pretty agnostic about the backend service (many plugins for many
different cloud providers) and allows you to encrypt your data locally
before sending it to the remote provider. This also means you can put
your encrypted data in more than one provider, so that if one of the
providers fails for some reason, you can be relatively sure that you
have another copy available.&lt;/p&gt;
&lt;p&gt;But "assistant" won't be ready for Windows or Android for several months
(builds are available for Linux and Mac OS X now), so i don't know if it
meets the criterion for "accessible from any computer". And, of course,
even with the encryption capabilities, the old caveat about needing to
trust the local client machine still applies.&lt;/p&gt;</content><category term="misc"/></entry><entry><title>libasound2-plugins is a resource hog!</title><link href="https://dkg.fifthhorseman.net/blog/libasound2-plugins-is-a-resource-hog.html" rel="alternate"/><published>2012-12-21T01:50:00-05:00</published><updated>2012-12-21T01:50:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2012-12-21:/blog/libasound2-plugins-is-a-resource-hog.html</id><summary type="html">&lt;p&gt;I run &lt;a href="http://packages.debian.org/mpd"&gt;mpd&lt;/a&gt; on debian on "igor", an
NSLU2 -- a very low-power \~266MHz armel machine, with no FPU and a
scanty 32MiB of RAM. This serves nicely to feed my stereo with music
that is controllable from anywhere on my LAN. When playing music and
talking to a single mpd …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I run &lt;a href="http://packages.debian.org/mpd"&gt;mpd&lt;/a&gt; on debian on "igor", an
NSLU2 -- a very low-power \~266MHz armel machine, with no FPU and a
scanty 32MiB of RAM. This serves nicely to feed my stereo with music
that is controllable from anywhere on my LAN. When playing music and
talking to a single mpd client, the machine is about 50% idle.&lt;/p&gt;
&lt;p&gt;However, during a recent upgrade, something wanted to pull in
&lt;a href="http://packages.debian.org/pulseaudio"&gt;pulseaudio&lt;/a&gt;, which in turn
wanted to pull in
&lt;a href="http://packages.debian.org/libasound2-plugins"&gt;libasound2-plugins&lt;/a&gt;, and
i distractedly (foolishly) let it. With that package installed, after an
mpd restart, the CPU was completely thrashed (100% utilization) and
music only played in stutters of 1 second interrupted by a couple
seconds of silence. igor was unusable for its intended purpose.&lt;/p&gt;
&lt;p&gt;Getting rid of pulseaudio was my first attempt to fix the stuttering,
but the problem remained even after pulse was all gone and mpd was
restarted.&lt;/p&gt;
&lt;p&gt;Then i did a little search of which packages had been freshly installed
in the recent run:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;grep&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39; install .* &amp;lt;none&amp;gt; &amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nb"&gt;log&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dpkg&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;and used that to pick out the offending package.&lt;/p&gt;
&lt;p&gt;After purging libasound2-plugins and restarting mpd, the igor is back in
action.&lt;/p&gt;
&lt;p&gt;Lesson learned: on low-overhead machines, don't allow apt to install
recommends!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;APT::Install-Recommends &amp;quot;0&amp;quot;;&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;apt&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;apt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;conf&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;And it should go without saying, but sometimes i get sloppy: i need to
pay closer attention during an "apt-get dist-upgrade"&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/alsa"&gt;alsa&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/apt"&gt;apt&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/low-power"&gt;low-power&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/mpd"&gt;mpd&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>set default margins for OpenOffice as a sysadmin?</title><link href="https://dkg.fifthhorseman.net/blog/set-default-margins-for-openoffice-as-a-sysadmin.html" rel="alternate"/><published>2012-12-06T17:30:00-05:00</published><updated>2012-12-06T17:30:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2012-12-06:/blog/set-default-margins-for-openoffice-as-a-sysadmin.html</id><summary type="html">&lt;p&gt;I'm maintaining a lab of debian squeeze machines that run OpenOffice.org
(i'm considering upgrading to LibreOffice from squeeze-backports). I'd
like to adjust the default page margins for all users of Writer. Most
instructions i've found &lt;a href="http://wiki.openoffice.org/wiki/Documentation/FAQ/Writer/FormattingPagesAndDocuments/How_can_I_change_the_default_Page_Style_margins,_so_that_when_I_start_a_new_document_the_margins_will_be_1_inch%3F"&gt;suggest ways to do this as a single
user&lt;/a&gt;,
but not how to make …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I'm maintaining a lab of debian squeeze machines that run OpenOffice.org
(i'm considering upgrading to LibreOffice from squeeze-backports). I'd
like to adjust the default page margins for all users of Writer. Most
instructions i've found &lt;a href="http://wiki.openoffice.org/wiki/Documentation/FAQ/Writer/FormattingPagesAndDocuments/How_can_I_change_the_default_Page_Style_margins,_so_that_when_I_start_a_new_document_the_margins_will_be_1_inch%3F"&gt;suggest ways to do this as a single
user&lt;/a&gt;,
but not how to make the change system-wide. I don't want to ask every
user of these machines to do this (and i also don't want to tamper with
each home directory directly -- that's not something i can maintain
reliably).&lt;/p&gt;
&lt;p&gt;Alas, i can find no documentation about how to change the default page
margins system-wide for either Oo.o or LibreOffice. Surely this is
something that can be done without a recompile. What am i missing?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;:
&lt;a href="https://debian-administration.org/tag/configuration"&gt;configuration&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/libreoffice"&gt;libreoffice&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/margins"&gt;margins&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/openoffice.org"&gt;openoffice.org&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/sysadmin"&gt;sysadmin&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/templates"&gt;templates&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Error messages are your friend (postgres is good)</title><link href="https://dkg.fifthhorseman.net/blog/error-messages-are-your-friend-postgres-is-good.html" rel="alternate"/><published>2012-12-04T20:32:00-05:00</published><updated>2012-12-04T20:32:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2012-12-04:/blog/error-messages-are-your-friend-postgres-is-good.html</id><summary type="html">&lt;p&gt;Here is a bit of simple (yet subtly-flawed) sql, which produces
different answers on different database engines:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cat&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sqldrop&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;tab&lt;/span&gt;&lt;span class="n"&gt;le&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kr"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;exists&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;foo&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="n"&gt;create&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;tab&lt;/span&gt;&lt;span class="n"&gt;le&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;foo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="n"&gt;insert&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;foo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;VAL&lt;/span&gt;&lt;span class="n"&gt;UES&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mf"&gt;3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="n"&gt;insert&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;foo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;VAL&lt;/span&gt;&lt;span class="n"&gt;UES …&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;Here is a bit of simple (yet subtly-flawed) sql, which produces
different answers on different database engines:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cat&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sqldrop&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;tab&lt;/span&gt;&lt;span class="n"&gt;le&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kr"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;exists&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;foo&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="n"&gt;create&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;tab&lt;/span&gt;&lt;span class="n"&gt;le&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;foo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="n"&gt;insert&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;foo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;VAL&lt;/span&gt;&lt;span class="n"&gt;UES&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mf"&gt;3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="n"&gt;insert&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;foo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;VAL&lt;/span&gt;&lt;span class="n"&gt;UES&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mf"&gt;5&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="n"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;foo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;group&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sqlite3&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sql50&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sql30&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;psql&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;qtA&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sqlERROR&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;column&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;foo.y&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;must&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;appear&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;GROUP&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;BY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;clause&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;or&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;be&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;used&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;an&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;aggregate&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;functionLINE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;foo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;group&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;               &lt;/span&gt;&lt;span class="o"&gt;^&lt;/span&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;ul&gt;
&lt;li&gt;Clear error reporting and&lt;/li&gt;
&lt;li&gt;an insistence on explicit disambiguation&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;are two of the many reasons postgresql is my database engine of choice.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/errors"&gt;errors&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/postgresql"&gt;postgresql&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/sql"&gt;sql&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>more proprietary workarounds, sigh</title><link href="https://dkg.fifthhorseman.net/blog/more-proprietary-workarounds-sigh.html" rel="alternate"/><published>2012-11-27T08:39:00-05:00</published><updated>2012-11-27T08:39:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2012-11-27:/blog/more-proprietary-workarounds-sigh.html</id><summary type="html">&lt;p&gt;In supporting a labful of Debian GNU/Linux machines with NFS-mounted
home directories, i find some of my users demand a few proprietary
programs. &lt;a href="http://wiki.debian.org/FlashPlayer"&gt;Adobe Flash&lt;/a&gt; is one of
the most demanded, in particular because some popular streaming video
services (like &lt;a href="http://amazon.com/prime"&gt;Amazon Prime&lt;/a&gt; and
&lt;a href="http://hulu.com"&gt;Hulu&lt;/a&gt;) seem to require it.&lt;/p&gt;
&lt;p&gt;I'm …&lt;/p&gt;</summary><content type="html">&lt;p&gt;In supporting a labful of Debian GNU/Linux machines with NFS-mounted
home directories, i find some of my users demand a few proprietary
programs. &lt;a href="http://wiki.debian.org/FlashPlayer"&gt;Adobe Flash&lt;/a&gt; is one of
the most demanded, in particular because some popular streaming video
services (like &lt;a href="http://amazon.com/prime"&gt;Amazon Prime&lt;/a&gt; and
&lt;a href="http://hulu.com"&gt;Hulu&lt;/a&gt;) seem to require it.&lt;/p&gt;
&lt;p&gt;I'm not a fan of proprietary network services, but i'm happy to see that
&lt;a href="http://www.amazon.com/gp/help/customer/display.html/ref=atv_drm_flash_help?nodeId=200256920#playbackerror"&gt;Amazon Prime takes Linux support seriously
enough&lt;/a&gt;
to direct users to &lt;a href="http://helpx.adobe.com/x-productkb/multi/flash-player-11-problems-playing.html"&gt;Adobe's Linux Flash "Protected Content"
troubleshooting
page&lt;/a&gt;
(Amazon Prime's rival NetFlix, by comparison, has an abysmal record on
this platform). Of course, none of this will work on any platform but
i386, since the flash player is proprietary software and its proprietors
have shown no interest in porting it or letting others port it :(&lt;/p&gt;
&lt;p&gt;One of the main issues with proprietary network services is their
inclination to view their customer as their adversary, as evidenced by
various DRM schemes. In two examples, the Flash Player's DRM module
&lt;a href="http://forums.adobe.com/thread/1105464"&gt;appears to arbitrarily break when you use one home directory across
multiple machines&lt;/a&gt;. Also, the
DRM module appears to &lt;a href="http://forums.adobe.com/message/4594136"&gt;depend on
HAL&lt;/a&gt;, which is being deprecated
by most of the common distributions.&lt;/p&gt;
&lt;p&gt;Why bother with this kind of gratuitous breakage? We know that video
streaming can and does work fine without DRM. With modern browsers,
freely-formatted video, and HTML5 video tags, video just works, and it
works under the control of the user, on any platform. But Flash appears
to throw up unnecessary hurdles, requiring not only proprietary code,
but deprecated subsystems and fiddly workarounds to get it functional.&lt;/p&gt;
&lt;p&gt;I'm reminded of &lt;a href="http://wiki.mako.cc/Antifeatures"&gt;Mako's concept of
"antifeatures"&lt;/a&gt; -- how much
engineering time and effort went into making this system actually be
&lt;em&gt;less&lt;/em&gt; stable and reliable than it would have otherwise been? How could
that work have been better-directed?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;:
&lt;a href="https://debian-administration.org/tag/antifeatures"&gt;antifeatures&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/flash"&gt;flash&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/hal"&gt;hal&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/proprietary"&gt;proprietary&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/streaming"&gt;streaming&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>KVM, Windows XP, and Stop Error Code 0x0000007B</title><link href="https://dkg.fifthhorseman.net/blog/kvm-windows-xp-and-stop-error-code-0x0000007b.html" rel="alternate"/><published>2012-05-29T23:49:00-04:00</published><updated>2012-05-29T23:49:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2012-05-29:/blog/kvm-windows-xp-and-stop-error-code-0x0000007b.html</id><summary type="html">&lt;p&gt;i dislike having to run Windows as much as the next free software
developer, but like many sysadmins, i am occasionally asked to maintain
some legacy systems.&lt;/p&gt;
&lt;p&gt;A nice way to keep these systems available (while not having to
physically maintain them) is to put them in a virtual sandbox …&lt;/p&gt;</summary><content type="html">&lt;p&gt;i dislike having to run Windows as much as the next free software
developer, but like many sysadmins, i am occasionally asked to maintain
some legacy systems.&lt;/p&gt;
&lt;p&gt;A nice way to keep these systems available (while not having to
physically maintain them) is to put them in a virtual sandbox using a
tool like kvm. While kvm makes it relatively straightforward to install
WinXP from a CD (as long as you have the proper licensing key), it is
more challenging to transition a pre-existing hardware windows XP
installation into a virtual instance, due to Windows only wanting to
boot to ide chipsets that it remembers being installed to.&lt;/p&gt;
&lt;p&gt;In particular, booting a disk image pulled from a soon-to-be-discarded
physical disk can produce a Blue Screen of Death (BSOD) with the
message:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Stop error code 0x0000007B
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;or&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;(INACCESSABLE_BOOT_DEVICE)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;This seems like it's roughly the equivalent (in a standard debian
GNU/Linux environment) of specifying &lt;code&gt;MODULES=dep&lt;/code&gt; in
&lt;code&gt;/etc/initramfs-tools/initramfs.conf&lt;/code&gt;, and then trying to swap out all
the hardware.&lt;/p&gt;
&lt;p&gt;At first blush, Microsoft's knowledge base &lt;a href="http://support.microsoft.com/kb/316401"&gt;suggests doing an in-place
upgrade or full repartition and
reinstall&lt;/a&gt;, which are both
fairly drastic measures -- you might as well just start from scratch,
which is exactly what you &lt;em&gt;don't&lt;/em&gt; want to have to do for a nursed-along
legacy system which no one who originally set it up is even with the
organization any more.&lt;/p&gt;
&lt;p&gt;Fortunately, a bit more digging in the Knowledge Base turned up &lt;a href="http://support.microsoft.com/kb/314082"&gt;an
unsupported set of steps&lt;/a&gt; that
appears to be the equivalent of setting &lt;code&gt;MODULES=most&lt;/code&gt; (at least for the
IDE chipsets). Running this on the old hardware before imaging the disk
worked for me, though i did need to re-validate Windows XP after the
reboot by typing in the long magic code again. i guess they're keying it
to the hardware, which clearly changed in this instance.&lt;/p&gt;
&lt;p&gt;Such silliness to spend time working around, really, when i'd rather be
spending my time working on free software. :/&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/bugs"&gt;bugs&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/windows"&gt;windows&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Compromising webapps: a case study</title><link href="https://dkg.fifthhorseman.net/blog/compromising-webapps-a-case-study.html" rel="alternate"/><published>2012-03-16T01:42:00-04:00</published><updated>2012-03-16T01:42:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2012-03-16:/blog/compromising-webapps-a-case-study.html</id><content type="html">&lt;p&gt;&lt;a href="https://jhalderm.com/pub/papers/dcvoting-fc12.pdf"&gt;This paper&lt;/a&gt; should
be required reading for anyone developing, deploying, or administering
web applications.&lt;/p&gt;
&lt;p&gt;It's also interesting to read &lt;a href="http://www.dcboee.org/popup.asp?url=/pdf_files/nr_687.pdf"&gt;the perspective of the folks operating
the compromised
webapp&lt;/a&gt;
(details are in the section titled "Digital Vote-By-Mail" on pages 34 to
38).&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Adobe leaves Linux AIR users vulnerable</title><link href="https://dkg.fifthhorseman.net/blog/adobe-leaves-linux-air-users-vulnerable.html" rel="alternate"/><published>2011-11-21T17:41:00-05:00</published><updated>2011-11-21T17:41:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2011-11-21:/blog/adobe-leaves-linux-air-users-vulnerable.html</id><summary type="html">&lt;p&gt;A few months ago, &lt;a href="https://www.adobe.com/support/security/bulletins/apsb11-12.html"&gt;Adobe announced a slew of vulnerabilities in its
Flash
Player&lt;/a&gt;,
which is a critical component of Adobe AIR:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Adobe recommends users of Adobe AIR 2.6.19140 and earlier versions for
Windows, Macintosh and Linux update to Adobe AIR 2.7.0.1948.&lt;/p&gt;
&lt;p&gt;[...]&lt;/p&gt;
&lt;p&gt;&lt;p&gt;
June 14, 2011 …&lt;/p&gt;&lt;/p&gt;&lt;/blockquote&gt;</summary><content type="html">&lt;p&gt;A few months ago, &lt;a href="https://www.adobe.com/support/security/bulletins/apsb11-12.html"&gt;Adobe announced a slew of vulnerabilities in its
Flash
Player&lt;/a&gt;,
which is a critical component of Adobe AIR:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Adobe recommends users of Adobe AIR 2.6.19140 and earlier versions for
Windows, Macintosh and Linux update to Adobe AIR 2.7.0.1948.&lt;/p&gt;
&lt;p&gt;[...]&lt;/p&gt;
&lt;p&gt;&lt;p&gt;
June 14, 2011 - Bulletin updated with information on Adobe AIR&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;However, looking at &lt;a href="http://kb2.adobe.com/cps/408/kb408084.html"&gt;Adobe's instructions for installing AIR on "Linux"
systems&lt;/a&gt;, we see that it is
impossible for people running a free desktop OS to follow Adobe's own
recommendations:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Beginning June 14 2011, Adobe AIR is no longer supported for desktop
Linux distributions. Users can install and run AIR 2.6 and earlier
applications but can't install or update to AIR 2.7. The last version
to support desktop Linux distributions is AIR 2.6.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;So on the exact same day, Adobe said "we recommend you upgrade, as the
version you are using is vulnerable" and "we offer you no way to
upgrade".&lt;/p&gt;
&lt;p&gt;I'm left with the conclusion that Adobe's aggregate corporate message is
"users of desktops based on free software should immediately uninstall
AIR and stop using it".&lt;/p&gt;
&lt;p&gt;If Adobe's software was free, and they had a community around it, they
could turn over support to the community if they found it too
burdensome. Instead, once again, users of proprietary tools on free
systems get screwed by the proprietary vendor.&lt;/p&gt;
&lt;p&gt;And they wonder why we tend to be less likely to install their tools?&lt;/p&gt;
&lt;p&gt;Application developers should avoid targeting AIR as a platform if they
want to reach everyone.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/adobe"&gt;adobe&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/proprietary%20software"&gt;proprietary
software&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/security"&gt;security&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>unreproducible buildd test suite failures</title><link href="https://dkg.fifthhorseman.net/blog/unreproducible-buildd-test-suite-failures.html" rel="alternate"/><published>2011-06-21T15:05:00-04:00</published><updated>2011-06-21T15:05:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2011-06-21:/blog/unreproducible-buildd-test-suite-failures.html</id><summary type="html">&lt;p&gt;I've been getting &lt;a href="https://buildd.debian.org/xdotool"&gt;strange failures on some architectures for
xdotool&lt;/a&gt;. xdotool is a library and a
command-line tool to allow you to inject events into an existing X11
session. I'm trying to understand (or even to reproduce) these errors so
i can fix them.&lt;/p&gt;
&lt;p&gt;The upstream project ships an extensive …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I've been getting &lt;a href="https://buildd.debian.org/xdotool"&gt;strange failures on some architectures for
xdotool&lt;/a&gt;. xdotool is a library and a
command-line tool to allow you to inject events into an existing X11
session. I'm trying to understand (or even to reproduce) these errors so
i can fix them.&lt;/p&gt;
&lt;p&gt;The upstream project ships an extensive test suite; this test suite is
failing on three architectures: ia64, armel, and mipsel; it passes fine
on the other architectures (the hurd-i386 failure is unrelated, and i
know how to fix it). The suite is failing on some "typing" tests -- some
symbols "typed" are getting dropped on the failing architectures -- but
it is not failing in a repeatable fashion. You can see &lt;a href="https://buildd.debian.org/status/logs.php?pkg=xdotool&amp;amp;arch=armel&amp;amp;ver=1%3A2.20110530.1-3"&gt;two attempted
armel builds
failing&lt;/a&gt;
with different outputs:&lt;/p&gt;
&lt;p&gt;The first failure shows &lt;code&gt;[&lt;/code&gt; and occasionally &lt;code&gt;&amp;lt;&lt;/code&gt; failing under a &lt;code&gt;us,se&lt;/code&gt;
keymap (that is, after the test-suite's invocation of
&lt;code&gt;setxkbmap -option grp:switch,grp:shifts_toggle us,se&lt;/code&gt;):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Running&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;test_typing&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rbSetting&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;up&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;keymap&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;usLoaded&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;suite&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;test_typingStarted&lt;/span&gt;&lt;span class="o"&gt;...........&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="n"&gt;Finished&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;19.554214&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;seconds&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Failure&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;test_us_se_symbol_typing&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;XdotoolTypingTests&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;test_typing&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rb&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;58&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;_test_typing&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;     test_typing.rb:78:in `test_us_se_symbol_typing&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;`12345678990-=~ !@\#$%^&amp;amp;*()_+[]{}|;:&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s2"&gt;,./&amp;lt;&amp;gt;?:&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s2"&gt;,./&amp;lt;&amp;gt;?&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;expected&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;but&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;was&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;`12345678990-=~ !@\#$%^&amp;amp;*()_+]{}|;:&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s2"&gt;,./&amp;gt;?:&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s2"&gt;,./&amp;lt;&amp;gt;?&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;.&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;tests&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;assertions&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;failures&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;errors&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The second failure, on the same buildd, a day later, shows no failures
under &lt;code&gt;us,se&lt;/code&gt;, but several failures under other keymaps:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Running&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;test_typing&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rbSetting&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;up&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;keymap&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;usLoaded&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;suite&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;test_typingStarted&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt;&lt;span class="o"&gt;.......&lt;/span&gt;&lt;span class="n"&gt;Finished&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;16.784192&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;seconds&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Failure&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;test_de_symbol_typing&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;XdotoolTypingTests&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;test_typing&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rb&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;58&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;_test_typing&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;     test_typing.rb:118:in `test_de_symbol_typing&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;`12345678990-=~ !@\#$%^&amp;amp;*()_+[]{}|;:&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s2"&gt;,./&amp;lt;&amp;gt;?:&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s2"&gt;,./&amp;lt;&amp;gt;?&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;expected&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;but&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;was&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;`12345678990-=~ !@\#$%^&amp;amp;*()_+]{}|;:&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s2"&gt;,./&amp;lt;&amp;gt;?:&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s2"&gt;,./&amp;lt;&amp;gt;?&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;.&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Failure&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;test_se_symbol_typing&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;XdotoolTypingTests&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;test_typing&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rb&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;58&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;_test_typing&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;     test_typing.rb:108:in `test_se_symbol_typing&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;`12345678990-=~ !@\#$%^&amp;amp;*()_+[]{}|;:&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s2"&gt;,./&amp;lt;&amp;gt;?:&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s2"&gt;,./&amp;lt;&amp;gt;?&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;expected&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;but&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;was&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;`12345678990-=~ !@\#$%^&amp;amp;*()_+[]{|;:&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s2"&gt;,./&amp;lt;&amp;gt;?:&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s2"&gt;,./&amp;lt;&amp;gt;?&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;.&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Failure&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;test_se_us_symbol_typing&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;XdotoolTypingTests&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;test_typing&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rb&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;58&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;_test_typing&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;     test_typing.rb:88:in `test_se_us_symbol_typing&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;`12345678990-=~ !@\#$%^&amp;amp;*()_+[]{}|;:&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s2"&gt;,./&amp;lt;&amp;gt;?:&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s2"&gt;,./&amp;lt;&amp;gt;?&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;expected&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;but&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;was&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;`12345678990-=~ !@\#$%^&amp;amp;*()_+{}|;:&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s2"&gt;,./&amp;gt;?:&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s2"&gt;,./&amp;lt;&amp;gt;?&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;.&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;tests&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;assertions&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;failures&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;errors&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;I've tried to reproduce on a cowbuilder instance on my own armel
machine; I could not reproduce the problem -- the test suites pass for
me.&lt;/p&gt;
&lt;p&gt;I've asked for help on the various buildd lists, and from upstream; no
one resolutions have been proposed yet. I'd be grateful for any
suggestions or hints of things i might want to look for. It would be a
win if i could just reproduce the errors.&lt;/p&gt;
&lt;p&gt;Of course, one approach would be to disable the test suite as part of
the build process, but it has already helped catch a number of other
issues with the upstream source. It would be a shame to lose those
benefits.&lt;/p&gt;
&lt;p&gt;Any thoughts?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/buildd"&gt;buildd&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/packaging"&gt;packaging&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/xdotool"&gt;xdotool&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>the bleeding edge: btrfs (poor performance, alas)</title><link href="https://dkg.fifthhorseman.net/blog/the-bleeding-edge-btrfs-poor-performance-alas.html" rel="alternate"/><published>2011-05-10T18:17:00-04:00</published><updated>2011-05-10T18:17:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2011-05-10:/blog/the-bleeding-edge-btrfs-poor-performance-alas.html</id><summary type="html">&lt;p&gt;I'm playing with btrfs to get a feel for what's coming up in linux
filesystems. To be daring, i've configured a test machine using only
btrfs for its on-disk filesystems. I really like some of the ideas put
forward in the btrfs design. (i'm aware that btrfs is considered
experimental-only …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I'm playing with btrfs to get a feel for what's coming up in linux
filesystems. To be daring, i've configured a test machine using only
btrfs for its on-disk filesystems. I really like some of the ideas put
forward in the btrfs design. (i'm aware that btrfs is considered
experimental-only at this point).&lt;/p&gt;
&lt;p&gt;I'm happy to report that despite several weeks of regular upgrade/churn
from unstable and experimental, i have yet to see any data loss or other
serious forms of failure.&lt;/p&gt;
&lt;p&gt;Unfortunately, i'm not impressed with the performance. The machine feels
sluggish in this configuratiyon, compared to how i remember it running
with previous non-btrfs installations. So i ran some benchmarks. The
results don't look good for btrfs in its present incarnation.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;UPDATE: see the comments section for revised statistics from a quieter
system, with the filesystems over the same partition (btrfs is still
much slower).&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The simplified test system i'm running has Linux kernel
2.6.39-rc6-686-pae (from experimental), 1GiB of RAM (no swap), and a
single 2GHz P4 CPU. It has one parallel ATA hard disk
(&lt;code&gt;WDC WD400EB-00CPF0&lt;/code&gt;), with two primary partitions (one btrfs and one
ext3). The root filesystem is btrfs. The ext3 filesystem is mounted at
&lt;code&gt;/mnt&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;I used &lt;a href="http://packages.debian.org/bonnie++"&gt;bonnie++&lt;/a&gt; to benchmark the
ext3 filesystem against the btrfs filesystem as a non-privileged user.&lt;/p&gt;
&lt;p&gt;Here are the results on the test ext3 filesystem:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;consoleuser&lt;/span&gt;&lt;span class="nv"&gt;@loki&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cat&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bonnie&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;stats&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ext3&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Reading&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;byte&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;at&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;time&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;doneReading&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;intelligently&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;donestart&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;em&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="k"&gt;Create&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sequential&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Stat&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sequential&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;Delete&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sequential&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;Create&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Stat&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;Delete&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Version&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;1.96&lt;/span&gt;&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="c1"&gt;------Sequential Output------ --Sequential Input- --Random-Concurrency   1     -Per Chr- --Block-- -Rewrite- -Per Chr- --Block-- --Seeks--Machine        Size K/sec %CP K/sec %CP K/sec %CP K/sec %CP K/sec %CP  /sec %CPloki          2264M   331  98 23464  11 10988   4  1174  85 39629   6 130.4   5Latency             92041us    1128ms    1835ms     166ms     308ms    6549msVersion  1.96       ------Sequential Create------ --------Random Create--------loki                -Create-- --Read--- -Delete-- -Create-- --Read--- -Delete--              files  /sec %CP  /sec %CP  /sec %CP  /sec %CP  /sec %CP  /sec %CP                 16  9964  26 +++++ +++ 13035  26 11089  27 +++++ +++ 11888  24Latency             17882us    1418us    1929us     489us      51us     650us1.96,1.96,loki,1,1305039600,2264M,,331,98,23464,11,10988,4,1174,85,39629,6,130.4,5,16,,,,,9964,26,+++++,+++,13035,26,11089,27,+++++,+++,11888,24,92041us,1128ms,1835ms,166ms,308ms,6549ms,17882us,1418us,1929us,489us,51us,650usconsoleuser@loki:~$&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;And here are the results for btrfs (on the main filesystem):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;consoleuser&lt;/span&gt;&lt;span class="nv"&gt;@loki&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cat&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bonnie&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;stats&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;btrfs&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Reading&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;byte&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;at&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;time&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;doneReading&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;intelligently&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;donestart&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;em&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="k"&gt;Create&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sequential&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Stat&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sequential&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;Delete&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sequential&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;Create&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Stat&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;Delete&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Version&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="mf"&gt;1.96&lt;/span&gt;&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="c1"&gt;------Sequential Output------ --Sequential Input- --Random-Concurrency   1     -Per Chr- --Block-- -Rewrite- -Per Chr- --Block-- --Seeks--Machine        Size K/sec %CP K/sec %CP K/sec %CP K/sec %CP K/sec %CP  /sec %CPloki          2264M    43  99 22682  17 10356   6  1038  79 28796   6  86.8  99Latency               293ms     727ms    1222ms   46541us     504ms   13094msVersion  1.96       ------Sequential Create------ --------Random Create--------loki                -Create-- --Read--- -Delete-- -Create-- --Read--- -Delete--              files  /sec %CP  /sec %CP  /sec %CP  /sec %CP  /sec %CP  /sec %CP                 16  1623  33 +++++ +++  2182  57  1974  27 +++++ +++  1907  44Latency             78474us    6839us    8791us    1746us      66us   64034us1.96,1.96,loki,1,1305040411,2264M,,43,99,22682,17,10356,6,1038,79,28796,6,86.8,99,16,,,,,1623,33,+++++,+++,2182,57,1974,27,+++++,+++,1907,44,293ms,727ms,1222ms,46541us,504ms,13094ms,78474us,6839us,8791us,1746us,66us,64034usconsoleuser@loki:~$&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;As you can see, btrfs is significantly slower in several categories:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;writing character-at-a-time is *much* slower: 43K/sec vs. 331K/sec&lt;/li&gt;
&lt;li&gt;reading block-at-a-time is slower: 28796K/sec vs. 39629K/sec&lt;/li&gt;
&lt;li&gt;all forms of file creation and deletion are nearly an order of
    magnitude slower&lt;/li&gt;
&lt;li&gt;Random seeks are almost as fast, but they swamp the CPU&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I'm hoping that i just configured the test wrong somehow, or that i've
done something grossly unfair in the system setup and configuration. (or
maybe i'm mis-reading the &lt;code&gt;bonnie++&lt;/code&gt; output?) Maybe someone can point
out my mistake, or give me pointers for what to do to try to speed up
btrfs.&lt;/p&gt;
&lt;p&gt;I like the sound of the features we will eventually get from btrfs, but
these performance figures seem like a pretty rough tradeoff.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;:
&lt;a href="https://debian-administration.org/tag/benchmarks"&gt;benchmarks&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/bonnie"&gt;bonnie&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/btrfs"&gt;btrfs&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/ext3"&gt;ext3&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Please use unambiguous tag names in your DVCS</title><link href="https://dkg.fifthhorseman.net/blog/please-use-unambiguous-tag-names-in-your-dvcs.html" rel="alternate"/><published>2011-05-06T21:05:00-04:00</published><updated>2011-05-06T21:05:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2011-05-06:/blog/please-use-unambiguous-tag-names-in-your-dvcs.html</id><summary type="html">&lt;p&gt;One of the nice features of a distributed version control system (DVCS)
like &lt;code&gt;git&lt;/code&gt; is the ability to tag specific states of your project, and to
cryptographically sign your tags.&lt;/p&gt;
&lt;p&gt;Many projects use simple tag names with the version string like
"&lt;code&gt;0.35&lt;/code&gt;". This is a plea to ensure that …&lt;/p&gt;</summary><content type="html">&lt;p&gt;One of the nice features of a distributed version control system (DVCS)
like &lt;code&gt;git&lt;/code&gt; is the ability to tag specific states of your project, and to
cryptographically sign your tags.&lt;/p&gt;
&lt;p&gt;Many projects use simple tag names with the version string like
"&lt;code&gt;0.35&lt;/code&gt;". This is a plea to ensure that the tags you make explicitly
reference the project you're working on. For example, if you are
releasing version 0.35 of project Foo, please make your tag "&lt;code&gt;foo_0.35&lt;/code&gt;"
for security and for future disambiguation.&lt;/p&gt;
&lt;p&gt;There is more than one reason to care about unambiguous tags. I'll give
two reasons below, but they come from the same fundamental observation:
&lt;em&gt;All git repositories are, in some sense, the same git repository; some
just store different commits than others&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;it's entirely possible to merge two disjoint git repositories, and to
have two unassociated threads of development in the same repo. you can
also merge threads of developement later if the projects converge.&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;Avoid tag replay attacks&lt;/dt&gt;
&lt;dd&gt;
&lt;p&gt;Let's assume Alice works on two projects, Foo and Bar. She wraps up
work on a new version of Foo, and creates and signs a simple tag
"&lt;code&gt;0.32&lt;/code&gt;". She publishes this tag to the Foo project's public git
repo.&lt;/p&gt;
&lt;p&gt;Bob is trying to attack the Bar project, which is currently at
version 0.31. Bob can actually merge Alice's work on Foo into the
Bar repository, including Alice's new tag.&lt;/p&gt;
&lt;p&gt;Now looks like there is a tag for version 0.32 of project Bar, and
it has been cryptographically-signed by Alice, a known active
developer!&lt;/p&gt;
&lt;p&gt;&lt;p&gt;
If she had named her tag "&lt;code&gt;foo_0.32&lt;/code&gt;" (and if all Bar tags were of
the form "&lt;code&gt;bar_X.XX&lt;/code&gt;"), it would be clear that this tag did not
belong to the Bar project.&lt;/p&gt;
&lt;/dd&gt;
&lt;dt&gt;Be able to merge projects and keep full history&lt;/dt&gt;
&lt;dd&gt;Consider two related projects with separate development histories
that later decide to merge (e.g. a library and its most important
downstream application). If they merge their git repos, but both
projects have a tag "&lt;code&gt;0.1&lt;/code&gt;", then one tag must be removed to make
room for the other.
&lt;p&gt;
If all tags were unambiguously named, the two repos could be merged
cleanly without discarding or rewriting history.&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;I noticed this because of a general principle i try to keep in mind:
&lt;em&gt;when making a cryptographic signature, ensure that the thing you are
signing is context-independent -- that is, that it cannot be easily
misinterpreted when placed in a different context&lt;/em&gt;. For example, do not
sign e-mails that just say "I approve" -- say specifically what you are
approving of in the body of the signed mail. Otherwise, someone could
re-send your "I approve" e-mail In-Reply-To a topic that you do not
really approve of.&lt;/p&gt;
&lt;p&gt;By extension, signing a simple tag is like saying "the source tree in
this specific state (and with this specific history) is version 0.3". A
close inspection of the state and the history by a sensitive/intelligent
human skilled in the art of looking at source code can probably figure
out what the project is from its contents. But it's much less ambiguous
to say "the source tree in this specific state (and with this specific
history) is version 0.3 &lt;em&gt;of project Foo&lt;/em&gt;".&lt;/p&gt;
&lt;p&gt;Once you start using unambiguous tag names, you make it safe for people
to set up simple tools that do automated scans of your repository and
can take action when a new signed tag appears. And you respect (and help
preserve) the history of any future project that gets merged with yours.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/git"&gt;git&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/security"&gt;security&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>test-driven development: refactoring, difficulties</title><link href="https://dkg.fifthhorseman.net/blog/test-driven-development-refactoring-difficulties.html" rel="alternate"/><published>2011-05-04T23:11:00-04:00</published><updated>2011-05-04T23:11:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2011-05-04:/blog/test-driven-development-refactoring-difficulties.html</id><summary type="html">&lt;p&gt;liw recently &lt;a href="http://blog.liw.fi/posts/debian-tdd/"&gt;wrote about test-driven
development&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;This all sounds like a lot of bureaucratic nonsense, but what I get
out of this is this: once all tests pass, I have a strong confidence
that the software works. As soon as I've added all the features I want
to have for …&lt;/em&gt;&lt;/p&gt;&lt;/blockquote&gt;</summary><content type="html">&lt;p&gt;liw recently &lt;a href="http://blog.liw.fi/posts/debian-tdd/"&gt;wrote about test-driven
development&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;This all sounds like a lot of bureaucratic nonsense, but what I get
out of this is this: once all tests pass, I have a strong confidence
that the software works. As soon as I've added all the features I want
to have for a release, I can push a button to push it out&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;To my mind, this is only one of the benefits. He doesn't describe
another major benefit, which is the confidence with which you can take
on re-factoring in projects with well-developed test infrastructure.&lt;/p&gt;
&lt;p&gt;If your project has no test infrastructure at all, and you make a deep
and/or potentially invasive change, you might well produce something
that is heinously broken for users who have a different pattern of using
the tool than you do.&lt;/p&gt;
&lt;p&gt;But if you have a well-developed, reasonable test suite with fairly wide
coverage, you can make a deep or invasive change, and be confident that
-- if the tests all pass -- the stuff you release isn't going to be too
horrific. And if you do break something with a change which the test
suite didn't cover, that's an indication that the test suite is lacking.
Hopefully, you can factor out a problem report into its own test, so
that future changes will ensure that the behavior doesn't regress too.&lt;/p&gt;
&lt;p&gt;The upshot of more-confident re-factoring is that your development can
be much bolder, you can roll out new features more quickly, and you can
spend less time agonizing about whether you've got the various
abstraction layers exactly right the first time through. These are all
good things (though i do think the agony of abstraction perfectionism is
well-warranted in some contexts, like API definitions, and wouldn't want
test-driven development to make people give up on that necessary task).&lt;/p&gt;
&lt;h3 id="when-testing-cant-cover-everything"&gt;when testing can't cover everything&lt;/h3&gt;
&lt;p&gt;Some things are just hard to test well. for example, if you have 20
different boolean options to a command-line tool, you can't
realistically test them in all combinations and permutations; that would
be over a million tests.&lt;/p&gt;
&lt;p&gt;User experience is also notoriously difficult to test, as are tools that
rely heavily on network interaction, which can be flakey and
unpredictable.&lt;/p&gt;
&lt;h3 id="other-downsides"&gt;other downsides&lt;/h3&gt;
&lt;p&gt;Test suites themselves require maintenance, as the components they rely
on can change over time. More than once, i've had a test suite failure
that was really a failure of the test infrastructure, not the code
itself. But in those same projects, that's usually followed or preceded
by a test suite failure that picks out a particularly nasty or subtle
bug in the tested code that might have persisted for quite a while
unnoticed. So the test suite does in some sense create more work all
around.&lt;/p&gt;
&lt;h3 id="more-and-better-testing-is-good-for-debian"&gt;more and better testing is good for Debian&lt;/h3&gt;
&lt;p&gt;Even when we know that coverage isn't perfect, and even with its
additional overhead, well-integrated tests (at the unit level and more
generally) are worth the tradeoffs. It's worth doing because of the
robustness and guarantees that we can give each other with
regularly-tested code. It's a more stable foundation which surprisingly
also gives us more flexibility going forward. This is good for free
software in general. It also helps us find our bugs before our users do,
so it's better for our users. So more and better testing directly
supports the two main priorities outlined in the Debian Social Contract.&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>USAA Deposit@Home: bad engineering and terrible UX</title><link href="https://dkg.fifthhorseman.net/blog/usaa-deposithome-bad-engineering-and-terrible-ux.html" rel="alternate"/><published>2011-04-28T06:59:00-04:00</published><updated>2011-04-28T06:59:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2011-04-28:/blog/usaa-deposithome-bad-engineering-and-terrible-ux.html</id><summary type="html">&lt;p&gt;I use &lt;a href="https://www.usaa.com"&gt;USAA&lt;/a&gt; for some of my finances. They
specialize in remote banking (i've never been in a physical branch).
Sadly, they can still be pretty clueless about how to use the web
properly. My latest frustration with them was trying to use their
&lt;a href="https://www.usaa.com/inet/pages/bank_deposit"&gt;Deposit@Home&lt;/a&gt; service,
where you scan …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I use &lt;a href="https://www.usaa.com"&gt;USAA&lt;/a&gt; for some of my finances. They
specialize in remote banking (i've never been in a physical branch).
Sadly, they can still be pretty clueless about how to use the web
properly. My latest frustration with them was trying to use their
&lt;a href="https://www.usaa.com/inet/pages/bank_deposit"&gt;Deposit@Home&lt;/a&gt; service,
where you scan your checks and upload them.&lt;/p&gt;
&lt;p&gt;No problem, right? I've got a scanner and a web browser and i know how
to use them both. Ha ha. Upon first connecting, i'm rejected, and i find
the absurd &lt;a href="https://www.usaa.com/inet/pages/help_deposit_system_requirements"&gt;System
Requirements&lt;/a&gt;
-- only Windows and Mac, and only certain versions of certain browsers.
You also need Sun's Java plugin, apparently.&lt;/p&gt;
&lt;p&gt;Deliberately naïve, i call their helpdesk and ask them if they could
just give me a link to let me upload my scanned checks. They tell me
that they want 200dpi images, and then give an absurd runaround that
includes references to &lt;a href="https://secure.wikimedia.org/wikipedia/en/wiki/Gramm-Leach-Bliley_Act"&gt;the Gramm-Leach-Bliley
Act&lt;/a&gt;
as the reason they need to limit the system to Windows or Mac, and that
security is the reason they need to control the scanner directly
(apparently your browser can control your local scanner on Windows?
yikes). But they let slip that Mac users don't have the scanner
controlled directly, and can just upload images (apparently the federal
law doesn't cover them or something). Preposterous silliness.&lt;/p&gt;
&lt;h3 id="the-workaround"&gt;The Workaround&lt;/h3&gt;
&lt;p&gt;Of course, it turns out you can get it working on Debian GNU/Linux,
mainly by telling them what they want to hear ("yes sir, i'm running Mac
OS"), but you'll also have to run Sun's Java (non-free software) to do
it, since their Java uploader fails with &lt;a href="http://lair.fifthhorseman.net/~dkg/personal/usaa.java.err.txt"&gt;nasty errors when using
icedtea6-plugin&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I set up a dedicated system user for this goofiness, since i'm going to
be running apparently untrustworthy applets on top of non-free software.
I run a separate instance of iceweasel as that user; all configuration
described is for that user's homedir. If you do this yourself, You'll
need to decide if you want the same level of isolation for yourself.&lt;/p&gt;
&lt;p&gt;So i have the choice of installing
&lt;a href="http://packages.debian.org/sun-java6-plugin"&gt;sun-java6-plugin&lt;/a&gt; from
&lt;code&gt;non-free&lt;/code&gt; and having the plugin installed for all web browsers, or just
doing a per-user install of java for my dedicated user (and avoiding the
plugin for my normal user). I opted for the latter. As the dedicated
user, I fetched the self-extracting variant from
&lt;a href="https://www.java.com/en/download/manual.jsp"&gt;java.com&lt;/a&gt;, unpacked it,
and added it to the iceweasel plugins:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;chmod&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;~/&lt;/span&gt;&lt;span class="n"&gt;Download&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;jre&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="n"&gt;u25&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;linux&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;i586&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;binmkdir&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;~/&lt;/span&gt;&lt;span class="n"&gt;lib&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;~/.&lt;/span&gt;&lt;span class="n"&gt;mozilla&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pluginscd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;~/&lt;/span&gt;&lt;span class="n"&gt;lib&lt;/span&gt;&lt;span class="o"&gt;~/&lt;/span&gt;&lt;span class="n"&gt;Download&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;jre&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="n"&gt;u25&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;linux&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;i586&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;binln&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;~/&lt;/span&gt;&lt;span class="n"&gt;lib&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;jre&lt;/span&gt;&lt;span class="o"&gt;*/&lt;/span&gt;&lt;span class="n"&gt;lib&lt;/span&gt;&lt;span class="o"&gt;/*/&lt;/span&gt;&lt;span class="n"&gt;libnpjp2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;~/.&lt;/span&gt;&lt;span class="n"&gt;mozilla&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;plugins&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Then i closed iceweasel and restarted it. In the relaunched iceweasel
sesson, I told Iceweasel 4 to pretend that it was actually Firefox 3.6
on a Mac. I did this by going to &lt;code&gt;about:config&lt;/code&gt; (checking the box that
says i know what i'm doing), right-clicking, and choosing "new &amp;gt;&amp;gt;
string". The new variable name is
&lt;a href="http://kb.mozillazine.org/Firefox_:_FAQs_:_About:config_Entries#General."&gt;&lt;code&gt;general.useragent.override&lt;/code&gt;&lt;/a&gt;
and i found that setting it to the following (insane, false) value
worked for me:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O; en-US; rv:1.9.2.3) Gecko/20060426 Firefox/3.5.18
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Note that this configuration might make &lt;a href="https://debian-administration.org/users/dkg/weblog/63"&gt;hotmail think that you are a
mobile device&lt;/a&gt;.
:P If you try to use this browser profile for anything other than
visiting USAA, you might want to remove this setting, or install
&lt;a href="http://packages.debian.org/xul-ext-useragentswitcher"&gt;&lt;code&gt;xul-ext-useragentswitcher&lt;/code&gt;&lt;/a&gt;
to be able to set it more easily than using &lt;code&gt;about:config&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Once these changes were made, I was able to log into USAA, use the
Deposit@Home service to upload my 200dpi grayscale scans. I guess they
think i'm a Mac user now.&lt;/p&gt;
&lt;h3 id="the-followup"&gt;The Followup&lt;/h3&gt;
&lt;p&gt;After completing the upload, I wrote them this review (i doubt they'll
post it):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The Deposit@Home service has great potential. Unfortunately, it
currently appears to be overengineered and unnecessarily restrictive.&lt;/p&gt;
&lt;p&gt;The service requires two scans (front and back) of the deposited
check, at 200dpi, in grayscale or black-and-white, in jpeg format,
reasonably-cropped. The simplest way to do this would be to show some
examples of good scans and bad scans, and provide two file upload
forms.&lt;/p&gt;
&lt;p&gt;Once the user uploaded their images, the web site could run its own
verification, and display them back for the user to confirm,
optionally using a simple javascript-based image-cropper if any image
seems wrong-sized. This would work fine with any reasonable browser on
any OS.&lt;/p&gt;
&lt;p&gt;Instead, Deposit@Home requires the user to present a User-Agent header
claiming to be from specific versions of Mac or Windows, running
certain (older) versions of certain browsers, and requires the use of
Sun's Java plugin.&lt;/p&gt;
&lt;p&gt;&lt;p&gt;
Entirely unnecessary system requirements to do a simple task.
Disappointing. :(&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="acknowledgements"&gt;Acknowledgements&lt;/h3&gt;
&lt;p&gt;I found &lt;a href="http://ubuntuforums.org/showthread.php?t=1454931"&gt;good background for this approach on the ubuntu
forums&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id="the-takeaway"&gt;The Takeaway&lt;/h3&gt;
&lt;p&gt;I continue to be frustrated and annoyed by organizations that haven't
yet embraced the benefits of the open web. Clearly, USAA has spent a lot
of money engineering what they think is a certain experience for their
users. However, they didn't design with standard web browsers in mind,
so they appear to have boxed themselves into a corner where they think
they have to test and approve of the entire software stack running on
the end-user's machine.&lt;/p&gt;
&lt;p&gt;This is not only foolish -- it's impossible. When you're designing a
web-based application, just design it for the web. Keep it simple. If
you want to offer some snazzy java-hooked-into-your-scanner insanity, i
will only have a mild objection: it seems like a waste of time and
engineering effort. My objection is much stronger if your
snazzy/incompatible absurdity &lt;em&gt;is the only way to use your service&lt;/em&gt;. A
simple, web-based, browser-agnostic interface should be available to all
your clients.&lt;/p&gt;
&lt;p&gt;Even more aggravating is the claim that they don't think they should
engineer for everyone. I was told during the runaround that they would
only support Linux if 4% of their users were using Linux (which they
don't think is the case at the moment -- if you are a USAA customer, and
you use something other than Mac and Windows, please tell them so). I
tried to tell them that I wasn't asking for Linux support; i was asking
for &lt;em&gt;everyone&lt;/em&gt; support. If you just use generic engineering in the first
place, there's no extra expense for special-casing other users. But they
couldn't understand.&lt;/p&gt;
&lt;p&gt;And now, since i'll need to lie to them in my User Agent string every
time i want to deposit a check online, those visits won't even show up
in their logs to be counted. "Our web site deliberately disables itself
for \$foo users; we haven't written it for them; but that's OK, we don't
have any \$foo users anyway" is a nasty self-fulfilling prophecy. Why
would you do that?&lt;/p&gt;</content><category term="misc"/></entry><entry><title>The bleeding edge: systemd</title><link href="https://dkg.fifthhorseman.net/blog/the-bleeding-edge-systemd.html" rel="alternate"/><published>2011-04-27T08:07:00-04:00</published><updated>2011-04-27T08:07:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2011-04-27:/blog/the-bleeding-edge-systemd.html</id><summary type="html">&lt;p&gt;Curious about these shiny new things i keep hearing about, i set up a
test desktop system using using
&lt;a href="http://www.freedesktop.org/wiki/Software/systemd"&gt;systemd&lt;/a&gt; as the init
system (yes, that means using
&lt;a href="http://packages.debian.org/systemd-sysv"&gt;systemd-sysv&lt;/a&gt; in place of
&lt;a href="http://packages.debian.org/sysvinit"&gt;sysvinit&lt;/a&gt; -- so i had to remove an
essential package for this to work).&lt;/p&gt;
&lt;p&gt;&lt;a href="http://bugs.debian.org/624276"&gt;A system-crippling bug&lt;/a&gt; was naturally …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Curious about these shiny new things i keep hearing about, i set up a
test desktop system using using
&lt;a href="http://www.freedesktop.org/wiki/Software/systemd"&gt;systemd&lt;/a&gt; as the init
system (yes, that means using
&lt;a href="http://packages.debian.org/systemd-sysv"&gt;systemd-sysv&lt;/a&gt; in place of
&lt;a href="http://packages.debian.org/sysvinit"&gt;sysvinit&lt;/a&gt; -- so i had to remove an
essential package for this to work).&lt;/p&gt;
&lt;p&gt;&lt;a href="http://bugs.debian.org/624276"&gt;A system-crippling bug&lt;/a&gt; was naturally
the result of living on the bleeding edge, but fortunately it was
resolved with a trivial patch.&lt;/p&gt;
&lt;p&gt;In all, i'm pretty happy with some of the things that systemd seems to
get right. For example, native supervision of daemon processes, clean
process states, elimination of initscript copy-paste-isms, and
socket-based service initiation are all obvious, marked improvements
over the existing sysvinit legacy cruft.&lt;/p&gt;
&lt;p&gt;But i'm a bit concerned about other parts. For example, all the
above-mentioned features fit really well within a tightly-tuned,
well-managed server. But systemd also appears to rely heavily on complex
userland systems like dbus and policykit that would be much more at home
on a typical desktop machine. I've never seen a well-managed server
installation that warranted either policykit or dbus. Also, given the
bug i ran into -- when PID 1 aborts due to a silly assertion, your
system is well-and-truly horked. Shouldn't a &lt;em&gt;lot&lt;/em&gt; more attention to
detail be happening? I'd think that a "recover gracefully from failed
assertions" approach would be the first thing to target for a would-be
PID 1.&lt;/p&gt;
&lt;p&gt;I'm also concerned about the Linux-centricism of systemd. I understand
that features like cgroups and reliance on the spiffiness of inotify are
part of the appeal, but i also really don't want to see us stuck with
only One Single Kernel as an option. The kFreeBSD folks (and the HURD
folks) have done a lot of work to get us close to having some level of
choice at this critical layer of infrastructure. It'd be good to see
that possibility realized, to help us avoid the creeping monoculture. I
worry that systemd's over-reliance on Linux-specific features is heading
in the wrong direction.&lt;/p&gt;
&lt;p&gt;So my question is: why is this all being presented as a package deal?
I'd be pretty happy if i could get just the "server-side" features
without incurring the dbus/policykit/etc bloat. I already run servers
with &lt;a href="http://smarden.org/runit"&gt;runit&lt;/a&gt; as pid 1 -- they're lean and
quite nice, but runit doesn't have systemd's socket-based initiation (or
the level of heavyweight backing that systemd seems to have picked up,
for that matter).&lt;/p&gt;
&lt;p&gt;I understand that Lennart is resistant to UNIX's traditional "do one
thing; do it well" philosophy. I can understand some of his reasoning,
but i think he might be doing his work and his tools a disservice by
taking it this far. Wouldn't systemd be better if it was clearer how to
take advantage of parts of it without having to subscribe to the entire
thing?&lt;/p&gt;
&lt;p&gt;Of course, i might be missing some nice ways that systemd can be
effectively tuned and pared down. But i've read &lt;a href="http://0pointer.de/blog/projects/"&gt;his blog posts about
systemd&lt;/a&gt; and i haven't seen how to
get some of the nice features without the parts i don't want. I'd love
to be pointed to some explanations that show me how i'm wrong :)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/systemd"&gt;systemd&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>EDAC i5000 non-fatal errors</title><link href="https://dkg.fifthhorseman.net/blog/edac-i5000-non-fatal-errors.html" rel="alternate"/><published>2011-04-09T00:00:00-04:00</published><updated>2011-04-09T00:00:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2011-04-09:/blog/edac-i5000-non-fatal-errors.html</id><summary type="html">&lt;p&gt;I've got a Debian GNU/Linux lenny installation (2.6.26-2-vserver-amd64
kernel) running on a Dell Poweredge 2950 with BIOS 2.0.1 (2007-10-27).&lt;/p&gt;
&lt;p&gt;It has two &lt;code&gt;Intel(R) Xeon(R) CPU 5160 @ 3.00GHz&lt;/code&gt; processors (according
to &lt;code&gt;/proc/cpuinfo&lt;/code&gt;, 8 1GiB 667MHz DDR2 ECC modules (part number
&lt;code&gt;HYMP512F72CP8N3-Y5&lt;/code&gt;), according …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I've got a Debian GNU/Linux lenny installation (2.6.26-2-vserver-amd64
kernel) running on a Dell Poweredge 2950 with BIOS 2.0.1 (2007-10-27).&lt;/p&gt;
&lt;p&gt;It has two &lt;code&gt;Intel(R) Xeon(R) CPU 5160 @ 3.00GHz&lt;/code&gt; processors (according
to &lt;code&gt;/proc/cpuinfo&lt;/code&gt;, 8 1GiB 667MHz DDR2 ECC modules (part number
&lt;code&gt;HYMP512F72CP8N3-Y5&lt;/code&gt;), according to &lt;code&gt;dmidecode&lt;/code&gt;, and an
&lt;code&gt;Intel Corporation 5000X Chipset Memory Controller Hub (rev 12)&lt;/code&gt;
according to &lt;code&gt;lspci&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The machine has been running stably for many months.&lt;/p&gt;
&lt;p&gt;On the morning of March 31st, i started getting the following messages
from the kernel, on the order of one pair of lines every 3 seconds:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Mar 31 07:04:38 zamboni kernel: [16883514.141275] EDAC i5000 MC0: NON-FATAL ERRORS Found!!! 1st NON-FATAL Err Reg= 0x800Mar 31 07:04:38 zamboni kernel: [16883514.141278] EDAC i5000:   NON-Retry  Errors, bits= 0x800
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;A bit of digging turned up &lt;a href="https://bugzilla.redhat.com/show_bug.cgi?id=471933"&gt;a redhat bug
report&lt;/a&gt; that seems
to suggest that these warnings are just noise, and should be ignorable.
&lt;a href="http://faq.aslab.com/index.php?sid=17883&amp;amp;lang=en&amp;amp;action=artikel&amp;amp;cat=93&amp;amp;id=154&amp;amp;artlang=en"&gt;Another link thinks it's a conflict with
IPMI&lt;/a&gt;,
though i don't think this model actually has an IPMI subsystem
&lt;strong&gt;correction:&lt;/strong&gt; this machine does have IPMI, though i am not making use
of it.&lt;/p&gt;
&lt;p&gt;However, i also notice from munin logs that at the same time the error
messages started, the machine exhibited a marked change in CPU activity
(including in-kernel activity) and local timer interrupts:
&lt;img alt="[Individual interrupts - by
month]" src="http://dkg.fifthhorseman.net/blog/i5000_edac/irqstats-month.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="[CPU Usage - by
month]" src="http://dkg.fifthhorseman.net/blog/i5000_edac/cpu-month.png"&gt;&lt;/p&gt;
&lt;p&gt;I also note that more rescheduling interrupts started happening, and
fewer megasas interrupts at about the same time. I'm not sure what this
means.&lt;/p&gt;
&lt;p&gt;A review of other logs and graphs on the system turns up no other
evidence of interaction that might cause this kind of elevated activity.&lt;/p&gt;
&lt;p&gt;One thought was that the elevated activity was just due to writing out a
bunch more logs. So i tried removing the &lt;code&gt;i5000_edac&lt;/code&gt; module just to
keep &lt;code&gt;dmesg&lt;/code&gt; and &lt;code&gt;/var/log/kern.log&lt;/code&gt; cleaner. Leaving that turned off
doesn't lower the CPU utilization or change the interrupts, though.&lt;/p&gt;
&lt;p&gt;Any suggestions on what might be going on, or further diagnostics i
should run? The machine is in production, and I'd really rather not take
down the machine for an extended period of time to do a lengthy memory
test. But i also don't want to see this kind of extra CPU usage (more
than double the machine's baseline).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;:
&lt;a href="https://debian-administration.org/tag/i5000_edac"&gt;i5000_edac&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/troubleshooting"&gt;troubleshooting&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Debian on Thecus N8800Pro</title><link href="https://dkg.fifthhorseman.net/blog/debian-on-thecus-n8800pro.html" rel="alternate"/><published>2011-04-05T20:07:00-04:00</published><updated>2011-04-05T20:07:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2011-04-05:/blog/debian-on-thecus-n8800pro.html</id><summary type="html">&lt;p&gt;I recently set up debian on a &lt;a href="http://www.thecus.com/product.php?PROD_ID=28"&gt;Thecus
N8800Pro&lt;/a&gt;. It seems to be
a decent rackmount 2U chassis with 8 3.5" hot-swap SATA drives, dual
gigabit NICs, a standard DB9 RS-232 serial port, one eSATA port, a bunch
of USB 2.0 connectors, and dual power supplies. I'm happy …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I recently set up debian on a &lt;a href="http://www.thecus.com/product.php?PROD_ID=28"&gt;Thecus
N8800Pro&lt;/a&gt;. It seems to be
a decent rackmount 2U chassis with 8 3.5" hot-swap SATA drives, dual
gigabit NICs, a standard DB9 RS-232 serial port, one eSATA port, a bunch
of USB 2.0 connectors, and dual power supplies. I'm happy to be able to
report that Thecus appears to be attempting to fulfill their obligations
under the GPL with this model (i'm fetching &lt;a href="http://www.thecus.com/Downloads/GPL/n4200series_n7700pseries_n8800pseries_5.00.04_GPL.tar.bz2"&gt;their latest source
tarball&lt;/a&gt;
now to have a look).&lt;/p&gt;
&lt;p&gt;Internally, it's an Intel Core 2 Duo processor, two DIMMS of DDR RAM,
and a PCIe slot for extensions if you like. It has two
internally-attached 128MiB SSDs that it wants to boot off of.&lt;/p&gt;
&lt;p&gt;The downsides as i see them:&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;BIOS&lt;/dt&gt;
&lt;dd&gt;
&lt;p&gt;The BIOS only runs over VGA, which is not easy to access. I wish it
ran over the serial port. It's also not clear how one would find an
upgrade to the BIOS. &lt;code&gt;dmidecode&lt;/code&gt; reports the BIOS as:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;        Vendor: Phoenix Technologies, LTD        Version: 6.00 PG        Release Date: 02/24/2009
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;/dd&gt;
&lt;dt&gt;RAM&lt;/dt&gt;
&lt;dd&gt;The mainboard has only two DIMM sockets. It came pre-populated with
two 2GiB DDR DIMMs. memtest86+ reports those DIMMs clearly, but sees
only 3070MiB in aggregate. The linux kernel also sees \~3GiB of RAM,
despite dmidecode and lshw reporting that the two DIMM modules each
are only 1GiB in size. I'm assuming this is a bios problem. Anyone
know how to get access to the full 4GiB? Should i be reporting bugs
on any of these packages?&lt;/dd&gt;
&lt;dt&gt;SSDs&lt;/dt&gt;
&lt;dd&gt;The internal SSDs are absurdly small and very slow for both reading
and writing. This isn't a big deal because i'm basically only using
them for the bootloader, kernel, and initramfs. But i'm surprised
that they could even find 128MiB devices in these days of \$10 1GiB
flash units.&lt;/dd&gt;
&lt;dt&gt;processor&lt;/dt&gt;
&lt;dd&gt;&lt;code&gt;/proc/cpuinfo&lt;/code&gt; reports two cores of a
&lt;code&gt;Intel(R) Core(TM)2 Duo CPU T5500 @ 1.66GHz&lt;/code&gt;, each with \~3333
bogomips, and apparently without &lt;a href="http://www.linux-kvm.org/page/FAQ#How_can_I_tell_if_I_have_Intel_VT_or_AMD-V.3F"&gt;hardware virtualization
support&lt;/a&gt;.
It's not clear to me whether the lack of virtualization support is
something that could be fixed with a BIOS upgrade.&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;I used &lt;a href="http://www.andymillar.co.uk/blog/2010/04/11/installing-linux-on-a-thecus-n8800pro/"&gt;Andy Millar's nice
description&lt;/a&gt;
of how to get access to the BIOS -- I found i didn't need a hacksaw to
modify the VGA cable i had. just pliers to remove the outer metal shield
on the side of the connector i plugged into the open socket.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;lshw&lt;/code&gt; sees four &lt;code&gt;SiI 3132 Serial ATA Raid II Controller&lt;/code&gt; PCI devices,
each of which appears to support two SATA ports. I'm currently using
only four of the 8 SATA bays, so i've tried to distribute the disks so
that each of them is attached to an independent PCI device (instead of
having two disks on one PCI device, and another PCI device idle). I
don't know if this makes a difference, though, in the RAID10
configuration i'm using.&lt;/p&gt;
&lt;p&gt;There's also a neat 2-line character-based LCD display on the front
panel which apparently &lt;a href="http://thecususergroup.proboards.com/index.cgi?board=n5500modifications&amp;amp;action=display&amp;amp;thread=4089"&gt;can be driven by talking to a serial
port&lt;/a&gt;,
though i haven't tried. Apparently there are also LEDs that might be
controllable directly from the kernel via ICH7 and GPIO, but i haven't
tried that yet either.&lt;/p&gt;
&lt;p&gt;Any suggestions on how to think about or proceed with a BIOS upgrade to
get access to the full 4GiB of RAM, BIOS-over-serial, and/or enable
hardware virtualization?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/n8800pro"&gt;n8800pro&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/thecus"&gt;thecus&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>auto-built debirf images</title><link href="https://dkg.fifthhorseman.net/blog/auto-built-debirf-images.html" rel="alternate"/><published>2011-03-29T08:00:00-04:00</published><updated>2011-03-29T08:00:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2011-03-29:/blog/auto-built-debirf-images.html</id><summary type="html">&lt;p&gt;&lt;code&gt;jrollins&lt;/code&gt; and i recently did a bunch of cleanup work on
&lt;a href="http://cmrg.fifthhorseman.net/wiki/debirf"&gt;debirf&lt;/a&gt;, with the result
that debirf 0.30 can now build all the shipped example profiles without
error (well, as long as &lt;code&gt;debootstrap --variant=fakechroot&lt;/code&gt; is working
properly -- apprently that's not the case for fakechroot 2.9 in squeeze …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;code&gt;jrollins&lt;/code&gt; and i recently did a bunch of cleanup work on
&lt;a href="http://cmrg.fifthhorseman.net/wiki/debirf"&gt;debirf&lt;/a&gt;, with the result
that debirf 0.30 can now build all the shipped example profiles without
error (well, as long as &lt;code&gt;debootstrap --variant=fakechroot&lt;/code&gt; is working
properly -- apprently that's not the case for fakechroot 2.9 in squeeze
right now, which is why i've uploaded a backport of 2.14).&lt;/p&gt;
&lt;p&gt;To try to avoid getting into a broken state again, we set up an
autobuilder to create the images from the three example profiles
(minimal, rescue, and xkiosk) for amd64 systems. The logs for these
builds are published (with changes) nightly at:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;git://debirf.cmrg.net/debirf-autobuilder-logs
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;But even better, we are also publishing &lt;a href="http://debirf.cmrg.net/autobuilds/"&gt;the auto-generated debirf
images themselves&lt;/a&gt;. So, for example,
if you've got an amd64-capable machine with a decent amount of RAM
(512MiB is easily enough), you can download a rescue kernel and image
into &lt;code&gt;/boot/debirf/&lt;/code&gt;, add a stanza to your bootloader, and be able to
reboot to it cleanly, without having to sort out the debirf image
creation process yourself.&lt;/p&gt;
&lt;p&gt;We're also providing ISOs so people who still use optical media don't
have to format their own.&lt;/p&gt;
&lt;p&gt;Please be sure to verify the checksums of the files you download. The
checksums themselves are signed by the OpenPGP key for
&lt;code&gt;Debirf Autobuilder &amp;lt;debirf@cmrg.net&amp;gt;&lt;/code&gt;, which i've certified and
published to the keyserver network.&lt;/p&gt;
&lt;p&gt;What's next? It would be nice to have auto-built images for i386 and
other architectures. And if someone has a good idea for a new example
profile that we should also be auto-building, please submit a bug to the
BTS so we can try to sort it out.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/debirf"&gt;debirf&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>CryptLib and the OpenSSL License</title><link href="https://dkg.fifthhorseman.net/blog/cryptlib-and-the-openssl-license.html" rel="alternate"/><published>2011-03-16T04:40:00-04:00</published><updated>2011-03-16T04:40:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2011-03-16:/blog/cryptlib-and-the-openssl-license.html</id><summary type="html">&lt;p&gt;I spent part of today looking at packaging &lt;a href="http://www.cs.auckland.ac.nz/~pgut001/cryptlib/"&gt;Peter Gutmann's
CryptLib&lt;/a&gt; for
&lt;a href="http://debian.org/"&gt;debian&lt;/a&gt;. My conclusion: it may not be worth my
time.&lt;/p&gt;
&lt;p&gt;One of the main reasons i wanted to package it for debian is because i
would like to see more
&lt;a href="https://tools.ietf.org/html/rfc4880"&gt;OpenPGP&lt;/a&gt;-compliant free software
available to debian users …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I spent part of today looking at packaging &lt;a href="http://www.cs.auckland.ac.nz/~pgut001/cryptlib/"&gt;Peter Gutmann's
CryptLib&lt;/a&gt; for
&lt;a href="http://debian.org/"&gt;debian&lt;/a&gt;. My conclusion: it may not be worth my
time.&lt;/p&gt;
&lt;p&gt;One of the main reasons i wanted to package it for debian is because i
would like to see more
&lt;a href="https://tools.ietf.org/html/rfc4880"&gt;OpenPGP&lt;/a&gt;-compliant free software
available to debian users and developers, particularly if the code is
GPL-compatible.&lt;/p&gt;
&lt;p&gt;Cryptlib makes it quite clear that &lt;a href="http://www.cs.auckland.ac.nz/~pgut001/cryptlib/download.html"&gt;it intends to be
GPL-compatible&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;cryptlib is distributed under a dual license that allows free,
open-source use under a GPL-compatible license and closed-source use
under a standard commercial license.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;However, a significant portion of the cryptlib codebase (particularly
within the &lt;code&gt;bn/&lt;/code&gt; and &lt;code&gt;crypt/&lt;/code&gt; directories) appears to derive directly
from OpenSSL, and it retains Eric Young's copyright and licensing. This
licensing retains the so-called "advertising clause" that &lt;a href="http://people.gnome.org/~markmc/openssl-and-the-gpl.html"&gt;is generally
acknowledged to be deliberately incompatible with the
GPL&lt;/a&gt;. (A
common counterargument for this incompatibility is that OpenSSL should
be considered a "System Library" for
&lt;a href="http://www.gnu.org/licenses/gpl.html"&gt;GPL&lt;/a&gt;'ed tools that link against
it; whether or not you believe this for tools linked against OpenSSL,
this counterargument clearly does not hold for a project that embeds and
ships OpenSSL code directly, as CryptLib does)&lt;/p&gt;
&lt;p&gt;This does not mean that CryptLib is not free software (it is!), nor does
it mean that you cannot link it against GPL'ed code (you can!). However,
you probably can't &lt;em&gt;distribute&lt;/em&gt; the results of linking CryptLib against
any GPL'ed code, because the GPL is incompatible with the OpenSSL
license.&lt;/p&gt;
&lt;p&gt;The un-distributability of derived GPL-covered works makes the CryptLib
package much less appealing to me, since i want to be able to write
distributable code that links against useful libraries, and many of the
libaries i care about happen to be under the GPL.&lt;/p&gt;
&lt;p&gt;I also note that Peter Gutmann and &lt;a href="http://cryptlib.com"&gt;CryptLib Security
Software&lt;/a&gt; (apparently some sort of company set up
to distribute CryptLib) may be in violation of Eric Young's License,
which states:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mf"&gt;3.&lt;/span&gt; &lt;span class="nv"&gt;All&lt;/span&gt; &lt;span class="s s-Atom"&gt;advertising&lt;/span&gt; &lt;span class="s s-Atom"&gt;materials&lt;/span&gt; &lt;span class="s s-Atom"&gt;mentioning&lt;/span&gt; &lt;span class="s s-Atom"&gt;features&lt;/span&gt; &lt;span class="s s-Atom"&gt;or&lt;/span&gt; &lt;span class="s s-Atom"&gt;use&lt;/span&gt; &lt;span class="s s-Atom"&gt;of&lt;/span&gt; &lt;span class="s s-Atom"&gt;this&lt;/span&gt; &lt;span class="s s-Atom"&gt;software&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt;    &lt;span class="s s-Atom"&gt;must&lt;/span&gt; &lt;span class="s s-Atom"&gt;display&lt;/span&gt; &lt;span class="s s-Atom"&gt;the&lt;/span&gt; &lt;span class="s s-Atom"&gt;following&lt;/span&gt; &lt;span class="s s-Atom"&gt;acknowledgement&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt;    &lt;span class="s2"&gt;&amp;quot;This product includes cryptographic software written by&lt;/span&gt;
&lt;span class="s2"&gt;*     Eric Young (eay@cryptsoft.com)&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt;    &lt;span class="nv"&gt;The&lt;/span&gt; &lt;span class="s s-Atom"&gt;word&lt;/span&gt; &lt;span class="s s-Atom"&gt;&amp;#39;cryptographic&amp;#39;&lt;/span&gt; &lt;span class="s s-Atom"&gt;can&lt;/span&gt; &lt;span class="s s-Atom"&gt;be&lt;/span&gt; &lt;span class="s s-Atom"&gt;left&lt;/span&gt; &lt;span class="s s-Atom"&gt;out&lt;/span&gt; &lt;span class="s s-Atom"&gt;if&lt;/span&gt; &lt;span class="s s-Atom"&gt;the&lt;/span&gt; &lt;span class="s s-Atom"&gt;rouines&lt;/span&gt; &lt;span class="s s-Atom"&gt;from&lt;/span&gt; &lt;span class="s s-Atom"&gt;the&lt;/span&gt; &lt;span class="s s-Atom"&gt;library&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt;    &lt;span class="s s-Atom"&gt;being&lt;/span&gt; &lt;span class="s s-Atom"&gt;used&lt;/span&gt; &lt;span class="s s-Atom"&gt;are&lt;/span&gt; &lt;span class="o"&gt;not&lt;/span&gt; &lt;span class="s s-Atom"&gt;cryptographic&lt;/span&gt; &lt;span class="nf"&gt;related&lt;/span&gt; &lt;span class="o"&gt;:-&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;A &lt;a href="https://encrypted.google.com/search?q=site%3Acryptlib.com%20%27eric%20young%27"&gt;Google search for Eric Young's name on
cryptlib.com&lt;/a&gt;
yields no hits. I do find his name on page 340 of &lt;a href="http://www.cryptlib.com/downloads/manual.pdf"&gt;the Cryptlib
manual&lt;/a&gt;, but that hardly
seems like it covers "All advertising materials mentioning features or
use of this software". I suppose it's also possible that CryptLib has
negotiated an alternate license with Eric Young that I simply don't know
about.&lt;/p&gt;
&lt;p&gt;In summary: i think CryptLib could go into debian, but its incorporation
of OpenSSL-licensed code makes it less useful than i was hoping it would
be.&lt;/p&gt;
&lt;p&gt;I have a few other concerns about the package after looking it over in
more detail. I suspect these are fixable one way or another, but i
haven't sorted them out yet. I'm not sure i'll spend the time to do so
based on the licensing issues i sorted out above.&lt;/p&gt;
&lt;p&gt;But in case anyone feels inspired, the other concerns i see are:&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;embedded code copies&lt;/dt&gt;
&lt;dd&gt;In addition to embedded (and slightly-modified) copies of &lt;code&gt;bn/&lt;/code&gt; and
&lt;code&gt;crypt/&lt;/code&gt; from OpenSSL, CryptLib contains an embedded copy of zlib.
&lt;a href="http://bugs.debian.org/392362"&gt;Debian has good reasons&lt;/a&gt; for wanting
&lt;a href="http://www.debian.org/doc/debian-policy/ch-source.html#s-embeddedfiles"&gt;to avoid embedded code
copies&lt;/a&gt;.
I've got it CryptLib building against the system copy of zlib, but
the bits copied from OpenSSL seem to be more heavily patched, which
might complicate relying on the system version.&lt;/dd&gt;
&lt;dt&gt;executable stack&lt;/dt&gt;
&lt;dd&gt;
&lt;p&gt;lintian reports
&lt;a href="http://lintian.debian.org/tags/shlib-with-executable-stack.html"&gt;shlib-with-executable-stack&lt;/a&gt;
for the library after it is built. I don't fully understand what
this means or how to fix it, but i suspect it derives from the
following set of object files that also have an executable stack:&lt;/p&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cryptlib&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cryptlib$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kr"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;foo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;find&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;iname&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;do&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="kr"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;!&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kr"&gt;read&lt;/span&gt;&lt;span class="n"&gt;elf&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;S&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;$foo&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;grep&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;q&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="ow"&gt;not&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GNU&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;stack&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kr"&gt;then&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;$foo&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;fi&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;
&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;shared&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;desenc&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;shared&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rc5enc&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;
&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;shared&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;md5asm&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;shared&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;castenc&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;
&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;shared&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bfenc&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;
&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;shared&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rmdasm&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;
&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;shared&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sha1asm&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;
&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;shared&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bn_asm&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;
&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;shared&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rc4enc&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;
&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cryptlib&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cryptlib$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;They&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;probably&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;all&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;need&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;be&lt;/span&gt;
&lt;span class="n"&gt;fixed&lt;/span&gt;&lt;span class="p"&gt;](&lt;/span&gt;&lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//www.gentoo.org/proj/en/hardened/gnu-stack.xml), unless&lt;/span&gt;
&lt;span class="n"&gt;there&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;good&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;reason&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;them&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;be&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;that&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;way&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;which&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;case&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="no"&gt;they&lt;/span&gt;
&lt;span class="no"&gt;need&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="no"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="no"&gt;be&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="no"&gt;documented&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;dl&gt;
&lt;dt&gt;non-PIC code&lt;/dt&gt;
&lt;dd&gt;lintian reports
&lt;a href="http://lintian.debian.org/tags/shlib-with-non-pic-code.html"&gt;shlib-with-non-pic-code&lt;/a&gt;
on the library after it is built. I don't fully understand what this
means, or how to resolve it cleanly, but i imagine this is just a
question of sorting out the details.&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;Anyone interested in using my packaging attempts as a jumping off point
can start with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;git clone git://lair.fifthhorseman.net/~dkg/cryptlib
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Oh, and please correct me about anything in this post; I'd be especially
happy to hear that my analysis of the licensing issues above is wrong :)&lt;/p&gt;</content><category term="misc"/><category term="cryptlib"/><category term="gpl"/><category term="licensing"/><category term="openssl"/></entry><entry><title>PHP, MySQL, and SSL?</title><link href="https://dkg.fifthhorseman.net/blog/php-mysql-and-ssl.html" rel="alternate"/><published>2011-03-07T06:02:00-05:00</published><updated>2011-03-07T06:02:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2011-03-07:/blog/php-mysql-and-ssl.html</id><summary type="html">&lt;p&gt;Is there a way to access a MySQL database over the network from PHP and
be confident that&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the connection is actually using SSL, and&lt;/li&gt;
&lt;li&gt;the server's X.509 certificate was successfully verified?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;As far as i can tell, when using &lt;a href="http://www.php.net/manual/en/book.mysql.php"&gt;the stock MySQL
bindings&lt;/a&gt;, setting
&lt;a href="http://www.php.net/manual/en/mysql.constants.php#mysql.constants"&gt;MYSQL_CLIENT_SSL&lt;/a&gt;
is purely advisory …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Is there a way to access a MySQL database over the network from PHP and
be confident that&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the connection is actually using SSL, and&lt;/li&gt;
&lt;li&gt;the server's X.509 certificate was successfully verified?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;As far as i can tell, when using &lt;a href="http://www.php.net/manual/en/book.mysql.php"&gt;the stock MySQL
bindings&lt;/a&gt;, setting
&lt;a href="http://www.php.net/manual/en/mysql.constants.php#mysql.constants"&gt;MYSQL_CLIENT_SSL&lt;/a&gt;
is purely advisory (i.e. it won't fail if the server doesn't advertise
SSL support). This means it won't defend against an active network
attacker performing the equivalent of
&lt;a href="http://www.thoughtcrime.org/software/sslstrip/"&gt;sslstrip&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Even if &lt;code&gt;MYSQL_CLIENT_SSL&lt;/code&gt; was stronger than an advisory flag, i can't
seem to come up with a way to tell PHP's basic MySQL bindings the
equivalent of &lt;a href="http://dev.mysql.com/doc/refman/5.0/en/ssl-options.html#option_general_ssl-ca"&gt;the &lt;code&gt;--ssl-ca&lt;/code&gt;
flag&lt;/a&gt;
to the &lt;code&gt;mysql&lt;/code&gt; client binary. Without being able to configure this, a
"man-in-the-middle" should be able to intercept the connection by
offering their own certificate on their endpoint, and otherwise relaying
the traffic. A client that does not verify the server's identity would
be none the wiser.&lt;/p&gt;
&lt;p&gt;One option to avoid a MITM attack would be for the server to require
client-side certs via the &lt;a href="http://dev.mysql.com/doc/refman/5.0/en/grant.html#id822905"&gt;&lt;code&gt;REQUIRE&lt;/code&gt; option for a &lt;code&gt;GRANT&lt;/code&gt;
statement&lt;/a&gt;,
but the basic MySQL bindings for php don't seem to support that either.&lt;/p&gt;
&lt;p&gt;PHP's &lt;a href="http://www.php.net/manual/en/book.mysqli.php"&gt;mysqli bindings&lt;/a&gt;
(MySQL &lt;em&gt;I&lt;/em&gt;mproved, i think) feature a command called
&lt;a href="http://php.net/manual/en/mysqli.ssl-set.php"&gt;&lt;code&gt;ssl_set()&lt;/code&gt;&lt;/a&gt; which appears
to allow client-side certificate support. But its documentation isn't
clear on how it handles an invalid/expired/revoked server certificate
(let alone a server that announces that it doesn't support SSL), and it
also mentions:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This function does nothing unless OpenSSL support is enabled.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Given that debian MySQL packages don't use OpenSSL because of &lt;a href="http://people.gnome.org/~markmc/openssl-and-the-gpl.html"&gt;licensing
incompatibilities with the
GPL&lt;/a&gt;, i'm left
wondering if packages built against yaSSL support this feature. And i'm
more than a little bit leery that i have no way of telling whether my
configuration request succeeded, or whether this function just happily
did nothing because the interpreter got re-built with the wrong flags.
Shouldn't the function fail explicitly if it cannot meet the user's
request?&lt;/p&gt;
&lt;p&gt;Meanwhile, the &lt;a href="http://www.php.net/manual/en/ref.pdo-mysql.php"&gt;PDO bindings for
MySQL&lt;/a&gt; apparently &lt;a href="http://bugs.php.net/bug.php?id=48587"&gt;don't
support SSL connections at all&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;What's going on here? Does no one use MySQL over the network via PHP?
Given the number of LAMP-driven data centers, this seems pretty
unlikely. Do PHP+MySQL users just not care about privacy or integrity of
their data?&lt;/p&gt;
&lt;p&gt;Or (please let this be the case) have i just somehow missed the obvious
documentation?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/mysql"&gt;mysql&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/php"&gt;php&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/question"&gt;question&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/security"&gt;security&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/ssl"&gt;ssl&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/tls"&gt;tls&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Turning my back on the IEEE</title><link href="https://dkg.fifthhorseman.net/blog/turning-my-back-on-the-ieee.html" rel="alternate"/><published>2011-03-01T18:32:00-05:00</published><updated>2011-03-01T18:32:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2011-03-01:/blog/turning-my-back-on-the-ieee.html</id><summary type="html">&lt;p&gt;I used to maintain a membership with &lt;a href="http://ieee.org/"&gt;IEEE&lt;/a&gt;. I no
longer do.&lt;/p&gt;
&lt;p&gt;The latest nonsense to come from them is &lt;a href="http://www.crypto.com/blog/copywrongs/"&gt;a change for the worse in
their copyright assignment
policy&lt;/a&gt;, which i thought was
&lt;a href="http://cr.yp.to/writing/ieee.html"&gt;already problematic&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Other engineering societies (IETF, USENIX, etc) continue to do socially
relevant, useful work without …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I used to maintain a membership with &lt;a href="http://ieee.org/"&gt;IEEE&lt;/a&gt;. I no
longer do.&lt;/p&gt;
&lt;p&gt;The latest nonsense to come from them is &lt;a href="http://www.crypto.com/blog/copywrongs/"&gt;a change for the worse in
their copyright assignment
policy&lt;/a&gt;, which i thought was
&lt;a href="http://cr.yp.to/writing/ieee.html"&gt;already problematic&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Other engineering societies (IETF, USENIX, etc) continue to do socially
relevant, useful work without attempting to control copyright of work
contributed to them. This just makes IEEE look like a power- and
money-hungry organization, rather than a force for positive advancement
of technology.&lt;/p&gt;
&lt;p&gt;For shame, IEEE.&lt;/p&gt;
&lt;p&gt;I will not consider reinstating my membership unless the organization
changes their copyright assignment and publication policy to better
reflect the spirit of scientific inquiry and technological advancement
they should stand for.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/freedom"&gt;freedom&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/ieee"&gt;ieee&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/policy"&gt;policy&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>resetting passphrases for mapped LUKS volumes</title><link href="https://dkg.fifthhorseman.net/blog/resetting-passphrases-for-mapped-luks-volumes.html" rel="alternate"/><published>2011-01-16T19:57:00-05:00</published><updated>2011-01-16T19:57:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2011-01-16:/blog/resetting-passphrases-for-mapped-luks-volumes.html</id><summary type="html">&lt;p&gt;Let's say you set up a machine using an encrypted disk with LUKS
(debian-installer's partman makes this wonderfully easy!). You choose an
initial passphrase, get the machine working, and it's working great.
Then, you need to restart it, and realize that (for whatever reason)
you've forgotten or lost the passphrase …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Let's say you set up a machine using an encrypted disk with LUKS
(debian-installer's partman makes this wonderfully easy!). You choose an
initial passphrase, get the machine working, and it's working great.
Then, you need to restart it, and realize that (for whatever reason)
you've forgotten or lost the passphrase for the volume. oops! (i'm sure
this has never happened to you -- let's just pretend it's your
less-fortunate friend).&lt;/p&gt;
&lt;p&gt;If your system is still running, and you have superuser access to it,
you can actually set a new passphrase for the LUKS volume using
information that the dm-crypt kernel module has about the in-use
mapping. In my examples, i'll imagine that the source volume is
&lt;code&gt;/dev/XXX2&lt;/code&gt; and the exported cleartext volume is known by the
device-mapper as &lt;code&gt;XXX2_crypt&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;In the bigger picture, this should serve as a reminder that even though
your disk is encrypted, if someone gets live access to the superuser
account on a system with the encryption keys loaded, your data is no
longer secret.&lt;/p&gt;
&lt;p&gt;Before you do any tweaking, you might want to back up your LUKS header,
just in case:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;example&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;umask&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0770&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;example&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cryptsetup&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;luksHeaderBackup&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;XXX2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;header&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;backup&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;XXX2&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;luksheader&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;backup0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;example&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Maybe also copy that off the machine, since a copy of the LUKS header
stored within its own volume isn't terribly useful for a backup-recovery
situation.&lt;/p&gt;
&lt;p&gt;You might also be interested in looking at the contents of the LUKS
header:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;example&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="c1"&gt;# cryptsetup luksDump /dev/XXX2LUKS header information for /dev/XXX2Version:        1Cipher name:    aesCipher mode:      cbc-essiv:sha256Hash spec:       sha1Payload offset:  2056MK bits:         256MK digest:      93 51 6c 66 ec ce 32 54 6f 6b 52 d1 27 9b 5a 62 6f 6b 52 d1MK salt:        b2 ca 20 49 9f 78 49 c2 fe 15 b4 0f 74 11 23 49                  64 9e 61 bb f2 82 60 47 a5 76 fa a4 24 0e 5a 7eMK iterations:    10UUID:              052f1da0-21a1-11e0-ac64-0800200c9a66Key Slot 0: ENABLED    Iterations:             218733   Salt:                   f2 ae 8c 53 48 a5 f0 bf e1 2c 06 5f 5a bd ff d9                          9a 2e d1 49 3a 63 f8 49 82 ed ae 86 7b 7b 7e 76  Key material offset:    8    AF stripes:             4000Key Slot 1: DISABLEDKey Slot 2: DISABLEDKey Slot 3: DISABLEDKey Slot 4: DISABLEDKey Slot 5: DISABLEDKey Slot 6: DISABLEDKey Slot 7: DISABLED0 root@example:~# &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now, the fix: We pull the live "master key" from the running device map,
and fill a new luksKeySlot from it (this example uses bash's &lt;code&gt;&amp;lt;()&lt;/code&gt;
syntax for process substitution -- if you use a different shell, i'm
sure you can find a different way to do it):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;example&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cryptsetup&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;master&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dmsetup&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;showkeys&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;tab&lt;/span&gt;&lt;span class="n"&gt;le&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;awk&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;/^&lt;/span&gt;&lt;span class="n"&gt;XXX2_crypt&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kr"&gt;print&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="mf"&gt;6&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;}&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;tr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;&amp;#39;\&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;perl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="kr"&gt;print&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pack&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;H*&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;STDIN&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;luksAddKey&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;XXX2Enter&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kr"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;passphrase&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kr"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;slot&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;abc123Verify&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;passphrase&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;abc1232&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;example&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;(note that the &lt;code&gt;luksAddKey&lt;/code&gt; invocation above returned an error code of 2
even though it succeeded. I think this is &lt;a href="http://bugs.debian.org/610258"&gt;a bug in cryptsetup's return
code&lt;/a&gt;, not a bug in the password
resetting -- it should have returned 0 instead of 2).&lt;/p&gt;
&lt;p&gt;You can check to see that a new key slot was enabled by re-running
&lt;code&gt;cryptsetup luksDump&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;And if you really want to double-check before you reboot, you can try
enabling a third keyslot using the passphrase you just added, since this
would not succeed if your new passphrase failed to unlock any of the
existing keyslots:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;example&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cryptsetup&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;luksAddKey&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;XXX2Enter&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;any&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;passphrase&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;abc123Enter&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kr"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;passphrase&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kr"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;slot&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;anotherpassphraseVerify&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;passphrase&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;anotherpassphrase0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;example&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;You can also get rid of the original keyslot (which you don't know the
passphrase to) like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;example&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cryptsetup&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;luksKillSlot&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;XXX2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;any&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;remaining LUKS passphrase: abc1230 root@example:~# &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;(the above commands were all demonstrated using debian testing, with
cryptsetup 2:1.1.3-4 and dmsetup 2:1.02.48-4)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;:
&lt;a href="https://debian-administration.org/tag/cryptsetup"&gt;cryptsetup&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/dmsetup"&gt;dmsetup&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/luks"&gt;luks&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/tip"&gt;tip&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Liberating Knowledge: A Librarian's Manifesto</title><link href="https://dkg.fifthhorseman.net/blog/liberating-knowledge-a-librarians-manifesto.html" rel="alternate"/><published>2011-01-06T05:52:00-05:00</published><updated>2011-01-06T05:52:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2011-01-06:/blog/liberating-knowledge-a-librarians-manifesto.html</id><summary type="html">&lt;p&gt;&lt;a href="http://alycia.brokenja.ws/"&gt;A friend&lt;/a&gt; just pointed me to &lt;a href="http://www.nea.org/assets/img/PubThoughtAndAction/A10Fister1.pdf"&gt;Liberating
Knowledge: A Librarian's Manifesto for
Change&lt;/a&gt;
by &lt;a href="https://barbarafister.wordpress.com/"&gt;Barbara Fister&lt;/a&gt;, an &lt;a href="http://homepages.gac.edu/~fister/vita.html"&gt;academic
librarian&lt;/a&gt; who also happens
to &lt;a href="http://barbarafister.com/"&gt;write mystery novels&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;She has an excellent perspective on the meaning of libraries, and the
tradeoffs involved with the current societal trend toward privatizing
knowledge through so-called …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://alycia.brokenja.ws/"&gt;A friend&lt;/a&gt; just pointed me to &lt;a href="http://www.nea.org/assets/img/PubThoughtAndAction/A10Fister1.pdf"&gt;Liberating
Knowledge: A Librarian's Manifesto for
Change&lt;/a&gt;
by &lt;a href="https://barbarafister.wordpress.com/"&gt;Barbara Fister&lt;/a&gt;, an &lt;a href="http://homepages.gac.edu/~fister/vita.html"&gt;academic
librarian&lt;/a&gt; who also happens
to &lt;a href="http://barbarafister.com/"&gt;write mystery novels&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;She has an excellent perspective on the meaning of libraries, and the
tradeoffs involved with the current societal trend toward privatizing
knowledge through so-called "intellectual property" regulations. In a
great critique of the passivity of academia and libraries in the face of
attempts at intellectual
&lt;a href="https://secure.wikimedia.org/wikipedia/en/wiki/Enclosure"&gt;enclosure&lt;/a&gt; by
private corporations, she writes:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This uninformed indifference is laying the groundwork for a new
tragedy of the commons: a world in which knowledge is turned into
intellectual property, monetizied, and made artificially scarce.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;She closes with a six-point manifesto that begins:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Liberation bibliography arises out of outrage at the injustice of the
current system. It’s not about saving money, it’s about the empowering
nature of knowledge and the belief that it shouldn’t be a luxury good
for the few.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The article abounds in examples of heinous arrangements in the current
system that seem to be accepted as standard procedure, and clear
thinking about what the actual tradeoffs are (and how we, as a society,
are making them poorly).&lt;/p&gt;
&lt;p&gt;If i had one objection, it would be that she neglects to mention
increased surveillance as one of the problems that come with
privatization of knowledge. Our abilities to read privately and
anonymously, and to correspond confidentially are at risk because of
these systems of control.&lt;/p&gt;
&lt;p&gt;Anyway, I'd love to see more open allegiances between librarians and
free software folks; the ideals and struggles are very much in parallel.
Go talk to your librarian friends about this stuff today!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/academia"&gt;academia&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/freedom"&gt;freedom&lt;/a&gt;, &lt;a href="https://debian-administration.org/tag/intellectual%20property"&gt;intellectual
property&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/libraries"&gt;libraries&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>converting eviews models to gretl?</title><link href="https://dkg.fifthhorseman.net/blog/converting-eviews-models-to-gretl.html" rel="alternate"/><published>2010-12-13T00:17:00-05:00</published><updated>2010-12-13T00:17:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2010-12-13:/blog/converting-eviews-models-to-gretl.html</id><summary type="html">&lt;p&gt;Someone recently pointed me to &lt;a href="http://gennaro.zezza.it/software/eviews/v6/gl03sim_a.prg"&gt;some economic/statistical
models&lt;/a&gt; that
were designed for &lt;a href="http://www.eviews.com/"&gt;eviews (a proprietary tool)&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;They were looking for help converting the model into a format that could
work with &lt;a href="http://gretl.sourceforge.net/"&gt;gretl (the Gnu Regression, Econometrics and Time-series
Library)&lt;/a&gt;. I'm afraid i'm an economics
dunce, and i have no …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Someone recently pointed me to &lt;a href="http://gennaro.zezza.it/software/eviews/v6/gl03sim_a.prg"&gt;some economic/statistical
models&lt;/a&gt; that
were designed for &lt;a href="http://www.eviews.com/"&gt;eviews (a proprietary tool)&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;They were looking for help converting the model into a format that could
work with &lt;a href="http://gretl.sourceforge.net/"&gt;gretl (the Gnu Regression, Econometrics and Time-series
Library)&lt;/a&gt;. I'm afraid i'm an economics
dunce, and i have no experience with this stuff. Any pointers?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;:
&lt;a href="https://debian-administration.org/tag/conversion"&gt;conversion&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/economics"&gt;economics&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/gretl"&gt;gretl&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>forwarding unix domain sockets with ssh and socat</title><link href="https://dkg.fifthhorseman.net/blog/forwarding-unix-domain-sockets-with-ssh-and-socat.html" rel="alternate"/><published>2010-12-02T09:41:00-05:00</published><updated>2010-12-02T09:41:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2010-12-02:/blog/forwarding-unix-domain-sockets-with-ssh-and-socat.html</id><summary type="html">&lt;p&gt;i suspect a lot of people are used to forwarding TCP sockets with SSH --
for example, to connect locally to a mysql daemon that runs only on the
loopback interface of a remote machine (this is debian's default
&lt;code&gt;mysql-server&lt;/code&gt; configuration):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;oExitOnForwardFailure&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;yes&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;L&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3306&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="nl"&gt;localhost&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3306&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;remoteuser …&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;i suspect a lot of people are used to forwarding TCP sockets with SSH --
for example, to connect locally to a mysql daemon that runs only on the
loopback interface of a remote machine (this is debian's default
&lt;code&gt;mysql-server&lt;/code&gt; configuration):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;oExitOnForwardFailure&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;yes&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;L&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3306&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="nl"&gt;localhost&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3306&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;remoteuser&lt;/span&gt;&lt;span class="nv"&gt;@mysqlserver&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;example&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;But sometimes, the remote service runs on a UNIX-domain socket, not on a
TCP socket -- for example, debian's default configuration for
&lt;code&gt;postgresql&lt;/code&gt; is to have it listen only on a UNIX domain socket in
&lt;code&gt;/var/run/postgresql&lt;/code&gt;, and use &lt;code&gt;SO_PEERCRED&lt;/code&gt; with a simple system
account == psql account mapping scheme to authenticate users without
needing any extra credentials. This is not quite as simple to forward
over ssh, but it's doable as long as &lt;code&gt;socat&lt;/code&gt; is installed on both your
local host and on the remote postgres server.&lt;/p&gt;
&lt;p&gt;Here's one way to do it if &lt;code&gt;$SOCKET_DIR&lt;/code&gt; points to the full path of a
directory under the user's control (this is all one command, split
across lines for easier reading):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;socat&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;UNIX-LISTEN:$SOCKET_DIR/.s.PGSQL.5432,reuseaddr,fork&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;\&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="n"&gt;EXEC&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;ssh remoteuser@psqlserver.example socat STDIO UNIX-CONNECT\:/var/run/postgresql/.s.PGSQL.5432&amp;#39;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Then, you'd connect with something like:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;psql &amp;quot;user=remoteuser host=$SOCKET_DIR&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Each such &lt;code&gt;psql&lt;/code&gt; connection will trigger an &lt;code&gt;ssh&lt;/code&gt; connection to be made.
Of course, this won't work well if ssh has to prompt for passwords, but
&lt;a href="https://debian-administration.org/users/dkg/weblog/64"&gt;you should be using &lt;code&gt;ssh-agent&lt;/code&gt;
anyway&lt;/a&gt;, right?&lt;/p&gt;
&lt;p&gt;There are at least a couple nice features of being able to use
postgresql from a local client like this:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;your psql client can load files from your local machine, and can
    dump/export files to the local machine.&lt;/li&gt;
&lt;li&gt;your &lt;code&gt;~/.psql_history&lt;/code&gt; stays local, so you can review what you did
    even when you're offline&lt;/li&gt;
&lt;li&gt;you can run local RDBMS administrative GUIs like &lt;code&gt;pgadmin3&lt;/code&gt; with
    minimal network traffic and no extra packages installed on the
    server.&lt;/li&gt;
&lt;li&gt;unlike forwarding TCP ports (where any other user account on the
    machine can hop onto your connection), you can control access to
    your local UNIX-domain socket with standard filesystem permissions
    on &lt;code&gt;$SOCKET_DIR&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Of course, &lt;code&gt;postgresql&lt;/code&gt; itself already comes with a nice range of
high-quality network-capable authentication mechanisms you could use.
But many of them (like GSSAPI or X.509 mutual key-based authentication
over TLS) require additional infrastructure setup; and you probably
already have &lt;code&gt;sshd&lt;/code&gt; up and running on that machine -- so why not make
use of it?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;:
&lt;a href="https://debian-administration.org/tag/postgresql"&gt;postgresql&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/socat"&gt;socat&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/ssh"&gt;ssh&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/tip"&gt;tip&lt;/a&gt;, &lt;a href="https://debian-administration.org/tag/unix-domain%20socket"&gt;unix-domain
socket&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>registrars and AAAA glue records</title><link href="https://dkg.fifthhorseman.net/blog/registrars-and-aaaa-glue-records.html" rel="alternate"/><published>2010-11-17T23:43:00-05:00</published><updated>2010-11-17T23:43:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2010-11-17:/blog/registrars-and-aaaa-glue-records.html</id><summary type="html">&lt;p&gt;i've been on an IPv6 kick recently, getting dual-stack systems up and
working for a bunch of folks.&lt;/p&gt;
&lt;p&gt;I'd like to make some of these services reachable by IPv6-only clients.
this suggests that i need a range of details sorted out, but i think the
one piece left for me …&lt;/p&gt;</summary><content type="html">&lt;p&gt;i've been on an IPv6 kick recently, getting dual-stack systems up and
working for a bunch of folks.&lt;/p&gt;
&lt;p&gt;I'd like to make some of these services reachable by IPv6-only clients.
this suggests that i need a range of details sorted out, but i think the
one piece left for me is the glue records for the nameservice. i use
in-bailiwick nameservers for DNS where possible, which means i want
mandatory glue records. that is, the primary namserver for &lt;code&gt;example.org&lt;/code&gt;
is probably something like &lt;code&gt;ns0.example.org&lt;/code&gt;, which means that the &lt;code&gt;org&lt;/code&gt;
nameservers themselves need to store not only the &lt;code&gt;NS&lt;/code&gt; record, but an
&lt;code&gt;A&lt;/code&gt; record that corresponds to the name pointed to by the &lt;code&gt;NS&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;But for IPv6-only clients that do their own name resolution, i need
&lt;code&gt;AAAA&lt;/code&gt; glue records, and i haven't yet found a registrar that will push
&lt;code&gt;AAAA&lt;/code&gt; glue records &lt;em&gt;for the same names as the existing &lt;code&gt;A&lt;/code&gt; glue&lt;/em&gt; into
the &lt;code&gt;org&lt;/code&gt; zone.&lt;/p&gt;
&lt;p&gt;Do you know of a registrar that will do this?&lt;/p&gt;
&lt;p&gt;I've tried:&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;&lt;a href="https://dotster.com/"&gt;dotster&lt;/a&gt;&lt;/dt&gt;
&lt;dd&gt;Dotster seems to only allow IPv4 glue to be entered on their
&lt;a href="https://secure.dotster.com/account/nameserver/registerns.php"&gt;Register Nameserver config
page&lt;/a&gt;
(needs a dotster login to see it). They haven't yet yet responded to
my query through &lt;a href="https://secure.dotster.com/help/csupport.php"&gt;their support web
form&lt;/a&gt; about submitting
&lt;code&gt;AAAA&lt;/code&gt; glue&lt;/dd&gt;
&lt;dt&gt;&lt;a href="https://www.gandi.net"&gt;gandi&lt;/a&gt;&lt;/dt&gt;
&lt;dd&gt;gandi at least offers the opportunity to enter &lt;code&gt;AAAA&lt;/code&gt; glue, but
apparently can't let me have both &lt;code&gt;AAAA&lt;/code&gt; and &lt;code&gt;A&lt;/code&gt; glue for the same
name. A note to their support team got me a response that this is
planned “for Q1 or Q2 of 2011”.&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;Any suggestions for reasonable registrars that offer this today?&lt;/p&gt;
&lt;p&gt;Am i being silly in wanting &lt;code&gt;AAAA&lt;/code&gt; and &lt;code&gt;A&lt;/code&gt; glue for the same names? i
note that the root zone and the &lt;code&gt;org&lt;/code&gt; zone both offer &lt;code&gt;A&lt;/code&gt; and &lt;code&gt;AAAA&lt;/code&gt;
records for each of their dual-stack nameservers. You can check for
yourself:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dig&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;@a&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;servers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dig&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;@a&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;servers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;if i don't go for dual records, i could instead use gandi and go with
distinct names for the v6 and v4 servers, like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;QUESTION&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;SECTION&lt;/span&gt;&lt;span class="o"&gt;:;&lt;/span&gt;&lt;span class="nt"&gt;example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt;             &lt;/span&gt;&lt;span class="nt"&gt;IN&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;NS&lt;/span&gt;&lt;span class="o"&gt;;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;AUTHORITY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;SECTION&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nd"&gt;example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;172800&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;IN&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;NS&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;172800&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;IN&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;NS&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;b&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;172800&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;IN&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;NS&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;c&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;172800&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;IN&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;NS&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;d&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;ADDITIONAL&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;SECTION&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nd"&gt;a&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;172800&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;IN&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;A&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nt"&gt;192&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;3b&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;172800&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;IN&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;A&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nt"&gt;192&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;4c&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;172800&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;IN&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;AAAAA&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nt"&gt;2001&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nd"&gt;db8&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nd"&gt;3d&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;172800&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;IN&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;AAAAA&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nt"&gt;2001&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nd"&gt;db8&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nd"&gt;4&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;But of course what i really want is this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;QUESTION&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;SECTION&lt;/span&gt;&lt;span class="o"&gt;:;&lt;/span&gt;&lt;span class="nt"&gt;example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="nt"&gt;IN&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;NS&lt;/span&gt;&lt;span class="o"&gt;;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;AUTHORITY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;SECTION&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nd"&gt;example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;172800&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;IN&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;NS&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nt"&gt;172800&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;IN&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;NS&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;b&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;ADDITIONAL&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;SECTION&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nd"&gt;a&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;172800&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;IN&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;A&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nt"&gt;192&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;3a&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;172800&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;IN&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;AAAAA&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nt"&gt;2001&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nd"&gt;db8&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nd"&gt;3b&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;172800&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;IN&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;A&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nt"&gt;192&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;4b&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;example&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;org&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;172800&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;IN&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;AAAAA&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="nt"&gt;2001&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nd"&gt;db8&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nd"&gt;4&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;My concern about this is if some IPv4-only system gets a list like the
first one, and decides to use &lt;code&gt;c.ns.example.org&lt;/code&gt; or &lt;code&gt;d.ns.example.org&lt;/code&gt;,
which doesn't have an &lt;code&gt;A&lt;/code&gt; record at all. That would be a silly
implementation, of course. but uh, we have a lot of silly
implementations of things out there.&lt;/p&gt;
&lt;p&gt;Feedback welcome!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/dns"&gt;dns&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/ipv6"&gt;ipv6&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Debian NYC Workshop: What's in a Package?</title><link href="https://dkg.fifthhorseman.net/blog/debian-nyc-workshop-whats-in-a-package.html" rel="alternate"/><published>2010-10-20T21:31:00-04:00</published><updated>2010-10-20T21:31:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2010-10-20:/blog/debian-nyc-workshop-whats-in-a-package.html</id><summary type="html">&lt;p&gt;Debian NYC will be holding a workshop next week: &lt;a href="https://wiki.debian.org/DebianNYC/Workshops/WhatsInAPackage"&gt;What's in a
Package?&lt;/a&gt;
will happen at 7:00pm New York time on October 27, 2010. If you're in
the New York area, interested in packaging things for debian and related
systems, or just want to understand the packages in your …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Debian NYC will be holding a workshop next week: &lt;a href="https://wiki.debian.org/DebianNYC/Workshops/WhatsInAPackage"&gt;What's in a
Package?&lt;/a&gt;
will happen at 7:00pm New York time on October 27, 2010. If you're in
the New York area, interested in packaging things for debian and related
systems, or just want to understand the packages in your system better,
you should RSVP and come on out!&lt;/p&gt;
&lt;p&gt;This workshop will provide advanced theory useful for people modifying
or creating packages. For people modifying packages, you'll learn many
typical motifs and about various build systems. For creating packages,
you'll be much better prepared to read and understand guides a deep
level. However, this is still not a step-by-step guide in "how to build
packages", but will get you very close to there.&lt;/p&gt;
&lt;p&gt;See you there!&lt;/p&gt;</content><category term="misc"/></entry><entry><title>monkeysphere and distributed naming</title><link href="https://dkg.fifthhorseman.net/blog/monkeysphere-and-distributed-naming.html" rel="alternate"/><published>2010-10-06T23:19:00-04:00</published><updated>2010-10-06T23:19:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2010-10-06:/blog/monkeysphere-and-distributed-naming.html</id><summary type="html">&lt;p&gt;Roland Mas writes &lt;a href="http://roland.entierement.nu/blog/2010/10/02/for-a-truly-acentric-internet.html"&gt;an interesting article about decentralized
naming&lt;/a&gt;,
in which he says:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href="http://web.monkeysphere.info/"&gt;Monkeysphere&lt;/a&gt; aims at adding a web of
trust to the SSL certificates system, but the CA chain problem seems
to persist (although I must admit I'm not up to speed with the actual
details).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Since i'm one …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Roland Mas writes &lt;a href="http://roland.entierement.nu/blog/2010/10/02/for-a-truly-acentric-internet.html"&gt;an interesting article about decentralized
naming&lt;/a&gt;,
in which he says:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href="http://web.monkeysphere.info/"&gt;Monkeysphere&lt;/a&gt; aims at adding a web of
trust to the SSL certificates system, but the CA chain problem seems
to persist (although I must admit I'm not up to speed with the actual
details).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Since i'm one of the Monkeysphere developers, i figure i should respond!&lt;/p&gt;
&lt;p&gt;Let me clarify that Monkeysphere doesn't just work in places where X.509
(the SSL certificate system) works. It works in other places too (like
SSH connections). And I don't think that the CA chain problem that
remains in Monkeysphere is anything like the dangerous &lt;a href="http://lair.fifthhorseman.net/~dkg/tls-centralization"&gt;mess that common
X.509 usage has given
us&lt;/a&gt;. I do think
that at some level, people need to think about who is introducing them
to other people -- visual or human-comprehensible representations of
public key material are notoriously difficult to make unspoofable.&lt;/p&gt;
&lt;p&gt;On the subject of distributed naming: OpenPGP already allows distributed
naming: every participant in the WoT is allowed to assert that any given
key maps to any given identity. Duplicates and disagreements can exist
just fine. How an entity decides to certify another entity's ID without
a consensus global namespace is a tough one, though. If i've always been
known as "John Smith" to my friends, and someone else has also been
known as "John Smith" to his friends, our friends aren't actually
disagreeing or in conflict -- it's just that neither of us has a unique
name. The trouble comes when someone new wants to find "John Smith" --
which of us should they treat as the "correct" one?&lt;/p&gt;
&lt;p&gt;I think the right answer probably has to do with who they're actually
looking for, which has to do with &lt;em&gt;why&lt;/em&gt; they're looking for someone
named "John Smith". If they're looking for John Smith because the word
on the street is that John Smith is a good knitter and they need a pair
of socks, they can just examine what information we each publish about
ourselves, and decide on a sock-by-sock basis which of us best suits
their needs.&lt;/p&gt;
&lt;p&gt;But if they're looking for "John Smith" because their cousin said "hey,
i know this guy John Smith. I think you would like to argue politics
over a beer with him", then what matters is the &lt;em&gt;introduction&lt;/em&gt;. And
OpenPGP handles that just fine -- if their cousin has only ever met a
single John Smith, that's the right one. If their cousin has met several
John Smiths, then the searcher would do well to ask their cousin some
variant of "hey, do you mean John Smith or John Smith ", or even "do you
mean the John Smith who Molly has met, or the one who Charles has met?"
(assuming that Molly and Charles have each only certified one John Smith
in common with the cousin, and not the same one as each other), or to
get a real-time introduction to a particular John Smith, where his
specific key is somehow recordable by the searcher for future
conversations (or beer drinking). This is what we do in the real world
anyway. We currently lack good UIs for doing this over the network, but
the certification infrastructure is in place already.&lt;/p&gt;
&lt;p&gt;What we're lacking in infrastructure, though, is a way to have a
distributed &lt;em&gt;addressing&lt;/em&gt;. Roland's proposal was to publish addresses
corresponding to cryptographic identities within some DNS zone, or in
freenet or gnutella. Another approach (piggybacking on existing
infrastructure) would be to include IP address information in the
OpenPGP self-certification, so the holder of the name could claim
exactly their own IP address. This could be distributed through the
keyserver network, just like other updates are today, and it could be
done simply and immediately with a well-defined &lt;a href="http://tools.ietf.org/html/rfc4880#section-5.2.3.16"&gt;OpenPGP
notation&lt;/a&gt;. I'd be
happy to talk to interested people about how to specify such a notation,
and what possible corner cases we might run into. Drop a note here, or
mail &lt;a href="http://web.monkeysphere.info/community/"&gt;the Monkeysphere mailing
list&lt;/a&gt; or hop onto
&lt;a href="irc://irc.oftc.net#monkeysphere"&gt;&lt;code&gt;#monkeysphere&lt;/code&gt; on irc.oftc.net&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;:
&lt;a href="https://debian-administration.org/tag/authentication"&gt;authentication&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/distributed%20naming"&gt;distributed
naming&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/identity"&gt;identity&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/monkeysphere"&gt;monkeysphere&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>You should be using ssh-agent</title><link href="https://dkg.fifthhorseman.net/blog/you-should-be-using-ssh-agent.html" rel="alternate"/><published>2010-09-27T20:18:00-04:00</published><updated>2010-09-27T20:18:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2010-09-27:/blog/you-should-be-using-ssh-agent.html</id><summary type="html">&lt;p&gt;If you're not using &lt;code&gt;ssh-agent&lt;/code&gt; to authenticate yourself to SSH servers,
you should be. (i'm assuming you're already using
&lt;code&gt;PubkeyAuthentication&lt;/code&gt;; if you're still using &lt;code&gt;PasswordAuthentication&lt;/code&gt;,
&lt;code&gt;ChallengeResponseAuthentication&lt;/code&gt; or &lt;code&gt;KbdInteractiveAuthentication&lt;/code&gt;, fix
that please).&lt;/p&gt;
&lt;p&gt;You should use &lt;code&gt;ssh-agent&lt;/code&gt; for a number of reasons, actually, but the
simplest is this: when you authenticate to …&lt;/p&gt;</summary><content type="html">&lt;p&gt;If you're not using &lt;code&gt;ssh-agent&lt;/code&gt; to authenticate yourself to SSH servers,
you should be. (i'm assuming you're already using
&lt;code&gt;PubkeyAuthentication&lt;/code&gt;; if you're still using &lt;code&gt;PasswordAuthentication&lt;/code&gt;,
&lt;code&gt;ChallengeResponseAuthentication&lt;/code&gt; or &lt;code&gt;KbdInteractiveAuthentication&lt;/code&gt;, fix
that please).&lt;/p&gt;
&lt;p&gt;You should use &lt;code&gt;ssh-agent&lt;/code&gt; for a number of reasons, actually, but the
simplest is this: when you authenticate to a text-based channel on a
remote server, you should &lt;em&gt;never&lt;/em&gt; have to type anything about that
authentication into the channel that will eventually be controlled by
the remote server.&lt;/p&gt;
&lt;p&gt;That's because a malicious server could simply accept your connection as
an anonymous connection and print out the exact prompt you're expecting.
Then, whatever you're typing goes into the remote server instead of into
your authentication scheme. and congrats, you just gave away the
passphrase for your key.&lt;/p&gt;
&lt;p&gt;With ssh-agent, you talk first to your agent. Then, you talk to the
server and your ssh client talks to the agent. Your keys and your
passphrase are never exposed.&lt;/p&gt;
&lt;p&gt;the second reason is that the agent is a much smaller piece of code than
the ssh client, and it doesn't talk to the network at all (unless you
force it to). It holds your key and never releases it to querying
processes; It even runs in a protected memory space so other processes
can't peek at it.&lt;/p&gt;
&lt;p&gt;So if this protected, isolated agent is what holds your key, you're in
much better shape than if a non-protected, larger, network-active
process (the ssh client) has direct access to your secret key material.&lt;/p&gt;
&lt;p&gt;The third reason is that it's just more convenient -- you can put a key
in your agent, and ask it to prompt you when its use is requested. you
don't actually need to re-type your passphrase each time. you can just
hit enter or type "yes".&lt;/p&gt;
&lt;p&gt;And if that scares you security-wise then you can put the key in for a
limited period of time, as well.&lt;/p&gt;
&lt;p&gt;(btw, you should be using the &lt;code&gt;ssh-agent&lt;/code&gt; that ships with OpenSSH,
probably not the implementation offered by gnome, which &lt;a href="https://bugzilla.gnome.org/show_bug.cgi?id=525574"&gt;doesn't offer a
confirmation prompt&lt;/a&gt;,
doesn't run in protected memory space, and links in a ton more
libraries)&lt;/p&gt;
&lt;p&gt;So how do you use the agent? It's probably already installed and running
on your computer if you run a desktop with debian or another reasonable
free operating system.&lt;/p&gt;
&lt;p&gt;Query what keys are in your agent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;lThe&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;agent&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;has&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;no&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;identities&lt;/span&gt;&lt;span class="mf"&gt;.1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Add a standard OpenSSH secret key to your agent, prompting for
confirmation before each use:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;~&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;id_rsaEnter&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;passphrase&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kr"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;id_rsa&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;your&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;nice&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;long&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;passphrase&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;hereIdentity&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;added&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;id_rsa&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;id_rsa&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;The&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;must&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;confirm&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;each&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;(if you drop the &lt;code&gt;-c&lt;/code&gt;, you will not be prompted at each use)&lt;/p&gt;
&lt;p&gt;Add a standard OpenSSH secret key to your agent, with a lifespan of one
hour (3600 seconds)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;3600&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;~&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;id_rsaEnter&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;passphrase&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kr"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;id_rsa&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;your&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;nice&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;long&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;passphrase&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;hereIdentity&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;added&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;id_rsa&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;id_rsa&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;Lifetime&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kr"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;3600&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;seconds0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;(note that you can combine the &lt;code&gt;-t $SECONDS&lt;/code&gt; and &lt;code&gt;-c&lt;/code&gt; flags to get key
that is time-constrained and requires a confirmation prompt at each use)&lt;/p&gt;
&lt;p&gt;Add a &lt;a href="http://web.monkeysphere.info"&gt;monkeysphere&lt;/a&gt;-style key (an
authentication-capable subkey from your GnuPG secret keyring) to the
ssh-agent (this will prompt you for your GnuPG passphrase with a
graphical &lt;code&gt;ssh-askpass&lt;/code&gt; program during this keyload, if such a program
is available), for one hour:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;monkeysphere&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;subkey&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="kr"&gt;to&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;agent&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;3600&lt;/span&gt;&lt;span class="n"&gt;Identity&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;added&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Daniel&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Kahn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Gillmor&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;fifthhorseman&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Daniel&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Kahn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Gillmor&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;fifthhorseman&lt;/span&gt;&lt;span class="mf"&gt;.&lt;/span&gt;&lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;Lifetime&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kr"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;3600&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;seconds0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;If you don't already have such a subkey, but you want to use the
monkeysphere, you'll need to run &lt;code&gt;monkeysphere gen-subkey&lt;/code&gt; to create one
first.&lt;/p&gt;
&lt;p&gt;Note also that you can use both &lt;code&gt;-c&lt;/code&gt; and &lt;code&gt;-t $SECONDS&lt;/code&gt; with
&lt;code&gt;monkeysphere subkey-to-ssh-agent&lt;/code&gt;, just like they are used with
&lt;code&gt;ssh-add&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Remove all keys from your running agent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dkg&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="err"&gt;~$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;DAll&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;identities&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;removed.0 dkg@pip:~$ &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;I hope this is helpful to people!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/security"&gt;security&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/ssh"&gt;ssh&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/ssh-agent"&gt;ssh-agent&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/tip"&gt;tip&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>hotmail thinks powerpc means mobile</title><link href="https://dkg.fifthhorseman.net/blog/hotmail-thinks-powerpc-means-mobile.html" rel="alternate"/><published>2010-09-21T19:55:00-04:00</published><updated>2010-09-21T19:55:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2010-09-21:/blog/hotmail-thinks-powerpc-means-mobile.html</id><summary type="html">&lt;p&gt;Apparently, live.com thinks that any browser coming from a ppc
architecture is a mobile device. This sucks for the users of the
hundreds of thousands of powerpc desktops still in service.&lt;/p&gt;
&lt;p&gt;I don't use hotmail myself, but i do support people who use it. I set
one of my …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Apparently, live.com thinks that any browser coming from a ppc
architecture is a mobile device. This sucks for the users of the
hundreds of thousands of powerpc desktops still in service.&lt;/p&gt;
&lt;p&gt;I don't use hotmail myself, but i do support people who use it. I set
one of my clients up with debian squeeze on their PPC machine because
all the proprietary vendors have basically given up on that architecture
-- debian represents the best way to get modern tools on these machines
(and other machines too, but that's a different argument).&lt;/p&gt;
&lt;p&gt;However, this client couldn't get to their hotmail account, despite
using the latest version of iceweasel (3.5.12). They were directed to a
crippled interface that didn't include the ability to attach files, and
was a gross waste of the desktop screen space. It appears to be the
"mobile" version of live.com's services.&lt;/p&gt;
&lt;p&gt;However, the same version of iceweasel on an i686 test machine could
access the standard version of hotmail with no trouble. My friend
jeremyb helpfully suggested fiddling with the User Agent string exported
by the browser. Some experimentation shows that the presence of the
string "ppc" within any parenthetical expression in the UA makes
live.com show the crappy interface. You can try it yourself (if you have
a hotmail account) on your x86 or amd64 machine by adding &lt;code&gt;(ppc)&lt;/code&gt; to the
default valule of &lt;code&gt;general.useragent.extra.firefoxComment&lt;/code&gt; in
&lt;code&gt;about:config&lt;/code&gt;. Stupid stupid stupid.&lt;/p&gt;
&lt;p&gt;I'd like to have fixed this by overriding the browser's reported
architecture (or simply by removing it -- why does a web server need to
know the hardware architecture of my client?). But there doesn't appear
to be a way to do that with &lt;a href="http://mxr.mozilla.org/mozilla-central/source/netwerk/protocol/http/nsHttpHandler.cpp#719"&gt;the way that mozilla constructs the
UA&lt;/a&gt;.
Instead, i needed to add a new string key &lt;a href="http://kb.mozillazine.org/Firefox_:_FAQs_:_About:config_Entries#General."&gt;named
&lt;code&gt;general.useragent.override&lt;/code&gt;&lt;/a&gt;
which is not exposed by default in &lt;code&gt;about:config&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;This raises some questions:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Why are we publishing our hardware architectures from our browsers
    anyway? This seems like unncessary leakage, and not all browsers do
    it. For example, &lt;a href="http://code.google.com/p/arora"&gt;Arora&lt;/a&gt; doesn't
    leak this info (despite &lt;a href="http://code.google.com/p/arora/issues/detail?id=876"&gt;a poorly-argued request to do
    so&lt;/a&gt;). &lt;a href="http://panopticlick.eff.org/"&gt;Browsers
    are already too identifiable by
    servers&lt;/a&gt;. This information should not
    be leaked by default.&lt;/li&gt;
&lt;li&gt;Why does live.com insist on sending ppc users to the crappy "mobile"
    version? Are they trying to encourage the treadmill of hardware
    upgrades that proprietary vendors benefit from? Is there some less
    insidious explanation? Are there actually more powerpc-based mobile
    devices than desktops?&lt;/li&gt;
&lt;li&gt;why is there no simple way to tell Firefox/Iceweasel to override or
    suppress the architecture information? Having to override the
    useragent string entirely means that when iceweasel does eventually
    get upgraded, it's going to report the wrong version unless i can
    remember to update the override myself (i can't reasonably expect a
    non-techie client who never heard of user agents before today to
    remember how to do this correctly).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Any ideas?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/browser"&gt;browser&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/hotmail"&gt;hotmail&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/powerpc"&gt;powerpc&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/ppc"&gt;ppc&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/useragent"&gt;useragent&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/wtf"&gt;wtf&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>NYC SYEP still requires Microsoft Software</title><link href="https://dkg.fifthhorseman.net/blog/nyc-syep-still-requires-microsoft-software.html" rel="alternate"/><published>2010-05-19T19:44:00-04:00</published><updated>2010-05-19T19:44:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2010-05-19:/blog/nyc-syep-still-requires-microsoft-software.html</id><summary type="html">&lt;p&gt;&lt;a href="https://debian-administration.org/users/dkg/weblog/47"&gt;A year ago, i wrote
about&lt;/a&gt; how &lt;a href="https://application.nycsyep.com/"&gt;New
York City's Summer Youth Employment Program
(SYEP)&lt;/a&gt; requires the use of Internet
Explorer to apply online (and it even appears to require IE just to
download the PDF of the application!)&lt;/p&gt;
&lt;p&gt;Sadly, the situation has not changed, a year later. Today, I'm …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="https://debian-administration.org/users/dkg/weblog/47"&gt;A year ago, i wrote
about&lt;/a&gt; how &lt;a href="https://application.nycsyep.com/"&gt;New
York City's Summer Youth Employment Program
(SYEP)&lt;/a&gt; requires the use of Internet
Explorer to apply online (and it even appears to require IE just to
download the PDF of the application!)&lt;/p&gt;
&lt;p&gt;Sadly, the situation has not changed, a year later. Today, I'm writing
to &lt;a href="mailto:garodnick@council.nyc.gov?subject=Summer%20Youth%20Employment%20Program%20only%20accessible%20in%20Internet%20Explorer"&gt;Dan
Garodnick&lt;/a&gt;,
Chair of &lt;a href="http://legistar.council.nyc.gov/DepartmentDetail.aspx?ID=8866&amp;amp;GUID=72EEA817-E6FF-4051-B853-BC1DAD04E8CC&amp;amp;Search="&gt;The City Council's Committee on
Technology&lt;/a&gt;
(and the rest of the committee members), &lt;a href="mailto:cpost@doitt.nyc.gov?subject=Summer%20Youth%20Employment%20Program%20only%20accessible%20in%20Internet%20Explorer"&gt;Carole
Post&lt;/a&gt;,
Commissioner of &lt;a href="http://nyc.gov/html/doitt"&gt;DoITT&lt;/a&gt; (the city's
Department of Information Technology and Telecommunications), and
&lt;a href="mailto:jmullgrav@dycd.nyc.gov?subject=Summer%20Youth%20Employment%20Program%20only%20accessible%20in%20Internet%20Explorer"&gt;Jeanne B.
Mullgrav&lt;/a&gt;,
Commissioner of &lt;a href="http://nyc.gov/html/dycd"&gt;DYCD&lt;/a&gt; (the Department of
Youth and Community Development, which runs SYEP).&lt;/p&gt;
&lt;p&gt;Here's what i wrote:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nx"&gt;For&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;last&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;two&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;years&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;at&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;least&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;DYCD&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="nx"&gt;s&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;Summer&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;Youth&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;Employment&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;Program&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;SYEP&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;has&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;been&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;only&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;available&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;users&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;Internet&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;Explorer&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//application.nycsyep.com/Internet Explorer (IE) is only made by Microsoft, and is only available forpeople running Microsoft operating systems.  Users of other operating systems,such as GNU/Linux, Macintosh, or others cannot access the SYEP applicationprocess.  Even users of Windows who care about their online security or simplydesire a different web browsing experience might prefer to avoid InternetExplorer.Not only is the online form inaccessible from browsers other than IE, evenretrieving a copy of the PDF to print out and fill in manually is unavailablefor web browsers other than IE.What is the city&amp;#39;s policy is on access to government sites?  Is it city policyto mandate a single vendor&amp;#39;s software for access to city resources?  Should NYCyouth be required to purchase software from Microsoft to be able to applyfor the Summer Youth Employment Program?The sort of data collection needed by such an application is a mainstay of thestandards-based web, and has been so for over 15 years now.  There is no reasonto require particular client on an open platform.  I can point you towardresources who would be happy to help you make the system functional for usersof *any* web browser, if you like.I raised this issue over a year ago (see nyc.gov correspondence #1-1-473378926,and a public weblog posted around the same time [0]), and got no effectiveremedy.  It&amp;#39;s worrisome to see that this is still a problem.Please let me know what you plan to do to address the situation.Regards,  --dkg[0] https://www.debian-administration.org/users/dkg/weblog/47&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Feel free to send your own message to the folks above (especially helps
if you live in or near NYC)&lt;/p&gt;
&lt;p&gt;Finally, Carole Post, the head of DoITT will also be &lt;a href="http://personaldemocracy.com/user-blog/pdf-evening-series-what-our-cities-are-telling-us-may-19th"&gt;present at a panel
tonight in
Soho&lt;/a&gt;,
which i'm unfortunately be unable to attend. If you go there, you might
ask her about the situation.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/policy"&gt;policy&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Talks and tracks at debconf 10</title><link href="https://dkg.fifthhorseman.net/blog/talks-and-tracks-at-debconf-10.html" rel="alternate"/><published>2010-04-25T22:29:00-04:00</published><updated>2010-04-25T22:29:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2010-04-25:/blog/talks-and-tracks-at-debconf-10.html</id><summary type="html">&lt;p&gt;I'm helping out on the talks committee for debconf 10 this summer in NYC
(so yes, i'm going to be here for it, even though i don't have that
little badge thingy). This is a call for interested folks to let us know
what you want to see at debconf …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I'm helping out on the talks committee for debconf 10 this summer in NYC
(so yes, i'm going to be here for it, even though i don't have that
little badge thingy). This is a call for interested folks to let us know
what you want to see at debconf!&lt;/p&gt;
&lt;h2 id="talks"&gt;Talks&lt;/h2&gt;
&lt;p&gt;If you haven't already, &lt;a href="https://penta.debconf.org/penta/submission/dc10/"&gt;submit your proposal for a talk, performance,
debate, panel, BoF session,
etc&lt;/a&gt;! We know you've
got good ideas, and &lt;a href="http://lists.debian.org/debian-devel-announce/2010/04/msg00014.html"&gt;the final call for
contributions&lt;/a&gt;
went out yesterday, due in less than a week. Please propose your event
soon!&lt;/p&gt;
&lt;h2 id="tracks"&gt;Tracks&lt;/h2&gt;
&lt;p&gt;Also, we want to introduce
&lt;a href="http://wiki.debconf.org/wiki/DebConf10/TalkGlossary"&gt;Tracks&lt;/a&gt; as a new
idea for debconf this summer. A good track would thematically group a
consecutive set of debconf events (talks, panels, debates, performances,
etc) to encourage a better understanding of a broader theme. For this to
work, we need a few good people to act as track coordinators for the
areas where they are knowledgeable and engaged.&lt;/p&gt;
&lt;p&gt;A track coordinator would have a chance to set the tone and scope for
their track, schedule events, assemble panels or debates, introduce
speakers, and report back at the end of debconf to the larger gathering.
We also hope that a coordinator could identify potential good work being
done in their area, encourage people to submit relevant events for
debconf, and shepherd proposals in their track through the submission
process.&lt;/p&gt;
&lt;p&gt;Are you interested in coordinating a track on some topic? Or do you have
a suggestion for someone else who might do a good job on a topic you
want to see well-represented at debconf? You can contact the talk
committee privately if you have questions at &lt;a href="&amp;#109;&amp;#97;&amp;#105;&amp;#108;&amp;#116;&amp;#111;&amp;#58;&amp;#116;&amp;#97;&amp;#108;&amp;#107;&amp;#115;&amp;#64;&amp;#100;&amp;#101;&amp;#98;&amp;#99;&amp;#111;&amp;#110;&amp;#102;&amp;#46;&amp;#111;&amp;#114;&amp;#103;"&gt;&amp;#116;&amp;#97;&amp;#108;&amp;#107;&amp;#115;&amp;#64;&amp;#100;&amp;#101;&amp;#98;&amp;#99;&amp;#111;&amp;#110;&amp;#102;&amp;#46;&amp;#111;&amp;#114;&amp;#103;&lt;/a&gt;, or you
can contact the whole team publicly at
&lt;a href="https://debian-administration.org/cgi-bin/mailto="&gt;debconf-team@lists.debconf.org&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Some ideas about possible tracks:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Science and Mathematics in Debian&lt;/li&gt;
&lt;li&gt;Debian Integration into the Enterprise&lt;/li&gt;
&lt;li&gt;Media and Arts and Debian&lt;/li&gt;
&lt;li&gt;Trends and Tools in Debian Packaging&lt;/li&gt;
&lt;li&gt;Debian Systems and Infrastructure&lt;/li&gt;
&lt;li&gt;Debian Community Outreach&lt;/li&gt;
&lt;li&gt;&lt;em&gt;...your topic here...&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We can't guarantee that any particular track &lt;em&gt;will&lt;/em&gt; happen at dc10, but
we can guarantee that it &lt;em&gt;won't&lt;/em&gt; happen if no one proposes it or
wrangles the relevant events together. Help us make this the best
debconf ever and make sure that your own topical itch gets scratched!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/debconf"&gt;debconf&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/debconf10"&gt;debconf10&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Avoiding erroneous OpenPGP certifications</title><link href="https://dkg.fifthhorseman.net/blog/avoiding-erroneous-openpgp-certifications.html" rel="alternate"/><published>2010-03-23T02:44:00-04:00</published><updated>2010-03-23T02:44:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2010-03-23:/blog/avoiding-erroneous-openpgp-certifications.html</id><summary type="html">&lt;p&gt;i'm aware that people don't always take proper measures during mass
OpenPGP keysignings. Apparently, some keys even get signed with no one
at the keysigning present speaking for that key (for example, if the key
was submitted to the keysigning via online mechanisms beforehand, but
the keyholder failed to show …&lt;/p&gt;</summary><content type="html">&lt;p&gt;i'm aware that people don't always take proper measures during mass
OpenPGP keysignings. Apparently, some keys even get signed with no one
at the keysigning present speaking for that key (for example, if the key
was submitted to the keysigning via online mechanisms beforehand, but
the keyholder failed to show up).&lt;/p&gt;
&lt;p&gt;Unverified certifications are potentially erroneous, and erroneous
certifications are bad for the OpenPGP web of trust. Debian and other
projects rely on the OpenPGP web of trust being reasonable and healthy.
People should make a habit of doing proper verifications at keysignings.
People who make unverified certifications should probably be made aware
of better practices.&lt;/p&gt;
&lt;p&gt;So for future keysignings, i may introduce a key to the set under
consideration and see what sort of OpenPGP certifications that key
receives. I won't pretend to hold that key in person, won't speak for
it, and it won't have my name attached to it. But it may be on the list.&lt;/p&gt;
&lt;p&gt;Depending on the certifications received on that key (and the feedback i
get on this blog post), i'll either publish the list of wayward
certifiers, or contact the certifiers privately. Wayward certifiers
should review their keysigning practices and revoke any certifications
they did not adequately verify.&lt;/p&gt;
&lt;p&gt;Remember, at a keysigning party, for each key:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Check that the fingerprint on your copy &lt;em&gt;exactly&lt;/em&gt; matches the one
    claimed by the person in question&lt;/li&gt;
&lt;li&gt;Check that the person in question is actually who they say they are
    (e.g. gov't ID, with a photo that looks like them, with their name
    matching the name in the key's User ID)&lt;/li&gt;
&lt;li&gt;If the fingerprints don't match, or you don't have confidence in the
    name or their identity, or no one stands up to claim the key,
    there's no harm done in simply choosing to not certify the user IDs
    associated with that key. You don't even need to tell the person
    you've decided to do so.&lt;/li&gt;
&lt;li&gt;Take notes in hard copy. It will help you later.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;After the keysigning, when you go to actually make your OpenPGP
certifications:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Make sure you have the same physical document(s) that you had during
    the keysigning (no, downloading a file from the same URL is &lt;em&gt;not&lt;/em&gt;
    the same thing)&lt;/li&gt;
&lt;li&gt;Use your notes to decide which keys you actually want to make
    certifications over.&lt;/li&gt;
&lt;li&gt;Explicitly check the fingerprints of the fetched key before you make
    any certification over any of its User IDs. If the fingerprint
    doesn't match, discard it and move on (you might want to also
    contact the person whose key it is to let them know).&lt;/li&gt;
&lt;li&gt;If a key has several user IDs on it, and some of them do not match
    the person's name, simply don't certify the non-matching user IDs.
    You should certify only the user IDs you have verified.&lt;/li&gt;
&lt;li&gt;If a key has a user ID with an e-mail address on it that you aren't
    absolutely sure belongs to the person in question, mail an encrypted
    copy of your certification for that User ID to the e-mail address in
    question. If they don't control that e-mail address, they won't get
    the certification, and it will never become public. &lt;code&gt;caff&lt;/code&gt; (from the
    &lt;a href="http://packages.debian.org/signing-party"&gt;signing-party&lt;/a&gt; package)
    should help you to do that.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Feedback welcome!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;:
&lt;a href="https://debian-administration.org/tag/keysigning"&gt;keysigning&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/openpgp"&gt;openpgp&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/tip"&gt;tip&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>TCP weirdness, IMAP, wireshark, and perdition</title><link href="https://dkg.fifthhorseman.net/blog/tcp-weirdness-imap-wireshark-and-perdition.html" rel="alternate"/><published>2010-01-21T19:37:00-05:00</published><updated>2010-01-21T19:37:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2010-01-21:/blog/tcp-weirdness-imap-wireshark-and-perdition.html</id><summary type="html">&lt;p&gt;This is the story of a weirdly unfriendly/non-compliant IMAP server, and
some nice interactions that arose from a debugging session around it.&lt;/p&gt;
&lt;p&gt;Over the holidays, i got to do some computer/network debugging for
friends and family. One old friend (I'll call him “Fred”) had a series
of problems …&lt;/p&gt;</summary><content type="html">&lt;p&gt;This is the story of a weirdly unfriendly/non-compliant IMAP server, and
some nice interactions that arose from a debugging session around it.&lt;/p&gt;
&lt;p&gt;Over the holidays, i got to do some computer/network debugging for
friends and family. One old friend (I'll call him “Fred”) had a series
of problems i managed to help work through, but was ultimately basically
stumped based on the weird behavior of an IMAP server. Here's the
details (names of the innocent and guilty have been changed), just in
case it helps other folks in at least diagnosing similar situations.&lt;/p&gt;
&lt;h3 id="the-diagnosis"&gt;the diagnosis&lt;/h3&gt;
&lt;p&gt;The initial symptom was that Fred's computer was "very slow". Sadly,
this was a Windows™ machine, so &lt;a href="http://cmrg.fifthhorseman.net/wiki/DiagnosingSluggishness/Windows"&gt;my list of tricks for diagnosing
sluggishness&lt;/a&gt;
is limited. I went through a series of questions, uninstalling things,
etc, until we figured it would be better to just have him do his usual
work while i watched, kibitzing on what seemed acceptable and what
seemed slow. Quite soon, we hit a very specific failure: Fred's
&lt;a href="http://mozillamessaging.com"&gt;Thunderbird&lt;/a&gt; installation (version 2,
FWIW) was sometimes hanging for a very long period of time during
message retrieval. This was not exhaustion of the CPU, disk, RAM, or
other local resource. It was pure network delay, and it was a frequent
(if unpredictable) frustrating hiccup in his workflow.&lt;/p&gt;
&lt;p&gt;One thought i had was &lt;a href="http://kb.mozillazine.org/IMAP:_advanced_account_configuration#May_help_prevent_problems"&gt;Thunderbird's per-server max_cached_connections
setting&lt;/a&gt;,
which can sometimes cause a TB instance to hang if a remote server
thinks Thunderbird is being too aggressive. After &lt;a href="https://bugzilla.mozilla.org/show_bug.cgi?id=168186"&gt;sorting out why
Thunderbird was resetting the values after we'd set them to
0&lt;/a&gt; (grr, thanks for
the confusing UI, folks!), we set it to 1, but still had the same
occasional, lengthy (about 2 minutes) hang when transfering messages
between folders (including the trash folder!), or when reading new
messages. Sending mail was quite fast, except for occasional (similarly
lengthy) hangs writing the copy to the sent folder. So IMAP was the
problem (not SMTP), and the 2-minute timeouts smelled like an issue with
the networking layer to me.&lt;/p&gt;
&lt;p&gt;At this point, i busted out &lt;a href="http://www.wireshark.org/"&gt;&lt;code&gt;wireshark&lt;/code&gt;, the trusty packet
sniffer&lt;/a&gt;, which fortunately works as well on
Windows as it does on GNU/Linux. Since Fred was doing his IMAP traffic
in the clear, i could actually see when and where in the IMAP session
the hang was happening. (BTW, Fred's IMAP traffic is no longer in the
clear: after all this happened, i switched him to IMAPS (IMAP wrapped in
a TLS session), because although the IMAP server in question actually
supports the STARTTLS directive, it fails to advertise it in response to
the CAPABILITIES query, so Thunderbird refuses to try it. arrgh.)&lt;/p&gt;
&lt;p&gt;The basic sequence of Thunderbird's side of an initial IMAP conversation
(using plain authentication, anyway) looks something like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;capability2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;log&lt;/span&gt;&lt;span class="n"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;user&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;pass&amp;quot;&lt;/span&gt;&lt;span class="mf"&gt;3&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;lsub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;*&amp;quot;&lt;/span&gt;&lt;span class="mf"&gt;4&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kr"&gt;list&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;INBOX&amp;quot;&lt;/span&gt;&lt;span class="mf"&gt;5&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;INBOX&amp;quot;&lt;/span&gt;&lt;span class="mf"&gt;6&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;UID&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fetch&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;FLAGS&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;What i found with this server was that if i issued commands 1 through 5,
and then left the connection idle for over 5 minutes, then the next
command (even if it was just a &lt;code&gt;6 NOOP&lt;/code&gt; or &lt;code&gt;6 LOGOUT&lt;/code&gt;) would cause the
IMAP server to issue a TCP reset. No IMAP error message or anything,
just a failure at the TCP level. But a nice, fast, responsive failure --
any IMAP client could recover nicely from that by just immediately
opening a new connection. I don't mind busy servers killing inactive
connections after a reasonable timeout. If it was just this, though,
Thunderbird should have continued to be responsive.&lt;/p&gt;
&lt;h3 id="the-deep-weirdness"&gt;the deep weirdness&lt;/h3&gt;
&lt;p&gt;But if i issued commands 1 through &lt;strong&gt;6&lt;/strong&gt; in rapid succession (the only
difference is that extra &lt;code&gt;6 UID fetch 1:* (FLAGS)&lt;/code&gt; command), and then
let the connection idle for 5 minutes, then sent the next command: no
response of any kind would come from the remote server (not even a TCP
ACK or TCP RST). In this circumstance, my client OS's TCP stack would
re-send the data repeatedly (staggered at appropriate intervals), until
finally the client-side TCP timeout would trigger, and the OS would
report the failure to the app, which could turn around and do a simple
connection restart to finish up the desired operation. This was the
underlying situation causing Fred's Thunderbird client to hang.&lt;/p&gt;
&lt;p&gt;In both cases above (with or without the 6th command), the magic window
for the idle cutoff was a little more than 300 seconds (5 minutes) of
idleness. If the client issued a NOOP at 4 minutes, 45 seconds from the
last NOOP, it could keep a connection active indefinitely.&lt;/p&gt;
&lt;p&gt;Furthermore, i could replicate the exact same behavior when i used IMAPS
-- the state of the IMAP session itself was somehow modifying the TCP
session behavior characteristics, whether it was wrapped in a TLS tunnel
or not.&lt;/p&gt;
&lt;p&gt;One interesting thing about this set of data is that it rules out most
common problems in the network connectivity between the two machines.
Since none of the hops between the two endpoints know anything about the
IMAP state (especially under TLS), and some of the failures &lt;em&gt;are&lt;/em&gt;
reported properly (e.g. the TCP RST in the 5-command scenario), it's
probably safe to say that the various routers, NAT devices, and such
were not themselves responsible for the failures.&lt;/p&gt;
&lt;p&gt;So what's going on on that IMAP server? The service itself does not
announce the flavor of IMAP server, though it does respond to a
successful login with “&lt;code&gt;You are so in&lt;/code&gt;”, and to a logout with
“&lt;code&gt;IMAP server logging out, mate&lt;/code&gt;”. A bit of digging on the 'net suggests
that they are running a &lt;a href="http://www.vergenet.net/linux/perdition/"&gt;&lt;code&gt;perdition&lt;/code&gt; IMAP
proxy&lt;/a&gt;. (clearly written by an
Aussie, mate!) But why does it not advertise its STARTTLS capability,
even though it is capable? And why do some idle connections end up
timing out without so much as an RST, when other idle connections give
at least a clean break at the TCP level?&lt;/p&gt;
&lt;p&gt;Is there something about issuing the UID command that causes &lt;code&gt;perdition&lt;/code&gt;
to hand off the connection to some other service, which in turn doesn't
do proper TCP error handling? I don't really know anything about the
internals of &lt;code&gt;perdition&lt;/code&gt;, so i'm just guessing here.&lt;/p&gt;
&lt;h3 id="the-workaround"&gt;the workaround&lt;/h3&gt;
&lt;p&gt;I ultimately recommended to Fred to reduce the number of cached
connections to 1, and to set Thunderbird's interval to check for new
mail down to 4 minutes. Hopefully, this will keep his one connection
active enough that nothing will timeout, and will keep the interference
to his workflow to a minimum.&lt;/p&gt;
&lt;p&gt;It's an unsatisfactory solution to me, because the behavior of the
remote server still seems so non-standard. However, i don't have any
sort of control over the remote server, so there's not too much i can do
to provide a real fix (other than point the server admins (and perdition
developers?) at this writeup).&lt;/p&gt;
&lt;p&gt;I don't even know the types of backend server that their perdition proxy
is balancing between, so i'm pretty lost for better diagnostics even,
let alone a real resolution.&lt;/p&gt;
&lt;h3 id="some-notes"&gt;some notes&lt;/h3&gt;
&lt;p&gt;I couldn't have figured out the exact details listed above just using
Thunderbird on Windows. Fortunately, i had a machine with a decent OS
available, and was able to cobble together a fake IMAP client from a
couple files (&lt;code&gt;imapstart&lt;/code&gt; contained the lines above, and &lt;code&gt;imapfinish&lt;/code&gt;
contained &lt;code&gt;8 LOGOUT&lt;/code&gt;), &lt;a href="http://www.gnu.org/software/bash/"&gt;&lt;code&gt;bash&lt;/code&gt;&lt;/a&gt;, and
&lt;a href="http://www.dest-unreach.org/socat/"&gt;socat&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Here's the bash snippet i used as a fake IMAP client:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nv"&gt;spoolout&lt;/span&gt;&lt;span class="ss"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;{&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;read&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;foo&lt;/span&gt;&lt;span class="c1"&gt;; do sleep 1 &amp;amp;&amp;amp; printf &amp;quot;%s\r\n&amp;quot; &amp;quot;$foo&amp;quot; ; done }( sleep 2 &amp;amp;&amp;amp; spoolout &amp;lt; imapstart &amp;amp;&amp;amp; sleep 4 &amp;amp;&amp;amp; spoolout &amp;lt; imapfinish &amp;amp;&amp;amp; sleep 500 ) | socat STDIO TCP4:imap.fubar.example.net:143&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;To do the test under IMAPS, i just replaced
&lt;code&gt;TCP4:imap.fubar.example.net:143&lt;/code&gt; with
&lt;code&gt;OPENSSL:imap.fubar.example.net:993&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;And of course, i had &lt;code&gt;wireshark&lt;/code&gt; handy on the GNU/Linux machine as well,
so i could analyze the generated packets over there.&lt;/p&gt;
&lt;p&gt;One thing to note about user empowerment: Fred isn't a tech geek, but he
can be curious about the technology he relies on if the situation is
right. He was with me through the whole process, didn't get antsy, and
never tried to get me to "just fix it" while he did something else. I
like that, and wish i got to have that kind of interaction more (though
i certainly don't begrudge people the time if they do need to get other
things done). I was nervous about breaking out wireshark and scaring him
off with it, but it turned out it actually was a good conversation
starter about what was actually happening on the network, and how IP and
TCP traffic worked.&lt;/p&gt;
&lt;p&gt;Giving a crash course like that in a quarter of an hour, i can't expect
him to retain any concrete specifics, of course. But i think the process
was useful in de-mystifying how computers talk to each other somewhat.
It's not magic, there are just a lot of finicky pieces that need to fit
together a certain way. And Wireshark turned out to be a really nice
window into that process, especially when it displays packets during a
real-time capture. I usually prefer to do packet captures with
&lt;a href="http://www.tcpdump.org"&gt;&lt;code&gt;tcpdump&lt;/code&gt;&lt;/a&gt; and analyze them as a non-privileged
user afterward for &lt;a href="http://www.wireshark.org/security/"&gt;security
reasons&lt;/a&gt;. But in this case, i felt
the positives of user engagement (how often do you get to show someone
how their machine actually works?) far outweighed the risks.&lt;/p&gt;
&lt;p&gt;As an added bonus, it also helped Fred really understand what i meant
when i said that it was a bad idea to use IMAP in the clear. He could
actually see his username and password in the network traffic!&lt;/p&gt;
&lt;p&gt;This might be worth keeping in mind as an idea for a demonstration for
workshops or hacklabs for folks who are curious about networking -- do a
live packet capture of the local network, project it, and just start
asking questions about it. Wireshark contains such a wealth of obscure
packet dissectors (and today's heterogenous public/open networks are so
remarkably chatty and filled with weird stuff) that you're bound to run
into things that most (or all!) people in the room don't know about, so
it could be a good learning activity for groups of all skill levels.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/debugging"&gt;debugging&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/imap"&gt;imap&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/perdition"&gt;perdition&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/wireshark"&gt;wireshark&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>January 2010 Bug-Squashing Party NYC</title><link href="https://dkg.fifthhorseman.net/blog/january-2010-bug-squashing-party-nyc.html" rel="alternate"/><published>2009-12-21T20:54:00-05:00</published><updated>2009-12-21T20:54:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2009-12-21:/blog/january-2010-bug-squashing-party-nyc.html</id><summary type="html">&lt;p&gt;We're going to have a &lt;a href="http://wiki.debian.org/BSP2010/NewYorkCity"&gt;Bug-Squashing Party at the end of January 2010 in
New York City&lt;/a&gt;. If you live
in or around the tri-state area (or want to visit), are interested in
learning about the process, meeting other debian folk, or just squashing
some bugs in good company, you …&lt;/p&gt;</summary><content type="html">&lt;p&gt;We're going to have a &lt;a href="http://wiki.debian.org/BSP2010/NewYorkCity"&gt;Bug-Squashing Party at the end of January 2010 in
New York City&lt;/a&gt;. If you live
in or around the tri-state area (or want to visit), are interested in
learning about the process, meeting other debian folk, or just squashing
some bugs in good company, you should come out and join us!&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;Where:&lt;/dt&gt;
&lt;dd&gt;Brooklyn, New York, USA&lt;/dd&gt;
&lt;dt&gt;When:&lt;/dt&gt;
&lt;dd&gt;January 29th, 30th, and maybe 31st of 2010&lt;/dd&gt;
&lt;dt&gt;Why:&lt;/dt&gt;
&lt;dd&gt;Because them bugs need squashing!&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;If you plan on coming, please either sign up on &lt;a href="http://wiki.debian.org/BSP2010/NewYorkCity"&gt;the wiki
page&lt;/a&gt;, or at least mail one
of the good folks listed there, or pop into &lt;a href="irc://irc.oftc.net/#debian-nyc"&gt;&lt;code&gt;#debian-nyc&lt;/code&gt; on
&lt;code&gt;irc.oftc.net&lt;/code&gt;'s IRC network&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/bsp"&gt;bsp&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>dd, netcat, and disk throughput</title><link href="https://dkg.fifthhorseman.net/blog/dd-netcat-and-disk-throughput.html" rel="alternate"/><published>2009-12-21T06:21:00-05:00</published><updated>2009-12-21T06:21:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2009-12-21:/blog/dd-netcat-and-disk-throughput.html</id><summary type="html">&lt;p&gt;I was trying to dump a large Logical Volume (LV) over ethernet from one
machine to another. I found some behavior which surprised me.&lt;/p&gt;
&lt;h3 id="fun-constraints"&gt;fun constraints&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;I have only a fairly minimal debian installation on each machine
    (which fortunately includes &lt;code&gt;netcat-traditional&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;The two machines are connected directly by a single …&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;I was trying to dump a large Logical Volume (LV) over ethernet from one
machine to another. I found some behavior which surprised me.&lt;/p&gt;
&lt;h3 id="fun-constraints"&gt;fun constraints&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;I have only a fairly minimal debian installation on each machine
    (which fortunately includes &lt;code&gt;netcat-traditional&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;The two machines are connected directly by a single (gigabit)
    ethernet cable, with no other network connection. So no pulling in
    extra packages.&lt;/li&gt;
&lt;li&gt;I have serial console access to both machines, but no physical
    access.&lt;/li&gt;
&lt;li&gt;The LV being transfered is 973GB in size according to &lt;code&gt;lvs&lt;/code&gt; (fairly
    large, that is), and contains a LUKS volume, which itself contains a
    basically-full filesystem -- transferring just the "used" bytes is
    not going to save space/time.&lt;/li&gt;
&lt;li&gt;I want to be able to check on how the transfer is doing while it's
    happening.&lt;/li&gt;
&lt;li&gt;I want the LV to show up as an LV on the target system, and don't
    have tons of extra room on the target to play around with (so no
    dumping it to the filesystem as a disk image first).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;(how do i get myself into these messes?)&lt;/p&gt;
&lt;p&gt;This entry has been truncated &lt;a href="https://debian-administration.org/users/dkg/weblog/57"&gt;read the full
entry&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/lvm"&gt;lvm&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/netcat"&gt;netcat&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>dealing with entropy on a virtual machine</title><link href="https://dkg.fifthhorseman.net/blog/dealing-with-entropy-on-a-virtual-machine.html" rel="alternate"/><published>2009-12-12T18:42:00-05:00</published><updated>2009-12-12T18:42:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2009-12-12:/blog/dealing-with-entropy-on-a-virtual-machine.html</id><summary type="html">&lt;p&gt;I've been using virtual machines (KVM, these days) as isolated
environments to do things like build packages as root. Unfortunately,
some of these activities require decent-sized chunks of random data
(pulled from &lt;code&gt;/dev/random&lt;/code&gt;). But &lt;code&gt;/dev/random&lt;/code&gt; pulls from the kernel's
entropy pool, which in turn is replenished from "hardware …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I've been using virtual machines (KVM, these days) as isolated
environments to do things like build packages as root. Unfortunately,
some of these activities require decent-sized chunks of random data
(pulled from &lt;code&gt;/dev/random&lt;/code&gt;). But &lt;code&gt;/dev/random&lt;/code&gt; pulls from the kernel's
entropy pool, which in turn is replenished from "hardware" events. But a
virtual machine has no actual hardware, and if it is only doing isolated
package builds, there is very little activity to feed the kernel's
entropy pool. So the builds and test suites that rely on this randomness
all hang for a long long time. :(&lt;/p&gt;
&lt;p&gt;My current way to get around this is to replace &lt;code&gt;/dev/random&lt;/code&gt; with the
&lt;code&gt;/dev/urandom&lt;/code&gt; device, which does not block if the entropy pool is
depleted:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nv"&gt;mknod&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;newrandom&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;c&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="nv"&gt;chmod&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="nv"&gt;reference&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="nv"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;random&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;newrandommv&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;f&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;newrandom&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;random&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;This has the consequence that the "randomness" these commands use
doesn't have as much "real" entropy, though some operating systems (like
FreeBSD) have a non-blocking &lt;code&gt;/dev/random&lt;/code&gt; by default (and it's also
questionable what "real" entropy means for a virtual machine in the
first place).&lt;/p&gt;
&lt;p&gt;I'm also using &lt;a href="http://packages.debian.org/cowbuilder"&gt;cowbuilder&lt;/a&gt;
within these VMs to do package builds. But cowbuilder has its own &lt;code&gt;/dev&lt;/code&gt;
tree, with its own device nodes, so this needs to be fixed too. So after
you have successfully done &lt;code&gt;cowbuilder --create&lt;/code&gt;, you need to modify the
&lt;code&gt;random&lt;/code&gt; device within the cowbuilder chroot:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;mknod&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pbuilder&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cow&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;newrandom&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="n"&gt;chmod&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;reference&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pbuilder&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cow&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pbuilder&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cow&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;newrandommv&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pbuilder&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cow&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;newrandom&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pbuilder&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cow&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;random&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Hopefully this will be useful for other people using cowbuilder (or
other build strategies) on isolated virtual machines. If you've worked
around this problem in other ways (or if there's a security concern
about this approach), i'd be happy to hear about the details.&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Revoking the Ubuntu Community Code of Conduct</title><link href="https://dkg.fifthhorseman.net/blog/revoking-the-ubuntu-community-code-of-conduct.html" rel="alternate"/><published>2009-10-20T18:24:00-04:00</published><updated>2009-10-20T18:24:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2009-10-20:/blog/revoking-the-ubuntu-community-code-of-conduct.html</id><summary type="html">&lt;p&gt;I've just &lt;a href="http://fifthhorseman.net/ubuntu/coc/coc-revoked.txt"&gt;revoked my signature over the Ubuntu Code of Conduct
1.0.1&lt;/a&gt;. I did this
because Ubuntu's CoC (perhaps jokingly?) singles out Mark Shuttleworth
as someone who should be held to a super-human standard (as &lt;a href="http://rhonda.deb.at/blog/debian/coc-joke.en.html"&gt;pointed out
recently by Rhonda&lt;/a&gt;,
as well as earlier in &lt;a href="https://launchpad.net/bugs/53843"&gt;ubuntu bug
53848 …&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;I've just &lt;a href="http://fifthhorseman.net/ubuntu/coc/coc-revoked.txt"&gt;revoked my signature over the Ubuntu Code of Conduct
1.0.1&lt;/a&gt;. I did this
because Ubuntu's CoC (perhaps jokingly?) singles out Mark Shuttleworth
as someone who should be held to a super-human standard (as &lt;a href="http://rhonda.deb.at/blog/debian/coc-joke.en.html"&gt;pointed out
recently by Rhonda&lt;/a&gt;,
as well as earlier in &lt;a href="https://launchpad.net/bugs/53843"&gt;ubuntu bug
53848&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;I think that the CoC is a good document, and good guidelines in general
for reasonable participation in online communities. When i originally
signed the document, i thought the Shuttleworth-exceptionalism was odd,
but decided i'd be willing to hold him to a higher standard than the
rest of the community, if he wanted me to. That is, i figured his
position as project leader meant that he could have made the CoC
different than it is, thus he was (perhaps indirectly) asking me to hold
him to a higher standard.&lt;/p&gt;
&lt;p&gt;Why does this matter to me now? Shuttleworth has &lt;a href="https://launchpad.net/~sabdfl#ubuntu-coc"&gt;apparently signed the
Ubuntu Code of Conduct&lt;/a&gt;, but
&lt;a href="https://debian-administration.org/users/dkg/weblog/54"&gt;as i wrote about
earlier&lt;/a&gt;, his
&lt;a href="http://blog.linuxtoday.com/blog/2009/09/mark-shuttlewor-1.html"&gt;recent sexist comments at
LinuxCon&lt;/a&gt;
were a Bad Thing for the community, and his apparent lack of an apology
or open discussion with the community concerned about it was even worse.&lt;/p&gt;
&lt;p&gt;So i'm asking Mark Shuttleworth to abide by the following points in the
Code of Conduct that he has signed:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Be considerate&lt;/li&gt;
&lt;li&gt;Be respectful [...] It's important to remember that a community
    where people feel uncomfortable or threatened is not a productive
    one.&lt;/li&gt;
&lt;li&gt;The important goal is not to avoid disagreements or differing views
    but to resolve them constructively. You should turn to the community
    and to the community process to seek advice and to resolve
    disagreements.&lt;/li&gt;
&lt;li&gt;When you are unsure, ask for help. Nobody knows everything, and
    nobody is expected to be perfect in the Ubuntu community&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I've &lt;a href="http://fifthhorseman.net/ubuntu/coc/coc-revised.txt"&gt;signed a revised version of the Ubuntu Code of Conduct
1.01&lt;/a&gt; (with the
Shuttleworth-exceptionalism clause removed), to reaffirm my commitment
to these principles, and to acknowledge that, yes, the SABDFL can make a
mistake, and to encourage him to address his mistakes in a fashion
befitting a mature participant in this community we both care about.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;UPDATE:&lt;/strong&gt; It seems that &lt;a href="http://mako.cc/"&gt;Mako&lt;/a&gt; and &lt;a href="http://daniel.holba.ch/"&gt;Daniel
Holbach&lt;/a&gt; have recently revised the CoC
resulting in &lt;a href="http://mako.cc/copyrighteous/20091020-00.comment"&gt;a new version (1.1) which has just been approved by the
the Ubuntu Community
Council&lt;/a&gt;. The [new
version 1.1]{} looks good to me (i like its broadening of scope beyond
developers, and its lack of superhuman claims for Shuttleworth) and when
it is available on Launchpad, i'll most likely sign it there. Thanks to
the two of them for their work! I hope Shuttleworth will consider
abiding by this new version.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/code%20of%20conduct"&gt;code of
conduct&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/sexism"&gt;sexism&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/ubuntu"&gt;ubuntu&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>sexist behavior in the free software community</title><link href="https://dkg.fifthhorseman.net/blog/sexist-behavior-in-the-free-software-community.html" rel="alternate"/><published>2009-10-01T20:32:00-04:00</published><updated>2009-10-01T20:32:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2009-10-01:/blog/sexist-behavior-in-the-free-software-community.html</id><summary type="html">&lt;p&gt;So not even 3 months out from &lt;a href="http://opensourcetogo.blogspot.com/2009/07/emailing-richard-stallman.html"&gt;RMS's sexist Gran Canaria “virgins”
remarks&lt;/a&gt;,
we have another powerful leader in the Free Software Community &lt;a href="http://blog.linuxtoday.com/blog/2009/09/mark-shuttlewor-1.html"&gt;making
sexist remarks in a talk to developers (this time, it's Mark
Shuttleworth)&lt;/a&gt;.
It's a shame that these two people have said stupid things that hurt
their …&lt;/p&gt;</summary><content type="html">&lt;p&gt;So not even 3 months out from &lt;a href="http://opensourcetogo.blogspot.com/2009/07/emailing-richard-stallman.html"&gt;RMS's sexist Gran Canaria “virgins”
remarks&lt;/a&gt;,
we have another powerful leader in the Free Software Community &lt;a href="http://blog.linuxtoday.com/blog/2009/09/mark-shuttlewor-1.html"&gt;making
sexist remarks in a talk to developers (this time, it's Mark
Shuttleworth)&lt;/a&gt;.
It's a shame that these two people have said stupid things that hurt
their causes and their communities by perpetuating an unfriendly
environment for women. And it's a bigger shame that neither leader
appears to care enough about their community to issue a sincere public
apology for their screwup (if i'm wrong about this, please point me to
the apology — i've looked).&lt;/p&gt;
&lt;p&gt;These guys are in a situation which is nowhere near as hard as writing
good software or managing complex technical projects: if you make a
stupid mistake, own up to it, apologize, and try not to make similar
mistakes in the future.&lt;/p&gt;
&lt;p&gt;Perhaps worst of all, are the remarkable number of unreasonably
fucked-up comments on the blog posts discussing these unfortunate
events. If you're in the habit of defending remarks like those made by
RMS and Shuttleworth on the 'net, please take a minute and ask yourself
a few questions:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Do you think that the Free Software community today is
    overwhelmingly male (even by the standards of the male-dominated IT
    industry)? If not, thanks for playing. You are living in a fantasy
    world. Try some basic research.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Do you think that the significant under-representation of women is a
    problem? Let's say there are about three answers here:&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;Gender disparity in Free Software is a Good Thing&lt;/dt&gt;
&lt;dd&gt;If this is your position, please announce it explicitly so we
all know. Just so you know: I don't want to be part of your
all-boys club. You can stop these questions now, sorry to have
bothered you.&lt;/dd&gt;
&lt;dt&gt;I don't really care about gender disparity in Free Software one way or the other&lt;/dt&gt;
&lt;dd&gt;You may not care; but a significant subset of the Free Software
community thinks that it's a problem and would like to address
it. Please keep this in mind as you go to the next question.
Also, have you thought much about the idea of privilege and how
it might apply to your situation?&lt;/dd&gt;
&lt;dt&gt;I think gender disparity in Free Software is probably a Bad Thing&lt;/dt&gt;
&lt;dd&gt;Great, glad we agree on that.&lt;/dd&gt;
&lt;/dl&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;People in our community have a problem with the current state of
    affairs, and point out some specific behavior that makes the bad
    situation worse. What should you do?
    &lt;dl&gt;
    &lt;dd&gt;
    &lt;dt&gt;
    Shout them down or attack them
    &lt;dd&gt;
    Gee, it sure is upsetting to hear people talk about problems in the
    community. It's almost as upsetting as getting bug reports about
    problems in our software. Shall we shout them down too? Maybe we
    should attack them! Condescension is also great. Those silly bug
    reporters!
    &lt;dt&gt;
    Argue them out of having a problem
    &lt;dd&gt;
    This just doesn't work very well. Someone has already volunteered to
    tell you about a problem that you hadn't noticed. You are unlikely
    to convince them that they were imagining things.
    &lt;dt&gt;
    Take them seriously
    &lt;dd&gt;
    Yes! It seems to be surprising to some commentators that this is not
    a witch hunt or a lynch mob (interesting that these terms often-used
    in defense of white men connote specific historical traditions of
    the exercise of male privilege and white privilege, respectively).
    Well-meaning people have respectfully raised good-faith concerns
    about the state of our community, and made very simple suggestions
    about what to do to make the community more welcoming to women: lay
    off the sexist remarks at conferences, apologize when some nonsense
    does slip through — we're all struggling with various kinds of
    internalized oppression, you won't be perfect — and try not to do it
    again. Why not listen to these people? Why not support them?
    &lt;/dl&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Please read &lt;a href="http://geekfeminism.wikia.com/wiki/Geek_Feminism_Wiki"&gt;the Geek Feminism
wiki&lt;/a&gt; and
&lt;a href="http://geekfeminism.org/"&gt;blog&lt;/a&gt;. Even if you don't agree with
everything on those sites (hey, it's a wiki! and a blog! you don't have
to agree with everything!), people are at least trying to address the
problem of sexism in our community there. Engage constructively and
don't hide or ignore problems!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;UPDATE:&lt;/strong&gt; I've asked the site admin to remove some trollish comments.
If you want to use the comments on this blog to announce something like
"i'd like for free software to be a boys-only club", that's fine, i'd
like to know who you are so i can adjust my perception of you
accordingly. Anything advocating or excusing rape and/or murder is way
over the line and is not welcome here. i'm sure you can find some other
place to troll.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/community"&gt;community&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/conduct"&gt;conduct&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/feminism"&gt;feminism&lt;/a&gt;, &lt;a href="https://debian-administration.org/tag/free%20software"&gt;free
software&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/sexism"&gt;sexism&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Tools should be distinct from Services</title><link href="https://dkg.fifthhorseman.net/blog/tools-should-be-distinct-from-services.html" rel="alternate"/><published>2009-09-18T18:47:00-04:00</published><updated>2009-09-18T18:47:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2009-09-18:/blog/tools-should-be-distinct-from-services.html</id><summary type="html">&lt;p&gt;Modern daemon implementations can be run in a variety of ways, in a
range of contexts. The daemon software itself can be a useful tool in
environments where the associated traditional system service is neither
needed nor desired. Unfortunately, common debian packaging practice has
a tendency to conflate the two …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Modern daemon implementations can be run in a variety of ways, in a
range of contexts. The daemon software itself can be a useful tool in
environments where the associated traditional system service is neither
needed nor desired. Unfortunately, common debian packaging practice has
a tendency to conflate the two ideas, leading to some potentially nasty
problems where only the tool itself is needed, but the system service is
set up anyway.&lt;/p&gt;
&lt;p&gt;How would i fix it? i'd suggest that we make a distinction between
packages that provide &lt;em&gt;tools&lt;/em&gt; and packages that provide &lt;em&gt;system
services&lt;/em&gt;. A package that provides the &lt;em&gt;system service&lt;/em&gt; &lt;code&gt;foo&lt;/code&gt; would need
to depend on a package that provides the &lt;em&gt;tool&lt;/em&gt; &lt;code&gt;foo&lt;/code&gt;. But the tool
&lt;code&gt;foo&lt;/code&gt; should be available through the package manager without setting up
a system service automatically.&lt;/p&gt;
&lt;h2 id="bad-examples"&gt;Bad Examples&lt;/h2&gt;
&lt;p&gt;Here are some examples of this class of problem i've seen recently:&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;&lt;code&gt;akonadi-server&lt;/code&gt; depends on &lt;code&gt;mysql-server&lt;/code&gt;&lt;/dt&gt;
&lt;dd&gt;
&lt;p&gt;&lt;a href="http://pim.kde.org/akonadi/"&gt;akonadi&lt;/a&gt; is a project to provide
extensible, cross-desktop storage for PIM data. It is a dependency
of many pieces of the modern KDE4 desktop. Its current
implementation relies on a private instantiation of
&lt;a href="http://en.wikipedia.org/wiki/MySQL"&gt;&lt;code&gt;mysqld&lt;/code&gt;&lt;/a&gt;, executed directly by
the end user whose desktop is running.&lt;/p&gt;
&lt;p&gt;This means that a sysadmin who installs &lt;a href="http://packages.debian.org/korganizer"&gt;a graphical calendar
application&lt;/a&gt; suddenly now has
(in addition to the user-instantiated local &lt;code&gt;mysqld&lt;/code&gt; running as the
akonadi backend) a full-blown system RDBMS service running and
potentially consuming resources on her machine.&lt;/p&gt;
&lt;p&gt;&lt;p&gt;
Wouldn't it be better if &lt;a href="http://bugs.debian.org/513382"&gt;the &lt;code&gt;/usr/sbin/mysqld&lt;/code&gt; tool itself was
distinct from the system service&lt;/a&gt;?&lt;/p&gt;
&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;puppetmaster&lt;/code&gt; depends on &lt;code&gt;puppet&lt;/code&gt;&lt;/dt&gt;
&lt;dd&gt;
&lt;p&gt;&lt;a href="http://reductivelabs.com/trac/puppet"&gt;Puppet&lt;/a&gt; is a powerful
framework for configuration management. A managed host installs the
&lt;a href="http://packages.debian.org/puppet"&gt;&lt;code&gt;puppet&lt;/code&gt;&lt;/a&gt; package, which invokes
a &lt;code&gt;puppetd&lt;/code&gt; service to reconfigure the managed host by talking to a
centralized server on the network. The central host installs the the
&lt;a href="http://packages.debian.org/puppetmaster"&gt;&lt;code&gt;puppetmaster&lt;/code&gt;&lt;/a&gt; package,
which sets up a system &lt;code&gt;puppetmasterd&lt;/code&gt; service. &lt;code&gt;puppetmaster&lt;/code&gt;
depends on &lt;code&gt;puppet&lt;/code&gt; to make use of some of the functionality
available in the package.&lt;/p&gt;
&lt;p&gt;But this means that the central host now has &lt;code&gt;puppetd&lt;/code&gt; running, and
is being configured through the system itself! While some people may
prefer to configure their all-powerful central host through the same
configuration management system, this presents a nasty potential
failure mode: if the configuration management goes awry and makes
the managed nodes inaccessible, it could potentially take itself out
too.&lt;/p&gt;
&lt;p&gt;Shouldn't the &lt;code&gt;puppet&lt;/code&gt; tools be distinct from the &lt;code&gt;puppetd&lt;/code&gt; system
service?&lt;/p&gt;
&lt;p&gt;&lt;p&gt;
&lt;strong&gt;Update:&lt;/strong&gt; &lt;a href="http://packages.qa.debian.org/p/puppet/news/20100205T111744Z.html"&gt;puppet 0.25.4-1 resolves this problem with a package
re-factoring&lt;/a&gt;;
the tools are in &lt;code&gt;puppet-common&lt;/code&gt;, and the &lt;code&gt;puppet&lt;/code&gt; package retains
its old semantics of running the system service. Looks good to me!&lt;/p&gt;
&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;monkeysphere&lt;/code&gt; &lt;code&gt;Build-Depends: openssh-server&lt;/code&gt;&lt;/dt&gt;
&lt;dd&gt;
&lt;p&gt;&lt;a href="http://web.monkeysphere.info/"&gt;The Monkeysphere&lt;/a&gt; is a framework for
managing SSH authentication through the OpenPGP Web-of-Trust (i'm
one of the authors). To ensure that the package interacts properly
with the OpenSSH implementation, the &lt;code&gt;monkeysphere&lt;/code&gt; source ships
with a series of test suites that exercise both &lt;code&gt;sshd&lt;/code&gt; and &lt;code&gt;ssh&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;This means that anyone trying to build the
&lt;a href="http://packages.debian.org/monkeysphere"&gt;&lt;code&gt;monkeysphere&lt;/code&gt;&lt;/a&gt; package
must pull in
&lt;a href="http://packages.debian.org/openssh-server"&gt;&lt;code&gt;openssh-server&lt;/code&gt;&lt;/a&gt; to
satisfy the build-depends, thereby inadvertently starting up a
potentially powerful network service on their build machine and
maybe exposing it to remote access that they didn't intend.&lt;/p&gt;
&lt;p&gt;&lt;p&gt;
Wouldn't it be better if the &lt;code&gt;/usr/sbin/sshd&lt;/code&gt; tool was available
without starting up the &lt;code&gt;ssh&lt;/code&gt; system service?&lt;/p&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;h2 id="good-examples"&gt;Good Examples&lt;/h2&gt;
&lt;p&gt;Here are some examples of debian packaging that already understand and
implement this distinction in some way:&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;&lt;code&gt;apache2.2-bin&lt;/code&gt; is distinct from &lt;code&gt;apache2-mpm-foo&lt;/code&gt;&lt;/dt&gt;
&lt;dd&gt;Debian's &lt;a href="http://packages.debian.org/apache2"&gt;apache&lt;/a&gt; packaging
&lt;a href="http://packages.debian.org/changelogs/pool/main/a/apache2/current/changelog#versionversion2.2.11-5"&gt;recently
transitioned&lt;/a&gt;
to split the apache tool into a separate package (&lt;code&gt;apache2.2-bin&lt;/code&gt;)
from the packages that provide an apache system service
(&lt;code&gt;apache2-mpm-foo&lt;/code&gt;). So apache can now be run by a regular user, for
example as part of
&lt;a href="http://packages.debian.org/gnome-user-share"&gt;&lt;code&gt;gnome-user-share&lt;/code&gt;&lt;/a&gt;.&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;git-core&lt;/code&gt; is distinct from &lt;code&gt;git-daemon-run&lt;/code&gt;&lt;/dt&gt;
&lt;dd&gt;&lt;a href="http://packages.debian.org/git-core"&gt;&lt;code&gt;git-core&lt;/code&gt;&lt;/a&gt; provides the
&lt;code&gt;git daemon&lt;/code&gt; subcommand, which is a tool capable of providing
network access to a git repo. However, it does not set up a system
service by default. The &lt;code&gt;git-daemon-run&lt;/code&gt; package provides a way for
an admin to quickly set up a "typical" system service to offer
networked git access.&lt;/dd&gt;
&lt;dt&gt;&lt;code&gt;vblade&lt;/code&gt; is distinct from &lt;code&gt;vblade-persist&lt;/code&gt;&lt;/dt&gt;
&lt;dd&gt;&lt;a href="http://packages.debian.org/vblade"&gt;&lt;code&gt;vblade&lt;/code&gt;&lt;/a&gt; offers a simple,
powerful utility to export a single file or block device as an
&lt;a href="http://wikipedia.org/wiki/ATA_over_Ethernet"&gt;AoE&lt;/a&gt; device.
&lt;a href="http://packages.debian.org/vblade-persist"&gt;&lt;code&gt;vblade-persist&lt;/code&gt;&lt;/a&gt;
(disclosure: i wrote &lt;code&gt;vblade-persist&lt;/code&gt;) provides a system service to
configure exported devices, supervise them, keep them in service
across system reboots, etc.&lt;/dd&gt;
&lt;/dl&gt;
&lt;h2 id="tools-are-not-services-a-proposal"&gt;Tools are not Services: a Proposal&lt;/h2&gt;
&lt;p&gt;Let's consider an existing &lt;code&gt;foo&lt;/code&gt; package which currently provides:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the tool itself (say, &lt;code&gt;/usr/sbin/foo&lt;/code&gt;) and&lt;/li&gt;
&lt;li&gt;sets up a system service running &lt;code&gt;foo&lt;/code&gt;, including stock &lt;code&gt;foo&lt;/code&gt; daemon
    configuration in &lt;code&gt;/etc/foo/*&lt;/code&gt;, startup scripts at &lt;code&gt;/etc/init.d/foo&lt;/code&gt;,
    service configs at &lt;code&gt;/etc/default/foo&lt;/code&gt;, etc.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I suggest that this should be split into two packages. &lt;code&gt;foo-bin&lt;/code&gt; would
contain the tool itself, and &lt;code&gt;foo&lt;/code&gt; (which &lt;code&gt;Depends: foo-bin&lt;/code&gt;) would
contain the service configuration information, postinst scripts to set
it up and start it, etc. This would mean that every instance of
&lt;code&gt;apt-get install foo&lt;/code&gt; in someone's notes would retain identical
semantics to the past, but packages which need the &lt;em&gt;tool&lt;/em&gt; (but not the
&lt;em&gt;service&lt;/em&gt;) can now depend on &lt;code&gt;foo-bin&lt;/code&gt; instead, leaving the system with
fewer resources consumed, and fewer unmanaged services running.&lt;/p&gt;
&lt;p&gt;For brand new packages (which don't have to account for a legacy of
documentation which says &lt;code&gt;apt-get install foo&lt;/code&gt;), i prefer the naming
convention that the &lt;code&gt;foo&lt;/code&gt; package includes the tool itself (after all,
it does provide &lt;code&gt;/usr/sbin/foo&lt;/code&gt;), and &lt;code&gt;foo-service&lt;/code&gt; sets up a standard
system service configured and running (and depends on &lt;code&gt;foo&lt;/code&gt;).&lt;/p&gt;
&lt;h2 id="side-effects"&gt;Side Effects&lt;/h2&gt;
&lt;p&gt;This proposal would fix the problems noted above, but it would also
offer some nice additional benefits. For example, it would make it
easier to introduce an alternate system initialization process by
creating alternate service packages (while leaving the tool package
alone). Things like
&lt;a href="http://packages.debian.org/runit-services"&gt;&lt;code&gt;runit-services&lt;/code&gt;&lt;/a&gt; could
become actual contenders for managing the running services, without
colliding with the "stock" services installed by the bundled
tool+service package.&lt;/p&gt;
&lt;p&gt;The ability to create alternate service packages would also mean that
maintainers who prefer radically different configuration defaults could
offer their service instantiations as distinct packages. For example,
one system-wide &lt;code&gt;foo&lt;/code&gt; daemon (&lt;code&gt;foo-service&lt;/code&gt;) versus a separate instance
of the &lt;code&gt;foo&lt;/code&gt; daemon per user (&lt;code&gt;foo-peruser-service&lt;/code&gt;) or triggering a
daemon via &lt;code&gt;inetd&lt;/code&gt; (&lt;code&gt;foo-inetd-service&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;One negative side effect is that it adds some level of increased load on
the package maintainers — if the service package and the tool package
both come from the same source package, then some work needs to be done
to figure out how to split them. If the tool and service packages have
separate sources (like &lt;code&gt;vblade&lt;/code&gt; and &lt;code&gt;vblade-persist&lt;/code&gt;) then some
coordinating footwork needs to be done between the two packages when any
incompatible changes happen.&lt;/p&gt;
&lt;h2 id="questions-disagreements-next-steps"&gt;Questions? Disagreements? Next Steps?&lt;/h2&gt;
&lt;p&gt;Do you disagree with this proposal? If so, why? Unfortunately (to my
mind), Debian has a long history of packages which conflate tools with
services. &lt;a href="http://www.debian.org/doc/debian-policy/ch-opersys.html#s9.3.2"&gt;Policy section
9.3.2&lt;/a&gt;
can even be read as deliberately blurring the line (though i'd argue
that a cautious reading suggests that my proposal is not in opposition
to policy):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Packages that include daemons for system services should place scripts
in &lt;code&gt;/etc/init.d&lt;/code&gt; to start or stop services at boot time or during a
change of runlevel.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I feel like this particular conflict must have been hashed out before at
some level — are there links to definitive discussion that i'm missing?
Is there any reason we shouldn't push in general for this kind of
distinction in debian daemon packages?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/daemons"&gt;daemons&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/packaging"&gt;packaging&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/policy"&gt;policy&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>xen etch to lenny upgrade serial console</title><link href="https://dkg.fifthhorseman.net/blog/xen-etch-to-lenny-upgrade-serial-console.html" rel="alternate"/><published>2009-09-13T23:33:00-04:00</published><updated>2009-09-13T23:33:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2009-09-13:/blog/xen-etch-to-lenny-upgrade-serial-console.html</id><summary type="html">&lt;p&gt;I maintain several xen machines. Most servers that i maintain use serial
consoles (i should probably write another post in more detail about why
serial consoles are the One True Way to manage a server).&lt;/p&gt;
&lt;p&gt;Trouble is, the way that xen works with the serial console has changed
between etch …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I maintain several xen machines. Most servers that i maintain use serial
consoles (i should probably write another post in more detail about why
serial consoles are the One True Way to manage a server).&lt;/p&gt;
&lt;p&gt;Trouble is, the way that xen works with the serial console has changed
between etch and lenny. So what's changed? From what i can tell:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The way that the dom0 Linux kernel interacts with the hypervisor's
    console has changed between Linux 2.6.18 (etch) and 2.6.26 (lenny),
    and&lt;/li&gt;
&lt;li&gt;the Xen hypervisor's method of specifying the console itself has
    changed between Xen 3.0.3 (etch) and 3.2.1 (lenny)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In etch systems, i had a standard GRUB specification like this (as
&lt;a href="https://www.debian-administration.org/users/dkg/weblog/17"&gt;noted
earlier&lt;/a&gt;):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;title           Xen 3.0.3-1-i386-pae / Debian GNU/Linux, kernel 2.6.18-4-xen-686root            (hd0,0)kernel          /xen-3.0.3-1-i386-pae.gz dom0_mem=131072 com1=115200,8n1module          /vmlinuz-2.6.18-4-xen-686 root=/dev/mapper/vg_monkey0-dom0 ro console=ttyS0,115200n8 module          /initrd.img-2.6.18-4-xen-686savedefault
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;but in lenny, i find it necessary to do this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;title           Xen 3.2-1-i386 / Debian GNU/Linux, kernel 2.6.26-2-xen-686root            (hd0,0)kernel          /xen-3.2-1-i386.gz dom0_mem=131072 com1=115200,8n1 console=com1module          /vmlinuz-2.6.26-2-xen-686 root=/dev/mapper/vg_monkey0-dom0 ro console=hvc0module          /initrd.img-2.6.26-2-xen-686
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;In particular, the hypervisor itself needs an additional &lt;code&gt;console=com1&lt;/code&gt;
argument to make sure that it uses the serial console (i suppose the
&lt;code&gt;com1=...&lt;/code&gt; argument simply specifies &lt;em&gt;how&lt;/em&gt; to use the serial console
should you need it, instead of a requirement &lt;em&gt;to&lt;/em&gt; use the console).&lt;/p&gt;
&lt;p&gt;And the Linux kernel itself for the dom0 needs to adopt &lt;code&gt;hvc0&lt;/code&gt; as its
&lt;code&gt;console&lt;/code&gt;, which i believe is an acronym for something like the
"hypervisor virtual console" -- this way, the dom0 kernel will come out
multiplexed over the hypervisor's console, no matter where that
hypervisor's console is directed (you might not even need to specify
this explicitly -- it might be set up by default).&lt;/p&gt;
&lt;p&gt;When i tried to use the etch settings for the console with the lenny
hypervisor and kernel, i saw the hypervisor try to come out on the video
card, and a dom0 crash!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/serial"&gt;serial&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/serial%20console"&gt;serial
console&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/xen"&gt;xen&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Wanted: Empowered, Active, Activist Users</title><link href="https://dkg.fifthhorseman.net/blog/wanted-empowered-active-activist-users.html" rel="alternate"/><published>2009-08-27T16:34:00-04:00</published><updated>2009-08-27T16:34:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2009-08-27:/blog/wanted-empowered-active-activist-users.html</id><summary type="html">&lt;p&gt;The &lt;a href="http://dangillmor.com/"&gt;other, better-known and wiser Dan Gillmor&lt;/a&gt;
(disclosure: we don't just share names, we're related) has started a new
project called &lt;a href="http://mediactive.com/"&gt;Mediactive&lt;/a&gt;. His older project,
&lt;a href="http://wethemedia.oreilly.com/"&gt;We the Media&lt;/a&gt; was about the power and
coming growth of grassroots journalism. The new project focuses on media
"consumers", instead of media "producers". Economic …&lt;/p&gt;</summary><content type="html">&lt;p&gt;The &lt;a href="http://dangillmor.com/"&gt;other, better-known and wiser Dan Gillmor&lt;/a&gt;
(disclosure: we don't just share names, we're related) has started a new
project called &lt;a href="http://mediactive.com/"&gt;Mediactive&lt;/a&gt;. His older project,
&lt;a href="http://wethemedia.oreilly.com/"&gt;We the Media&lt;/a&gt; was about the power and
coming growth of grassroots journalism. The new project focuses on media
"consumers", instead of media "producers". Economic metaphors usually
leave me cold, but it resonates with me when &lt;a href="http://mediactive.com/2009/08/24/moving-along-mediactive/"&gt;he
says&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;So I’m declaring victory, albeit early, on the supply side of the
equation. [...]&lt;/p&gt;
&lt;p&gt;But that doesn’t solve what may be a bigger issue: crappy demand.&lt;/p&gt;
&lt;p&gt;&lt;p&gt;
We have raised several generations of passive consumers of news and
information. That’s not good enough anymore.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The directional shift he's taking is an important one, and not just one
for an independent, grassroots media. It seems parallel in many ways to
the situation i see around free software.&lt;/p&gt;
&lt;p&gt;The free software community has clearly demonstrated that we can build
quality, liberated tools for the public in and from the commons (though
there are admittedly tons of crap tools in the commons as well). But the
society-altering political goals of free software (that everyone should
have the right and the ability to freely use good tools fully under
their own control, a corollary of freedom 0 from &lt;a href="http://www.gnu.org/philosophy/free-sw.html"&gt;the FSF's four
freedoms&lt;/a&gt;) are still going
to fail if the majority of the tool users shrug their shoulders and
either:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;aren't active participants in the communities around their tools, or&lt;/li&gt;
&lt;li&gt;concede to be pushed into proprietary tool use by people who are
    more interested in being proprietors than in enabling the freedom of
    their users.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Software &lt;em&gt;needs&lt;/em&gt; an active and engaged userbase if it is going to become
Good Software. Your software works for you? Fine. But if you can make it
work for a dozen people who are engaged enough to say “Wouldn't it be
great if...?” or “How come it acts like...?”, you can build a tool
capable of solving problems you couldn't have imagined on your own. And
those users can help and engage each other (and still more users) too;
the community makes the tool more powerful. More powerful free tools
provide more freedom to their community of users.&lt;/p&gt;
&lt;p&gt;Dan's new project seems to acknowledge that not everyone is going to
become a grassroots journalist themselves. And great as the dream of
free software is, we &lt;em&gt;cannot&lt;/em&gt; realistically insist that everyone become
a software developer either. For either grassroots journalism or free
software to live up to their promise, we need active and engaged (or
even activist) users.&lt;/p&gt;
&lt;p&gt;This is a tough project. i'm an active and engaged software user -- i
have to be if i want to be a decent software developer, protocol
designer, system administrator, or participant in
&lt;a href="http://debian.org/"&gt;debian&lt;/a&gt;. But it takes work and mental energy just
to be a user like that, let alone the other responsibilities. But
frankly (sorry, Dan!), i'm a terribly passive media consumer. I know
Dan's right, that i can contribute to the cause of grassroots and
distributed media (a cause i believe in, without seeing myself as a
grassroots journalist) by being a more engaged and activist user of the
media. But i don't do it currently. Why? While i'm not sure exactly
&lt;em&gt;how&lt;/em&gt; to be an active or engaged user of the media, i have no doubt that
if i threw myself at the task, i could figure it out. But this kind of
learning takes time and is real work, and even if i had it all figured
out, i'm sure that being active and engaged would take more time and
work than being passive. And i already feel swamped by other obligations
and plans.&lt;/p&gt;
&lt;p&gt;Most software users must feel the same way about their tools. How can we
reduce those barriers? How can we not only help people see that their
contributions &lt;em&gt;as users&lt;/em&gt; are vitally important, but help make those
contributions and that participation easy? As far as i know, Dan (who
understands the goals, tech issues, and social concerns around software
freedom as well as any non-programmer i know) doesn't run a free
operating system himself. And i don't participate in any significant way
as an engaged user of distributed, grassroots media. That sucks.&lt;/p&gt;
&lt;p&gt;So:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;How do you make room for one more goal you believe in?&lt;/li&gt;
&lt;li&gt;How do you make it so your own goals are appealing and easy enough
    that natural allies can participate without feeling overwhelmed?&lt;/li&gt;
&lt;li&gt;What do we need to do as participants in a free software culture to
    encourage and engage active (and even activist) users?&lt;/li&gt;
&lt;li&gt;What projects are there out there (by analogy with
    &lt;a href="http://mediactive.com/"&gt;Mediactive&lt;/a&gt;) to encourage users of free
    software to be active or activist? How are they doing?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/free%20software"&gt;free
software&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/politics"&gt;politics&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/users"&gt;users&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Canon camera lens faiure (E18) -- resolved!</title><link href="https://dkg.fifthhorseman.net/blog/canon-camera-lens-faiure-e18-resolved.html" rel="alternate"/><published>2009-08-03T16:57:00-04:00</published><updated>2009-08-03T16:57:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2009-08-03:/blog/canon-camera-lens-faiure-e18-resolved.html</id><summary type="html">&lt;p&gt;I have a little old Canon SD200 point-and-shoot, which is a decent
camera. unfortunately, i've (ab)used it quite a bit, lugging it
everywhere in my pocket or in a bag and even &lt;a href="http://gallery.fifthhorseman.net/v/dkg/kite/"&gt;sending it up in a
kite&lt;/a&gt; (and, uh, bouncing
it off the ground on the way back …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I have a little old Canon SD200 point-and-shoot, which is a decent
camera. unfortunately, i've (ab)used it quite a bit, lugging it
everywhere in my pocket or in a bag and even &lt;a href="http://gallery.fifthhorseman.net/v/dkg/kite/"&gt;sending it up in a
kite&lt;/a&gt; (and, uh, bouncing
it off the ground on the way back down sometimes).&lt;/p&gt;
&lt;p&gt;Unsurprisingly, things occasionally fail when you subject them to harsh
conditions, and for a couple months now, the lens has failed to retract,
showing a message "&lt;code&gt;E18&lt;/code&gt;" on the screen and refusing to take pictures.&lt;/p&gt;
&lt;p&gt;It turns out i'm &lt;a href="http://www.e18error.com/repair.html"&gt;not the only one with this
problem&lt;/a&gt;, and there is actually a
&lt;a href="http://members.shaw.ca/gregs_space/Canon_E18_repair_guide_for_SD300.pdf"&gt;really nice guide with good
photos&lt;/a&gt;
for the SD300, which is a very similar problem. I'd been putting off
fixing it until i had time to really focus, out of fear that it would
take forever, but it turned out to be a really quick fix (i did
"Procedure 1" in &lt;a href="http://members.shaw.ca/gregs_space/Canon_E18_repair_guide_for_SD300.pdf"&gt;the step-by-step
guide&lt;/a&gt;
and it worked after about a minute of fiddling with the position
sensor), and now i have my camera back!&lt;/p&gt;
&lt;p&gt;So thank you, Greg Toews, for your excellent documentation!&lt;/p&gt;</content><category term="misc"/></entry><entry><title>keeping ssh host keys up-to-date with monkeysphere</title><link href="https://dkg.fifthhorseman.net/blog/keeping-ssh-host-keys-up-to-date-with-monkeysphere.html" rel="alternate"/><published>2009-07-23T23:04:00-04:00</published><updated>2009-07-23T23:04:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2009-07-23:/blog/keeping-ssh-host-keys-up-to-date-with-monkeysphere.html</id><summary type="html">&lt;p&gt;&lt;a href="http://www.enricozini.org/"&gt;Enrico&lt;/a&gt; posted &lt;a href="http://www.enricozini.org/2009/debian/known-hosts/"&gt;a neat trick to track the
SSH host keys of debian
machines&lt;/a&gt;, thanks to
&lt;a href="http://blog.zobel.ftbfs.de/"&gt;Zobel&lt;/a&gt;. I wanted to mention
&lt;a href="http://web.monkeysphere.info/"&gt;monkeysphere&lt;/a&gt;, a project i'm involved
with which provides a more generalized structure for doing this kind of
update by taking advantage of the OpenPGP Web of Trust to distribute …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://www.enricozini.org/"&gt;Enrico&lt;/a&gt; posted &lt;a href="http://www.enricozini.org/2009/debian/known-hosts/"&gt;a neat trick to track the
SSH host keys of debian
machines&lt;/a&gt;, thanks to
&lt;a href="http://blog.zobel.ftbfs.de/"&gt;Zobel&lt;/a&gt;. I wanted to mention
&lt;a href="http://web.monkeysphere.info/"&gt;monkeysphere&lt;/a&gt;, a project i'm involved
with which provides a more generalized structure for doing this kind of
update by taking advantage of the OpenPGP Web of Trust to distribute and
authenticate SSH keys.&lt;/p&gt;
&lt;p&gt;Enrico's &lt;code&gt;known_hosts&lt;/code&gt; update strategy is nice, but:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;it's centralized,&lt;/li&gt;
&lt;li&gt;it's useful only for debian developers (and only when connecting to
    debian machines),&lt;/li&gt;
&lt;li&gt;it relies on users regularly running an update they wouldn't need to
    do otherwise (re-fetching the file from &lt;code&gt;master.debian.org&lt;/code&gt; via
    &lt;code&gt;scp&lt;/code&gt;) and&lt;/li&gt;
&lt;li&gt;it relies on the maintainers of
    &lt;a href="https://db.debian.org/machines.cgi?host=master"&gt;master.debian.org&lt;/a&gt;:&lt;ul&gt;
&lt;li&gt;to avoid compromise (there are a ton of other problems if
    &lt;code&gt;master&lt;/code&gt; was compromised, of course),&lt;/li&gt;
&lt;li&gt;to keep &lt;code&gt;/etc/ssh/ssh_known_hosts&lt;/code&gt; up-to-date, and&lt;/li&gt;
&lt;li&gt;not to change the host key for &lt;code&gt;master&lt;/code&gt; itself (or the user's
    regular &lt;code&gt;scp&lt;/code&gt; updates would fail).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;These are relatively small flaws, and as a project debian is able to
work around them because we have infrastructure in place like &lt;a href="https://db.debian.org/machines.cgi"&gt;the
machines database&lt;/a&gt; (though checking
the machines db manually is tedious and therefore error-prone). But most
other projects don't have that level of organization, and the process
doesn't scale to other projects we (or our users) might be involved in.
And other projects (including debian, i'd think) might prefer to have a
less centralized process, to minimize bottlenecks and single points of
failure.&lt;/p&gt;
&lt;p&gt;Check out Monkeysphere's &lt;a href="http://web.monkeysphere.info/getting-started-admin/"&gt;documentation for a server
administrator&lt;/a&gt; for
a quick rundown about how to easily publish your SSH host keys via the
Web of Trust (it's not mutually-exclusive with the technique Enrico
describes).&lt;/p&gt;
&lt;p&gt;And this is just part of what the monkeysphere can do: using the same
web of trust, monkeysphere is capable of helping a host authenticate
&lt;code&gt;ssh&lt;/code&gt; users based on their OpenPGP identities, which gives full
re-keying and revocation functionality for these accounts. But that's a
separate discussion!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;:
&lt;a href="https://debian-administration.org/tag/monkeysphere"&gt;monkeysphere&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/openpgp"&gt;openpgp&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/ssh"&gt;ssh&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>HOWTO prep for migration off of SHA-1 in OpenPGP</title><link href="https://dkg.fifthhorseman.net/blog/howto-prep-for-migration-off-of-sha-1-in-openpgp.html" rel="alternate"/><published>2009-05-06T06:15:00-04:00</published><updated>2009-05-06T06:15:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2009-05-06:/blog/howto-prep-for-migration-off-of-sha-1-in-openpgp.html</id><summary type="html">&lt;p&gt;Last week at eurocrypt, a small group of researchers announced a fairly
serious &lt;a href="http://eurocrypt2009rump.cr.yp.to/837a0a8086fa6ca714249409ddfae43d.pdf"&gt;attack against the SHA-1 digest
algorithm&lt;/a&gt;,
which is used in many cryptosystems, including OpenPGP. The general
consensus is that we should be “moving in an orderly fashion toward the
theater exits,” deprecating SHA-1 where possible with an …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Last week at eurocrypt, a small group of researchers announced a fairly
serious &lt;a href="http://eurocrypt2009rump.cr.yp.to/837a0a8086fa6ca714249409ddfae43d.pdf"&gt;attack against the SHA-1 digest
algorithm&lt;/a&gt;,
which is used in many cryptosystems, including OpenPGP. The general
consensus is that we should be “moving in an orderly fashion toward the
theater exits,” deprecating SHA-1 where possible with an eye toward
abandoning it soon (one point of reference: &lt;a href="http://csrc.nist.gov/groups/ST/hash/statement.html"&gt;US gov't federal agencies
have been directed to cease all reliance on SHA-1 by the end of
2010&lt;/a&gt;, and this
directive was issued &lt;em&gt;before&lt;/em&gt; the latest results).&lt;/p&gt;
&lt;p&gt;Since Debian relies heavily on OpenPGP and other cryptographic
infrastructure, i'll be blogging about how Debian users can responsibly
and carefully migrate toward better digests. This post focuses on some
first steps for users of &lt;code&gt;gpg&lt;/code&gt;, and for Debian Developers and Debian
Maintainers in particular.&lt;/p&gt;
&lt;p&gt;The good news is that &lt;code&gt;gpg&lt;/code&gt; and &lt;code&gt;gpg2&lt;/code&gt; both support digest algorithms
from the stronger SHA-2 family: SHA512, SHA384, SHA256, and SHA224.&lt;/p&gt;
&lt;p&gt;By using these stronger digest algorithms some of your signatures may be
un-readable by users of older software. However, &lt;code&gt;gpg&lt;/code&gt; and PGP (a
proprietary implementation) have both had support for at least SHA256
for well over 5 years. Debian's
&lt;a href="http://packages.debian.org/gnupg"&gt;gnupg&lt;/a&gt; packages have supported the
full SHA-2 family since sarge.&lt;/p&gt;
&lt;p&gt;However, most existing signatures in today's Web of Trust were made over
the SHA-1 digest algorithm, which means that abandoning it immediately
would cause the Web of Trust as we know it to evaporate. So we need to
rely on SHA-1-based signatures until a reasonably-fleshed-out Web of
Trust based on stronger digests is in place. Since we don't want to have
to rely on SHA-1 for too much longer, we need to collectively start the
transition now.&lt;/p&gt;
&lt;p&gt;So what can you do to help facilitate the move away from SHA-1? I'll
outline three steps that current &lt;code&gt;gpg&lt;/code&gt; users can do today, and then i'll
walk through how to do each one:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;start making data signatures and web-of-trust certifications using
    stronger digests,&lt;/li&gt;
&lt;li&gt;explicitly state your preferences for stronger digests when
    receiving private communications, and&lt;/li&gt;
&lt;li&gt;If you are currently using a 1024-bit DSA primary key (which relies
    for signatures on a 160-bit hash, traditionally SHA-1), transition
    to a new 2048-bit RSA key.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The first two are simple, quick, and painless actions. You'll be done
with them in minutes! The third is tougher, and while you can start it
today, key transitions take a little bit of time to complete. Read on
for a HOWTO!&lt;/p&gt;
&lt;p&gt;This entry has been truncated &lt;a href="https://debian-administration.org/users/dkg/weblog/48"&gt;read the full
entry&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;:
&lt;a href="https://debian-administration.org/tag/cryptography"&gt;cryptography&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/gpg"&gt;gpg&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/openpgp"&gt;openpgp&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/security"&gt;security&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/sha1"&gt;sha1&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/tip"&gt;tip&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>NYC public services require Microsoft software</title><link href="https://dkg.fifthhorseman.net/blog/nyc-public-services-require-microsoft-software.html" rel="alternate"/><published>2009-05-04T23:46:00-04:00</published><updated>2009-05-04T23:46:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2009-05-04:/blog/nyc-public-services-require-microsoft-software.html</id><summary type="html">&lt;p&gt;Providing city services only to users of specific proprietary software
is bad public policy.&lt;/p&gt;
&lt;p&gt;I just discovered that New York City's &lt;a href="https://application.nycsyep.com/"&gt;2009 Summer Youth Employment
Program&lt;/a&gt; requires Internet Explorer in
order to apply online.&lt;/p&gt;
&lt;p&gt;Even downloading the pdf version of the application to print out from
the site is impossible …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Providing city services only to users of specific proprietary software
is bad public policy.&lt;/p&gt;
&lt;p&gt;I just discovered that New York City's &lt;a href="https://application.nycsyep.com/"&gt;2009 Summer Youth Employment
Program&lt;/a&gt; requires Internet Explorer in
order to apply online.&lt;/p&gt;
&lt;p&gt;Even downloading the pdf version of the application to print out from
the site is impossible under non-IE browsers because &lt;a href="https://application.nycsyep.com/Documents/SYEP_2009_Participant_Application.pdf"&gt;the actual pdf
link&lt;/a&gt;
is wrapped in some IE-only javascript. And even if you could download
the PDF directly, any additional "online information to help you select
a SYEP provider" is inaccessible for the same reason.&lt;/p&gt;
&lt;p&gt;I just called &lt;a href="http://www.nyc.gov/311"&gt;311&lt;/a&gt; and filed an official
complaint against the &lt;a href="http://www.nyc.gov/html/dycd"&gt;NYC Dept. of Youth and Community
Development&lt;/a&gt; (DYCD), who sponsor the
program.&lt;/p&gt;
&lt;p&gt;I also called the number on the application page (1-800-246-4646), and
spoke with "Karen" from the DYCD, who explained that the site was a New
York City web site, and that it had been created by &lt;a href="http://www.nyc.gov/html/doitt"&gt;DoITT (the
Department of Information Technology and
Telecommunications)&lt;/a&gt; at the request of
the DYCD, but that the DYCD didn't program it directly. She seemed to
misunderstand the tech behind the situation, saying "we can't bring it
to a higher level (like Firefox) because then it wouldn't work for
everyone". I was happy that she understood that Firefox was a concern
here, but the point is not to build the site "higher" to Firefox, but to
use standard technology that all browsers can access for a public site.&lt;/p&gt;
&lt;p&gt;Karen also seemed to think the situation was acceptable because the city
youth "can always use IE on local public library computers" to access
the site. Note that the applications involve submitting very detailed
information (SSN, health insurance, family income, criminal record,
selective service registration #, etc), which are things that i would
personally be unwilling to submit over a shared public computer if i had
any other choice. Furthermore, this crappy implementation decision
encourages the &lt;a href="http://nypl.org/"&gt;NYPL&lt;/a&gt; to continue to spend limited
resources on proprietary software to an out-of-state monopolist to run
their computer labs, which is money that could be better spent locally
(or even spent on books or something similarly quaint and library-like).&lt;/p&gt;
&lt;p&gt;I'm frustrated. This is 2009. The application process for public
services here should not require any proprietary technology, but it uses
it gratuitously. This excludes legitimate citizens, and encourages
Microsoft in its ongoing pursuit of monopoly status. Both of these are
bad things.&lt;/p&gt;
&lt;p&gt;I submitted feedback on &lt;a href="http://www.nyc.gov/html/dycd/html/contact/customer_survey.shtml"&gt;the DYCD customer survey web
site&lt;/a&gt;,
and submitted two 150-word-limited(!) complaints to &lt;a href="http://www.nyc.gov/html/mail/html/maildycd.html"&gt;Commissioner
Mulgrav of the DYCD&lt;/a&gt;
and &lt;a href="http://www.nyc.gov/html/mail/html/maildoitt.html"&gt;Commissioner Cosgrave of
DoITT&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I'm sure they'd be interested in hearing from other people about this.
Is this kind of proprietary lock-in what we should expect from &lt;a href="http://www.nytimes.com/2002/05/28/nyregion/the-mouse-as-sacred-cow-mayor-s-cuts-spare-technology.html"&gt;a Mayor
who cuts budgets city-wide &lt;em&gt;except&lt;/em&gt; for
IT&lt;/a&gt;?
Where is all that money going? What is the city getting out of it?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/policy"&gt;policy&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>multiple USB serial adapters on a SheevaPlug</title><link href="https://dkg.fifthhorseman.net/blog/multiple-usb-serial-adapters-on-a-sheevaplug.html" rel="alternate"/><published>2009-04-25T02:48:00-04:00</published><updated>2009-04-25T02:48:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2009-04-25:/blog/multiple-usb-serial-adapters-on-a-sheevaplug.html</id><summary type="html">&lt;p&gt;I just noticed Matthew Palmer's &lt;a href="http://www.hezmatt.org/~mpalmer/blog/general/insane_brilliant_idea_of_the_day.html"&gt;Insane/Brilliant idea of the
day&lt;/a&gt;:
he proposes to use large sets of USB serial adapters with a
&lt;a href="http://www.cyrius.com/debian/kirkwood/sheevaplug/index.html"&gt;sheevaplug&lt;/a&gt;
as a cheap serial console server.&lt;/p&gt;
&lt;p&gt;As part of upstream on &lt;a href="http://packages.debian.org/cereal"&gt;cereal&lt;/a&gt;, i
feel obliged to mention that package as a tool for managing serial
console …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I just noticed Matthew Palmer's &lt;a href="http://www.hezmatt.org/~mpalmer/blog/general/insane_brilliant_idea_of_the_day.html"&gt;Insane/Brilliant idea of the
day&lt;/a&gt;:
he proposes to use large sets of USB serial adapters with a
&lt;a href="http://www.cyrius.com/debian/kirkwood/sheevaplug/index.html"&gt;sheevaplug&lt;/a&gt;
as a cheap serial console server.&lt;/p&gt;
&lt;p&gt;As part of upstream on &lt;a href="http://packages.debian.org/cereal"&gt;cereal&lt;/a&gt;, i
feel obliged to mention that package as a tool for managing serial
console farms like this. It's designed to run in a small footprint,
stores timestamped logs for the consoles, supports concurrent remote
access, and uses standard unix accounts (usually via ssh) to permit read
and/or write access to each port. It has saved me exactly the headaches
Matt describes many times.&lt;/p&gt;
&lt;p&gt;However, i've had trouble getting multiple identical USB serial adapters
to persist at standard device file locations across reboot. That is, if
you have four pl2303 devices from the same manufacturer, it seems to be
a crapshoot which one will be &lt;code&gt;/dev/ttyUSB0&lt;/code&gt; after you restart your
system. I could find no distinguishing data in the sysfs to get udev to
persistently key off of, anyway. if you know a way to do it, i'd be
happy to see it!&lt;/p&gt;
&lt;p&gt;Depending on how many ports you need, another alternative would be to
use a sheevaplug with a &lt;a href="http://www.serialgear.com/8-Port-Serial-Adapter-USBG-8X-RS232.html"&gt;multiport USB-to-serial
adapter&lt;/a&gt;.
While i haven't tried this specific hardware, it would remove the need
for the hub, and potentially would mean you didn't need any extra power.
I'm assuming that this device would give you persistent port naming, but
i haven't tried it. Pricewise, it seems to be a win, too: \$100 for the
SheevaPlug and \$100 for the 8-port adapter.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/cereal"&gt;cereal&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/sheevaplug"&gt;sheevaplug&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Leslie Pack Kaelbling for Ada Lovelace Day</title><link href="https://dkg.fifthhorseman.net/blog/leslie-pack-kaelbling-for-ada-lovelace-day.html" rel="alternate"/><published>2009-03-25T06:27:00-04:00</published><updated>2009-03-25T06:27:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2009-03-25:/blog/leslie-pack-kaelbling-for-ada-lovelace-day.html</id><summary type="html">&lt;p&gt;So i'm a couple hours late for &lt;a href="http://findingada.com/"&gt;Ada Lovelace
Day&lt;/a&gt; (in my time zone at least), but i wanted to
mention &lt;a href="http://people.csail.mit.edu/lpk/"&gt;Leslie Pack Kaelbling&lt;/a&gt;, an
excellent technologist who has also had a significant impact on my life.&lt;/p&gt;
&lt;p&gt;Her extremely &lt;a href="http://people.csail.mit.edu/lpk/bio.html"&gt;short
biography&lt;/a&gt; says (in full):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Leslie Pack Kaelbling is Professor of …&lt;/p&gt;&lt;/blockquote&gt;</summary><content type="html">&lt;p&gt;So i'm a couple hours late for &lt;a href="http://findingada.com/"&gt;Ada Lovelace
Day&lt;/a&gt; (in my time zone at least), but i wanted to
mention &lt;a href="http://people.csail.mit.edu/lpk/"&gt;Leslie Pack Kaelbling&lt;/a&gt;, an
excellent technologist who has also had a significant impact on my life.&lt;/p&gt;
&lt;p&gt;Her extremely &lt;a href="http://people.csail.mit.edu/lpk/bio.html"&gt;short
biography&lt;/a&gt; says (in full):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Leslie Pack Kaelbling is Professor of Computer Science and Engineering
at the Computer Science and Artificial Intelligence Laboratory (CSAIL)
at the Massachusetts Institute of Technology. Her research focuses on
decision-making under uncertainty, learning, and sensing with
applications to robotics.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;She is also the founder and co-editor-in-chief of the &lt;a href="http://jmlr.csail.mit.edu/"&gt;Journal of
Machine Learning Research&lt;/a&gt;, an active
open-access academic collection which encourages the development of
&lt;a href="http://jmlr.csail.mit.edu/mloss/"&gt;open source software for the field of machine
learning&lt;/a&gt;. Cool stuff!&lt;/p&gt;
&lt;p&gt;&lt;code&gt;lpk&lt;/code&gt; was my professor when i was an undergraduate (before she went to
MIT), and she opened my mind to a lot of great ideas about artificial
intelligence, machine learning, robotics, and computation in general.
Beyond the specifics that she taught, though, she also demonstrated what
it means to be a spirited and engaged academic, both in research and in
teaching. I think i first read &lt;a href="http://wikipedia.org/Stanislaw_Lem"&gt;Stanslaw
Lem&lt;/a&gt; in one of her robotics classes
(it was one of the stories from &lt;a href="http://english.lem.pl/index.php/works/novels/the-cyberiad/57-a-look-inside-the-cyberiad"&gt;The
Cyberiad&lt;/a&gt;),
where she encouraged us to think not just about the technical
possibilities of machinery, but also about the social possibilities. And
it wasn't just theorizing: I also had the chance to do significant work
with robotics hardware (both real and emulated) in a lab under her
friendly and open supervision.&lt;/p&gt;
&lt;p&gt;She developed a new introductory series of
&lt;a href="http://www.cs.brown.edu/courses/csci0170.html"&gt;two&lt;/a&gt;
&lt;a href="http://www.cs.brown.edu/courses/csci0180.html"&gt;classes&lt;/a&gt; for the
school's Computer Science department, which i was unfortunately too late
to take. They're designed to reach students who were discouraged by the
traditional programming-heavy approach, and focus instead on the issues
of theory, abstraction, and collaboration, with programming taking a
subordinate place to understanding the nature of computation itself.
Later in my scholastic career, I had the privilege of helping her out as
a teaching assistant, working with her on various robotics projects,
advising a handful of younger students with her, and having her advise
my final-year project, where i tested and evaluated variants of the
&lt;a href="http://en.wikipedia.org/wiki/Boosting"&gt;boosting machine-learning
algorithm&lt;/a&gt;. Throughout all of
this, and despite my typical collegiate distractions, Leslie helped me
understand technical details and nuance about the possibilities that we
have with these incredible machines, and how they might be made to
interact with the real world with all of its contradictory input and
uncertainty.&lt;/p&gt;
&lt;p&gt;So here's to Leslie Pack Kaelbling: thank you for all your amazing
contributions to our field, and for the things you taught me and the
opportunities you shared!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;:
&lt;a href="https://debian-administration.org/tag/adalovelaceday09"&gt;adalovelaceday09&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Publicly-funded knowledge should be public</title><link href="https://dkg.fifthhorseman.net/blog/publicly-funded-knowledge-should-be-public.html" rel="alternate"/><published>2009-03-17T18:18:00-04:00</published><updated>2009-03-17T18:18:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2009-03-17:/blog/publicly-funded-knowledge-should-be-public.html</id><summary type="html">&lt;p&gt;I live in the USA. Our government issues many grants to scientists for
research via the &lt;a href="http://nih.gov"&gt;National Institute of Health&lt;/a&gt;. I
recently found out about the NIH's recent requirement that
&lt;a href="http://publicaccess.nih.gov/"&gt;publicly-funded research must be published freely online within 12
months&lt;/a&gt;. As you can imagine, i think this
is a remarkably …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I live in the USA. Our government issues many grants to scientists for
research via the &lt;a href="http://nih.gov"&gt;National Institute of Health&lt;/a&gt;. I
recently found out about the NIH's recent requirement that
&lt;a href="http://publicaccess.nih.gov/"&gt;publicly-funded research must be published freely online within 12
months&lt;/a&gt;. As you can imagine, i think this
is a remarkably Good Thing (though 12 months seems a little bit long for
fast-moving fields).&lt;/p&gt;
&lt;p&gt;Apparently, &lt;a href="http://conyers.house.gov/"&gt;John Conyers&lt;/a&gt; and several
&lt;a href="http://thomas.loc.gov/cgi-bin/bdquery/z?d111:HR00801:@@@P"&gt;co-sponsors&lt;/a&gt;
have introduced &lt;a href="http://thomas.loc.gov/cgi-bin/query/z?c111:H.R.801:"&gt;HR
801&lt;/a&gt;, which appears
intended to overturn this remarkable policy, primarily for the benefit
of the companies that publish scientific journals.&lt;/p&gt;
&lt;p&gt;This bill is a shame, and i had hoped for better from Rep. Conyers, who
otherwise has a
&lt;a href="http://en.wikipedia.org/wiki/United_States_National_Health_Insurance_Act"&gt;remarkably&lt;/a&gt;
&lt;a href="http://en.wikipedia.org/wiki/Downing_Street_memo"&gt;positive&lt;/a&gt;
&lt;a href="http://en.wikipedia.org/wiki/Nixon%27s_Enemies_List#Verbatim_text_of_Colson.27s_original_memo_.28with_his_comments.29"&gt;record&lt;/a&gt;
as a legislator advocating for government transparency and the public
good. Sadly, his stance on so-called "Intellectual Property" seems
characterized by &lt;a href="http://en.wikipedia.org/wiki/PRO-IP_Act"&gt;heavy-handed
legislation&lt;/a&gt; designed to
benefit the parties already heavily favored by the current &lt;a href="http://citesandinsights.info/v6i8e.htm"&gt;imbalanced
copyright&lt;/a&gt; situation.&lt;/p&gt;
&lt;p&gt;If you live in the US (and especially if you live in Conyers' district
in Michigan), please &lt;a href="mailto:john.conyers@mail.house.gov?subject=Please+Abandon+HR+801"&gt;send him
e-mail&lt;/a&gt;
or &lt;a href="http://conyers.house.gov/index.cfm?FuseAction=Contact.ContactInformation"&gt;get in touch by
phone&lt;/a&gt;
and tell him to drop the bill. You might also check the &lt;a href="http://thomas.loc.gov/cgi-bin/bdquery/z?d111:HR00801:@@@P"&gt;list of
cosponsors&lt;/a&gt;
to see if one of them is more local to you.&lt;/p&gt;
&lt;p&gt;If you want to read more, &lt;a href="http://lessig.org/"&gt;Lawrence Lessig&lt;/a&gt; has
written about this issue, &lt;a href="http://www.huffingtonpost.com/lawrence-lessig/a-reply-to-congressman-co_b_173030.html"&gt;addressing Congressman Conyers
directly&lt;/a&gt;
in the Huffington Post. Curiously, Rep. Conyers' web site contains &lt;a href="http://conyers.house.gov/index.cfm?FuseAction=Search.Results&amp;amp;Keywords=801"&gt;no
mention of HR
801&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/policy"&gt;policy&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>redundant DHCP service for a sprawling LAN?</title><link href="https://dkg.fifthhorseman.net/blog/redundant-dhcp-service-for-a-sprawling-lan.html" rel="alternate"/><published>2009-02-27T19:44:00-05:00</published><updated>2009-02-27T19:44:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2009-02-27:/blog/redundant-dhcp-service-for-a-sprawling-lan.html</id><summary type="html">&lt;p&gt;I'm supporting a medium-sized (\~70 regular clients and a half-dozen
servers) LAN. It's a single logical ethernet segment, but it's built as
a tree of cascaded switches. DHCP service is provided by a single host
running ISC's DHCPD (via
&lt;a href="http://packages.debian.org/dhcp3-server"&gt;dhcp3-server&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;DHCP itself is one of the single points of failure …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I'm supporting a medium-sized (\~70 regular clients and a half-dozen
servers) LAN. It's a single logical ethernet segment, but it's built as
a tree of cascaded switches. DHCP service is provided by a single host
running ISC's DHCPD (via
&lt;a href="http://packages.debian.org/dhcp3-server"&gt;dhcp3-server&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;DHCP itself is one of the single points of failure in the network
layout. i'd really like to make this DHCP server redundant (so that i
can take that host down for service if needed and leave the rest of the
network intact). However, reading
&lt;a href="http://linux.die.net/man/5/dhcpd.conf"&gt;dhcpd.conf(5)&lt;/a&gt; makes me pretty
worried that the failover stuff is not well-tested or widely deployed.&lt;/p&gt;
&lt;p&gt;I've read &lt;a href="http://www.madboa.com/geek/dhcp-failover/"&gt;Paul Heinlein's &lt;em&gt;Failover with ISC
DHCP&lt;/em&gt;&lt;/a&gt;, which makes it look
not unreasonable, but i was wondering if people have other preferred
mechanisms for providing DHCP redundancy. Do you have failover DHCP set
up for any LAN that you manage? If so, what do you use? Are there any
gotchas to watch out for?&lt;/p&gt;
&lt;p&gt;I'm also concerned about the security implications. On a network that's
not using IPSEC, i don't see any mechanism for the two DHCP servers to
properly mutually authenticate. Is it really just by IP address? Could
someone spoofing the IP address of one host corrupt the state of the
other DHCP server? (i'm less concerned about them keeping network
traffic private, since most of what they communicate is likely to go out
in the clear on the wire anyway). Am i missing some clever
authentication technique?&lt;/p&gt;
&lt;p&gt;From a security point of view, i understand that there are more severe
security problems with DHCP itself, of course (the protocol requires
that the client trust the (unauthenticated) server), but that doesn't
seem likes a good reason to introduce an opportunity to compromise any
given server directly.&lt;/p&gt;
&lt;p&gt;Your thoughts on DHCP redundancy?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/dhcp"&gt;dhcp&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/failover"&gt;failover&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/redundancy"&gt;redundancy&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Stricter GnuTLS rejects outmoded X.509 certs</title><link href="https://dkg.fifthhorseman.net/blog/stricter-gnutls-rejects-outmoded-x509-certs.html" rel="alternate"/><published>2009-02-15T17:20:00-05:00</published><updated>2009-02-15T17:20:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2009-02-15:/blog/stricter-gnutls-rejects-outmoded-x509-certs.html</id><summary type="html">&lt;p&gt;Recently, several people noticed that GnuTLS behavior did not match its
documentation with respect to two significant security concerns, both
regarding X.509 certificate validation:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://thread.gmane.org/gmane.comp.encryption.gpg.gnutls.devel/3332"&gt;Certificates with MD5 digests were considered acceptable for
    validation&lt;/a&gt;.
    They should not be, because of &lt;a href="http://www.win.tue.nl/hashclash/rogue-ca/"&gt;known weaknesses in that digest
    algorithm&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a href="http://thread.gmane.org/gmane.comp.encryption.gpg.gnutls.devel/3351/focus=3365"&gt;Version 1 X.509 …&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;Recently, several people noticed that GnuTLS behavior did not match its
documentation with respect to two significant security concerns, both
regarding X.509 certificate validation:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://thread.gmane.org/gmane.comp.encryption.gpg.gnutls.devel/3332"&gt;Certificates with MD5 digests were considered acceptable for
    validation&lt;/a&gt;.
    They should not be, because of &lt;a href="http://www.win.tue.nl/hashclash/rogue-ca/"&gt;known weaknesses in that digest
    algorithm&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a href="http://thread.gmane.org/gmane.comp.encryption.gpg.gnutls.devel/3351/focus=3365"&gt;Version 1 X.509 certificates were being accepted as Certificate
    Authorities if placed in the list of trusted
    certificates&lt;/a&gt;.
    It is impossible to distinguish between a V1 Authority certificate
    and a V1 End Entity certificate. This makes placement of such a cert
    in the trusted certificates list dangerously ambiguous, because you
    don't want holders of an end entity certificate to be able to act as
    certificate authorities)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;GnuTLS has been fixed upstream, and &lt;a href="http://www.debian.org/security/2009/dsa-1719"&gt;a fix to at least the latter
problem has already propagated into etch via a security
upload&lt;/a&gt;. The lenny
packages should already behave as documented (no MD5 digests accepted in
cert validation, v1 certificates not explicitly acceptable as
authorities).&lt;/p&gt;
&lt;p&gt;&lt;em&gt;However&lt;/em&gt;, this means that if you use GnuTLS-linked tools to connect to
systems whose certificate chains rely on either MD5 digests (in anything
but the root certificate) or on v1 certificates for any of the
certificate authorities, your connections may fail due to this stricter
validation.&lt;/p&gt;
&lt;p&gt;There are already several bug reports about &lt;a href="http://bugs.debian.org/514807"&gt;broken LDAP
connections&lt;/a&gt; and &lt;a href="http://bugs.debian.org/514578"&gt;broken mail
connections&lt;/a&gt; due to these problems, and
there have been &lt;a href="http://lists.debian.org/debian-release/2009/02/msg00390.html"&gt;reasonable concerns raised on
debian-release&lt;/a&gt;
about this.&lt;/p&gt;
&lt;p&gt;So what can you do to make sure that the infrastructure you rely on or
maintain does not depend on these outmoded and insecure features of
X.509? Read on for concrete steps for administrators,
developers/maintainers, and end users...&lt;/p&gt;
&lt;p&gt;This entry has been truncated &lt;a href="https://debian-administration.org/users/dkg/weblog/42"&gt;read the full
entry&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/gnutls"&gt;gnutls&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/ldap"&gt;ldap&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/openldap"&gt;openldap&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/security"&gt;security&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/tip"&gt;tip&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/x.509"&gt;x.509&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Python editor/IDE for new (high school) coders?</title><link href="https://dkg.fifthhorseman.net/blog/python-editoride-for-new-high-school-coders.html" rel="alternate"/><published>2009-02-04T19:56:00-05:00</published><updated>2009-02-04T19:56:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2009-02-04:/blog/python-editoride-for-new-high-school-coders.html</id><summary type="html">&lt;p&gt;I'm supporting a class of high school students who are new to
programming, and will be learning some python. Most of these students
are comfortable with computers, but not hacker types, and few if any of
them have written code before.&lt;/p&gt;
&lt;p&gt;I'm looking for an editor or an Integrated Development …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I'm supporting a class of high school students who are new to
programming, and will be learning some python. Most of these students
are comfortable with computers, but not hacker types, and few if any of
them have written code before.&lt;/p&gt;
&lt;p&gt;I'm looking for an editor or an Integrated Development Environment (IDE)
that won't be too scary for them, and will help them get used to the
novel idea of writing code without simultaneously having to get used to
the novel idea of an unfamiliar user interface.&lt;/p&gt;
&lt;p&gt;So i can't expect them to pick up my beloved emacs, for example. But on
the other end of the spectrum, i'd hate for them to try to write python
in an word processor (i've seen people do it!). Here's what i think i'm
looking for:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;comfortable graphical interface -- these students have not used the
    command line before, and while they'll be introduced to the python
    shell, they should be able to write code and browse for files, etc.
    in the "normal" (sigh) way. This means, for instance, that tk-based
    interfaces are less good because they don't integrate with the
    common GTK-based UI.&lt;/li&gt;
&lt;li&gt;syntax highlighting -- the students will need to figure out what's a
    variable, what's a function name, what's an operator, what's a
    reserved word, etc. Visual indications like font-lock-mode from
    emacs would be really useful.&lt;/li&gt;
&lt;li&gt;whitespace management -- since python has syntactic whitespace, it
    would be great if there were convenient/intuitive ways for students
    to adjust the whitespace in their programs. Of course, it's hard to
    say what's going to be intuitive for other people. I like
    tab-cycling whitespace myself; are there other approaches i should
    be proposing?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Do you have suggestions for tools that work well for the above needs?
Favorites? Are there features other than the "top three" i listed above
that you think i should pay attention to?&lt;/p&gt;
&lt;p&gt;FWIW, they'll be working in a labful of machines running Ubuntu Hardy
for the most part, but i'm willing to port and deploy programs
(particularly ones that feel like a perfect fit) if they're not
available in hardy.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/ide"&gt;ide&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/python"&gt;python&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/recommendations"&gt;recommendations&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/student"&gt;student&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>target disk mode (sbp-2 mass storage host mode?)</title><link href="https://dkg.fifthhorseman.net/blog/target-disk-mode-sbp-2-mass-storage-host-mode.html" rel="alternate"/><published>2009-01-23T19:24:00-05:00</published><updated>2009-01-23T19:24:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2009-01-23:/blog/target-disk-mode-sbp-2-mass-storage-host-mode.html</id><summary type="html">&lt;p&gt;One very convenient feature of Apple's hardware is the ability for their
workstations to enter &lt;a href="http://en.wikipedia.org/wiki/Target_Disk_Mode"&gt;target disk
mode&lt;/a&gt;. This effectively
transforms the machine into a glorified
&lt;a href="http://en.wikipedia.org/wiki/IEEE_1394_interface"&gt;ieee1394&lt;/a&gt; (firewire)
block device, which can then be manipulated from outside the machine
using the standard &lt;a href="http://en.wikipedia.org/wiki/SBP-2"&gt;SBP-2&lt;/a&gt; protocol.&lt;/p&gt;
&lt;p&gt;Is there a way to provide …&lt;/p&gt;</summary><content type="html">&lt;p&gt;One very convenient feature of Apple's hardware is the ability for their
workstations to enter &lt;a href="http://en.wikipedia.org/wiki/Target_Disk_Mode"&gt;target disk
mode&lt;/a&gt;. This effectively
transforms the machine into a glorified
&lt;a href="http://en.wikipedia.org/wiki/IEEE_1394_interface"&gt;ieee1394&lt;/a&gt; (firewire)
block device, which can then be manipulated from outside the machine
using the standard &lt;a href="http://en.wikipedia.org/wiki/SBP-2"&gt;SBP-2&lt;/a&gt; protocol.&lt;/p&gt;
&lt;p&gt;Is there a way to provide this same functionality from a running
GNU/Linux machine? For example, i have a GNU/Linux system with a block
device attached to it. I would prefer if the block device was available
to a neighboring machine, but (for whatever reason) i'm unable to
physically move it. However, i'm able to link the two machines via a
simple ieee1394 connection. A "virtual target disk mode" server (or
would it be better to say "an SBP-2 mass storage target service over an
ieee1394 link"?) would be really useful.&lt;/p&gt;
&lt;p&gt;One thing that occurs to me is that i could do some sort of networking
abstraction over the link (using
&lt;a href="http://www.linux1394.org/eth1394.php"&gt;eth1394&lt;/a&gt;?), and then use
something like &lt;a href="http://packages.debian.org/vblade"&gt;vblade&lt;/a&gt; (an
&lt;a href="http://en.wikipedia.org/wiki/ATA_over_Ethernet"&gt;ATA-over-Ethernet&lt;/a&gt;
target service) to provide a virtual block device to the remote host.
However, this requires the remote host to run an operating system
capable of dealing with these (more obscure) protocols, and i'd like
this to work for any remote machine that knows how to deal with generic
SBP-2 ieee1394 mass storage.&lt;/p&gt;
&lt;p&gt;I know that in general GNU/Linux is at least as powerful and capable as
the firmware that Apple ships ;) But it's possible that our community
just hasn't gotten around to implementing something like this. Is this
the case? My attempts to search for it haven't turned up anything, but
it's entirely possible that i'm reading the wrong docs (or reading the
docs wrong). Any pointers?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/firewire"&gt;firewire&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/ieee1394"&gt;ieee1394&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/sbp2"&gt;sbp2&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/vblade"&gt;vblade&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Trancendental Nonsense and the Functional Approach</title><link href="https://dkg.fifthhorseman.net/blog/trancendental-nonsense-and-the-functional-approach.html" rel="alternate"/><published>2009-01-22T05:32:00-05:00</published><updated>2009-01-22T05:32:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2009-01-22:/blog/trancendental-nonsense-and-the-functional-approach.html</id><summary type="html">&lt;p&gt;Poking around &lt;a href="http://emoglen.law.columbia.edu/twiki/bin/view/LawContempSoc/WebHome"&gt;the web site for Law in Contemporary
Society&lt;/a&gt;,
a class taught this semester by &lt;a href="http://emoglen.law.columbia.edu/"&gt;Eben
Moglen&lt;/a&gt;, (who is counsel for the &lt;a href="http://fsf.org/"&gt;Free
Software Foundation&lt;/a&gt; and founder of the &lt;a href="http://softwarefreedom.org"&gt;Software
Freedom Law Center&lt;/a&gt;), i found &lt;a href="http://en.wikipedia.org/wiki/Felix_S._Cohen"&gt;Felix
Cohen&lt;/a&gt;'s &lt;a href="http://moglen.law.columbia.edu/LCS/cohen-transcendental.pdf"&gt;Trancendental
Nonsense and the Functional
Approach&lt;/a&gt;,
which (according to wikipedia) is …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Poking around &lt;a href="http://emoglen.law.columbia.edu/twiki/bin/view/LawContempSoc/WebHome"&gt;the web site for Law in Contemporary
Society&lt;/a&gt;,
a class taught this semester by &lt;a href="http://emoglen.law.columbia.edu/"&gt;Eben
Moglen&lt;/a&gt;, (who is counsel for the &lt;a href="http://fsf.org/"&gt;Free
Software Foundation&lt;/a&gt; and founder of the &lt;a href="http://softwarefreedom.org"&gt;Software
Freedom Law Center&lt;/a&gt;), i found &lt;a href="http://en.wikipedia.org/wiki/Felix_S._Cohen"&gt;Felix
Cohen&lt;/a&gt;'s &lt;a href="http://moglen.law.columbia.edu/LCS/cohen-transcendental.pdf"&gt;Trancendental
Nonsense and the Functional
Approach&lt;/a&gt;,
which (according to wikipedia) is one of "the most-cited law review
articles ever written".&lt;/p&gt;
&lt;p&gt;I haven't read the whole thing yet (and i'm neither a lawyer nor a
philosopher) but it's fascinating reading. And from what i've read so
far, it's a strong push toward directly addressing the &lt;em&gt;values&lt;/em&gt; that lie
hidden beneath our technical or mechanical decisions, and to avoid
mistaking technical success or skill with a worthwhile outcome and clear
goals at a societal level. This is something we software developers and
system administrators struggle with as well (or at least i think we
should). It's neat to get my head around these concepts from a different
intellectual sphere, and a different era (74 years ago!) when the
technical and mechanical tools i work with didn't exist in anything like
their present form.&lt;/p&gt;
&lt;p&gt;This kind of reading makes me wonder what works from Computer Science or
Systems Engineering or Information Technology will have this kind of
exhortative power and social relevance so far into the future. Do you
have a favorite (or abhorred?) text from your field that offers the kind
of moral and technical challenges that Cohen's work does?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/law"&gt;law&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/moglen"&gt;moglen&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/philosophy"&gt;philosophy&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>sysadvent -- 25 days of systems administration</title><link href="https://dkg.fifthhorseman.net/blog/sysadvent-25-days-of-systems-administration.html" rel="alternate"/><published>2008-12-31T23:56:00-05:00</published><updated>2008-12-31T23:56:00-05:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2008-12-31:/blog/sysadvent-25-days-of-systems-administration.html</id><summary type="html">&lt;p&gt;I just ran across Jordan Sissel's &lt;a href="http://sysadvent.blogspot.com/"&gt;sysadvent
project&lt;/a&gt;, where he posted one article
about systems administration each day from the 1st of December to the
25th.&lt;/p&gt;
&lt;p&gt;Jordan has been a great communicator when we've exchanged mail (he's the
author of &lt;a href="http://packages.qa.debian.org/xdotool"&gt;xdotool&lt;/a&gt;, which i
maintain for debian). Unsurprisingly, his posts in …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I just ran across Jordan Sissel's &lt;a href="http://sysadvent.blogspot.com/"&gt;sysadvent
project&lt;/a&gt;, where he posted one article
about systems administration each day from the 1st of December to the
25th.&lt;/p&gt;
&lt;p&gt;Jordan has been a great communicator when we've exchanged mail (he's the
author of &lt;a href="http://packages.qa.debian.org/xdotool"&gt;xdotool&lt;/a&gt;, which i
maintain for debian). Unsurprisingly, his posts in sysadvent are also
excellent. He has a broad knowledge of what tools are available, clever
insights in how to connect them together, an engaging and clear writing
style, and sharp sense of what really should matter to a systems
administrator. Definitely worth reading!&lt;/p&gt;</content><category term="misc"/></entry><entry><title>wireless hardware switches (pciehp is your friend)</title><link href="https://dkg.fifthhorseman.net/blog/wireless-hardware-switches-pciehp-is-your-friend.html" rel="alternate"/><published>2008-10-16T17:43:00-04:00</published><updated>2008-10-16T17:43:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2008-10-16:/blog/wireless-hardware-switches-pciehp-is-your-friend.html</id><summary type="html">&lt;p&gt;I've been playing around with an eeePC 900, which is &lt;a href="http://wiki.debian.org/DebianEeePC"&gt;very
well-supported by debian&lt;/a&gt;. Kudos to
the eeepc team!&lt;/p&gt;
&lt;p&gt;I had one problem with it, after upgrading
&lt;a href="http://packages.qa.debian.org/eeepc-acpi-scripts"&gt;&lt;code&gt;eeepc-acpi-scripts&lt;/code&gt;&lt;/a&gt;
from version 1.0.4 to 1.0.9: with 1.0.4, i was able to use an ACPI
hotkey to …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I've been playing around with an eeePC 900, which is &lt;a href="http://wiki.debian.org/DebianEeePC"&gt;very
well-supported by debian&lt;/a&gt;. Kudos to
the eeepc team!&lt;/p&gt;
&lt;p&gt;I had one problem with it, after upgrading
&lt;a href="http://packages.qa.debian.org/eeepc-acpi-scripts"&gt;&lt;code&gt;eeepc-acpi-scripts&lt;/code&gt;&lt;/a&gt;
from version 1.0.4 to 1.0.9: with 1.0.4, i was able to use an ACPI
hotkey to disable and re-enable the wireless. With 1.0.9, the device did
not come back up for me after a toggle. The problem was resolved for me
with:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;echo pciehp &amp;gt;&amp;gt; /etc/modules
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;which i figured out from reading &lt;a href="http://lists.alioth.debian.org/pipermail/debian-eeepc-devel/2008-October/001300.html"&gt;a brief
post&lt;/a&gt;
on the very-informative &lt;a href="http://lists.alioth.debian.org/mailman/listinfo/debian-eeepc-devel"&gt;&lt;code&gt;debian-eeepc-devel&lt;/code&gt; mailing
list&lt;/a&gt;.
The rest of this post explores why that was the answer for me.&lt;/p&gt;
&lt;p&gt;This entry has been truncated &lt;a href="https://debian-administration.org/users/dkg/weblog/37"&gt;read the full
entry&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/eeepc"&gt;eeepc&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/wlan"&gt;wlan&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Monkeysphere: an OpenPGP-based PKI for SSH</title><link href="https://dkg.fifthhorseman.net/blog/monkeysphere-an-openpgp-based-pki-for-ssh.html" rel="alternate"/><published>2008-09-04T07:13:00-04:00</published><updated>2008-09-04T07:13:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2008-09-04:/blog/monkeysphere-an-openpgp-based-pki-for-ssh.html</id><summary type="html">&lt;p&gt;Ever thought that there should be an automated way to handle ssh keys?
Do you know the administrators of your servers, and wish that SSH could
verify new host keys from them automatically, based on your personal
connections to the web-of-trust? Do you wish you could revoke and/or
rotate …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Ever thought that there should be an automated way to handle ssh keys?
Do you know the administrators of your servers, and wish that SSH could
verify new host keys from them automatically, based on your personal
connections to the web-of-trust? Do you wish you could revoke and/or
rotate your old SSH authentication keys without having to log into every
single machine you have an account on?&lt;/p&gt;
&lt;p&gt;Do you administer servers, and wish you could re-key them without sowing
massive confusion among your users (or worse, encouraging bad security
habits among them)? Do you wish you could grant access to your users by
name, instead of by opaque string? Do you wish you could rapidly revoke
access to a user (or compromised key) across a group of machines by
disabling authentication for that user?&lt;/p&gt;
&lt;p&gt;A group of us have been working on a public key infrastructure for SSH.
&lt;a href="http://web.monkeysphere.info"&gt;Monkeysphere&lt;/a&gt; makes use of the existing
OpenPGP web-of-trust to fetch and cryptographically validate (and
revoke!) keys. This works in both direction: &lt;code&gt;authorized_keys&lt;/code&gt; &lt;em&gt;and&lt;/em&gt;
&lt;code&gt;known_hosts&lt;/code&gt; are handled. Monkeysphere gives users and admins tools to
deal with SSH keys by thinking about the people and machines to whom the
keys belong, instead of requiring humans to do tedious (and error-prone)
manual key verification.&lt;/p&gt;
&lt;p&gt;We have &lt;a href="http://web.monkeysphere.info/download"&gt;debian packages
available&lt;/a&gt; which should install
against lenny (for i386, amd64, powerpc, and arm architectures at the
moment), &lt;a href="https://lists.riseup.net/www/info/monkeysphere"&gt;a mailing
list&lt;/a&gt;, and open ears for
good questions, suggestions and criticism.&lt;/p&gt;
&lt;p&gt;If you have a chance to give it a try (&lt;a href="http://web.monkeysphere.info/getting-started-user/"&gt;as a
user&lt;/a&gt; or &lt;a href="http://web.monkeysphere.info/getting-started-admin/"&gt;as an
admin&lt;/a&gt;), it would
be great to &lt;a href="https://lists.riseup.net/www/info/monkeysphere"&gt;get
feedback&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;: &lt;a href="https://debian-administration.org/tag/gpg"&gt;gpg&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/monkeysphere"&gt;monkeysphere&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/openpgp"&gt;openpgp&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/openssh"&gt;openssh&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/pgp"&gt;pgp&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/ssh"&gt;ssh&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry><entry><title>transient "obsolete packages" with apt</title><link href="https://dkg.fifthhorseman.net/blog/transient-obsolete-packages-with-apt.html" rel="alternate"/><published>2008-06-18T20:43:00-04:00</published><updated>2008-06-18T20:43:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2008-06-18:/blog/transient-obsolete-packages-with-apt.html</id><summary type="html">&lt;p&gt;On the testing and unstable systems that i run, i occasionally get a
disturbing "there are &lt;em&gt;N&lt;/em&gt; newly obsolete packages" message. For example&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;root&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="nx"&gt;squeak&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;aptitude&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;updateHit&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;http&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//cmrg.fifthhorseman.net unstable Release.gpg [...]Get:42 http://ftp.us.debian.org unstable/main [2077kB]                          Fetched 15.2MB in 57s …&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;On the testing and unstable systems that i run, i occasionally get a
disturbing "there are &lt;em&gt;N&lt;/em&gt; newly obsolete packages" message. For example&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;root&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="nx"&gt;squeak&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;aptitude&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;updateHit&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;http&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//cmrg.fifthhorseman.net unstable Release.gpg [...]Get:42 http://ftp.us.debian.org unstable/main [2077kB]                          Fetched 15.2MB in 57s (262kB/s)                                                 Reading package lists... DoneUpdating debtags database...... DoneCurrent status: 3 updates [+3], 1136 new [-21212].There are 1804 newly obsolete packages.[255 root@squeak ~]# &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Usually, i can fix this with another &lt;code&gt;aptitude update&lt;/code&gt;. Does this mean
i've hit a mirror at an inopportune time? Or do i have apt
mis-configured somehow?&lt;/p&gt;
&lt;p&gt;&lt;a href="http://www.debianhelp.org/node/7602#comment-42130"&gt;Other people have
documented&lt;/a&gt; this
before, and casual conversation with friends lets me know it's not just
me.&lt;/p&gt;
&lt;p&gt;If this is due to some inconsistency at the mirrors (particularly for
suites with rolling updates?), is there some way to engineer the mirror
transfers so that this doesn't happen? For example (i have no idea how
this stuff is done, so i'm just making this up):&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;rsync the &lt;code&gt;pool/&lt;/code&gt; without &lt;code&gt;--delete&lt;/code&gt; to all mirrors,&lt;/li&gt;
&lt;li&gt;rsync the &lt;code&gt;Packages&lt;/code&gt; and &lt;code&gt;Release&lt;/code&gt;, and &lt;code&gt;DiffIndex&lt;/code&gt; files to all
    mirrors,&lt;/li&gt;
&lt;li&gt;rsync the &lt;code&gt;pool/&lt;/code&gt; &lt;em&gt;with&lt;/em&gt; &lt;code&gt;--delete&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Or should apt itself deal with these circumstances differently? It seems
like signed apt ought to be able to detect when something like this is
amiss.&lt;/p&gt;
&lt;p&gt;I'm reluctant to consider the situation acceptable, because i'd like to
be able to trust apt in general. In particular, i can imagine apt
eventually becoming more assertive about suggesting removal of newly
obsolete and unsupported packages. If it is wrong about what's obsolete
and unsupported, this could be dangerous.&lt;/p&gt;</content><category term="misc"/></entry><entry><title>Can you mirror-read?</title><link href="https://dkg.fifthhorseman.net/blog/can-you-mirror-read.html" rel="alternate"/><published>2008-06-03T17:39:00-04:00</published><updated>2008-06-03T17:39:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2008-06-03:/blog/can-you-mirror-read.html</id><summary type="html">&lt;p&gt;A high school student i work with is trying to gather data on the
prevalence of mirror-reading (the ability to easily read text that is
reversed left-to-right).&lt;/p&gt;
&lt;p&gt;He's posted a simple webapp to gather data points for his experiment. It
should take only a couple of minutes to &lt;a href="http://leo.urbanacademy.org/"&gt;try it …&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;A high school student i work with is trying to gather data on the
prevalence of mirror-reading (the ability to easily read text that is
reversed left-to-right).&lt;/p&gt;
&lt;p&gt;He's posted a simple webapp to gather data points for his experiment. It
should take only a couple of minutes to &lt;a href="http://leo.urbanacademy.org/"&gt;try it out and give him some
data&lt;/a&gt;. If he gets enough data to write
something up, i'll try to encourage him to publish his results as well.&lt;/p&gt;</content><category term="misc"/></entry><entry><title>New York State Electronic Records Report</title><link href="https://dkg.fifthhorseman.net/blog/new-york-state-electronic-records-report.html" rel="alternate"/><published>2008-05-22T07:26:00-04:00</published><updated>2008-05-22T07:26:00-04:00</updated><author><name>Daniel Kahn Gillmor (dkg)</name></author><id>tag:dkg.fifthhorseman.net,2008-05-22:/blog/new-york-state-electronic-records-report.html</id><summary type="html">&lt;p&gt;The CIO and &lt;a href="http://www.oft.state.ny.us/"&gt;the Office For Technology of New York State
(USA)&lt;/a&gt; just released a new &lt;a href="http://www.oft.state.ny.us/policy/esra/erecords-study.htm"&gt;report on
electronic records strategy, titled &lt;cite&gt;A Strategy for Openness:
Enhancing E-Records Access in New York
State&lt;/cite&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I submitted &lt;a href="http://cmrg.fifthhorseman.net/wiki/NYSRFPC122807"&gt;my own
comments&lt;/a&gt; during the
call for public comments earlier this year -- apparently there were …&lt;/p&gt;</summary><content type="html">&lt;p&gt;The CIO and &lt;a href="http://www.oft.state.ny.us/"&gt;the Office For Technology of New York State
(USA)&lt;/a&gt; just released a new &lt;a href="http://www.oft.state.ny.us/policy/esra/erecords-study.htm"&gt;report on
electronic records strategy, titled &lt;cite&gt;A Strategy for Openness:
Enhancing E-Records Access in New York
State&lt;/cite&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I submitted &lt;a href="http://cmrg.fifthhorseman.net/wiki/NYSRFPC122807"&gt;my own
comments&lt;/a&gt; during the
call for public comments earlier this year -- apparently there were only
114 comments submitted by the public (you can see &lt;a href="http://www.oft.state.ny.us/policy/esra/erecords/PartIIerecordsStudy.pdf"&gt;the call for comments
and an overview/analysis of the
responses&lt;/a&gt;).
I wish there'd been more, since it looks like the 59 &lt;a href="http://www.oft.state.ny.us/policy/esra/erecords/PartIII-BerecordsStudy.pdf"&gt;individual
commenters&lt;/a&gt;
were &lt;em&gt;overwhelmingly&lt;/em&gt; supportive of a requirement for the Gov't to use
ODF. The rest of the comments were from
&lt;a href="http://www.oft.state.ny.us/policy/esra/erecords/PartIII-CerecordsStudy.pdf"&gt;governments&lt;/a&gt;,
&lt;a href="http://www.oft.state.ny.us/policy/esra/erecords/PartIII-DerecordsStudy.pdf"&gt;NGOs&lt;/a&gt;,
and
&lt;a href="http://www.oft.state.ny.us/policy/esra/erecords/PartIII-EerecordsStudy.pdf"&gt;businesses&lt;/a&gt;,
and they don't seem as unanimous as the individual commenters.&lt;/p&gt;
&lt;p&gt;Looking at the metadata for the &lt;a href="http://www.oft.state.ny.us/policy/esra/erecords/PartIerecordsStudy.pdf"&gt;executive
summary&lt;/a&gt;
shows just how far we have to go:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;0 dkg@squeak doc&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pdfinfo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PartIerecordsStudy&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pdf&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;egrep&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;^Title|Producer|Creator&amp;#39;&lt;/span&gt;&lt;span class="nl"&gt;Title&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="n"&gt;Microsoft&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Word&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PartIerecordsStudy&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nl"&gt;docCreator&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;PScript5&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dll&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Version&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;5.2.2&lt;/span&gt;&lt;span class="nl"&gt;Producer&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;Acrobat&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Distiller&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;8.1.0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Windows&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;0 dkg@squeak doc&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;And in a message sent to commenters announcing the report, they seem to
be aware that they're not quite doing their best at interoperability:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;(Please note this is the first time any of NYS government's agencies
has ever published a document in ODF format. We ran into problems this
morning not caused by the format, but rather with some controls on our
systems which were not prepared to encounter such documents. So the
website links to ODF versions are not working at the moment, but will
be repaired soon).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;What web server are they running that is having trouble "encountering"
ODF? No surprise:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;0 dkg@squeak doc&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wget&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;S&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;O&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;null&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;http://www.oft.state.ny.us/policy/esra/erecords-study.htm&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;amp;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;grep&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Server&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nl"&gt;Server&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Microsoft&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;IIS&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;6.0&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;0 dkg@squeak doc&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Sigh. My initial reaction to the report (i've only read the &lt;a href="http://www.oft.state.ny.us/policy/esra/erecords/PartIerecordsStudy.pdf"&gt;executive
summary&lt;/a&gt;,
not the &lt;a href="http://www.oft.state.ny.us/policy/esra/erecords/PartIIerecordsStudy.pdf"&gt;supporting
documentation&lt;/a&gt;)
is disappointment. While they claim that "openness" is an important
feature, they fall far short of taking a strong stand for free and open
formats. The main thrust of the executive summary seems to be
(paraphrasing here, i welcome corrections):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;it's a bad idea to mandate a single particular technology because
    technologies will change faster than law.&lt;/li&gt;
&lt;li&gt;we need an Electronic Records Committee (ERC) to provide regular,
    executive guidance on electronic record storage and maintenance&lt;/li&gt;
&lt;li&gt;"openness" is good, but needs to be weighed against (ill-specified,
    at least in the executive summary) "other features"&lt;/li&gt;
&lt;li&gt;we're not going to make any concrete recommendations about what to
    do next&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;While these are unsurprising conclusions, they don't take the strong
stand i'd like them to take. They seem aware of the "chicken and egg"
problem of wide adoption and vendor support, and aware of the
anti-democratic effects of proprietary formats. But they don't seem to
be willing to act as a catalyst to push free formats explicitly. If they
did, they could break the chicken/egg vendor lock-in cycle and
facilitate better open government practices while simultaneously
encouraging a healthy information ecosystem.&lt;/p&gt;
&lt;p&gt;At this point, i suppose my biggest hope from the process is that the
proposed ERC forms pilot groups with long-term goals modeled after
&lt;a href="http://www.muenchen.de/Rathaus/dir/limux/english/147197/"&gt;Munich&lt;/a&gt;, but
i'm not holding my breath. If there are any advocates or participants in
the Munich process who want to share what's been working for you (and
what hasn't), i'd be interested in hearing about it.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tags&lt;/strong&gt;:
&lt;a href="https://debian-administration.org/tag/government"&gt;government&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/odf"&gt;odf&lt;/a&gt;,
&lt;a href="https://debian-administration.org/tag/policy"&gt;policy&lt;/a&gt;&lt;/p&gt;
&lt;/p&gt;</content><category term="misc"/></entry></feed>