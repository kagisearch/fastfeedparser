<?xml version='1.0' encoding='UTF-8'?><?xml-stylesheet href="http://www.blogger.com/styles/atom.css" type="text/css"?><feed xmlns='http://www.w3.org/2005/Atom' xmlns:openSearch='http://a9.com/-/spec/opensearchrss/1.0/' xmlns:blogger='http://schemas.google.com/blogger/2008' xmlns:georss='http://www.georss.org/georss' xmlns:gd="http://schemas.google.com/g/2005" xmlns:thr='http://purl.org/syndication/thread/1.0'><id>tag:blogger.com,1999:blog-3019054489127059271</id><updated>2026-02-06T00:34:36.938+01:00</updated><category term="debian"/><category term="software"/><category term="science"/><category term="cmdline"/><category term="qsoas"/><category term="ctioga"/><category term="graphics"/><category term="sciyag"/><category term="linux"/><category term="games"/><category term="tips-and-tricks"/><category term="ruby"/><category term="tioga"/><category term="hardware"/><category term="scripts"/><category term="qt4"/><category term="emacs"/><category term="macos"/><category term="quiz"/><category term="rants"/><category term="tutorial"/><category term="latex"/><category term="personal"/><category term="wine"/><category term="git"/><category term="help-needed"/><category term="macbook"/><category term="meta-data"/><category term="programming"/><category term="doxygen"/><category term="dvdcopy"/><category term="france"/><category term="git-annex"/><category term="metalloenzyme"/><category term="puzzle"/><category term="pymol"/><category term="scm"/><category term="summary"/><category term="utils"/><category term="webgen"/><title type='text'>YANUB: yet another (nearly) useless blog</title><subtitle type='html'>A blog from a scientist and former Debian developer (and occasional book writer)... Tricks for data handling, programming, debian administration and development, command-line and many other joyful things in the same spirit.&#xa;&#xa;Oh, and sometimes completely unrelated things !</subtitle><link rel='http://schemas.google.com/g/2005#feed' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/posts/default'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/'/><link rel='hub' href='http://pubsubhubbub.appspot.com/'/><link rel='next' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default?start-index=26&amp;max-results=25'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><generator version='7.00' uri='http://www.blogger.com'>Blogger</generator><openSearch:totalResults>143</openSearch:totalResults><openSearch:startIndex>1</openSearch:startIndex><openSearch:itemsPerPage>25</openSearch:itemsPerPage><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-8704508377566370141</id><published>2024-04-22T12:50:00.000+02:00</published><updated>2024-04-22T12:50:08.508+02:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="qsoas"/><category scheme="http://www.blogger.com/atom/ns#" term="science"/><category scheme="http://www.blogger.com/atom/ns#" term="software"/><title type='text'>QSoas version 3.3 is out</title><content type='html'>&lt;div&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiheNKIDuRyhT7yb4Tv8h-rnF2irNp72sqjJbaUf4dr9cM6d4JlrzaS5qwxuUnhyphenhyphenGFW3otAyv1u_c6Wja6VN_DUoFs3RCzf7ki7HPhz-0N70vGUL_FK-XVHitADCK-kx_2Jqd4B4_CH9Ck/s512/QSoas-logo.png&quot; style=&quot;display: block; padding: 1em 0; text-align: center; clear: right; float: right;&quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; data-original-height=&quot;512&quot; data-original-width=&quot;512&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiheNKIDuRyhT7yb4Tv8h-rnF2irNp72sqjJbaUf4dr9cM6d4JlrzaS5qwxuUnhyphenhyphenGFW3otAyv1u_c6Wja6VN_DUoFs3RCzf7ki7HPhz-0N70vGUL_FK-XVHitADCK-kx_2Jqd4B4_CH9Ck/s200/QSoas-logo.png&quot; width=&quot;200&quot;/&gt;&lt;/a&gt;&lt;/div&gt;Version 3.3 brings in new features, including reverse Laplace transforms and fits, pH fits, commands for picking points from a dataset, averaging points with the same X value, or perform singular value decomposition.
&lt;p/&gt;
In addition to these new features, many previous commands were improved, like the addition of a bandcut filter in FFT filtering, better handling of the loading of files produced by QSoas itself, and a button to interrupt the processing of scripts.

&lt;p/&gt;

There are a lot of other new features, improvements and so on, look for the full list &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/changes/#v3p3&quot;&gt;there&lt;/a&gt;.


&lt;h4&gt;About QSoas&lt;/h4&gt;&lt;br/&gt;
&lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; is a powerful open source data analysis program that focuses on flexibility and powerful fitting capacities. It is released under the &lt;a href=&quot;https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html&quot;&gt;GNU General Public License&lt;/a&gt;. It is described in &lt;a href=&quot;http://pubs.acs.org/doi/abs/10.1021/acs.analchem.6b00224&quot;&gt;Fourmond, Anal. Chem., 2016, 88 (10), pp 5050&amp;#8211;5052&lt;/a&gt;. Current version is &lt;strong&gt;3.3&lt;/strong&gt;. You can download &lt;strong&gt;for free &lt;/strong&gt; its source code or precompiled versions for MacOS and Windows &lt;a href=&quot;http://qsoas.org/downloads/&quot;&gt;there&lt;/a&gt;. Alternatively, you can clone from the &lt;a href=&quot;https://github.com/fourmond/QSoas&quot;&gt;GitHub repository&lt;/a&gt;.
</content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/8704508377566370141/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/8704508377566370141' title='0 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/8704508377566370141'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/8704508377566370141'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2024/04/qsoas-version-33-is-out.html' title='QSoas version 3.3 is out'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiheNKIDuRyhT7yb4Tv8h-rnF2irNp72sqjJbaUf4dr9cM6d4JlrzaS5qwxuUnhyphenhyphenGFW3otAyv1u_c6Wja6VN_DUoFs3RCzf7ki7HPhz-0N70vGUL_FK-XVHitADCK-kx_2Jqd4B4_CH9Ck/s72-c/QSoas-logo.png" height="72" width="72"/><thr:total>0</thr:total></entry><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-8723296819235880929</id><published>2023-03-27T18:06:00.002+02:00</published><updated>2023-03-27T18:06:39.076+02:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="qsoas"/><category scheme="http://www.blogger.com/atom/ns#" term="science"/><category scheme="http://www.blogger.com/atom/ns#" term="software"/><title type='text'>QSoas version 3.2 is out</title><content type='html'>&lt;div class=&quot;separator&quot; style=&quot;clear: both;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiheNKIDuRyhT7yb4Tv8h-rnF2irNp72sqjJbaUf4dr9cM6d4JlrzaS5qwxuUnhyphenhyphenGFW3otAyv1u_c6Wja6VN_DUoFs3RCzf7ki7HPhz-0N70vGUL_FK-XVHitADCK-kx_2Jqd4B4_CH9Ck/s512/QSoas-logo.png&quot; style=&quot;display: block; padding: 1em 0; text-align: center; clear: right; float: right;&quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; width=&quot;200&quot; data-original-height=&quot;512&quot; data-original-width=&quot;512&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiheNKIDuRyhT7yb4Tv8h-rnF2irNp72sqjJbaUf4dr9cM6d4JlrzaS5qwxuUnhyphenhyphenGFW3otAyv1u_c6Wja6VN_DUoFs3RCzf7ki7HPhz-0N70vGUL_FK-XVHitADCK-kx_2Jqd4B4_CH9Ck/s200/QSoas-logo.png&quot;/&gt;&lt;/a&gt;&lt;/div&gt;Version 3.2 of QSoas is out ! It is mostly a bug-fix release, fixing the computation mistake found in the &lt;code&gt;eecr-relay&lt;/code&gt; wave shape fit, see the &lt;a href=&quot;https://pubs.acs.org/doi/10.1021/jacs.3c01652&quot;&gt;correction to our initial article in JACS&lt;/a&gt;. We strongly encourage all the users of the &lt;code&gt;eecr-relay&lt;/code&gt; wave shape fit to upgrade, and, unfortunately, refit previously fitted data as the results might change. The other wave shape fits are not affected by the issue.
&lt;p/&gt;
&lt;h4&gt;New features&lt;/h4&gt;
In addition to this important bug fix, new possibilities have been added, including a way to make fits with &lt;q&gt;partially global&lt;/q&gt; parameters using the new &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-define-indexed-fit&quot;&gt;&lt;code&gt;define-indexed-fit&lt;/code&gt;&lt;/a&gt; command, to pick the best parameters dataset-by-dataset within fit trajectories, but also a parameter space explorer trying all possible permutations of one or more sets of parameters, and the possibility to save the results of a command to a global ruby variable.

&lt;p/&gt;

There are a lot of other new features, improvements and so on, look for the full list &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/changes/#v3p2&quot;&gt;there&lt;/a&gt;.


&lt;h4&gt;About QSoas&lt;/h4&gt;&lt;br/&gt;
&lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; is a powerful open source data analysis program that focuses on flexibility and powerful fitting capacities. It is released under the &lt;a href=&quot;https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html&quot;&gt;GNU General Public License&lt;/a&gt;. It is described in &lt;a href=&quot;http://pubs.acs.org/doi/abs/10.1021/acs.analchem.6b00224&quot;&gt;Fourmond, Anal. Chem., 2016, 88 (10), pp 5050&amp;#8211;5052&lt;/a&gt;. Current version is &lt;strong&gt;3.2&lt;/strong&gt;. You can download &lt;strong&gt;for free &lt;/strong&gt; its source code or precompiled versions for MacOS and Windows &lt;a href=&quot;http://qsoas.org/downloads/&quot;&gt;there&lt;/a&gt;. Alternatively, you can clone from the &lt;a href=&quot;https://github.com/fourmond/QSoas&quot;&gt;GitHub repository&lt;/a&gt;.
</content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/8723296819235880929/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/8723296819235880929' title='0 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/8723296819235880929'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/8723296819235880929'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2023/03/qsoas-version-32-is-out.html' title='QSoas version 3.2 is out'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiheNKIDuRyhT7yb4Tv8h-rnF2irNp72sqjJbaUf4dr9cM6d4JlrzaS5qwxuUnhyphenhyphenGFW3otAyv1u_c6Wja6VN_DUoFs3RCzf7ki7HPhz-0N70vGUL_FK-XVHitADCK-kx_2Jqd4B4_CH9Ck/s72-c/QSoas-logo.png" height="72" width="72"/><thr:total>0</thr:total></entry><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-243920168463824013</id><published>2022-10-16T14:54:00.000+02:00</published><updated>2022-10-16T14:54:28.476+02:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="metalloenzyme"/><category scheme="http://www.blogger.com/atom/ns#" term="qsoas"/><category scheme="http://www.blogger.com/atom/ns#" term="science"/><category scheme="http://www.blogger.com/atom/ns#" term="tutorial"/><title type='text'>Tutorial: analysis of multiwavelength fast kinetics data</title><content type='html'>The purpose of this post is to demonstrate a first approach to the analysis of multiwavelength kinetic data, like those obtained using stopped-flow data. To practice, we will use data that were acquired during the stopped flow practicals of the &lt;a href=&quot;http://frenchbic.cnrs.fr/2021/01/25/3rd-frenchbic-summer-school-on-methods-for-studying-metals-in-biology/&quot;&gt;MetBio summer school&lt;/a&gt; from the &lt;a href=&quot;http://frenchbic.cnrs.fr/&quot;&gt;FrenchBIC&lt;/a&gt;. During the practicals, the student monitored the reaction of myoglobin (in its Fe(III) state) with azide, which yields a fast and strong change in the absorbance spectrum of the protein, which was monitored using a diode array. The data is publicly available on &lt;a href=&quot;https://zenodo.org/record/7190333&quot;&gt;zenodo&lt;/a&gt;.
&lt;p/&gt;
&lt;h4&gt;Aims of this tutorial&lt;/h4&gt;
The purpose of this tutorial is to teach you to use the free software&lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/&quot;&gt;QSoas&lt;/a&gt; to run a simple, multiwavelength exponential fit on the data, and to look at the results. This is not a kinetics lecture, so that it will not go in depth about the use of the exponential fit and its meaning.
&lt;p/&gt;
&lt;h4&gt;Getting started: loading the file&lt;/h4&gt;
First, make sure you have a working version of QSoas, you can download them (for free) &lt;a href=&quot;http://qsoas.org/downloads/&quot;&gt;there&lt;/a&gt;. Then download the data files from &lt;a href=&quot;https://zenodo.org/record/7190333&quot;&gt;zenodo&lt;/a&gt;. We will work only on the data file &lt;a href=&quot;https://zenodo.org/record/7190333/files/Azide-1.25mm_001.txt?download=1&quot;&gt;&lt;code&gt;Azide-1.25mm_001.dat&lt;/code&gt;&lt;/a&gt;, but of course, the purpose of this tutorial is to enable you to work on all of them. The data files contain the time evolution of the absorbance for all wavelengths, in a &lt;q&gt;matrix&lt;/q&gt; format, in which each row correpond to a time point and each column to a wavelength.
&lt;p/&gt;
Start &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/&quot;&gt;QSoas&lt;/a&gt;, and launch the command:
&lt;pre&gt;
QSoas&gt; load /comments=&#39;&quot;&#39;
&lt;/pre&gt;
Then, choose the &lt;code&gt;Azide-1.25mm_001.dat&lt;/code&gt; data file. This should bring up a horizontal red line at the bottom of the data display, with X values between about 0 and 2.5. If you zoom on the red line with the mouse wheel, you&#39;ll realize it is data. The &lt;code&gt;/comments=&#39;&quot;&#39;&lt;/code&gt; part is very important since it allows the extraction of the wavelength from the data. We will look at what it means another day. At this stage, you can look at the loaded data using the command:
&lt;pre&gt;
QSoas&gt; edit
&lt;/pre&gt;
You should have a window looking like this:
&lt;div class=&quot;separator&quot; style=&quot;clear: both;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhjs7iODDDYyNosikw_668mDMdrj0ViPpEPnBZncKOcr0B93XI2BQ-Rc3DwCh26MPbPbxGYdbULfgs4t1LQcJGyLOpbrFu62YaxsnTuX_lPbtuADMHyBjCTlr1zcFThYdOUayxlmn541au2EPg8uTKBlsRRcHELcufF-SBVedV4A-sRnR6d6hOm_sL4/s2082/Data-edit.png&quot; style=&quot;display: block; padding: 1em 0; text-align: center; &quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; width=&quot;400&quot; data-original-height=&quot;1359&quot; data-original-width=&quot;2082&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhjs7iODDDYyNosikw_668mDMdrj0ViPpEPnBZncKOcr0B93XI2BQ-Rc3DwCh26MPbPbxGYdbULfgs4t1LQcJGyLOpbrFu62YaxsnTuX_lPbtuADMHyBjCTlr1zcFThYdOUayxlmn541au2EPg8uTKBlsRRcHELcufF-SBVedV4A-sRnR6d6hOm_sL4/s400/Data-edit.png&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
The rows each correspond to a data point displayed on the window below. The first column correspond to the X values, the second the Y values, and all the other ones to extra Y columns (they are not displayed by default). What is especially interesting is the first row, which contains a &lt;code&gt;nan&lt;/code&gt; as the X value and what is obviously the wavelength for all the Y values. To tell that QSoas should take this line as the wavelength (which will be the &lt;q&gt;perpendicular coordinate&lt;/q&gt;, the coordinate of the other direction of the matrix), first close the edit window and run:
&lt;pre&gt;
QSoas&gt; set-perp /from-row=0
&lt;/pre&gt;
&lt;p/&gt;
&lt;h4&gt;Splitting and fitting&lt;/h4&gt;
Now, we have a single dataset containing a lot of Y columns. We want to fit all of them simultaneously with a (mono) exponential fit. For that, we first need to split the big matrix into a series of X,Y datasets (because fitting only works on the first Y). This is possible by running:
&lt;pre&gt;
QSoas&gt; expand /style=red-to-blue /flags=kinetics
&lt;/pre&gt;
Your screen should now look like this:
&lt;div class=&quot;separator&quot; style=&quot;clear: both;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj6tROpZQW_o5OTfaJu_0oeCNhikbdnYZHy018_IWikPACsUJ4oxDWrNu9Z1IFj4Vlpt2y1krYXEnUTQ_pjb_w0fXftOZt6qTWNja3MFFHK-YlOTGF7ohFC3n25ebgEeSs1BLEPpZ6I1c2F4NJK2NdmOhq-KMJNQu5kzm2sufotSwltrPjcd8iyYl3V/s2076/All-kinetics.png&quot; style=&quot;display: block; padding: 1em 0; text-align: center; &quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; width=&quot;400&quot; data-original-height=&quot;1355&quot; data-original-width=&quot;2076&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj6tROpZQW_o5OTfaJu_0oeCNhikbdnYZHy018_IWikPACsUJ4oxDWrNu9Z1IFj4Vlpt2y1krYXEnUTQ_pjb_w0fXftOZt6qTWNja3MFFHK-YlOTGF7ohFC3n25ebgEeSs1BLEPpZ6I1c2F4NJK2NdmOhq-KMJNQu5kzm2sufotSwltrPjcd8iyYl3V/s400/All-kinetics.png&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
You&#39;re looking at the kinetics at all wavelengths at the same time (this may take some time to display on your computer, it is after all a rather large number of data points). The &lt;code&gt;/style=red-to-blue&lt;/code&gt; is not strictly necessary, but it gives the red to blue color gradient which makes things easier to look at (and cooler !). The &lt;code&gt;/flags=kinetics&lt;/code&gt; is there to attach a label (a &lt;q&gt;flag&lt;/q&gt;) to the newly created datasets so we can easily manipulate all of them at the same time. Then it&#39;s time to fit, with the following command:
&lt;pre&gt;
QSoas&gt; mfit-exponential-decay flagged:kinetics
&lt;/pre&gt;
This should bring up a new window. After resizing it, you should have something that looks like this:
&lt;div class=&quot;separator&quot; style=&quot;clear: both;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi8_FpIPEETLPelE2aNTyHXNxkXoqxb7YTUvECWF6xGLc9WGhp_1hpksioaqPaXk7aRkdWrNDbFQlArrkvdOpSGwPkbDaJPRpU_EvUuFWS_Z4yjqus6wuUCmXZySqZEtK2EmcGDiB4RUZjYJ6FLgzJ2nmAUKTQS_ZExRSri1IJzylMW5u6cF90XajL-/s2084/FittingInterface.png&quot; style=&quot;display: block; padding: 1em 0; text-align: center; &quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; width=&quot;400&quot; data-original-height=&quot;1362&quot; data-original-width=&quot;2084&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi8_FpIPEETLPelE2aNTyHXNxkXoqxb7YTUvECWF6xGLc9WGhp_1hpksioaqPaXk7aRkdWrNDbFQlArrkvdOpSGwPkbDaJPRpU_EvUuFWS_Z4yjqus6wuUCmXZySqZEtK2EmcGDiB4RUZjYJ6FLgzJ2nmAUKTQS_ZExRSri1IJzylMW5u6cF90XajL-/s400/FittingInterface.png&quot;/&gt;&lt;/a&gt;&lt;/div&gt;

The bottom of the fit window is taken by the parameters, each with two checkboxes on the right to set them fixed (i.e. not determined by the fitting mechanism) and/or global (i.e. with a single value for all the datasets, here all the wavelengths). The top shows the current dataset along with the corresponding fit (in green), and, below, the residuals. You can change the dataset by clicking on the horizontal arrows or using Ctrl+PgUp or Ctrl+PgDown (keep holding it to scan fast). See the &lt;code&gt;Z = 728.15&lt;/code&gt; showing that QSoas has recognized that the currently displayed dataset corresponds to the wavelength 728.15. The equation fitted to the data is: $$y(x) = A_\infty + A_1 \times \exp -(x - x_0)/\tau_1$$

In this case, while the \(A_1\) and \(A_\infty\) parameters clearly depend on the wavelength, the time constant of evolution should be independent of wavelength (the process happens at a certain rate regardless of the wavelength we&#39;re analyzing), so that the \(\tau_1\) parameter should be common for all the datasets/wavelengths. Just click on the &lt;q&gt;global&lt;/q&gt; checkbox at the right of the &lt;code&gt;tau_1&lt;/code&gt; parameter, make sure it is checked, and hit the &lt;q&gt;Fit&lt;/q&gt; button...
&lt;p /&gt;
The fit should not take long (less than a minute), and then you end up with the results of the fits: all the parameters. The best way to look at the non global parameters like \(A_1\) and \(A_\infty\) is to use the &lt;q&gt;Show Parameters&lt;/q&gt; item from the &lt;q&gt;Parameters&lt;/q&gt; menu. Using it and clicking on &lt;code&gt;A_inf&lt;/code&gt; too should give you a display like this one:
&lt;div class=&quot;separator&quot; style=&quot;clear: both;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi9xwHx3j1EStdE7zBDhRdVGfwKKF7Xvo4Dd7CX48DrCKKQkJ7COxFV3flVUwRvzyNgiocqrMWhJnUqsqky0O_d1pbekuhLH3wQfWN2Tmk9y7BrOP0_WpS5pD0_7M6B6_X1h5kLFGAyW5ey250aBUzt627lKU3Ok1E_V9syQXBYg9XgP21V6hLfNyTK/s2073/FitParameters.png&quot; style=&quot;display: block; padding: 1em 0; text-align: center; &quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; width=&quot;400&quot; data-original-height=&quot;1347&quot; data-original-width=&quot;2073&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi9xwHx3j1EStdE7zBDhRdVGfwKKF7Xvo4Dd7CX48DrCKKQkJ7COxFV3flVUwRvzyNgiocqrMWhJnUqsqky0O_d1pbekuhLH3wQfWN2Tmk9y7BrOP0_WpS5pD0_7M6B6_X1h5kLFGAyW5ey250aBUzt627lKU3Ok1E_V9syQXBYg9XgP21V6hLfNyTK/s400/FitParameters.png&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
The &lt;code&gt;A_inf&lt;/code&gt; parameter corresponds to the spectum at infinite time (of azide-bound heme), while the &lt;code&gt;A_1&lt;/code&gt; parameter corresponds to the difference spectrum between the initial (azide-free) and final (azide-bound) states.
&lt;p/&gt;
Now, the fit is finished, you can save the parameters if you want to reload them in a later fit by using the &lt;q&gt;Parameters&lt;/q&gt;/&lt;q&gt;Save&lt;/q&gt; menu item or export them in a form more suitable for plotting using &lt;q&gt;Parameters&lt;/q&gt;/&lt;q&gt;Export&lt;/q&gt; (although QSoas can also display and the parameters saved using &lt;q&gt;Save&lt;/q&gt;). This concludes this first approach to fitting the data. What you can do is
&lt;ul&gt;
  &lt;li&gt;look at the depence of the &lt;code&gt;tau_1&lt;/code&gt; parameter as a function of the azide concentration;&lt;/li&gt;
  &lt;li&gt;try fitting more than one exponential, using for instance:
&lt;pre&gt;
QSoas&gt; mfit-exponential-decay /exponentials=2 flagged:kinetics
&lt;/pre&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p/&gt;
&lt;h4&gt;How to read the code above&lt;/h4&gt;
All the lines starting by &lt;code&gt;QSoas&gt;&lt;/code&gt; in the code areas above are meant to be typed into the QSoas command line (at the bottom of the window), and started by pressing &lt;em&gt;enter&lt;/em&gt; at the end. You must remove the &lt;code&gt;QSoas&gt;&lt;/code&gt; bit. The other lines (when applicable) show you the response of QSoas, in the terminal just above the command-line. You may want to play with the &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/tutorial/&quot;&gt;QSoas tutorial&lt;/a&gt; to learn more about how to interact with QSoas.

&lt;p/&gt;
&lt;h4&gt;About QSoas&lt;/h4&gt;
&lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; is a powerful open source data analysis program that focuses on flexibility and powerful fitting capacities. It is released under the &lt;a href=&quot;https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html&quot;&gt;GNU General Public License&lt;/a&gt;. It is described in &lt;a href=&quot;http://pubs.acs.org/doi/abs/10.1021/acs.analchem.6b00224&quot;&gt;Fourmond, Anal. Chem., 2016, 88 (10), pp 5050&amp;#8211;5052&lt;/a&gt;. Current version is &lt;strong&gt;3.1&lt;/strong&gt;. You can freely (and at no cost) download its source code or precompiled versions for MacOS and Windows &lt;a href=&quot;http://qsoas.org/downloads/&quot;&gt;there&lt;/a&gt;. Alternatively, you can clone from the &lt;a href=&quot;https://github.com/fourmond/QSoas&quot;&gt;GitHub repository&lt;/a&gt;.
&lt;br/&gt;
  &lt;b&gt;Contact:&lt;/b&gt; find my email address &lt;a href=&quot;https://bip.cnrs.fr/contact/vincent-fourmond/&quot;&gt;there&lt;/a&gt;, or contact me on &lt;a href=&quot;https://www.linkedin.com/in/vincent-fourmond-13998324a/&quot;&gt;LinkedIn&lt;/a&gt;.</content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/243920168463824013/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/243920168463824013' title='3 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/243920168463824013'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/243920168463824013'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2022/10/tutorial-analyse-multiwavelength-fast.html' title='Tutorial: analysis of multiwavelength fast kinetics data'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhjs7iODDDYyNosikw_668mDMdrj0ViPpEPnBZncKOcr0B93XI2BQ-Rc3DwCh26MPbPbxGYdbULfgs4t1LQcJGyLOpbrFu62YaxsnTuX_lPbtuADMHyBjCTlr1zcFThYdOUayxlmn541au2EPg8uTKBlsRRcHELcufF-SBVedV4A-sRnR6d6hOm_sL4/s72-c/Data-edit.png" height="72" width="72"/><thr:total>3</thr:total></entry><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-1600067284645922332</id><published>2022-09-28T15:29:00.000+02:00</published><updated>2022-09-28T15:29:04.160+02:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="qsoas"/><category scheme="http://www.blogger.com/atom/ns#" term="science"/><title type='text'>Version 3.1 of QSoas is out</title><content type='html'>The new version of QSoas has just been released ! It brings in a host of new features, as the releases before, but maybe the most important change is the following...&lt;p&gt;

&lt;h4&gt;Binary images now freely available !&lt;/h4&gt;
Starting from now, all the binary images for the new versions of QSoas will freely available from the &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/downloads/&quot;&gt;download page&lt;/a&gt;. You can download the precompiled versions of QSoas for MacOS or windows. So now, you have no reason anymore not to try !&lt;br/&gt;
My aim with making the binaries freely available is also to simplify the release process for me and therefore increase the rate at which new versions are released.&lt;p/&gt;


&lt;h4&gt;Improvements to the fit interface&lt;/h4&gt;
Some work went into improving the fit interface, in particular for the handling of fit trajectories when doing parameter space exploration, for difficult fits with many parameters and many local minima. The fit window now features real menus, along with tab a way to display the terminal (see the menus and the tabs selection on the image).
&lt;br/&gt;
&lt;div class=&quot;separator&quot; style=&quot;clear: both;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgITJ9qzhep6YDRx0VULBtGYZEutJkYJzbbZymrrcoIH1DXPkXuPgxuB2Ldv7k_ChpL7AtdqiKXbTRRbDun2mdovep2F0OY8dHYnbvg06_dPftLLMcp9zjwCxI4I64P9sviWXpw8wyZPpfoOS7VdjOFpg-9s1xqETUvcvlgMccylIsM73KIzZgf66nd/s4096/QSoas-fits-macos.png&quot; style=&quot;display: block; padding: 1em 0; text-align: center; &quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; width=&quot;400&quot; data-original-height=&quot;2304&quot; data-original-width=&quot;4096&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgITJ9qzhep6YDRx0VULBtGYZEutJkYJzbbZymrrcoIH1DXPkXuPgxuB2Ldv7k_ChpL7AtdqiKXbTRRbDun2mdovep2F0OY8dHYnbvg06_dPftLLMcp9zjwCxI4I64P9sviWXpw8wyZPpfoOS7VdjOFpg-9s1xqETUvcvlgMccylIsM73KIzZgf66nd/s320/QSoas-fits-macos.png&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
Individual fits have also been improved, with, among others, the possibility to easily simulate voltammograms with the &lt;code&gt;kinetic-system&lt;/code&gt; fits, and the handling of Marcus-Hush-Chidsey (or Marcus &quot;distribution of states&quot;) kinetics for electron transfers.&lt;p/&gt;

&lt;h4&gt;Column and row names&lt;/h4&gt;
This release greatly improves the handling of column and row names, including commands to easily modify them, the possibility to use Ruby formulas to change them, and a much better way read and write them to data files. Mastering the use of column names (and to a lesser extent, row names) can greatly simplify data handling, especially when dealing with files with a large number of columns.&lt;p/&gt;

&lt;h4&gt;Complex numbers&lt;/h4&gt;
Version 3.1 brings in support for formulas handling complex numbers. Although it is not possible to store complex numbers directly into datasets, it is easy to separate them in real and imaginary parts to your liking.&lt;p/&gt;

&lt;h4&gt;Scripting improvement&lt;/h4&gt;
Two important improvements for scripting are included in version 3.1. The first is the possibility to define &lt;em&gt;virtual files&lt;/em&gt; inside a script file, which makes it easy to define &lt;q&gt;subfunctions&lt;/q&gt; to run using commands like &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-run-for-each&quot;&gt;run-for-each&lt;/a&gt;. The second is the possibility to define &lt;q&gt;variables&lt;/q&gt; to be reused later (like the script arguments) using the new command &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-let&quot;&gt;let&lt;/a&gt;.

&lt;p/&gt;

There are a lot of other new features, improvements and so on, look for the full list &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/changes/#v3p1&quot;&gt;there&lt;/a&gt;.


&lt;h4&gt;About QSoas&lt;/h4&gt;&lt;br/&gt;
&lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; is a powerful open source data analysis program that focuses on flexibility and powerful fitting capacities. It is released under the &lt;a href=&quot;https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html&quot;&gt;GNU General Public License&lt;/a&gt;. It is described in &lt;a href=&quot;http://pubs.acs.org/doi/abs/10.1021/acs.analchem.6b00224&quot;&gt;Fourmond, Anal. Chem., 2016, 88 (10), pp 5050&amp;#8211;5052&lt;/a&gt;. Current version is &lt;strong&gt;3.1&lt;/strong&gt;. You can download its source code or precompiled versions for MacOS and Windows &lt;a href=&quot;http://qsoas.org/downloads/&quot;&gt;there&lt;/a&gt;. Alternatively, you can clone from the &lt;a href=&quot;https://github.com/fourmond/QSoas&quot;&gt;GitHub repository&lt;/a&gt;.
</content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/1600067284645922332/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/1600067284645922332' title='0 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/1600067284645922332'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/1600067284645922332'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2022/09/version-31-of-qsoas-is-out.html' title='Version 3.1 of QSoas is out'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgITJ9qzhep6YDRx0VULBtGYZEutJkYJzbbZymrrcoIH1DXPkXuPgxuB2Ldv7k_ChpL7AtdqiKXbTRRbDun2mdovep2F0OY8dHYnbvg06_dPftLLMcp9zjwCxI4I64P9sviWXpw8wyZPpfoOS7VdjOFpg-9s1xqETUvcvlgMccylIsM73KIzZgf66nd/s72-c/QSoas-fits-macos.png" height="72" width="72"/><thr:total>0</thr:total></entry><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-3933981637717337444</id><published>2021-07-07T19:38:00.000+02:00</published><updated>2021-07-07T19:38:26.445+02:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="qsoas"/><category scheme="http://www.blogger.com/atom/ns#" term="science"/><title type='text'>Upcoming features of QSoas and github repository</title><content type='html'>&lt;div class=&quot;separator&quot; style=&quot;clear: both;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiheNKIDuRyhT7yb4Tv8h-rnF2irNp72sqjJbaUf4dr9cM6d4JlrzaS5qwxuUnhyphenhyphenGFW3otAyv1u_c6Wja6VN_DUoFs3RCzf7ki7HPhz-0N70vGUL_FK-XVHitADCK-kx_2Jqd4B4_CH9Ck/s512/QSoas-logo.png&quot; style=&quot;display: block; padding: 1em 0; text-align: center; clear: right; float: right;&quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; width=&quot;200&quot; data-original-height=&quot;512&quot; data-original-width=&quot;512&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiheNKIDuRyhT7yb4Tv8h-rnF2irNp72sqjJbaUf4dr9cM6d4JlrzaS5qwxuUnhyphenhyphenGFW3otAyv1u_c6Wja6VN_DUoFs3RCzf7ki7HPhz-0N70vGUL_FK-XVHitADCK-kx_2Jqd4B4_CH9Ck/s200/QSoas-logo.png&quot;/&gt;&lt;/a&gt;&lt;/div&gt;For the past years, most of the development has happened behind the scene in a private repository, and the code has appeared in the public repository only a couple of months before the release, in the &lt;code&gt;release&lt;/code&gt; branch. I have now decided to publish the &lt;q&gt;current&lt;/q&gt; code of QSoas in the github repository (in the &lt;a href=&quot;https://github.com/fourmond/QSoas/tree/public&quot;&gt;&lt;code&gt;public&lt;/code&gt;&lt;/a&gt; branch). This way, you can follow and use all the good things that were developed since the last release, and also verify whether any bug you have is still present in the currently developed version !&lt;br /&gt;&lt;br /&gt;

&lt;h4&gt;Upcoming features&lt;/h4&gt;&lt;br /&gt;
This is the occasion to write a bit about the some of the features that have been added since the &lt;a href=&quot;/2020/12/version-30-of-qsoas-is-out.html&quot;&gt;publication of the 3.0 release&lt;/a&gt;. Not all of them are polished nor documented yet, but here are a few teasers. The current version in github has:
&lt;ul&gt;
  &lt;li&gt;a comprehensive handling of column/row names, which makes it much easier to work with files with named columns (like the output files QSoas produces !);&lt;/li&gt;
  &lt;li&gt;better handling of lists of meta-data, when there is one value of the meta for each segment or each Y column;&lt;/li&gt;
  &lt;li&gt;handling of complex numbers in &lt;a href=&#39;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-apply-formula&#39;&gt;apply-formula&lt;/a&gt;;&lt;/li&gt;
  &lt;li&gt;defining fits using external python code;&lt;/li&gt;
  &lt;li&gt;a command for linear least squares (which has the huge advantage of being exact and not needing any initial parameters);&lt;/li&gt;
  &lt;li&gt;commands to pause in a script or sort datasets in the stack;&lt;/li&gt;
  &lt;li&gt;improvements over previous commands, in particular with &lt;code&gt;eval&lt;/code&gt;;&lt;/li&gt;
  &lt;li&gt;... and more...&lt;/li&gt;
&lt;/ul&gt;
Check out the &lt;a href=&quot;https://github.com/fourmond/QSoas/tree/public&quot;&gt;github repository&lt;/a&gt; if you want to know more about the new features !
&lt;br /&gt;&lt;br /&gt;
As of now, no official date is planned for the 3.1 release, but this could happen during fall.
&lt;br/&gt;&lt;br/&gt;

&lt;h4&gt;About QSoas&lt;/h4&gt;&lt;br/&gt;
&lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; is a powerful open source data analysis program that focuses on flexibility and powerful fitting capacities. It is released under the &lt;a href=&quot;https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html&quot;&gt;GNU General Public License&lt;/a&gt;. It is described in &lt;a href=&quot;http://pubs.acs.org/doi/abs/10.1021/acs.analchem.6b00224&quot;&gt;Fourmond, Anal. Chem., 2016, 88 (10), pp 5050&amp;#8211;5052&lt;/a&gt;. Current version is &lt;strong&gt;3.0&lt;/strong&gt;. You can download its source code &lt;a href=&quot;http://qsoas.org/downloads/&quot;&gt;there&lt;/a&gt; (or clone from the &lt;a href=&quot;https://github.com/fourmond/QSoas&quot;&gt;GitHub repository&lt;/a&gt;) and compile it yourself, or buy precompiled versions for MacOS and Windows &lt;a href=&quot;https://evalorix.com/en/shop/science-and-engineering-products-and-tools/software-and-apps/qsoas-software/&quot;&gt;there&lt;/a&gt;.

</content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/3933981637717337444/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/3933981637717337444' title='0 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/3933981637717337444'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/3933981637717337444'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2021/07/upcoming-features-of-qsoas-and-github.html' title='Upcoming features of QSoas and github repository'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiheNKIDuRyhT7yb4Tv8h-rnF2irNp72sqjJbaUf4dr9cM6d4JlrzaS5qwxuUnhyphenhyphenGFW3otAyv1u_c6Wja6VN_DUoFs3RCzf7ki7HPhz-0N70vGUL_FK-XVHitADCK-kx_2Jqd4B4_CH9Ck/s72-c/QSoas-logo.png" height="72" width="72"/><thr:total>0</thr:total></entry><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-1573179127902041692</id><published>2021-06-13T23:14:00.001+02:00</published><updated>2021-06-13T23:14:38.290+02:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="qsoas"/><category scheme="http://www.blogger.com/atom/ns#" term="quiz"/><category scheme="http://www.blogger.com/atom/ns#" term="science"/><title type='text'>Solution for QSoas quiz #2: averaging several Y values for the same X value </title><content type='html'>This post describes two similar solutions to the &lt;a href=&#39;https://vince-debian.blogspot.com/2021/05/qsoas-quiz-2-averaging-several-y-values.html&#39;&gt;Quiz #2&lt;/a&gt;, using the data files found &lt;a href=&#39;https://github.com/fourmond/QSoasExampleFiles/tree/data/Quiz-02&#39;&gt;there&lt;/a&gt;. The two solutions described here rely on &lt;a href=&#39;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-split-on-values&#39;&gt;&lt;code&gt;split-on-values&lt;/code&gt;&lt;/a&gt;. The first solution is the one that came naturally to me, and is by far the most general and extensible, but the second one is shorter, and doesn&#39;t require external script files.
&lt;br /&gt;
&lt;div class=&quot;separator&quot; style=&quot;clear: both;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhjQOvdYqysZmVqLZTsbvpPiiVCGIdQ3YqKMTHGU-ywEzPOKjK4JdxEyNWwpeNVWHu0PS5SEY0-2P2PSSl7-grBJ-f-2Y3lI6sJKFC3U287CxuGGnDG1mB4dga3u6c3s_HqSYc4PQ3eSrU/s1981/Quiz-02.png&quot; style=&quot;display: block; padding: 1em 0; text-align: center; &quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; width=&quot;400&quot; data-original-height=&quot;1200&quot; data-original-width=&quot;1981&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhjQOvdYqysZmVqLZTsbvpPiiVCGIdQ3YqKMTHGU-ywEzPOKjK4JdxEyNWwpeNVWHu0PS5SEY0-2P2PSSl7-grBJ-f-2Y3lI6sJKFC3U287CxuGGnDG1mB4dga3u6c3s_HqSYc4PQ3eSrU/s320/Quiz-02.png&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;h4&gt;Solution #1&lt;/h4&gt;
The key to both solution is to separate the original data into a series of datasets that only contain data at a fixed value of x (which corresponds here to a fixed pH), and then process each dataset one by one to extract the average and standard deviation. This first step is done thus:
&lt;pre&gt;QSoas&gt; load kcat-vs-ph.dat
QSoas&gt; split-on-values pH x /flags=data
&lt;/pre&gt;
After these commands, the stacks contains a series of datasets bearing the &lt;code&gt;data&lt;/code&gt; flag, that each contain a single column of data, as can be seen from the beginnings of a show-stack command:
&lt;pre&gt;QSoas&gt; k
Normal stack:
	 F  C	Rows	Segs	Name	
#0	(*) 1	43	1	&#39;kcat-vs-ph_subset_22.dat&#39;
#1	(*) 1	44	1	&#39;kcat-vs-ph_subset_21.dat&#39;
#2	(*) 1	43	1	&#39;kcat-vs-ph_subset_20.dat&#39;
...
&lt;/pre&gt;
Each of these datasets have a meta-data named &lt;code&gt;pH&lt;/code&gt; whose value is the original x value from &lt;code&gt;kcat-vs-ph.dat&lt;/code&gt;. Now, the idea is to run a &lt;a href=&#39;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-stats&#39;&gt;&lt;code&gt;stats&lt;/code&gt;&lt;/a&gt; command on the resulting datasets, extracting the average value of x and its standard deviation, together with the value of the meta &lt;code&gt;pH&lt;/code&gt;. The most natural and general way to do this is to use &lt;a href=&#39;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-run-for-datasets&#39;&gt;&lt;code&gt;run-for-datasets&lt;/code&gt;&lt;/a&gt;, using the following script file (named &lt;code&gt;process-one.cmds&lt;/code&gt;):
&lt;pre&gt;stats /meta=pH /output=true /stats=x_average,x_stddev
&lt;/pre&gt;
So the command looks like:
&lt;pre&gt;QSoas&gt; run-for-datasets process-one.cmds flagged:data
&lt;/pre&gt;
This command produces an output file containing, for each flagged dataset, a line containing &lt;code&gt;x_average&lt;/code&gt;, &lt;code&gt;x_stddev&lt;/code&gt;, and &lt;code&gt;pH&lt;/code&gt;. Then, it is just a matter of loading the output file and shuffling the columns in the right order to get the data in the form asked. Overall, this looks like &lt;a href=&quot;https://github.com/fourmond/QSoasExampleFiles/blob/data/Quiz-02/solution-1.cmds&quot;&gt;this&lt;/a&gt;:
&lt;pre&gt;
l kcat-vs-ph.dat
split-on-values pH x /flags=data
output result.dat /overwrite=true
run-for-datasets process-one.cmds flagged:data
l result.dat
apply-formula tmp=y2;y2=y;y=x;x=tmp
dataset-options /yerrors=y2
&lt;/pre&gt;
The slight improvement over what is described above is the use of the &lt;a href=&#39;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-output&#39;&gt;&lt;code&gt;output&lt;/code&gt;&lt;/a&gt; command to write the output to a dedicated file (here &lt;code&gt;result.dat&lt;/code&gt;), instead of &lt;code&gt;out.dat&lt;/code&gt; and ensuring it is overwritten, so that no data remains from previous runs.
&lt;br /&gt;
&lt;br /&gt;
&lt;h4&gt;Solution #2&lt;/h4&gt;
The second solution is almost the same as the first one, with two improvements:
&lt;ul&gt;
  &lt;li&gt;the &lt;a href=&#39;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-stats&#39;&gt;&lt;code&gt;stats&lt;/code&gt;&lt;/a&gt; command can work with datasets other than the current one, by supplying them to the &lt;code&gt;/buffers=&lt;/code&gt; option, so that it is not necessary to use &lt;a href=&#39;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-run-for-datasets&#39;&gt;&lt;code&gt;run-for-datasets&lt;/code&gt;&lt;/a&gt;;&lt;/li&gt;
  &lt;li&gt;the use of the output file can by replaced by the use of the &lt;a href=&#39;https://bip.cnrs.fr/groups/bip06/software/reference/#data-output&#39;&gt;accumulator&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
This yields the following, smaller, &lt;a href=&quot;https://github.com/fourmond/QSoasExampleFiles/blob/data/Quiz-02/solution-2.cmds&quot;&gt;solution&lt;/a&gt;:
&lt;pre&gt;
l kcat-vs-ph.dat
split-on-values pH x /flags=data
stats /meta=pH /accumulate=* /stats=x_average,x_stddev /buffers=flagged:data
pop
apply-formula tmp=y2;y2=y;y=x;x=tmp
dataset-options /yerrors=y2
&lt;/pre&gt;
    



&lt;br /&gt;
&lt;br /&gt;

&lt;h4&gt;About QSoas&lt;/h4&gt;
&lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; is a powerful open source data analysis program that focuses on flexibility and powerful fitting capacities. It is released under the &lt;a href=&quot;https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html&quot;&gt;GNU General Public License&lt;/a&gt;. It is described in &lt;a href=&quot;http://pubs.acs.org/doi/abs/10.1021/acs.analchem.6b00224&quot;&gt;Fourmond, Anal. Chem., 2016, 88 (10), pp 5050&amp;#8211;5052&lt;/a&gt;. Current version is &lt;strong&gt;3.0&lt;/strong&gt;. You can download its source code &lt;a href=&quot;http://qsoas.org/downloads/&quot;&gt;there&lt;/a&gt; (or clone from the &lt;a href=&quot;https://github.com/fourmond/QSoas&quot;&gt;GitHub repository&lt;/a&gt;) and compile it yourself, or buy precompiled versions for MacOS and Windows &lt;a href=&quot;https://evalorix.com/en/shop/science-and-engineering-products-and-tools/software-and-apps/qsoas-software/&quot;&gt;there&lt;/a&gt;.

</content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/1573179127902041692/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/1573179127902041692' title='0 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/1573179127902041692'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/1573179127902041692'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2021/06/solution-for-qsoas-quiz-2-averaging.html' title='Solution for QSoas quiz #2: averaging several Y values for the same X value '/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhjQOvdYqysZmVqLZTsbvpPiiVCGIdQ3YqKMTHGU-ywEzPOKjK4JdxEyNWwpeNVWHu0PS5SEY0-2P2PSSl7-grBJ-f-2Y3lI6sJKFC3U287CxuGGnDG1mB4dga3u6c3s_HqSYc4PQ3eSrU/s72-c/Quiz-02.png" height="72" width="72"/><thr:total>0</thr:total></entry><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-2180992977482711815</id><published>2021-05-30T22:36:00.001+02:00</published><updated>2021-05-30T22:36:04.572+02:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="qsoas"/><category scheme="http://www.blogger.com/atom/ns#" term="quiz"/><category scheme="http://www.blogger.com/atom/ns#" term="science"/><title type='text'>QSoas quiz #2: averaging several Y values for the same X value</title><content type='html'>This second quiz may sound like the &lt;a href=&quot;https://vince-debian.blogspot.com/2020/10/qsoas-quiz-1-averaging-spectra.html&quot;&gt;first one&lt;/a&gt;, but in fact, the approach used is completely different. The point is to gather some elementary statistics from a series of experiments performed under different conditions, but with several repeats at the same conditions. 
&lt;br /&gt;
&lt;h4&gt;Quiz&lt;/h4&gt;
You are given a file (which you can download &lt;a href=&#39;https://github.com/fourmond/QSoasExampleFiles/raw/data/Quiz-02/kcat-vs-ph.dat&#39;&gt;there&lt;/a&gt;) that contains a series of &lt;code&gt;pH value&lt;/code&gt; data: the X column is the pH, the Y column the result of the experiment at the given pH (let&#39;s say the measure of the catalytic rate of an enzyme). Your task is to take this data and produce a single dataset which contains, for each pH value, the pH, the average of the results at that pH and the standard deviation. The result should be identical to the &lt;a href=&#39;https://github.com/fourmond/QSoasExampleFiles/raw/data/Quiz-02/processed.dat&#39;&gt;following file&lt;/a&gt;, and should look like that:
&lt;div class=&quot;separator&quot; style=&quot;clear: both;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhjQOvdYqysZmVqLZTsbvpPiiVCGIdQ3YqKMTHGU-ywEzPOKjK4JdxEyNWwpeNVWHu0PS5SEY0-2P2PSSl7-grBJ-f-2Y3lI6sJKFC3U287CxuGGnDG1mB4dga3u6c3s_HqSYc4PQ3eSrU/s1981/Quiz-02.png&quot; style=&quot;display: block; padding: 1em 0; text-align: center; &quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; width=&quot;400&quot; data-original-height=&quot;1200&quot; data-original-width=&quot;1981&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhjQOvdYqysZmVqLZTsbvpPiiVCGIdQ3YqKMTHGU-ywEzPOKjK4JdxEyNWwpeNVWHu0PS5SEY0-2P2PSSl7-grBJ-f-2Y3lI6sJKFC3U287CxuGGnDG1mB4dga3u6c3s_HqSYc4PQ3eSrU/s320/Quiz-02.png&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
There are several ways to do this, but all ways must rely on &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-stats&quot;&gt;&lt;code&gt;stats&lt;/code&gt;&lt;/a&gt;, and the more natural way in QSoas is to take advantage of &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-split-on-values&quot;&gt;&lt;code&gt;split-on-values&lt;/code&gt;&lt;/a&gt;, which is a very powerful command but somehow hard to master, which is the point of this Quiz.
&lt;br /&gt;
By the way, the data file is purely synthetic, if you look in the &lt;a href=&#39;https://github.com/fourmond/QSoasExampleFiles&#39;&gt;GitHub repository&lt;/a&gt;, you&#39;ll see how it was generated.
&lt;br /&gt;
&lt;br /&gt;

&lt;h4&gt;About QSoas&lt;/h4&gt;
&lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; is a powerful open source data analysis program that focuses on flexibility and powerful fitting capacities. It is released under the &lt;a href=&quot;https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html&quot;&gt;GNU General Public License&lt;/a&gt;. It is described in &lt;a href=&quot;http://pubs.acs.org/doi/abs/10.1021/acs.analchem.6b00224&quot;&gt;Fourmond, Anal. Chem., 2016, 88 (10), pp 5050&amp;#8211;5052&lt;/a&gt;. Current version is &lt;strong&gt;3.0&lt;/strong&gt;. You can download its source code &lt;a href=&quot;http://qsoas.org/downloads/&quot;&gt;there&lt;/a&gt; (or clone from the &lt;a href=&quot;https://github.com/fourmond/QSoas&quot;&gt;GitHub repository&lt;/a&gt;) and compile it yourself, or buy precompiled versions for MacOS and Windows &lt;a href=&quot;https://evalorix.com/en/shop/science-and-engineering-products-and-tools/software-and-apps/qsoas-software/&quot;&gt;there&lt;/a&gt;.
</content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/2180992977482711815/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/2180992977482711815' title='0 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/2180992977482711815'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/2180992977482711815'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2021/05/qsoas-quiz-2-averaging-several-y-values.html' title='QSoas quiz #2: averaging several Y values for the same X value'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhjQOvdYqysZmVqLZTsbvpPiiVCGIdQ3YqKMTHGU-ywEzPOKjK4JdxEyNWwpeNVWHu0PS5SEY0-2P2PSSl7-grBJ-f-2Y3lI6sJKFC3U287CxuGGnDG1mB4dga3u6c3s_HqSYc4PQ3eSrU/s72-c/Quiz-02.png" height="72" width="72"/><thr:total>0</thr:total></entry><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-150332953874943682</id><published>2021-05-16T22:01:00.001+02:00</published><updated>2021-05-16T22:01:48.945+02:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="qsoas"/><category scheme="http://www.blogger.com/atom/ns#" term="science"/><category scheme="http://www.blogger.com/atom/ns#" term="tutorial"/><title type='text'>Tutorial: analyze redox inactivations/reactivations</title><content type='html'>Redox-dependent inactivations are actually rather common in the field of metalloenzymes, and electrochemistry can be an extremely powerful tool to study them, providing one can analyze the data quantitatively. The point of this point is to teach the reader how to do so using &lt;a href=&#39;https://qsoas.org&#39;&gt;QSoas&lt;/a&gt;. For more general information about redox inactivations and how to study them using electrochemical techniques, the reader is invited to read the review &lt;a href=&quot;http://dx.doi.org/10.1002/celc.201901028&quot;&gt;del Barrio and Fourmond, ChemElectroChem 2019&lt;/a&gt;.
&lt;p /&gt;
This post is a tutorial to learn the analysis of data coming from the study of the redox-dependent substrate inhibition of periplasmic nitrate reductase NapAB, which has the advantage of being relatively simple. The whole processed is discussed in &lt;a href=&#39;http://dx.doi.org/10.1016/j.bbabio.2014.05.357&#39;&gt;Jacques et al, BBA, 2014&lt;/a&gt;. What you need to know in order to follow this tutorial is the following:
&lt;ul&gt;
  &lt;li&gt;the whole inactivation/reactivation process can be modelled by a simple reversible reaction: 
    $$ \mathrm{A} \rightleftharpoons \mathrm{I} $$
    A is the active form, I the inactive form;
  &lt;/li&gt;
  &lt;li&gt;the forward rate constant is \(k_i(E)\) (dependent on potential) and the backward rate constant is \(k_a(E)\), also dependent on potential;&lt;/li&gt;
  &lt;li&gt;the experiment is done in a series of 5 steps at 3 different potentials: \(E_0\) then \(E_1\) then \(E_2\) then \(E_1\) then, finally, \(E_0\);&lt;/li&gt;
  &lt;li&gt;the enzyme is assumed to be fully active at the beginning of the first step;&lt;/li&gt;
  &lt;li&gt;a single experiment is used to obtain the values of \(k_i\) and \(k_a\) for the three potentials (although not reliably for the value at \(E_0\)&lt;/li&gt;
  &lt;li&gt;the current given by the active species depends on potential (and it is negative because the enzyme catalyzes a reduction), and the inactive species gives no current;&lt;/li&gt;
  &lt;li&gt;in addition to the reversible reaction above, there is an irreversible, potential-dependent loss.&lt;/li&gt;
&lt;/ul&gt;
You can download the data files from the &lt;a href=&quot;https://github.com/fourmond/QSoasExampleFiles/tree/data/Jacques-2014&quot;&gt;GitHub repository&lt;/a&gt;. Before fitting the data to determine the values of the rate constants at the potentials of the experiment, we will first subtract the background current, assuming that the respective contributions of faradaic and non-faradaic currents is &lt;i&gt;additive&lt;/i&gt;. Start QSoas, go to the directory where you saved the files, and load both the data file and the blank file thus:
&lt;pre&gt;QSoas&gt; cd
QSoas&gt; load 27.oxw
QSoas&gt; load 27-blanc.oxw
QSoas&gt; S 1 0
&lt;/pre&gt;
(after the first command, you have to manually select the directory in which you downloaded the data files). The &lt;code&gt;S 1 0&lt;/code&gt; command just subtracts the dataset 1 (the first loaded) from the dataset 0 (the last loaded), see more &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference#cmd-subtract&quot;&gt;there&lt;/a&gt;. &lt;q&gt;blanc&lt;/q&gt; is the French for &lt;q&gt;blank&lt;/q&gt;...
&lt;p /&gt;
Then, we remove a bit of the beginning and the end of the data, corresponding to one half of the steps at \(E_0\), which we don&#39;t exploit much here (they are essentially only used to make sure that the irreversible loss is taken care of properly). This is done using &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference#cmd-strip-if&quot;&gt;strip-if&lt;/a&gt;:
&lt;pre&gt;QSoas&gt; strip-if x&amp;lt;30||x&amp;gt;300
&lt;/pre&gt;
Then, we can fit ! The fit used is called &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference#cmd-fit-linear-kinetic-system&quot;&gt;fit-linear-kinetic-system&lt;/a&gt;, which is used to fit kinetic models with only linear reactions (like here) and steps which change the values of the &lt;em&gt;rate constants&lt;/em&gt; but do not instantly change the &lt;em&gt;concentrations&lt;/em&gt;. The specific command to fit the data is:
&lt;pre&gt;QSoas&gt; fit-linear-kinetic-system /species=2 /steps=0,1,2,1,0
&lt;/pre&gt;
The &lt;code&gt;/species=2&lt;/code&gt; indicates that there are two species (A and I). The &lt;code&gt;/steps=0,1,2,1,0&lt;/code&gt; indicates that there are 5 steps, with three different conditions (0 to 2) in order 0,1,2,1,0. This fits needs a bit of setup before getting started. The species are numbered, 1 and 2, and the conditions (potentials) are indicated by &lt;code&gt;#0&lt;/code&gt;, &lt;code&gt;#1&lt;/code&gt; and &lt;code&gt;#2&lt;/code&gt; suffixes. 
&lt;ul&gt;
  &lt;li&gt;The &lt;code&gt;I_1&lt;/code&gt; and &lt;code&gt;I_2&lt;/code&gt; are the currents for the species 1 and 2, so something for 1 (active form) and 0 for 2 (inactive form).
Moreover, the parameters &lt;code&gt;I_2_#0&lt;/code&gt; (and &lt;code&gt;_#1&lt;/code&gt;, &lt;code&gt;_#2&lt;/code&gt;) should be fixed and not free (since we don&#39;t need to adjust a current for the inactive form).&lt;/li&gt;
  &lt;li&gt;The &lt;code&gt;k_11&lt;/code&gt; and &lt;code&gt;k_22&lt;/code&gt; correspond to species-specific irreversible loss. It is generally best to leave them fixed to 0.&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;k_12&lt;/code&gt; is the formation of 2 (I) from 1 (A), and &lt;code&gt;k_21&lt;/code&gt; is the formation of A from I. Their values will be determined for the three conditions. The default values should work here.&lt;/li&gt;
  &lt;li&gt;The &lt;code&gt;k_loss&lt;/code&gt; parameters are the rates of irreversible loss that apply indiscriminately on all species (unlike &lt;code&gt;k_11&lt;/code&gt; and &lt;code&gt;k_22&lt;/code&gt;). They are adjusted and ther default values should work too.&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;alpha_1_0&lt;/code&gt; and &lt;code&gt;alpha_2_0&lt;/code&gt; are the initial concentrations of species 1 and 2, so they should be fixed to 1 and 0.&lt;/li&gt;
  &lt;li&gt;Last, the &lt;code&gt;xstart_a&lt;/code&gt; and (&lt;code&gt;_b&lt;/code&gt;, &lt;code&gt;_c&lt;/code&gt;, &lt;code&gt;_d&lt;/code&gt; and &lt;code&gt;_e&lt;/code&gt;) correspond to the starting times for the steps, here, 0, 60, 120, 210 and 270.&lt;/li&gt;
&lt;/ul&gt;
For the sake of simplicity, you can also simply load the &lt;code&gt;starting-parameters.params&lt;/code&gt; parameters to have all setup the correct way. Then, just hit &lt;q&gt;Fit&lt;/q&gt;, enjoy this moment when QSoas works and you don&#39;t have to... The screen should now look like this:
&lt;div class=&quot;separator&quot; style=&quot;clear: both;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjrHFmwKs6XswLObLH10RQ387z5q3V0kowZBydLVRaxmeXgK18wHI70zglaU0jyRszM4y15M3yYpv4EIENREqKFvqMbj95l0c-zLMAzKs89GD2hqM3X4IfXtfqNBOyjBFmGargLFHC1SWE/s1809/Fit-Jacques.png&quot; style=&quot;display: block; padding: 1em 0; text-align: center; &quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; width=&quot;400&quot; data-original-height=&quot;1200&quot; data-original-width=&quot;1809&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjrHFmwKs6XswLObLH10RQ387z5q3V0kowZBydLVRaxmeXgK18wHI70zglaU0jyRszM4y15M3yYpv4EIENREqKFvqMbj95l0c-zLMAzKs89GD2hqM3X4IfXtfqNBOyjBFmGargLFHC1SWE/s400/Fit-Jacques.png&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
Now, it&#39;s done ! The fit is actually pretty good, and you can read the values of the inactivation and reactivation rate constants from the fit parameters.
&lt;p /&gt;
You can train also on the &lt;code&gt;21.oxw&lt;/code&gt; and &lt;code&gt;21-blanc.oxw&lt;/code&gt; files. Usually, re-loading the best fit parameters from other potentials as starting parameters work really well. Gathering the results of several fits into a real curve of rate constants as a function of potentials is left as an exercise for the reader (or maybe a later post), although you may find these &lt;a href=&quot;/search/label/meta-data&quot;&gt;series of posts&lt;/a&gt; useful in this context !
&lt;br /&gt;
&lt;h4&gt;About QSoas&lt;/h4&gt;
&lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; is a powerful open source data analysis program that focuses on flexibility and powerful fitting capacities. It is released under the &lt;a href=&quot;https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html&quot;&gt;GNU General Public License&lt;/a&gt;. It is described in &lt;a href=&quot;http://pubs.acs.org/doi/abs/10.1021/acs.analchem.6b00224&quot;&gt;Fourmond, Anal. Chem., 2016, 88 (10), pp 5050&amp;#8211;5052&lt;/a&gt;. Current version is &lt;strong&gt;3.0&lt;/strong&gt;. You can download its source code &lt;a href=&quot;http://qsoas.org/downloads/&quot;&gt;there&lt;/a&gt; (or clone from the &lt;a href=&quot;https://github.com/fourmond/QSoas&quot;&gt;GitHub repository&lt;/a&gt;) and compile it yourself, or buy precompiled versions for MacOS and Windows &lt;a href=&quot;https://evalorix.com/en/shop/science-and-engineering-products-and-tools/software-and-apps/qsoas-software/&quot;&gt;there&lt;/a&gt;.</content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/150332953874943682/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/150332953874943682' title='0 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/150332953874943682'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/150332953874943682'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2021/05/tutorial-analyze-redox.html' title='Tutorial: analyze redox inactivations/reactivations'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjrHFmwKs6XswLObLH10RQ387z5q3V0kowZBydLVRaxmeXgK18wHI70zglaU0jyRszM4y15M3yYpv4EIENREqKFvqMbj95l0c-zLMAzKs89GD2hqM3X4IfXtfqNBOyjBFmGargLFHC1SWE/s72-c/Fit-Jacques.png" height="72" width="72"/><thr:total>0</thr:total></entry><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-821773102712604063</id><published>2021-03-11T09:31:00.000+01:00</published><updated>2021-03-11T09:31:13.873+01:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="qsoas"/><category scheme="http://www.blogger.com/atom/ns#" term="summary"/><category scheme="http://www.blogger.com/atom/ns#" term="tips-and-tricks"/><title type='text'>All tips and tricks about QSoas</title><content type='html'>&lt;div class=&quot;separator&quot; style=&quot;clear: both;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiheNKIDuRyhT7yb4Tv8h-rnF2irNp72sqjJbaUf4dr9cM6d4JlrzaS5qwxuUnhyphenhyphenGFW3otAyv1u_c6Wja6VN_DUoFs3RCzf7ki7HPhz-0N70vGUL_FK-XVHitADCK-kx_2Jqd4B4_CH9Ck/s512/QSoas-logo.png&quot; style=&quot;display: block; padding: 1em 0; text-align: center; clear: right; float: right;&quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; width=&quot;200&quot; data-original-height=&quot;512&quot; data-original-width=&quot;512&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiheNKIDuRyhT7yb4Tv8h-rnF2irNp72sqjJbaUf4dr9cM6d4JlrzaS5qwxuUnhyphenhyphenGFW3otAyv1u_c6Wja6VN_DUoFs3RCzf7ki7HPhz-0N70vGUL_FK-XVHitADCK-kx_2Jqd4B4_CH9Ck/s200/QSoas-logo.png&quot;/&gt;&lt;/a&gt;&lt;/div&gt;I&#39;ve decided to post regular summaries of all the articles written here about QSoas; this is the first post of this kind. All the articles related to QSoas can be found &lt;a href=&quot;https://vince-debian.blogspot.com/search/label/qsoas&quot;&gt;here&lt;/a&gt; also.
&lt;p /&gt;
The articles written here can be separated into several categories.

&lt;h4&gt;Tutorials to analyze real data&lt;/h4&gt;
These are posts about how to reproduce the data analysis of published articles, including links to the original data so you can fully reproduce our results.

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://vince-debian.blogspot.com/2020/09/tutorial-analyze-km-data-of-codhs.html&quot;&gt;how to determine the \(K_m\)&lt;/a&gt; of enzymes working with gaseous substrates with electrochemistry, as in &lt;a href=&quot;https://dx.doi.org/10.1002/anie.201709261&quot;&gt;Domnik et al, &lt;i&gt;Angewandte Chemie&lt;/i&gt; 2017&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
These posts all have the label &lt;a href=&quot;https://vince-debian.blogspot.com/search/label/tutorial&quot;&gt;tutorial&lt;/a&gt;.&lt;p /&gt;

&lt;h4&gt;All about fits&lt;/h4&gt;

QSoas has a particularly powerful interface for non-linear least square minimisations (&lt;q&gt;fits&lt;/q&gt;):
&lt;ul&gt;
  &lt;li&gt;See &lt;a href=&quot;https://vince-debian.blogspot.com/2016/01/qsoas-tips-and-tricks-using-fit.html&quot;&gt;here&lt;/a&gt; to learn how you can take advantage of the fit interface to explore easily how a parameter influences the shape of a function.&lt;/li&gt;
  &lt;li&gt;See &lt;a href=&quot;https://vince-debian.blogspot.com/2020/10/qsoas-tips-and-tricks-generating-smooth.html&quot;&gt;here&lt;/a&gt; how you can produce smooth curves for a fit on &lt;q&gt;jaggy&lt;/q&gt; data.
&lt;/ul&gt;

&lt;h4&gt;Meta-data&lt;/h4&gt;

Meta data describe the conditions in which experiments were performed. 
&lt;ul&gt;
  &lt;li&gt;You can see &lt;a href=&quot;https://vince-debian.blogspot.com/2020/11/qsoas-tips-and-tricks-using-meta-data.html&quot;&gt;here&lt;/a&gt; how to use them in data analysis, to plot for instance peak position as a function of meta-data;&lt;/li&gt;
  &lt;li&gt;You can see &lt;a href=&quot;https://vince-debian.blogspot.com/2021/02/qsoas-tips-and-tricks-permanently.html&quot;&gt;here&lt;/a&gt; how to permanently store meta-data for files.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4&gt;Quiz and their solutions&lt;/h4&gt;
Quiz are small problems that take some skill to solve; they can teach you a lot about how to work with QSoas.
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://vince-debian.blogspot.com/2020/10/qsoas-quiz-1-averaging-spectra.html&quot;&gt;Quiz #1&lt;/a&gt;: computing the standard deviation of spectra, along with the &lt;a href=&quot;https://vince-debian.blogspot.com/2020/11/solution-for-qsoas-quiz-1-averaging.html&quot;&gt;solution&lt;/a&gt;. This quiz can teach you a lot about combining data from different datasets and manipulating data row-by-row.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4&gt;Other tips and tricks&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;See &lt;a href=&quot;https://vince-debian.blogspot.com/2016/11/finding-zeros-of-data-using-qsoas.html&quot;&gt;here&lt;/a&gt; how to find the 0s of experimental data.&lt;/li&gt;
  &lt;li&gt;See &lt;a href=&quot;https://vince-debian.blogspot.com/2016/02/qsoas-tips-and-tricks-better-baselines.html&quot;&gt;here&lt;/a&gt; how one can save just the selected points in a baseline, and reuse them.&lt;/li&gt;
  &lt;li&gt;See &lt;a href=&quot;https://vince-debian.blogspot.com/2017/02/extended-dataset-generation.html&quot;&gt;here&lt;/a&gt; to learn how to generate many datasets in one go from a mathematical formula.&lt;/li&gt;
  &lt;li&gt;See &lt;a href=&quot;https://vince-debian.blogspot.com/2017/10/define-function-with-inline-ruby-code.html&quot;&gt;here&lt;/a&gt; how to define a custom mathematical function using Ruby.&lt;/li&gt;
  &lt;li&gt;See &lt;a href=&quot;https://vince-debian.blogspot.com/2021/01/taking-advantage-of-ruby-in-qsoas.html&quot;&gt;here&lt;/a&gt; how one can take advantage of Ruby, the underlying programming language to sum columns, extend the values of columns with lots of missing values and rename datasets using a pattern.&lt;/li&gt;
  &lt;li&gt;See &lt;a href=&quot;https://vince-debian.blogspot.com/2017/05/run-qsoas-complely-non-interactively.html&quot;&gt;here&lt;/a&gt; how you can use QSoas without starting the graphical interface !&lt;/li&gt;
&lt;/ul&gt;

&lt;h4&gt;Release annoucements&lt;/h4&gt;
These have generally lot of general information about the possibilities in QSoas:
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://vince-debian.blogspot.com/2015/12/announcing-qsoas-powerful-yfx-data.html&quot;&gt;initial release&lt;/a&gt;;&lt;/li&gt;
  &lt;li&gt;version &lt;a href=&quot;https://vince-debian.blogspot.com/2016/07/qsoas-version-20-is-out-qsoas-paper.html&quot;&gt;2.0&lt;/a&gt;;&lt;/li&gt;
  &lt;li&gt;version &lt;a href=&quot;https://vince-debian.blogspot.com/2017/01/version-21-of-qsoas-is-out.html&quot;&gt;2.1&lt;/a&gt;;&lt;/li&gt;
  &lt;li&gt;version &lt;a href=&quot;https://vince-debian.blogspot.com/2018/03/release-22-of-qsoas.html&quot;&gt;2.2&lt;/a&gt;;&lt;/li&gt;
  &lt;li&gt;and, finally, version &lt;a href=&quot;https://vince-debian.blogspot.com/2020/12/version-30-of-qsoas-is-out.html&quot;&gt;3.0&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;br/&gt;
&lt;h4&gt;About QSoas&lt;/h4&gt;
&lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; is a powerful open source data analysis program that focuses on flexibility and powerful fitting capacities. It is released under the &lt;a href=&quot;https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html&quot;&gt;GNU General Public License&lt;/a&gt;. It is described in &lt;a href=&quot;http://pubs.acs.org/doi/abs/10.1021/acs.analchem.6b00224&quot;&gt;Fourmond, Anal. Chem., 2016, 88 (10), pp 5050&amp;#8211;5052&lt;/a&gt;. Current version is &lt;strong&gt;3.0&lt;/strong&gt;. You can download its source code &lt;a href=&quot;http://qsoas.org/downloads/&quot;&gt;there&lt;/a&gt; (or clone from the &lt;a href=&quot;https://github.com/fourmond/QSoas&quot;&gt;GitHub repository&lt;/a&gt;) and compile it yourself, or buy precompiled versions for MacOS and Windows &lt;a href=&quot;https://evalorix.com/en/shop/science-and-engineering-products-and-tools/software-and-apps/qsoas-software/&quot;&gt;there&lt;/a&gt;.</content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/821773102712604063/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/821773102712604063' title='2 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/821773102712604063'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/821773102712604063'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2021/03/all-tips-and-tricks-about-qsoas.html' title='All tips and tricks about QSoas'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiheNKIDuRyhT7yb4Tv8h-rnF2irNp72sqjJbaUf4dr9cM6d4JlrzaS5qwxuUnhyphenhyphenGFW3otAyv1u_c6Wja6VN_DUoFs3RCzf7ki7HPhz-0N70vGUL_FK-XVHitADCK-kx_2Jqd4B4_CH9Ck/s72-c/QSoas-logo.png" height="72" width="72"/><thr:total>2</thr:total></entry><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-2849522867513999101</id><published>2021-02-16T11:51:00.000+01:00</published><updated>2021-02-16T11:51:26.170+01:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="meta-data"/><category scheme="http://www.blogger.com/atom/ns#" term="qsoas"/><category scheme="http://www.blogger.com/atom/ns#" term="science"/><category scheme="http://www.blogger.com/atom/ns#" term="tips-and-tricks"/><title type='text'>QSoas tips and tricks: permanently storing meta-data</title><content type='html'>&lt;div class=&quot;separator&quot; style=&quot;clear: both;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiheNKIDuRyhT7yb4Tv8h-rnF2irNp72sqjJbaUf4dr9cM6d4JlrzaS5qwxuUnhyphenhyphenGFW3otAyv1u_c6Wja6VN_DUoFs3RCzf7ki7HPhz-0N70vGUL_FK-XVHitADCK-kx_2Jqd4B4_CH9Ck/s512/QSoas-logo.png&quot; style=&quot;display: block; padding: 1em 0; text-align: center; clear: right; float: right;&quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; width=&quot;200&quot; data-original-height=&quot;512&quot; data-original-width=&quot;512&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiheNKIDuRyhT7yb4Tv8h-rnF2irNp72sqjJbaUf4dr9cM6d4JlrzaS5qwxuUnhyphenhyphenGFW3otAyv1u_c6Wja6VN_DUoFs3RCzf7ki7HPhz-0N70vGUL_FK-XVHitADCK-kx_2Jqd4B4_CH9Ck/s200/QSoas-logo.png&quot;/&gt;&lt;/a&gt;&lt;/div&gt;It is one thing to acquire and process data, but the data themselves are most often useless without the &lt;i&gt;context&lt;/i&gt;, the conditions in which the experiments were made. These additional informations can be called &lt;q&gt;meta-data&lt;/q&gt;. In a &lt;a href=&quot;/2020/11/qsoas-tips-and-tricks-using-meta-data.html&quot;&gt;previous post&lt;/a&gt;, we have already described how one can set meta-data to data that are already loaded, and how one can make use of them.
&lt;p /&gt;
QSoas is already able to figure out some meta-data in the case of electrochemical data, most notably in the case of files acquired by GPES, ECLab or CHI potentiostats. However, only a small number of constructors are supported as of now&lt;sup&gt;&lt;a href=&quot;#meta-fn-1&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt;, and there are a number of experimental details that the software is never going to be able to figure out for you, such as the pH, the sample, what you were doing...
&lt;p/&gt;
The new version of QSoas provides a means to permanently store meta-data for experimental data files:
&lt;pre&gt;QSoas&gt; record-meta pH 7 file.dat&lt;/pre&gt;
This command uses &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-record-meta&quot;&gt;record-meta&lt;/a&gt; to permanently store the information &lt;q&gt;pH = 7&lt;/q&gt; for the file &lt;code&gt;file.dat&lt;/code&gt;. Any time QSoas loads the file again, either today or in one year, the meta-data will contain the value 7 for the field pH. Behind the scenes, QSoas creates a single small file, &lt;code&gt;file.dat.qsm&lt;/code&gt;, in which the meta-data are stored (in the form of a JSON dictionnary).
&lt;p/&gt;
You can set the same meta-data to many files in one go, using wildcards (see &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-load&quot;&gt;load&lt;/a&gt; for more information). For instance, to set the pH=7 meta-data to all the &lt;code&gt;.dat&lt;/code&gt; files in the current directory, you can use:
&lt;pre&gt;QSoas&gt; record-meta pH 7 *.dat&lt;/pre&gt;
You can only set one meta-data for each call to &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-record-meta&quot;&gt;record-meta&lt;/a&gt;, but you can use it as many times as you like.
&lt;p/&gt;
Finally, you can use the &lt;code&gt;/for-which&lt;/code&gt; option to &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-load&quot;&gt;load&lt;/a&gt; or &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-browse&quot;&gt;browse&lt;/a&gt; to select only the files which have the meta you need:
&lt;pre&gt;QSoas&gt; browse /for-which=$meta.pH&amp;lt;=7&lt;/pre&gt;
This command browses the files in the current directory, showing only the ones that have a pH meta-data which is 7 or below.
&lt;p id=&#39;meta-fn-1&#39;&gt;[1] I&#39;m always ready to implement the parsing of other file formats that could be useful for you. If you need parsing of special files, please contact me, sending the given files and the meta-data you&#39;d expect to find in those.&lt;/p&gt;
&lt;p/&gt;&lt;p/&gt;
&lt;h4&gt;About QSoas&lt;/h4&gt;
&lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; is a powerful open source data analysis program that focuses on flexibility and powerful fitting capacities. It is released under the &lt;a href=&quot;https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html&quot;&gt;GNU General Public License&lt;/a&gt;. It is described in &lt;a href=&quot;http://pubs.acs.org/doi/abs/10.1021/acs.analchem.6b00224&quot;&gt;Fourmond, Anal. Chem., 2016, 88 (10), pp 5050&amp;#8211;5052&lt;/a&gt;. Current version is &lt;strong&gt;3.0&lt;/strong&gt;. You can download its source code &lt;a href=&quot;http://qsoas.org/downloads/&quot;&gt;there&lt;/a&gt; (or clone from the &lt;a href=&quot;https://github.com/fourmond/QSoas&quot;&gt;GitHub repository&lt;/a&gt;) and compile it yourself, or buy precompiled versions for MacOS and Windows &lt;a href=&quot;https://evalorix.com/en/shop/science-and-engineering-products-and-tools/software-and-apps/qsoas-software/&quot;&gt;there&lt;/a&gt;.
</content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/2849522867513999101/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/2849522867513999101' title='3 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/2849522867513999101'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/2849522867513999101'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2021/02/qsoas-tips-and-tricks-permanently.html' title='QSoas tips and tricks: permanently storing meta-data'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiheNKIDuRyhT7yb4Tv8h-rnF2irNp72sqjJbaUf4dr9cM6d4JlrzaS5qwxuUnhyphenhyphenGFW3otAyv1u_c6Wja6VN_DUoFs3RCzf7ki7HPhz-0N70vGUL_FK-XVHitADCK-kx_2Jqd4B4_CH9Ck/s72-c/QSoas-logo.png" height="72" width="72"/><thr:total>3</thr:total></entry><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-8094496144369645131</id><published>2021-01-13T15:45:00.001+01:00</published><updated>2021-01-13T15:45:34.827+01:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="qsoas"/><category scheme="http://www.blogger.com/atom/ns#" term="ruby"/><category scheme="http://www.blogger.com/atom/ns#" term="science"/><category scheme="http://www.blogger.com/atom/ns#" term="tips-and-tricks"/><title type='text'>Taking advantage of Ruby in QSoas</title><content type='html'>First of all, let me all wish you a happy new year, with all my wishes of health and succes. I sincerely hope this year will be simpler for most people as last year !
&lt;p/&gt;
For the first post of the year, I wanted to show you how to take advantage of &lt;a href=&quot;https://www.ruby-lang.org/&quot;&gt;Ruby&lt;/a&gt;, the programming language embedded in &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/&quot;&gt;QSoas&lt;/a&gt;, to make various things, like:
&lt;ul&gt;
  &lt;li&gt;creating a column with the sum of Y values;&lt;/li&gt;
  &lt;li&gt;extending values that are present only in a few lines;&lt;/li&gt;
  &lt;li&gt;renaming datasets using a pattern.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;summing-values&quot;&gt;Summing the values in a column&lt;/h4&gt;
When using commands that take formulas (Ruby code), like &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-apply-formula&quot;&gt;apply-formula&lt;/a&gt;, the code is run for every single point, for which all the values are updated. In particulier, the state of the previous point is not known. However, it is possible to store values in what is called &lt;a href=&quot;https://ruby-doc.org/docs/ruby-doc-bundle/UsersGuide/rg/globalvars.html&quot;&gt;global variables&lt;/a&gt;, whose name start with an &lt;code&gt;$&lt;/code&gt; sign. Using this, we can keep track of the previous values. For instance, to create a new column with the sum of the &lt;code&gt;y&lt;/code&gt; values, one can use the following approach:
&lt;pre&gt;
QSoas&gt; eval $sum=0
QSoas&gt; apply-formula /extra-columns=1 $sum+=y;y2=$sum
&lt;/pre&gt;
The first line initializes the variable to 0, before we start summing, and the code in the second line is run for each dataset row, in order. For the first row, for instance, &lt;code&gt;$sum&lt;/code&gt; is initially 0 (from the &lt;code&gt;eval&lt;/code&gt; line); after the execution of the code, it is now the first value of &lt;code&gt;y&lt;/code&gt;. After the second row, the second value of &lt;code&gt;y&lt;/code&gt; is added, and so on. The image below shows the resulting &lt;code&gt;y2&lt;/code&gt; when used on:
&lt;pre&gt;
QSoas&gt; generate-dataset -1 1 x
&lt;/pre&gt;
&lt;div class=&quot;separator&quot; style=&quot;clear: both;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjcwGSaeN3gasSDhHcX99Cu0o319EWMc3m31T8-rzQpaLkeC_Y19db0QhMO5Nsq8SHwTi8oEOy6nO7Enik5SzN8oE0p_SwLvieQdimasCcdEjq_rVZWyMCYZO4oJbhDVGCveCdq03T2_1M/s1388/QSoas-sum.png&quot; style=&quot;display: block; padding: 1em 0; text-align: center; &quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; width=&quot;400&quot; data-original-height=&quot;947&quot; data-original-width=&quot;1388&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjcwGSaeN3gasSDhHcX99Cu0o319EWMc3m31T8-rzQpaLkeC_Y19db0QhMO5Nsq8SHwTi8oEOy6nO7Enik5SzN8oE0p_SwLvieQdimasCcdEjq_rVZWyMCYZO4oJbhDVGCveCdq03T2_1M/s400/QSoas-sum.png&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;br&gt;
&lt;br&gt;
&lt;h4 id=&quot;extending-values&quot;&gt;Extending values in a column&lt;/h4&gt;
Another use of the global variables is to add &quot;missing&quot; data. For instance, let&#39;s imagine that a files given the variation of current over time as the potential is changed, but the potential is only changed stepwise and only indicated when it changes:
&lt;pre&gt;
## time	current	potential
0	0.1	0.5
1	0.2
2	0.3
3	0.2
4	1.2	0.6
5	1.3
...
&lt;/pre&gt;
If you need to have the values everywhere, for instance if you need to &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-split-on-values&quot;&gt;split on their values&lt;/a&gt;, you could also use a global variable, taking advantage of the fact that missing values are represented by QSoas using &quot;Not A Number&quot; values, which can be detected using the Ruby function &lt;a href=&quot;https://ruby-doc.org/core-2.5.0/Float.html#method-i-nan-3F&quot;&gt;&lt;code&gt;nan?&lt;/code&gt;&lt;/a&gt;:
&lt;pre&gt;
QSoas&gt; apply-formula &quot;if y2.nan?; then y2=$value; else $value=y2;end&quot;
&lt;/pre&gt;
Note the need of quotes because there are spaces in the ruby code. If the value of &lt;code&gt;y2&lt;/code&gt; is NaN, that is it is missing, then it is taken from the global variable &lt;code&gt;$value&lt;/code&gt; else &lt;code&gt;$value&lt;/code&gt; is set the current value of &lt;code&gt;y2&lt;/code&gt;. Hence, the values are propagated down:
&lt;pre&gt;
## time	current	potential
0	0.1	0.5
1	0.2	0.5
2	0.3	0.5
3	0.2	0.5
4	1.2	0.6
5	1.3	0.6
...
&lt;/pre&gt;
Of course, this doesn&#39;t work if the first value of &lt;code&gt;y2&lt;/code&gt; is missing.
&lt;br&gt;&lt;br&gt;
&lt;h4&gt;Renaming using a pattern&lt;/h4&gt;
The command &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-save-datasets&quot;&gt;save-datasets&lt;/a&gt; can be used to save a whole series of datasets to the disk. It can also rename them on the fly, and, using the &lt;code&gt;/mode=rename&lt;/code&gt; option, does only the renaming part, without saving. You can make full use of &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#meta-data&quot;&gt;meta-data&lt;/a&gt; (see also a first post &lt;a href=&quot;https://vince-debian.blogspot.com/2020/11/qsoas-tips-and-tricks-using-meta-data.html&quot;&gt;here&lt;/a&gt;)for renaming. The full power is unlocked using the &lt;code&gt;/expression=&lt;/code&gt; option. For instance, for renaming the last 5 datasets (so numbers 0 to 4) using a scheme based on the value of their &lt;code&gt;pH&lt;/code&gt; meta-data, you can use the following code:
&lt;pre&gt;
QSoas&gt; save-datasets /mode=rename /expression=&#39;&quot;dataset-#{$meta.pH}&quot;&#39; 0..4
&lt;/pre&gt;
The double quotes are cumbersome but necessary, since the outer quotes (&lt;code&gt;&#39;&lt;/code&gt;) prevent the inner ones (&lt;code&gt;&quot;&lt;/code&gt;) to be removed and the inner quotes are here to indicate to Ruby that we are dealing with text. The bit inside &lt;code&gt;#{...}&lt;/code&gt; is interpreted by Ruby as Ruby code; here it is &lt;code&gt;$meta.pH&lt;/code&gt;, the value of the &quot;pH&quot; meta-data. Finally the &lt;code&gt;0..4&lt;/code&gt; specifies the datasets to work with. So theses datasets will change name to become &lt;code&gt;dataset-7&lt;/code&gt; for pH 7, etc...&lt;br&gt;&lt;br&gt;

&lt;h4&gt;About QSoas&lt;/h4&gt;
&lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; is a powerful open source data analysis program that focuses on flexibility and powerful fitting capacities. It is released under the &lt;a href=&quot;https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html&quot;&gt;GNU General Public License&lt;/a&gt;. It is described in &lt;a href=&quot;http://pubs.acs.org/doi/abs/10.1021/acs.analchem.6b00224&quot;&gt;Fourmond, Anal. Chem., 2016, 88 (10), pp 5050&amp;#8211;5052&lt;/a&gt;. Current version is &lt;strong&gt;3.0&lt;/strong&gt;. You can download its source code &lt;a href=&quot;http://qsoas.org/downloads/&quot;&gt;there&lt;/a&gt; (or clone from the &lt;a href=&quot;https://github.com/fourmond/QSoas&quot;&gt;GitHub repository&lt;/a&gt;) and compile it yourself, or buy precompiled versions for MacOS and Windows &lt;a href=&quot;https://evalorix.com/en/shop/science-and-engineering-products-and-tools/software-and-apps/qsoas-software/&quot;&gt;there&lt;/a&gt;.

</content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/8094496144369645131/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/8094496144369645131' title='0 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/8094496144369645131'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/8094496144369645131'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2021/01/taking-advantage-of-ruby-in-qsoas.html' title='Taking advantage of Ruby in QSoas'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjcwGSaeN3gasSDhHcX99Cu0o319EWMc3m31T8-rzQpaLkeC_Y19db0QhMO5Nsq8SHwTi8oEOy6nO7Enik5SzN8oE0p_SwLvieQdimasCcdEjq_rVZWyMCYZO4oJbhDVGCveCdq03T2_1M/s72-c/QSoas-sum.png" height="72" width="72"/><thr:total>0</thr:total></entry><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-7438750568684964469</id><published>2020-12-14T16:48:00.001+01:00</published><updated>2020-12-14T17:38:45.891+01:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="qsoas"/><category scheme="http://www.blogger.com/atom/ns#" term="science"/><title type='text'>Version 3.0 of QSoas is out</title><content type='html'>After almost two years of development, version 3.0 of QSoas is finally out ! It brings in a number of new features.

&lt;p/&gt;&lt;p/&gt;

&lt;h4&gt;An &lt;q&gt;expert&lt;/q&gt; mode for fitting&lt;/h4&gt;

Undoubtedly the most important feature in the new version is a complete upgrade of the fit system, which now features an &lt;q&gt;expert&lt;/q&gt; mode, turned on by using the &lt;code&gt;/expert=true&lt;/code&gt; option with the fit commands. The expert mode features a command prompt that looks like the normal command prompt, in which it is possible:
&lt;ul&gt;
  &lt;li&gt;to fix/unfix, set, reset and load ans save parameters;&lt;/li&gt;
  &lt;li&gt;export parameters or computed datasets;&lt;/li&gt;
  &lt;li&gt;launch the fit;&lt;/li&gt;
  &lt;li&gt;select fit engines and configure them;&lt;/li&gt;
  &lt;li&gt;list of all the fits that were run in the session with their starting and finishing parameters (see picture), and reuse them;&lt;/li&gt;
  &lt;li&gt;run scripts;&lt;/li&gt;
  &lt;li&gt;fit data completely non-interactively;&lt;/li&gt;
  &lt;li&gt;and, last but not least, perform &lt;q&gt;parameter space exploration&lt;/q&gt;, which consists in  running (automatically) a number of fits with different (random) starting parameters to maximize the chances of finding out the best parameters for the fit, avoiding local minima.&lt;/li&gt;
&lt;/ul&gt;
The latter feature is very important when running fits with many parameters. In that case, there are a number of local minima, and it is necessary to try a number of different starting parameters to really find the best parameters. The new parameter space exploration feature makes it much easier than before, with an interface that allows easily finding the best parameters tried so far and reuse them.
&lt;div class=&quot;separator&quot; style=&quot;clear: both;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj-U78tOdznI9foML8nNubuPvjgAFqzNy0hPaeIBpYpKjjy8ZWNbIrjGZmsKoN0q6LmbtNJSG3NFkgh3E9LF4KI-wzv1VKvxPO3bEili_pfNlS5xu_TT8o872TOksO6mJ_ZExj3j_cXbWA/s2048/QSoas-3.0-exploration.png&quot; style=&quot;display: block; padding: 1em 0; text-align: center; &quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; width=&quot;400&quot; data-original-height=&quot;1344&quot; data-original-width=&quot;2048&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj-U78tOdznI9foML8nNubuPvjgAFqzNy0hPaeIBpYpKjjy8ZWNbIrjGZmsKoN0q6LmbtNJSG3NFkgh3E9LF4KI-wzv1VKvxPO3bEili_pfNlS5xu_TT8o872TOksO6mJ_ZExj3j_cXbWA/s400/QSoas-3.0-exploration.png&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p/&gt;&lt;p/&gt;
&lt;h4&gt;A new documentation system&lt;/h4&gt;

Another very important update is the inclusion of a new, offline, documentation system. The documentation features browsing via table of contents, a command index and text search. It also features the possibility to copy commands from the help to the command prompt, or even run them directly. To top it all, it comes with a series of startup tips that might teach you a thing or two about QSoas (try hitting &lt;q&gt;Show random&lt;/q&gt; to learn new tricks !).

&lt;div class=&quot;separator&quot; style=&quot;clear: both;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgxaBxg69QzBux-ejzN-XfeyEbzRGiynDUzQZvqeMfML37ChjSaAGcfLrYZr_hhuvn9HwN19OinouJT66ylN2udqeJT30iPkV2Xw2VHS-HNVC2nxRaazl130rjNhT9PJ0Xno329n7AekZg/s1849/QSoas-3.0-help.png&quot; style=&quot;display: block; padding: 1em 0; text-align: center; &quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; width=&quot;400&quot; data-original-height=&quot;1439&quot; data-original-width=&quot;1849&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgxaBxg69QzBux-ejzN-XfeyEbzRGiynDUzQZvqeMfML37ChjSaAGcfLrYZr_hhuvn9HwN19OinouJT66ylN2udqeJT30iPkV2Xw2VHS-HNVC2nxRaazl130rjNhT9PJ0Xno329n7AekZg/s400/QSoas-3.0-help.png&quot;/&gt;&lt;/a&gt;&lt;/div&gt;

&lt;p/&gt;&lt;p/&gt;
&lt;h4&gt;Many other features&lt;/h4&gt;

For the full list of changes, please see the &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/changes/#v3p0&quot;&gt;changelog&lt;/a&gt;. Apart from the changes described above, these are my favorites:
&lt;div class=&quot;separator&quot; style=&quot;clear: both;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhaG9P0cEDqFyOVZFt1BgX4CmX3R-kRtCAIBHwegTYivH3DNNatwcICvEEbXkMoZRlZ5I3I70k648i65hl8wnWHU3i6Z4k7aNEW3QNOGGnsWSk99ILXIYXDfiFiQUgPxzZbUGCFxE1vu3Q/s512/QSoas-logo.png&quot; style=&quot;display: block; padding: 1em 0; text-align: center; clear: right; float: right;&quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; width=&quot;160&quot; data-original-height=&quot;512&quot; data-original-width=&quot;512&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhaG9P0cEDqFyOVZFt1BgX4CmX3R-kRtCAIBHwegTYivH3DNNatwcICvEEbXkMoZRlZ5I3I70k648i65hl8wnWHU3i6Z4k7aNEW3QNOGGnsWSk99ILXIYXDfiFiQUgPxzZbUGCFxE1vu3Q/s320/QSoas-logo.png&quot;/&gt;&lt;/a&gt;&lt;/div&gt;&lt;ul&gt;
  &lt;li&gt;running the command from the menu now gives a dialog box for selecting all the arguments and options, which is very useful to discover the possibilities of the various commands;&lt;/li&gt;
  &lt;li&gt;features that make the statistics and meta-data much easier to use with commands like &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-apply-formula&quot;&gt;&lt;code&gt;apply-formula&lt;/code&gt;&lt;/a&gt;, like automatic code completion;&lt;/li&gt;
  &lt;li&gt;a new system for permanently storing meta-data using &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-record-meta&quot;&gt;&lt;code&gt;record-meta&lt;/code&gt;&lt;/a&gt;;&lt;/li&gt;
  &lt;li&gt;a new fit for &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-fit-implicit&quot;&gt;fitting implicit equations&lt;/a&gt;, in which one cannot express \(y = f(x)\), but only \(f(x,y)=0\);&lt;/li&gt;
  &lt;li&gt;and, of course, a brand shiny new logo by Marta Meneghello !&lt;/li&gt;
&lt;/ul&gt;

&lt;p /&gt;

To get the new version, you can just download the source code from the &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/downloads/&quot;&gt;downloads page&lt;/a&gt;, where you can also purchase precompiled versions for Windows and MacOS. You can also clone the source from the &lt;a href=&quot;https://github.com/fourmond/QSoas&quot;&gt;GitHub repository&lt;/a&gt;.


&lt;p/&gt;&lt;p/&gt;
&lt;h4&gt;About QSoas&lt;/h4&gt;&lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; is a powerful open source data analysis program that focuses on flexibility and powerful fitting capacities. It is released under the &lt;a href=&quot;https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html&quot;&gt;GNU General Public License&lt;/a&gt;. It is described in &lt;a href=&quot;http://pubs.acs.org/doi/abs/10.1021/acs.analchem.6b00224&quot;&gt;Fourmond, Anal. Chem., 2016, 88 (10), pp 5050&amp;#8211;5052&lt;/a&gt;. Current version is &lt;strong&gt;3.0&lt;/strong&gt;. You can download its source code &lt;a href=&quot;http://qsoas.org/downloads/&quot;&gt;there&lt;/a&gt; (or clone from the &lt;a href=&quot;https://github.com/fourmond/QSoas&quot;&gt;GitHub repository&lt;/a&gt;) and compile it yourself, or buy precompiled versions for MacOS and Windows &lt;a href=&quot;https://evalorix.com/en/shop/science-and-engineering-products-and-tools/software-and-apps/qsoas-software/&quot;&gt;there&lt;/a&gt;.
</content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/7438750568684964469/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/7438750568684964469' title='0 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/7438750568684964469'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/7438750568684964469'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2020/12/version-30-of-qsoas-is-out.html' title='Version 3.0 of QSoas is out'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj-U78tOdznI9foML8nNubuPvjgAFqzNy0hPaeIBpYpKjjy8ZWNbIrjGZmsKoN0q6LmbtNJSG3NFkgh3E9LF4KI-wzv1VKvxPO3bEili_pfNlS5xu_TT8o872TOksO6mJ_ZExj3j_cXbWA/s72-c/QSoas-3.0-exploration.png" height="72" width="72"/><thr:total>0</thr:total></entry><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-2853992824062001500</id><published>2020-11-23T19:30:00.003+01:00</published><updated>2020-11-23T19:55:43.040+01:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="meta-data"/><category scheme="http://www.blogger.com/atom/ns#" term="qsoas"/><category scheme="http://www.blogger.com/atom/ns#" term="science"/><category scheme="http://www.blogger.com/atom/ns#" term="tips-and-tricks"/><title type='text'>QSoas tips and tricks: using meta-data, first level</title><content type='html'>By essence, &lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt;  works with \(y = f(x)\) datasets. However, in practice, when working with experimental data (or data generated from simulations), one has often more than one experimental parameter (\(x\)). For instance, one could record series of spectra (\(A = f(\lambda)\)) for different pH values, so that the absorbance is in fact a function of both the pH and \(\lambda\). QSoas has different ways to deal with such situations, and we&#39;ll describe one today, using &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#meta-data&quot;&gt;meta-data&lt;/a&gt;.
&lt;p/&gt;

&lt;h4&gt;Setting meta-data&lt;/h4&gt;

Meta-data are simply series of name/values attached to a dataset. It can be numbers, dates or just text. Some of these are automatically detected from certain type of data files (but that is the topic for another day). The simplest way to set meta-data is to use the &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-set-meta&quot;&gt;&lt;code&gt;set-meta&lt;/code&gt;&lt;/a&gt; command:
&lt;pre&gt;QSoas&gt; set-meta pH 7.5&lt;/pre&gt;
This command sets the meta-data &lt;code&gt;pH&lt;/code&gt; to the value &lt;code&gt;7.5&lt;/code&gt;. Keep in mind that QSoas does not know anything about the meaning of the meta-data&lt;sup&gt;&lt;a href=&quot;#note-1&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt;. It can keep track of the meta-data you give, and manipulate them, but it will not interpret them for you. You can set several meta-data by repeating calls to &lt;code&gt;set-meta&lt;/code&gt;, and you can display the meta-data attached to a dataset using the command &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-show&quot;&gt;&lt;code&gt;show&lt;/code&gt;&lt;/a&gt;. Here is an example:

&lt;pre&gt;QSoas&gt; generate-buffer 0 10
QSoas&gt; set-meta pH 7.5
QSoas&gt; set-meta sample &quot;My sample&quot;
QSoas&gt; show 0
Dataset generated.dat: 2 cols, 1000 rows, 1 segments, #0
Flags: 
Meta-data:	pH =	 7.5	sample =	 My sample&lt;/pre&gt;
Note here the use of quotes around &lt;code&gt;My sample&lt;/code&gt; since there is a space inside the value.
&lt;p&gt;

&lt;h4&gt;Using meta-data&lt;/h4&gt;
There are many ways to use meta-data in QSoas. In this post, we will discuss just one: using meta-data in the &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#output-file&quot;&gt;output file&lt;/a&gt;. The output file can collect data from several commands, like peak data, statistics and so on. For instance, each time the command &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-1&quot;&gt;&lt;code&gt;1&lt;/code&gt;&lt;/a&gt; is run, a line with the information about the largest peak of the current dataset is written to the output file. It is possible to automatically add meta-data to those lines by using the &lt;code&gt;/meta=&lt;/code&gt; option of the &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-output&quot;&gt;&lt;code&gt;output&lt;/code&gt;&lt;/a&gt; command. Just listing the names of the meta-data will add them to each line of the output file.
&lt;p/&gt;
As a full example, we&#39;ll see how one can take advantage of meta-data to determine the position of the peak of the function \(x^2 \exp (-a\,x)\) depends on \(a\). For that, we first create a script that generates the function for a certain value of \(a\), sets the meta-data &lt;code&gt;a&lt;/code&gt; to the corresponding value, and find the peak. Let&#39;s call this file &lt;code&gt;do-one.cmds&lt;/code&gt; (all the script files can be found in the &lt;a href=&quot;https://github.com/fourmond/QSoasExampleFiles/tree/data/Tips-and-Tricks-02&quot;&gt;GitHub repository&lt;/a&gt;):

&lt;pre&gt;generate-buffer 0 20 x**2*exp(-x*${1})
set-meta a ${1}
1 &lt;/pre&gt;

This script takes a single argument, the value of \(a\), generates the appropriate dataset, sets the meta-data &lt;code&gt;a&lt;/code&gt; and writes the data about the largest (and only in this case) peak to the output file. Let&#39;s now run this script with &lt;code&gt;1&lt;/code&gt; as an argument:
&lt;pre&gt;QSoas&gt; @ do-one.cmds 1&lt;/pre&gt;
This command generates a file &lt;code&gt;out.dat&lt;/code&gt; containing the following data:
&lt;pre&gt;## buffer       what    x       y       index   width   left_width      right_width     area
generated.dat   max     2.002002002     0.541340590883  100     3.4034034034    1.24124124124   2.162162162161.99999908761&lt;/pre&gt;
This gives various information about the peak found: the name of the dataset it was found in, whether it&#39;s a maximum or minimum, the x and y positions of the peak, the index in the file, the widths of the peak and its area. We are interested here mainly in the &lt;code&gt;x&lt;/code&gt; position.
&lt;p/&gt;
Then, we just run this script for several values of \(a\) using &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-run-for-each&quot;&gt;&lt;code&gt;run-for-each&lt;/code&gt;&lt;/a&gt;, and in particular the option &lt;code&gt;/range-type=lin&lt;/code&gt; that makes it interpret values like &lt;code&gt;0.5..5:80&lt;/code&gt; as &lt;q&gt;80 values evenly spread between 0.5 and 5&lt;/q&gt;. The script is called &lt;code&gt;run-all.cmds&lt;/code&gt;:
&lt;pre&gt;output peaks.dat /overwrite=true /meta=a
run-for-each do-one.cmds /range-type=lin 0.5..5:80
V all /style=red-to-blue&lt;/pre&gt;
The first line sets up the output to the output file &lt;code&gt;peaks.dat&lt;/code&gt;. The option &lt;code&gt;/meta=a&lt;/code&gt; makes sure the meta &lt;code&gt;a&lt;/code&gt; is added to each line of the output file, and &lt;code&gt;/overwrite=true&lt;/code&gt; make sure the file is overwritten just before the first data is written to it, in order to avoid accumulating the results of different runs of the script. The last line just displays all the curves with a color gradient. It looks like this:
&lt;div class=&quot;separator&quot; style=&quot;clear: both;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiI4MEwmXDogWLH8vMR4yYhruhFmU1VDrzbDvbcT02KoXhpy-vFNKljA4yeLpFZ3euWhcUeVhfgnTdhZnrM6YLfjuuyFF7Gd6ay-lgVVmFOC7ICHFzrOASCbg8AO9HP5yAkoZSgolQ0eyk/s1667/Peaks-1.png&quot; style=&quot;display: block; padding: 1em 0; text-align: center; &quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; width=&quot;400&quot; data-original-height=&quot;1246&quot; data-original-width=&quot;1667&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiI4MEwmXDogWLH8vMR4yYhruhFmU1VDrzbDvbcT02KoXhpy-vFNKljA4yeLpFZ3euWhcUeVhfgnTdhZnrM6YLfjuuyFF7Gd6ay-lgVVmFOC7ICHFzrOASCbg8AO9HP5yAkoZSgolQ0eyk/s400/Peaks-1.png&quot;/&gt;&lt;/a&gt;&lt;/div&gt;

Running this script (with &lt;code&gt;@ run-all.cmds&lt;/code&gt;) creates a new file &lt;code&gt;peaks.dat&lt;/code&gt;, whose first line looks like this:
&lt;pre&gt;## buffer       what    x       y       index   width   left_width      right_width     area    a&lt;/pre&gt;
The column &lt;code&gt;x&lt;/code&gt; (the 3rd) contains the position of the peaks, and the column &lt;code&gt;a&lt;/code&gt; (the 10th) contains the meta &lt;code&gt;a&lt;/code&gt; (this column wasn&#39;t present in the output we described above, because we had not used yet the &lt;code&gt;output /meta=a&lt;/code&gt; command). Therefore, to load the peak position as a function of &lt;code&gt;a&lt;/code&gt;, one has just to run:
&lt;pre&gt;QSoas&gt; load peaks.dat /columns=10,3&lt;/pre&gt;
This looks like this:
&lt;div class=&quot;separator&quot; style=&quot;clear: both;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjOwHEi8IaGYNvjod4WxGzTqU9aIUjnbnqgUg-NGSmPno6S-wilP_1EEHSTdPSK05b9CM5d5Mo4yeJF3qlNOEADKHb5wuhLzD2drkm0piLoNkUasNUAsEmSZaugFMnte-nXr_5EKuTW-cE/s1667/Peaks-2.png&quot; style=&quot;display: block; padding: 1em 0; text-align: center; &quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; width=&quot;400&quot; data-original-height=&quot;1246&quot; data-original-width=&quot;1667&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjOwHEi8IaGYNvjod4WxGzTqU9aIUjnbnqgUg-NGSmPno6S-wilP_1EEHSTdPSK05b9CM5d5Mo4yeJF3qlNOEADKHb5wuhLzD2drkm0piLoNkUasNUAsEmSZaugFMnte-nXr_5EKuTW-cE/s400/Peaks-2.png&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
Et voil !
&lt;p/&gt;

To train further, you can:
&lt;ul&gt;
  &lt;li&gt;improve the resolution in x;&lt;/li&gt;
  &lt;li&gt;improve the resolution in y;&lt;/li&gt;
  &lt;li&gt;plot the &lt;em&gt;magnitude&lt;/em&gt; of the peak;&lt;/li&gt;
  &lt;li&gt;extend the range;&lt;/li&gt;
  &lt;li&gt;derive the analytical formula for the position of the peak and verify it !&lt;/li&gt;
&lt;/ul&gt;
&lt;p/&gt;

&lt;p id=&#39;note-1&#39;&gt;&lt;small&gt;[1] this is not exactly true. For instance, some commands like &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-unwrap&quot;&gt;&lt;code&gt;unwrap&lt;/code&gt;&lt;/a&gt; interpret the &lt;code&gt;sr&lt;/code&gt; meta-data as a voltammetric scan rate if it is present. But this is the exception.&lt;/small&gt;
&lt;/p&gt;
&lt;p /&gt;
&lt;p /&gt;
&lt;h4&gt;About QSoas&lt;/h4&gt;&lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; is a powerful open source data analysis program that focuses on flexibility and powerful fitting capacities. It is released under the &lt;a href=&quot;https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html&quot;&gt;GNU General Public License&lt;/a&gt;. It is described in &lt;a href=&quot;http://pubs.acs.org/doi/abs/10.1021/acs.analchem.6b00224&quot;&gt;Fourmond, Anal. Chem., 2016, 88 (10), pp 5050&amp;#8211;5052&lt;/a&gt;. Current version is &lt;strong&gt;2.2&lt;/strong&gt;. You can download its source code &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/downloads/&quot;&gt;there&lt;/a&gt; (or clone from the &lt;a href=&quot;https://github.com/fourmond/QSoas&quot;&gt;GitHub repository&lt;/a&gt;) and compile it yourself, or buy precompiled versions for MacOS and Windows &lt;a href=&quot;http://qsoas.org/downloads/&quot;&gt;there&lt;/a&gt;.</content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/2853992824062001500/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/2853992824062001500' title='0 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/2853992824062001500'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/2853992824062001500'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2020/11/qsoas-tips-and-tricks-using-meta-data.html' title='QSoas tips and tricks: using meta-data, first level'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiI4MEwmXDogWLH8vMR4yYhruhFmU1VDrzbDvbcT02KoXhpy-vFNKljA4yeLpFZ3euWhcUeVhfgnTdhZnrM6YLfjuuyFF7Gd6ay-lgVVmFOC7ICHFzrOASCbg8AO9HP5yAkoZSgolQ0eyk/s72-c/Peaks-1.png" height="72" width="72"/><thr:total>0</thr:total></entry><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-6882003568113817630</id><published>2020-11-11T20:53:00.000+01:00</published><updated>2020-11-11T20:53:34.813+01:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="qsoas"/><category scheme="http://www.blogger.com/atom/ns#" term="quiz"/><category scheme="http://www.blogger.com/atom/ns#" term="science"/><title type='text'>Solution for QSoas quiz #1: averaging spectra</title><content type='html'>This post describes the solution to the &lt;a href=&quot;https://vince-debian.blogspot.com/2020/10/qsoas-quiz-1-averaging-spectra.html&quot;&gt;Quiz #1&lt;/a&gt;, based on the files found &lt;a href=&quot;https://github.com/fourmond/QSoasExampleFiles/tree/data/Quiz-01&quot;&gt;there&lt;/a&gt;. The point is to produce both the average and the standard deviation of a series of spectra. Below is how the final averaged spectra shoud look like:
&lt;div class=&quot;separator&quot; style=&quot;clear: both;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEig1bvc1bKG0gEHYIWR_ga2RPHjsSDS9c2U_kHhiNAQjJW8HRJRTPzUYDm0WgtOJZJW09Y39MwyE3UBvNgVmTpdwyKgWo0BcOi5nR5Oxw_U26X5GxFYRjQVcyqIO-ZnQM6K9QvZr2X7suQ/s1761/StandardDeviation.png&quot; style=&quot;display: block; padding: 1em 0; text-align: center; &quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; data-original-height=&quot;1060&quot; data-original-width=&quot;1761&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEig1bvc1bKG0gEHYIWR_ga2RPHjsSDS9c2U_kHhiNAQjJW8HRJRTPzUYDm0WgtOJZJW09Y39MwyE3UBvNgVmTpdwyKgWo0BcOi5nR5Oxw_U26X5GxFYRjQVcyqIO-ZnQM6K9QvZr2X7suQ/s400/StandardDeviation.png&quot; width=&quot;400&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
I will present here two different solutions.

&lt;h4&gt;Solution 1: using the definition of standard deviation&lt;/h4&gt;
There is a simple solution using the definition of the standard deviation:

$$\sigma_y = \sqrt{&amp;lt;y^2&amp;gt; - {&amp;lt;y&amp;gt;}^2}$$

in which \(&amp;lt;y^2&amp;gt;\) is the average of \(y^2\) (and so on). So the simplest solution is to construct datasets with an additional column that would contain \(y^2\), average these columns, and replace the average with the above formula. For that, we need first a companion script that loads a single data file and adds a column with \(y^2\). Let&#39;s call this script &lt;code&gt;load-one.cmds&lt;/code&gt;:

&lt;pre&gt;
load ${1}
apply-formula y2=y**2 /extra-columns=1
flag /flags=processed
&lt;/pre&gt;

When this script is run with the name of a spectrum file as argument, it loads it (replaces &lt;code&gt;${1}&lt;/code&gt; by the first argument, the file name), adds a column &lt;code&gt;y2&lt;/code&gt; containing the square of the &lt;code&gt;y&lt;/code&gt; column, and flag it with the &lt;code&gt;processed&lt;/code&gt; flag. This is not absolutely necessary, but it makes it much easier to refer to all the spectra when they are processed. Then to process all the spectra, one just has to run the following commands:

&lt;pre&gt;
run-for-each load-one.cmds Spectrum-1.dat Spectrum-2.dat Spectrum-3.dat
average flagged:processed
apply-formula y2=(y2-y**2)**0.5
dataset-options /yerrors=y2
&lt;/pre&gt;

The &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-run-for-each&quot;&gt;&lt;code&gt;run-for-each&lt;/code&gt;&lt;/a&gt; command runs the &lt;code&gt;load-one.cmds&lt;/code&gt; script for all the spectra (one could also have used &lt;code&gt;Spectra-*.dat&lt;/code&gt; to not have to give all the file names). Then, the &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-average&quot;&gt;&lt;code&gt;average&lt;/code&gt;&lt;/a&gt; averages the values of the columns over all the datasets. To be clear, it finds all the values that have the same X (or very close X values) and average them, column by column. The result of this command is therefore a dataset with the average of the original \(y\) data as &lt;code&gt;y&lt;/code&gt; column and the average of the original \(y^2\) data as &lt;code&gt;y2&lt;/code&gt; column. So now, the only thing left to do is to use the above equation, which is done by the &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-apply-formula&quot;&gt;&lt;code&gt;apply-formula&lt;/code&gt;&lt;/a&gt; code. The last command, &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-dataset-options&quot;&gt;&lt;code&gt;dataset-options&lt;/code&gt;&lt;/a&gt;, is not absolutely necessary but it signals to QSoas that the standard error of the &lt;code&gt;y&lt;/code&gt; column should be found in the &lt;code&gt;y2&lt;/code&gt; column. This is now available as script &lt;code&gt;method-one.cmds&lt;/code&gt; in the &lt;a href=&quot;https://github.com/fourmond/QSoasExampleFiles/tree/data/Quiz-01&quot;&gt;git repository&lt;/a&gt;.
&lt;br/&gt;
&lt;br/&gt;

&lt;h4&gt;Solution 2: use QSoas&#39;s knowledge of standard deviation&lt;/h4&gt;

The other method is a little more involved but it demonstrates a good approach to problem solving with QSoas. The starting point is that, in &lt;code&gt;apply-formula&lt;/code&gt;, the value &lt;code&gt;$stats.y_stddev&lt;/code&gt; corresponds to the standard deviation of the whole &lt;code&gt;y&lt;/code&gt; &lt;b&gt;column&lt;/b&gt;... Loading the spectra yields just a series of &lt;code&gt;x,y&lt;/code&gt; datasets. We can &lt;code&gt;contract&lt;/code&gt; them into a single dataset with one &lt;code&gt;x&lt;/code&gt; column and several &lt;code&gt;y&lt;/code&gt; columns:
  
&lt;pre&gt;
load Spectrum-*.dat /flags=spectra
contract flagged:spectra
&lt;/pre&gt;
  
After these commands, the current dataset contains data in the form of:

&lt;pre&gt;
lambda1	a1_1	a1_2	a1_3
lambda2	a2_1	a2_2	a2_3
...
&lt;/pre&gt;
  in which the &lt;code&gt;a&lt;em&gt;i&lt;/em&gt;_1&lt;/code&gt; come from the first file, &lt;code&gt;a&lt;em&gt;i&lt;/em&gt;_2&lt;/code&gt; the second and so on. We need to use &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-transpose&quot;&gt;&lt;code&gt;transpose&lt;/code&gt;&lt;/a&gt; to transform that dataset into:
  
  &lt;pre&gt;
0	a1_1	a2_1	...
1	a1_2	a2_2	...
2	a1_3	a2_3	...
&lt;/pre&gt;
  
  In this dataset, values of the absorbance for the same wavelength for each dataset is now stored in columns. The next step is just to use &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-expand&quot;&gt;&lt;code&gt;expand&lt;/code&gt;&lt;/a&gt; to obtain a series of datasets with the same x column and a single y column (each corresponding to a different wavelength in the original data). The game is now to replace these datasets with something that looks like:

&lt;pre&gt;
0	a_average
1	a_stddev
&lt;/pre&gt;

For that, one takes advantage of the &lt;code&gt;$stats.y_average&lt;/code&gt; and &lt;code&gt;$stats.y_stddev&lt;/code&gt; values in &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-apply-formula&quot;&gt;&lt;code&gt;apply-formula&lt;/code&gt;&lt;/a&gt;, together with the &lt;code&gt;i&lt;/code&gt; special variable that represents the index of the point:

&lt;pre&gt;
apply-formula &quot;if i == 0; then y=$stats.y_average; end; if i == 1; then y=$stats.y_stddev; end&quot;
strip-if i&gt;1
&lt;/pre&gt;

Then, all that is left is to apply this to all the datasets created by &lt;code&gt;expand&lt;/code&gt;, which can be just made using &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-run-for-datasets&quot;&gt;&lt;code&gt;run-for-datasets&lt;/code&gt;&lt;/a&gt;, and then, we reverse the splitting by using &lt;code&gt;contract&lt;/code&gt; and &lt;code&gt;transpose&lt;/code&gt; ! In summary, this looks like this. We need two files. The first, &lt;code&gt;process-one.cmds&lt;/code&gt; contains the following code:

&lt;pre&gt;
apply-formula &quot;if i == 0; then y=$stats.y_average; end; if i == 1; then y=$stats.y_stddev; end&quot;
strip-if i&gt;1
flag /flags=processed
&lt;/pre&gt;

The main file, &lt;code&gt;method-two.cmds&lt;/code&gt; looks like this:

&lt;pre&gt;
load Spectrum-*.dat /flags=spectra
contract flagged:spectra
transpose
expand /flags=tmp
run-for-datasets process-one.cmds flagged:tmp
contract flagged:processed
transpose
dataset-options /yerrors=y2
&lt;/pre&gt;

&lt;b&gt;Note&lt;/b&gt; some of the code above can be greatly simplified using new features present in the upcoming 3.0 version, but that is the topic for another post.

&lt;p/&gt;
&lt;h4&gt;About QSoas&lt;/h4&gt;&lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; is a powerful open source data analysis program that focuses on flexibility and powerful fitting capacities. It is released under the &lt;a href=&quot;https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html&quot;&gt;GNU General Public License&lt;/a&gt;. It is described in &lt;a href=&quot;http://pubs.acs.org/doi/abs/10.1021/acs.analchem.6b00224&quot;&gt;Fourmond, Anal. Chem., 2016, 88 (10), pp 5050&amp;#8211;5052&lt;/a&gt;. Current version is &lt;strong&gt;2.2&lt;/strong&gt;. You can download its source code and compile it yourself or buy precompiled versions for MacOS and Windows &lt;a href=&quot;http://qsoas.org/downloads/&quot;&gt;there&lt;/a&gt;.

</content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/6882003568113817630/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/6882003568113817630' title='0 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/6882003568113817630'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/6882003568113817630'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2020/11/solution-for-qsoas-quiz-1-averaging.html' title='Solution for QSoas quiz #1: averaging spectra'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEig1bvc1bKG0gEHYIWR_ga2RPHjsSDS9c2U_kHhiNAQjJW8HRJRTPzUYDm0WgtOJZJW09Y39MwyE3UBvNgVmTpdwyKgWo0BcOi5nR5Oxw_U26X5GxFYRjQVcyqIO-ZnQM6K9QvZr2X7suQ/s72-c/StandardDeviation.png" height="72" width="72"/><thr:total>0</thr:total></entry><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-9007516293503008277</id><published>2020-10-22T13:57:00.000+02:00</published><updated>2020-10-22T13:57:13.215+02:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="qsoas"/><category scheme="http://www.blogger.com/atom/ns#" term="science"/><category scheme="http://www.blogger.com/atom/ns#" term="tips-and-tricks"/><category scheme="http://www.blogger.com/atom/ns#" term="tutorial"/><title type='text'>QSoas tips and tricks: generating smooth curves from a fit</title><content type='html'>Often, one would want to generate smooth data from a fit over a small number of data points. For an example, take the data in the &lt;a href=&quot;https://raw.githubusercontent.com/fourmond/QSoasExampleFiles/data/Tips-and-Tricks-01/michaelis.dat&quot;&gt;following file&lt;/a&gt;. It contains (fake) experimental data points that obey to Michaelis-Menten kinetics: 
$$v = \frac{v_m}{1 + K_m/s}$$
in which \(v\) is the measured rate (the y values of the data), \(s\) the concentration of substrate (the x values of the data), \(v_m\) the maximal rate and \(K_m\) the Michaelis constant. To fit this equation to the data, just use the &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-fit-arb&quot;&gt;&lt;code&gt;fit-arb&lt;/code&gt;&lt;/a&gt; fit:
&lt;pre&gt;QSoas&gt; l michaelis.dat
QSoas&gt; fit-arb vm/(1+km/x)&lt;/pre&gt;
After running the fit, the window should look like this:
&lt;div class=&quot;separator&quot; style=&quot;clear: both;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjjwNIGTdoxXU1jQYJFKYs336mK5EGTTDVHUHg9CvPANlrg6WnVjB12lP-KLBj4NGfAS2OUxo1qs7YBtNyfjrpnXzd0Q7iH2ml35PM2rGwul4h-fM-VWvEFxXnhpljygRdrn0UPljbzSBc/s2253/Michaelis-fit.jpeg&quot; style=&quot;display: block; padding: 1em 0; text-align: center; &quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; width=&quot;400&quot; data-original-height=&quot;1048&quot; data-original-width=&quot;2253&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjjwNIGTdoxXU1jQYJFKYs336mK5EGTTDVHUHg9CvPANlrg6WnVjB12lP-KLBj4NGfAS2OUxo1qs7YBtNyfjrpnXzd0Q7iH2ml35PM2rGwul4h-fM-VWvEFxXnhpljygRdrn0UPljbzSBc/s400/Michaelis-fit.jpeg&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
Now, with the fit, we have reasonable values for \(v_m\) (&lt;code&gt;vm&lt;/code&gt;) and \(K_m\) (&lt;code&gt;km&lt;/code&gt;). But, for publication, one would want to generate &quot;smooth&quot; curve going through the lines... Saving the curve from &quot;Data.../Save all&quot; doesn&#39;t help, since the data has as many points as the original data and looks very &quot;jaggy&quot; (like on the screenshot above)... So one needs a curve with more data points.
&lt;p/&gt;
Maybe the most natural solution is simply to use &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-generate-buffer&quot;&gt;&lt;code&gt;generate-buffer&lt;/code&gt;&lt;/a&gt; together with &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-apply-formula&quot;&gt;&lt;code&gt;apply-formula&lt;/code&gt;&lt;/a&gt; using the formula and the values of &lt;code&gt;km&lt;/code&gt; and &lt;code&gt;vm&lt;/code&gt; obtained from the fit, like:
&lt;pre&gt;QSoas&gt; generate-buffer 0 20
QSoas&gt; apply-formula y=3.51742/(1+3.69767/x)&lt;/pre&gt;
By default, &lt;code&gt;generate-buffer&lt;/code&gt; generate 1000 evenly spaced x values, but you can change their number using the &lt;code&gt;/samples&lt;/code&gt; option. The two above commands can be combined to just one call to &lt;code&gt;generate-buffer&lt;/code&gt;:
&lt;pre&gt;QSoas&gt; generate-buffer 0 20 3.51742/(1+3.69767/x)&lt;/pre&gt;
This works, but it is quite cumbersome and it is not going to work well for complex formulas or the results of differential equations or kinetic systems...
&lt;p/&gt;
This is why to each &lt;code&gt;fit-&lt;/code&gt; command corresponds a &lt;code&gt;sim-&lt;/code&gt; command that computes the result of the fit using a &quot;saved parameters&quot; file (here, &lt;a href=&quot;https://raw.githubusercontent.com/fourmond/QSoasExampleFiles/data/Tips-and-Tricks-01/michaelis.params&quot;&gt;&lt;code&gt;michaelis.params&lt;/code&gt;&lt;/a&gt;, but you can also save it yourself) and buffers as &quot;models&quot; for X values:
&lt;pre&gt;QSoas&gt; generate-buffer 0 20
QSoas&gt; sim-arb vm/(1+km/x) michaelis.params 0&lt;/pre&gt;
This strategy works with every single fit ! As an added benefit, you even get the fit parameters as meta-data, which are displayed by the &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-show&quot;&gt;&lt;code&gt;show&lt;/code&gt;&lt;/a&gt; command:
&lt;pre&gt;QSoas&gt; show 0
Dataset generated_fit_arb.dat: 2 cols, 1000 rows, 1 segments, #0
Flags: 
Meta-data:	commands =	 sim-arb vm/(1+km/x) michaelis.params 0	fit =	 arb (formula: vm/(1+km/x))	km =	 3.69767
	vm =	 3.5174&lt;/pre&gt;
They also get saved as comments if you save the data.
&lt;p/&gt;
&lt;b&gt;Important note:&lt;/b&gt; the &lt;code&gt;sim-arb&lt;/code&gt; command will be available only in the 3.0 release, although you can already enjoy it if you use the &lt;a href=&quot;https://github.com/fourmond/QSoas&quot;&gt;github version&lt;/a&gt;.
&lt;p/&gt;
&lt;h4&gt;About QSoas&lt;/h4&gt;&lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; is a powerful open source data analysis program that focuses on flexibility and powerful fitting capacities. It is released under the &lt;a href=&quot;https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html&quot;&gt;GNU General Public License&lt;/a&gt;. It is described in &lt;a href=&quot;http://pubs.acs.org/doi/abs/10.1021/acs.analchem.6b00224&quot;&gt;Fourmond, Anal. Chem., 2016, 88 (10), pp 5050&amp;#8211;5052&lt;/a&gt;. Current version is &lt;strong&gt;2.2&lt;/strong&gt;. You can download its source code and compile it yourself or buy precompiled versions for MacOS and Windows &lt;a href=&quot;http://qsoas.org/downloads/&quot;&gt;there&lt;/a&gt;.

  </content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/9007516293503008277/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/9007516293503008277' title='0 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/9007516293503008277'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/9007516293503008277'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2020/10/qsoas-tips-and-tricks-generating-smooth.html' title='QSoas tips and tricks: generating smooth curves from a fit'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjjwNIGTdoxXU1jQYJFKYs336mK5EGTTDVHUHg9CvPANlrg6WnVjB12lP-KLBj4NGfAS2OUxo1qs7YBtNyfjrpnXzd0Q7iH2ml35PM2rGwul4h-fM-VWvEFxXnhpljygRdrn0UPljbzSBc/s72-c/Michaelis-fit.jpeg" height="72" width="72"/><thr:total>0</thr:total></entry><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-5924356070883341905</id><published>2020-10-07T14:25:00.000+02:00</published><updated>2020-10-07T14:25:11.051+02:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="qsoas"/><category scheme="http://www.blogger.com/atom/ns#" term="quiz"/><category scheme="http://www.blogger.com/atom/ns#" term="science"/><title type='text'>QSoas quiz #1 : averaging spectra</title><content type='html'>Here is the first QSoas quiz ! I recently measured several identical spectra in a row to evaluate the noise of the setup, and so I wanted to average all the spectra and also determine the standard deviation in the absorbances. Averaging the spectra can simply be done taking advantage of the &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-average&quot;&gt;&lt;code&gt;average&lt;/code&gt;&lt;/a&gt; command:
&lt;pre&gt;
QSoas&gt; load Spectrum*.dat /flags=spectra
QSoas&gt; average flagged:spectra
&lt;/pre&gt;
However, &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-average&quot;&gt;&lt;code&gt;average&lt;/code&gt;&lt;/a&gt; does not provide means to make standard deviations, it just takes the average of all but the X column. I wanted to add this feature, but I realized there are already at least two distinct ways to do that...&lt;br /&gt;
&lt;br /&gt;
&lt;h4&gt;Quiz&lt;/h4&gt;
Your task is to determine the average and standard deviations of the three spectra located &lt;a href=&quot;https://github.com/fourmond/QSoasExampleFiles/tree/data/Quiz-01&quot;&gt;there&lt;/a&gt;, (&lt;a href=&quot;https://raw.githubusercontent.com/fourmond/QSoasExampleFiles/data/Quiz-01/Spectrum-1.dat&quot;&gt;&lt;code&gt;Spectrum-1.dat&lt;/code&gt;&lt;/a&gt;, &lt;a href=&quot;https://raw.githubusercontent.com/fourmond/QSoasExampleFiles/data/Quiz-01/Spectrum-2.dat&quot;&gt;&lt;code&gt;Spectrum-2.dat&lt;/code&gt;&lt;/a&gt; and &lt;a href=&quot;https://raw.githubusercontent.com/fourmond/QSoasExampleFiles/data/Quiz-01/Spectrum-3.dat&quot;&gt;&lt;code&gt;Spectrum-3.dat&lt;/code&gt;&lt;/a&gt;). There are at least two ways:
&lt;ul&gt;
  &lt;li&gt;One that relies simply on &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-average&quot;&gt;&lt;code&gt;average&lt;/code&gt;&lt;/a&gt; and on &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-apply-formula&quot;&gt;&lt;code&gt;apply-formula&lt;/code&gt;&lt;/a&gt;, and which requires that you remember how to compute standard deviations.&lt;/li&gt;
  &lt;li&gt;One that is a little more involved, that requires more data manipulation (take a look at &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-contract&quot;&gt;&lt;code&gt;contract&lt;/code&gt;&lt;/a&gt; for instance) and relies on the fact that you can use statistics in &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#cmd-apply-formula&quot;&gt;&lt;code&gt;apply-formula&lt;/code&gt;&lt;/a&gt; (and in particular you can use &lt;code&gt;y_stddev&lt;/code&gt; to refer to the standard deviation of \(y\)), but which does not require you to know exactly how to compute standard deviations.&lt;/li&gt;
&lt;/ul&gt;
To help you, I&#39;ve added the result in &lt;a href=&quot;https://raw.githubusercontent.com/fourmond/QSoasExampleFiles/data/Quiz-01/Average.dat&quot;&gt;&lt;code&gt;Average.dat&lt;/code&gt;&lt;/a&gt;. The figure below shows a zoom on the data superimposed to the average (bonus points to find how to display this light red area that corresponds to the standard deviation !).
&lt;div class=&quot;separator&quot; style=&quot;clear: both;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEig1bvc1bKG0gEHYIWR_ga2RPHjsSDS9c2U_kHhiNAQjJW8HRJRTPzUYDm0WgtOJZJW09Y39MwyE3UBvNgVmTpdwyKgWo0BcOi5nR5Oxw_U26X5GxFYRjQVcyqIO-ZnQM6K9QvZr2X7suQ/s1761/StandardDeviation.png&quot; style=&quot;display: block; padding: 1em 0; text-align: center; &quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; width=&quot;400&quot; data-original-height=&quot;1060&quot; data-original-width=&quot;1761&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEig1bvc1bKG0gEHYIWR_ga2RPHjsSDS9c2U_kHhiNAQjJW8HRJRTPzUYDm0WgtOJZJW09Y39MwyE3UBvNgVmTpdwyKgWo0BcOi5nR5Oxw_U26X5GxFYRjQVcyqIO-ZnQM6K9QvZr2X7suQ/s400/StandardDeviation.png&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
I will post the answer later. In the meantime, feel free to post your own solutions or attempts, hacks, and so on !
&lt;br /&gt;
&lt;br /&gt;
&lt;h4&gt;About QSoas&lt;/h4&gt;&lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; is a powerful open source data analysis program that focuses on flexibility and powerful fitting capacities. It is released under the &lt;a href=&quot;https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html&quot;&gt;GNU General Public License&lt;/a&gt;. It is described in &lt;a href=&quot;http://pubs.acs.org/doi/abs/10.1021/acs.analchem.6b00224&quot;&gt;Fourmond, Anal. Chem., 2016, 88 (10), pp 50505052&lt;/a&gt;. Current version is &lt;strong&gt;2.2&lt;/strong&gt;. You can download its source code or buy precompiled versions for MacOS and Windows &lt;a href=&quot;http://qsoas.org/downloads/&quot;&gt;there&lt;/a&gt;.


</content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/5924356070883341905/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/5924356070883341905' title='0 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/5924356070883341905'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/5924356070883341905'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2020/10/qsoas-quiz-1-averaging-spectra.html' title='QSoas quiz #1 : averaging spectra'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEig1bvc1bKG0gEHYIWR_ga2RPHjsSDS9c2U_kHhiNAQjJW8HRJRTPzUYDm0WgtOJZJW09Y39MwyE3UBvNgVmTpdwyKgWo0BcOi5nR5Oxw_U26X5GxFYRjQVcyqIO-ZnQM6K9QvZr2X7suQ/s72-c/StandardDeviation.png" height="72" width="72"/><thr:total>0</thr:total></entry><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-4294755403581361808</id><published>2020-09-23T16:41:00.000+02:00</published><updated>2020-09-23T16:41:02.302+02:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="qsoas"/><category scheme="http://www.blogger.com/atom/ns#" term="science"/><category scheme="http://www.blogger.com/atom/ns#" term="tutorial"/><title type='text'>Tutorial: analyze Km data of CODHs</title><content type='html'>This is the first post of a series in which we will provide the readers with simple tutorial approaches to reproduce the data analysis of some of our published papers. All our data analysis is performed using &lt;a href=&quot;https://qsoas.org&quot;&gt;QSoas&lt;/a&gt;. Today, we will show you how to analyze the &lt;script type=&quot;math/tex&quot;&gt;K_m&lt;/script&gt; experiments we used to characterize the behaviour of an enzyme, the Nickel-Iron CO dehydrogenase IV from &lt;em&gt;Carboxytothermus hydrogenoformans&lt;/em&gt;. The experiments we analyze here are described in much more details in the original publication, &lt;a href=&quot;https://doi.org/10.1002/anie.201709261&quot;&gt;Domnik &lt;i&gt;et al&lt;/i&gt;, &lt;i&gt;Angewandte Chemie&lt;/i&gt;, &lt;b&gt;2017&lt;/b&gt;&lt;/a&gt;. The only things you need to know for now are the following:
&lt;ul&gt;
  &lt;li&gt; the data is the evolution of the current over time given by the absorbed enzyme;&lt;/li&gt;
  &lt;li&gt; at a given point, a certain amount of CO (50 M) is injected, and its concentration decreases exponentially over time;&lt;/li&gt;
  &lt;li&gt; the enzyme has a Michaelis-Menten behaviour with respect to CO.&lt;/li&gt;
&lt;/ul&gt;
This means that we expect a response of the type: $$i(t) = \frac{i_m}{1 + \frac{K_m}{[\mathrm{CO}](t)}}$$ in which $$[\mathrm{CO}](t) = \begin{cases}
    0, &amp; \text{for } t &lt; t_0  \\ 
    C_0 \exp \frac{t_0 - t}{\tau}, &amp; \text{for }t\geq t_0 %&gt;
\end{cases}$$
&lt;p&gt;
To begin this tutorial, first download the files from the &lt;a href=&quot;https://github.com/fourmond/QSoasExampleFiles/tree/data/Domnik-2017&quot;&gt;github repository&lt;/a&gt; (direct links: &lt;a href=&#39;https://raw.githubusercontent.com/fourmond/QSoasExampleFiles/data/Domnik-2017/Km-CODH-IV.dat&#39;&gt;data&lt;/a&gt;, &lt;a href=&#39;https://raw.githubusercontent.com/fourmond/QSoasExampleFiles/data/Domnik-2017/Km-CODH-IV.params&#39;&gt;parameter file&lt;/a&gt; and &lt;a href=&#39;https://raw.githubusercontent.com/fourmond/QSoasExampleFiles/data/Domnik-2017/transport.rb&#39;&gt;ruby script&lt;/a&gt;). Start QSoas, go to the directory where you saved the files, load the data file, and remove spikes in the data using the following commands:

&lt;pre&gt;QSoas&gt; cd
QSoas&gt; l Km-CODH-IV.dat
QSoas&gt; R
&lt;/pre&gt;
      &lt;h5&gt;First fit&lt;/h5&gt;Then, to fit the above equation to the data, the simplest is to take advantage of the &lt;a href=&quot;https://bip.cnrs.fr/groups/bip06/software/reference/#time-dependent-parameters&quot;&gt;time-dependent parameters&lt;/a&gt; features of &lt;a href=&quot;https://qsoas.org&quot;&gt;QSoas&lt;/a&gt;. Run simply:

&lt;pre&gt;QSoas&gt; fit-arb im/(1+km/s) /with=s:1,exp&lt;/pre&gt;

This simply launches the fit interface to fit the exact equations above. The &lt;code&gt;im/(1+km/s)&lt;/code&gt; is simply the translation of the Michaelis-Menten equation above, and the &lt;code&gt;/with=s:1,exp&lt;/code&gt; specifies that &lt;code&gt;s&lt;/code&gt; is the result of the sum of 1 exponential like for the definition of &lt;script type=&quot;math/tex&quot;&gt;[\mathrm{CO}](t)&lt;/script&gt; above. Then, load the &lt;code&gt;Km-CODH-IV.params&lt;/code&gt; parameter files (using the &quot;Parameters.../Load from file&quot; action at the bottom, or the &lt;code&gt;Ctrl+L&lt;/code&gt; keyboard shortcut). Your window should now look like this:
      &lt;div class=&quot;separator&quot; style=&quot;clear: both;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg9EOsscZSnGrFCsJlwjnWAzb3hhVzyz6CECGdmmdO5ZKhnH7xMWGaMIzIsyo7QP5NZx_XDh3Oe5N3jRjyyllyKYkTVHwmy1olQ_NF3zhyphenhyphenSi6DcR9-EHxz2D4yfNu9Rf_-SCR7Z1vb8_Rk/s1563/CODH-IV-fit-1.png&quot; style=&quot;display: block; padding: 1em 0; text-align: center; &quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; width=&quot;400&quot; data-original-height=&quot;1048&quot; data-original-width=&quot;1563&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg9EOsscZSnGrFCsJlwjnWAzb3hhVzyz6CECGdmmdO5ZKhnH7xMWGaMIzIsyo7QP5NZx_XDh3Oe5N3jRjyyllyKYkTVHwmy1olQ_NF3zhyphenhyphenSi6DcR9-EHxz2D4yfNu9Rf_-SCR7Z1vb8_Rk/s400/CODH-IV-fit-1.png&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
To fit the data, just hit the &quot;Fit&quot; button ! (or &lt;code&gt;Ctrl+F&lt;/code&gt;).
&lt;h5&gt;Including an offset&lt;/h5&gt;
The fit is not bad, but not perfect. In particular, it is easy to see why: the current predicted by the fit goes to 0 at large times, but the actual current is below 0. We need therefore to include an offset to take this into consideration. Close the fit window, and re-run a fit, but now with this command:
&lt;pre&gt;QSoas&gt; fit-arb im/(1+km/s)+io /with=s:1,exp&lt;/pre&gt;
Notice the &lt;code&gt;+io&lt;/code&gt; bit that corresponds to the addition of an offset current. Load again the base parameters, run the fit again... Your fit window show now look like:
&lt;div class=&quot;separator&quot; style=&quot;clear: both;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgTHI45oH98tMDUJdCWg7xInBOCf2erVYl6qGv1u94_UO8gmmsHlAtFUZPkU3SuF8La7WWfjnercwy-k_llNYVo-vOqHm6OtnKAssgQBsd0a_WSoyg1sRqJyL4D0mEl2f-en_rgupeaFik/s1563/CODH-IV-fit-2.png&quot; style=&quot;display: block; padding: 1em 0; text-align: center; &quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; width=&quot;400&quot; data-original-height=&quot;1048&quot; data-original-width=&quot;1563&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgTHI45oH98tMDUJdCWg7xInBOCf2erVYl6qGv1u94_UO8gmmsHlAtFUZPkU3SuF8La7WWfjnercwy-k_llNYVo-vOqHm6OtnKAssgQBsd0a_WSoyg1sRqJyL4D0mEl2f-en_rgupeaFik/s400/CODH-IV-fit-2.png&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
See how the offset current is now much better taken into account. Let&#39;s talk a bit more about the parameters:
&lt;ul&gt;
  &lt;li&gt;&lt;code&gt;im&lt;/code&gt; is \(i_m\), the maximal current, around 120 nA (which matches the magnitude of the original current).&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;io&lt;/code&gt; is the offset current, around -3nA.&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;km&lt;/code&gt; is the \(K_m\), expressed in the same units as &lt;code&gt;s_1&lt;/code&gt;, the first &quot;injected&quot; value of &lt;code&gt;s&lt;/code&gt; (we used 50 because the injection is 50 M CO). That means the value of \(K_m\) determined by this fit is around 9 nM ! (but see below).&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;s_t_1&lt;/code&gt; is the time of the injection of CO (it was in the parameter files you loaded).&lt;/li&gt;
  &lt;li&gt;Finally, &lt;code&gt;s_tau_1&lt;/code&gt; is the time constant of departure of CO, noted \(\tau\) in the equations above.
&lt;/ul&gt;
      
&lt;h5&gt;Taking into account mass-transport limitations&lt;/h5&gt;
However, the fit is still unsatisfactory: the predicted curve fails to reproduce the curvature at the beginning and at the end of the decrease. This is due to issues linked to mass-transport limitations, which are discussed in details in &lt;a href=&quot;https://doi.org/10.1016/j.electacta.2017.03.114&quot;&gt;Merrouch &lt;i&gt;et al&lt;/i&gt;, &lt;i&gt;Electrochimica Acta&lt;/i&gt;, &lt;b&gt;2017&lt;/b&gt;&lt;/a&gt;. In short, what you need to do is to close the fit window again, load the &lt;code&gt;transport.rb&lt;/code&gt; Ruby file that contains the definition of the &lt;code&gt;itrpt&lt;/code&gt; function, and re-launch the fit window using:
      
&lt;pre&gt;QSoas&gt; ruby-run transport.rb
QSoas&gt; fit-arb itrprt(s,km,nFAm,nFAmu)+io /with=s:1,exp&lt;/pre&gt;
Load again the parameter file... but this time you&#39;ll have to play a bit more with the starting parameters for QSoas to find the right values when you fit. Here are some tips:
&lt;ul&gt;
  &lt;li&gt;the curve predicted with the current parameters (use &quot;Update&quot; to update the display) should &quot;look like&quot; the data;&lt;/li&gt;
  &lt;li&gt;apart from &lt;code&gt;io&lt;/code&gt;, no parameter should be negative;&lt;/li&gt;
  &lt;li&gt;there &lt;em&gt;may be&lt;/em&gt; hints about the correct values in the papers...&lt;/li&gt;
&lt;/ul&gt;
A successful fit should look like this:
      &lt;div class=&quot;separator&quot; style=&quot;clear: both;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiwqmI-5hPN4t0mEp_HKJnfU5KBVykzDpvWFhU_cvNnArMSrGUXvO99Zxx0KhhRbHsx4gkMmNNQwebBlZacxCOqw0yV5bBOjmtkiCnAoto9EYGRXF_vIT8fDMT1e3yg0lJOvdAW4Fn5Oao/s1563/CODH-IV-fit-3.png&quot; style=&quot;display: block; padding: 1em 0; text-align: center; &quot;&gt;&lt;img alt=&quot;&quot; border=&quot;0&quot; width=&quot;400&quot; data-original-height=&quot;1048&quot; data-original-width=&quot;1563&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiwqmI-5hPN4t0mEp_HKJnfU5KBVykzDpvWFhU_cvNnArMSrGUXvO99Zxx0KhhRbHsx4gkMmNNQwebBlZacxCOqw0yV5bBOjmtkiCnAoto9EYGRXF_vIT8fDMT1e3yg0lJOvdAW4Fn5Oao/s400/CODH-IV-fit-3.png&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
      
      Here you are ! I hope you enjoyed analyzing our data, and that it will help you analyze &lt;b&gt;yours&lt;/b&gt; ! Feel free to comment and ask for clarifications.&lt;br /&gt;      
&lt;br /&gt;      
&lt;h4&gt;About QSoas&lt;/h4&gt;&lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; is a powerful open source data analysis program that focuses on flexibility and powerful fitting capacities. It is released under the &lt;a href=&quot;https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html&quot;&gt;GNU General Public License&lt;/a&gt;. It is described in &lt;a href=&quot;http://pubs.acs.org/doi/abs/10.1021/acs.analchem.6b00224&quot;&gt;Fourmond, Anal. Chem., 2016, 88 (10), pp 50505052&lt;/a&gt;. Current version is &lt;strong&gt;2.2&lt;/strong&gt;. You can download its source code or buy precompiled versions for MacOS and Windows &lt;a href=&quot;http://qsoas.org/downloads/&quot;&gt;there&lt;/a&gt;.
</content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/4294755403581361808/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/4294755403581361808' title='2 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/4294755403581361808'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/4294755403581361808'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2020/09/tutorial-analyze-km-data-of-codhs.html' title='Tutorial: analyze Km data of CODHs'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg9EOsscZSnGrFCsJlwjnWAzb3hhVzyz6CECGdmmdO5ZKhnH7xMWGaMIzIsyo7QP5NZx_XDh3Oe5N3jRjyyllyKYkTVHwmy1olQ_NF3zhyphenhyphenSi6DcR9-EHxz2D4yfNu9Rf_-SCR7Z1vb8_Rk/s72-c/CODH-IV-fit-1.png" height="72" width="72"/><thr:total>2</thr:total></entry><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-3455257666041475025</id><published>2018-03-21T21:04:00.002+01:00</published><updated>2020-09-23T14:36:25.862+02:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="qsoas"/><category scheme="http://www.blogger.com/atom/ns#" term="science"/><category scheme="http://www.blogger.com/atom/ns#" term="software"/><title type='text'>Release 2.2 of QSoas</title><content type='html'>The new release of &lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; is finally ready ! It brings in a lot of new features and improvements, notably greatly improved memory use for massive multifits, a fit for linear (in)activation processes (the one we used in &lt;a href=&#39;http://dx.doi.org/10.1038/nchem.1892&#39;&gt;Fourmond &lt;em&gt;et al&lt;/em&gt;, Nature Chemistry 2014&lt;/a&gt;), a new way to transform &quot;numbers&quot; like peak position or stats into new datasets and even SVG output ! Following popular demand, it also finally brings back the peak area output in the &lt;a href=&#39;http://qsoas.org/manual.html#cmd-find-peaks&#39;&gt;find-peaks&lt;/a&gt; command (and the other, related commands) ! You can browse the full list of changes &lt;a href=&quot;http://qsoas.org/changes.html&quot;&gt;there&lt;/a&gt;.&lt;br /&gt;
&lt;br /&gt;
The new release can be downloaded from the &lt;a href=&#39;http://qsoas.org/downloads.html&#39;&gt;downloads page&lt;/a&gt;.&lt;br /&gt;
&lt;h4&gt;Freely available binary images for QSoas 1.0&lt;/h4&gt;In addition to the new release, we are now releasing the binary images for MacOS and Windows for the release &lt;code&gt;1.0&lt;/code&gt;. They are also freely available for download from the &lt;a href=&#39;http://qsoas.org/downloads.html&#39;&gt;downloads page&lt;/a&gt;.&lt;br /&gt;
&lt;br /&gt;
&lt;h4&gt;About QSoas&lt;/h4&gt;&lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; is a powerful open source data analysis program that focuses on flexibility and powerful fitting capacities. It is released under the &lt;a href=&quot;https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html&quot;&gt;GNU General Public License&lt;/a&gt;. It is described in &lt;a href=&quot;http://pubs.acs.org/doi/abs/10.1021/acs.analchem.6b00224&quot;&gt;Fourmond, Anal. Chem., 2016, 88 (10), pp 50505052&lt;/a&gt;. Current version is &lt;strong&gt;2.2&lt;/strong&gt;. You can download its source code or buy precompiled versions for MacOS and Windows &lt;a href=&quot;http://qsoas.org/downloads/&quot;&gt;there&lt;/a&gt;.</content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/3455257666041475025/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/3455257666041475025' title='0 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/3455257666041475025'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/3455257666041475025'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2018/03/release-22-of-qsoas.html' title='Release 2.2 of QSoas'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><thr:total>0</thr:total></entry><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-241025559998196415</id><published>2017-10-10T00:31:00.001+02:00</published><updated>2020-09-23T14:36:32.942+02:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="qsoas"/><category scheme="http://www.blogger.com/atom/ns#" term="science"/><category scheme="http://www.blogger.com/atom/ns#" term="software"/><category scheme="http://www.blogger.com/atom/ns#" term="tips-and-tricks"/><title type='text'>Define a function with inline Ruby code in QSoas</title><content type='html'>&lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; can read and execute Ruby code directly, while reading command files, or even at the command prompt. For that, just write plain Ruby code inside a &lt;code&gt;ruby&lt;/code&gt;...&lt;code&gt;ruby end&lt;/code&gt; block. Probably the most useful possibility is to define elaborated functions directly from within &lt;code&gt;QSoas&lt;/code&gt;, or, preferable, from within a script; this is an alternative to defining a function in a completely separated Ruby-only file using &lt;a href=&quot;http://qsoas.org/manual.html#cmd-ruby-run&quot;&gt;ruby-run&lt;/a&gt;. For instance, you can define a function for plain &lt;a href=&quot;https://en.wikipedia.org/wiki/Michaelis%E2%80%93Menten_kinetics&quot;&gt;Michaelis-Menten kinetics&lt;/a&gt; with a file containing:&lt;br /&gt;
&lt;br /&gt;
&lt;pre&gt;ruby
def my_func(x, vm, km)
  return vm/(1 + km/x)
end
ruby end
&lt;/pre&gt;&lt;br /&gt;
This defines the function &lt;code&gt;my_func&lt;/code&gt; with three parameters, &lt;script type=&quot;math/tex&quot;&gt;x&lt;/script&gt;, &lt;script type=&quot;math/tex&quot;&gt;v_m&lt;/script&gt; (&lt;code&gt;vm&lt;/code&gt;) and &lt;script type=&quot;math/tex&quot;&gt;K_m&lt;/script&gt;(&lt;code&gt;km&lt;/code&gt;), with the formula: &lt;script type=&quot;math/tex&quot;&gt;\frac{v_m}{1 + K_m/x}&lt;/script&gt;&lt;br /&gt;
&lt;br /&gt;
You can then test that the function has been correctly defined running for instance:&lt;br /&gt;
&lt;br /&gt;
&lt;pre&gt;QSoas&gt; eval my_func(1.0,1.0,1.0)
 =&gt; 0.5
QSoas&gt; eval my_func(1e4,1.0,1.0)
 =&gt; 0.999900009999
&lt;/pre&gt;&lt;br /&gt;
This yields the correct answer: the first command evaluates the function with &lt;code&gt;x = 1.0&lt;/code&gt;, &lt;code&gt;vm = 1.0&lt;/code&gt; and &lt;code&gt;km = 1.0&lt;/code&gt;. For &lt;script type=&quot;math/tex&quot;&gt;x = K_m&lt;/script&gt;, the result is &lt;script type=&quot;math/tex&quot;&gt;v_m/2&lt;/script&gt; (here &lt;code&gt;0.5&lt;/code&gt;). For &lt;script type=&quot;math/tex&quot;&gt;x \gg K_m&lt;/script&gt;, the result is almost &lt;script type=&quot;math/tex&quot;&gt;v_m&lt;/script&gt;. You can use the newly defined &lt;code&gt;my_func&lt;/code&gt; in any place you would use any ruby code, such as in the &lt;a href=&quot;http://vince-debian.blogspot.fr/2017/02/extended-dataset-generation.html&quot;&gt;optional argument to generate-buffer&lt;/a&gt;, or for &lt;a href=&quot;http://qsoas.org/manual.html#arbitrary-fits&quot;&gt;arbitrary fits&lt;/a&gt;:&lt;br /&gt;
&lt;br /&gt;
&lt;pre&gt;QSoas&gt; generate-buffer 0 10 my_func(x,3.0,0.6)
QSoas&gt; fit-arb my_func(x,vm,km)
&lt;/pre&gt;&lt;br /&gt;
To redefine &lt;code&gt;my_func&lt;/code&gt;, just run the ruby code again with a new definition, such as:&lt;br /&gt;
&lt;pre&gt;ruby
def my_func(x, vm, km)
  return vm/(1 + km/x**2)
end
ruby end
&lt;/pre&gt;The previous version is just erased, and all new uses of &lt;code&gt;my_func&lt;/code&gt; will refer to your new definition.&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;h4&gt;See for yourself&lt;/h4&gt;The code for this example can be found &lt;a href=&quot;https://github.com/fourmond/qsoas-goodies/blob/master/define-ruby-function.cmds&quot;&gt;there&lt;/a&gt;. Browse the &lt;code&gt;qsoas-goodies&lt;/code&gt; &lt;a href=&quot;https://github.com/fourmond/qsoas-goodies/&quot;&gt;github repository&lt;/a&gt; for more goodies !&lt;br /&gt;
&lt;br /&gt;
&lt;h4&gt;About QSoas&lt;/h4&gt;&lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; is a powerful open source data analysis program that focuses on flexibility and powerful fitting capacities. It is released under the &lt;a href=&quot;https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html&quot;&gt;GNU General Public License&lt;/a&gt;. It is described in &lt;a href=&quot;http://pubs.acs.org/doi/abs/10.1021/acs.analchem.6b00224&quot;&gt;Fourmond, Anal. Chem., 2016, 88 (10), pp 50505052&lt;/a&gt;. Current version is &lt;strong&gt;2.1&lt;/strong&gt;. You can download its source code or buy precompiled versions for MacOS and Windows &lt;a href=&quot;http://qsoas.org/downloads/&quot;&gt;there&lt;/a&gt;.&lt;br /&gt;
&lt;br /&gt;
</content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/241025559998196415/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/241025559998196415' title='0 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/241025559998196415'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/241025559998196415'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2017/10/define-function-with-inline-ruby-code.html' title='Define a function with inline Ruby code in QSoas'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><thr:total>0</thr:total></entry><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-5906438607473667126</id><published>2017-09-08T23:42:00.001+02:00</published><updated>2017-09-08T23:42:29.124+02:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="cmdline"/><title type='text'>Extract many attachement from many mails in one go using ripmime</title><content type='html'>I was recently looking for a way to extract many attachments from a series of emails. I first had a look at the &lt;a href=&quot;https://addons.mozilla.org/en-US/thunderbird/addon/attachmentextractor/&quot;&gt;AttachmentExtractor&lt;/a&gt; &lt;a href=&quot;https://www.mozilla.org/en-US/thunderbird/&quot;&gt;thunderbird&lt;/a&gt; plugin, but it seems very old and not maintained anymore. So I&#39;ve come up with another very simple solution that also works with any other mail client.&lt;/p&gt;&lt;p&gt;Just copy all the mails you want to extract attachments from to a single (temporary) mail folder, find out which file holds the mail folder and use &lt;a href=&quot;http://www.pldaniels.com/ripmime/&quot;&gt;ripmime&lt;/a&gt; on that file (ripmime is packaged for &lt;a href=&quot;http://debian.org&quot;&gt;Debian&lt;/a&gt;). For my case, it looked like:&lt;br /&gt;
&lt;/p&gt;&lt;pre&gt;~ ripmime -i .icedove/XXXXXXX.default/Mail/pop.xxxx/tmp -d target-directory
&lt;/pre&gt;&lt;p&gt;Simple solution, but it saved me quite some time. Hope it helps !</content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/5906438607473667126/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/5906438607473667126' title='1 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/5906438607473667126'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/5906438607473667126'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2017/09/extract-many-attachement-from-many.html' title='Extract many attachement from many mails in one go using ripmime'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><thr:total>1</thr:total></entry><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-4026158323032461967</id><published>2017-07-13T10:03:00.002+02:00</published><updated>2017-07-23T15:21:09.587+02:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="graphics"/><category scheme="http://www.blogger.com/atom/ns#" term="hardware"/><category scheme="http://www.blogger.com/atom/ns#" term="help-needed"/><title type='text'>Screen that hurts my eyes, take 2</title><content type='html'>Six month ago, I wrote a &lt;a href=&quot;http://vince-debian.blogspot.fr/2017/01/rfh-screen-that-hurts-my-eyes.html&quot;&gt;lengthy post&lt;/a&gt; about my new computer hurting my eyes. I haven&#39;t made any progress with that, but I&#39;ve accidentally upgraded my work computer from Kernel 4.4 to 4.8 and the nvidia drivers from 340.96-4 to 375.66-2. Well, my work computer now hurts, I&#39;ve switched back to the previous kernel and drivers, I hope it&#39;ll be back to normal.&lt;/p&gt;&lt;p&gt;Any ideas of something specific that changed, either between 4.4 and 4.8 (kernel startup code, default framebuffer modes, etc ?), or between the 340.96 and the 375.66 drivers ? In any case, I&#39;ll try that specific combination of kernels/drivers home to see if I can get it to a useable state.&lt;/p&gt;&lt;h2&gt;Update, July 23rd&lt;/h2&gt;&lt;p&gt;I reverted to the earlier drivers/kernel, to no avail. But it seems in fact the problem with my work computer is linked to an allergy of some kind, since antihistamine drugs have an effect (there are construction works in my lab, perhaps they are the cause ?). No idea still for my &lt;a href=&quot;http://vince-debian.blogspot.fr/2017/01/rfh-screen-that-hurts-my-eyes.html&quot;&gt;home computer&lt;/a&gt;, for which the problem is definitely not solved.</content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/4026158323032461967/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/4026158323032461967' title='8 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/4026158323032461967'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/4026158323032461967'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2017/07/screen-that-hurts-my-eyes-take-2.html' title='Screen that hurts my eyes, take 2'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><thr:total>8</thr:total></entry><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-2479845262342102750</id><published>2017-05-14T00:45:00.000+02:00</published><updated>2017-12-21T14:51:52.045+01:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="cmdline"/><category scheme="http://www.blogger.com/atom/ns#" term="qsoas"/><category scheme="http://www.blogger.com/atom/ns#" term="science"/><category scheme="http://www.blogger.com/atom/ns#" term="software"/><category scheme="http://www.blogger.com/atom/ns#" term="tips-and-tricks"/><title type='text'>Run QSoas complely non-interactively</title><content type='html'>&lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; can run scripts, and, since version 2.0, it can be run completely without user interaction from the command-line (though an interface may be briefly displayed). This possibility relies on the following &lt;a href=&quot;http://bip.cnrs-mrs.fr/bip06/qsoas/manual.html#command-line-options&quot;&gt;command-line options&lt;/a&gt;:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;--run&lt;/code&gt;, which runs the command given on the command-line;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--exit-after-running&lt;/code&gt;, which closes automatically QSoas after all the commands specified by &lt;code&gt;--run&lt;/code&gt; were run;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--stdout&lt;/code&gt; (since version 2.1), which redirects QSoas&#39;s terminal directly to the shell output.&lt;/li&gt;
&lt;/ul&gt;If you create a &lt;code&gt;script.cmds&lt;/code&gt; file containing the following commands:&lt;br /&gt;
&lt;pre&gt;generate-buffer -10 10 sin(x)
save sin.dat
&lt;/pre&gt;and run the following command from your favorite command-line interpreter:&lt;br /&gt;
&lt;pre&gt;~ QSoas --stdout --run &#39;@ script.cmds&#39; --exit-after-running
&lt;/pre&gt;This will create a &lt;code&gt;sin.dat&lt;/code&gt; file containing a sinusoid. However, if you run it twice, a &lt;q&gt;Overwrite file &#39;sin.dat&#39; ?&lt;/q&gt; dialog box will pop up. You can prevent that by adding the &lt;code&gt;/overwrite=true&lt;/code&gt; option to &lt;code&gt;save&lt;/code&gt;. As a general rule, you should avoid all commands that may ask questions in the scripts; a &lt;code&gt;/overwrite=true&lt;/code&gt; option is also available for &lt;code&gt;save-buffers&lt;/code&gt; for instance.&lt;/p&gt;&lt;p&gt;I use this possibility massively because I don&#39;t like to store &lt;q&gt;processed&lt;/q&gt; files, I prefer to store the original data files and run a script to generate the &lt;q&gt;processed&lt;/q&gt; data when I want to plot or to further process them. It can also be used to generate fitted data from saved parameters files. I use this to run automatic tests on Linux, Windows and Mac for every single build, in order to quickly spot platform-specific regressions.&lt;/p&gt;&lt;p&gt;To help you make use of this possibility, here is a shell function (Linux/Mac users only, add to your &lt;code&gt;$HOME/.bashrc&lt;/code&gt; file or equivalent, and restart a terminal) to run directly on QSoas command files:&lt;br /&gt;
&lt;pre&gt;qs-run () {
        QSoas --stdout --run &quot;@ $1&quot; --exit-after-running
}
&lt;/pre&gt;To run the &lt;code&gt;script.cmds&lt;/code&gt; script above, just run&lt;br /&gt;
&lt;pre&gt;~ qs-run script.cmds
&lt;/pre&gt;&lt;br /&gt;
&lt;h4&gt;About QSoas&lt;/h4&gt;&lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; is a powerful open source data analysis program that focuses on flexibility and powerful fitting capacities. It is described in &lt;a href=&quot;http://pubs.acs.org/doi/abs/10.1021/acs.analchem.6b00224&quot;&gt;Fourmond, Anal. Chem., 2016, 88 (10), pp 50505052&lt;/a&gt;. Current version is &lt;strong&gt;2.1&lt;/strong&gt;</content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/2479845262342102750/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/2479845262342102750' title='0 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/2479845262342102750'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/2479845262342102750'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2017/05/run-qsoas-complely-non-interactively.html' title='Run QSoas complely non-interactively'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><thr:total>0</thr:total></entry><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-2869988988599883912</id><published>2017-04-18T23:34:00.000+02:00</published><updated>2017-04-18T23:34:56.051+02:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="cmdline"/><category scheme="http://www.blogger.com/atom/ns#" term="debian"/><category scheme="http://www.blogger.com/atom/ns#" term="scripts"/><category scheme="http://www.blogger.com/atom/ns#" term="utils"/><title type='text'>make-theme-image: a script to make yourself an idea of a icon theme</title><content type='html'>&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi9motOYQhf0B27-Rddq42efZ6TtMW5FrAcJkn6Clz4C9MOz1iG_gcL8hmRcK9YPZjmoF9UVaDSC59Tvp9fFCkGtFCikpYVfjP8VjLoGAKCCuZzipjXV6gHoBlFDQVAp5mV1mt9U3O8S8k/s1600/gnome-icon-theme.png&quot; imageanchor=&quot;1&quot; style=&quot;clear: right; float: right; margin-bottom: 1em; margin-left: 1em;&quot;&gt;&lt;img border=&quot;0&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi9motOYQhf0B27-Rddq42efZ6TtMW5FrAcJkn6Clz4C9MOz1iG_gcL8hmRcK9YPZjmoF9UVaDSC59Tvp9fFCkGtFCikpYVfjP8VjLoGAKCCuZzipjXV6gHoBlFDQVAp5mV1mt9U3O8S8k/s200/gnome-icon-theme.png&quot; width=&quot;200&quot; height=&quot;200&quot; /&gt;&lt;/a&gt;&lt;/div&gt;I created some time ago a &lt;a href=&quot;https://github.com/fourmond/utils&quot;&gt;utils&lt;/a&gt; repository on github to publish miscellaneous scripts, but it&#39;s only recently that I have started to really populate it. One of my recent work is &lt;code&gt;make-theme-image&lt;/code&gt; script, that downloads an icon them package, grabs relevant, user-specifiable, icons, and arrange them in a neat montage. The images displayed are the results of running&lt;br /&gt;
&lt;br /&gt;
&lt;pre&gt;~ make-theme-image gnome-icon-theme moblin-icon-theme
&lt;/pre&gt;&lt;br /&gt;
&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgd3vqQtw94LsRalnA5YWcaqGdcLtHNJ09nghwjhV2PETnThidtWAB-3xL2yWY8IJt4ZcfOxTgvJnF1JGT0-FkIo3T3jZsvahKbFglE9OBpTxmhlQNuQs_fwqoUlHyiMpGZ2J9YZ9TGeA8/s1600/moblin-icon-theme.png&quot; imageanchor=&quot;1&quot; style=&quot;clear: right; float: right; margin-bottom: 1em; margin-left: 1em;&quot;&gt;&lt;img border=&quot;0&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgd3vqQtw94LsRalnA5YWcaqGdcLtHNJ09nghwjhV2PETnThidtWAB-3xL2yWY8IJt4ZcfOxTgvJnF1JGT0-FkIo3T3jZsvahKbFglE9OBpTxmhlQNuQs_fwqoUlHyiMpGZ2J9YZ9TGeA8/s200/moblin-icon-theme.png&quot; width=&quot;200&quot; height=&quot;200&quot; /&gt;&lt;/a&gt;&lt;/div&gt;This is quite useful to get a good idea of the icons available in a package. You can select the icons you want to display using the &lt;code&gt;-w&lt;/code&gt; option. The following command should provide you with a decent overview of the icon themes present in Debian:&lt;br /&gt;
&lt;br /&gt;
&lt;pre&gt;apt search -- -icon-theme | grep / | cut -d/ -f1 | xargs make-theme-image
&lt;/pre&gt;&lt;br /&gt;
I hope you find it useful ! In any case, it&#39;s on &lt;a href=&quot;https://github.com/fourmond/utils&quot;&gt;github&lt;/a&gt;, so feel free to patch and share.</content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/2869988988599883912/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/2869988988599883912' title='1 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/2869988988599883912'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/2869988988599883912'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2017/04/make-theme-image-script-to-make.html' title='make-theme-image: a script to make yourself an idea of a icon theme'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi9motOYQhf0B27-Rddq42efZ6TtMW5FrAcJkn6Clz4C9MOz1iG_gcL8hmRcK9YPZjmoF9UVaDSC59Tvp9fFCkGtFCikpYVfjP8VjLoGAKCCuZzipjXV6gHoBlFDQVAp5mV1mt9U3O8S8k/s72-c/gnome-icon-theme.png" height="72" width="72"/><thr:total>1</thr:total></entry><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-3901097565336983393</id><published>2017-04-03T22:12:00.000+02:00</published><updated>2017-04-03T22:12:36.641+02:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="cmdline"/><category scheme="http://www.blogger.com/atom/ns#" term="linux"/><category scheme="http://www.blogger.com/atom/ns#" term="scripts"/><title type='text'>Variations around ls -lrt</title><content type='html'>I have been using almost compulsively &lt;code&gt;ls -lrt&lt;/code&gt; for a long time now. As per the &lt;a href=&quot;http://http://man7.org/linux/man-pages/man1/ls.1.html&quot;&gt;ls man page&lt;/a&gt;, this command lists the files of the current directory, with the latest files at the end, so that they are the ones that show up just above your next command-line. This is very convenient to work with, hmmm, not-so-well-organized directories, because it just shows what you&#39;re working on, and you can safely ignore the rest. Typical example is a big Downloads directory, for instance, but I use it everywhere. I quickly used &lt;code&gt;alias lrt=&quot;ls -lrt&quot;&lt;/code&gt; to make it easier, but... I though I might have as well a reliable way to &lt;b&gt;directly use&lt;/b&gt; what I saw. So I came up with the following shell function (&lt;a href=&quot;http://www.zsh.org/&quot;&gt;zsh&lt;/a&gt;, but probably works with most Bourne-like shells):&lt;br /&gt;
&lt;pre&gt;lrt() {
    ls -lrt &quot;$@&quot;
    lrt=&quot;$(ls -rt &quot;$@&quot; | tail -n1)&quot;
}
&lt;/pre&gt;This small function runs &lt;code&gt;ls -lrt&lt;/code&gt; as usual, but also sets the &lt;code&gt;$lrt&lt;/code&gt; shell variable to the latest file, so you can use it in your next commands ! Especially useful for complex file names. Demonstration:&lt;br /&gt;
&lt;pre&gt;22:05 vincent@ashitaka ~/Downloads lrt
[...]
-rw-r--r-- 1 vincent vincent   1490027 Apr  2 15:44 k.zip
-rw-r--r-- 1 vincent vincent    668566 Apr  3 22:05 1-s2.0-S0013468617305947-main.pdf
22:06 vincent@ashitaka ~/Downloads cp -v $lrt ~/nice-paper.pdf
&#39;1-s2.0-S0013468617305947-main.pdf&#39; -&gt; &#39;/home/vincent/nice-paper.pdf&#39;
&lt;/pre&gt;This saves typing the name of the &lt;code&gt;1-s2.0-S0013468617305947-main.pdf&lt;/code&gt;: in this case, automatic completion doesn&#39;t help much, since many files in my &lt;code&gt;Downloads&lt;/code&gt; directory start with the same orefix... I hope this helps !&lt;br /&gt;
</content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/3901097565336983393/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/3901097565336983393' title='8 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/3901097565336983393'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/3901097565336983393'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2017/04/variations-around-ls-lrt.html' title='Variations around ls -lrt'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><thr:total>8</thr:total></entry><entry><id>tag:blogger.com,1999:blog-3019054489127059271.post-8830879671627629144</id><published>2017-02-02T22:58:00.000+01:00</published><updated>2017-02-02T22:58:37.987+01:00</updated><category scheme="http://www.blogger.com/atom/ns#" term="qsoas"/><category scheme="http://www.blogger.com/atom/ns#" term="science"/><category scheme="http://www.blogger.com/atom/ns#" term="software"/><category scheme="http://www.blogger.com/atom/ns#" term="tips-and-tricks"/><title type='text'>Extended dataset generation possibilities of QSoas</title><content type='html'>While the main focus of &lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; is the processing of experimental data, it also features commands to generate (calculate) datasets. The command &lt;a href=&quot;http://qsoas.org/manual.html#cmd-generate-buffer&quot;&gt;generate-buffer&lt;/a&gt; creates a dataset of equally spaced points (you can change their number using the option &lt;code&gt;/samples&lt;/code&gt;) between to limiting values, as below:&lt;/p&gt;&lt;pre&gt;QSoas&gt; generate-buffer -2 2
&lt;/pre&gt;&lt;div class=&quot;separator&quot; style=&quot;clear: both; text-align: center;&quot;&gt;&lt;a href=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEibEt5zz4YlxRO5QJ-CP2rtoxA-Eo-w9HGFV0EINUuLdpnquZVUGe_9cXa_RtOUAlt4yCk3NnWCQyV3FOF8WV4KiOtisXBbBFHg8mooqSTsum0Wh5kin1vq_M-l07ut-4htRHEdk8kdysc/s1600/QSoas-generate.png&quot; imageanchor=&quot;1&quot; style=&quot;clear: right; float: right; margin-bottom: 1em; margin-left: 1em;&quot;&gt;&lt;img border=&quot;0&quot; src=&quot;https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEibEt5zz4YlxRO5QJ-CP2rtoxA-Eo-w9HGFV0EINUuLdpnquZVUGe_9cXa_RtOUAlt4yCk3NnWCQyV3FOF8WV4KiOtisXBbBFHg8mooqSTsum0Wh5kin1vq_M-l07ut-4htRHEdk8kdysc/s200/QSoas-generate.png&quot; width=&quot;200&quot; height=&quot;152&quot; /&gt;&lt;/a&gt;&lt;/div&gt;&lt;p&gt;By default, the &lt;script type=&quot;math/tex&quot;&gt;y&lt;/script&gt; values are taken equal to &lt;script type=&quot;math/tex&quot;&gt;x&lt;/script&gt;. However, &lt;a href=&quot;http://qsoas.org/manual.html#cmd-generate-buffer&quot;&gt;generate-buffer&lt;/a&gt; also takes an optional formula to directly set the &lt;script type=&quot;math/tex&quot;&gt;y&lt;/script&gt; values:&lt;br /&gt;
&lt;pre&gt;QSoas&gt; generate-buffer -10 10 sin(x)
&lt;/pre&gt;&lt;p&gt;From version &lt;code&gt;2.0&lt;/code&gt;, it is possible to generate several datasets in a row using the &lt;code&gt;/number&lt;/code&gt; option, and to color them using the &lt;code&gt;/style&lt;/code&gt; option (but only since version &lt;code&gt;2.1&lt;/code&gt;). Each dataset is generated according to the formula, and &lt;code&gt;number&lt;/code&gt; is a special number that starts at 0 and increases by 1 for each dataset. Here&#39;s what I used to generate the picture on the right:&lt;br /&gt;
&lt;pre&gt;QSoas&gt; generate-buffer -2 2 sin(PI*x)**(number+1) /number=30 /style=red-to-blue
&lt;/pre&gt;&lt;h4&gt;About QSoas&lt;/h4&gt;&lt;a href=&quot;http://qsoas.org&quot;&gt;QSoas&lt;/a&gt; is an open source data analysis program that focuses on flexibility and powerful fitting capacities. It is described in &lt;a href=&quot;http://pubs.acs.org/doi/abs/10.1021/acs.analchem.6b00224&quot;&gt;Fourmond, Anal. Chem., 2016, 88 (10), pp 50505052&lt;/a&gt;.</content><link rel='replies' type='application/atom+xml' href='https://vince-debian.blogspot.com/feeds/8830879671627629144/comments/default' title='Post Comments'/><link rel='replies' type='text/html' href='https://www.blogger.com/comment/fullpage/post/3019054489127059271/8830879671627629144' title='0 Comments'/><link rel='edit' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/8830879671627629144'/><link rel='self' type='application/atom+xml' href='https://www.blogger.com/feeds/3019054489127059271/posts/default/8830879671627629144'/><link rel='alternate' type='text/html' href='https://vince-debian.blogspot.com/2017/02/extended-dataset-generation.html' title='Extended dataset generation possibilities of QSoas'/><author><name>Vincent Fourmond</name><uri>http://www.blogger.com/profile/04388598885608111329</uri><email>noreply@blogger.com</email><gd:image rel='http://schemas.google.com/g/2005#thumbnail' width='16' height='16' src='https://img1.blogblog.com/img/b16-rounded.gif'/></author><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEibEt5zz4YlxRO5QJ-CP2rtoxA-Eo-w9HGFV0EINUuLdpnquZVUGe_9cXa_RtOUAlt4yCk3NnWCQyV3FOF8WV4KiOtisXBbBFHg8mooqSTsum0Wh5kin1vq_M-l07ut-4htRHEdk8kdysc/s72-c/QSoas-generate.png" height="72" width="72"/><thr:total>0</thr:total></entry></feed>